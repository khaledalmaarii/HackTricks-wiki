# Temel Ä°kili SÃ¶mÃ¼rÃ¼ Metodolojisi

<details>

<summary><strong>SÄ±fÄ±rdan kahraman olmaya kadar AWS hackleme Ã¶ÄŸrenin</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ±)</strong></a><strong> ile!</strong></summary>

HackTricks'Ä± desteklemenin diÄŸer yollarÄ±:

* **Åirketinizi HackTricks'te reklamÄ±nÄ± gÃ¶rmek istiyorsanÄ±z** veya **HackTricks'i PDF olarak indirmek istiyorsanÄ±z** [**ABONELÄ°K PLANLARI**](https://github.com/sponsors/carlospolop)'na gÃ¶z atÄ±n!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nleri**](https://peass.creator-spring.com)'ni edinin
* [**PEASS Ailesi'ni**](https://opensea.io/collection/the-peass-family) keÅŸfedin, Ã¶zel [**NFT'lerimiz**](https://opensea.io/collection/the-peass-family) koleksiyonumuz
* **KatÄ±lÄ±n** ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) veya bizi **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)** takip edin.**
* **Hacking pÃ¼f noktalarÄ±nÄ±zÄ± gÃ¶ndererek HackTricks ve HackTricks Cloud** github depolarÄ±na PR'lar gÃ¶ndererek paylaÅŸÄ±n.

</details>

## ELF Temel Bilgileri

Herhangi bir ÅŸeyi sÃ¶mÃ¼rmeye baÅŸlamadan Ã¶nce bir **ELF ikilisinin** yapÄ±sÄ±nÄ±n bir kÄ±smÄ±nÄ± anlamak ilginÃ§ olabilir:

{% content-ref url="elf-tricks.md" %}
[elf-tricks.md](elf-tricks.md)
{% endcontent-ref %}

## SÃ¶mÃ¼rÃ¼ AraÃ§larÄ±

{% content-ref url="tools/" %}
[tools](tools/)
{% endcontent-ref %}

## YÄ±ÄŸÄ±n TaÅŸmasÄ± Metodolojisi

Bu kadar teknikle birlikte her teknik ne zaman kullanÄ±ÅŸlÄ± olacaÄŸÄ±nÄ± belirten bir ÅŸemaya sahip olmak iyidir. AynÄ± korumalar farklÄ± teknikleri etkileyecektir. KorumalarÄ± atlatma yollarÄ±nÄ± her koruma bÃ¶lÃ¼mÃ¼nde bulabilirsiniz ancak bu metodolojide deÄŸil.

## AkÄ±ÅŸÄ± Kontrol Etme

Bir programÄ±n akÄ±ÅŸÄ±nÄ± kontrol etmenin farklÄ± yollarÄ± vardÄ±r:

* [**YÄ±ÄŸÄ±n TaÅŸmalarÄ±**](../stack-overflow/): YÄ±ÄŸÄ±n Ã¼zerindeki dÃ¶nÃ¼ÅŸ iÅŸaretÃ§isini veya EBP -> ESP -> EIP'yi Ã¼zerine yazarak.
* TaÅŸmayÄ± tetiklemek iÃ§in bir [**TamsayÄ± TaÅŸmalarÄ±**](../integer-overflow.md) kullanmanÄ±z gerekebilir
* Veya **Keyfi Yazma + Ne Nerede Yazma ile YÃ¼rÃ¼tme**
* [**BiÃ§im dizeleri**](../format-strings/)**:** `printf`'i kÃ¶tÃ¼ye kullanarak keyfi iÃ§eriÄŸi keyfi adreslere yazmak.
* [**Dizi Ä°ndeksleme**](../array-indexing.md): KÃ¶tÃ¼ tasarlanmÄ±ÅŸ bir dizinlemeyi kÃ¶tÃ¼ye kullanarak bazÄ± dizileri kontrol edebilir ve keyfi yazma alabilirsiniz.
* TaÅŸmayÄ± tetiklemek iÃ§in bir [**TamsayÄ± TaÅŸmalarÄ±**](../integer-overflow.md) kullanmanÄ±z gerekebilir
* **bof to WWW via ROP**: Bir tampon taÅŸmasÄ±nÄ± kÃ¶tÃ¼ye kullanarak bir ROP oluÅŸturmak ve bir WWW almak iÃ§in.

**Ne Nerede Yazma YÃ¼rÃ¼tme** tekniklerini ÅŸurada bulabilirsiniz:

{% content-ref url="../arbitrary-write-2-exec/" %}
[arbitrary-write-2-exec](../arbitrary-write-2-exec/)
{% endcontent-ref %}

## Sonsuz DÃ¶ngÃ¼ler

Dikkate alÄ±nmasÄ± gereken bir ÅŸey genellikle **bir zafiyetin sadece bir kez sÃ¶mÃ¼rÃ¼lmesinin yeterli olmayabileceÄŸidir**, Ã¶zellikle bazÄ± korumalarÄ±n atlatÄ±lmasÄ± gerekebilir. Bu nedenle, **aynÄ± yÃ¼rÃ¼tmede bir zafiyeti birden fazla kez sÃ¶mÃ¼rÃ¼lebilir hale getirmek iÃ§in bazÄ± seÃ§enekleri** tartÄ±ÅŸmak ilginÃ§tir:

* Bir **ROP** zincirine **`main` iÅŸlevinin adresini** veya **zafiyetin meydana geldiÄŸi adrese** yazÄ±n.
* Uygun bir ROP zincirini kontrol ederek o zincirdeki tÃ¼m iÅŸlemleri gerÃ§ekleÅŸtirebilirsiniz
* **`exit` adresini GOT'a yazÄ±n** (veya bitmeden Ã¶nce kullanÄ±lan baÅŸka bir iÅŸlevin adresini) **zafiyete geri dÃ¶nmek iÃ§in**
* [**.fini\_array**](../arbitrary-write-2-exec/www2exec-.dtors-and-.fini\_array.md#eternal-loop)'de aÃ§Ä±klandÄ±ÄŸÄ± gibi, burada 2 iÅŸlev saklayÄ±n, biri zafiyeti tekrar Ã§aÄŸÄ±rmak iÃ§in diÄŸeri `.fini_array` iÅŸlevini tekrar Ã§aÄŸÄ±racak olan**`__libc_csu_fini`** iÅŸlevini Ã§aÄŸÄ±rmak iÃ§in.

## SÃ¶mÃ¼rÃ¼ Hedefleri

### Hedef: Varolan bir iÅŸlevi Ã§aÄŸÄ±rmak

* [**ret2win**](./#ret2win): Ã‡aÄŸrÄ±lmasÄ± gereken bir iÅŸlev (belki belirli parametrelerle) varsa bayraÄŸÄ± almak iÃ§in.
* [**PIE**](../common-binary-protections-and-bypasses/pie/) **olmadan** ve [**canary**](../common-binary-protections-and-bypasses/stack-canaries/) ile bir bof'ta sadece yÄ±ÄŸÄ±nda depolanan dÃ¶nÃ¼ÅŸ adresine adresi yazmanÄ±z yeterli olacaktÄ±r.
* [**PIE**](../common-binary-protections-and-bypasses/pie/) ile bir bof'ta, bunu atlatmanÄ±z gerekecektir
* [**canary**](../common-binary-protections-and-bypasses/stack-canaries/) ile bir bof'ta, bunu atlatmanÄ±z gerekecektir
* **ret2win** iÅŸlevini doÄŸru ÅŸekilde Ã§aÄŸÄ±rmak iÃ§in birden fazla parametre ayarlamanÄ±z gerekiyorsa ÅŸunlarÄ± kullanabilirsiniz:
* **Yeterli sayÄ±da araÃ§** varsa [**ROP**](./#rop-and-ret2...-techniques) **zinciri**
* [**SROP**](../rop-return-oriented-programing/srop-sigreturn-oriented-programming.md) (bu sistem Ã§aÄŸrÄ±sÄ±nÄ± yapabiliyorsanÄ±z) birÃ§ok kaydÄ± kontrol etmek iÃ§in
* [**ret2csu**](../rop-return-oriented-programing/ret2csu.md) ve [**ret2vdso**](../rop-return-oriented-programing/ret2vdso.md) 'dan araÃ§lar kullanarak birÃ§ok kaydÄ± kontrol etmek iÃ§in
* Bir [**Ne Nerede Yazma**](../arbitrary-write-2-exec/) kullanarak diÄŸer zafiyetleri (bof olmayanlarÄ±) kÃ¶tÃ¼ye kullanarak **`win`** iÅŸlevini Ã§aÄŸÄ±rabilirsiniz.
* [**Ä°ÅŸaretÃ§ileri YÃ¶nlendirme**](../stack-overflow/pointer-redirecting.md): YÄ±ÄŸÄ±nda, Ã§aÄŸrÄ±lacak bir iÅŸlevin iÅŸaretÃ§ilerini veya bir iÅŸlev tarafÄ±ndan kullanÄ±lacak bir dizeye iÅŸaretÃ§iler varsa, o adresi Ã¼zerine yazabilirsiniz.
* [**ASLR**](../common-binary-protections-and-bypasses/aslr/) veya [**PIE**](../common-binary-protections-and-bypasses/pie/) adresleri etkileyebilir.
* [**Ä°lklenmemiÅŸ deÄŸiÅŸkenler**](../stack-overflow/uninitialized-variables.md): Asla bilemezsiniz.

### Hedef: Uzaktan Kod YÃ¼rÃ¼tme (RCE)

#### Nx devre dÄ±ÅŸÄ± bÄ±rakÄ±lmÄ±ÅŸsa veya kodu karÄ±ÅŸtÄ±rarak shellcode ile:

* [**(YÄ±ÄŸÄ±n) Shellcode**](./#stack-shellcode): Bu, bir shellcode'u yÄ±ÄŸÄ±nda depolamak ve ardÄ±ndan dÃ¶nÃ¼ÅŸ iÅŸaretÃ§isini Ã¼zerine yazarak ona atlamak ve Ã§alÄ±ÅŸtÄ±rmak iÃ§in kullanÄ±ÅŸlÄ±dÄ±r:
* **Her durumda, bir** [**canary**](../common-binary-protections-and-bypasses/stack-canaries/)** varsa**, dÃ¼zenli bir bof'ta bunu atlatmanÄ±z gerekecektir
* [**ASLR**](../common-binary-protections-and-bypasses/aslr/) **ve** [**nx**](../common-binary-protections-and-bypasses/no-exec-nx.md) olmadan yÄ±ÄŸÄ±nÄ±n adresine atlamak mÃ¼mkÃ¼ndÃ¼r Ã§Ã¼nkÃ¼ asla deÄŸiÅŸmeyecektir
* [**ASLR**](../common-binary-protections-and-bypasses/aslr/) ile, ona atlamak iÃ§in [**ret2esp/ret2reg**](../rop-return-oriented-programing/ret2esp-ret2reg.md) gibi teknikler gerekecektir
* [**nx**](../common-binary-protections-and-bypasses/no-exec-nx.md) ile, bir [**ROP**](../rop-return-oriented-programing/) kullanarak `memprotect`'i Ã§aÄŸÄ±rmak ve bazÄ± sayfalarÄ± `rwx` yapmak iÃ§in gerekecektir, ardÄ±ndan oraya shellcode'u depolamak iÃ§in (Ã¶rneÄŸin okuma Ã§aÄŸÄ±rarak) ve ardÄ±ndan oraya atlamak iÃ§in.
* Bu, shellcode'u bir ROP zinciri ile karÄ±ÅŸtÄ±racaktÄ±r.
#### Syscall Yoluyla

* [**Ret2syscall**](../rop-return-oriented-programing/rop-syscall-execv.md): Herhangi bir komutu Ã§alÄ±ÅŸtÄ±rmak iÃ§in `execve`'yi Ã§aÄŸÄ±rmak iÃ§in kullanÄ±ÅŸlÄ±dÄ±r. **Belirli bir syscall'Ä± parametrelerle Ã§aÄŸÄ±rmak iÃ§in gerekli olan gadget'larÄ± bulabilmeniz gerekir**.
* EÄŸer [**ASLR**](../common-binary-protections-and-bypasses/aslr/) veya [**PIE**](../common-binary-protections-and-bypasses/pie/) etkinse, ROP gadget'larÄ±nÄ± kullanabilmek iÃ§in bunlarÄ± **geÃ§mek zorundasÄ±nÄ±z**.
* [**SROP**](../rop-return-oriented-programing/srop-sigreturn-oriented-programming.md) **ret2execve'yi hazÄ±rlamak iÃ§in** kullanÄ±ÅŸlÄ± olabilir.
* [**ret2csu**](../rop-return-oriented-programing/ret2csu.md) ve [**ret2vdso**](../rop-return-oriented-programing/ret2vdso.md) ile Ã§eÅŸitli register'larÄ± kontrol etmek iÃ§in gadget'lar

#### Libc Ãœzerinden

* [**Ret2lib**](../rop-return-oriented-programing/ret2lib/): Genellikle **`libc`** gibi bir kÃ¼tÃ¼phaneden bir fonksiyonu (genellikle **`system`**) Ã§aÄŸÄ±rmak iÃ§in kullanÄ±ÅŸlÄ±dÄ±r ve bazÄ± hazÄ±rlanmÄ±ÅŸ argÃ¼manlarla (Ã¶r. `'/bin/sh'`). Ã‡aÄŸÄ±rmak istediÄŸiniz fonksiyonun kÃ¼tÃ¼phaneyi yÃ¼klemesi gerekir (genellikle libc).
* **Statik olarak derlenmiÅŸ ve** [**PIE**](../common-binary-protections-and-bypasses/pie/) **etkin deÄŸilse**, `system` ve `/bin/sh`'nin **adresleri deÄŸiÅŸmeyecek**, bu yÃ¼zden bunlarÄ± statik olarak kullanmak mÃ¼mkÃ¼ndÃ¼r.
* **ASLR olmadan** [**ve yÃ¼klÃ¼ libc sÃ¼rÃ¼mÃ¼nÃ¼ bildiÄŸinizde**, `system` ve `/bin/sh`'nin **adresleri deÄŸiÅŸmeyecek**, bu yÃ¼zden bunlarÄ± statik olarak kullanmak mÃ¼mkÃ¼ndÃ¼r.
* [**ASLR**](../common-binary-protections-and-bypasses/aslr/) **ancak** [**PIE**](../common-binary-protections-and-bypasses/pie/) **etkin deÄŸilse**, libc'yi bildiÄŸiniz ve binary'nin `system` fonksiyonunu kullandÄ±ÄŸÄ± durumda, `'/bin/sh'` adresiyle birlikte **GOT'taki system adresine `ret` yapmak** mÃ¼mkÃ¼ndÃ¼r (bunu Ã§Ã¶zmeniz gerekecek).
* [ASLR](../common-binary-protections-and-bypasses/aslr/) **ancak** [PIE](../common-binary-protections-and-bypasses/pie/) **etkin deÄŸilse**, libc'yi bildiÄŸiniz ve **binary'nin `system`'i kullanmadÄ±ÄŸÄ± durumda**:
* `system` adresini Ã§Ã¶zmek ve Ã§aÄŸÄ±rmak iÃ§in [**`ret2dlresolve`**](../rop-return-oriented-programing/ret2dlresolve.md) kullanÄ±n
* **ASLR'yi atlayÄ±n** ve `system` ve `'/bin/sh'` adreslerini hafÄ±zada hesaplayÄ±n.
* [**ASLR**](../common-binary-protections-and-bypasses/aslr/) **ve** [**PIE**](../common-binary-protections-and-bypasses/pie/) **etkin ve libc sÃ¼rÃ¼mÃ¼nÃ¼ bilmiyorsanÄ±z**: ÅunlarÄ± yapmanÄ±z gerekir:
* [PIE'yi atlayÄ±n](../common-binary-protections-and-bypasses/pie/)
* KullanÄ±lan **`libc` sÃ¼rÃ¼mÃ¼nÃ¼** bulun (birkaÃ§ fonksiyon adresini sÄ±zdÄ±rÄ±n)
* Devam etmek iÃ§in **ASLR ile Ã¶nceki senaryolarÄ± kontrol edin**.

#### EBP/RBP Ãœzerinden

* [**Stack Pivoting / EBP2Ret / EBP Chaining**](../stack-overflow/stack-pivoting-ebp2ret-ebp-chaining.md): ESP'yi kontrol ederek stack'te depolanan EBP aracÄ±lÄ±ÄŸÄ±yla RET'i kontrol etmek.
* **Off-by-one** stack overflow'lar iÃ§in kullanÄ±ÅŸlÄ±dÄ±r
* EIP'yi kontrol etmeyi sonlandÄ±rmanÄ±n alternatif bir yol olarak kullanÄ±ÅŸlÄ±dÄ±r, EIP'yi hafÄ±zada payload'Ä± oluÅŸturmak iÃ§in kÃ¶tÃ¼ye kullanÄ±rken ve ardÄ±ndan EBP aracÄ±lÄ±ÄŸÄ±yla ona atlayarak.

#### Ã‡eÅŸitli

* [**Pointers Redirecting**](../stack-overflow/pointer-redirecting.md): Stack'te Ã§aÄŸrÄ±lacak bir fonksiyonun veya ilginÃ§ bir fonksiyon tarafÄ±ndan kullanÄ±lacak bir dizeye iÅŸaret eden iÅŸaretÃ§iler varsa, o adresi Ã¼zerine yazmak mÃ¼mkÃ¼ndÃ¼r.
* [**ASLR**](../common-binary-protections-and-bypasses/aslr/) veya [**PIE**](../common-binary-protections-and-bypasses/pie/) adresleri etkileyebilir.
* [**Ä°lklenmemiÅŸ deÄŸiÅŸkenler**](../stack-overflow/uninitialized-variables.md): Asla bilemezsiniz
