# Relro

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Relro

**RELRO** ä»£è¡¨ **Relocation Read-Only**ï¼Œå®ƒæ˜¯ä¸€ç§ç”¨äºäºŒè¿›åˆ¶æ–‡ä»¶çš„å®‰å…¨ç‰¹æ€§ï¼Œç”¨äºå‡è½»ä¸ **GOT (Global Offset Table)** é‡å†™ç›¸å…³çš„é£é™©ã€‚**RELRO** ä¿æŠ¤æœ‰ä¸¤ç§ç±»å‹ï¼šï¼ˆ1ï¼‰**éƒ¨åˆ† RELRO** å’Œï¼ˆ2ï¼‰**å®Œå…¨ RELRO**ã€‚å®ƒä»¬éƒ½é‡æ–°æ’åˆ—äº† ELF æ–‡ä»¶ä¸­çš„ **GOT** å’Œ **BSS**ï¼Œä½†ç»“æœå’Œå½±å“ä¸åŒã€‚å…·ä½“æ¥è¯´ï¼Œå®ƒä»¬å°† **GOT** éƒ¨åˆ†æ”¾åœ¨ **BSS** ä¹‹å‰ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ**GOT** çš„åœ°å€ä½äº **BSS**ï¼Œå› æ­¤é€šè¿‡æº¢å‡º **BSS** ä¸­çš„å˜é‡æ¥é‡å†™ **GOT** æ¡ç›®æ˜¯ä¸å¯èƒ½çš„ï¼ˆè®°ä½ï¼Œå†™å…¥å†…å­˜æ˜¯ä»ä½åœ°å€å‘é«˜åœ°å€è¿›è¡Œçš„ï¼‰ã€‚

è®©æˆ‘ä»¬å°†è¿™ä¸ªæ¦‚å¿µåˆ†è§£ä¸ºä¸¤ä¸ªä¸åŒçš„ç±»å‹ä»¥ä¾¿äºç†è§£ã€‚

### **éƒ¨åˆ† RELRO**

**éƒ¨åˆ† RELRO** é‡‡å–äº†ä¸€ç§æ›´ç®€å•çš„æ–¹æ³•æ¥å¢å¼ºå®‰å…¨æ€§ï¼Œè€Œä¸ä¼šæ˜¾è‘—å½±å“äºŒè¿›åˆ¶æ–‡ä»¶çš„æ€§èƒ½ã€‚éƒ¨åˆ† RELRO ä½¿ **.got å˜ä¸ºåªè¯»ï¼ˆGOT éƒ¨åˆ†çš„é PLT éƒ¨åˆ†ï¼‰**ã€‚è¯·æ³¨æ„ï¼Œéƒ¨åˆ†ï¼ˆå¦‚ .got.pltï¼‰ä»ç„¶æ˜¯å¯å†™çš„ï¼Œå› æ­¤ä»ç„¶å®¹æ˜“å—åˆ°æ”»å‡»ã€‚è¿™ **å¹¶ä¸é˜²æ­¢ GOT** è¢« **ä»»æ„å†™å…¥** æ¼æ´æ»¥ç”¨ã€‚

æ³¨æ„ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼ŒGCC ç¼–è¯‘çš„äºŒè¿›åˆ¶æ–‡ä»¶å…·æœ‰éƒ¨åˆ† RELROã€‚

### **å®Œå…¨ RELRO**

**å®Œå…¨ RELRO** é€šè¿‡ **ä½¿æ•´ä¸ª GOTï¼ˆåŒ…æ‹¬ .got å’Œ .got.pltï¼‰å’Œ .fini\_array** éƒ¨åˆ†å®Œå…¨ **åªè¯»** æ¥å¢å¼ºä¿æŠ¤ã€‚ä¸€æ—¦äºŒè¿›åˆ¶æ–‡ä»¶å¯åŠ¨ï¼Œæ‰€æœ‰å‡½æ•°åœ°å€éƒ½ä¼šåœ¨ GOT ä¸­è§£æå¹¶åŠ è½½ï¼Œç„¶åï¼ŒGOT è¢«æ ‡è®°ä¸ºåªè¯»ï¼Œæœ‰æ•ˆåœ°é˜²æ­¢åœ¨è¿è¡Œæ—¶å¯¹å…¶è¿›è¡Œä»»ä½•ä¿®æ”¹ã€‚

ç„¶è€Œï¼Œå®Œå…¨ RELRO çš„æƒè¡¡åœ¨äºæ€§èƒ½å’Œå¯åŠ¨æ—¶é—´ã€‚å› ä¸ºå®ƒéœ€è¦åœ¨å¯åŠ¨æ—¶è§£ææ‰€æœ‰åŠ¨æ€ç¬¦å·ï¼Œç„¶åå†å°† GOT æ ‡è®°ä¸ºåªè¯»ï¼Œ**å¯ç”¨å®Œå…¨ RELRO çš„äºŒè¿›åˆ¶æ–‡ä»¶å¯èƒ½ä¼šç»å†æ›´é•¿çš„åŠ è½½æ—¶é—´**ã€‚è¿™ç§é¢å¤–çš„å¯åŠ¨å¼€é”€æ˜¯å®Œå…¨ RELRO åœ¨æ‰€æœ‰äºŒè¿›åˆ¶æ–‡ä»¶ä¸­é»˜è®¤æœªå¯ç”¨çš„åŸå› ã€‚

å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼æŸ¥çœ‹äºŒè¿›åˆ¶æ–‡ä»¶æ˜¯å¦ **å¯ç”¨** å®Œå…¨ RELROï¼š
```bash
readelf -l /proc/ID_PROC/exe | grep BIND_NOW
```
## ç»•è¿‡

å¦‚æœå¯ç”¨äº†å®Œæ•´çš„ RELROï¼Œç»•è¿‡å®ƒçš„å”¯ä¸€æ–¹æ³•æ˜¯æ‰¾åˆ°å¦ä¸€ç§ä¸éœ€è¦åœ¨ GOT è¡¨ä¸­å†™å…¥ä»¥è·å–ä»»æ„æ‰§è¡Œçš„æ–¹æ³•ã€‚

è¯·æ³¨æ„ï¼Œ**LIBC çš„ GOT é€šå¸¸æ˜¯éƒ¨åˆ† RELRO**ï¼Œå› æ­¤å¯ä»¥é€šè¿‡ä»»æ„å†™å…¥è¿›è¡Œä¿®æ”¹ã€‚æ›´å¤šä¿¡æ¯è¯·å‚è§ [Targetting libc GOT entries](https://github.com/nobodyisnobody/docs/blob/main/code.execution.on.last.libc/README.md#1---targetting-libc-got-entries)**.**

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
