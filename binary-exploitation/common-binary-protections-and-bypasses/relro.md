# Relro

<details>

<summary><strong>Naucz siÄ™ hakowaÄ‡ AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Inne sposoby wsparcia HackTricks:

* JeÅ›li chcesz zobaczyÄ‡ swojÄ… **firmÄ™ reklamowanÄ… w HackTricks** lub **pobraÄ‡ HackTricks w formacie PDF**, sprawdÅº [**PLANY SUBSKRYPCYJNE**](https://github.com/sponsors/carlospolop)!
* Kup [**oficjalne gadÅ¼ety PEASS & HackTricks**](https://peass.creator-spring.com)
* Odkryj [**RodzinÄ™ PEASS**](https://opensea.io/collection/the-peass-family), naszÄ… kolekcjÄ™ ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* **DoÅ‚Ä…cz do** ğŸ’¬ [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **Å›ledÅº** nas na **Twitterze** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Podziel siÄ™ swoimi sztuczkami hakerskimi, przesyÅ‚ajÄ…c PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

## Relro

**RELRO** oznacza **Relocation Read-Only** i jest funkcjÄ… zabezpieczeÅ„ stosowanÄ… w plikach binarnych w celu zmniejszenia ryzyka zwiÄ…zanego z nadpisywaniem **GOT (Global Offset Table)**. Rozbijmy ten koncept na dwa odrÄ™bne typy dla jasnoÅ›ci: **CzÄ™Å›ciowy RELRO** i **PeÅ‚ny RELRO**.

### **CzÄ™Å›ciowy RELRO**

**CzÄ™Å›ciowy RELRO** stosuje prostsze podejÅ›cie do poprawy bezpieczeÅ„stwa bez znacznego wpÅ‚ywu na wydajnoÅ›Ä‡ binariÃ³w. Poprzez **umieszczenie GOT powyÅ¼ej zmiennych programu w pamiÄ™ci, CzÄ™Å›ciowy RELRO ma na celu zapobieganie dotarciu i uszkodzeniu GOT przez przepeÅ‚nienie bufora**.&#x20;

To **nie zapobiega naduÅ¼ywaniu GOT** z podatnoÅ›ci na **dowolne zapisy**.

### **PeÅ‚ny RELRO**

**PeÅ‚ny RELRO** podnosi ochronÄ™ poprzez **caÅ‚kowite oznaczenie GOT i sekcji .fini\_array jako tylko do odczytu.** Gdy binarny siÄ™ uruchamia, wszystkie adresy funkcji sÄ… rozwiÄ…zywane i Å‚adowane do GOT, a nastÄ™pnie GOT jest oznaczane jako tylko do odczytu, skutecznie uniemoÅ¼liwiajÄ…c jakiekolwiek modyfikacje podczas dziaÅ‚ania.

JednakÅ¼e, w przypadku PeÅ‚nego RELRO, pojawia siÄ™ kompromis pod wzglÄ™dem wydajnoÅ›ci i czasu uruchamiania. PoniewaÅ¼ naleÅ¼y rozwiÄ…zaÄ‡ wszystkie symbole dynamiczne podczas uruchamiania przed oznaczeniem GOT jako tylko do odczytu, **binaria z wÅ‚Ä…czonym PeÅ‚nym RELRO mogÄ… doÅ›wiadczyÄ‡ dÅ‚uÅ¼szych czasÃ³w Å‚adowania**. Dodatkowe obciÄ…Å¼enie podczas uruchamiania to powÃ³d, dla ktÃ³rego PeÅ‚ny RELRO nie jest domyÅ›lnie wÅ‚Ä…czony we wszystkich binariach.

MoÅ¼na sprawdziÄ‡, czy PeÅ‚ny RELRO jest **wÅ‚Ä…czony** w binariach za pomocÄ…:
```bash
readelf -l /proc/ID_PROC/exe | grep BIND_NOW
```
## Bypass

JeÅ›li peÅ‚ne RELRO jest wÅ‚Ä…czone, jedynym sposobem na jego ominiÄ™cie jest znalezienie innego sposobu, ktÃ³ry nie wymaga zapisu do tabeli GOT, aby uzyskaÄ‡ dowolne wykonanie.

NaleÅ¼y zauwaÅ¼yÄ‡, Å¼e **GOT LIBC jest zazwyczaj czÄ™Å›ciowo zabezpieczone RELRO**, wiÄ™c moÅ¼e byÄ‡ zmodyfikowane za pomocÄ… dowolnego zapisu. WiÄ™cej informacji w [Targetting libc GOT entries](https://github.com/nobodyisnobody/docs/blob/main/code.execution.on.last.libc/README.md#1---targetting-libc-got-entries)**.**
