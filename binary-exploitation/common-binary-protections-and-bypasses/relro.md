# Relro

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** 游눫 [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** 游냕 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Relro

**RELRO** ozna캜ava **Relocation Read-Only**, i to je bezbednosna funkcija koja se koristi u binarnim datotekama kako bi se smanjili rizici povezani sa **GOT (Global Offset Table)** prepisivanjem. Postoje dve vrste **RELRO** za코tita: (1) **Delimi캜ni RELRO** i (2) **Potpuni RELRO**. Obe preure캠uju **GOT** i **BSS** iz ELF datoteka, ali sa razli캜itim rezultatima i implikacijama. Konkretno, postavljaju **GOT** sekciju *pre* **BSS**. To jest, **GOT** se nalazi na ni쬴m adresama od **BSS**, 캜ime se onemogu캖ava prepisivanje **GOT** unosa prelivanjem promenljivih u **BSS** (zapamtite da se pisanje u memoriju de코ava od ni쬴h ka vi코im adresama).

Hajde da razlo쬴mo koncept na njegove dve razli캜ite vrste radi jasno캖e.

### **Delimi캜ni RELRO**

**Delimi캜ni RELRO** koristi jednostavniji pristup za pobolj코anje bezbednosti bez zna캜ajnog uticaja na performanse binarne datoteke. Delimi캜ni RELRO 캜ini **.got samo za 캜itanje (deo GOT sekcije koji nije PLT)**. Imajte na umu da je ostatak sekcije (kao 코to je .got.plt) i dalje mogu캖e pisati i, stoga, podlo쬬n napadima. Ovo **ne spre캜ava GOT** da bude zloupotrebljen **iz ranjivosti sa proizvoljnim pisanjem**.

Napomena: Po defaultu, GCC kompajlira binarne datoteke sa Delimi캜nim RELRO.

### **Potpuni RELRO**

**Potpuni RELRO** poja캜ava za코titu tako 코to **캜ini celu GOT (i .got i .got.plt) i .fini\_array** sekciju potpuno **samo za 캜itanje.** Kada se binarna datoteka pokrene, sve adrese funkcija se re코avaju i u캜itavaju u GOT, zatim, GOT se ozna캜ava kao samo za 캜itanje, efikasno spre캜avaju캖i bilo kakve izmene tokom izvr코avanja.

Me캠utim, kompromis sa Potpunim RELRO je u pogledu performansi i vremena pokretanja. Po코to je potrebno re코iti sve dinami캜ke simbole prilikom pokretanja pre nego 코to se GOT ozna캜i kao samo za 캜itanje, **binarne datoteke sa omogu캖햣햫햦햪 Potpunim RELRO mogu do쬴veti du쬰 vreme u캜itavanja**. Ova dodatna prekomerna optere캖enja prilikom pokretanja su razlog za코to Potpuni RELRO nije omogu캖햣햫 po defaultu u svim binarnim datotekama.

Mogu캖e je videti da li je Potpuni RELRO **omogu캖en** u binarnoj datoteci sa:
```bash
readelf -l /proc/ID_PROC/exe | grep BIND_NOW
```
## Bypass

Ako je Full RELRO omogu캖en, jedini na캜in da se zaobi캠e je da se prona캠e drugi na캜in koji ne zahteva pisanje u GOT tabelu za dobijanje proizvoljne izvr코ne radnje.

Napomena: **LIBC-ova GOT je obi캜no Partial RELRO**, tako da se mo쬰 modifikovati sa proizvoljnim pisanjem. Vi코e informacija u [Targetting libc GOT entries](https://github.com/nobodyisnobody/docs/blob/main/code.execution.on.last.libc/README.md#1---targetting-libc-got-entries)**.**

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** 游눫 [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** 游냕 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
