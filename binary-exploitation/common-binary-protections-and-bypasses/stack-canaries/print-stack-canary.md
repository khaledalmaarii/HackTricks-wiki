# æ‰“å°æ ˆä¿æŠ¤ Canaries

{% hint style="success" %}
å­¦ä¹ å¹¶ç»ƒä¹  AWS é»‘å®¢æŠ€æœ¯ï¼š<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks åŸ¹è®­ AWS çº¢é˜Ÿä¸“å®¶ (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
å­¦ä¹ å¹¶ç»ƒä¹  GCP é»‘å®¢æŠ€æœ¯ï¼š<img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks åŸ¹è®­ GCP çº¢é˜Ÿä¸“å®¶ (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>æ”¯æŒ HackTricks</summary>

* æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**ç”µæŠ¥ç¾¤ç»„**](https://t.me/peass) æˆ– **å…³æ³¨**æˆ‘ä»¬çš„ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* é€šè¿‡å‘ [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github ä»“åº“æäº¤ PR æ¥åˆ†äº«é»‘å®¢æŠ€å·§ã€‚

</details>
{% endhint %}

## æ”¾å¤§æ‰“å°çš„æ ˆ

æƒ³è±¡ä¸€ç§æƒ…å†µï¼Œä¸€ä¸ª**å®¹æ˜“å—åˆ°æ ˆæº¢å‡ºæ”»å‡»**çš„ç¨‹åºå¯ä»¥æ‰§è¡Œä¸€ä¸ª**æŒ‡å‘æ ˆæº¢å‡ºéƒ¨åˆ†**çš„**puts**å‡½æ•°ã€‚æ”»å‡»è€…çŸ¥é“**canaryçš„ç¬¬ä¸€ä¸ªå­—èŠ‚æ˜¯ç©ºå­—èŠ‚**(`\x00`)ï¼Œå…¶ä½™çš„canaryæ˜¯**éšæœº**å­—èŠ‚ã€‚ç„¶åï¼Œæ”»å‡»è€…å¯ä»¥åˆ›å»ºä¸€ä¸ªæº¢å‡ºï¼Œ**è¦†ç›–æ ˆç›´åˆ°canaryçš„ç¬¬ä¸€ä¸ªå­—èŠ‚**ã€‚

ç„¶åï¼Œæ”»å‡»è€…åœ¨æœ‰æ•ˆè´Ÿè½½çš„ä¸­é—´**è°ƒç”¨ puts åŠŸèƒ½**ï¼Œè¿™å°†**æ‰“å°æ‰€æœ‰çš„canary**ï¼ˆé™¤äº†ç¬¬ä¸€ä¸ªç©ºå­—èŠ‚ï¼‰ã€‚

æœ‰äº†è¿™äº›ä¿¡æ¯ï¼Œæ”»å‡»è€…å¯ä»¥**æ„é€ å¹¶å‘é€ä¸€ä¸ªæ–°çš„æ”»å‡»**ï¼ŒçŸ¥é“äº†canaryï¼ˆåœ¨**åŒä¸€ä¸ªç¨‹åºä¼šè¯**ä¸­ï¼‰ã€‚

æ˜¾ç„¶ï¼Œè¿™ç§ç­–ç•¥éå¸¸**å—é™**ï¼Œå› ä¸ºæ”»å‡»è€…éœ€è¦èƒ½å¤Ÿ**æ‰“å°**ä»–çš„**æœ‰æ•ˆè´Ÿè½½**çš„**å†…å®¹**ä»¥**å¤–æ³„canary**ï¼Œç„¶åèƒ½å¤Ÿåˆ›å»ºä¸€ä¸ªæ–°çš„æœ‰æ•ˆè´Ÿè½½ï¼ˆåœ¨**åŒä¸€ä¸ªç¨‹åºä¼šè¯**ä¸­ï¼‰å¹¶**å‘é€**çœŸæ­£çš„ç¼“å†²åŒºæº¢å‡ºã€‚

**CTF ç¤ºä¾‹:**&#x20;

* [**https://guyinatuxedo.github.io/08-bof\_dynamic/csawquals17\_svc/index.html**](https://guyinatuxedo.github.io/08-bof\_dynamic/csawquals17\_svc/index.html)
* 64 ä½ï¼Œå¯ç”¨ ASLR ä½†æ²¡æœ‰ PIEï¼Œç¬¬ä¸€æ­¥æ˜¯å¡«å……æº¢å‡ºç›´åˆ° canary çš„å­—èŠ‚ 0x00ï¼Œç„¶åè°ƒç”¨ puts æ³„éœ²å®ƒã€‚ä½¿ç”¨ canary åˆ›å»º ROP gadget æ¥è°ƒç”¨ puts ä»¥æ³„éœ² GOT ä¸­ puts çš„åœ°å€ï¼Œç„¶åä½¿ç”¨ ROP gadget è°ƒç”¨ `system('/bin/sh')`
* [**https://guyinatuxedo.github.io/14-ret\_2\_system/hxp18\_poorCanary/index.html**](https://guyinatuxedo.github.io/14-ret\_2\_system/hxp18\_poorCanary/index.html)
* 32 ä½ï¼ŒARMï¼Œæ²¡æœ‰ relroï¼Œcanaryï¼Œnxï¼Œæ²¡æœ‰ pieã€‚æº¢å‡ºå¹¶è°ƒç”¨ puts æ¥æ³„éœ² canary + ret2lib è°ƒç”¨ `system` ä»¥åŠ ROP é“¾æ¥å¼¹å‡º r0ï¼ˆå‚æ•° `/bin/sh`ï¼‰å’Œ pcï¼ˆsystem çš„åœ°å€ï¼‰

## ä»»æ„è¯»å–

é€šè¿‡ç±»ä¼¼æ ¼å¼**å­—ç¬¦ä¸²**æä¾›çš„**ä»»æ„è¯»å–**ï¼Œå¯èƒ½å¯ä»¥æ³„éœ² canaryã€‚æŸ¥çœ‹è¿™ä¸ªä¾‹å­ï¼š[**https://ir0nstone.gitbook.io/notes/types/stack/canaries**](https://ir0nstone.gitbook.io/notes/types/stack/canaries) ï¼Œæ‚¨å¯ä»¥é˜…è¯»å…³äºæ»¥ç”¨æ ¼å¼å­—ç¬¦ä¸²ä»¥è¯»å–ä»»æ„å†…å­˜åœ°å€çš„å†…å®¹ã€‚

* [https://guyinatuxedo.github.io/14-ret\_2\_system/asis17\_marymorton/index.html](https://guyinatuxedo.github.io/14-ret\_2\_system/asis17\_marymorton/index.html)
* è¿™ä¸ªæŒ‘æˆ˜ä»¥ä¸€ç§éå¸¸ç®€å•çš„æ–¹å¼æ»¥ç”¨æ ¼å¼å­—ç¬¦ä¸²æ¥ä»æ ˆä¸­è¯»å– canaryã€‚ 

{% hint style="success" %}
å­¦ä¹ å¹¶ç»ƒä¹  AWS é»‘å®¢æŠ€æœ¯ï¼š<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks åŸ¹è®­ AWS çº¢é˜Ÿä¸“å®¶ (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
å­¦ä¹ å¹¶ç»ƒä¹  GCP é»‘å®¢æŠ€æœ¯ï¼š<img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks åŸ¹è®­ GCP çº¢é˜Ÿä¸“å®¶ (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>æ”¯æŒ HackTricks</summary>

* æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**ç”µæŠ¥ç¾¤ç»„**](https://t.me/peass) æˆ– **å…³æ³¨**æˆ‘ä»¬çš„ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* é€šè¿‡å‘ [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github ä»“åº“æäº¤ PR æ¥åˆ†äº«é»‘å®¢æŠ€å·§ã€‚

</details>
{% endhint %}
