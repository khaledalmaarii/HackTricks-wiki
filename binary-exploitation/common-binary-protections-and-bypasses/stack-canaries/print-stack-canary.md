# Stack CanariesÄ±nÄ± YazdÄ±r

<details>

<summary><strong>AWS hackleme konusunda sÄ±fÄ±rdan kahramana kadar Ã¶ÄŸrenin</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ±)</strong></a><strong>!</strong></summary>

HackTricks'i desteklemenin diÄŸer yollarÄ±:

* **Åirketinizi HackTricks'te reklamÄ±nÄ± gÃ¶rmek istiyorsanÄ±z** veya **HackTricks'i PDF olarak indirmek istiyorsanÄ±z** [**ABONELÄ°K PLANLARINI**](https://github.com/sponsors/carlospolop) kontrol edin!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* [**PEASS Ailesi'ni**](https://opensea.io/collection/the-peass-family) keÅŸfedin, Ã¶zel [**NFT'lerimiz**](https://opensea.io/collection/the-peass-family) koleksiyonumuz
* **KatÄ±lÄ±n** ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) veya bizi **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)** takip edin.**
* **Hacking pÃ¼f noktalarÄ±nÄ±zÄ± gÃ¶ndererek HackTricks ve HackTricks Cloud** github depolarÄ±na PR gÃ¶ndererek paylaÅŸÄ±n.

</details>

## YazdÄ±rÄ±lan Stack'i GeniÅŸlet

Bir **yÄ±ÄŸÄ±n taÅŸmasÄ±** aÃ§Ä±ÄŸÄ±na sahip bir programÄ±n, **yÄ±ÄŸÄ±n taÅŸmasÄ±nÄ±n bir kÄ±smÄ±na iÅŸaret eden bir puts** iÅŸlevini **Ã§alÄ±ÅŸtÄ±rabileceÄŸi bir durumu hayal edin**. SaldÄ±rgan, **canary'nin ilk baytÄ±nÄ±n bir null bayt** (`\x00`) olduÄŸunu ve canary'nin geri kalanÄ±nÄ±n **rastgele** baytlar olduÄŸunu bilir. Daha sonra, saldÄ±rgan, **yÄ±ÄŸÄ±n taÅŸmasÄ±nÄ± oluÅŸturabilir ve yalnÄ±zca canary'nin ilk baytÄ±na kadar yÄ±ÄŸÄ±nÄ± Ã¼zerine yazabilir**.

Daha sonra, saldÄ±rgan, **payloadun ortasÄ±nda puts iÅŸlevini Ã§aÄŸÄ±rÄ±r** ve bu, **canary'nin tamamÄ±nÄ± yazdÄ±racaktÄ±r** (ilk null bayt hariÃ§).

Bu bilgiyle saldÄ±rgan, canary'yi bilerek (aynÄ± program oturumunda) **yeni bir saldÄ±rÄ± oluÅŸturabilir ve gÃ¶nderebilir**.

Bu taktik aÃ§Ä±kÃ§a Ã§ok **kÄ±sÄ±tlÄ±dÄ±r**, Ã§Ã¼nkÃ¼ saldÄ±rganÄ±n, **payloadunun iÃ§eriÄŸini yazdÄ±rabilmesi**, **canary'yi dÄ±ÅŸarÄ± Ã§Ä±karabilmesi** ve ardÄ±ndan (aynÄ± program oturumunda) **gerÃ§ek tampon taÅŸmasÄ±nÄ± gÃ¶nderebilmesi** gerekir.

**CTF Ã¶rnekleri:**&#x20;

* [**https://guyinatuxedo.github.io/08-bof\_dynamic/csawquals17\_svc/index.html**](https://guyinatuxedo.github.io/08-bof\_dynamic/csawquals17\_svc/index.html)
* 64 bit, ASLR etkin ancak PIE etkin deÄŸil, ilk adÄ±m, canary'nin 0x00 baytÄ±na kadar taÅŸmasÄ± iÃ§in bir taÅŸma doldurmaktÄ±r, ardÄ±ndan puts'u Ã§aÄŸÄ±rÄ±p sÄ±zdÄ±rmaktÄ±r. Canary ile puts'un GOT'tan adresini sÄ±zdÄ±rmak iÃ§in bir ROP cihazÄ± oluÅŸturulur ve ardÄ±ndan `/bin/sh`'yi argÃ¼man olarak Ã§aÄŸÄ±rmak iÃ§in bir ROP cihazÄ± olan `system` Ã§aÄŸrÄ±lÄ±r.
* [**https://guyinatuxedo.github.io/14-ret\_2\_system/hxp18\_poorCanary/index.html**](https://guyinatuxedo.github.io/14-ret\_2\_system/hxp18\_poorCanary/index.html)
* 32 bit, ARM, relro yok, canary, nx, pie yok. YÄ±ÄŸÄ±nÄ±ndan canary'yi sÄ±zdÄ±rmak iÃ§in puts Ã§aÄŸrÄ±sÄ±yla taÅŸma + ret2lib, ROP zinciriyle r0 (argÃ¼man `/bin/sh`) ve pc (system adresi) Ã§aÄŸÄ±ran `system`'Ä± Ã§aÄŸÄ±rÄ±r.

## Keyfi Okuma

Format **dizileri** tarafÄ±ndan saÄŸlanan keyfi okuma ile canary'yi sÄ±zdÄ±rmak mÃ¼mkÃ¼n olabilir. Bu Ã¶rneÄŸi kontrol edin: [**https://ir0nstone.gitbook.io/notes/types/stack/canaries**](https://ir0nstone.gitbook.io/notes/types/stack/canaries) ve keyfi bellek adreslerini okumak iÃ§in format dizilerini kÃ¶tÃ¼ye kullanma hakkÄ±nda okuyabilirsiniz:

{% content-ref url="../../format-strings/" %}
[format-strings](../../format-strings/)
{% endcontent-ref %}

* [https://guyinatuxedo.github.io/14-ret\_2\_system/asis17\_marymorton/index.html](https://guyinatuxedo.github.io/14-ret\_2\_system/asis17\_marymorton/index.html)
* Bu zorluk, yÄ±ÄŸÄ±n Ã¼zerinden canary'yi okumak iÃ§in format dizisini Ã§ok basit bir ÅŸekilde kÃ¶tÃ¼ye kullanÄ±r.
