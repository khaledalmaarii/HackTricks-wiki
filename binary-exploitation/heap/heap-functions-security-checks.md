# Provere bezbednosti funkcija Heap

<details>

<summary><strong>Nau캜ite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Drugi na캜ini podr코ke HackTricks-u:

* Ako 쬰lite da vidite **va코u kompaniju reklamiranu na HackTricks-u** ili da **preuzmete HackTricks u PDF formatu** proverite [**PLANOVE ZA PRIJAVU**](https://github.com/sponsors/carlospolop)!
* Nabavite [**zvani캜ni PEASS & HackTricks suvenir**](https://peass.creator-spring.com)
* Otkrijte [**Porodicu PEASS**](https://opensea.io/collection/the-peass-family), na코u kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* **Pridru쬴te se** 游눫 [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili nas **pratite** na **Twitteru** 游냕 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Podelite svoje hakovanje trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>

## unlink

Ova funkcija uklanja deo iz dvostruko povezane liste. Uobi캜ajene provere osiguravaju da struktura povezane liste ostane dosledna prilikom uklanjanja delova.

* **Provere doslednosti**:
* Provera da li je `P->fd->bk == P` i `P->bk->fd == P`.
* Poruka o gre코ci: `corrupted double-linked list`

## \_int\_malloc

Ova funkcija je odgovorna za dodeljivanje memorije iz hipa. Provere ovde osiguravaju da memorija nije o코te캖ena tokom dodeljivanja.

* **Provera Veli캜ine Fastbin-a**:
* Prilikom uklanjanja dela iz fastbin-a, osigurajte da je veli캜ina dela unutar opsega fastbin-a.
* Poruka o gre코ci: `malloc(): memory corruption (fast)`
* **Provera Doslednosti Smallbin-a**:
* Prilikom uklanjanja dela iz smallbin-a, osigurajte da su prethodna i slede캖a veza u dvostruko povezanoj listi dosledne.
* Poruka o gre코ci: `malloc(): smallbin double linked list corrupted`
* **Provera Opsega Memorije Unsorted Bin-a**:
* Osigurajte da je veli캜ina delova u unsorted bin-u unutar minimalnih i maksimalnih granica.
* Poruka o gre코ci: `malloc(): memory corruption | malloc(): invalid next size (unsorted)`
* **Provera Doslednosti Unsorted Bin-a (Prvi Scenario)**:
* Prilikom umetanja preostalog dela u unsorted bin, proverite da li je `unsorted_chunks(av)->fd->bk == unsorted_chunks(av)`.
* Poruka o gre코ci: `malloc(): corrupted unsorted chunks`
* **Provera Doslednosti Unsorted Bin-a (Drugi Scenario)**:
* Ista provera kao prethodna, ali aktivira se prilikom umetanja nakon deljenja brzog ili malog dela.
* Poruka o gre코ci: `malloc(): corrupted unsorted chunks 2`

## \_int\_free

Ova funkcija osloba캠a prethodno dodeljenu memoriju. Provere ovde poma쬿 u osiguravanju pravilnog osloba캠anja memorije i spre캜avanju o코te캖enja memorije.

* **Provera Granica Pokaziva캜a**:
* Osigurajte da pokaziva캜 koji se osloba캠a ne obuhvata memoriju.
* Poruka o gre코ci: `free(): invalid pointer`
* **Provera Veli캜ine**:
* Osigurajte da je veli캜ina dela koje se osloba캠a barem `MINSIZE` ili vi코ekratnik `MALLOC_ALIGNMENT`.
* Poruka o gre코ci: `free(): invalid size`
* **Provera Veli캜ine Fastbin-a**:
* Za fastbin delove, osigurajte da je veli캜ina slede캖eg dela unutar minimalnih i maksimalnih granica.
* Poruka o gre코ci: `free(): invalid next size (fast)`
* **Provera Dvostrukog Osloba캠anja Fastbin-a**:
* Prilikom umetanja dela u fastbin, osigurajte da deo na po캜etku nije isti kao deo koji se ume캖e.
* Poruka o gre코ci: `double free or corruption (fasttop)`
* **Provera Doslednosti Fastbin-a**:
* Prilikom umetanja u fastbin, osigurajte da su veli캜ine glavnog dela i dela koji se ume캖e iste.
* Poruka o gre코ci: `invalid fastbin entry (free)`
* **Provera Doslednosti Top Chunk-a**:
* Za delove koji nisu fastbin, osigurajte da deo nije isti kao top chunk.
* Poruka o gre코ci: `double free or corruption (top)`
* **Provera Granica Memorije**:
* Osigurajte da je slede캖i deo po memoriji unutar granica arene.
* Poruka o gre코ci: `double free or corruption (out)`
* **Provera Bita Prev\_inuse**:
* Osigurajte da je bit prethodno u upotrebi u slede캖em delu ozna캜en.
* Poruka o gre코ci: `double free or corruption (!prev)`
* **Provera Normalne Veli캜ine**:
* Osigurajte da je veli캜ina slede캖eg dela unutar validnih opsega.
* Poruka o gre코ci: `free(): invalid next size (normal)`
* **Provera Doslednosti Unsorted Bin-a**:
* Prilikom umetanja spojenog dela u unsorted bin, proverite da li je `unsorted_chunks(av)->fd->bk == unsorted_chunks(av)`.
* Poruka o gre코ci: `free(): corrupted unsorted chunks`

<details>

<summary><strong>Nau캜ite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Drugi na캜ini podr코ke HackTricks-u:

* Ako 쬰lite da vidite **va코u kompaniju reklamiranu na HackTricks-u** ili da **preuzmete HackTricks u PDF formatu** proverite [**PLANOVE ZA PRIJAVU**](https://github.com/sponsors/carlospolop)!
* Nabavite [**zvani캜ni PEASS & HackTricks suvenir**](https://peass.creator-spring.com)
* Otkrijte [**Porodicu PEASS**](https://opensea.io/collection/the-peass-family), na코u kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* **Pridru쬴te se** 游눫 [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili nas **pratite** na **Twitteru** 游냕 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Podelite svoje hakovanje trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>
