# House of Lore | KÃ¼Ã§Ã¼k bin SaldÄ±rÄ±sÄ±

<details>

<summary><strong>AWS hackleme konusunda sÄ±fÄ±rdan kahramana Ã¶ÄŸrenin</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ±)</strong></a><strong>!</strong></summary>

HackTricks'Ä± desteklemenin diÄŸer yollarÄ±:

* **Åirketinizi HackTricks'te reklamÄ±nÄ± gÃ¶rmek istiyorsanÄ±z** veya **HackTricks'i PDF olarak indirmek istiyorsanÄ±z** [**ABONELÄ°K PLANLARINI**](https://github.com/sponsors/carlospolop) kontrol edin!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini alÄ±n**](https://peass.creator-spring.com)
* [**PEASS Ailesi'ni**](https://opensea.io/collection/the-peass-family) keÅŸfedin, Ã¶zel [**NFT'lerimiz**](https://opensea.io/collection/the-peass-family) koleksiyonumuz
* **KatÄ±lÄ±n** ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) veya bizi **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)** takip edin.**
* **Hacking pÃ¼f noktalarÄ±nÄ±zÄ± paylaÅŸarak PR gÃ¶ndererek** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarÄ±na katkÄ±da bulunun.

</details>

## Temel Bilgiler

### Kod

* [https://ctf-wiki.mahaloz.re/pwn/linux/glibc-heap/house\_of\_lore/](https://ctf-wiki.mahaloz.re/pwn/linux/glibc-heap/house\_of\_lore/) adresinden kontrol edin
* Bu Ã§alÄ±ÅŸmÄ±yor
* Veya: [https://github.com/shellphish/how2heap/blob/master/glibc\_2.39/house\_of\_lore.c](https://github.com/shellphish/how2heap/blob/master/glibc\_2.39/house\_of\_lore.c)
* Bu, bazÄ± kontrolleri atlamaya Ã§alÄ±ÅŸsa da `malloc(): unaligned tcache chunk detected` hatasÄ±nÄ± alÄ±r
* Bu Ã¶rnek hala Ã§alÄ±ÅŸÄ±yor**:** [**https://guyinatuxedo.github.io/40-house\_of\_lore/house\_lore\_exp/index.html**](https://guyinatuxedo.github.io/40-house\_of\_lore/house\_lore\_exp/index.html)&#x20;

### AmaÃ§

* **KÃ¼Ã§Ã¼k bir parÃ§ayÄ± kÃ¼Ã§Ã¼k bine sahte bir parÃ§a olarak ekleyerek onu ayÄ±rabilir hale getirmek**.\
Eklenen kÃ¼Ã§Ã¼k parÃ§a sahte olan, saldÄ±rganÄ±n rastgele bir konumda oluÅŸturduÄŸu deÄŸil.

### Gereksinimler

* 2 sahte parÃ§a oluÅŸturun ve bunlarÄ± birbirine ve kÃ¼Ã§Ã¼k bine yaslayÄ±n:
* `sahte0.bk` -> `sahte1`
* `sahte1.fd` -> `sahte0`
* `sahte0.fd` -> `gerÃ§ek` (baÅŸka bir zayÄ±flÄ±ktan dolayÄ± serbest bÄ±rakÄ±lan kÃ¼Ã§Ã¼k bin parÃ§asÄ±ndaki bir iÅŸaretÃ§iyi deÄŸiÅŸtirmeniz gerekmektedir)
* `gerÃ§ek.bk` -> `sahte0`

BÃ¶ylece `sahte0`'Ä± ayÄ±rabilirsiniz.

### SaldÄ±rÄ±

* KÃ¼Ã§Ã¼k bir parÃ§a (`gerÃ§ek`) ayrÄ±ldÄ±ktan sonra baÅŸka bir parÃ§a ayrÄ±larak Ã¼st parÃ§ayla birleÅŸtirilmesi engellenir. Daha sonra, `gerÃ§ek` serbest bÄ±rakÄ±lÄ±r (onu sÄ±ralanmamÄ±ÅŸ listeye taÅŸÄ±r) ve daha bÃ¼yÃ¼k bir parÃ§a ayrÄ±lÄ±r, **`gerÃ§ek`'i kÃ¼Ã§Ã¼k bine taÅŸÄ±r.**
* Bir saldÄ±rgan birkaÃ§ sahte kÃ¼Ã§Ã¼k parÃ§a oluÅŸturur ve gereken baÄŸlantÄ±larÄ± yaparak saÄŸlamlÄ±k kontrollerini atlar:
* `sahte0.bk` -> `sahte1`
* `sahte1.fd` -> `sahte0`
* `sahte0.fd` -> `gerÃ§ek` (baÅŸka bir zayÄ±flÄ±ktan dolayÄ± serbest bÄ±rakÄ±lan kÃ¼Ã§Ã¼k bin parÃ§asÄ±ndaki bir iÅŸaretÃ§iyi deÄŸiÅŸtirmeniz gerekmektedir)
* `gerÃ§ek.bk` -> `sahte0`
* GerÃ§ek alÄ±nmak Ã¼zere kÃ¼Ã§Ã¼k bir parÃ§a ayrÄ±lÄ±r, **`sahte0`**'Ä± kÃ¼Ã§Ã¼k bine en Ã¼st listeye alÄ±r
* BaÅŸka bir kÃ¼Ã§Ã¼k parÃ§a ayrÄ±lÄ±r, sahte0'Ä± bir parÃ§a olarak alÄ±r, potansiyel olarak iÃ§indeki iÅŸaretÃ§ileri okuma/yazma olanaÄŸÄ± saÄŸlar.

## Referanslar

* [https://ctf-wiki.mahaloz.re/pwn/linux/glibc-heap/house\_of\_lore/](https://ctf-wiki.mahaloz.re/pwn/linux/glibc-heap/house\_of\_lore/)
* [https://heap-exploitation.dhavalkapil.com/attacks/house\_of\_lore](https://heap-exploitation.dhavalkapil.com/attacks/house\_of\_lore)
* [https://guyinatuxedo.github.io/40-house\_of\_lore/house\_lore\_exp/index.html](https://guyinatuxedo.github.io/40-house\_of\_lore/house\_lore\_exp/index.html)

<details>

<summary><strong>AWS hackleme konusunda sÄ±fÄ±rdan kahramana Ã¶ÄŸrenin</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ±)</strong></a><strong>!</strong></summary>

HackTricks'Ä± desteklemenin diÄŸer yollarÄ±:

* **Åirketinizi HackTricks'te reklamÄ±nÄ± gÃ¶rmek istiyorsanÄ±z** veya **HackTricks'i PDF olarak indirmek istiyorsanÄ±z** [**ABONELÄ°K PLANLARINI**](https://github.com/sponsors/carlospolop) kontrol edin!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini alÄ±n**](https://peass.creator-spring.com)
* [**PEASS Ailesi'ni**](https://opensea.io/collection/the-peass-family) keÅŸfedin, Ã¶zel [**NFT'lerimiz**](https://opensea.io/collection/the-peass-family) koleksiyonumuz
* **KatÄ±lÄ±n** ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) veya bizi **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)** takip edin.**
* **Hacking pÃ¼f noktalarÄ±nÄ±zÄ± paylaÅŸarak PR gÃ¶ndererek** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarÄ±na katkÄ±da bulunun.

</details>
