# å †æº¢å‡º

{% hint style="success" %}
å­¦ä¹ å¹¶ç»ƒä¹ AWSé»‘å®¢æŠ€æœ¯ï¼š<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricksåŸ¹è®­AWSçº¢é˜Ÿä¸“å®¶ï¼ˆARTEï¼‰**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
å­¦ä¹ å¹¶ç»ƒä¹ GCPé»‘å®¢æŠ€æœ¯ï¼š<img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricksåŸ¹è®­GCPçº¢é˜Ÿä¸“å®¶ï¼ˆGRTEï¼‰**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>æ”¯æŒHackTricks</summary>

* æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* **åŠ å…¥** ğŸ’¬ [**Discordç¾¤**](https://discord.gg/hRep4RUj7f) æˆ– [**ç”µæŠ¥ç¾¤**](https://t.me/peass) æˆ– **å…³æ³¨**æˆ‘ä»¬çš„**Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) **githubä»“åº“æäº¤PRæ¥åˆ†äº«é»‘å®¢æŠ€å·§**ã€‚

</details>
{% endhint %}

## åŸºæœ¬ä¿¡æ¯

å †æº¢å‡ºç±»ä¼¼äº[**æ ˆæº¢å‡º**](../stack-overflow/)ï¼Œä½†å‘ç”Ÿåœ¨å †ä¸­ã€‚åŸºæœ¬ä¸Šæ„å‘³ç€åœ¨å †ä¸­ä¿ç•™äº†ä¸€äº›ç©ºé—´æ¥å­˜å‚¨ä¸€äº›æ•°æ®ï¼Œ**å­˜å‚¨çš„æ•°æ®å¤§äºä¿ç•™çš„ç©ºé—´ã€‚**

åœ¨æ ˆæº¢å‡ºä¸­ï¼Œæˆ‘ä»¬çŸ¥é“ä¸€äº›å¯„å­˜å™¨ï¼Œå¦‚æŒ‡ä»¤æŒ‡é’ˆæˆ–å †æ ˆå¸§ï¼Œå°†ä»å †æ ˆä¸­æ¢å¤ï¼Œå¹¶ä¸”å¯èƒ½æ»¥ç”¨è¿™ä¸€ç‚¹ã€‚åœ¨å †æº¢å‡ºçš„æƒ…å†µä¸‹ï¼Œ**å †å—ä¸­é»˜è®¤æ²¡æœ‰å­˜å‚¨ä»»ä½•æ•æ„Ÿä¿¡æ¯**ï¼Œå¯ä»¥è¢«æº¢å‡ºã€‚ä½†æ˜¯ï¼Œå¯èƒ½æ˜¯æ•æ„Ÿä¿¡æ¯æˆ–æŒ‡é’ˆï¼Œå› æ­¤æ­¤æ¼æ´çš„**ä¸¥é‡æ€§å–å†³äº**å¯ä»¥è¢«è¦†ç›–çš„**æ•°æ®ä»¥åŠæ”»å‡»è€…å¦‚ä½•æ»¥ç”¨æ­¤æ¼æ´**ã€‚

{% hint style="success" %}
ä¸ºäº†æ‰¾åˆ°æº¢å‡ºåç§»é‡ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä¸[**æ ˆæº¢å‡º**](../stack-overflow/#finding-stack-overflows-offsets)ç›¸åŒçš„æ¨¡å¼ã€‚
{% endhint %}

### æ ˆæº¢å‡ºä¸å †æº¢å‡º

åœ¨æ ˆæº¢å‡ºä¸­ï¼Œå½“æ¼æ´è§¦å‘æ—¶ï¼Œå †æ ˆä¸­å°†å‡ºç°çš„æ’åˆ—å’Œæ•°æ®ç›¸å½“å¯é ã€‚è¿™æ˜¯å› ä¸ºå †æ ˆæ˜¯çº¿æ€§çš„ï¼Œåœ¨å†²çªå†…å­˜ä¸­å§‹ç»ˆå¢åŠ ï¼Œåœ¨ç¨‹åºè¿è¡Œçš„ç‰¹å®šä½ç½®ï¼Œå †æ ˆå†…å­˜é€šå¸¸å­˜å‚¨ç±»ä¼¼ç±»å‹çš„æ•°æ®ï¼Œå¹¶ä¸”å…·æœ‰ä¸€äº›ç‰¹å®šç»“æ„ï¼Œå…¶ä¸­å †æ ˆéƒ¨åˆ†çš„æœ«å°¾æœ‰ä¸€äº›æŒ‡é’ˆã€‚

ç„¶è€Œï¼Œåœ¨å †æº¢å‡ºçš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨çš„å†…å­˜ä¸æ˜¯çº¿æ€§çš„ï¼Œè€Œæ˜¯**åˆ†é…çš„å—é€šå¸¸ä½äºå†…å­˜çš„åˆ†ç¦»ä½ç½®**ï¼ˆä¸æ˜¯ç›¸é‚»çš„ï¼‰ï¼Œå› ä¸º**é€šè¿‡å¤§å°åˆ†éš”åˆ†é…çš„binå’Œzone**ï¼Œä»¥åŠ**åœ¨åˆ†é…æ–°å—ä¹‹å‰ä½¿ç”¨å…ˆå‰é‡Šæ”¾çš„å†…å­˜**ã€‚å¾ˆéš¾çŸ¥é“å°†ä¸æ˜“å—å †æº¢å‡ºçš„å¯¹è±¡å‘ç”Ÿå†²çªçš„å¯¹è±¡æ˜¯ä»€ä¹ˆã€‚å› æ­¤ï¼Œå½“å‘ç°å †æº¢å‡ºæ—¶ï¼Œéœ€è¦æ‰¾åˆ°ä¸€ç§**å¯é çš„æ–¹æ³•**ï¼Œä½¿æœŸæœ›çš„å¯¹è±¡ä»æ˜“å—æº¢å‡ºçš„å¯¹è±¡çš„æ—è¾¹è¿›å…¥å†…å­˜ã€‚

ç”¨äºæ­¤ç›®çš„çš„æŠ€æœ¯ä¹‹ä¸€æ˜¯**å †æ•´ç†**ï¼Œä¾‹å¦‚åœ¨[**æ­¤æ–‡ç« **](https://azeria-labs.com/grooming-the-ios-kernel-heap/)ä¸­ä½¿ç”¨ã€‚æ–‡ç« ä¸­è§£é‡Šäº†åœ¨iOSå†…æ ¸ä¸­ï¼Œå½“ä¸€ä¸ªåŒºåŸŸçš„å†…å­˜ç”¨å®Œä»¥å­˜å‚¨å†…å­˜å—æ—¶ï¼Œå®ƒä¼šé€šè¿‡å†…æ ¸é¡µæ‰©å±•ï¼Œç„¶åå°†è¯¥é¡µåˆ†å‰²ä¸ºé¢„æœŸå¤§å°çš„å—ï¼Œè¿™äº›å—å°†æŒ‰é¡ºåºä½¿ç”¨ï¼ˆç›´åˆ°iOSç‰ˆæœ¬9.2ï¼Œç„¶åè¿™äº›å—ä»¥éšæœºæ–¹å¼ä½¿ç”¨ï¼Œä»¥å¢åŠ è¿™äº›æ”»å‡»çš„åˆ©ç”¨éš¾åº¦ï¼‰ã€‚

å› æ­¤ï¼Œåœ¨å…ˆå‰çš„æ–‡ç« ä¸­ï¼Œå‘ç”Ÿå †æº¢å‡ºæ—¶ï¼Œä¸ºäº†å¼ºåˆ¶æº¢å‡ºçš„å¯¹è±¡ä¸å—å®³è€…é¡ºåºå‘ç”Ÿå†²çªï¼Œé€šè¿‡å‡ ä¸ªçº¿ç¨‹å¼ºåˆ¶æ‰§è¡Œå‡ ä¸ª**`kallocs`**ï¼Œä»¥ç¡®ä¿æ‰€æœ‰ç©ºé—²å—éƒ½è¢«å¡«å……ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªæ–°é¡µé¢ã€‚

ä¸ºäº†å¼ºåˆ¶ä½¿ç”¨ç‰¹å®šå¤§å°çš„å¯¹è±¡å¡«å……æ­¤å¯¹è±¡ï¼Œä¸iOS machç«¯å£ç›¸å…³è”çš„**ç¦»çº¿åˆ†é…**æ˜¯ä¸€ä¸ªç†æƒ³çš„é€‰æ‹©ã€‚é€šè¿‡ç²¾å¿ƒåˆ¶ä½œæ¶ˆæ¯çš„å¤§å°ï¼Œå¯ä»¥ç²¾ç¡®æŒ‡å®š`kalloc`åˆ†é…çš„å¤§å°ï¼Œå½“ç›¸åº”çš„machç«¯å£è¢«é”€æ¯æ—¶ï¼Œç›¸åº”çš„åˆ†é…å°†ç«‹å³é‡Šæ”¾å›`kfree`ã€‚

ç„¶åï¼Œå¯ä»¥**é‡Šæ”¾**å…¶ä¸­ä¸€äº›å ä½ç¬¦ã€‚**`kalloc.4096`**ç©ºé—²åˆ—è¡¨ä»¥åè¿›å…ˆå‡ºçš„é¡ºåºé‡Šæ”¾å…ƒç´ ï¼Œè¿™åŸºæœ¬ä¸Šæ„å‘³ç€å¦‚æœé‡Šæ”¾äº†ä¸€äº›å ä½ç¬¦ï¼Œå¹¶ä¸”å°è¯•åœ¨åˆ†é…æ˜“å—æº¢å‡ºçš„å¯¹è±¡æ—¶åˆ†é…å¤šä¸ªå—å®³è€…å¯¹è±¡ï¼Œé‚£ä¹ˆå¾ˆå¯èƒ½è¯¥å¯¹è±¡å°†è¢«å—å®³è€…å¯¹è±¡è·Ÿéšã€‚

### ç¤ºä¾‹libc

åœ¨[**æ­¤é¡µé¢**](https://guyinatuxedo.github.io/27-edit\_free\_chunk/heap\_consolidation\_explanation/index.html)ä¸­ï¼Œå¯ä»¥æ‰¾åˆ°ä¸€ä¸ªåŸºæœ¬çš„å †æº¢å‡ºä»¿çœŸï¼Œå±•ç¤ºäº†å¦‚ä½•é€šè¿‡è¦†ç›–ä¸‹ä¸€ä¸ªå—çš„ä½¿ç”¨ä¸­çš„å‰ä¸€ä¸ªä½å’Œå‰ä¸€ä¸ªå¤§å°çš„ä½ç½®ï¼Œå¯ä»¥**åˆå¹¶ä¸€ä¸ªå·²ä½¿ç”¨çš„å—**ï¼ˆä½¿å…¶è®¤ä¸ºæœªä½¿ç”¨ï¼‰ï¼Œç„¶åå†æ¬¡åˆ†é…å®ƒï¼Œä»è€Œèƒ½å¤Ÿè¦†ç›–æ­£åœ¨ä¸åŒæŒ‡é’ˆä¸­ä½¿ç”¨çš„æ•°æ®ã€‚

å¦ä¸€ä¸ªæ¥è‡ª[**protostar heap 0**](https://guyinatuxedo.github.io/24-heap\_overflow/protostar\_heap0/index.html)çš„ç¤ºä¾‹å±•ç¤ºäº†ä¸€ä¸ªCTFçš„éå¸¸åŸºæœ¬çš„ç¤ºä¾‹ï¼Œå…¶ä¸­å¯ä»¥æ»¥ç”¨**å †æº¢å‡º**æ¥è°ƒç”¨è·å¾—**æ ‡å¿—çš„winnerå‡½æ•°**ã€‚

åœ¨[**protostar heap 1**](https://guyinatuxedo.github.io/24-heap\_overflow/protostar\_heap1/index.html)ç¤ºä¾‹ä¸­ï¼Œå¯ä»¥çœ‹åˆ°å¦‚ä½•é€šè¿‡æ»¥ç”¨ç¼“å†²åŒºæº¢å‡ºï¼Œå¯ä»¥**è¦†ç›–é™„è¿‘å—ä¸­çš„åœ°å€**ï¼Œå…¶ä¸­**ç”¨æˆ·çš„ä»»æ„æ•°æ®**å°†è¢«å†™å…¥ã€‚

### ç¤ºä¾‹ARM64

åœ¨é¡µé¢[https://8ksec.io/arm64-reversing-and-exploitation-part-1-arm-instruction-set-simple-heap-overflow/](https://8ksec.io/arm64-reversing-and-exploitation-part-1-arm-instruction-set-simple-heap-overflow/)ä¸­ï¼Œæ‚¨å¯ä»¥æ‰¾åˆ°ä¸€ä¸ªå †æº¢å‡ºç¤ºä¾‹ï¼Œå…¶ä¸­å°†è¦æ‰§è¡Œçš„å‘½ä»¤å­˜å‚¨åœ¨æº¢å‡ºå—çš„ä¸‹ä¸€ä¸ªå—ä¸­ã€‚å› æ­¤ï¼Œå¯ä»¥é€šè¿‡ç”¨æ˜“å—æ”»å‡»çš„æ–¹å¼è¦†ç›–å®ƒæ¥ä¿®æ”¹è¦æ‰§è¡Œçš„å‘½ä»¤ï¼Œä¾‹å¦‚ï¼š
```bash
python3 -c 'print("/"*0x400+"/bin/ls\x00")' > hax.txt
```
### å…¶ä»–ç¤ºä¾‹

* [**Auth-or-out. Hack The Box**](https://7rocky.github.io/en/ctf/htb-challenges/pwn/auth-or-out/)
* æˆ‘ä»¬åˆ©ç”¨æ•´æ•°æº¢å‡ºæ¼æ´æ¥å®ç°å †æº¢å‡ºã€‚
* æˆ‘ä»¬æŸåäº†æº¢å‡ºå—ä¸­çš„`struct`å†…çš„å‡½æ•°æŒ‡é’ˆï¼Œä»¥è®¾ç½®è¯¸å¦‚`system`ä¹‹ç±»çš„å‡½æ•°ï¼Œå¹¶å®ç°ä»£ç æ‰§è¡Œã€‚

{% hint style="success" %}
å­¦ä¹ å¹¶ç»ƒä¹ AWS Hackingï¼š<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks åŸ¹è®­ AWS çº¢é˜Ÿä¸“å®¶ (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
å­¦ä¹ å¹¶ç»ƒä¹ GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks åŸ¹è®­ GCP çº¢é˜Ÿä¸“å®¶ (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>æ”¯æŒ HackTricks</summary>

* æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**ç”µæŠ¥ç¾¤ç»„**](https://t.me/peass) æˆ– **å…³æ³¨**æˆ‘ä»¬çš„ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* é€šè¿‡å‘ [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github ä»“åº“æäº¤ PR æ¥åˆ†äº«é»‘å®¢æŠ€å·§ã€‚

</details>
{% endhint %}
