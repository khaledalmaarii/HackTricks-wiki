# House of Lore | KÃ¼Ã§Ã¼k Bin SaldÄ±rÄ±sÄ±

<details>

<summary><strong>AWS hackleme konusunda sÄ±fÄ±rdan kahramana dÃ¶nÃ¼ÅŸÃ¼n</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ±)</strong></a><strong> ile Ã¶ÄŸrenin!</strong></summary>

HackTricks'Ä± desteklemenin diÄŸer yollarÄ±:

* **Åirketinizi HackTricks'te reklamÄ±nÄ± gÃ¶rmek istiyorsanÄ±z** veya **HackTricks'i PDF olarak indirmek istiyorsanÄ±z** [**ABONELÄ°K PLANLARINI**](https://github.com/sponsors/carlospolop) kontrol edin!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* [**PEASS Ailesi'ni**](https://opensea.io/collection/the-peass-family) keÅŸfedin, Ã¶zel [**NFT'lerimiz**](https://opensea.io/collection/the-peass-family) koleksiyonumuz
* **KatÄ±lÄ±n** ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) veya bizi **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)** takip edin.**
* **Hacking pÃ¼f noktalarÄ±nÄ±zÄ± paylaÅŸarak PR gÃ¶ndererek** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarÄ±na katkÄ±da bulunun.

</details>

## Temel Bilgiler

### Kod

* [https://ctf-wiki.mahaloz.re/pwn/linux/glibc-heap/house\_of\_lore/](https://ctf-wiki.mahaloz.re/pwn/linux/glibc-heap/house\_of\_lore/) adresinden kontrol edin
* Bu Ã§alÄ±ÅŸmÄ±yor
* Veya: [https://github.com/shellphish/how2heap/blob/master/glibc\_2.39/house\_of\_lore.c](https://github.com/shellphish/how2heap/blob/master/glibc\_2.39/house\_of\_lore.c)
* Bu, bazÄ± kontrolleri atlamaya Ã§alÄ±ÅŸsa da Ã§alÄ±ÅŸmÄ±yor ve hata alÄ±nÄ±yor: `malloc(): unaligned tcache chunk detected`
* Bu Ã¶rnek hala Ã§alÄ±ÅŸÄ±yor: [**https://guyinatuxedo.github.io/40-house\_of\_lore/house\_lore\_exp/index.html**](https://guyinatuxedo.github.io/40-house\_of\_lore/house\_lore\_exp/index.html)&#x20;

### AmaÃ§

* **KÃ¼Ã§Ã¼k bir parÃ§a ekleyerek sahte bir kÃ¼Ã§Ã¼k parÃ§ayÄ± yerleÅŸtirin ve ardÄ±ndan onu ayÄ±rabilir hale getirin**.\
Eklenen kÃ¼Ã§Ã¼k parÃ§a, saldÄ±rganÄ±n oluÅŸturduÄŸu sahte parÃ§adÄ±r ve rastgele bir konumda sahte deÄŸildir.

### Gereksinimler

* 2 sahte parÃ§a oluÅŸturun ve bunlarÄ± birbirine ve meÅŸru parÃ§aya baÄŸlayÄ±n:
* `sahte0.bk` -> `sahte1`
* `sahte1.fd` -> `sahte0`
* `sahte0.fd` -> `meÅŸru` (baÅŸka bir zayÄ±flÄ±ktan dolayÄ± serbest bÄ±rakÄ±lan kÃ¼Ã§Ã¼k parÃ§a iÃ§indeki bir iÅŸaretÃ§iyi deÄŸiÅŸtirmeniz gerekmektedir)
* `meÅŸru.bk` -> `sahte0`

BÃ¶ylece `sahte0`'Ä± tahsis edebileceksiniz.

### SaldÄ±rÄ±

* Bir kÃ¼Ã§Ã¼k parÃ§a (`meÅŸru`) tahsis edilir, ardÄ±ndan Ã¼st parÃ§ayla birleÅŸmesini Ã¶nlemek iÃ§in baÅŸka bir parÃ§a tahsis edilir. Daha sonra, `meÅŸru` serbest bÄ±rakÄ±lÄ±r (onu sÄ±ralanmamÄ±ÅŸ kova listesine taÅŸÄ±r) ve daha bÃ¼yÃ¼k bir parÃ§a tahsis edilir, **`meÅŸru`'yu kÃ¼Ã§Ã¼k kovaya taÅŸÄ±r.**
* Bir saldÄ±rgan birkaÃ§ sahte kÃ¼Ã§Ã¼k parÃ§a oluÅŸturur ve gerekli baÄŸlantÄ±larÄ± yaparak saÄŸlamlÄ±k kontrollerini atlar:
* `sahte0.bk` -> `sahte1`
* `sahte1.fd` -> `sahte0`
* `sahte0.fd` -> `meÅŸru` (baÅŸka bir zayÄ±flÄ±ktan dolayÄ± serbest bÄ±rakÄ±lan kÃ¼Ã§Ã¼k parÃ§a iÃ§indeki bir iÅŸaretÃ§iyi deÄŸiÅŸtirmeniz gerekmektedir)
* `meÅŸru.bk` -> `sahte0`
* MeÅŸru almak iÃ§in bir kÃ¼Ã§Ã¼k parÃ§a tahsis edilir, **`sahte0`**'Ä± kÃ¼Ã§Ã¼k kova listesinin Ã¼stÃ¼ne taÅŸÄ±r
* BaÅŸka bir kÃ¼Ã§Ã¼k parÃ§a tahsis edilir, `sahte0`'Ä± bir parÃ§a olarak alarak, iÃ§indeki iÅŸaretÃ§ilere okuma/yazma yapma olasÄ±lÄ±ÄŸÄ± saÄŸlar.

## Referanslar

* [https://ctf-wiki.mahaloz.re/pwn/linux/glibc-heap/house\_of\_lore/](https://ctf-wiki.mahaloz.re/pwn/linux/glibc-heap/house\_of\_lore/)
* [https://heap-exploitation.dhavalkapil.com/attacks/house\_of\_lore](https://heap-exploitation.dhavalkapil.com/attacks/house\_of\_lore)
* [https://guyinatuxedo.github.io/40-house\_of\_lore/house\_lore\_exp/index.html](https://guyinatuxedo.github.io/40-house\_of\_lore/house\_lore\_exp/index.html)
