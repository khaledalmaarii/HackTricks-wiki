# Sobrescribiendo un fragmento liberado

<details>

<summary><strong>Aprende hacking en AWS desde cero hasta experto con</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (Experto en Equipos Rojos de AWS de HackTricks)</strong></a><strong>!</strong></summary>

Otras formas de apoyar a HackTricks:

* Si deseas ver tu **empresa anunciada en HackTricks** o **descargar HackTricks en PDF** ¬°Consulta los [**PLANES DE SUSCRIPCI√ìN**](https://github.com/sponsors/carlospolop)!
* Obt√©n la [**merchandising oficial de PEASS & HackTricks**](https://peass.creator-spring.com)
* Descubre [**La Familia PEASS**](https://opensea.io/collection/the-peass-family), nuestra colecci√≥n exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family)
* **√önete al** üí¨ [**grupo de Discord**](https://discord.gg/hRep4RUj7f) o al [**grupo de telegram**](https://t.me/peass) o **s√≠guenos** en **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Comparte tus trucos de hacking enviando PRs a los repositorios de** [**HackTricks**](https://github.com/carlospolop/hacktricks) y [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

Varias de las t√©cnicas propuestas de explotaci√≥n de mont√≥n (heap exploitation) necesitan poder sobrescribir punteros dentro de fragmentos liberados. El objetivo de esta p√°gina es resumir las posibles vulnerabilidades que podr√≠an otorgar este acceso:

### Uso Simple Despu√©s de Liberar (Use After Free)

Si es posible para el atacante **escribir informaci√≥n en un fragmento liberado**, podr√≠a abusar de esto para sobrescribir los punteros necesarios.

### Doble Liberaci√≥n (Double Free)

Si el atacante puede **`liberar` dos veces el mismo fragmento** (liberar otros fragmentos entre ellos potencialmente) y lograr que est√© **2 veces en el mismo contenedor**, ser√≠a posible para el usuario **asignar el fragmento m√°s tarde**, **escribir los punteros necesarios** y luego **asignarlo nuevamente** desencadenando las acciones de asignaci√≥n del fragmento (por ejemplo, ataque de contenedor r√°pido, ataque de tcache...)

### Desbordamiento de Mont√≥n (Heap Overflow)

Podr√≠a ser posible **desbordar un fragmento asignado teniendo a continuaci√≥n un fragmento liberado** y modificar algunos encabezados/punteros de este.

### Desbordamiento por 1 (Off by 1 Overflow)

En este caso ser√≠a posible **modificar el tama√±o** del fragmento siguiente en memoria. Un atacante podr√≠a abusar de esto para **hacer que un fragmento asignado tenga un tama√±o mayor**, luego **`liberarlo`**, haciendo que el fragmento sea **agregado a un contenedor de un tama√±o diferente** (mayor), luego asignar el **tama√±o falso**, y el ataque tendr√° acceso a un **fragmento con un tama√±o que es mayor** de lo que realmente es, **concediendo as√≠ un desbordamiento de mont√≥n** (ver secci√≥n anterior).
