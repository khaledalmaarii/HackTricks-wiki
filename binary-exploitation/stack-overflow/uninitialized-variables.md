# Uninitialized Variables

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the**  [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter**  [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Basic Information

G贸wna idea tutaj polega na zrozumieniu, co si dzieje z **niezainicjowanymi zmiennymi, poniewa偶 bd one miay warto, kt贸ra ju偶 znajdowaa si w przydzielonej pamici.** Przykad:

* **Funkcja 1: `initializeVariable`**: Deklarujemy zmienn `x` i przypisujemy jej warto, powiedzmy `0x1234`. Ta akcja jest podobna do rezerwacji miejsca w pamici i umieszczenia w nim konkretnej wartoci.
* **Funkcja 2: `useUninitializedVariable`**: Tutaj deklarujemy inn zmienn `y`, ale nie przypisujemy jej 偶adnej wartoci. W C, niezainicjowane zmienne nie s automatycznie ustawiane na zero. Zamiast tego, zachowuj warto, kt贸ra bya ostatnio przechowywana w ich lokalizacji pamici.

Kiedy uruchamiamy te dwie funkcje **sekwencyjnie**:

1. W `initializeVariable`, `x` otrzymuje warto (`0x1234`), kt贸ra zajmuje okrelony adres pamici.
2. W `useUninitializedVariable`, `y` jest deklarowane, ale nie przypisano mu wartoci, wic zajmuje miejsce w pamici tu偶 po `x`. Z powodu nieinicjowania `y`, koczy si na "dziedziczeniu" wartoci z tej samej lokalizacji pamici u偶ywanej przez `x`, poniewa偶 to bya ostatnia warto, kt贸ra tam bya.

To zachowanie ilustruje kluczow koncepcj w programowaniu niskiego poziomu: **Zarzdzanie pamici jest kluczowe**, a niezainicjowane zmienne mog prowadzi do nieprzewidywalnego zachowania lub luk w zabezpieczeniach, poniewa偶 mog niezamierzenie przechowywa wra偶liwe dane pozostawione w pamici.

Niezainicjowane zmienne stosu mog stwarza kilka zagro偶e bezpieczestwa, takich jak:

* **Wycieki danych**: Wra偶liwe informacje, takie jak hasa, klucze szyfrowania lub dane osobowe, mog by ujawnione, jeli s przechowywane w niezainicjowanych zmiennych, co pozwala atakujcym na potencjalne odczytanie tych danych.
* **Ujawnienie informacji**: Zawarto niezainicjowanych zmiennych mo偶e ujawnia szczeg贸y dotyczce ukadu pamici programu lub wewntrznych operacji, co pomaga atakujcym w opracowywaniu ukierunkowanych exploit贸w.
* **Awaria i niestabilno**: Operacje zwizane z niezainicjowanymi zmiennymi mog prowadzi do nieokrelonego zachowania, co skutkuje awariami programu lub nieprzewidywalnymi wynikami.
* **Wykonanie dowolnego kodu**: W niekt贸rych scenariuszach, atakujcy mog wykorzysta te luki, aby zmieni przepyw wykonania programu, co umo偶liwia im wykonanie dowolnego kodu, co mo偶e obejmowa zagro偶enia zwizane z zdalnym wykonaniem kodu.

### Example
```c
#include <stdio.h>

// Function to initialize and print a variable
void initializeAndPrint() {
int initializedVar = 100; // Initialize the variable
printf("Initialized Variable:\n");
printf("Address: %p, Value: %d\n\n", (void*)&initializedVar, initializedVar);
}

// Function to demonstrate the behavior of an uninitialized variable
void demonstrateUninitializedVar() {
int uninitializedVar; // Declare but do not initialize
printf("Uninitialized Variable:\n");
printf("Address: %p, Value: %d\n\n", (void*)&uninitializedVar, uninitializedVar);
}

int main() {
printf("Demonstrating Initialized vs. Uninitialized Variables in C\n\n");

// First, call the function that initializes its variable
initializeAndPrint();

// Then, call the function that has an uninitialized variable
demonstrateUninitializedVar();

return 0;
}
```
#### Jak to dziaa:

* **Funkcja `initializeAndPrint`**: Ta funkcja deklaruje zmienn cakowit `initializedVar`, przypisuje jej warto `100`, a nastpnie drukuje zar贸wno adres pamici, jak i warto zmiennej. Ten krok jest prosty i pokazuje, jak zachowuje si zainicjowana zmienna.
* **Funkcja `demonstrateUninitializedVar`**: W tej funkcji deklarujemy zmienn cakowit `uninitializedVar` bez jej inicjalizacji. Gdy pr贸bujemy wydrukowa jej warto, wynik mo偶e pokaza losow liczb. Ta liczba reprezentuje dane, kt贸re wczeniej znajdoway si w tej lokalizacji pamici. W zale偶noci od rodowiska i kompilatora, rzeczywisty wynik mo偶e si r贸偶ni, a czasami, dla bezpieczestwa, niekt贸re kompilatory mog automatycznie inicjowa zmienne do zera, chocia偶 na tym nie nale偶y polega.
* **Funkcja `main`**: Funkcja `main` wywouje obie powy偶sze funkcje w kolejnoci, demonstrujc kontrast midzy zainicjowan a niezainicjowan zmienn.

## Przykad ARM64

To w og贸le si nie zmienia w ARM64, poniewa偶 zmienne lokalne s r贸wnie偶 zarzdzane na stosie, mo偶esz [**sprawdzi ten przykad**](https://8ksec.io/arm64-reversing-and-exploitation-part-6-exploiting-an-uninitialized-stack-variable-vulnerability/), gdzie to jest pokazane.

{% hint style="success" %}
Ucz si i wicz Hacking AWS:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Ucz si i wicz Hacking GCP: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Wsparcie HackTricks</summary>

* Sprawd藕 [**plany subskrypcyjne**](https://github.com/sponsors/carlospolop)!
* **Docz do**  [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **led藕** nas na **Twitterze**  [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Dziel si trikami hackingowymi, przesyajc PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repozytori贸w github.

</details>
{% endhint %}
