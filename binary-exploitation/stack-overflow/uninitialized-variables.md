# Variables Non Initialis√©es

{% hint style="success" %}
Apprenez et pratiquez le Hacking AWS :<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Apprenez et pratiquez le Hacking GCP : <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Soutenir HackTricks</summary>

* Consultez les [**plans d'abonnement**](https://github.com/sponsors/carlospolop) !
* **Rejoignez le** üí¨ [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe telegram**](https://t.me/peass) ou **suivez** nous sur **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Partagez des astuces de hacking en soumettant des PRs aux** [**HackTricks**](https://github.com/carlospolop/hacktricks) et [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) d√©p√¥ts github.

</details>
{% endhint %}

## Informations de Base

L'id√©e principale ici est de comprendre ce qui se passe avec **les variables non initialis√©es car elles auront la valeur qui √©tait d√©j√† dans la m√©moire qui leur a √©t√© assign√©e.** Exemple :

* **Fonction 1 : `initializeVariable`** : Nous d√©clarons une variable `x` et lui assignons une valeur, disons `0x1234`. Cette action est semblable √† r√©server un emplacement en m√©moire et √† y mettre une valeur sp√©cifique.
* **Fonction 2 : `useUninitializedVariable`** : Ici, nous d√©clarons une autre variable `y` mais ne lui assignons aucune valeur. En C, les variables non initialis√©es ne sont pas automatiquement mises √† z√©ro. Au lieu de cela, elles conservent la derni√®re valeur qui a √©t√© stock√©e √† leur emplacement m√©moire.

Lorsque nous ex√©cutons ces deux fonctions **s√©quentiellement** :

1. Dans `initializeVariable`, `x` se voit assigner une valeur (`0x1234`), qui occupe une adresse m√©moire sp√©cifique.
2. Dans `useUninitializedVariable`, `y` est d√©clar√©e mais n'a pas de valeur assign√©e, donc elle prend l'emplacement m√©moire juste apr√®s `x`. En ne l'initialisant pas, `y` finit par "h√©riter" de la valeur du m√™me emplacement m√©moire utilis√© par `x`, car c'est la derni√®re valeur qui y √©tait.

Ce comportement illustre un concept cl√© en programmation bas niveau : **La gestion de la m√©moire est cruciale**, et les variables non initialis√©es peuvent entra√Æner un comportement impr√©visible ou des vuln√©rabilit√©s de s√©curit√©, car elles peuvent involontairement contenir des donn√©es sensibles laiss√©es en m√©moire.

Les variables de pile non initialis√©es pourraient poser plusieurs risques de s√©curit√© tels que :

* **Fuite de Donn√©es** : Des informations sensibles telles que des mots de passe, des cl√©s de chiffrement ou des d√©tails personnels peuvent √™tre expos√©es si elles sont stock√©es dans des variables non initialis√©es, permettant aux attaquants de potentiellement lire ces donn√©es.
* **Divulgation d'Informations** : Le contenu des variables non initialis√©es pourrait r√©v√©ler des d√©tails sur la disposition de la m√©moire du programme ou ses op√©rations internes, aidant les attaquants √† d√©velopper des exploits cibl√©s.
* **Pannes et Instabilit√©** : Les op√©rations impliquant des variables non initialis√©es peuvent entra√Æner un comportement ind√©fini, conduisant √† des pannes de programme ou √† des r√©sultats impr√©visibles.
* **Ex√©cution de Code Arbitraire** : Dans certains sc√©narios, les attaquants pourraient exploiter ces vuln√©rabilit√©s pour alt√©rer le flux d'ex√©cution du programme, leur permettant d'ex√©cuter du code arbitraire, ce qui pourrait inclure des menaces d'ex√©cution de code √† distance.

### Exemple
```c
#include <stdio.h>

// Function to initialize and print a variable
void initializeAndPrint() {
int initializedVar = 100; // Initialize the variable
printf("Initialized Variable:\n");
printf("Address: %p, Value: %d\n\n", (void*)&initializedVar, initializedVar);
}

// Function to demonstrate the behavior of an uninitialized variable
void demonstrateUninitializedVar() {
int uninitializedVar; // Declare but do not initialize
printf("Uninitialized Variable:\n");
printf("Address: %p, Value: %d\n\n", (void*)&uninitializedVar, uninitializedVar);
}

int main() {
printf("Demonstrating Initialized vs. Uninitialized Variables in C\n\n");

// First, call the function that initializes its variable
initializeAndPrint();

// Then, call the function that has an uninitialized variable
demonstrateUninitializedVar();

return 0;
}
```
#### Comment cela fonctionne :

* **Fonction `initializeAndPrint`** : Cette fonction d√©clare une variable enti√®re `initializedVar`, lui assigne la valeur `100`, puis imprime √† la fois l'adresse m√©moire et la valeur de la variable. Cette √©tape est simple et montre comment se comporte une variable initialis√©e.
* **Fonction `demonstrateUninitializedVar`** : Dans cette fonction, nous d√©clarons une variable enti√®re `uninitializedVar` sans l'initialiser. Lorsque nous essayons d'imprimer sa valeur, la sortie peut afficher un nombre al√©atoire. Ce nombre repr√©sente les donn√©es qui √©taient pr√©c√©demment √† cet emplacement m√©moire. Selon l'environnement et le compilateur, la sortie r√©elle peut varier, et parfois, par s√©curit√©, certains compilateurs peuvent automatiquement initialiser les variables √† z√©ro, bien que cela ne doive pas √™tre consid√©r√© comme une garantie.
* **Fonction `main`** : La fonction `main` appelle les deux fonctions ci-dessus en s√©quence, d√©montrant le contraste entre une variable initialis√©e et une variable non initialis√©e.

## Exemple ARM64

Cela ne change pas du tout en ARM64 car les variables locales sont √©galement g√©r√©es dans la pile, vous pouvez [**v√©rifier cet exemple**](https://8ksec.io/arm64-reversing-and-exploitation-part-6-exploiting-an-uninitialized-stack-variable-vulnerability/) o√π cela est montr√©.

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
