# Uninitialisierte Variablen

{% hint style="success" %}
Lerne & √ºbe AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Lerne & √ºbe GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Unterst√ºtze HackTricks</summary>

* √úberpr√ºfe die [**Abonnementpl√§ne**](https://github.com/sponsors/carlospolop)!
* **Tritt der** üí¨ [**Discord-Gruppe**](https://discord.gg/hRep4RUj7f) oder der [**Telegram-Gruppe**](https://t.me/peass) bei oder **folge** uns auf **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Teile Hacking-Tricks, indem du PRs zu den** [**HackTricks**](https://github.com/carlospolop/hacktricks) und [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub-Repos einreichst.

</details>
{% endhint %}

## Grundlegende Informationen

Die Kernidee hier ist zu verstehen, was mit **uninitialisierten Variablen passiert, da sie den Wert haben, der bereits im zugewiesenen Speicher f√ºr sie war.** Beispiel:

* **Funktion 1: `initializeVariable`**: Wir deklarieren eine Variable `x` und weisen ihr einen Wert zu, sagen wir `0x1234`. Diese Aktion ist vergleichbar mit der Reservierung eines Platzes im Speicher und dem Einf√ºgen eines bestimmten Wertes darin.
* **Funktion 2: `useUninitializedVariable`**: Hier deklarieren wir eine weitere Variable `y`, weisen ihr jedoch keinen Wert zu. In C werden uninitialisierte Variablen nicht automatisch auf null gesetzt. Stattdessen behalten sie den Wert, der zuletzt an ihrem Speicherort gespeichert wurde.

Wenn wir diese beiden Funktionen **nacheinander** ausf√ºhren:

1. In `initializeVariable` wird `x` ein Wert (`0x1234`) zugewiesen, der eine bestimmte Speicheradresse belegt.
2. In `useUninitializedVariable` wird `y` deklariert, aber nicht mit einem Wert belegt, sodass es den Speicherplatz direkt nach `x` einnimmt. Da `y` nicht initialisiert wird, erbt es den Wert von demselben Speicherort, der von `x` verwendet wurde, weil das der letzte Wert war, der dort war.

Dieses Verhalten veranschaulicht ein Schl√ºsselkonzept in der Low-Level-Programmierung: **Speicherverwaltung ist entscheidend**, und uninitialisierte Variablen k√∂nnen zu unvorhersehbarem Verhalten oder Sicherheitsanf√§lligkeiten f√ºhren, da sie unbeabsichtigt sensible Daten im Speicher halten k√∂nnen.

Uninitialisierte Stapelvariablen k√∂nnten mehrere Sicherheitsrisiken darstellen, wie:

* **Datenleck**: Sensible Informationen wie Passw√∂rter, Verschl√ºsselungsschl√ºssel oder pers√∂nliche Details k√∂nnen offengelegt werden, wenn sie in uninitialisierten Variablen gespeichert sind, was Angreifern erm√∂glicht, diese Daten m√∂glicherweise zu lesen.
* **Informationsoffenlegung**: Der Inhalt uninitialisierter Variablen k√∂nnte Details √ºber das Speicherlayout des Programms oder interne Abl√§ufe offenbaren, was Angreifern hilft, gezielte Exploits zu entwickeln.
* **Abst√ºrze und Instabilit√§t**: Operationen, die uninitialisierte Variablen betreffen, k√∂nnen zu undefiniertem Verhalten f√ºhren, was zu Programmabst√ºrzen oder unvorhersehbaren Ergebnissen f√ºhrt.
* **Arbitrary Code Execution**: In bestimmten Szenarien k√∂nnten Angreifer diese Schwachstellen ausnutzen, um den Ausf√ºhrungsfluss des Programms zu √§ndern, was es ihnen erm√∂glicht, beliebigen Code auszuf√ºhren, der m√∂glicherweise Bedrohungen durch Remote-Code-Ausf√ºhrung umfasst.

### Beispiel
```c
#include <stdio.h>

// Function to initialize and print a variable
void initializeAndPrint() {
int initializedVar = 100; // Initialize the variable
printf("Initialized Variable:\n");
printf("Address: %p, Value: %d\n\n", (void*)&initializedVar, initializedVar);
}

// Function to demonstrate the behavior of an uninitialized variable
void demonstrateUninitializedVar() {
int uninitializedVar; // Declare but do not initialize
printf("Uninitialized Variable:\n");
printf("Address: %p, Value: %d\n\n", (void*)&uninitializedVar, uninitializedVar);
}

int main() {
printf("Demonstrating Initialized vs. Uninitialized Variables in C\n\n");

// First, call the function that initializes its variable
initializeAndPrint();

// Then, call the function that has an uninitialized variable
demonstrateUninitializedVar();

return 0;
}
```
#### Wie das funktioniert:

* **`initializeAndPrint` Funktion**: Diese Funktion deklariert eine Ganzzahlvariable `initializedVar`, weist ihr den Wert `100` zu und druckt dann sowohl die Speicheradresse als auch den Wert der Variablen aus. Dieser Schritt ist unkompliziert und zeigt, wie sich eine initialisierte Variable verh√§lt.
* **`demonstrateUninitializedVar` Funktion**: In dieser Funktion deklarieren wir eine Ganzzahlvariable `uninitializedVar`, ohne sie zu initialisieren. Wenn wir versuchen, ihren Wert auszugeben, k√∂nnte die Ausgabe eine zuf√§llige Zahl zeigen. Diese Zahl repr√§sentiert die Daten, die zuvor an diesem Speicherort waren. Je nach Umgebung und Compiler kann die tats√§chliche Ausgabe variieren, und manchmal, zur Sicherheit, k√∂nnten einige Compiler Variablen automatisch auf null initialisieren, obwohl man sich darauf nicht verlassen sollte.
* **`main` Funktion**: Die `main` Funktion ruft beide oben genannten Funktionen in Folge auf und demonstriert den Unterschied zwischen einer initialisierten und einer nicht initialisierten Variable.

## ARM64 Beispiel

Das √§ndert sich in ARM64 √ºberhaupt nicht, da lokale Variablen ebenfalls im Stack verwaltet werden. Sie k√∂nnen [**dieses Beispiel √ºberpr√ºfen**](https://8ksec.io/arm64-reversing-and-exploitation-part-6-exploiting-an-uninitialized-stack-variable-vulnerability/), wo dies gezeigt wird.

{% hint style="success" %}
Lernen & √ºben Sie AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Lernen & √ºben Sie GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Unterst√ºtzen Sie HackTricks</summary>

* √úberpr√ºfen Sie die [**Abonnementpl√§ne**](https://github.com/sponsors/carlospolop)!
* **Treten Sie der** üí¨ [**Discord-Gruppe**](https://discord.gg/hRep4RUj7f) oder der [**Telegram-Gruppe**](https://t.me/peass) bei oder **folgen** Sie uns auf **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Teilen Sie Hacking-Tricks, indem Sie PRs an die** [**HackTricks**](https://github.com/carlospolop/hacktricks) und [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub-Repos senden.

</details>
{% endhint %}
