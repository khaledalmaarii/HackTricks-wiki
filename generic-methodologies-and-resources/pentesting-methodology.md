# Metodologia de Pentesting

{% hint style="success" %}
Aprenda e pratique Hacking AWS:<img src="../.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../.gitbook/assets/arte.png" alt="" data-size="line">\
Aprenda e pratique Hacking GCP: <img src="../.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Suporte ao HackTricks</summary>

* Confira os [**planos de assinatura**](https://github.com/sponsors/carlospolop)!
* **Junte-se ao** ğŸ’¬ [**grupo do Discord**](https://discord.gg/hRep4RUj7f) ou ao [**grupo do telegram**](https://t.me/peass) ou **siga**-nos no **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Compartilhe truques de hacking enviando PRs para o** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repositÃ³rios do github.

</details>
{% endhint %}

<figure><img src="../.gitbook/assets/image (1) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

Se vocÃª estÃ¡ interessado em **carreira de hacking** e hackear o inhackeÃ¡vel - **estamos contratando!** (_fluÃªncia em polonÃªs escrita e falada Ã© necessÃ¡ria_).

{% embed url="https://www.stmcyber.com/careers" %}

## Metodologia de Pentesting

<figure><img src="../.gitbook/assets/HACKTRICKS-logo.svg" alt=""><figcaption></figcaption></figure>

_Logos do Hacktricks desenhadas por_ [_@ppiernacho_](https://www.instagram.com/ppieranacho/)_._

### 0- Ataques FÃ­sicos

VocÃª tem **acesso fÃ­sico** Ã  mÃ¡quina que deseja atacar? VocÃª deve ler alguns [**truques sobre ataques fÃ­sicos**](../hardware-physical-access/physical-attacks.md) e outros sobre [**escapando de aplicaÃ§Ãµes GUI**](../hardware-physical-access/escaping-from-gui-applications.md).

### 1 - [Descobrindo hosts dentro da rede](pentesting-network/#discovering-hosts)/ [Descobrindo Ativos da empresa](external-recon-methodology/)

**Dependendo** se o **teste** que vocÃª estÃ¡ realizando Ã© um **teste interno ou externo**, vocÃª pode estar interessado em encontrar **hosts dentro da rede da empresa** (teste interno) ou **encontrar ativos da empresa na internet** (teste externo).

{% hint style="info" %}
Note que se vocÃª estiver realizando um teste externo, uma vez que conseguir obter acesso Ã  rede interna da empresa, vocÃª deve reiniciar este guia.
{% endhint %}

### **2-** [**Divertindo-se com a rede**](pentesting-network/) **(Interno)**

**Esta seÃ§Ã£o se aplica apenas se vocÃª estiver realizando um teste interno.**\
Antes de atacar um host, talvez vocÃª prefira **roubar algumas credenciais** **da rede** ou **snifar** alguns **dados** para aprender **passivamente/ativamente (MitM)** o que vocÃª pode encontrar dentro da rede. VocÃª pode ler [**Pentesting Network**](pentesting-network/#sniffing).

### 3- [Escaneamento de Portas - Descoberta de serviÃ§os](pentesting-network/#scanning-hosts)

A primeira coisa a fazer ao **procurar vulnerabilidades em um host** Ã© saber quais **serviÃ§os estÃ£o em execuÃ§Ã£o** em quais portas. Vamos ver as [**ferramentas bÃ¡sicas para escanear portas de hosts**](pentesting-network/#scanning-hosts).

### **4-** [**Buscando exploits de versÃ£o de serviÃ§o**](search-exploits.md)

Uma vez que vocÃª saiba quais serviÃ§os estÃ£o em execuÃ§Ã£o, e talvez suas versÃµes, vocÃª deve **procurar por vulnerabilidades conhecidas**. Talvez vocÃª tenha sorte e haja um exploit para lhe dar um shell...

### **5-** ServiÃ§os de Pentesting

Se nÃ£o houver nenhum exploit interessante para qualquer serviÃ§o em execuÃ§Ã£o, vocÃª deve procurar por **configuraÃ§Ãµes incorretas comuns em cada serviÃ§o em execuÃ§Ã£o.**

**Dentro deste livro vocÃª encontrarÃ¡ um guia para pentestar os serviÃ§os mais comuns** (e outros que nÃ£o sÃ£o tÃ£o comuns)**. Por favor, procure no Ã­ndice Ã  esquerda a seÃ§Ã£o _**PENTESTING**_ **(os serviÃ§os estÃ£o ordenados por suas portas padrÃ£o).**

**Quero fazer uma menÃ§Ã£o especial Ã  parte** [**Pentesting Web**](../network-services-pentesting/pentesting-web/) **(jÃ¡ que Ã© a mais extensa).**\
AlÃ©m disso, um pequeno guia sobre como [**encontrar vulnerabilidades conhecidas em software**](search-exploits.md) pode ser encontrado aqui.

**Se o seu serviÃ§o nÃ£o estiver no Ã­ndice, procure no Google** por outros tutoriais e **me avise se vocÃª quiser que eu adicione.** Se vocÃª **nÃ£o conseguir encontrar nada** no Google, realize seu **prÃ³prio pentesting cego**, vocÃª pode comeÃ§ar por **conectar-se ao serviÃ§o, fuzzing e lendo as respostas** (se houver).

#### 5.1 Ferramentas AutomÃ¡ticas

Existem tambÃ©m vÃ¡rias ferramentas que podem realizar **avaliaÃ§Ãµes automÃ¡ticas de vulnerabilidades**. **Eu recomendaria que vocÃª tentasse** [**Legion**](https://github.com/carlospolop/legion)**, que Ã© a ferramenta que eu criei e Ã© baseada nas notas sobre pentesting de serviÃ§os que vocÃª pode encontrar neste livro.**

#### **5.2 ForÃ§a Bruta em serviÃ§os**

Em alguns cenÃ¡rios, uma **ForÃ§a Bruta** pode ser Ãºtil para **comprometer** um **serviÃ§o**. [**Encontre aqui uma CheatSheet de diferentes serviÃ§os para forÃ§a bruta**](brute-force.md)**.**

### 6- [Phishing](phishing-methodology/)

Se neste ponto vocÃª nÃ£o encontrou nenhuma vulnerabilidade interessante, vocÃª **pode precisar tentar algum phishing** para entrar na rede. VocÃª pode ler minha metodologia de phishing [aqui](phishing-methodology/):

### **7-** [**Obtendo Shell**](reverse-shells/)

De alguma forma, vocÃª deve ter encontrado **alguma maneira de executar cÃ³digo** na vÃ­tima. EntÃ£o, [uma lista de possÃ­veis ferramentas dentro do sistema que vocÃª pode usar para obter um shell reverso seria muito Ãºtil](reverse-shells/).

Especialmente no Windows, vocÃª pode precisar de ajuda para **evitar antivÃ­rus**: [**Verifique esta pÃ¡gina**](../windows-hardening/av-bypass.md)**.**\\

### 8- Dentro

Se vocÃª tiver problemas com o shell, pode encontrar aqui uma pequena **compilaÃ§Ã£o dos comandos mais Ãºteis** para pentesters:

* [**Linux**](../linux-hardening/useful-linux-commands.md)
* [**Windows (CMD)**](../windows-hardening/basic-cmd-for-pentesters.md)
* [**Windows (PS)**](../windows-hardening/basic-powershell-for-pentesters/)

### **9 -** [**ExfiltraÃ§Ã£o**](exfiltration.md)

VocÃª provavelmente precisarÃ¡ **extrair alguns dados da vÃ­tima** ou atÃ© mesmo **introduzir algo** (como scripts de escalonamento de privilÃ©gios). **Aqui vocÃª tem um** [**post sobre ferramentas comuns que vocÃª pode usar com esses propÃ³sitos**](exfiltration.md)**.**

### **10- Escalonamento de PrivilÃ©gios**

#### **10.1- Privesc Local**

Se vocÃª **nÃ£o for root/Administrador** dentro da mÃ¡quina, vocÃª deve encontrar uma maneira de **escalar privilÃ©gios.**\
Aqui vocÃª pode encontrar um **guia para escalar privilÃ©gios localmente em** [**Linux**](../linux-hardening/privilege-escalation/) **e em** [**Windows**](../windows-hardening/windows-local-privilege-escalation/)**.**\
VocÃª tambÃ©m deve verificar estas pÃ¡ginas sobre como **Windows funciona**:

* [**AutenticaÃ§Ã£o, Credenciais, PrivilÃ©gios de Token e UAC**](../windows-hardening/authentication-credentials-uac-and-efs/)
* Como [**NTLM funciona**](../windows-hardening/ntlm/)
* Como [**roubar credenciais**](https://github.com/carlospolop/hacktricks/blob/master/generic-methodologies-and-resources/broken-reference/README.md) no Windows
* Alguns truques sobre [_**Active Directory**_](../windows-hardening/active-directory-methodology/)

**NÃ£o se esqueÃ§a de conferir as melhores ferramentas para enumerar caminhos de Escalonamento de PrivilÃ©gios local em Windows e Linux:** [**Suite PEAS**](https://github.com/carlospolop/privilege-escalation-awesome-scripts-suite)

#### **10.2- Privesc de DomÃ­nio**

Aqui vocÃª pode encontrar uma [**metodologia explicando as aÃ§Ãµes mais comuns para enumerar, escalar privilÃ©gios e persistir em um Active Directory**](../windows-hardening/active-directory-methodology/). Mesmo que esta seja apenas uma subseÃ§Ã£o de uma seÃ§Ã£o, esse processo pode ser **extremamente delicado** em uma atribuiÃ§Ã£o de Pentesting/Red Team.

### 11 - POST

#### **11**.1 - Saque

Verifique se vocÃª pode encontrar mais **senhas** dentro do host ou se vocÃª tem **acesso a outras mÃ¡quinas** com os **privilÃ©gios** do seu **usuÃ¡rio**.\
Encontre aqui diferentes maneiras de [**extrair senhas no Windows**](https://github.com/carlospolop/hacktricks/blob/master/generic-methodologies-and-resources/broken-reference/README.md).

#### 11.2 - PersistÃªncia

**Use 2 ou 3 tipos diferentes de mecanismos de persistÃªncia para que vocÃª nÃ£o precise explorar o sistema novamente.**\
**Aqui vocÃª pode encontrar alguns** [**truques de persistÃªncia no Active Directory**](../windows-hardening/active-directory-methodology/#persistence)**.**

TODO: Completar persistÃªncia Post em Windows & Linux

### 12 - Pivoting

Com as **credenciais coletadas**, vocÃª pode ter acesso a outras mÃ¡quinas, ou talvez precise **descobrir e escanear novos hosts** (iniciar a Metodologia de Pentesting novamente) dentro de novas redes onde sua vÃ­tima estÃ¡ conectada.\
Nesse caso, o tunelamento pode ser necessÃ¡rio. Aqui vocÃª pode encontrar [**um post falando sobre tunelamento**](tunneling-and-port-forwarding.md).\
VocÃª definitivamente tambÃ©m deve verificar o post sobre [Metodologia de pentesting do Active Directory](../windows-hardening/active-directory-methodology/). LÃ¡ vocÃª encontrarÃ¡ truques legais para se mover lateralmente, escalar privilÃ©gios e extrair credenciais.\
Verifique tambÃ©m a pÃ¡gina sobre [**NTLM**](../windows-hardening/ntlm/), pode ser muito Ãºtil para pivotar em ambientes Windows.

### MAIS

#### [AplicaÃ§Ãµes Android](../mobile-pentesting/android-app-pentesting/)

#### **Exploiting**

* [**Exploiting BÃ¡sico em Linux**](broken-reference/)
* [**Exploiting BÃ¡sico em Windows**](../binary-exploitation/windows-exploiting-basic-guide-oscp-lvl.md)
* [**Ferramentas bÃ¡sicas de exploiting**](../binary-exploitation/basic-stack-binary-exploitation-methodology/tools/)

#### [**Python BÃ¡sico**](python/)

#### **Truques de Cripto**

* [**ECB**](../crypto-and-stego/electronic-code-book-ecb.md)
* [**CBC-MAC**](../crypto-and-stego/cipher-block-chaining-cbc-mac-priv.md)
* [**Padding Oracle**](../crypto-and-stego/padding-oracle-priv.md)

<figure><img src="../.gitbook/assets/image (1) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

Se vocÃª estÃ¡ interessado em **carreira de hacking** e hackear o inhackeÃ¡vel - **estamos contratando!** (_fluÃªncia em polonÃªs escrita e falada Ã© necessÃ¡ria_).

{% embed url="https://www.stmcyber.com/careers" %}

{% hint style="success" %}
Aprenda e pratique Hacking AWS:<img src="../.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../.gitbook/assets/arte.png" alt="" data-size="line">\
Aprenda e pratique Hacking GCP: <img src="../.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Suporte ao HackTricks</summary>

* Confira os [**planos de assinatura**](https://github.com/sponsors/carlospolop)!
* **Junte-se ao** ğŸ’¬ [**grupo do Discord**](https://discord.gg/hRep4RUj7f) ou ao [**grupo do telegram**](https://t.me/peass) ou **siga**-nos no **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Compartilhe truques de hacking enviando PRs para o** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repositÃ³rios do github.

</details>
{% endhint %}
