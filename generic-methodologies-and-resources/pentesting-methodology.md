# Metodologia de Pentesting

<details>

<summary><strong>Aprenda hacking no AWS do zero ao her√≥i com</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Outras formas de apoiar o HackTricks:

* Se voc√™ quer ver sua **empresa anunciada no HackTricks** ou **baixar o HackTricks em PDF**, confira os [**PLANOS DE ASSINATURA**](https://github.com/sponsors/carlospolop)!
* Adquira o [**material oficial PEASS & HackTricks**](https://peass.creator-spring.com)
* Descubra [**A Fam√≠lia PEASS**](https://opensea.io/collection/the-peass-family), nossa cole√ß√£o de [**NFTs exclusivos**](https://opensea.io/collection/the-peass-family)
* **Junte-se ao grupo** üí¨ [**Discord**](https://discord.gg/hRep4RUj7f) ou ao [**grupo do telegram**](https://t.me/peass) ou **siga-me** no **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Compartilhe suas t√©cnicas de hacking enviando PRs para os reposit√≥rios github do** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

<figure><img src="../.gitbook/assets/i3.png" alt=""><figcaption></figcaption></figure>

\
**Dica para bug bounty**: **inscreva-se** no **Intigriti**, uma plataforma premium de **bug bounty criada por hackers, para hackers**! Junte-se a n√≥s em [**https://go.intigriti.com/hacktricks**](https://go.intigriti.com/hacktricks) hoje e comece a ganhar recompensas de at√© **$100,000**!

{% embed url="https://go.intigriti.com/hacktricks" %}

## Metodologia de Pentesting

<figure><img src="../.gitbook/assets/HACKTRICKS-logo.svg" alt=""><figcaption></figcaption></figure>

_Logos do Hacktricks desenhados por_ [_@ppiernacho_](https://www.instagram.com/ppieranacho/)_._

### 0- Ataques F√≠sicos

Voc√™ tem **acesso f√≠sico** √† m√°quina que deseja atacar? Voc√™ deve ler algumas [**dicas sobre ataques f√≠sicos**](../physical-attacks/physical-attacks.md) e outras sobre [**escapar de aplica√ß√µes GUI**](../physical-attacks/escaping-from-gui-applications/).

### 1 - [Descobrindo hosts dentro da rede](pentesting-network/#discovering-hosts) / [Descobrindo Ativos da empresa](external-recon-methodology/)

**Dependendo** se o **teste** que voc√™ est√° realizando √© um **teste interno ou externo**, voc√™ pode estar interessado em encontrar **hosts dentro da rede da empresa** (teste interno) ou **encontrar ativos da empresa na internet** (teste externo).

{% hint style="info" %}
Note que se voc√™ est√° realizando um teste externo, uma vez que voc√™ consiga obter acesso √† rede interna da empresa, voc√™ deve reiniciar este guia.
{% endhint %}

### **2-** [**Divertindo-se com a rede**](pentesting-network/) **(Interno)**

**Esta se√ß√£o s√≥ se aplica se voc√™ est√° realizando um teste interno.**\
Antes de atacar um host, talvez voc√™ prefira **roubar algumas credenciais** **da rede** ou **farejar** alguns **dados** para aprender **passivamente/ativamente (MitM)** o que voc√™ pode encontrar dentro da rede. Voc√™ pode ler [**Pentesting Network**](pentesting-network/#sniffing).

### 3- [Varredura de Portas - Descoberta de Servi√ßos](pentesting-network/#scanning-hosts)

A primeira coisa a fazer ao **procurar vulnerabilidades em um host** √© saber quais **servi√ßos est√£o rodando** em quais portas. Vamos ver as [**ferramentas b√°sicas para escanear portas de hosts**](pentesting-network/#scanning-hosts).

### **4-** [Procurando exploits de vers√£o de servi√ßo](search-exploits.md)

Uma vez que voc√™ sabe quais servi√ßos est√£o rodando, e talvez suas vers√µes, voc√™ tem que **procurar por vulnerabilidades conhecidas**. Talvez voc√™ tenha sorte e haja um exploit para te dar um shell...

### **5-** Pentesting de Servi√ßos

Se n√£o houver nenhum exploit interessante para qualquer servi√ßo em execu√ß√£o, voc√™ deve procurar por **configura√ß√µes incorretas comuns em cada servi√ßo em execu√ß√£o.**

**Dentro deste livro voc√™ encontrar√° um guia para pentestar os servi√ßos mais comuns** (e outros que n√£o s√£o t√£o comuns)**. Por favor, procure no √≠ndice √† esquerda a se√ß√£o** _**PENTESTING**_ **(os servi√ßos est√£o ordenados pelos seus portos padr√£o).**

**Quero fazer uma men√ß√£o especial √† parte de** [**Pentesting Web**](../network-services-pentesting/pentesting-web/) **(pois √© a mais extensa).**\
Al√©m disso, um pequeno guia sobre como [**encontrar vulnerabilidades conhecidas em softwares**](search-exploits.md) pode ser encontrado aqui.

**Se o seu servi√ßo n√£o estiver no √≠ndice, procure no Google** por outros tutoriais e **me avise se voc√™ quiser que eu o adicione.** Se voc√™ **n√£o encontrar nada** no Google, realize seu **pr√≥prio pentesting cego**, voc√™ pode come√ßar **conectando-se ao servi√ßo, fazendo fuzzing e lendo as respostas** (se houver).

#### 5.1 Ferramentas Autom√°ticas

Tamb√©m existem v√°rias ferramentas que podem realizar **avalia√ß√µes autom√°ticas de vulnerabilidades**. **Eu recomendaria que voc√™ experimentasse** [**Legion**](https://github.com/carlospolop/legion)**, que √© a ferramenta que eu criei e √© baseada nas notas sobre servi√ßos de pentesting que voc√™ pode encontrar neste livro.**

#### **5.2 For√ßa Bruta em servi√ßos**

Em alguns cen√°rios, uma **For√ßa Bruta** pode ser √∫til para **comprometer** um **servi√ßo**. [**Aqui voc√™ encontra um CheatSheet de diferentes servi√ßos de for√ßa bruta**](brute-force.md)**.**

<img src="../.gitbook/assets/i3.png" alt="" data-size="original">\
**Dica para bug bounty**: **inscreva-se** no **Intigriti**, uma plataforma premium de **bug bounty criada por hackers, para hackers**! Junte-se a n√≥s em [**https://go.intigriti.com/hacktricks**](https://go.intigriti.com/hacktricks) hoje e comece a ganhar recompensas de at√© **$100,000**!\\

{% embed url="https://go.intigriti.com/hacktricks" %}

### 6- [Phishing](phishing-methodology/)

Se neste ponto voc√™ n√£o encontrou nenhuma vulnerabilidade interessante, voc√™ **pode precisar tentar algum phishing** para entrar na rede. Voc√™ pode ler minha metodologia de phishing [aqui](phishing-methodology/):

### **7-** [**Obtendo Shell**](shells/)

De alguma forma, voc√™ deve ter encontrado **alguma maneira de executar c√≥digo** na v√≠tima. Ent√£o, [uma lista de poss√≠veis ferramentas dentro do sistema que voc√™ pode usar para obter um shell reverso seria muito √∫til](shells/).

Especialmente no Windows, voc√™ pode precisar de ajuda para **evitar antiv√≠rus**: [**Confira esta p√°gina**](../windows-hardening/av-bypass.md)**.**\\

### 8- Dentro

Se voc√™ est√° tendo problemas com o shell, voc√™ pode encontrar aqui uma pequena **compila√ß√£o dos comandos mais √∫teis** para pentesters:

* [**Linux**](../linux-hardening/useful-linux-commands/)
* [**Windows (CMD)**](../windows-hardening/basic-cmd-for-pentesters.md)
* [**Windows (PS)**](../windows-hardening/basic-powershell-for-pentesters/)

### **9 -** [**Exfiltra√ß√£o**](exfiltration.md)

Voc√™ provavelmente precisar√° **extrair alguns dados da v√≠tima** ou at√© mesmo **introduzir algo** (como scripts de escalonamento de privil√©gios). **Aqui voc√™ tem um** [**post sobre ferramentas comuns que voc√™ pode usar com esses prop√≥sitos**](exfiltration.md)**.**

### **10- Escalonamento de Privil√©gios**

#### **10.1- Escalonamento de Privil√©gios Local**

Se voc√™ **n√£o √© root/Administrador** dentro da caixa, voc√™ deve encontrar uma maneira de **escalonar privil√©gios.**\
Aqui voc√™ pode encontrar um **guia para escalar privil√©gios localmente no** [**Linux**](../linux-hardening/privilege-escalation/) **e no** [**Windows**](../windows-hardening/windows-local-privilege-escalation/)**.**\
Voc√™ tamb√©m deve verificar estas p√°ginas sobre como o **Windows funciona**:

* [**Autentica√ß√£o, Credenciais, Privil√©gios de Token e UAC**](../windows-hardening/authentication-credentials-uac-and-efs.md)
* Como funciona o [**NTLM**](../windows-hardening/ntlm/)
* Como [**roubar credenciais**](broken-reference/) no Windows
* Alguns truques sobre [_**Active Directory**_](../windows-hardening/active-directory-methodology/)

**N√£o se esque√ßa de conferir as melhores ferramentas para enumerar caminhos de Escalonamento de Privil√©gios locais no Windows e Linux:** [**Suite PEAS**](https://github.com/carlospolop/privilege-escalation-awesome-scripts-suite)

#### **10.2- Escalonamento de Privil√©gios de Dom√≠nio**

Aqui voc√™ pode encontrar uma [**metodologia explicando as a√ß√µes mais comuns para enumerar, escalar privil√©gios e persistir em um Active Directory**](../windows-hardening/active-directory-methodology/). Mesmo que esta seja apenas uma subse√ß√£o de uma se√ß√£o, este processo pode ser **extremamente delicado** em uma tarefa de Pentesting/Red Team.

### 11 - P√ìS

#### **11**.1 - Saqueando

Verifique se voc√™ pode encontrar mais **senhas** dentro do host ou se voc√™ tem **acesso a outras m√°quinas** com os **privil√©gios** do seu **usu√°rio**.\
Encontre aqui diferentes maneiras de [**despejar senhas no Windows**](broken-reference/).

#### 11.2 - Persist√™ncia

**Use 2 ou 3 tipos diferentes de mecanismos de persist√™ncia para que voc√™ n√£o precise explorar o sistema novamente.**\
**Aqui voc√™ pode encontrar alguns** [**truques de persist√™ncia no active directory**](../windows-hardening/active-directory-methodology/#persistence)**.**

TODO: Completar post de persist√™ncia no Windows & Linux&#x20;

### 12 - Pivoting

Com as **credenciais coletadas** voc√™ poderia ter acesso a outras m√°quinas, ou talvez voc√™ precise **descobrir e escanear novos hosts** (come√ßar a Metodologia de Pentesting novamente) dentro de novas redes onde sua v√≠tima est√° conectada.\
Neste caso, o tunelamento pode ser necess√°rio. Aqui voc√™ pode encontrar [**um post falando sobre tunelamento**](tunneling-and-port-forwarding.md).\
Voc√™ definitivamente tamb√©m deve verificar o post sobre [Metodologia de pentesting do Active Directory](../windows-hardening/active-directory-methodology/). L√° voc√™ encontrar√° truques legais para se mover lateralmente, escalar privil√©gios e despejar credenciais.\
Confira tamb√©m a p√°gina sobre [**NTLM**](../windows-hardening/ntlm/), ela pode ser muito √∫til para pivotar em ambientes Windows.

### MAIS

#### [Aplica√ß√µes Android](../mobile-pentesting/android-app-pentesting/)

#### **Explorando**

* [**Explora√ß√£o B√°sica no Linux**](../exploiting/linux-exploiting-basic-esp/)
* [**Explora√ß√£o B√°sica no Windows**](../exploiting/windows-exploiting-basic-guide-oscp-lvl.md)
* [**Ferramentas b√°sicas de explora√ß√£o**](../exploiting/tools/)

#### [**Python B√°sico**](python/)

#### **Truques de Criptografia**

* [**ECB**](../cryptography/electronic-code-book-ecb.md)
* [**CBC-MAC**](../cryptography/cipher-block-chaining-cbc-mac-priv.md)
* [**Padding Oracle**](../cryptography/padding-oracle-priv.md)

<img src="../.gitbook/assets/i3.png" alt="" data-size="original">\
**Dica para bug bounty**: **inscreva-se** no **Intigriti**, uma plataforma premium de **bug bounty criada por hackers, para hackers**! Junte-se a n√≥s em [**https://go.intigriti.com/hacktricks**](https://go.intigriti.com/hacktricks) hoje e comece a ganhar recompensas de at√© **$100,000**!

{% embed url="https://go.intigriti.com/hacktricks" %}

<details>

<summary><strong>Aprenda hacking no AWS do zero ao her√≥i com</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Outras formas de apoiar o HackTricks:

* Se voc√™ quer ver sua **empresa anunciada no HackTricks** ou **baixar o HackTricks em PDF**, confira os [**PLANOS DE ASSINATURA**](https://github.com/sponsors/carlospolop)!
* Adquira o [**material oficial PEASS & HackTricks**](https://peass.creator-spring.com)
* Descubra [**A Fam√≠lia PEASS**](https://opensea.io/collection/the-peass-family), nossa cole√ß√£o de [**NFTs exclusivos**](https://opensea.io/collection/the-peass-family)
* **Junte-se ao grupo** üí¨ [**Discord**](https://discord.gg/hRep4RUj7f) ou ao [**grupo do telegram**](https://t.me/peass) ou **siga-me** no **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Compartilhe suas t√©cnicas de hacking enviando PRs para os reposit√≥rios github do** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>
