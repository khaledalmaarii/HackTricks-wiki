# Metodolog칤a de Pentesting

{% hint style="success" %}
Aprende y practica Hacking en AWS:<img src="../.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../.gitbook/assets/arte.png" alt="" data-size="line">\
Aprende y practica Hacking en GCP: <img src="../.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Apoya a HackTricks</summary>

* Revisa los [**planes de suscripci칩n**](https://github.com/sponsors/carlospolop)!
* **칔nete al** 游눫 [**grupo de Discord**](https://discord.gg/hRep4RUj7f) o al [**grupo de telegram**](https://t.me/peass) o **s칤guenos** en **Twitter** 游냕 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Comparte trucos de hacking enviando PRs a los** [**HackTricks**](https://github.com/carlospolop/hacktricks) y [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repos de github.

</details>
{% endhint %}

<figure><img src="../.gitbook/assets/image (1) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

Si est치s interesado en una **carrera de hacking** y hackear lo inhackeable - **춰estamos contratando!** (_se requiere polaco fluido escrito y hablado_).

{% embed url="https://www.stmcyber.com/careers" %}

## Metodolog칤a de Pentesting

<figure><img src="../.gitbook/assets/HACKTRICKS-logo.svg" alt=""><figcaption></figcaption></figure>

_Los logos de Hacktricks fueron dise침ados por_ [_@ppiernacho_](https://www.instagram.com/ppieranacho/)_._

### 0- Ataques F칤sicos

쯊ienes **acceso f칤sico** a la m치quina que deseas atacar? Deber칤as leer algunos [**trucos sobre ataques f칤sicos**](../hardware-physical-access/physical-attacks.md) y otros sobre [**escapar de aplicaciones GUI**](../hardware-physical-access/escaping-from-gui-applications.md).

### 1 - [Descubriendo hosts dentro de la red](pentesting-network/#discovering-hosts)/ [Descubriendo Activos de la empresa](external-recon-methodology/)

**Dependiendo** si la **prueba** que est치s realizando es una **prueba interna o externa**, puede que te interese encontrar **hosts dentro de la red de la empresa** (prueba interna) o **encontrar activos de la empresa en internet** (prueba externa).

{% hint style="info" %}
Ten en cuenta que si est치s realizando una prueba externa, una vez que logres obtener acceso a la red interna de la empresa, deber칤as reiniciar esta gu칤a.
{% endhint %}

### **2-** [**Divirti칠ndote con la red**](pentesting-network/) **(Interna)**

**Esta secci칩n solo se aplica si est치s realizando una prueba interna.**\
Antes de atacar un host, tal vez prefieras **robar algunas credenciales** **de la red** o **esnifar** algunos **datos** para aprender **pasivamente/activamente (MitM)** qu칠 puedes encontrar dentro de la red. Puedes leer [**Pentesting Network**](pentesting-network/#sniffing).

### 3- [Escaneo de Puertos - Descubrimiento de servicios](pentesting-network/#scanning-hosts)

Lo primero que debes hacer al **buscar vulnerabilidades en un host** es saber qu칠 **servicios est치n corriendo** en qu칠 puertos. Veamos las [**herramientas b치sicas para escanear puertos de hosts**](pentesting-network/#scanning-hosts).

### **4-** [Buscando exploits de versiones de servicio](search-exploits.md)

Una vez que sepas qu칠 servicios est치n corriendo, y tal vez su versi칩n, debes **buscar vulnerabilidades conocidas**. Tal vez tengas suerte y haya un exploit que te d칠 una shell...

### **5-** Servicios de Pentesting

Si no hay ning칰n exploit interesante para alg칰n servicio en ejecuci칩n, deber칤as buscar **configuraciones incorrectas comunes en cada servicio en ejecuci칩n.**

**Dentro de este libro encontrar치s una gu칤a para pentestear los servicios m치s comunes** (y otros que no son tan comunes)**. Por favor, busca en el 칤ndice izquierdo la** _**SECCI칍N DE PENTESTING**_ **(los servicios est치n ordenados por sus puertos predeterminados).**

**Quiero hacer una menci칩n especial a la** [**Pentesting Web**](../network-services-pentesting/pentesting-web/) **parte (ya que es la m치s extensa).**\
Adem치s, aqu칤 puedes encontrar una peque침a gu칤a sobre c칩mo [**encontrar vulnerabilidades conocidas en software**](search-exploits.md).

**Si tu servicio no est치 en el 칤ndice, busca en Google** otros tutoriales y **d칠jame saber si quieres que lo agregue.** Si **no puedes encontrar nada** en Google, realiza tu **propio pentesting ciego**, podr칤as comenzar por **conectarte al servicio, fuzzing y leyendo las respuestas** (si las hay).

#### 5.1 Herramientas Autom치ticas

Tambi칠n hay varias herramientas que pueden realizar **evaluaciones autom치ticas de vulnerabilidades**. **Te recomendar칤a probar** [**Legion**](https://github.com/carlospolop/legion)**, que es la herramienta que he creado y se basa en las notas sobre pentesting de servicios que puedes encontrar en este libro.**

#### **5.2 Fuerza Bruta en servicios**

En algunos escenarios, una **Fuerza Bruta** podr칤a ser 칰til para **comprometer** un **servicio**. [**Encuentra aqu칤 una CheatSheet de diferentes servicios para fuerza bruta**](brute-force.md)**.**

### 6- [Phishing](phishing-methodology/)

Si en este punto no has encontrado ninguna vulnerabilidad interesante, **puedes necesitar intentar alg칰n phishing** para entrar en la red. Puedes leer mi metodolog칤a de phishing [aqu칤](phishing-methodology/):

### **7-** [**Obteniendo Shell**](reverse-shells/)

De alguna manera deber칤as haber encontrado **alguna forma de ejecutar c칩digo** en la v칤ctima. Entonces, [una lista de posibles herramientas dentro del sistema que puedes usar para obtener una shell inversa ser칤a muy 칰til](reverse-shells/).

Especialmente en Windows, podr칤as necesitar ayuda para **evitar antivirus**: [**Revisa esta p치gina**](../windows-hardening/av-bypass.md)**.**\\

### 8- Dentro

Si tienes problemas con la shell, aqu칤 puedes encontrar una peque침a **compilaci칩n de los comandos m치s 칰tiles** para pentesters:

* [**Linux**](../linux-hardening/useful-linux-commands.md)
* [**Windows (CMD)**](../windows-hardening/basic-cmd-for-pentesters.md)
* [**Windows (PS)**](../windows-hardening/basic-powershell-for-pentesters/)

### **9 -** [**Exfiltraci칩n**](exfiltration.md)

Probablemente necesitar치s **extraer algunos datos de la v칤ctima** o incluso **introducir algo** (como scripts de escalada de privilegios). **Aqu칤 tienes un** [**post sobre herramientas comunes que puedes usar con estos prop칩sitos**](exfiltration.md)**.**

### **10- Escalada de Privilegios**

#### **10.1- Privesc Local**

Si no eres **root/Administrador** dentro de la m치quina, deber칤as encontrar una manera de **escalar privilegios.**\
Aqu칤 puedes encontrar una **gu칤a para escalar privilegios localmente en** [**Linux**](../linux-hardening/privilege-escalation/) **y en** [**Windows**](../windows-hardening/windows-local-privilege-escalation/)**.**\
Tambi칠n deber칤as revisar estas p치ginas sobre c칩mo funciona **Windows**:

* [**Autenticaci칩n, Credenciales, Privilegios de Token y UAC**](../windows-hardening/authentication-credentials-uac-and-efs/)
* C칩mo funciona [**NTLM**](../windows-hardening/ntlm/)
* C칩mo [**robar credenciales**](https://github.com/carlospolop/hacktricks/blob/master/generic-methodologies-and-resources/broken-reference/README.md) en Windows
* Algunos trucos sobre [_**Active Directory**_](../windows-hardening/active-directory-methodology/)

**No olvides revisar las mejores herramientas para enumerar rutas de Escalaci칩n de Privilegios locales en Windows y Linux:** [**Suite PEAS**](https://github.com/carlospolop/privilege-escalation-awesome-scripts-suite)

#### **10.2- Privesc de Dominio**

Aqu칤 puedes encontrar una [**metodolog칤a que explica las acciones m치s comunes para enumerar, escalar privilegios y persistir en un Active Directory**](../windows-hardening/active-directory-methodology/). Aunque esto es solo una subsecci칩n de una secci칩n, este proceso podr칤a ser **extremadamente delicado** en una asignaci칩n de Pentesting/Red Team.

### 11 - POST

#### **11**.1 - Saqueo

Verifica si puedes encontrar m치s **contrase침as** dentro del host o si tienes **acceso a otras m치quinas** con los **privilegios** de tu **usuario**.\
Encuentra aqu칤 diferentes formas de [**extraer contrase침as en Windows**](https://github.com/carlospolop/hacktricks/blob/master/generic-methodologies-and-resources/broken-reference/README.md).

#### 11.2 - Persistencia

**Usa 2 o 3 tipos diferentes de mecanismos de persistencia para que no necesites explotar el sistema nuevamente.**\
**Aqu칤 puedes encontrar algunos** [**trucos de persistencia en active directory**](../windows-hardening/active-directory-methodology/#persistence)**.**

TODO: Completar persistencia Post en Windows y Linux

### 12 - Pivoting

Con las **credenciales recopiladas** podr칤as tener acceso a otras m치quinas, o tal vez necesites **descubrir y escanear nuevos hosts** (comenzar la Metodolog칤a de Pentesting nuevamente) dentro de nuevas redes donde tu v칤ctima est치 conectada.\
En este caso, el tunneling podr칤a ser necesario. Aqu칤 puedes encontrar [**un post que habla sobre tunneling**](tunneling-and-port-forwarding.md).\
Definitivamente tambi칠n deber칤as revisar el post sobre [Metodolog칤a de pentesting de Active Directory](../windows-hardening/active-directory-methodology/). All칤 encontrar치s trucos interesantes para moverte lateralmente, escalar privilegios y extraer credenciales.\
Revisa tambi칠n la p치gina sobre [**NTLM**](../windows-hardening/ntlm/), podr칤a ser muy 칰til para pivotar en entornos de Windows.

### M츼S

#### [Aplicaciones Android](../mobile-pentesting/android-app-pentesting/)

#### **Explotaci칩n**

* [**Explotaci칩n B치sica en Linux**](broken-reference/)
* [**Explotaci칩n B치sica en Windows**](../binary-exploitation/windows-exploiting-basic-guide-oscp-lvl.md)
* [**Herramientas b치sicas de explotaci칩n**](../binary-exploitation/basic-stack-binary-exploitation-methodology/tools/)

#### [**Python B치sico**](python/)

#### **Trucos de Cripto**

* [**ECB**](../crypto-and-stego/electronic-code-book-ecb.md)
* [**CBC-MAC**](../crypto-and-stego/cipher-block-chaining-cbc-mac-priv.md)
* [**Padding Oracle**](../crypto-and-stego/padding-oracle-priv.md)

<figure><img src="../.gitbook/assets/image (1) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

Si est치s interesado en una **carrera de hacking** y hackear lo inhackeable - **춰estamos contratando!** (_se requiere polaco fluido escrito y hablado_).

{% embed url="https://www.stmcyber.com/careers" %}

{% hint style="success" %}
Aprende y practica Hacking en AWS:<img src="../.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../.gitbook/assets/arte.png" alt="" data-size="line">\
Aprende y practica Hacking en GCP: <img src="../.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Apoya a HackTricks</summary>

* Revisa los [**planes de suscripci칩n**](https://github.com/sponsors/carlospolop)!
* **칔nete al** 游눫 [**grupo de Discord**](https://discord.gg/hRep4RUj7f) o al [**grupo de telegram**](https://t.me/peass) o **s칤guenos** en **Twitter** 游냕 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Comparte trucos de hacking enviando PRs a los** [**HackTricks**](https://github.com/carlospolop/hacktricks) y [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repos de github.

</details>
{% endhint %}
