# Contournement de la segmentation VLAN latÃ©rale

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>â˜ï¸ HackTricks Cloud â˜ï¸</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ğŸ¦ Twitter ğŸ¦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ğŸ™ï¸ Twitch ğŸ™ï¸</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ğŸ¥ Youtube ğŸ¥</strong></a></summary>

* Travaillez-vous dans une **entreprise de cybersÃ©curitÃ©**? Voulez-vous voir votre **entreprise annoncÃ©e dans HackTricks**? ou voulez-vous avoir accÃ¨s Ã  la **derniÃ¨re version du PEASS ou tÃ©lÃ©charger HackTricks en PDF**? Consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop)!
* DÃ©couvrez [**La famille PEASS**](https://opensea.io/collection/the-peass-family), notre collection exclusive de [**NFTs**](https://opensea.io/collection/the-peass-family)
* Obtenez le [**swag officiel PEASS & HackTricks**](https://peass.creator-spring.com)
* **Rejoignez le** [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe Telegram**](https://t.me/peass) ou **suivez** moi sur **Twitter** ğŸ¦[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Partagez vos astuces de piratage en soumettant des PR au [dÃ©pÃ´t hacktricks](https://github.com/carlospolop/hacktricks) et au [dÃ©pÃ´t hacktricks-cloud](https://github.com/carlospolop/hacktricks-cloud)**.

</details>

Si un accÃ¨s direct Ã  un commutateur est disponible, la segmentation VLAN peut Ãªtre contournÃ©e. Cela implique de reconfigurer le port connectÃ© en mode trunk, d'Ã©tablir des interfaces virtuelles pour les VLAN cibles, et de dÃ©finir des adresses IP, soit de maniÃ¨re dynamique (DHCP) soit de maniÃ¨re statique, en fonction du scÃ©nario (**pour plus de dÃ©tails, consultez [https://medium.com/@in9uz/cisco-nightmare-pentesting-cisco-networks-like-a-devil-f4032eb437b9](https://medium.com/@in9uz/cisco-nightmare-pentesting-cisco-networks-like-a-devil-f4032eb437b9)).**

Initialement, l'identification du port connectÃ© spÃ©cifique est requise. Cela peut gÃ©nÃ©ralement Ãªtre accompli via des messages CDP, ou en recherchant le port via le masque **include**.

**Si CDP n'est pas opÃ©rationnel, l'identification du port peut Ãªtre tentÃ©e en recherchant l'adresse MAC**:
```
SW1(config)# show mac address-table | include 0050.0000.0500
```
Avant de passer en mode trunk, une liste des VLAN existants doit Ãªtre compilÃ©e et leurs identifiants dÃ©terminÃ©s. Ces identifiants sont ensuite attribuÃ©s Ã  l'interface, permettant l'accÃ¨s Ã  diffÃ©rents VLAN via le trunk. Le port en cours d'utilisation, par exemple, est associÃ© au VLAN 10.
```
SW1# show vlan brief
```
**Passer en mode trunk implique d'entrer en mode configuration de l'interface**:
```
SW1(config)# interface GigabitEthernet 0/2
SW1(config-if)# switchport trunk encapsulation dot1q
SW1(config-if)# switchport mode trunk
```
Passer en mode trunk perturbera temporairement la connectivitÃ©, mais cela peut Ãªtre rÃ©tabli par la suite.

Des interfaces virtuelles sont ensuite crÃ©Ã©es, des identifiants VLAN leur sont attribuÃ©s et elles sont activÃ©es :
```bash
sudo vconfig add eth0 10
sudo vconfig add eth0 20
sudo vconfig add eth0 50
sudo vconfig add eth0 60
sudo ifconfig eth0.10 up
sudo ifconfig eth0.20 up
sudo ifconfig eth0.50 up
sudo ifconfig eth0.60 up
```
Ensuite, une demande d'adresse est faite via DHCP. Alternativement, dans les cas oÃ¹ DHCP n'est pas viable, les adresses peuvent Ãªtre configurÃ©es manuellement :
```bash
sudo dhclient -v eth0.10
sudo dhclient -v eth0.20
sudo dhclient -v eth0.50
sudo dhclient -v eth0.60
```
Exemple pour dÃ©finir manuellement une adresse IP statique sur une interface (VLAN 10) :
```bash
sudo ifconfig eth0.10 10.10.10.66 netmask 255.255.255.0
```
La connectivitÃ© est testÃ©e en initiant des requÃªtes ICMP aux passerelles par dÃ©faut des VLAN 10, 20, 50 et 60.

En fin de compte, ce processus permet de contourner la segmentation des VLAN, facilitant ainsi l'accÃ¨s non restreint Ã  tout rÃ©seau VLAN, et prÃ©parant le terrain pour les actions ultÃ©rieures.

## RÃ©fÃ©rences

* [https://medium.com/@in9uz/cisco-nightmare-pentesting-cisco-networks-like-a-devil-f4032eb437b9](https://medium.com/@in9uz/cisco-nightmare-pentesting-cisco-networks-like-a-devil-f4032eb437b9)

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>â˜ï¸ HackTricks Cloud â˜ï¸</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ğŸ¦ Twitter ğŸ¦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ğŸ™ï¸ Twitch ğŸ™ï¸</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ğŸ¥ Youtube ğŸ¥</strong></a></summary>

* Travaillez-vous dans une **entreprise de cybersÃ©curitÃ©**? Vous souhaitez voir votre **entreprise annoncÃ©e dans HackTricks**? ou souhaitez-vous avoir accÃ¨s Ã  la **derniÃ¨re version du PEASS ou tÃ©lÃ©charger HackTricks en PDF**? Consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop)!
* DÃ©couvrez [**La famille PEASS**](https://opensea.io/collection/the-peass-family), notre collection exclusive de [**NFTs**](https://opensea.io/collection/the-peass-family)
* Obtenez le [**swag officiel PEASS & HackTricks**](https://peass.creator-spring.com)
* **Rejoignez le** [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe Telegram**](https://t.me/peass) ou **suivez** moi sur **Twitter** ğŸ¦[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Partagez vos astuces de piratage en soumettant des PR au [dÃ©pÃ´t hacktricks](https://github.com/carlospolop/hacktricks) et au [dÃ©pÃ´t hacktricks-cloud](https://github.com/carlospolop/hacktricks-cloud)**.

</details>
