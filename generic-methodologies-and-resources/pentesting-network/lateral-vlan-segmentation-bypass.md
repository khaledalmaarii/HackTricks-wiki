# Lateral VLAN Segmentation Bypass

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

å¦‚æœå¯ä»¥ç›´æ¥è®¿é—®äº¤æ¢æœºï¼Œåˆ™å¯ä»¥ç»•è¿‡VLANåˆ†æ®µã€‚è¿™æ¶‰åŠå°†è¿æ¥ç«¯å£é‡æ–°é…ç½®ä¸ºå¹²é“æ¨¡å¼ï¼Œä¸ºç›®æ ‡VLANå»ºç«‹è™šæ‹Ÿæ¥å£ï¼Œå¹¶æ ¹æ®åœºæ™¯è®¾ç½®IPåœ°å€ï¼ˆåŠ¨æ€ï¼ˆDHCPï¼‰æˆ–é™æ€ï¼‰ï¼ˆ**æœ‰å…³æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹ [https://medium.com/@in9uz/cisco-nightmare-pentesting-cisco-networks-like-a-devil-f4032eb437b9](https://medium.com/@in9uz/cisco-nightmare-pentesting-cisco-networks-like-a-devil-f4032eb437b9)ï¼‰ã€‚**

æœ€åˆï¼Œéœ€è¦è¯†åˆ«ç‰¹å®šçš„è¿æ¥ç«¯å£ã€‚è¿™é€šå¸¸å¯ä»¥é€šè¿‡CDPæ¶ˆæ¯å®Œæˆï¼Œæˆ–é€šè¿‡**include**æ©ç æœç´¢ç«¯å£ã€‚

**å¦‚æœCDPä¸å¯æ“ä½œï¼Œå¯ä»¥å°è¯•é€šè¿‡æœç´¢MACåœ°å€è¿›è¡Œç«¯å£è¯†åˆ«**ï¼š
```
SW1(config)# show mac address-table | include 0050.0000.0500
```
åœ¨åˆ‡æ¢åˆ° trunk æ¨¡å¼ä¹‹å‰ï¼Œåº”ç¼–åˆ¶ç°æœ‰ VLAN çš„åˆ—è¡¨ï¼Œå¹¶ç¡®å®šå®ƒä»¬çš„æ ‡è¯†ç¬¦ã€‚ç„¶åå°†è¿™äº›æ ‡è¯†ç¬¦åˆ†é…ç»™æ¥å£ï¼Œä»è€Œé€šè¿‡ trunk è®¿é—®å„ç§ VLANã€‚ä¾‹å¦‚ï¼Œæ­£åœ¨ä½¿ç”¨çš„ç«¯å£ä¸ VLAN 10 ç›¸å…³è”ã€‚
```
SW1# show vlan brief
```
**åˆ‡æ¢åˆ°å¹²çº¿æ¨¡å¼éœ€è¦è¿›å…¥æ¥å£é…ç½®æ¨¡å¼**:
```
SW1(config)# interface GigabitEthernet 0/2
SW1(config-if)# switchport trunk encapsulation dot1q
SW1(config-if)# switchport mode trunk
```
åˆ‡æ¢åˆ°å¹²é“æ¨¡å¼ä¼šæš‚æ—¶ä¸­æ–­è¿æ¥ï¼Œä½†éšåå¯ä»¥æ¢å¤ã€‚

ç„¶ååˆ›å»ºè™šæ‹Ÿæ¥å£ï¼Œåˆ†é…VLAN IDï¼Œå¹¶æ¿€æ´»ï¼š
```bash
sudo vconfig add eth0 10
sudo vconfig add eth0 20
sudo vconfig add eth0 50
sudo vconfig add eth0 60
sudo ifconfig eth0.10 up
sudo ifconfig eth0.20 up
sudo ifconfig eth0.50 up
sudo ifconfig eth0.60 up
```
éšåï¼Œé€šè¿‡DHCPå‘å‡ºåœ°å€è¯·æ±‚ã€‚æˆ–è€…ï¼Œåœ¨DHCPä¸å¯è¡Œçš„æƒ…å†µä¸‹ï¼Œå¯ä»¥æ‰‹åŠ¨é…ç½®åœ°å€ï¼š
```bash
sudo dhclient -v eth0.10
sudo dhclient -v eth0.20
sudo dhclient -v eth0.50
sudo dhclient -v eth0.60
```
åœ¨æ¥å£ä¸Šæ‰‹åŠ¨è®¾ç½®é™æ€IPåœ°å€çš„ç¤ºä¾‹ï¼ˆVLAN 10ï¼‰ï¼š
```bash
sudo ifconfig eth0.10 10.10.10.66 netmask 255.255.255.0
```
è¿æ¥æ€§é€šè¿‡å‘VLAN 10ã€20ã€50å’Œ60çš„é»˜è®¤ç½‘å…³å‘èµ·ICMPè¯·æ±‚è¿›è¡Œæµ‹è¯•ã€‚

æœ€ç»ˆï¼Œè¿™ä¸ªè¿‡ç¨‹ä½¿å¾—ç»•è¿‡VLANåˆ†æ®µæˆä¸ºå¯èƒ½ï¼Œä»è€Œä¿ƒè¿›å¯¹ä»»ä½•VLANç½‘ç»œçš„æ— é™åˆ¶è®¿é—®ï¼Œå¹¶ä¸ºåç»­æ“ä½œå¥ å®šåŸºç¡€ã€‚

## å‚è€ƒæ–‡çŒ®

* [https://medium.com/@in9uz/cisco-nightmare-pentesting-cisco-networks-like-a-devil-f4032eb437b9](https://medium.com/@in9uz/cisco-nightmare-pentesting-cisco-networks-like-a-devil-f4032eb437b9)

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
