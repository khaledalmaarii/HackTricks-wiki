# Lateral VLAN Segmentation Bypass

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

ìŠ¤ìœ„ì¹˜ì— ì§ì ‘ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ê²½ìš°, VLAN ì„¸ë¶„í™”ë¥¼ ìš°íšŒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” ì—°ê²°ëœ í¬íŠ¸ë¥¼ íŠ¸ë í¬ ëª¨ë“œë¡œ ì¬êµ¬ì„±í•˜ê³ , ëŒ€ìƒ VLANì— ëŒ€í•œ ê°€ìƒ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì„¤ì •í•˜ë©°, ì‹œë‚˜ë¦¬ì˜¤ì— ë”°ë¼ ë™ì ìœ¼ë¡œ(DHCP) ë˜ëŠ” ì •ì ìœ¼ë¡œ IP ì£¼ì†Œë¥¼ ì„¤ì •í•˜ëŠ” ê²ƒì„ í¬í•¨í•©ë‹ˆë‹¤(**ìì„¸í•œ ë‚´ìš©ì€ [https://medium.com/@in9uz/cisco-nightmare-pentesting-cisco-networks-like-a-devil-f4032eb437b9](https://medium.com/@in9uz/cisco-nightmare-pentesting-cisco-networks-like-a-devil-f4032eb437b9)ì—ì„œ í™•ì¸í•˜ì‹­ì‹œì˜¤.**)

ë¨¼ì €, íŠ¹ì • ì—°ê²°ëœ í¬íŠ¸ë¥¼ ì‹ë³„í•´ì•¼ í•©ë‹ˆë‹¤. ì´ëŠ” ì¼ë°˜ì ìœ¼ë¡œ CDP ë©”ì‹œì§€ë¥¼ í†µí•´ ìˆ˜í–‰ë˜ê±°ë‚˜ **include** ë§ˆìŠ¤í¬ë¥¼ í†µí•´ í¬íŠ¸ë¥¼ ê²€ìƒ‰í•˜ì—¬ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**CDPê°€ ì‘ë™í•˜ì§€ ì•ŠëŠ” ê²½ìš°, MAC ì£¼ì†Œë¥¼ ê²€ìƒ‰í•˜ì—¬ í¬íŠ¸ ì‹ë³„ì„ ì‹œë„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤**:
```
SW1(config)# show mac address-table | include 0050.0000.0500
```
íŠ¸ë í¬ ëª¨ë“œë¡œ ì „í™˜í•˜ê¸° ì „ì— ê¸°ì¡´ VLAN ëª©ë¡ì„ ì‘ì„±í•˜ê³  í•´ë‹¹ ì‹ë³„ìë¥¼ í™•ì¸í•´ì•¼ í•©ë‹ˆë‹¤. ê·¸ëŸ° ë‹¤ìŒ ì´ ì‹ë³„ìë¥¼ ì¸í„°í˜ì´ìŠ¤ì— í• ë‹¹í•˜ì—¬ íŠ¸ë í¬ë¥¼ í†µí•´ ë‹¤ì–‘í•œ VLANì— ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì‚¬ìš© ì¤‘ì¸ í¬íŠ¸ëŠ” VLAN 10ê³¼ ì—°ê²°ë˜ì–´ ìˆìŠµë‹ˆë‹¤.
```
SW1# show vlan brief
```
**íŠ¸ë í¬ ëª¨ë“œë¡œ ì „í™˜í•˜ë ¤ë©´ ì¸í„°í˜ì´ìŠ¤ êµ¬ì„± ëª¨ë“œì— ë“¤ì–´ê°€ì•¼ í•©ë‹ˆë‹¤**:
```
SW1(config)# interface GigabitEthernet 0/2
SW1(config-if)# switchport trunk encapsulation dot1q
SW1(config-if)# switchport mode trunk
```
íŠ¸ë í¬ ëª¨ë“œë¡œ ì „í™˜í•˜ë©´ ì¼ì‹œì ìœ¼ë¡œ ì—°ê²°ì´ ì¤‘ë‹¨ë˜ì§€ë§Œ, ì´í›„ì— ë³µêµ¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ê·¸ëŸ° ë‹¤ìŒ ê°€ìƒ ì¸í„°í˜ì´ìŠ¤ê°€ ìƒì„±ë˜ê³ , VLAN IDê°€ í• ë‹¹ë˜ë©°, í™œì„±í™”ë©ë‹ˆë‹¤:
```bash
sudo vconfig add eth0 10
sudo vconfig add eth0 20
sudo vconfig add eth0 50
sudo vconfig add eth0 60
sudo ifconfig eth0.10 up
sudo ifconfig eth0.20 up
sudo ifconfig eth0.50 up
sudo ifconfig eth0.60 up
```
ê·¸ í›„, DHCPë¥¼ í†µí•´ ì£¼ì†Œ ìš”ì²­ì´ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤. ë˜ëŠ” DHCPê°€ ë¶ˆê°€ëŠ¥í•œ ê²½ìš°, ì£¼ì†Œë¥¼ ìˆ˜ë™ìœ¼ë¡œ êµ¬ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:
```bash
sudo dhclient -v eth0.10
sudo dhclient -v eth0.20
sudo dhclient -v eth0.50
sudo dhclient -v eth0.60
```
ì¸í„°í˜ì´ìŠ¤(VLAN 10)ì—ì„œ ì •ì  IP ì£¼ì†Œë¥¼ ìˆ˜ë™ìœ¼ë¡œ ì„¤ì •í•˜ëŠ” ì˜ˆ:
```bash
sudo ifconfig eth0.10 10.10.10.66 netmask 255.255.255.0
```
ì—°ê²°ì„±ì€ VLAN 10, 20, 50 ë° 60ì˜ ê¸°ë³¸ ê²Œì´íŠ¸ì›¨ì´ì— ICMP ìš”ì²­ì„ ì‹œì‘í•˜ì—¬ í…ŒìŠ¤íŠ¸ë©ë‹ˆë‹¤.

ê¶ê·¹ì ìœ¼ë¡œ ì´ í”„ë¡œì„¸ìŠ¤ëŠ” VLAN ì„¸ë¶„í™”ë¥¼ ìš°íšŒí•  ìˆ˜ ìˆê²Œ í•˜ì—¬, ëª¨ë“  VLAN ë„¤íŠ¸ì›Œí¬ì— ëŒ€í•œ ì œí•œ ì—†ëŠ” ì ‘ê·¼ì„ ìš©ì´í•˜ê²Œ í•˜ê³ , ì´í›„ ì‘ì—…ì„ ìœ„í•œ ê¸°ë°˜ì„ ë§ˆë ¨í•©ë‹ˆë‹¤.

## References

* [https://medium.com/@in9uz/cisco-nightmare-pentesting-cisco-networks-like-a-devil-f4032eb437b9](https://medium.com/@in9uz/cisco-nightmare-pentesting-cisco-networks-like-a-devil-f4032eb437b9)

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
