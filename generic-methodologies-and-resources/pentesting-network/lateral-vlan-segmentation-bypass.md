# ä¾§å‘ VLAN åˆ†å‰²ç»•è¿‡

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>â˜ï¸ HackTricks Cloud â˜ï¸</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ğŸ¦ Twitter ğŸ¦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ğŸ™ï¸ Twitch ğŸ™ï¸</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ğŸ¥ Youtube ğŸ¥</strong></a></summary>

* ä½ åœ¨ä¸€å®¶ **ç½‘ç»œå®‰å…¨å…¬å¸** å·¥ä½œå—ï¼Ÿæƒ³è¦çœ‹åˆ°ä½ çš„ **å…¬å¸åœ¨ HackTricks ä¸­è¢«å®£ä¼ ** å—ï¼Ÿæˆ–è€…ä½ æƒ³è¦è®¿é—® **PEASS çš„æœ€æ–°ç‰ˆæœ¬æˆ–ä¸‹è½½ HackTricks çš„ PDF** å—ï¼ŸæŸ¥çœ‹ [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* æ¢ç´¢ [**PEASS Family**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬ç‹¬å®¶ [**NFTs**](https://opensea.io/collection/the-peass-family) æ”¶è—å“
* è·å– [**å®˜æ–¹ PEASS & HackTricks å•†å“**](https://peass.creator-spring.com)
* **åŠ å…¥** [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ–è€… [**ç”µæŠ¥ç¾¤ç»„**](https://t.me/peass) æˆ–è€… **å…³æ³¨** æˆ‘åœ¨ **Twitter** ğŸ¦[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **é€šè¿‡å‘ [hacktricks ä»“åº“](https://github.com/carlospolop/hacktricks) å’Œ [hacktricks-cloud ä»“åº“](https://github.com/carlospolop/hacktricks-cloud)** æäº¤ PR æ¥åˆ†äº«ä½ çš„é»‘å®¢æŠ€å·§ã€‚

</details>

å¦‚æœå¯ä»¥ç›´æ¥è®¿é—®äº¤æ¢æœºï¼Œåˆ™å¯ä»¥ç»•è¿‡ VLAN åˆ†å‰²ã€‚è¿™æ¶‰åŠé‡æ–°é…ç½®è¿æ¥çš„ç«¯å£ä¸ºå¹²é“æ¨¡å¼ï¼Œä¸ºç›®æ ‡ VLAN å»ºç«‹è™šæ‹Ÿæ¥å£ï¼Œå¹¶æ ¹æ®æƒ…å†µè®¾ç½® IP åœ°å€ï¼Œå¯ä»¥æ˜¯åŠ¨æ€çš„ï¼ˆDHCPï¼‰æˆ–é™æ€çš„ï¼ˆ**æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹ [https://medium.com/@in9uz/cisco-nightmare-pentesting-cisco-networks-like-a-devil-f4032eb437b9](https://medium.com/@in9uz/cisco-nightmare-pentesting-cisco-networks-like-a-devil-f4032eb437b9)ï¼‰**ã€‚

é¦–å…ˆï¼Œéœ€è¦è¯†åˆ«ç‰¹å®šè¿æ¥ç«¯å£ã€‚é€šå¸¸å¯ä»¥é€šè¿‡ CDP æ¶ˆæ¯æˆ–é€šè¿‡ **include** æ©ç æœç´¢ç«¯å£æ¥å®ç°ã€‚

**å¦‚æœ CDP ä¸å¯ç”¨ï¼Œåˆ™å¯ä»¥å°è¯•é€šè¿‡æœç´¢ MAC åœ°å€æ¥è¿›è¡Œç«¯å£è¯†åˆ«**ï¼š
```
SW1(config)# show mac address-table | include 0050.0000.0500
```
åœ¨åˆ‡æ¢åˆ°å¹²çº¿æ¨¡å¼ä¹‹å‰ï¼Œåº”ç¼–åˆ¶ç°æœ‰VLANçš„åˆ—è¡¨ï¼Œå¹¶ç¡®å®šå®ƒä»¬çš„æ ‡è¯†ç¬¦ã€‚ç„¶åå°†è¿™äº›æ ‡è¯†ç¬¦åˆ†é…ç»™æ¥å£ï¼Œé€šè¿‡å¹²çº¿è®¿é—®å„ç§VLANã€‚ä¾‹å¦‚ï¼Œæ­£åœ¨ä½¿ç”¨çš„ç«¯å£ä¸VLAN 10ç›¸å…³è”ã€‚
```
SW1# show vlan brief
```
**åˆ‡æ¢åˆ°å¹²çº¿æ¨¡å¼éœ€è¦è¿›å…¥æ¥å£é…ç½®æ¨¡å¼**:
```
SW1(config)# interface GigabitEthernet 0/2
SW1(config-if)# switchport trunk encapsulation dot1q
SW1(config-if)# switchport mode trunk
```
åˆ‡æ¢åˆ°å¹²çº¿æ¨¡å¼ä¼šæš‚æ—¶ä¸­æ–­è¿æ¥ï¼Œä½†éšåå¯ä»¥æ¢å¤ã€‚

ç„¶ååˆ›å»ºè™šæ‹Ÿæ¥å£ï¼Œåˆ†é…VLAN IDï¼Œå¹¶æ¿€æ´»ï¼š
```bash
sudo vconfig add eth0 10
sudo vconfig add eth0 20
sudo vconfig add eth0 50
sudo vconfig add eth0 60
sudo ifconfig eth0.10 up
sudo ifconfig eth0.20 up
sudo ifconfig eth0.50 up
sudo ifconfig eth0.60 up
```
éšåï¼Œé€šè¿‡DHCPå‘å‡ºåœ°å€è¯·æ±‚ã€‚æˆ–è€…ï¼Œåœ¨DHCPä¸å¯è¡Œçš„æƒ…å†µä¸‹ï¼Œåœ°å€å¯ä»¥æ‰‹åŠ¨é…ç½®ï¼š
```bash
sudo dhclient -v eth0.10
sudo dhclient -v eth0.20
sudo dhclient -v eth0.50
sudo dhclient -v eth0.60
```
### åœ¨æ¥å£ä¸Šæ‰‹åŠ¨è®¾ç½®é™æ€IPåœ°å€çš„ç¤ºä¾‹ï¼ˆVLAN 10ï¼‰ï¼š
```bash
sudo ifconfig eth0.10 10.10.10.66 netmask 255.255.255.0
```
### é€šè¿‡å‘ VLAN 10ã€20ã€50 å’Œ 60 çš„é»˜è®¤ç½‘å…³å‘èµ· ICMP è¯·æ±‚æ¥æµ‹è¯•è¿æ¥æ€§ã€‚

æœ€ç»ˆï¼Œè¿™ä¸ªè¿‡ç¨‹ä½¿ç»•è¿‡ VLAN åˆ†å‰²æˆä¸ºå¯èƒ½ï¼Œä»è€Œå®ç°å¯¹ä»»ä½• VLAN ç½‘ç»œçš„æ— é™åˆ¶è®¿é—®ï¼Œå¹¶ä¸ºåç»­æ“ä½œå¥ å®šåŸºç¡€ã€‚

## å‚è€ƒèµ„æ–™

* [https://medium.com/@in9uz/cisco-nightmare-pentesting-cisco-networks-like-a-devil-f4032eb437b9](https://medium.com/@in9uz/cisco-nightmare-pentesting-cisco-networks-like-a-devil-f4032eb437b9)

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>â˜ï¸ HackTricks Cloud â˜ï¸</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ğŸ¦ Twitter ğŸ¦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ğŸ™ï¸ Twitch ğŸ™ï¸</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ğŸ¥ Youtube ğŸ¥</strong></a></summary>

* æ‚¨åœ¨**ç½‘ç»œå®‰å…¨å…¬å¸**å·¥ä½œå—ï¼Ÿæ‚¨æƒ³çœ‹åˆ°æ‚¨çš„**å…¬å¸åœ¨ HackTricks ä¸­è¢«å®£ä¼ **å—ï¼Ÿæˆ–è€…æ‚¨æƒ³è·å¾—**PEASS çš„æœ€æ–°ç‰ˆæœ¬æˆ–ä¸‹è½½ HackTricks çš„ PDF ç‰ˆæœ¬**å—ï¼Ÿè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼
* å‘ç°æˆ‘ä»¬çš„ç‹¬å®¶[NFTs é›†åˆ](https://opensea.io/collection/the-peass-family)ï¼Œ[**The PEASS Family**](https://opensea.io/collection/the-peass-family)
* è·å–[**å®˜æ–¹ PEASS & HackTricks å•†å“**](https://peass.creator-spring.com)
* **åŠ å…¥** [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**ç”µæŠ¥ç¾¤ç»„**](https://t.me/peass) æˆ–**å…³æ³¨**æˆ‘åœ¨**Twitter** ğŸ¦[**@carlospolopm**](https://twitter.com/hacktricks_live)**ã€‚**
* **é€šè¿‡å‘ [hacktricks ä»“åº“](https://github.com/carlospolop/hacktricks) å’Œ [hacktricks-cloud ä»“åº“](https://github.com/carlospolop/hacktricks-cloud) æäº¤ PR æ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§**ã€‚

</details>
