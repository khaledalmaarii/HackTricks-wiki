# Lateral VLAN Segmentation Bypass

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

EÄŸer bir anahtara doÄŸrudan eriÅŸim mevcutsa, VLAN segmentasyonu atlatÄ±labilir. Bu, baÄŸlÄ± portun trunk moduna yeniden yapÄ±landÄ±rÄ±lmasÄ±nÄ±, hedef VLAN'lar iÃ§in sanal arayÃ¼zlerin oluÅŸturulmasÄ±nÄ± ve senaryoya baÄŸlÄ± olarak IP adreslerinin dinamik (DHCP) veya statik olarak ayarlanmasÄ±nÄ± iÃ§erir (**daha fazla detay iÃ§in [https://medium.com/@in9uz/cisco-nightmare-pentesting-cisco-networks-like-a-devil-f4032eb437b9](https://medium.com/@in9uz/cisco-nightmare-pentesting-cisco-networks-like-a-devil-f4032eb437b9) kontrol edin.**)

Ã–ncelikle, belirli baÄŸlÄ± portun tanÄ±mlanmasÄ± gereklidir. Bu genellikle CDP mesajlarÄ± aracÄ±lÄ±ÄŸÄ±yla veya portu **include** maskesi ile arayarak gerÃ§ekleÅŸtirilebilir.

**EÄŸer CDP Ã§alÄ±ÅŸmÄ±yorsa, port tanÄ±mlamasÄ± MAC adresini arayarak yapÄ±lmaya Ã§alÄ±ÅŸÄ±labilir:**
```
SW1(config)# show mac address-table | include 0050.0000.0500
```
Trunk moduna geÃ§meden Ã¶nce, mevcut VLAN'larÄ±n bir listesi derlenmeli ve tanÄ±mlayÄ±cÄ±larÄ± belirlenmelidir. Bu tanÄ±mlayÄ±cÄ±lar daha sonra arayÃ¼ze atanÄ±r ve trunk Ã¼zerinden Ã§eÅŸitli VLAN'lara eriÅŸim saÄŸlanÄ±r. KullanÄ±lan port, Ã¶rneÄŸin, VLAN 10 ile iliÅŸkilidir.
```
SW1# show vlan brief
```
**Trunk moduna geÃ§iÅŸ yapmak, arayÃ¼z yapÄ±landÄ±rma moduna girmeyi gerektirir**:
```
SW1(config)# interface GigabitEthernet 0/2
SW1(config-if)# switchport trunk encapsulation dot1q
SW1(config-if)# switchport mode trunk
```
Trunk moduna geÃ§mek, baÄŸlantÄ±yÄ± geÃ§ici olarak kesintiye uÄŸratacaktÄ±r, ancak bu daha sonra geri yÃ¼klenebilir.

Sanal arayÃ¼zler daha sonra oluÅŸturulur, VLAN kimlikleri atanÄ±r ve etkinleÅŸtirilir:
```bash
sudo vconfig add eth0 10
sudo vconfig add eth0 20
sudo vconfig add eth0 50
sudo vconfig add eth0 60
sudo ifconfig eth0.10 up
sudo ifconfig eth0.20 up
sudo ifconfig eth0.50 up
sudo ifconfig eth0.60 up
```
SonrasÄ±nda, DHCP aracÄ±lÄ±ÄŸÄ±yla bir adres talebi yapÄ±lÄ±r. Alternatif olarak, DHCP'nin mÃ¼mkÃ¼n olmadÄ±ÄŸÄ± durumlarda, adresler manuel olarak yapÄ±landÄ±rÄ±labilir:
```bash
sudo dhclient -v eth0.10
sudo dhclient -v eth0.20
sudo dhclient -v eth0.50
sudo dhclient -v eth0.60
```
VLAN 10'da bir arayÃ¼zde statik IP adresi manuel olarak ayarlamak iÃ§in Ã¶rnek:
```bash
sudo ifconfig eth0.10 10.10.10.66 netmask 255.255.255.0
```
BaÄŸlantÄ±, VLAN'lar 10, 20, 50 ve 60 iÃ§in varsayÄ±lan aÄŸ geÃ§itlerine ICMP istekleri baÅŸlatarak test edilir.

SonuÃ§ olarak, bu sÃ¼reÃ§ VLAN segmentasyonunun aÅŸÄ±lmasÄ±nÄ± saÄŸlar, bÃ¶ylece herhangi bir VLAN aÄŸÄ±na sÄ±nÄ±rsÄ±z eriÅŸim saÄŸlanÄ±r ve sonraki eylemler iÃ§in zemin hazÄ±rlanÄ±r.

## Referanslar

* [https://medium.com/@in9uz/cisco-nightmare-pentesting-cisco-networks-like-a-devil-f4032eb437b9](https://medium.com/@in9uz/cisco-nightmare-pentesting-cisco-networks-like-a-devil-f4032eb437b9)

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
