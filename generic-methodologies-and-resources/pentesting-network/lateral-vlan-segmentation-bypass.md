# æ¨ªå‘VLANéš”ç¦»ç»•è¿‡

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>â˜ï¸ HackTricks Cloud â˜ï¸</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ğŸ¦ Twitter ğŸ¦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ğŸ™ï¸ Twitch ğŸ™ï¸</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ğŸ¥ Youtube ğŸ¥</strong></a></summary>

* å¦‚æœæ‚¨åœ¨**ç½‘ç»œå®‰å…¨å…¬å¸**å·¥ä½œï¼Œæƒ³åœ¨**HackTricks**ä¸Šçœ‹åˆ°æ‚¨çš„**å…¬å¸å¹¿å‘Š**ï¼Œæˆ–è€…æƒ³è¦è·å–**PEASSçš„æœ€æ–°ç‰ˆæœ¬æˆ–ä»¥PDFæ ¼å¼ä¸‹è½½HackTricks**ï¼Œè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼
* å‘ç°æˆ‘ä»¬çš„ç‹¬å®¶[**NFTs**](https://opensea.io/collection/the-peass-family)ç³»åˆ—ï¼Œ[**The PEASS Family**](https://opensea.io/collection/the-peass-family)
* è·å–[**å®˜æ–¹PEASS & HackTrickså‘¨è¾¹äº§å“**](https://peass.creator-spring.com)
* **åŠ å…¥** [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discordç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**telegramç¾¤ç»„**](https://t.me/peass) æˆ–åœ¨**Twitter**ä¸Š**å…³æ³¨**æˆ‘ [**ğŸ¦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks_live)**ã€‚**
* **é€šè¿‡å‘[hacktricks repo](https://github.com/carlospolop/hacktricks)å’Œ[hacktricks-cloud repo](https://github.com/carlospolop/hacktricks-cloud)æäº¤PRæ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚**

</details>

å¦‚æœå¯ä»¥ç›´æ¥è®¿é—®äº¤æ¢æœºï¼Œå¯ä»¥ç»•è¿‡VLANéš”ç¦»ã€‚è¿™æ¶‰åŠå°†è¿æ¥ç«¯å£é‡æ–°é…ç½®ä¸ºtrunkæ¨¡å¼ï¼Œä¸ºç›®æ ‡VLANå»ºç«‹è™šæ‹Ÿæ¥å£ï¼Œå¹¶æ ¹æ®åœºæ™¯åŠ¨æ€ï¼ˆDHCPï¼‰æˆ–é™æ€è®¾ç½®IPåœ°å€ï¼ˆæ›´å¤šä¿¡æ¯è¯·æŸ¥çœ‹https://medium.com/@in9uz/cisco-nightmare-pentesting-cisco-networks-like-a-devil-f4032eb437b9ï¼‰ã€‚

é¦–å…ˆï¼Œéœ€è¦è¯†åˆ«ç‰¹å®šçš„è¿æ¥ç«¯å£ã€‚è¿™é€šå¸¸å¯ä»¥é€šè¿‡CDPæ¶ˆæ¯å®Œæˆï¼Œæˆ–è€…é€šè¿‡**include**æ©ç æœç´¢ç«¯å£ã€‚

**å¦‚æœCDPä¸å¯ç”¨ï¼Œå¯ä»¥å°è¯•é€šè¿‡æœç´¢MACåœ°å€æ¥è¯†åˆ«ç«¯å£**ï¼š
```
SW1(config)# show mac address-table | include 0050.0000.0500
```
åœ¨åˆ‡æ¢åˆ°trunkæ¨¡å¼ä¹‹å‰ï¼Œåº”è¯¥ç¼–åˆ¶ç°æœ‰VLANçš„åˆ—è¡¨ï¼Œå¹¶ç¡®å®šå®ƒä»¬çš„æ ‡è¯†ç¬¦ã€‚ç„¶åå°†è¿™äº›æ ‡è¯†ç¬¦åˆ†é…ç»™æ¥å£ï¼Œé€šè¿‡trunkè®¿é—®ä¸åŒçš„VLANã€‚ä¾‹å¦‚ï¼Œæ­£åœ¨ä½¿ç”¨çš„ç«¯å£ä¸VLAN 10å…³è”ã€‚
```
SW1# show vlan brief
```
**è½¬æ¢åˆ°trunkæ¨¡å¼åŒ…æ‹¬è¿›å…¥æ¥å£é…ç½®æ¨¡å¼ï¼š**
```
SW1(config)# interface GigabitEthernet 0/2
SW1(config-if)# switchport trunk encapsulation dot1q
SW1(config-if)# switchport mode trunk
```
```markdown
åˆ‡æ¢åˆ°trunkæ¨¡å¼å°†æš‚æ—¶ä¸­æ–­è¿æ¥ï¼Œä½†éšåå¯ä»¥æ¢å¤ã€‚

ç„¶ååˆ›å»ºè™šæ‹Ÿæ¥å£ï¼Œåˆ†é…VLAN IDï¼Œå¹¶æ¿€æ´»ï¼š
```
```
~$ sudo vconfig add eth0 10
~$ sudo vconfig add eth0 20
~$ sudo vconfig add eth0 50
~$ sudo vconfig add eth0 60
~$ sudo ifconfig eth0.10 up
~$ sudo ifconfig eth0.20 up
~$ sudo ifconfig eth0.50 up
~$ sudo ifconfig eth0.60 up
```
éšåï¼Œé€šè¿‡DHCPå‘å‡ºåœ°å€è¯·æ±‚ã€‚å¦‚æœDHCPä¸å¯è¡Œï¼Œä¹Ÿå¯ä»¥æ‰‹åŠ¨é…ç½®åœ°å€ï¼š
```
~$ sudo dhclient -v eth0.10
~$ sudo dhclient -v eth0.20
~$ sudo dhclient -v eth0.50
~$ sudo dhclient -v eth0.60
```
ç¤ºä¾‹ï¼šæ‰‹åŠ¨åœ¨æ¥å£ä¸Šè®¾ç½®é™æ€IPåœ°å€ï¼ˆVLAN 10ï¼‰ï¼š
```
~$ sudo ifconfig eth0.10 10.10.10.66 netmask 255.255.255.0
```
é€šè¿‡å‘èµ· ICMP è¯·æ±‚åˆ° VLAN 10ã€20ã€50 å’Œ 60 çš„é»˜è®¤ç½‘å…³æ¥æµ‹è¯•è¿é€šæ€§ã€‚

æœ€ç»ˆï¼Œè¿™ä¸ªè¿‡ç¨‹èƒ½å¤Ÿç»•è¿‡ VLAN åˆ†æ®µï¼Œä»è€Œä¾¿äºæ— é™åˆ¶åœ°è®¿é—®ä»»ä½• VLAN ç½‘ç»œï¼Œå¹¶ä¸ºåç»­è¡ŒåŠ¨åšå¥½å‡†å¤‡ã€‚

# å‚è€ƒèµ„æ–™

* [https://medium.com/@in9uz/cisco-nightmare-pentesting-cisco-networks-like-a-devil-f4032eb437b9](https://medium.com/@in9uz/cisco-nightmare-pentesting-cisco-networks-like-a-devil-f4032eb437b9)

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>â˜ï¸ HackTricks Cloud â˜ï¸</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ğŸ¦ Twitter ğŸ¦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ğŸ™ï¸ Twitch ğŸ™ï¸</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ğŸ¥ Youtube ğŸ¥</strong></a></summary>

* å¦‚æœä½ åœ¨ä¸€å®¶**ç½‘ç»œå®‰å…¨å…¬å¸**å·¥ä½œï¼Ÿä½ æƒ³åœ¨**HackTricks**ä¸­çœ‹åˆ°ä½ çš„**å…¬å¸å¹¿å‘Š**ï¼Ÿæˆ–è€…ä½ æƒ³è¦è®¿é—®**PEASSçš„æœ€æ–°ç‰ˆæœ¬æˆ–ä¸‹è½½HackTricksçš„PDF**ï¼ŸæŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼
* å‘ç°[**PEASSå®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬ç‹¬å®¶çš„[**NFTsç³»åˆ—**](https://opensea.io/collection/the-peass-family)
* è·å–[**å®˜æ–¹çš„PEASS & HackTrickså•†å“**](https://peass.creator-spring.com)
* **åŠ å…¥**[**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discordç¾¤ç»„**](https://discord.gg/hRep4RUj7f)æˆ–[**telegramç¾¤ç»„**](https://t.me/peass)æˆ–åœ¨**Twitter**ä¸Š**å…³æ³¨**æˆ‘[**ğŸ¦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks_live)**ã€‚**
* **é€šè¿‡å‘[hacktricksä»“åº“](https://github.com/carlospolop/hacktricks)å’Œ[hacktricks-cloudä»“åº“](https://github.com/carlospolop/hacktricks-cloud)æäº¤PRæ¥åˆ†äº«ä½ çš„é»‘å®¢æŠ€å·§ã€‚**

</details>
