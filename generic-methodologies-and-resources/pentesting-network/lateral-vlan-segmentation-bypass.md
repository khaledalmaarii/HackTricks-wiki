# Lateral VLAN Segmentation Bypass

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

Î‘Î½ ÎµÎ¯Î½Î±Î¹ Î´Î¹Î±Î¸Î­ÏƒÎ¹Î¼Î· Î¬Î¼ÎµÏƒÎ· Ï€ÏÏŒÏƒÎ²Î±ÏƒÎ· ÏƒÎµ Î­Î½Î±Î½ Î´Î¹Î±ÎºÏŒÏ€Ï„Î·, Î· Ï„Î¼Î·Î¼Î±Ï„Î¿Ï€Î¿Î¯Î·ÏƒÎ· VLAN Î¼Ï€Î¿ÏÎµÎ¯ Î½Î± Ï€Î±ÏÎ±ÎºÎ±Î¼Ï†Î¸ÎµÎ¯. Î‘Ï…Ï„ÏŒ Ï€ÎµÏÎ¹Î»Î±Î¼Î²Î¬Î½ÎµÎ¹ Ï„Î·Î½ ÎµÏ€Î±Î½Î±Î´Î¹Î±Î¼ÏŒÏÏ†Ï‰ÏƒÎ· Ï„Î·Ï‚ ÏƒÏ…Î½Î´ÎµÎ´ÎµÎ¼Î­Î½Î·Ï‚ Î¸ÏÏÎ±Ï‚ ÏƒÎµ Î»ÎµÎ¹Ï„Î¿Ï…ÏÎ³Î¯Î± trunk, Ï„Î· Î´Î·Î¼Î¹Î¿Ï…ÏÎ³Î¯Î± ÎµÎ¹ÎºÎ¿Î½Î¹ÎºÏÎ½ Î´Î¹ÎµÏ€Î±Ï†ÏÎ½ Î³Î¹Î± Ï„Î¹Ï‚ ÏƒÏ„Î¿Ï‡ÎµÏ…Î¼Î­Î½ÎµÏ‚ VLAN ÎºÎ±Î¹ Ï„Î·Î½ ÏÏÎ¸Î¼Î¹ÏƒÎ· Î´Î¹ÎµÏ…Î¸ÏÎ½ÏƒÎµÏ‰Î½ IP, ÎµÎ¯Ï„Îµ Î´Ï…Î½Î±Î¼Î¹ÎºÎ¬ (DHCP) ÎµÎ¯Ï„Îµ ÏƒÏ„Î±Ï„Î¹ÎºÎ¬, Î±Î½Î¬Î»Î¿Î³Î± Î¼Îµ Ï„Î¿ ÏƒÎµÎ½Î¬ÏÎ¹Î¿ (**Î³Î¹Î± Ï€ÎµÏÎ¹ÏƒÏƒÏŒÏ„ÎµÏÎµÏ‚ Î»ÎµÏ€Ï„Î¿Î¼Î­ÏÎµÎ¹ÎµÏ‚ Î´ÎµÎ¯Ï„Îµ [https://medium.com/@in9uz/cisco-nightmare-pentesting-cisco-networks-like-a-devil-f4032eb437b9](https://medium.com/@in9uz/cisco-nightmare-pentesting-cisco-networks-like-a-devil-f4032eb437b9)).**

Î‘ÏÏ‡Î¹ÎºÎ¬, Î±Ï€Î±Î¹Ï„ÎµÎ¯Ï„Î±Î¹ Î· Î±Î½Î±Î³Î½ÏÏÎ¹ÏƒÎ· Ï„Î·Ï‚ ÏƒÏ…Î³ÎºÎµÎºÏÎ¹Î¼Î­Î½Î·Ï‚ ÏƒÏ…Î½Î´ÎµÎ´ÎµÎ¼Î­Î½Î·Ï‚ Î¸ÏÏÎ±Ï‚. Î‘Ï…Ï„ÏŒ Î¼Ï€Î¿ÏÎµÎ¯ ÏƒÏ…Î½Î®Î¸Ï‰Ï‚ Î½Î± ÎµÏ€Î¹Ï„ÎµÏ…Ï‡Î¸ÎµÎ¯ Î¼Î­ÏƒÏ‰ Î¼Î·Î½Ï…Î¼Î¬Ï„Ï‰Î½ CDP Î® Î±Î½Î±Î¶Î·Ï„ÏÎ½Ï„Î±Ï‚ Ï„Î· Î¸ÏÏÎ± Î¼Î­ÏƒÏ‰ Ï„Î·Ï‚ Î¼Î¬ÏƒÎºÎ±Ï‚ **include**.

**Î‘Î½ Ï„Î¿ CDP Î´ÎµÎ½ Î»ÎµÎ¹Ï„Î¿Ï…ÏÎ³ÎµÎ¯, Î¼Ï€Î¿ÏÎµÎ¯ Î½Î± Î³Î¯Î½ÎµÎ¹ Ï€ÏÎ¿ÏƒÏ€Î¬Î¸ÎµÎ¹Î± Î±Î½Î±Î³Î½ÏÏÎ¹ÏƒÎ·Ï‚ Ï„Î·Ï‚ Î¸ÏÏÎ±Ï‚ Î±Î½Î±Î¶Î·Ï„ÏÎ½Ï„Î±Ï‚ Ï„Î· Î´Î¹ÎµÏÎ¸Ï…Î½ÏƒÎ· MAC**:
```
SW1(config)# show mac address-table | include 0050.0000.0500
```
Î ÏÎ¹Î½ Î±Ï€ÏŒ Ï„Î·Î½ Î±Î»Î»Î±Î³Î® ÏƒÎµ Î»ÎµÎ¹Ï„Î¿Ï…ÏÎ³Î¯Î± trunk, Î¸Î± Ï€ÏÎ­Ï€ÎµÎ¹ Î½Î± ÏƒÏ…Î³ÎºÎµÎ½Ï„ÏÏ‰Î¸ÎµÎ¯ Î¼Î¹Î± Î»Î¯ÏƒÏ„Î± Î¼Îµ Ï„Î¹Ï‚ Ï…Ï€Î¬ÏÏ‡Î¿Ï…ÏƒÎµÏ‚ VLAN ÎºÎ±Î¹ Î½Î± Ï€ÏÎ¿ÏƒÎ´Î¹Î¿ÏÎ¹ÏƒÏ„Î¿ÏÎ½ Î¿Î¹ Ï„Î±Ï…Ï„Î¿Î¯ Ï„Î¿Ï…Ï‚. Î‘Ï…Ï„Î­Ï‚ Î¿Î¹ Ï„Î±Ï…Ï„Î¿Î¯ ÏƒÏ„Î· ÏƒÏ…Î½Î­Ï‡ÎµÎ¹Î± Î±Î½Î±Ï„Î¯Î¸ÎµÎ½Ï„Î±Î¹ ÏƒÏ„Î· Î´Î¹ÎµÏ€Î±Ï†Î®, ÎµÏ€Î¹Ï„ÏÎ­Ï€Î¿Î½Ï„Î±Ï‚ Ï„Î·Î½ Ï€ÏÏŒÏƒÎ²Î±ÏƒÎ· ÏƒÎµ Î´Î¹Î¬Ï†Î¿ÏÎµÏ‚ VLAN Î¼Î­ÏƒÏ‰ Ï„Î¿Ï… trunk. Î— Î¸ÏÏÎ± Ï€Î¿Ï… Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹ÎµÎ¯Ï„Î±Î¹, Î³Î¹Î± Ï€Î±ÏÎ¬Î´ÎµÎ¹Î³Î¼Î±, ÏƒÏ‡ÎµÏ„Î¯Î¶ÎµÏ„Î±Î¹ Î¼Îµ Ï„Î·Î½ VLAN 10.
```
SW1# show vlan brief
```
**Î— Î¼ÎµÏ„Î¬Î²Î±ÏƒÎ· ÏƒÎµ Î»ÎµÎ¹Ï„Î¿Ï…ÏÎ³Î¯Î± trunk Ï€ÎµÏÎ¹Î»Î±Î¼Î²Î¬Î½ÎµÎ¹ Ï„Î·Î½ ÎµÎ¯ÏƒÎ¿Î´Î¿ ÏƒÏ„Î· Î»ÎµÎ¹Ï„Î¿Ï…ÏÎ³Î¯Î± Î´Î¹Î±Î¼ÏŒÏÏ†Ï‰ÏƒÎ·Ï‚ Î´Î¹ÎµÏ€Î±Ï†Î®Ï‚**:
```
SW1(config)# interface GigabitEthernet 0/2
SW1(config-if)# switchport trunk encapsulation dot1q
SW1(config-if)# switchport mode trunk
```
Î— Î¼ÎµÏ„Î¬Î²Î±ÏƒÎ· ÏƒÎµ Î»ÎµÎ¹Ï„Î¿Ï…ÏÎ³Î¯Î± trunk Î¸Î± Î´Î¹Î±Ï„Î±ÏÎ¬Î¾ÎµÎ¹ Ï€ÏÎ¿ÏƒÏ‰ÏÎ¹Î½Î¬ Ï„Î· ÏƒÏ…Î½Î´ÎµÏƒÎ¹Î¼ÏŒÏ„Î·Ï„Î±, Î±Î»Î»Î¬ Î±Ï…Ï„Î® Î¼Ï€Î¿ÏÎµÎ¯ Î½Î± Î±Ï€Î¿ÎºÎ±Ï„Î±ÏƒÏ„Î±Î¸ÎµÎ¯ ÏƒÏ„Î· ÏƒÏ…Î½Î­Ï‡ÎµÎ¹Î±.

Î£Ï„Î· ÏƒÏ…Î½Î­Ï‡ÎµÎ¹Î± Î´Î·Î¼Î¹Î¿Ï…ÏÎ³Î¿ÏÎ½Ï„Î±Î¹ ÎµÎ¹ÎºÎ¿Î½Î¹ÎºÎ­Ï‚ Î´Î¹ÎµÏ€Î±Ï†Î­Ï‚, Î±Î½Î±Ï„Î¯Î¸ÎµÎ½Ï„Î±Î¹ Ï„Î± VLAN IDs ÎºÎ±Î¹ ÎµÎ½ÎµÏÎ³Î¿Ï€Î¿Î¹Î¿ÏÎ½Ï„Î±Î¹:
```bash
sudo vconfig add eth0 10
sudo vconfig add eth0 20
sudo vconfig add eth0 50
sudo vconfig add eth0 60
sudo ifconfig eth0.10 up
sudo ifconfig eth0.20 up
sudo ifconfig eth0.50 up
sudo ifconfig eth0.60 up
```
Î£Ï„Î· ÏƒÏ…Î½Î­Ï‡ÎµÎ¹Î±, Î³Î¯Î½ÎµÏ„Î±Î¹ Î­Î½Î± Î±Î¯Ï„Î·Î¼Î± Î´Î¹ÎµÏÎ¸Ï…Î½ÏƒÎ·Ï‚ Î¼Î­ÏƒÏ‰ DHCP. Î•Î½Î±Î»Î»Î±ÎºÏ„Î¹ÎºÎ¬, ÏƒÎµ Ï€ÎµÏÎ¹Ï€Ï„ÏÏƒÎµÎ¹Ï‚ ÏŒÏ€Î¿Ï… Ï„Î¿ DHCP Î´ÎµÎ½ ÎµÎ¯Î½Î±Î¹ ÎµÏ†Î¹ÎºÏ„ÏŒ, Î¿Î¹ Î´Î¹ÎµÏ…Î¸ÏÎ½ÏƒÎµÎ¹Ï‚ Î¼Ï€Î¿ÏÎ¿ÏÎ½ Î½Î± ÏÏ…Î¸Î¼Î¹ÏƒÏ„Î¿ÏÎ½ Ï‡ÎµÎ¹ÏÎ¿ÎºÎ¯Î½Î·Ï„Î±:
```bash
sudo dhclient -v eth0.10
sudo dhclient -v eth0.20
sudo dhclient -v eth0.50
sudo dhclient -v eth0.60
```
Î Î±ÏÎ¬Î´ÎµÎ¹Î³Î¼Î± Î³Î¹Î± Ï„Î·Î½ Ï‡ÎµÎ¹ÏÎ¿ÎºÎ¯Î½Î·Ï„Î· ÏÏÎ¸Î¼Î¹ÏƒÎ· Î¼Î¹Î±Ï‚ ÏƒÏ„Î±Ï„Î¹ÎºÎ®Ï‚ Î´Î¹ÎµÏÎ¸Ï…Î½ÏƒÎ·Ï‚ IP ÏƒÎµ Î¼Î¹Î± Î´Î¹ÎµÏ€Î±Ï†Î® (VLAN 10):
```bash
sudo ifconfig eth0.10 10.10.10.66 netmask 255.255.255.0
```
Î— ÏƒÏ…Î½Î´ÎµÏƒÎ¹Î¼ÏŒÏ„Î·Ï„Î± ÎµÎ»Î­Î³Ï‡ÎµÏ„Î±Î¹ Î¼Îµ Ï„Î·Î½ ÎµÎºÎºÎ¯Î½Î·ÏƒÎ· ICMP Î±Î¹Ï„Î·Î¼Î¬Ï„Ï‰Î½ Ï€ÏÎ¿Ï‚ Ï„Î¹Ï‚ Ï€ÏÎ¿ÎµÏ€Î¹Î»ÎµÎ³Î¼Î­Î½ÎµÏ‚ Ï€ÏÎ»ÎµÏ‚ Î³Î¹Î± Ï„Î± VLAN 10, 20, 50 ÎºÎ±Î¹ 60.

Î¤ÎµÎ»Î¹ÎºÎ¬, Î±Ï…Ï„Î® Î· Î´Î¹Î±Î´Î¹ÎºÎ±ÏƒÎ¯Î± ÎµÏ€Î¹Ï„ÏÎ­Ï€ÎµÎ¹ Ï„Î·Î½ Ï€Î±ÏÎ¬ÎºÎ±Î¼ÏˆÎ· Ï„Î·Ï‚ ÎºÎ±Ï„Î±Î½Î¿Î¼Î®Ï‚ VLAN, Î´Î¹ÎµÏ…ÎºÎ¿Î»ÏÎ½Î¿Î½Ï„Î±Ï‚ Î­Ï„ÏƒÎ¹ Ï„Î·Î½ Î±Ï€ÎµÏÎ¹ÏŒÏÎ¹ÏƒÏ„Î· Ï€ÏÏŒÏƒÎ²Î±ÏƒÎ· ÏƒÎµ Î¿Ï€Î¿Î¹Î¿Î´Î®Ï€Î¿Ï„Îµ Î´Î¯ÎºÏ„Ï…Î¿ VLAN ÎºÎ±Î¹ Ï€ÏÎ¿ÎµÏ„Î¿Î¹Î¼Î¬Î¶Î¿Î½Ï„Î±Ï‚ Ï„Î¿ Î­Î´Î±Ï†Î¿Ï‚ Î³Î¹Î± ÎµÏ€ÏŒÎ¼ÎµÎ½ÎµÏ‚ ÎµÎ½Î­ÏÎ³ÎµÎ¹ÎµÏ‚.

## Î‘Î½Î±Ï†Î¿ÏÎ­Ï‚

* [https://medium.com/@in9uz/cisco-nightmare-pentesting-cisco-networks-like-a-devil-f4032eb437b9](https://medium.com/@in9uz/cisco-nightmare-pentesting-cisco-networks-like-a-devil-f4032eb437b9)

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
