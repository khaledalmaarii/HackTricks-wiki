# Lateral VLAN Segmentation Bypass

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong>ë¥¼ í†µí•´ AWS í•´í‚¹ì„ ì²˜ìŒë¶€í„° ì „ë¬¸ê°€ê¹Œì§€ ë°°ì›Œë³´ì„¸ìš”<strong>!</strong></summary>

* **ì‚¬ì´ë²„ ë³´ì•ˆ íšŒì‚¬**ì—ì„œ ì¼í•˜ì‹œë‚˜ìš”? **íšŒì‚¬ë¥¼ HackTricksì—ì„œ ê´‘ê³ **í•˜ê±°ë‚˜ **PEASSì˜ ìµœì‹  ë²„ì „ì— ì•¡ì„¸ìŠ¤**í•˜ê±°ë‚˜ HackTricksë¥¼ **PDFë¡œ ë‹¤ìš´ë¡œë“œ**í•˜ê³  ì‹¶ìœ¼ì‹ ê°€ìš”? [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”!
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ë¥¼ ë°œê²¬í•´ë³´ì„¸ìš”. ë…ì ì ì¸ [**NFTs**](https://opensea.io/collection/the-peass-family) ì»¬ë ‰ì…˜ì…ë‹ˆë‹¤.
* [**ê³µì‹ PEASS & HackTricks ìŠ¤ì›¨ê·¸**](https://peass.creator-spring.com)ë¥¼ ì–»ìœ¼ì„¸ìš”.
* [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— **ì°¸ì—¬**í•˜ê±°ë‚˜ **Twitter**ì—ì„œ ì €ë¥¼ **íŒ”ë¡œìš°**í•˜ì„¸ìš” ğŸ¦[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **[hacktricks repo](https://github.com/carlospolop/hacktricks)ì™€ [hacktricks-cloud repo](https://github.com/carlospolop/hacktricks-cloud)**ì— PRì„ ì œì¶œí•˜ì—¬ ì—¬ëŸ¬ë¶„ì˜ í•´í‚¹ ê¸°ë²•ì„ ê³µìœ í•´ì£¼ì„¸ìš”.

</details>

ë§Œì•½ ìŠ¤ìœ„ì¹˜ì— ì§ì ‘ ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆë‹¤ë©´, VLAN ë¶„í• ì„ ìš°íšŒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” ì—°ê²°ëœ í¬íŠ¸ë¥¼ íŠ¸ë í¬ ëª¨ë“œë¡œ ì¬êµ¬ì„±í•˜ê³  ëŒ€ìƒ VLANì„ ìœ„í•œ ê°€ìƒ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì„¤ì •í•˜ë©°, ì‹œë‚˜ë¦¬ì˜¤ì— ë”°ë¼ IP ì£¼ì†Œë¥¼ ë™ì ìœ¼ë¡œ (DHCP) ë˜ëŠ” ì •ì ìœ¼ë¡œ ì„¤ì •í•˜ëŠ” ê²ƒì„ í¬í•¨í•©ë‹ˆë‹¤ (**ìì„¸í•œ ë‚´ìš©ì€ [https://medium.com/@in9uz/cisco-nightmare-pentesting-cisco-networks-like-a-devil-f4032eb437b9](https://medium.com/@in9uz/cisco-nightmare-pentesting-cisco-networks-like-a-devil-f4032eb437b9)ë¥¼ í™•ì¸í•˜ì„¸ìš”).**

ë¨¼ì €, íŠ¹ì • ì—°ê²°ëœ í¬íŠ¸ë¥¼ ì‹ë³„í•´ì•¼ í•©ë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ CDP ë©”ì‹œì§€ë¥¼ í†µí•´ ì´ë¥¼ ìˆ˜í–‰í•  ìˆ˜ ìˆìœ¼ë©°, ë˜ëŠ” **include** ë§ˆìŠ¤í¬ë¥¼ í†µí•´ í¬íŠ¸ë¥¼ ê²€ìƒ‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**CDPê°€ ì‘ë™í•˜ì§€ ì•ŠëŠ” ê²½ìš°, MAC ì£¼ì†Œë¥¼ ê²€ìƒ‰í•˜ì—¬ í¬íŠ¸ë¥¼ ì‹ë³„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤**:
```
SW1(config)# show mac address-table | include 0050.0000.0500
```
íŠ¸ë í¬ ëª¨ë“œë¡œ ì „í™˜í•˜ê¸° ì „ì—, ê¸°ì¡´ VLAN ëª©ë¡ì„ ì‘ì„±í•˜ê³  ê·¸ë“¤ì˜ ì‹ë³„ìë¥¼ ê²°ì •í•´ì•¼ í•©ë‹ˆë‹¤. ì´ ì‹ë³„ìë“¤ì€ ì¸í„°í˜ì´ìŠ¤ì— í• ë‹¹ë˜ì–´ íŠ¸ë í¬ë¥¼ í†µí•´ ë‹¤ì–‘í•œ VLANì— ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì‚¬ìš© ì¤‘ì¸ í¬íŠ¸ëŠ” VLAN 10ê³¼ ì—°ê²°ë˜ì–´ ìˆìŠµë‹ˆë‹¤.
```
SW1# show vlan brief
```
**íŠ¸ë í¬ ëª¨ë“œë¡œ ì „í™˜í•˜ë ¤ë©´ ì¸í„°í˜ì´ìŠ¤ êµ¬ì„± ëª¨ë“œë¡œ ì§„ì…í•´ì•¼ í•©ë‹ˆë‹¤**:
```
SW1(config)# interface GigabitEthernet 0/2
SW1(config-if)# switchport trunk encapsulation dot1q
SW1(config-if)# switchport mode trunk
```
íŠ¸ë í¬ ëª¨ë“œë¡œ ì „í™˜í•˜ë©´ ì¼ì‹œì ìœ¼ë¡œ ì—°ê²°ì´ ì¤‘ë‹¨ë˜ì§€ë§Œ, ì´í›„ì— ë³µêµ¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ê°€ìƒ ì¸í„°í˜ì´ìŠ¤ê°€ ìƒì„±ë˜ê³  VLAN IDê°€ í• ë‹¹ë˜ë©° í™œì„±í™”ë©ë‹ˆë‹¤:
```bash
sudo vconfig add eth0 10
sudo vconfig add eth0 20
sudo vconfig add eth0 50
sudo vconfig add eth0 60
sudo ifconfig eth0.10 up
sudo ifconfig eth0.20 up
sudo ifconfig eth0.50 up
sudo ifconfig eth0.60 up
```
ê·¸ í›„ DHCPë¥¼ í†µí•´ ì£¼ì†Œ ìš”ì²­ì´ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤. DHCPê°€ ì ìš©ë˜ì§€ ì•Šì„ ê²½ìš°, ì£¼ì†ŒëŠ” ìˆ˜ë™ìœ¼ë¡œ êµ¬ì„±í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤:
```bash
sudo dhclient -v eth0.10
sudo dhclient -v eth0.20
sudo dhclient -v eth0.50
sudo dhclient -v eth0.60
```
ë‹¤ìŒì€ ì¸í„°í˜ì´ìŠ¤(VLAN 10)ì— ìˆ˜ë™ìœ¼ë¡œ ì •ì  IP ì£¼ì†Œë¥¼ ì„¤ì •í•˜ëŠ” ì˜ˆì…ë‹ˆë‹¤.
```bash
sudo ifconfig eth0.10 10.10.10.66 netmask 255.255.255.0
```
VLAN 10, 20, 50, ë° 60ì˜ ê¸°ë³¸ ê²Œì´íŠ¸ì›¨ì´ë¡œ ICMP ìš”ì²­ì„ ì‹œì‘í•˜ì—¬ ì—°ê²°ì„±ì„ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.

ìµœì¢…ì ìœ¼ë¡œ, ì´ í”„ë¡œì„¸ìŠ¤ëŠ” VLAN ë¶„í•  ìš°íšŒë¥¼ ê°€ëŠ¥í•˜ê²Œ í•˜ì—¬ ì–´ë–¤ VLAN ë„¤íŠ¸ì›Œí¬ì—ë„ ì œí•œ ì—†ì´ ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆê²Œ í•˜ë©°, ì´í›„ì˜ ì‘ì—…ì„ ìœ„í•œ ì¤€ë¹„ë¥¼ ë§ˆì¹©ë‹ˆë‹¤.

## ì°¸ê³  ìë£Œ

* [https://medium.com/@in9uz/cisco-nightmare-pentesting-cisco-networks-like-a-devil-f4032eb437b9](https://medium.com/@in9uz/cisco-nightmare-pentesting-cisco-networks-like-a-devil-f4032eb437b9)

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong>ë¥¼ í†µí•´ ì œë¡œì—ì„œ ì˜ì›…ê¹Œì§€ AWS í•´í‚¹ ë°°ìš°ê¸°<strong>!</strong></summary>

* **ì‚¬ì´ë²„ ë³´ì•ˆ íšŒì‚¬**ì—ì„œ ì¼í•˜ì‹œë‚˜ìš”? **íšŒì‚¬ë¥¼ HackTricksì—ì„œ ê´‘ê³ **í•˜ê±°ë‚˜ **PEASSì˜ ìµœì‹  ë²„ì „ì— ì•¡ì„¸ìŠ¤**í•˜ê±°ë‚˜ **HackTricksë¥¼ PDFë¡œ ë‹¤ìš´ë¡œë“œ**í•˜ê³  ì‹¶ìœ¼ì‹ ê°€ìš”? [**êµ¬ë… ìš”ê¸ˆì œ**](https://github.com/sponsors/carlospolop)ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”!
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ë¥¼ ë°œê²¬í•´ë³´ì„¸ìš”. ë…ì ì ì¸ [**NFT**](https://opensea.io/collection/the-peass-family) ì»¬ë ‰ì…˜ì…ë‹ˆë‹¤.
* [**ê³µì‹ PEASS & HackTricks ìŠ¤ì›¨ê·¸**](https://peass.creator-spring.com)ë¥¼ ì–»ìœ¼ì„¸ìš”.
* [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— **ì°¸ì—¬**í•˜ê±°ë‚˜ **Twitter**ì—ì„œ ì €ë¥¼ **íŒ”ë¡œìš°**í•˜ì„¸ìš” ğŸ¦[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **[hacktricks repo](https://github.com/carlospolop/hacktricks)ì™€ [hacktricks-cloud repo](https://github.com/carlospolop/hacktricks-cloud)**ì— PRì„ ì œì¶œí•˜ì—¬ ì—¬ëŸ¬ë¶„ì˜ í•´í‚¹ ê¸°ë²•ì„ ê³µìœ í•´ì£¼ì„¸ìš”.

</details>
