# ä¾§å‘ VLAN åˆ†æ®µç»•è¿‡

<details>

<summary><strong>ä»é›¶å¼€å§‹å­¦ä¹  AWS é»‘å®¢æŠ€æœ¯ï¼Œæˆä¸ºä¸“å®¶</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTEï¼ˆHackTricks AWS çº¢é˜Ÿä¸“å®¶ï¼‰</strong></a><strong>ï¼</strong></summary>

* æ‚¨åœ¨**ç½‘ç»œå®‰å…¨å…¬å¸**å·¥ä½œå—ï¼Ÿ æƒ³è¦çœ‹åˆ°æ‚¨çš„**å…¬å¸åœ¨ HackTricks ä¸­åšå¹¿å‘Š**å—ï¼Ÿ æˆ–è€…æƒ³è¦è®¿é—®**PEASS çš„æœ€æ–°ç‰ˆæœ¬æˆ–ä¸‹è½½ HackTricks çš„ PDF**å—ï¼Ÿ è¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* å‘ç°æˆ‘ä»¬çš„ç‹¬å®¶[NFTs é›†åˆ](https://opensea.io/collection/the-peass-family) - [**The PEASS Family**](https://opensea.io/collection/the-peass-family)
* è·å–[**å®˜æ–¹ PEASS & HackTricks å•†å“**](https://peass.creator-spring.com)
* **åŠ å…¥** [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**ç”µæŠ¥ç¾¤ç»„**](https://t.me/peass) æˆ–åœ¨ **Twitter** ä¸Šå…³æ³¨æˆ‘ ğŸ¦[**@carlospolopm**](https://twitter.com/hacktricks_live)**ã€‚**
* **é€šè¿‡å‘ [hacktricks ä»“åº“](https://github.com/carlospolop/hacktricks) å’Œ [hacktricks-cloud ä»“åº“](https://github.com/carlospolop/hacktricks-cloud) æäº¤ PR æ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§**ã€‚

</details>

å¦‚æœå¯ä»¥ç›´æ¥è®¿é—®äº¤æ¢æœºï¼Œåˆ™å¯ä»¥ç»•è¿‡ VLAN åˆ†æ®µã€‚è¿™æ¶‰åŠé‡æ–°é…ç½®è¿æ¥çš„ç«¯å£ä¸ºå¹²é“æ¨¡å¼ï¼Œä¸ºç›®æ ‡ VLAN å»ºç«‹è™šæ‹Ÿæ¥å£ï¼Œå¹¶æ ¹æ®æƒ…å†µè®¾ç½® IP åœ°å€ï¼Œå¯ä»¥æ˜¯åŠ¨æ€ï¼ˆDHCPï¼‰æˆ–é™æ€ï¼ˆ**æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹ [https://medium.com/@in9uz/cisco-nightmare-pentesting-cisco-networks-like-a-devil-f4032eb437b9](https://medium.com/@in9uz/cisco-nightmare-pentesting-cisco-networks-like-a-devil-f4032eb437b9)ï¼‰**ã€‚

é¦–å…ˆï¼Œéœ€è¦è¯†åˆ«ç‰¹å®šè¿æ¥ç«¯å£ã€‚é€šå¸¸å¯ä»¥é€šè¿‡ CDP æ¶ˆæ¯æˆ–é€šè¿‡**åŒ…å«**æ©ç æœç´¢ç«¯å£æ¥å®ç°ã€‚

**å¦‚æœ CDP ä¸å¯ç”¨ï¼Œå¯ä»¥å°è¯•é€šè¿‡æœç´¢ MAC åœ°å€æ¥è¿›è¡Œç«¯å£è¯†åˆ«**ï¼š
```
SW1(config)# show mac address-table | include 0050.0000.0500
```
åœ¨åˆ‡æ¢åˆ°å¹²çº¿æ¨¡å¼ä¹‹å‰ï¼Œåº”ç¼–åˆ¶ç°æœ‰VLANçš„åˆ—è¡¨ï¼Œå¹¶ç¡®å®šå®ƒä»¬çš„æ ‡è¯†ç¬¦ã€‚ç„¶åå°†è¿™äº›æ ‡è¯†ç¬¦åˆ†é…ç»™æ¥å£ï¼Œé€šè¿‡å¹²çº¿è®¿é—®å„ç§VLANã€‚ä¾‹å¦‚ï¼Œæ­£åœ¨ä½¿ç”¨çš„ç«¯å£ä¸VLAN 10ç›¸å…³è”ã€‚
```
SW1# show vlan brief
```
**åˆ‡æ¢åˆ°å¹²çº¿æ¨¡å¼éœ€è¦è¿›å…¥æ¥å£é…ç½®æ¨¡å¼**ï¼š
```
SW1(config)# interface GigabitEthernet 0/2
SW1(config-if)# switchport trunk encapsulation dot1q
SW1(config-if)# switchport mode trunk
```
åˆ‡æ¢åˆ°å¹²çº¿æ¨¡å¼å°†æš‚æ—¶ä¸­æ–­è¿æ¥ï¼Œä½†éšåå¯ä»¥æ¢å¤ã€‚

ç„¶ååˆ›å»ºè™šæ‹Ÿæ¥å£ï¼Œåˆ†é…VLAN IDï¼Œå¹¶æ¿€æ´»ï¼š
```bash
sudo vconfig add eth0 10
sudo vconfig add eth0 20
sudo vconfig add eth0 50
sudo vconfig add eth0 60
sudo ifconfig eth0.10 up
sudo ifconfig eth0.20 up
sudo ifconfig eth0.50 up
sudo ifconfig eth0.60 up
```
éšåï¼Œé€šè¿‡DHCPå‘å‡ºåœ°å€è¯·æ±‚ã€‚æˆ–è€…ï¼Œåœ¨DHCPä¸å¯è¡Œçš„æƒ…å†µä¸‹ï¼Œå¯ä»¥æ‰‹åŠ¨é…ç½®åœ°å€ï¼š
```bash
sudo dhclient -v eth0.10
sudo dhclient -v eth0.20
sudo dhclient -v eth0.50
sudo dhclient -v eth0.60
```
### Example for manually setting a static IP address on an interface (VLAN 10):

### åœ¨æ¥å£ä¸Šæ‰‹åŠ¨è®¾ç½®é™æ€IPåœ°å€çš„ç¤ºä¾‹ï¼ˆVLAN 10ï¼‰ï¼š
```bash
sudo ifconfig eth0.10 10.10.10.66 netmask 255.255.255.0
```
Connectivity is tested by initiating ICMP requests to the default gateways for VLANs 10, 20, 50, and 60.

Ultimately, this process enables bypassing of VLAN segmentation, thereby facilitating unrestricted access to any VLAN network, and setting the stage for subsequent actions.

## References

* [https://medium.com/@in9uz/cisco-nightmare-pentesting-cisco-networks-like-a-devil-f4032eb437b9](https://medium.com/@in9uz/cisco-nightmare-pentesting-cisco-networks-like-a-devil-f4032eb437b9)

<details>

<summary><strong>ä»é›¶å¼€å§‹å­¦ä¹ AWSé»‘å®¢æŠ€æœ¯</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

* Do you work in a **cybersecurity company**? Do you want to see your **company advertised in HackTricks**? or do you want to have access to the **latest version of the PEASS or download HackTricks in PDF**? Check the [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Discover [**The PEASS Family**](https://opensea.io/collection/the-peass-family), our collection of exclusive [**NFTs**](https://opensea.io/collection/the-peass-family)
* Get the [**official PEASS & HackTricks swag**](https://peass.creator-spring.com)
* **Join the** [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** me on **Twitter** ğŸ¦[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Share your hacking tricks by submitting PRs to the [hacktricks repo](https://github.com/carlospolop/hacktricks) and [hacktricks-cloud repo](https://github.com/carlospolop/hacktricks-cloud)**.

</details>
