# Lateral VLAN Segmentation Bypass

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

ã‚¹ã‚¤ãƒƒãƒã¸ã®ç›´æ¥ã‚¢ã‚¯ã‚»ã‚¹ãŒå¯èƒ½ãªå ´åˆã€VLANã‚»ã‚°ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ãƒã‚¤ãƒ‘ã‚¹ã§ãã¾ã™ã€‚ã“ã‚Œã«ã¯ã€æ¥ç¶šãƒãƒ¼ãƒˆã‚’ãƒˆãƒ©ãƒ³ã‚¯ãƒ¢ãƒ¼ãƒ‰ã«å†æ§‹æˆã—ã€ã‚¿ãƒ¼ã‚²ãƒƒãƒˆVLANç”¨ã®ä»®æƒ³ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’ç¢ºç«‹ã—ã€ã‚·ãƒŠãƒªã‚ªã«å¿œã˜ã¦å‹•çš„ï¼ˆDHCPï¼‰ã¾ãŸã¯é™çš„ã«IPã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’è¨­å®šã™ã‚‹ã“ã¨ãŒå«ã¾ã‚Œã¾ã™ï¼ˆ**è©³ç´°ã«ã¤ã„ã¦ã¯[https://medium.com/@in9uz/cisco-nightmare-pentesting-cisco-networks-like-a-devil-f4032eb437b9](https://medium.com/@in9uz/cisco-nightmare-pentesting-cisco-networks-like-a-devil-f4032eb437b9)ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚**ï¼‰

æœ€åˆã«ã€ç‰¹å®šã®æ¥ç¶šãƒãƒ¼ãƒˆã®ç‰¹å®šãŒå¿…è¦ã§ã™ã€‚ã“ã‚Œã¯é€šå¸¸ã€CDPãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€šã˜ã¦ã€ã¾ãŸã¯**include**ãƒã‚¹ã‚¯ã‚’ä½¿ç”¨ã—ã¦ãƒãƒ¼ãƒˆã‚’æ¤œç´¢ã™ã‚‹ã“ã¨ã§é”æˆã§ãã¾ã™ã€‚

**CDPãŒæ©Ÿèƒ½ã—ã¦ã„ãªã„å ´åˆã€MACã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’æ¤œç´¢ã—ã¦ãƒãƒ¼ãƒˆã®ç‰¹å®šã‚’è©¦ã¿ã‚‹ã“ã¨ãŒã§ãã¾ã™**:
```
SW1(config)# show mac address-table | include 0050.0000.0500
```
ãƒˆãƒ©ãƒ³ã‚¯ãƒ¢ãƒ¼ãƒ‰ã«åˆ‡ã‚Šæ›¿ãˆã‚‹å‰ã«ã€æ—¢å­˜ã®VLANã®ãƒªã‚¹ãƒˆã‚’ä½œæˆã—ã€ãã‚Œã‚‰ã®è­˜åˆ¥å­ã‚’ç‰¹å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã‚‰ã®è­˜åˆ¥å­ã¯ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã«å‰²ã‚Šå½“ã¦ã‚‰ã‚Œã€ãƒˆãƒ©ãƒ³ã‚¯ã‚’ä»‹ã—ã¦ã•ã¾ã–ã¾ãªVLANã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚ä½¿ç”¨ä¸­ã®ãƒãƒ¼ãƒˆã¯ã€ä¾‹ãˆã°ã€VLAN 10ã«é–¢é€£ä»˜ã‘ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚
```
SW1# show vlan brief
```
**ãƒˆãƒ©ãƒ³ã‚¯ãƒ¢ãƒ¼ãƒ‰ã¸ã®ç§»è¡Œã¯ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹è¨­å®šãƒ¢ãƒ¼ãƒ‰ã«å…¥ã‚‹ã“ã¨ã‚’ä¼´ã„ã¾ã™**:
```
SW1(config)# interface GigabitEthernet 0/2
SW1(config-if)# switchport trunk encapsulation dot1q
SW1(config-if)# switchport mode trunk
```
ãƒˆãƒ©ãƒ³ã‚¯ãƒ¢ãƒ¼ãƒ‰ã«åˆ‡ã‚Šæ›¿ãˆã‚‹ã¨ã€ä¸€æ™‚çš„ã«æ¥ç¶šãŒä¸­æ–­ã•ã‚Œã¾ã™ãŒã€ãã®å¾Œå¾©å…ƒã§ãã¾ã™ã€‚

æ¬¡ã«ã€ä»®æƒ³ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ãŒä½œæˆã•ã‚Œã€VLAN IDãŒå‰²ã‚Šå½“ã¦ã‚‰ã‚Œã€ã‚¢ã‚¯ãƒ†ã‚£ãƒ–åŒ–ã•ã‚Œã¾ã™ï¼š
```bash
sudo vconfig add eth0 10
sudo vconfig add eth0 20
sudo vconfig add eth0 50
sudo vconfig add eth0 60
sudo ifconfig eth0.10 up
sudo ifconfig eth0.20 up
sudo ifconfig eth0.50 up
sudo ifconfig eth0.60 up
```
ãã®å¾Œã€DHCPã‚’ä»‹ã—ã¦ã‚¢ãƒ‰ãƒ¬ã‚¹ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒè¡Œã‚ã‚Œã¾ã™ã€‚ã‚ã‚‹ã„ã¯ã€DHCPãŒåˆ©ç”¨ã§ããªã„å ´åˆã«ã¯ã€ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’æ‰‹å‹•ã§è¨­å®šã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ï¼š
```bash
sudo dhclient -v eth0.10
sudo dhclient -v eth0.20
sudo dhclient -v eth0.50
sudo dhclient -v eth0.60
```
ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã«é™çš„IPã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’æ‰‹å‹•ã§è¨­å®šã™ã‚‹ä¾‹ï¼ˆVLAN 10ï¼‰ï¼š
```bash
sudo ifconfig eth0.10 10.10.10.66 netmask 255.255.255.0
```
æ¥ç¶šæ€§ã¯ã€VLAN 10ã€20ã€50ã€ãŠã‚ˆã³ 60 ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚²ãƒ¼ãƒˆã‚¦ã‚§ã‚¤ã« ICMP ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡ã™ã‚‹ã“ã¨ã§ãƒ†ã‚¹ãƒˆã•ã‚Œã¾ã™ã€‚

æœ€çµ‚çš„ã«ã€ã“ã®ãƒ—ãƒ­ã‚»ã‚¹ã¯ VLAN ã‚»ã‚°ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒã‚¤ãƒ‘ã‚¹ã‚’å¯èƒ½ã«ã—ã€ä»»æ„ã® VLAN ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã¸ã®åˆ¶é™ã®ãªã„ã‚¢ã‚¯ã‚»ã‚¹ã‚’ä¿ƒé€²ã—ã€ãã®å¾Œã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã®ãŸã‚ã®åŸºç›¤ã‚’æ•´ãˆã¾ã™ã€‚

## å‚è€ƒæ–‡çŒ®

* [https://medium.com/@in9uz/cisco-nightmare-pentesting-cisco-networks-like-a-devil-f4032eb437b9](https://medium.com/@in9uz/cisco-nightmare-pentesting-cisco-networks-like-a-devil-f4032eb437b9)

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
