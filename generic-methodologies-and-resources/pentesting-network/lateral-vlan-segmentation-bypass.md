# Contournement de la segmentation VLAN lat√©rale

<details>

<summary><strong>Apprenez le piratage AWS de z√©ro √† h√©ros avec</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (Expert en √©quipe rouge AWS de HackTricks)</strong></a><strong>!</strong></summary>

* Travaillez-vous dans une **entreprise de cybers√©curit√©**? Voulez-vous voir votre **entreprise annonc√©e dans HackTricks**? ou voulez-vous avoir acc√®s √† la **derni√®re version du PEASS ou t√©l√©charger HackTricks en PDF**? Consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop)!
* D√©couvrez [**La famille PEASS**](https://opensea.io/collection/the-peass-family), notre collection exclusive de [**NFTs**](https://opensea.io/collection/the-peass-family)
* Obtenez le [**swag officiel PEASS & HackTricks**](https://peass.creator-spring.com)
* **Rejoignez le** [**üí¨**](https://emojipedia.org/speech-balloon/) [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe Telegram**](https://t.me/peass) ou **suivez** moi sur **Twitter** üê¶[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Partagez vos astuces de piratage en soumettant des PR au [d√©p√¥t hacktricks](https://github.com/carlospolop/hacktricks) et [d√©p√¥t hacktricks-cloud](https://github.com/carlospolop/hacktricks-cloud)**.

</details>

Si un acc√®s direct √† un commutateur est disponible, la segmentation VLAN peut √™tre contourn√©e. Cela implique de reconfigurer le port connect√© en mode trunk, d'√©tablir des interfaces virtuelles pour les VLAN cibles et de d√©finir des adresses IP, soit de mani√®re dynamique (DHCP) soit de mani√®re statique, en fonction du sc√©nario (**pour plus de d√©tails, consultez [https://medium.com/@in9uz/cisco-nightmare-pentesting-cisco-networks-like-a-devil-f4032eb437b9](https://medium.com/@in9uz/cisco-nightmare-pentesting-cisco-networks-like-a-devil-f4032eb437b9)).**

Initialement, l'identification du port connect√© sp√©cifique est requise. Cela peut g√©n√©ralement √™tre accompli via des messages CDP, ou en recherchant le port via le masque **include**.

**Si CDP n'est pas op√©rationnel, l'identification du port peut √™tre tent√©e en recherchant l'adresse MAC**:
```
SW1(config)# show mac address-table | include 0050.0000.0500
```
Avant de passer en mode trunk, une liste des VLAN existants doit √™tre compil√©e et leurs identifiants d√©termin√©s. Ces identifiants sont ensuite attribu√©s √† l'interface, permettant l'acc√®s √† diff√©rents VLAN via le trunk. Le port en cours d'utilisation, par exemple, est associ√© au VLAN 10.
```
SW1# show vlan brief
```
**Passer en mode trunk implique d'entrer en mode configuration de l'interface**:
```
SW1(config)# interface GigabitEthernet 0/2
SW1(config-if)# switchport trunk encapsulation dot1q
SW1(config-if)# switchport mode trunk
```
Passer en mode trunk perturbera temporairement la connectivit√©, mais cela peut √™tre r√©tabli par la suite.

Des interfaces virtuelles sont ensuite cr√©√©es, des identifiants VLAN leur sont attribu√©s, et elles sont activ√©es :
```bash
sudo vconfig add eth0 10
sudo vconfig add eth0 20
sudo vconfig add eth0 50
sudo vconfig add eth0 60
sudo ifconfig eth0.10 up
sudo ifconfig eth0.20 up
sudo ifconfig eth0.50 up
sudo ifconfig eth0.60 up
```
Ensuite, une demande d'adresse est faite via DHCP. Alternativement, dans les cas o√π DHCP n'est pas viable, les adresses peuvent √™tre configur√©es manuellement :
```bash
sudo dhclient -v eth0.10
sudo dhclient -v eth0.20
sudo dhclient -v eth0.50
sudo dhclient -v eth0.60
```
Exemple pour d√©finir manuellement une adresse IP statique sur une interface (VLAN 10) :
```bash
sudo ifconfig eth0.10 10.10.10.66 netmask 255.255.255.0
```
La connectivit√© est test√©e en initiant des requ√™tes ICMP aux passerelles par d√©faut des VLAN 10, 20, 50 et 60.

En fin de compte, ce processus permet de contourner la segmentation des VLAN, facilitant ainsi l'acc√®s non restreint √† tout r√©seau VLAN, et pr√©parant le terrain pour les actions ult√©rieures.

## R√©f√©rences

* [https://medium.com/@in9uz/cisco-nightmare-pentesting-cisco-networks-like-a-devil-f4032eb437b9](https://medium.com/@in9uz/cisco-nightmare-pentesting-cisco-networks-like-a-devil-f4032eb437b9)

<details>

<summary><strong>Apprenez le piratage AWS de z√©ro √† h√©ros avec</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

* Travaillez-vous dans une **entreprise de cybers√©curit√©**? Vous voulez voir votre **entreprise annonc√©e dans HackTricks**? ou voulez-vous avoir acc√®s √† la **derni√®re version du PEASS ou t√©l√©charger HackTricks en PDF**? Consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop)!
* D√©couvrez [**La famille PEASS**](https://opensea.io/collection/the-peass-family), notre collection exclusive de [**NFTs**](https://opensea.io/collection/the-peass-family)
* Obtenez le [**swag officiel PEASS & HackTricks**](https://peass.creator-spring.com)
* **Rejoignez le** [**üí¨**](https://emojipedia.org/speech-balloon/) [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe Telegram**](https://t.me/peass) ou **suivez** moi sur **Twitter** üê¶[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Partagez vos astuces de piratage en soumettant des PR au [d√©p√¥t hacktricks](https://github.com/carlospolop/hacktricks) et [d√©p√¥t hacktricks-cloud](https://github.com/carlospolop/hacktricks-cloud)**.

</details>
