# Przejcie obok segmentacji VLAN

<details>

<summary><strong>Naucz si hakowa AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

* Pracujesz w **firmie zajmujcej si cyberbezpieczestwem**? Chcesz zobaczy swoj **firm reklamowan w HackTricks**? A mo偶e chcesz mie dostp do **najnowszej wersji PEASS lub pobra HackTricks w formacie PDF**? Sprawd藕 [**PLAN SUBSKRYPCJI**](https://github.com/sponsors/carlospolop)!
* Odkryj [**Rodzin PEASS**](https://opensea.io/collection/the-peass-family), nasz kolekcj ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* Zdobd藕 [**oficjalne gad偶ety PEASS & HackTricks**](https://peass.creator-spring.com)
* **Docz do** [****](https://emojipedia.org/speech-balloon/) [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **led藕** mnie na **Twitterze** [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Podziel si swoimi sztuczkami hakerskimi, przesyajc PR-y do repozytorium [hacktricks](https://github.com/carlospolop/hacktricks) i [hacktricks-cloud](https://github.com/carlospolop/hacktricks-cloud)**.

</details>

Jeli istnieje bezporedni dostp do przecznika, mo偶na omin segmentacj VLAN. Polega to na ponownej konfiguracji podczonego portu w tryb trunks, ustanowieniu wirtualnych interfejs贸w dla docelowych VLAN-贸w i ustawieniu adres贸w IP, dynamicznie (DHCP) lub statycznie, w zale偶noci od scenariusza (**dodatkowe szczeg贸y mo偶na znale藕 pod adresem [https://medium.com/@in9uz/cisco-nightmare-pentesting-cisco-networks-like-a-devil-f4032eb437b9](https://medium.com/@in9uz/cisco-nightmare-pentesting-cisco-networks-like-a-devil-f4032eb437b9)).**

W pierwszej kolejnoci konieczne jest zidentyfikowanie konkretnego podczonego portu. Mo偶na to zazwyczaj osign za pomoc wiadomoci CDP lub poprzez wyszukiwanie portu za pomoc maski **include**.

**Jeli CDP nie dziaa, mo偶na spr贸bowa zidentyfikowa port, wyszukujc adres MAC**:
```
SW1(config)# show mac address-table | include 0050.0000.0500
```
Przed przejciem do trybu trunk, nale偶y sporzdzi list istniejcych VLAN-贸w i ustali ich identyfikatory. Nastpnie te identyfikatory s przypisywane do interfejsu, umo偶liwiajc dostp do r贸偶nych VLAN-贸w poprzez trunk. Port, kt贸ry jest u偶ywany, jest na przykad powizany z VLAN-em 10.
```
SW1# show vlan brief
```
**Przejcie do trybu trunk wymaga wejcia w tryb konfiguracji interfejsu**:
```
SW1(config)# interface GigabitEthernet 0/2
SW1(config-if)# switchport trunk encapsulation dot1q
SW1(config-if)# switchport mode trunk
```
Przeczenie na tryb trunk tymczasowo zak贸ci czno, ale mo偶na j p贸藕niej przywr贸ci.

Nastpnie tworzone s wirtualne interfejsy, przypisywane s im identyfikatory VLAN i s aktywowane:
```bash
sudo vconfig add eth0 10
sudo vconfig add eth0 20
sudo vconfig add eth0 50
sudo vconfig add eth0 60
sudo ifconfig eth0.10 up
sudo ifconfig eth0.20 up
sudo ifconfig eth0.50 up
sudo ifconfig eth0.60 up
```
Nastpnie, zostaje wysane 偶danie adresu za porednictwem DHCP. W przypadkach, gdy DHCP nie jest mo偶liwe, adresy mog by skonfigurowane rcznie:
```bash
sudo dhclient -v eth0.10
sudo dhclient -v eth0.20
sudo dhclient -v eth0.50
sudo dhclient -v eth0.60
```
Przykad rcznego ustawienia statycznego adresu IP na interfejsie (VLAN 10):

```plaintext
1. Otw贸rz terminal i zaloguj si na urzdzenie sieciowe.
2. Zidentyfikuj interfejs, na kt贸rym chcesz ustawi statyczny adres IP.
3. Wydaj polecenie `ifconfig` lub `ip addr show`, aby sprawdzi bie偶ce ustawienia interfejsu.
4. Wydaj polecenie `sudo ifconfig <interfejs> down`, aby wyczy interfejs.
5. Wydaj polecenie `sudo ifconfig <interfejs> <adres_IP> netmask <maska_sieci> up`, aby ustawi nowy adres IP i wczy interfejs.
   Na przykad: `sudo ifconfig eth0 192.168.1.100 netmask 255.255.255.0 up`.
6. Sprawd藕, czy nowy adres IP zosta pomylnie ustawiony, wydajc polecenie `ifconfig` lub `ip addr show`.
```

Pamitaj, 偶e powy偶szy przykad dotyczy rcznego ustawienia statycznego adresu IP na interfejsie VLAN 10.
```bash
sudo ifconfig eth0.10 10.10.10.66 netmask 255.255.255.0
```
Konieczne jest przetestowanie cznoci poprzez inicjowanie 偶da ICMP do domylnych bram dla VLAN 10, 20, 50 i 60.

Ostatecznie ten proces umo偶liwia obejcie segmentacji VLAN, umo偶liwiajc nielimitowany dostp do dowolnej sieci VLAN i przygotowuje grunt dla kolejnych dziaa.

## Referencje

* [https://medium.com/@in9uz/cisco-nightmare-pentesting-cisco-networks-like-a-devil-f4032eb437b9](https://medium.com/@in9uz/cisco-nightmare-pentesting-cisco-networks-like-a-devil-f4032eb437b9)

<details>

<summary><strong>Naucz si hakowa AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

* Czy pracujesz w **firmie zajmujcej si cyberbezpieczestwem**? Chcesz zobaczy, jak Twoja **firma jest reklamowana w HackTricks**? A mo偶e chcesz mie dostp do **najnowszej wersji PEASS lub pobra HackTricks w formacie PDF**? Sprawd藕 [**PLAN SUBSKRYPCJI**](https://github.com/sponsors/carlospolop)!
* Odkryj [**Rodzin PEASS**](https://opensea.io/collection/the-peass-family), nasz kolekcj ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* Zdobd藕 [**oficjalne gad偶ety PEASS & HackTricks**](https://peass.creator-spring.com)
* **Docz do** [****](https://emojipedia.org/speech-balloon/) [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **led藕** mnie na **Twitterze** [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Podziel si swoimi sztuczkami hakerskimi, przesyajc PR do repozytorium [hacktricks](https://github.com/carlospolop/hacktricks) i [hacktricks-cloud](https://github.com/carlospolop/hacktricks-cloud)**.

</details>
