<details>

<summary><strong>NauÄite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Drugi naÄini podrÅ¡ke HackTricks-u:

* Ako Å¾elite da vidite **vaÅ¡u kompaniju reklamiranu na HackTricks-u** ili **preuzmete HackTricks u PDF formatu** proverite [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Nabavite [**zvaniÄni PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Otkrijte [**The PEASS Family**](https://opensea.io/collection/the-peass-family), naÅ¡u kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* **PridruÅ¾ite se** ğŸ’¬ [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili nas **pratite** na **Twitter-u** ğŸ¦ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Podelite svoje hakovanje trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>


# Osnovna teorija o IPv6

## MreÅ¾e

IPv6 adrese su strukturirane da poboljÅ¡aju organizaciju mreÅ¾e i interakciju ureÄ‘aja. IPv6 adresa je podeljena na:

1. **MreÅ¾ni prefiks**: Prvih 48 bita koji odreÄ‘uju segment mreÅ¾e.
2. **ID podmreÅ¾e**: SledeÄ‡ih 16 bita koji se koriste za definisanje specifiÄnih podmreÅ¾a unutar mreÅ¾e.
3. **Identifikator interfejsa**: Poslednjih 64 bita koji jedinstveno identifikuju ureÄ‘aj unutar podmreÅ¾e.

Iako IPv6 ne koristi ARP protokol koji se nalazi u IPv4, uvodi **ICMPv6** sa dve osnovne poruke:
- **Neighbor Solicitation (NS)**: Multicast poruke za razreÅ¡avanje adresa.
- **Neighbor Advertisement (NA)**: Unicast odgovori na NS ili spontane objave.

IPv6 takoÄ‘e ukljuÄuje posebne vrste adresa:
- **Loopback adresa (`::1`)**: Ekvivalent IPv4 adrese `127.0.0.1`, za internu komunikaciju unutar hosta.
- **Link-Local adrese (`FE80::/10`)**: Za lokalne mreÅ¾ne aktivnosti, ne za rutiranje na internetu. UreÄ‘aji na istoj lokalnoj mreÅ¾i mogu otkriti jedni druge koristeÄ‡i ovaj opseg.

### PraktiÄna upotreba IPv6 u mreÅ¾nim komandama

Da biste komunicirali sa IPv6 mreÅ¾ama, moÅ¾ete koristiti razliÄite komande:
- **Ping Link-Local adrese**: Proverite prisustvo lokalnih ureÄ‘aja koristeÄ‡i `ping6`.
- **Neighbor Discovery**: Koristite `ip neigh` da biste videli ureÄ‘aje otkrivene na sloju veze.
- **alive6**: Alternativni alat za otkrivanje ureÄ‘aja na istoj mreÅ¾i.

Ispod su neki primeri komandi:
```bash
ping6 â€“I eth0 -c 5 ff02::1 > /dev/null 2>&1
ip neigh | grep ^fe80

# Alternatively, use alive6 for neighbor discovery
alive6 eth0
```
IPv6 adrese mogu se izvesti iz MAC adrese ureÄ‘aja za lokalnu komunikaciju. Evo pojednostavljenog vodiÄa o tome kako izvesti Link-local IPv6 adresu iz poznate MAC adrese, kao i kratki pregled vrsta IPv6 adresa i metoda za otkrivanje IPv6 adresa unutar mreÅ¾e.

## **IzvoÄ‘enje Link-local IPv6 adrese iz MAC adrese**

Za datu MAC adresu **`12:34:56:78:9a:bc`**, moÅ¾ete konstruisati Link-local IPv6 adresu na sledeÄ‡i naÄin:

1. Pretvorite MAC adresu u IPv6 format: **`1234:5678:9abc`**
2. Dodajte `fe80::` i ubacite `fffe` u sredinu: **`fe80::1234:56ff:fe78:9abc`**
3. Invertujte sedmi bit s leva, menjajuÄ‡i `1234` u `1034`: **`fe80::1034:56ff:fe78:9abc`**

## **Vrste IPv6 adresa**

- **Unique Local Address (ULA)**: Za lokalnu komunikaciju, nije namenjena za javno rutiranje na internetu. Prefiks: **`FEC00::/7`**
- **Multicast adresa**: Za jedan-na-viÅ¡e komunikaciju. IsporuÄuje se svim interfejsima u multicast grupi. Prefiks: **`FF00::/8`**
- **Anycast adresa**: Za jedan-do-najbliÅ¾e komunikacije. Å alje se najbliÅ¾em interfejsu prema rutirajuÄ‡em protokolu. Deo globalnog unicast opsega **`2000::/3`**.

## **Prefiksi adresa**
- **fe80::/10**: Link-Local adrese (sliÄno kao 169.254.x.x)
- **fc00::/7**: Unique Local-Unicast (sliÄno privatnim IPv4 opsezima kao Å¡to su 10.x.x.x, 172.16.x.x, 192.168.x.x)
- **2000::/3**: Global Unicast
- **ff02::1**: Multicast Svi Ävorovi
- **ff02::2**: Multicast RutirajuÄ‡i Ävorovi

## **Otkrivanje IPv6 adresa unutar mreÅ¾e**

### NaÄin 1: KoriÅ¡Ä‡enje Link-local adresa
1. Dobijte MAC adresu ureÄ‘aja unutar mreÅ¾e.
2. Izvedite Link-local IPv6 adresu iz MAC adrese.

### NaÄin 2: KoriÅ¡Ä‡enje Multicast-a
1. PoÅ¡aljite ping na multicast adresu `ff02::1` da biste otkrili IPv6 adrese na lokalnoj mreÅ¾i.
```bash
service ufw stop # Stop the firewall
ping6 -I <IFACE> ff02::1 # Send a ping to multicast address
ip -6 neigh # Display the neighbor table
```
## IPv6 Napad Äovek-u-sredini (MitM)
Postoji nekoliko tehnika za izvoÄ‘enje MitM napada u IPv6 mreÅ¾ama, kao Å¡to su:

- LaÅ¾iranje ICMPv6 suseda ili rutera oglasa.
- KoriÅ¡Ä‡enje ICMPv6 preusmeravanja ili poruka "Packet Too Big" za manipulaciju rutiranjem.
- Napad na mobilni IPv6 (obiÄno zahteva onemoguÄ‡avanje IPSec-a).
- Postavljanje laÅ¾nog DHCPv6 servera.


# Identifikacija IPv6 adresa u polju

## IstraÅ¾ivanje poddomena
Metod za pronalaÅ¾enje poddomena koji su potencijalno povezani sa IPv6 adresama ukljuÄuje koriÅ¡Ä‡enje pretraÅ¾ivaÄa. Na primer, upotreba obrasca upita poput `ipv6.*` moÅ¾e biti efikasna. Konkretno, sledeÄ‡a pretraga moÅ¾e se koristiti u Google-u:
```bash
site:ipv6./
```
## KoriÅ¡Ä‡enje DNS upita
Da biste identifikovali IPv6 adrese, mogu se koristiti odreÄ‘ene vrste DNS zapisa:
- **AXFR**: Zahteva kompletnu transfer zonu, Å¡to moÅ¾e otkriti Å¡irok spektar DNS zapisa.
- **AAAA**: Direktno traÅ¾i IPv6 adrese.
- **ANY**: OpÅ¡ti upit koji vraÄ‡a sve dostupne DNS zapise.

## Ispitivanje sa Ping6
Nakon Å¡to se identifikuju IPv6 adrese povezane sa organizacijom, moÅ¾e se koristiti alatka `ping6` za ispitivanje. Ovaj alat pomaÅ¾e u proceni odziva identifikovanih IPv6 adresa i moÅ¾e takoÄ‘e pomoÄ‡i u otkrivanju susednih IPv6 ureÄ‘aja.


## Reference

* [http://www.firewall.cx/networking-topics/protocols/877-ipv6-subnetting-how-to-subnet-ipv6.html](http://www.firewall.cx/networking-topics/protocols/877-ipv6-subnetting-how-to-subnet-ipv6.html)
* [https://www.sans.org/reading-room/whitepapers/detection/complete-guide-ipv6-attack-defense-33904](https://www.sans.org/reading-room/whitepapers/detection/complete-guide-ipv6-attack-defense-33904)


<details>

<summary><strong>NauÄite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Drugi naÄini podrÅ¡ke HackTricks-u:

* Ako Å¾elite da vidite **vaÅ¡u kompaniju reklamiranu na HackTricks-u** ili **preuzmete HackTricks u PDF formatu** Pogledajte [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Nabavite [**zvaniÄni PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Otkrijte [**The PEASS Family**](https://opensea.io/collection/the-peass-family), naÅ¡u kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* **PridruÅ¾ite se** ğŸ’¬ [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili nas **pratite** na **Twitter-u** ğŸ¦ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Podelite svoje hakovanje trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>
