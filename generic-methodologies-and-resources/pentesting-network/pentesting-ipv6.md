<details>

<summary><strong>Naucz si hakowa AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Inne sposoby wsparcia HackTricks:

* Jeli chcesz zobaczy swoj **firm reklamowan w HackTricks** lub **pobra HackTricks w formacie PDF**, sprawd藕 [**PLAN SUBSKRYPCJI**](https://github.com/sponsors/carlospolop)!
* Zdobd藕 [**oficjalne gad偶ety PEASS & HackTricks**](https://peass.creator-spring.com)
* Odkryj [**Rodzin PEASS**](https://opensea.io/collection/the-peass-family), nasz kolekcj ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* **Docz do**  [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **led藕** nas na **Twitterze**  [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Podziel si swoimi sztuczkami hakerskimi, przesyajc PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>


# Podstawowa teoria IPv6

## Sieci

Adresy IPv6 s strukturalnie zorganizowane, aby uatwi organizacj sieci i interakcj urzdze. Adres IPv6 jest podzielony na:

1. **Prefiks sieciowy**: Pierwsze 48 bit贸w, okrelajcy segment sieciowy.
2. **ID podsieci**: Nastpne 16 bit贸w, u偶ywane do definiowania konkretnych podsieci w sieci.
3. **Identyfikator interfejsu**: Ostatnie 64 bity, unikalnie identyfikujcy urzdzenie w podsieci.

Podczas gdy IPv6 pomija protok贸 ARP, kt贸ry wystpuje w IPv4, wprowadza **ICMPv6** z dwoma podstawowymi wiadomociami:
- **Solicytacja ssiada (NS)**: Wiadomoci multicast do rozwizywania adres贸w.
- **Ogoszenie ssiada (NA)**: Unicastowe odpowiedzi na NS lub spontaniczne ogoszenia.

IPv6 zawiera r贸wnie偶 specjalne typy adres贸w:
- **Adres ptli zwrotnej (`::1`)**: Odpowiednik `127.0.0.1` w IPv4, su偶y do komunikacji wewntrznej wewntrz hosta.
- **Adresy lokalne (`FE80::/10`)**: Do lokalnych dziaa sieciowych, nie do routingu internetowego. Urzdzenia w tej samej sieci lokalnej mog odnale藕 si nawzajem, korzystajc z tego zakresu.

### Praktyczne u偶ycie IPv6 w poleceniach sieciowych

Aby korzysta z sieci IPv6, mo偶na u偶ywa r贸偶nych polece:
- **Ping adres贸w lokalnych**: Sprawd藕 obecno lokalnych urzdze za pomoc `ping6`.
- **Odkrywanie ssiad贸w**: U偶yj `ip neigh`, aby wywietli urzdzenia odkryte na warstwie cza.
- **alive6**: Alternatywne narzdzie do odkrywania urzdze w tej samej sieci.

Poni偶ej znajduj si przykadowe polecenia:
```bash
ping6 I eth0 -c 5 ff02::1 > /dev/null 2>&1
ip neigh | grep ^fe80

# Alternatively, use alive6 for neighbor discovery
alive6 eth0
```
Adresy IPv6 mo偶na wygenerowa na podstawie adresu MAC urzdzenia do lokalnej komunikacji. Oto uproszczony przewodnik, jak wygenerowa adres IPv6 typu Link-local na podstawie znanego adresu MAC, oraz kr贸tki opis typ贸w adres贸w IPv6 i metod odkrywania adres贸w IPv6 w sieci.

## **Generowanie adresu Link-local IPv6 na podstawie adresu MAC**

Dla podanego adresu MAC **`12:34:56:78:9a:bc`**, mo偶na skonstruowa adres Link-local IPv6 w nastpujcy spos贸b:

1. Przekszta MAC na format IPv6: **`1234:5678:9abc`**
2. Dodaj prefiks `fe80::` i wstaw `fffe` w rodku: **`fe80::1234:56ff:fe78:9abc`**
3. Odwr贸 si贸dmy bit od lewej strony, zmieniajc `1234` na `1034`: **`fe80::1034:56ff:fe78:9abc`**

## **Typy adres贸w IPv6**

- **Unique Local Address (ULA)**: Do lokalnej komunikacji, nie przeznaczony do routingu w publicznym internecie. Prefiks: **`FEC00::/7`**
- **Adres multicast**: Do komunikacji jedno-do-wielu. Dostarczany do wszystkich interfejs贸w w grupie multicastowej. Prefiks: **`FF00::/8`**
- **Adres anycast**: Do komunikacji jedno-do-najbli偶szego. Wysyany do najbli偶szego interfejsu zgodnie z protokoem routingu. Cz globalnego zakresu unicast **`2000::/3`**.

## **Prefiksy adres贸w**
- **fe80::/10**: Adresy Link-Local (podobne do 169.254.x.x)
- **fc00::/7**: Unikalne lokalne unicast (podobne do prywatnych zakres贸w IPv4, takich jak 10.x.x.x, 172.16.x.x, 192.168.x.x)
- **2000::/3**: Globalny Unicast
- **ff02::1**: Multicast Wszystkie Wzy
- **ff02::2**: Multicast Wzy Routera

## **Odkrywanie adres贸w IPv6 w sieci**

### Spos贸b 1: Wykorzystanie adres贸w Link-local
1. Uzyskaj adres MAC urzdzenia w sieci.
2. Wygeneruj adres Link-local IPv6 na podstawie adresu MAC.

### Spos贸b 2: Wykorzystanie Multicastu
1. Wylij ping na adres multicast `ff02::1`, aby odkry adresy IPv6 w lokalnej sieci.
```bash
service ufw stop # Stop the firewall
ping6 -I <IFACE> ff02::1 # Send a ping to multicast address
ip -6 neigh # Display the neighbor table
```
## Ataki typu Man-in-the-Middle (MitM) w IPv6
Istnieje kilka technik umo偶liwiajcych przeprowadzenie atak贸w typu MitM w sieciach IPv6, takich jak:

- Podrobienie komunikat贸w ICMPv6 dotyczcych ssiad贸w lub routera.
- Wykorzystanie komunikat贸w ICMPv6 przekierowania lub "Packet Too Big" do manipulacji trasowaniem.
- Atakowanie mobilnego IPv6 (zwykle wymaga wyczenia IPSec).
- Utworzenie faszywego serwera DHCPv6.


# Identyfikacja adres贸w IPv6 w dziedzinie

## Badanie subdomen
Metoda polegajca na znalezieniu subdomen potencjalnie powizanych z adresami IPv6 polega na wykorzystaniu wyszukiwarek. Na przykad, mo偶na skorzysta z wzorca zapytania `ipv6.*`. W szczeg贸lnoci, w Google mo偶na u偶y nastpujcej komendy wyszukiwania:
```bash
site:ipv6./
```
## Wykorzystywanie zapyta DNS
Aby zidentyfikowa adresy IPv6, mo偶na zapyta o okrelone typy rekord贸w DNS:
- **AXFR**: Wymaga penego transferu strefy, co mo偶e ujawni szeroki zakres rekord贸w DNS.
- **AAAA**: Bezporednio wyszukuje adresy IPv6.
- **ANY**: Szerokie zapytanie, kt贸re zwraca wszystkie dostpne rekordy DNS.

## Sondowanie za pomoc Ping6
Po zlokalizowaniu adres贸w IPv6 powizanych z organizacj, mo偶na u偶y narzdzia `ping6` do sondowania. Narzdzie to pomaga oceni reaktywno zidentyfikowanych adres贸w IPv6 i mo偶e r贸wnie偶 pom贸c w odkrywaniu ssiednich urzdze IPv6.


## Referencje

* [http://www.firewall.cx/networking-topics/protocols/877-ipv6-subnetting-how-to-subnet-ipv6.html](http://www.firewall.cx/networking-topics/protocols/877-ipv6-subnetting-how-to-subnet-ipv6.html)
* [https://www.sans.org/reading-room/whitepapers/detection/complete-guide-ipv6-attack-defense-33904](https://www.sans.org/reading-room/whitepapers/detection/complete-guide-ipv6-attack-defense-33904)


<details>

<summary><strong>Naucz si hakowa AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Inne sposoby wsparcia HackTricks:

* Jeli chcesz zobaczy swoj **firm reklamowan w HackTricks** lub **pobra HackTricks w formacie PDF**, sprawd藕 [**PLAN SUBSKRYPCJI**](https://github.com/sponsors/carlospolop)!
* Zdobd藕 [**oficjalne gad偶ety PEASS & HackTricks**](https://peass.creator-spring.com)
* Odkryj [**Rodzin PEASS**](https://opensea.io/collection/the-peass-family), nasz kolekcj ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* **Docz do**  [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **led藕** nas na **Twitterze**  [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Podziel si swoimi sztuczkami hakerskimi, przesyajc PR do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
