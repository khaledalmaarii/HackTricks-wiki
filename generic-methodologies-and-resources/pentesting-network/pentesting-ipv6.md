{% hint style="success" %}
UÄite i veÅ¾bajte hakovanje AWS-a:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
UÄite i veÅ¾bajte hakovanje GCP-a: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>PodrÅ¾ite HackTricks</summary>

* Proverite [**planove pretplate**](https://github.com/sponsors/carlospolop)!
* **PridruÅ¾ite se** ğŸ’¬ [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili nas **pratite** na **Twitteru** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Podelite hakovanje trikova slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>
{% endhint %}


# Osnovna teorija IPv6

## MreÅ¾e

IPv6 adrese su strukturirane radi poboljÅ¡anja organizacije mreÅ¾e i interakcije ureÄ‘aja. IPv6 adresa je podeljena na:

1. **Prefiks mreÅ¾e**: Prvih 48 bitova koji odreÄ‘uju segment mreÅ¾e.
2. **ID podmreÅ¾e**: SledeÄ‡ih 16 bitova, koji se koriste za definisanje specifiÄnih podmreÅ¾a unutar mreÅ¾e.
3. **Identifikator interfejsa**: Poslednjih 64 bitova, jedinstveno identifikujuÄ‡i ureÄ‘aj unutar podmreÅ¾e.

Iako IPv6 ne koristi ARP protokol koji se nalazi u IPv4, uvodi **ICMPv6** sa dve osnovne poruke:
- **Solicitacija suseda (NS)**: Multikast poruke za razreÅ¡enje adrese.
- **Oglas suseda (NA)**: Unikast odgovori na NS ili spontane najave.

IPv6 takoÄ‘e ukljuÄuje posebne tipove adresa:
- **Loopback adresa (`::1`)**: Ekvivalentna IPv4 `127.0.0.1`, za internu komunikaciju unutar hosta.
- **Link-Local adrese (`FE80::/10`)**: Za lokalne mreÅ¾ne aktivnosti, ne za rutiranje na internetu. UreÄ‘aji na istoj lokalnoj mreÅ¾i mogu otkriti jedni druge koristeÄ‡i ovaj opseg.

### PraktiÄna upotreba IPv6 u mreÅ¾nim komandama

Da biste interagovati sa IPv6 mreÅ¾ama, moÅ¾ete koristiti razliÄite komande:
- **Ping Link-Local adrese**: Proverite prisustvo lokalnih ureÄ‘aja koristeÄ‡i `ping6`.
- **Otkrivanje suseda**: Koristite `ip neigh` da biste videli ureÄ‘aje otkrivene na link nivou.
- **alive6**: Alternativni alat za otkrivanje ureÄ‘aja na istoj mreÅ¾i.

U nastavku su neki primeri komandi:
```bash
ping6 â€“I eth0 -c 5 ff02::1 > /dev/null 2>&1
ip neigh | grep ^fe80

# Alternatively, use alive6 for neighbor discovery
alive6 eth0
```
## **Dobijanje Link-local IPv6 adrese iz MAC adrese**

Dati MAC adresa **`12:34:56:78:9a:bc`**, moÅ¾ete konstruisati Link-local IPv6 adresu na sledeÄ‡i naÄin:

1. Konvertujte MAC u IPv6 format: **`1234:5678:9abc`**
2. Dodajte `fe80::` i ubacite `fffe` u sredinu: **`fe80::1234:56ff:fe78:9abc`**
3. Invertujte sedmi bit s leve strane, menjajuÄ‡i `1234` u `1034`: **`fe80::1034:56ff:fe78:9abc`**

## **Tipovi IPv6 Adresa**

- **Unique Local Address (ULA)**: Za lokalnu komunikaciju, nije namenjena za javno rutiranje interneta. Prefiks: **`FEC00::/7`**
- **Multicast Adresa**: Za jedan-na-mnogo komunikaciju. Dostavljena svim interfejsima u multicast grupi. Prefiks: **`FF00::/8`**
- **Anycast Adresa**: Za jedan-do-najbliÅ¾e komunikaciju. Poslata najbliÅ¾em interfejsu prema rutinskom protokolu. Deo **`2000::/3`** globalnog unicast opsega.

## **Prefiksi Adresa**
- **fe80::/10**: Link-Local adrese (sliÄno kao 169.254.x.x)
- **fc00::/7**: Unique Local-Unicast (sliÄno kao privatni IPv4 opsezi poput 10.x.x.x, 172.16.x.x, 192.168.x.x)
- **2000::/3**: Globalni Unicast
- **ff02::1**: Multicast Svi ÄŒvorovi
- **ff02::2**: Multicast Ruter ÄŒvorovi

## **Otkrivanje IPv6 Adresa unutar MreÅ¾e**

### NaÄin 1: KoriÅ¡Ä‡enje Link-local Adresa
1. Dobiti MAC adresu ureÄ‘aja unutar mreÅ¾e.
2. Dobiti Link-local IPv6 adresu iz MAC adrese.

### NaÄin 2: KoriÅ¡Ä‡enje Multicast-a
1. PoÅ¡aljite ping na multicast adresu `ff02::1` da biste otkrili IPv6 adrese na lokalnoj mreÅ¾i.
```bash
service ufw stop # Stop the firewall
ping6 -I <IFACE> ff02::1 # Send a ping to multicast address
ip -6 neigh # Display the neighbor table
```
## Napadi Äovek-u-sredini (MitM) na IPv6
Postoje nekoliko tehnika za izvoÄ‘enje MitM napada u IPv6 mreÅ¾ama, kao Å¡to su:

- Falsifikovanje ICMPv6 susednih ili rutera oglasa.
- KoriÅ¡Ä‡enje ICMPv6 preusmeravanja ili poruka "Packet Too Big" za manipulaciju rutiranjem.
- Napad na mobilni IPv6 (obiÄno zahteva iskljuÄen IPSec).
- Postavljanje laÅ¾nog DHCPv6 servera.


# Identifikacija IPv6 adresa u divljini

## IstraÅ¾ivanje poddomena
Metod za pronalaÅ¾enje poddomena koji su potencijalno povezani sa IPv6 adresama ukljuÄuje koriÅ¡Ä‡enje pretraÅ¾ivaÄa. Na primer, upotreba obrasca upita poput `ipv6.*` moÅ¾e biti efikasna. Konkretno, sledeÄ‡a pretraga moÅ¾e biti koriÅ¡Ä‡ena u Google pretraÅ¾ivaÄu:
```bash
site:ipv6./
```
## KoriÅ¡Ä‡enje DNS Upita
Da biste identifikovali IPv6 adrese, mogu se upitati odreÄ‘eni tipovi DNS zapisa:
- **AXFR**: Zahteva kompletan prenos zone, potencijalno otkrivajuÄ‡i Å¡irok spektar DNS zapisa.
- **AAAA**: Direktno traÅ¾i IPv6 adrese.
- **ANY**: Å irok upit koji vraÄ‡a sve dostupne DNS zapise.

## IstraÅ¾ivanje sa Ping6
Nakon Å¡to se identifikuju IPv6 adrese povezane sa organizacijom, alatka `ping6` moÅ¾e se koristiti za istraÅ¾ivanje. Ovaj alat pomaÅ¾e u proceni odziva identifikovanih IPv6 adresa, a takoÄ‘e moÅ¾e pomoÄ‡i u otkrivanju susednih IPv6 ureÄ‘aja.


## Reference

* [http://www.firewall.cx/networking-topics/protocols/877-ipv6-subnetting-how-to-subnet-ipv6.html](http://www.firewall.cx/networking-topics/protocols/877-ipv6-subnetting-how-to-subnet-ipv6.html)
* [https://www.sans.org/reading-room/whitepapers/detection/complete-guide-ipv6-attack-defense-33904](https://www.sans.org/reading-room/whitepapers/detection/complete-guide-ipv6-attack-defense-33904)


{% hint style="success" %}
NauÄite i veÅ¾bajte hakovanje AWS:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Obuka AWS Crveni Tim Ekspert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
NauÄite i veÅ¾bajte hakovanje GCP-a: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Obuka GCP Crveni Tim Ekspert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>PodrÅ¾ite HackTricks</summary>

* Proverite [**planove pretplate**](https://github.com/sponsors/carlospolop)!
* **PridruÅ¾ite se** ğŸ’¬ [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili **pratite** nas na **Twitteru** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Podelite hakovanje trikova slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>
{% endhint %}
