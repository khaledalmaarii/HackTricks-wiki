# FreeIPA Pentesting

<details>

<summary><strong>htARTE (HackTricks AWS Red Team ì „ë¬¸ê°€)ë¡œë¶€í„° ì œë¡œì—ì„œ ì˜ì›…ê¹Œì§€ AWS í•´í‚¹ ë°°ìš°ê¸°</strong></summary>

HackTricksë¥¼ ì§€ì›í•˜ëŠ” ë‹¤ë¥¸ ë°©ë²•:

* **íšŒì‚¬ê°€ HackTricksì— ê´‘ê³ ë˜ê¸¸ ì›í•˜ê±°ë‚˜ HackTricksë¥¼ PDFë¡œ ë‹¤ìš´ë¡œë“œí•˜ê¸¸ ì›í•œë‹¤ë©´** [**êµ¬ë… ìš”ê¸ˆì œ**](https://github.com/sponsors/carlospolop)ë¥¼ í™•ì¸í•˜ì„¸ìš”!
* [**ê³µì‹ PEASS & HackTricks ìŠ¤ì™œê·¸**](https://peass.creator-spring.com)ë¥¼ êµ¬ë§¤í•˜ì„¸ìš”
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ë¥¼ ë°œê²¬í•˜ì„¸ìš”, ë‹¹ì‚¬ì˜ ë…ì  [**NFTs**](https://opensea.io/collection/the-peass-family) ì»¬ë ‰ì…˜
* **ğŸ’¬ [Discord ê·¸ë£¹](https://discord.gg/hRep4RUj7f)** ë˜ëŠ” [í…”ë ˆê·¸ë¨ ê·¸ë£¹](https://t.me/peass)ì— **ê°€ì…**í•˜ê±°ë‚˜ **íŠ¸ìœ„í„°** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**ë¥¼ íŒ”ë¡œìš°**í•˜ì„¸ìš”.
* **HackTricks** ë° **HackTricks Cloud** github ì €ì¥ì†Œì— PRì„ ì œì¶œí•˜ì—¬ **í•´í‚¹ íŠ¸ë¦­ì„ ê³µìœ **í•˜ì„¸ìš”.

</details>

## ê¸°ë³¸ ì •ë³´

FreeIPAëŠ” **Unix** í™˜ê²½ì„ ìœ„í•œ Microsoft Windows **Active Directory** ëŒ€ì²´ ì˜¤í”ˆ ì†ŒìŠ¤ì…ë‹ˆë‹¤. Active Directoryì™€ ìœ ì‚¬í•œ ê´€ë¦¬ë¥¼ ìœ„í•´ MIT **Kerberos** í‚¤ ë¶„ë°° ì„¼í„°ì™€ ì™„ì „í•œ **LDAP ë””ë ‰í„°ë¦¬**ë¥¼ ê²°í•©í•©ë‹ˆë‹¤. CA ë° RA ì¸ì¦ì„œ ê´€ë¦¬ë¥¼ ìœ„í•´ Dogtag **Certificate System**ì„ í™œìš©í•˜ë©°, ìŠ¤ë§ˆíŠ¸ì¹´ë“œë¥¼ í¬í•¨í•œ **ë‹¤ì¤‘ ì¸ì¦**ì„ ì§€ì›í•©ë‹ˆë‹¤. Unix ì¸ì¦ í”„ë¡œì„¸ìŠ¤ì—ëŠ” SSSDê°€ í†µí•©ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

## ì§€ë¬¸

### íŒŒì¼ ë° í™˜ê²½ ë³€ìˆ˜

* `/etc/krb5.conf`ì—ìˆëŠ” íŒŒì¼ì€ ë„ë©”ì¸ì— ë“±ë¡í•˜ëŠ” ë° í•„ìš”í•œ Kerberos í´ë¼ì´ì–¸íŠ¸ ì •ë³´ë¥¼ ì €ì¥í•©ë‹ˆë‹¤. ì´ì—ëŠ” KDC ë° ê´€ë¦¬ ì„œë²„ì˜ ìœ„ì¹˜, ê¸°ë³¸ ì„¤ì • ë° ë§¤í•‘ì´ í¬í•¨ë©ë‹ˆë‹¤.
* IPA í´ë¼ì´ì–¸íŠ¸ ë° ì„œë²„ì˜ ì‹œìŠ¤í…œ ì „ì—­ ê¸°ë³¸ê°’ì€ `/etc/ipa/default.conf`ì— ìœ„ì¹˜í•œ íŒŒì¼ì— ì„¤ì •ë©ë‹ˆë‹¤.
* ë„ë©”ì¸ ë‚´ í˜¸ìŠ¤íŠ¸ëŠ” ì¸ì¦ í”„ë¡œì„¸ìŠ¤ë¥¼ ìœ„í•´ `/etc/krb5.keytab`ì— `krb5.keytab` íŒŒì¼ì„ ê°€ì ¸ì•¼ í•©ë‹ˆë‹¤.
* ë‹¤ì–‘í•œ í™˜ê²½ ë³€ìˆ˜ (`KRB5CCNAME`, `KRB5_KTNAME`, `KRB5_CONFIG`, `KRB5_KDC_PROFILE`, `KRB5RCACHETYPE`, `KRB5RCACHEDIR`, `KRB5_TRACE`, `KRB5_CLIENT_KTNAME`, `KPROP_PORT`)ëŠ” Kerberos ì¸ì¦ê³¼ ê´€ë ¨ëœ íŠ¹ì • íŒŒì¼ ë° ì„¤ì •ì„ ê°€ë¦¬í‚¤ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤.

### ì´ì§„ íŒŒì¼

`ipa`, `kdestroy`, `kinit`, `klist`, `kpasswd`, `ksu`, `kswitch`, `kvno`ì™€ ê°™ì€ ë„êµ¬ëŠ” FreeIPA ë„ë©”ì¸ì„ ê´€ë¦¬í•˜ê³  Kerberos í‹°ì¼“ì„ ì²˜ë¦¬í•˜ë©° ë¹„ë°€ë²ˆí˜¸ë¥¼ ë³€ê²½í•˜ê³  ì„œë¹„ìŠ¤ í‹°ì¼“ì„ íšë“¤í•˜ëŠ” ë° ì¤‘ìš”í•©ë‹ˆë‹¤.

### ë„¤íŠ¸ì›Œí¬

ì „í˜•ì ì¸ FreeIPA ì„œë²„ ì„¤ì •ì„ ë‚˜íƒ€ë‚´ëŠ” ê·¸ë¦¼ì´ ì œê³µë©ë‹ˆë‹¤.

## ì¸ì¦

**Kerberos**ë¥¼ í™œìš©í•œ FreeIPAì˜ ì¸ì¦ì€ **Active Directory**ì™€ ìœ ì‚¬í•©ë‹ˆë‹¤. ë„ë©”ì¸ ë¦¬ì†ŒìŠ¤ì— ì•¡ì„¸ìŠ¤í•˜ë ¤ë©´ ìœ íš¨í•œ Kerberos í‹°ì¼“ì´ í•„ìš”í•˜ë©°, FreeIPA ë„ë©”ì¸ êµ¬ì„±ì— ë”°ë¼ ë‹¤ì–‘í•œ ìœ„ì¹˜ì— ì €ì¥ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### **CCACHE í‹°ì¼“ íŒŒì¼**

ì¼ë°˜ì ìœ¼ë¡œ **`/tmp`**ì— **600** ê¶Œí•œìœ¼ë¡œ ì €ì¥ë˜ëŠ” CCACHE íŒŒì¼ì€ ì´ë™ì„±ìœ¼ë¡œ ì¸í•´ ì‚¬ìš©ìì˜ í‰ë¬¸ ì•”í˜¸ì—†ì´ ì¸ì¦ì— ì¤‘ìš”í•œ Kerberos ìê²© ì¦ëª…ì„ ì €ì¥í•˜ëŠ” ì´ì§„ í˜•ì‹ì…ë‹ˆë‹¤. CCACHE í‹°ì¼“ì„ êµ¬ë¬¸ ë¶„ì„í•˜ë ¤ë©´ `klist` ëª…ë ¹ì„ ì‚¬ìš©í•˜ê³  ìœ íš¨í•œ CCACHE í‹°ì¼“ì„ ì¬ì‚¬ìš©í•˜ë ¤ë©´ `KRB5CCNAME`ì„ í‹°ì¼“ íŒŒì¼ì˜ ê²½ë¡œë¡œ ë‚´ë³´ë‚´ì•¼ í•©ë‹ˆë‹¤.

### **Unix í‚¤ë§**

ëŒ€ì‹ , CCACHE í‹°ì¼“ì€ Linux í‚¤ë§ì— ì €ì¥ë  ìˆ˜ ìˆìœ¼ë©°, í‹°ì¼“ ê´€ë¦¬ì— ëŒ€í•œ ë” ë§ì€ ì œì–´ë¥¼ ì œê³µí•©ë‹ˆë‹¤. í‹°ì¼“ ì €ì¥ ë²”ìœ„ëŠ” ë‹¤ì–‘í•˜ë©° (`KEYRING:name`, `KEYRING:process:name`, `KEYRING:thread:name`, `KEYRING:session:name`, `KEYRING:persistent:uidnumber`) ì‚¬ìš©ìë¥¼ ìœ„í•´ ì´ ì •ë³´ë¥¼ êµ¬ë¬¸ ë¶„ì„í•  ìˆ˜ ìˆëŠ” `klist`ê°€ ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ Unix í‚¤ë§ì—ì„œ CCACHE í‹°ì¼“ì„ ì¬ì‚¬ìš©í•˜ëŠ” ê²ƒì€ ë„ì „ì ì¼ ìˆ˜ ìˆìœ¼ë©°, **Tickey**ì™€ ê°™ì€ ë„êµ¬ë¥¼ ì‚¬ìš©í•˜ì—¬ Kerberos í‹°ì¼“ì„ ì¶”ì¶œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### Keytab

Kerberos ì£¼ì²´ì™€ ì•”í˜¸í™”ëœ í‚¤ë¥¼ í¬í•¨í•˜ëŠ” Keytab íŒŒì¼ì€ ì£¼ì²´ì˜ ì•”í˜¸ë¥¼ í•„ìš”ë¡œí•˜ì§€ ì•Šê³  ìœ íš¨í•œ í‹°ì¼“ ë°œê¸‰ í‹°ì¼“(TGT)ì„ ì–»ëŠ” ë° ì¤‘ìš”í•©ë‹ˆë‹¤. Keytab íŒŒì¼ì—ì„œ ìê²© ì¦ëª…ì„ êµ¬ë¬¸ ë¶„ì„í•˜ê³  ì¬ì‚¬ìš©í•˜ëŠ” ê²ƒì€ `klist`ì™€ **KeytabParser**ì™€ ê°™ì€ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ì‰½ê²Œ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### ì¹˜íŠ¸ ì‹œíŠ¸

ë¦¬ëˆ…ìŠ¤ì—ì„œ í‹°ì¼“ì„ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì— ëŒ€í•œ ìì„¸í•œ ì •ë³´ëŠ” ë‹¤ìŒ ë§í¬ì—ì„œ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤:

{% content-ref url="privilege-escalation/linux-active-directory.md" %}
[linux-active-directory.md](privilege-escalation/linux-active-directory.md)
{% endcontent-ref %}

## ì—´ê±°

{% hint style="warning" %}
**ldap** ë° ê¸°íƒ€ **ì´ì§„** ë„êµ¬ë¥¼ í†µí•´ **ì—´ê±°**ë¥¼ ìˆ˜í–‰í•˜ê±°ë‚˜ **FreeIPA ì„œë²„ì˜ í¬íŠ¸ 443ì— ì›¹ í˜ì´ì§€ì— ì—°ê²°**í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
{% endhint %}

### í˜¸ìŠ¤íŠ¸, ì‚¬ìš©ì ë° ê·¸ë£¹ <a href="#id-4b3b" id="id-4b3b"></a>

**í˜¸ìŠ¤íŠ¸**, **ì‚¬ìš©ì** ë° **ê·¸ë£¹**ì„ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í˜¸ìŠ¤íŠ¸ ë° ì‚¬ìš©ìëŠ” ê°ê° "í˜¸ìŠ¤íŠ¸ ê·¸ë£¹" ë° "ì‚¬ìš©ì ê·¸ë£¹"ì´ë¼ëŠ” ì»¨í…Œì´ë„ˆë¡œ ë¶„ë¥˜ë©ë‹ˆë‹¤. ì´ëŠ” **ì¡°ì§ ë‹¨ìœ„**(OU)ì™€ ìœ ì‚¬í•©ë‹ˆë‹¤.

ê¸°ë³¸ì ìœ¼ë¡œ FreeIPAì—ì„œ LDAP ì„œë²„ëŠ” **ìµëª… ë°”ì¸ë“œ**ë¥¼ í—ˆìš©í•˜ë©°, **ì¸ì¦ë˜ì§€ ì•Šì€** ìƒíƒœì—ì„œ ë§ì€ ë°ì´í„°ê°€ ì—´ê±° ê°€ëŠ¥í•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ëª¨ë“  ë°ì´í„°ë¥¼ ì¸ì¦ë˜ì§€ ì•Šì€ ìƒíƒœë¡œ ì—´ê±°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:
```
ldapsearch -x
```
**ë” ë§ì€ ì •ë³´**ë¥¼ ì–»ìœ¼ë ¤ë©´ **ì¸ì¦ëœ** ì„¸ì…˜ì„ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤ (ì¸ì¦ëœ ì„¸ì…˜ì„ ì¤€ë¹„í•˜ëŠ” ë°©ë²•ì€ ì¸ì¦ ì„¹ì…˜ì„ í™•ì¸í•˜ì„¸ìš”).
```bash
# Get all users of domain
ldapsearch -Y gssapi -b "cn=users,cn=compat,dc=domain_name,dc=local"

# Get users groups
ldapsearch -Y gssapi -b "cn=groups,cn=accounts,dc=domain_name,dc=local"

# Get all the hosts
ldapsearch -Y gssapi -b "cn=computers,cn=accounts,dc=domain_name,dc=local"

# Get hosts groups
ldapsearch -Y gssapi -b "cn=hostgroups,cn=accounts,dc=domain_name,dc=local"
```
ë„ë©”ì¸ì— ê°€ì…ëœ ì»´í“¨í„°ì—ì„œëŠ” **ì„¤ì¹˜ëœ ì´ì§„ íŒŒì¼**ì„ ì‚¬ìš©í•˜ì—¬ ë„ë©”ì¸ì„ ì—´ëŒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:
```bash
ipa user-find
ipa usergroup-find
ipa host-find
ipa host-group-find

-------------------

ipa user-show <username> --all
ipa usergroup-show <user group> --all
ipa host-find <host> --all
ipa hostgroup-show <host group> --all
```
{% hint style="info" %}
**FreeIPA**ì˜ **ê´€ë¦¬ì** ì‚¬ìš©ìëŠ” **AD**ì˜ **ë„ë©”ì¸ ê´€ë¦¬ì**ì™€ ë™ë“±í•©ë‹ˆë‹¤.
{% endhint %}

### í•´ì‹œ <a href="#id-482b" id="id-482b"></a>

**IPA ì„œë²„**ì˜ **ë£¨íŠ¸** ì‚¬ìš©ìëŠ” ì•”í˜¸ **í•´ì‹œ**ì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- ì‚¬ìš©ìì˜ ì•”í˜¸ í•´ì‹œëŠ” â€œ**userPassword**â€ **ì†ì„±**ì— **base64**ë¡œ ì €ì¥ë©ë‹ˆë‹¤. ì´ í•´ì‹œëŠ” **SSHA512** (ì´ì „ ë²„ì „ì˜ FreeIPA) ë˜ëŠ” **PBKDF2\_SHA256**ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ì‹œìŠ¤í…œì´ **AD**ì™€ **í†µí•©**ë˜ì–´ ìˆë‹¤ë©´ ì•”í˜¸ì˜ **Nthash**ëŠ” â€œ**ipaNTHash**â€ì— **base64**ë¡œ ì €ì¥ë©ë‹ˆë‹¤.

ì´ëŸ¬í•œ í•´ì‹œë¥¼ í•´ë…í•˜ë ¤ë©´:

- FreeIPAê°€ ADì™€ í†µí•©ë˜ì–´ ìˆë‹¤ë©´, **ipaNTHash**ë¥¼ ì‰½ê²Œ í•´ë…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤: **base64**ë¥¼ **ë””ì½”ë”©** -> **ASCII** 16ì§„ìˆ˜ë¡œ ë‹¤ì‹œ ì¸ì½”ë”© -> John The Ripper ë˜ëŠ” **hashcat**ì„ ì‚¬ìš©í•˜ì—¬ ë¹ ë¥´ê²Œ í•´ë…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- ì´ì „ ë²„ì „ì˜ FreeIPAë¥¼ ì‚¬ìš©í•˜ê³  ìˆë‹¤ë©´, **SSHA512**ë¥¼ ì‚¬ìš©í•˜ê³  ìˆì„ ê²ƒì…ë‹ˆë‹¤: **base64**ë¥¼ ë””ì½”ë”© -> SSHA512 **í•´ì‹œ**ë¥¼ ì°¾ì•„ì•¼ í•©ë‹ˆë‹¤ -> John The Ripper ë˜ëŠ” **hashcat**ì„ ì‚¬ìš©í•˜ì—¬ í•´ë…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- ìƒˆ ë²„ì „ì˜ FreeIPAë¥¼ ì‚¬ìš©í•˜ê³  ìˆë‹¤ë©´, **PBKDF2\_SHA256**ë¥¼ ì‚¬ìš©í•˜ê³  ìˆì„ ê²ƒì…ë‹ˆë‹¤: **base64**ë¥¼ ë””ì½”ë”© -> PBKDF2\_SHA256ì„ ì°¾ì•„ì•¼ í•©ë‹ˆë‹¤ -> ê¸¸ì´ëŠ” 256ë°”ì´íŠ¸ì…ë‹ˆë‹¤. Johnì€ 256ë¹„íŠ¸(32ë°”ì´íŠ¸)ì™€ í•¨ê»˜ ì‘ë™í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤ -> SHA-265ê°€ ì˜ì‚¬ ë‚œìˆ˜ í•¨ìˆ˜ë¡œ ì‚¬ìš©ë˜ë©° ë¸”ë¡ í¬ê¸°ëŠ” 32ë°”ì´íŠ¸ì…ë‹ˆë‹¤ -> PBKDF2\_SHA256 í•´ì‹œì˜ ì²˜ìŒ 256ë¹„íŠ¸ë§Œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤ -> John The Ripper ë˜ëŠ” hashcatì„ ì‚¬ìš©í•˜ì—¬ í•´ë…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<figure><img src="../.gitbook/assets/image (655).png" alt=""><figcaption></figcaption></figure>

í•´ì‹œë¥¼ ì¶”ì¶œí•˜ë ¤ë©´ **FreeIPA ì„œë²„ì˜ ë£¨íŠ¸**ì—¬ì•¼ í•˜ë©°, ì—¬ê¸°ì„œ **`dbscan`** ë„êµ¬ë¥¼ ì‚¬ìš©í•˜ì—¬ í•´ì‹œë¥¼ ì¶”ì¶œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

<figure><img src="../.gitbook/assets/image (293).png" alt=""><figcaption></figcaption></figure>

### HBAC-Rules <a href="#id-482b" id="id-482b"></a>

ì´ëŠ” ì‚¬ìš©ì ë˜ëŠ” í˜¸ìŠ¤íŠ¸ì—ê²Œ íŠ¹ì • ê¶Œí•œì„ ë¶€ì—¬í•˜ëŠ” ê·œì¹™ì…ë‹ˆë‹¤(í˜¸ìŠ¤íŠ¸, ì„œë¹„ìŠ¤, ì„œë¹„ìŠ¤ ê·¸ë£¹ ë“±).
```bash
# Enumerate using ldap
ldapsearch -Y gssapi -b "cn=hbac,dc=domain_name,dc=local"
# Using ipa
ipa hbacrule-find
# Show info of rule
ipa hbacrule-show <hbacrule> --all
```
#### Sudo-Rules

FreeIPAëŠ” sudo ê¶Œí•œì„ ì¤‘ì•™ì—ì„œ ì œì–´í•  ìˆ˜ ìˆë„ë¡ sudo ê·œì¹™ì„ í™œì„±í™”í•©ë‹ˆë‹¤. ì´ëŸ¬í•œ ê·œì¹™ì€ ë„ë©”ì¸ ë‚´ í˜¸ìŠ¤íŠ¸ì—ì„œ sudoë¥¼ ì‚¬ìš©í•˜ì—¬ ëª…ë ¹ì„ ì‹¤í–‰í•˜ëŠ” ê²ƒì„ í—ˆìš©í•˜ê±°ë‚˜ ì œí•œí•©ë‹ˆë‹¤. ê³µê²©ìëŠ” ì´ëŸ¬í•œ ê·œì¹™ ì§‘í•©ì„ ì¡°ì‚¬í•¨ìœ¼ë¡œì¨ ì ìš© ê°€ëŠ¥í•œ í˜¸ìŠ¤íŠ¸, ì‚¬ìš©ì ë° í—ˆìš©ëœ ëª…ë ¹ì„ ì‹ë³„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
```bash
# Enumerate using ldap
ldapsearch -Y gssapi -b "cn=sudorules,cn=sudo,dc=domain_name,dc=local"
# Using ipa
ipa sudorule-find
# Show info of rule
ipa sudorule-show <sudorule> --all
```
### ì—­í•  ê¸°ë°˜ ì•¡ì„¸ìŠ¤ ì œì–´

**ì—­í• **ì€ ì—¬ëŸ¬ **ê¶Œí•œ**ìœ¼ë¡œ êµ¬ì„±ë˜ì–´ ìˆìœ¼ë©°, ê° ê¶Œí•œì€ **í—ˆê°€**ì˜ ëª¨ìŒì„ í¬í•¨í•©ë‹ˆë‹¤. ì´ëŸ¬í•œ ì—­í• ì€ ì‚¬ìš©ì, ì‚¬ìš©ì **ê·¸ë£¹**, **í˜¸ìŠ¤íŠ¸**, í˜¸ìŠ¤íŠ¸ ê·¸ë£¹ ë° ì„œë¹„ìŠ¤ì— í• ë‹¹í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì´ êµ¬ì¡°ë¥¼ ë³´ì—¬ì£¼ê¸° ìœ„í•´ FreeIPAì˜ ê¸°ë³¸ "ì‚¬ìš©ì ê´€ë¦¬ì" ì—­í• ì„ ê³ ë ¤í•´ ë³´ê² ìŠµë‹ˆë‹¤.

`ì‚¬ìš©ì ê´€ë¦¬ì` ì—­í• ì—ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ê¶Œí•œì´ ìˆìŠµë‹ˆë‹¤:

- **ì‚¬ìš©ì ê´€ë¦¬ì**
- **ê·¸ë£¹ ê´€ë¦¬ì**
- **ë‹¨ê³„ ì‚¬ìš©ì ê´€ë¦¬ì**

ë‹¤ìŒ ëª…ë ¹ì„ ì‚¬ìš©í•˜ì—¬ ì—­í• , ê¶Œí•œ ë° í—ˆê°€ë¥¼ ë‚˜ì—´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:
```bash
# Using ldap
ldapsearch -Y gssapi -b "cn=roles,cn=accounts,dc=westeros,dc=local"
# Using ipa binary
ipa role-find
ipa role-show <role> --all
ipa privilege-find
ipa privilege-show <privilege> --all
ipa permission-find
ipa permission-show <permission> --all
```
### ê³µê²© ì‹œë‚˜ë¦¬ì˜¤ ì˜ˆì‹œ

[https://posts.specterops.io/attacking-freeipa-part-iii-finding-a-path-677405b5b95e](https://posts.specterops.io/attacking-freeipa-part-iii-finding-a-path-677405b5b95e)ì—ì„œ ë„ë©”ì¸ì„ compromiseí•˜ê¸° ìœ„í•´ ì¼ë¶€ ê¶Œí•œì„ ì•…ìš©í•˜ëŠ” ê°„ë‹¨í•œ ì˜ˆì œë¥¼ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### Linikatz/LinikatzV2

* [https://github.com/Orange-Cyberdefense/LinikatzV2](https://github.com/Orange-Cyberdefense/LinikatzV2)
* [https://github.com/CiscoCXSecurity/linikatz](https://github.com/CiscoCXSecurity/linikatz)

## Privesc

### ~~ë£¨íŠ¸ ì‚¬ìš©ì ìƒì„±~~

{% hint style="warning" %}
ë§Œì•½ **`root`**ë¼ëŠ” ì´ë¦„ì˜ ìƒˆë¡œìš´ ì‚¬ìš©ìë¥¼ **ìƒì„±í•  ìˆ˜ ìˆë‹¤ë©´**, ê·¸ë¥¼ í‰ë‚´ë‚´ì–´ **ì–´ë–¤ ë¨¸ì‹ ì—ì„œë“  rootë¡œ SSHí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.**

**ì´ëŠ” íŒ¨ì¹˜ë˜ì—ˆìŠµë‹ˆë‹¤.**
{% endhint %}

ìì„¸í•œ ì„¤ëª…ì€ [https://posts.specterops.io/attacking-freeipa-part-iv-cve-2020-10747-7c373a1bf66b](https://posts.specterops.io/attacking-freeipa-part-iv-cve-2020-10747-7c373a1bf66b)ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## ì°¸ê³  ìë£Œ

* [https://posts.specterops.io/attacking-freeipa-part-iv-cve-2020-10747-7c373a1bf66b](https://posts.specterops.io/attacking-freeipa-part-iv-cve-2020-10747-7c373a1bf66b)
* [https://posts.specterops.io/attacking-freeipa-part-i-authentication-77e73d837d6a](https://posts.specterops.io/attacking-freeipa-part-i-authentication-77e73d837d6a)
* [https://posts.specterops.io/attacking-freeipa-part-ii-enumeration-ad27224371e1](https://posts.specterops.io/attacking-freeipa-part-ii-enumeration-ad27224371e1)
* [https://www.youtube.com/watch?v=9dOu-7BTwPQ](https://www.youtube.com/watch?v=9dOu-7BTwPQ)

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)ë¥¼ í†µí•´ ì œë¡œë¶€í„° AWS í•´í‚¹ì„ ì „ë¬¸ê°€ë¡œ ë°°ìš°ì„¸ìš”</strong></summary>

HackTricksë¥¼ ì§€ì›í•˜ëŠ” ë‹¤ë¥¸ ë°©ë²•:

* **íšŒì‚¬ë¥¼ HackTricksì—ì„œ ê´‘ê³ í•˜ê±°ë‚˜ HackTricksë¥¼ PDFë¡œ ë‹¤ìš´ë¡œë“œ**í•˜ë ¤ë©´ [**êµ¬ë… ìš”ê¸ˆì œ**](https://github.com/sponsors/carlospolop)ë¥¼ í™•ì¸í•˜ì„¸ìš”!
* [**ê³µì‹ PEASS & HackTricks ìŠ¤ì™œê·¸**](https://peass.creator-spring.com)ë¥¼ êµ¬ë§¤í•˜ì„¸ìš”
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ë¥¼ ë°œê²¬í•˜ì„¸ìš”, ë‹¹ì‚¬ì˜ ë…ì  [**NFTs**](https://opensea.io/collection/the-peass-family) ì»¬ë ‰ì…˜
* ğŸ’¬ [**ë””ìŠ¤ì½”ë“œ ê·¸ë£¹**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— **ê°€ì…**í•˜ê±°ë‚˜ **íŠ¸ìœ„í„°** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**ë¥¼ íŒ”ë¡œìš°**í•˜ì„¸ìš”.
* **HackTricks** ë° **HackTricks Cloud** github ì €ì¥ì†Œì— PRì„ ì œì¶œí•˜ì—¬ **í•´í‚¹ ìš”ë ¹ì„ ê³µìœ **í•˜ì„¸ìš”.

</details>
