# PAM - Pluggable Authentication Modules

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}


### åŸºæœ¬æƒ…å ±

**PAM (Pluggable Authentication Modules)** ã¯ã€**ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã‚µãƒ¼ãƒ“ã‚¹ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã‚ˆã†ã¨ã™ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®èº«å…ƒã‚’ç¢ºèªã™ã‚‹ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ¡ã‚«ãƒ‹ã‚ºãƒ **ã¨ã—ã¦æ©Ÿèƒ½ã—ã€ã•ã¾ã–ã¾ãªåŸºæº–ã«åŸºã¥ã„ã¦ã‚¢ã‚¯ã‚»ã‚¹ã‚’åˆ¶å¾¡ã—ã¾ã™ã€‚ã“ã‚Œã¯ãƒ‡ã‚¸ã‚¿ãƒ«ã‚²ãƒ¼ãƒˆã‚­ãƒ¼ãƒ‘ãƒ¼ã®ã‚ˆã†ãªã‚‚ã®ã§ã€èªå¯ã•ã‚ŒãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã¿ãŒç‰¹å®šã®ã‚µãƒ¼ãƒ“ã‚¹ã«é–¢ä¸ã§ãã‚‹ã‚ˆã†ã«ã—ã€ã‚·ã‚¹ãƒ†ãƒ ã®éè² è·ã‚’é˜²ããŸã‚ã«ä½¿ç”¨ã‚’åˆ¶é™ã™ã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚

#### è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«

* **SolarisãŠã‚ˆã³UNIXãƒ™ãƒ¼ã‚¹ã®ã‚·ã‚¹ãƒ†ãƒ **ã¯ã€é€šå¸¸ã€`/etc/pam.conf`ã«ã‚ã‚‹ä¸­å¤®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’åˆ©ç”¨ã—ã¾ã™ã€‚
* **Linuxã‚·ã‚¹ãƒ†ãƒ **ã¯ã€ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’å¥½ã¿ã€ã‚µãƒ¼ãƒ“ã‚¹å›ºæœ‰ã®è¨­å®šã‚’`/etc/pam.d`ã«ä¿å­˜ã—ã¾ã™ã€‚ãŸã¨ãˆã°ã€ãƒ­ã‚°ã‚¤ãƒ³ã‚µãƒ¼ãƒ“ã‚¹ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã¯`/etc/pam.d/login`ã«ã‚ã‚Šã¾ã™ã€‚

ãƒ­ã‚°ã‚¤ãƒ³ã‚µãƒ¼ãƒ“ã‚¹ã®PAMè¨­å®šã®ä¾‹ã¯æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ï¼š
```
auth required /lib/security/pam_securetty.so
auth required /lib/security/pam_nologin.so
auth sufficient /lib/security/pam_ldap.so
auth required /lib/security/pam_unix_auth.so try_first_pass
account sufficient /lib/security/pam_ldap.so
account required /lib/security/pam_unix_acct.so
password required /lib/security/pam_cracklib.so
password required /lib/security/pam_ldap.so
password required /lib/security/pam_pwdb.so use_first_pass
session required /lib/security/pam_unix_session.so
```
#### **PAMç®¡ç†é ˜åŸŸ**

ã“ã‚Œã‚‰ã®é ˜åŸŸã€ã¾ãŸã¯ç®¡ç†ã‚°ãƒ«ãƒ¼ãƒ—ã«ã¯ã€**auth**ã€**account**ã€**password**ã€ãŠã‚ˆã³**session**ãŒå«ã¾ã‚Œã€ãã‚Œãã‚Œèªè¨¼ãŠã‚ˆã³ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ãƒ—ãƒ­ã‚»ã‚¹ã®ç•°ãªã‚‹å´é¢ã‚’æ‹…å½“ã—ã¦ã„ã¾ã™ï¼š

* **Auth**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®èº«å…ƒã‚’ç¢ºèªã—ã€é€šå¸¸ã¯ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã®å…¥åŠ›ã‚’ä¿ƒã—ã¾ã™ã€‚
* **Account**: ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®æ¤œè¨¼ã‚’å‡¦ç†ã—ã€ã‚°ãƒ«ãƒ¼ãƒ—ãƒ¡ãƒ³ãƒãƒ¼ã‚·ãƒƒãƒ—ã‚„æ™‚é–“åˆ¶é™ãªã©ã®æ¡ä»¶ã‚’ç¢ºèªã—ã¾ã™ã€‚
* **Password**: ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã®æ›´æ–°ã‚’ç®¡ç†ã—ã€è¤‡é›‘ã•ã®ãƒã‚§ãƒƒã‚¯ã‚„è¾æ›¸æ”»æ’ƒã®é˜²æ­¢ã‚’å«ã¿ã¾ã™ã€‚
* **Session**: ã‚µãƒ¼ãƒ“ã‚¹ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®é–‹å§‹ã¾ãŸã¯çµ‚äº†æ™‚ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’ç®¡ç†ã—ã€ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ãƒã‚¦ãƒ³ãƒˆã‚„ãƒªã‚½ãƒ¼ã‚¹åˆ¶é™ã®è¨­å®šãªã©ã‚’è¡Œã„ã¾ã™ã€‚

#### **PAMãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åˆ¶å¾¡**

åˆ¶å¾¡ã¯ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®æˆåŠŸã¾ãŸã¯å¤±æ•—ã«å¯¾ã™ã‚‹å¿œç­”ã‚’æ±ºå®šã—ã€å…¨ä½“ã®èªè¨¼ãƒ—ãƒ­ã‚»ã‚¹ã«å½±éŸ¿ã‚’ä¸ãˆã¾ã™ã€‚ã“ã‚Œã«ã¯ä»¥ä¸‹ãŒå«ã¾ã‚Œã¾ã™ï¼š

* **Required**: å¿…é ˆãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®å¤±æ•—ã¯æœ€çµ‚çš„ãªå¤±æ•—ã‚’å¼•ãèµ·ã“ã—ã¾ã™ãŒã€ã™ã¹ã¦ã®å¾Œç¶šãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒãƒã‚§ãƒƒã‚¯ã•ã‚ŒãŸå¾Œã«ã®ã¿ç™ºç”Ÿã—ã¾ã™ã€‚
* **Requisite**: å¤±æ•—æ™‚ã«ãƒ—ãƒ­ã‚»ã‚¹ã‚’å³åº§ã«çµ‚äº†ã—ã¾ã™ã€‚
* **Sufficient**: æˆåŠŸã¯åŒã˜é ˜åŸŸã®æ®‹ã‚Šã®ãƒã‚§ãƒƒã‚¯ã‚’ãƒã‚¤ãƒ‘ã‚¹ã—ã¾ã™ãŒã€å¾Œç¶šã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒå¤±æ•—ã—ãŸå ´åˆã¯é™¤ãã¾ã™ã€‚
* **Optional**: ã‚¹ã‚¿ãƒƒã‚¯å†…ã®å”¯ä¸€ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§ã‚ã‚‹å ´åˆã«ã®ã¿å¤±æ•—ã‚’å¼•ãèµ·ã“ã—ã¾ã™ã€‚

#### ä¾‹ã®ã‚·ãƒŠãƒªã‚ª

è¤‡æ•°ã®authãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’æŒã¤ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã§ã¯ã€ãƒ—ãƒ­ã‚»ã‚¹ã¯å³æ ¼ãªé †åºã«å¾“ã„ã¾ã™ã€‚`pam_securetty`ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒãƒ­ã‚°ã‚¤ãƒ³ç«¯æœ«ã‚’ä¸æ­£ã¨è¦‹ãªã™ã¨ã€rootãƒ­ã‚°ã‚¤ãƒ³ã¯ãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œã¾ã™ãŒã€ãã®ã€Œrequiredã€ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã®ãŸã‚ã«ã™ã¹ã¦ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯å‡¦ç†ã•ã‚Œç¶šã‘ã¾ã™ã€‚`pam_env`ã¯ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®šã—ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¨ã‚¯ã‚¹ãƒšãƒªã‚¨ãƒ³ã‚¹ã‚’å‘ä¸Šã•ã›ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚`pam_ldap`ã¨`pam_unix`ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯å”åŠ›ã—ã¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’èªè¨¼ã—ã€`pam_unix`ã¯ä»¥å‰ã«æä¾›ã•ã‚ŒãŸãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ä½¿ç”¨ã—ã‚ˆã†ã¨ã—ã€èªè¨¼æ–¹æ³•ã®åŠ¹ç‡ã¨æŸ”è»Ÿæ€§ã‚’é«˜ã‚ã¾ã™ã€‚

### å‚è€ƒæ–‡çŒ®

* [https://hotpotato.tistory.com/434](https://hotpotato.tistory.com/434)


{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
