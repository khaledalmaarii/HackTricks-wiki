# PAM - Pluggable Authentication Modules

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}


### Informations de base

**PAM (Pluggable Authentication Modules)** agit comme un m√©canisme de s√©curit√© qui **v√©rifie l'identit√© des utilisateurs tentant d'acc√©der aux services informatiques**, contr√¥lant leur acc√®s en fonction de divers crit√®res. C'est semblable √† un gardien num√©rique, garantissant que seuls les utilisateurs autoris√©s peuvent interagir avec des services sp√©cifiques tout en limitant potentiellement leur utilisation pour √©viter les surcharges du syst√®me.

#### Fichiers de configuration

* Les **syst√®mes Solaris et bas√©s sur UNIX** utilisent g√©n√©ralement un fichier de configuration central situ√© √† `/etc/pam.conf`.
* Les **syst√®mes Linux** pr√©f√®rent une approche par r√©pertoire, stockant des configurations sp√©cifiques aux services dans `/etc/pam.d`. Par exemple, le fichier de configuration pour le service de connexion se trouve √† `/etc/pam.d/login`.

Un exemple de configuration PAM pour le service de connexion pourrait ressembler √† ceci :
```
auth required /lib/security/pam_securetty.so
auth required /lib/security/pam_nologin.so
auth sufficient /lib/security/pam_ldap.so
auth required /lib/security/pam_unix_auth.so try_first_pass
account sufficient /lib/security/pam_ldap.so
account required /lib/security/pam_unix_acct.so
password required /lib/security/pam_cracklib.so
password required /lib/security/pam_ldap.so
password required /lib/security/pam_pwdb.so use_first_pass
session required /lib/security/pam_unix_session.so
```
#### **Royaumes de gestion PAM**

Ces royaumes, ou groupes de gestion, incluent **auth**, **account**, **password**, et **session**, chacun responsable de diff√©rents aspects du processus d'authentification et de gestion de session :

* **Auth** : Valide l'identit√© de l'utilisateur, souvent en demandant un mot de passe.
* **Account** : G√®re la v√©rification des comptes, v√©rifiant des conditions telles que l'appartenance √† un groupe ou des restrictions horaires.
* **Password** : G√®re les mises √† jour de mot de passe, y compris les v√©rifications de complexit√© ou la pr√©vention des attaques par dictionnaire.
* **Session** : G√®re les actions lors du d√©but ou de la fin d'une session de service, comme le montage de r√©pertoires ou la d√©finition de limites de ressources.

#### **Contr√¥les des modules PAM**

Les contr√¥les dictent la r√©ponse du module en cas de succ√®s ou d'√©chec, influen√ßant le processus d'authentification global. Ceux-ci incluent :

* **Required** : L'√©chec d'un module requis entra√Æne un √©chec final, mais seulement apr√®s que tous les modules suivants aient √©t√© v√©rifi√©s.
* **Requisite** : Terminaison imm√©diate du processus en cas d'√©chec.
* **Sufficient** : Le succ√®s contourne les autres v√©rifications du m√™me royaume √† moins qu'un module suivant √©choue.
* **Optional** : Ne cause un √©chec que s'il s'agit du seul module dans la pile.

#### Sc√©nario d'exemple

Dans une configuration avec plusieurs modules d'authentification, le processus suit un ordre strict. Si le module `pam_securetty` trouve le terminal de connexion non autoris√©, les connexions root sont bloqu√©es, mais tous les modules sont tout de m√™me trait√©s en raison de son statut "required". Le `pam_env` d√©finit des variables d'environnement, pouvant potentiellement aider √† l'exp√©rience utilisateur. Les modules `pam_ldap` et `pam_unix` travaillent ensemble pour authentifier l'utilisateur, avec `pam_unix` tentant d'utiliser un mot de passe pr√©c√©demment fourni, am√©liorant l'efficacit√© et la flexibilit√© des m√©thodes d'authentification.

### R√©f√©rences

* [https://hotpotato.tistory.com/434](https://hotpotato.tistory.com/434)


{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
