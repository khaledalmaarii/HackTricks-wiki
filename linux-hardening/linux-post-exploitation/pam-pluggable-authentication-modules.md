# PAM - å¯æ’æ‹”è®¤è¯æ¨¡å—

{% hint style="success" %}
å­¦ä¹ ä¸å®è·µ AWS é»‘å®¢æŠ€æœ¯ï¼š<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks åŸ¹è®­ AWS çº¢é˜Ÿä¸“å®¶ (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
å­¦ä¹ ä¸å®è·µ GCP é»‘å®¢æŠ€æœ¯ï¼š<img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks åŸ¹è®­ GCP çº¢é˜Ÿä¸“å®¶ (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>æ”¯æŒ HackTricks</summary>

* æŸ¥çœ‹ [**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**Telegram ç¾¤ç»„**](https://t.me/peass) æˆ– **å…³æ³¨** æˆ‘ä»¬çš„ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub ä»“åº“æäº¤ PR åˆ†äº«é»‘å®¢æŠ€å·§ã€‚

</details>
{% endhint %}

#### [WhiteIntel](https://whiteintel.io)

<figure><img src="../../.gitbook/assets/image (1227).png" alt=""><figcaption></figcaption></figure>

[**WhiteIntel**](https://whiteintel.io) æ˜¯ä¸€ä¸ªç”± **æš—ç½‘** é©±åŠ¨çš„æœç´¢å¼•æ“ï¼Œæä¾› **å…è´¹** åŠŸèƒ½ä»¥æ£€æŸ¥å…¬å¸æˆ–å…¶å®¢æˆ·æ˜¯å¦è¢« **çªƒå–æ¶æ„è½¯ä»¶** **å…¥ä¾µ**ã€‚

WhiteIntel çš„ä¸»è¦ç›®æ ‡æ˜¯æ‰“å‡»ç”±äºä¿¡æ¯çªƒå–æ¶æ„è½¯ä»¶å¯¼è‡´çš„è´¦æˆ·æ¥ç®¡å’Œå‹’ç´¢è½¯ä»¶æ”»å‡»ã€‚

æ‚¨å¯ä»¥è®¿é—®ä»–ä»¬çš„ç½‘ç«™å¹¶å…è´¹å°è¯•ä»–ä»¬çš„å¼•æ“ï¼š

{% embed url="https://whiteintel.io" %}

***

### åŸºæœ¬ä¿¡æ¯

**PAM (å¯æ’æ‹”è®¤è¯æ¨¡å—)** ä½œä¸ºä¸€ç§å®‰å…¨æœºåˆ¶ï¼Œ**éªŒè¯è¯•å›¾è®¿é—®è®¡ç®—æœºæœåŠ¡çš„ç”¨æˆ·èº«ä»½**ï¼Œæ ¹æ®å„ç§æ ‡å‡†æ§åˆ¶ä»–ä»¬çš„è®¿é—®ã€‚è¿™ç±»ä¼¼äºæ•°å­—å®ˆé—¨å‘˜ï¼Œç¡®ä¿åªæœ‰æˆæƒç”¨æˆ·å¯ä»¥ä½¿ç”¨ç‰¹å®šæœåŠ¡ï¼ŒåŒæ—¶å¯èƒ½é™åˆ¶ä»–ä»¬çš„ä½¿ç”¨ä»¥é˜²æ­¢ç³»ç»Ÿè¿‡è½½ã€‚

#### é…ç½®æ–‡ä»¶

* **Solaris å’Œ UNIX ç³»ç»Ÿ** é€šå¸¸ä½¿ç”¨ä½äº `/etc/pam.conf` çš„ä¸­å¤®é…ç½®æ–‡ä»¶ã€‚
* **Linux ç³»ç»Ÿ** æ›´å€¾å‘äºç›®å½•æ–¹æ³•ï¼Œå°†ç‰¹å®šæœåŠ¡çš„é…ç½®å­˜å‚¨åœ¨ `/etc/pam.d` ä¸­ã€‚ä¾‹å¦‚ï¼Œç™»å½•æœåŠ¡çš„é…ç½®æ–‡ä»¶ä½äº `/etc/pam.d/login`ã€‚

ç™»å½•æœåŠ¡çš„ PAM é…ç½®ç¤ºä¾‹å¯èƒ½å¦‚ä¸‹æ‰€ç¤ºï¼š
```
auth required /lib/security/pam_securetty.so
auth required /lib/security/pam_nologin.so
auth sufficient /lib/security/pam_ldap.so
auth required /lib/security/pam_unix_auth.so try_first_pass
account sufficient /lib/security/pam_ldap.so
account required /lib/security/pam_unix_acct.so
password required /lib/security/pam_cracklib.so
password required /lib/security/pam_ldap.so
password required /lib/security/pam_pwdb.so use_first_pass
session required /lib/security/pam_unix_session.so
```
#### **PAM ç®¡ç†é¢†åŸŸ**

è¿™äº›é¢†åŸŸæˆ–ç®¡ç†ç»„åŒ…æ‹¬ **auth**ã€**account**ã€**password** å’Œ **session**ï¼Œæ¯ä¸ªé¢†åŸŸè´Ÿè´£èº«ä»½éªŒè¯å’Œä¼šè¯ç®¡ç†è¿‡ç¨‹çš„ä¸åŒæ–¹é¢ï¼š

* **Auth**ï¼šéªŒè¯ç”¨æˆ·èº«ä»½ï¼Œé€šå¸¸é€šè¿‡æç¤ºè¾“å…¥å¯†ç ã€‚
* **Account**ï¼šå¤„ç†è´¦æˆ·éªŒè¯ï¼Œæ£€æŸ¥å¦‚ç»„æˆå‘˜èµ„æ ¼æˆ–æ—¶é—´é™åˆ¶ç­‰æ¡ä»¶ã€‚
* **Password**ï¼šç®¡ç†å¯†ç æ›´æ–°ï¼ŒåŒ…æ‹¬å¤æ‚æ€§æ£€æŸ¥æˆ–å­—å…¸æ”»å‡»é˜²æŠ¤ã€‚
* **Session**ï¼šç®¡ç†æœåŠ¡ä¼šè¯å¼€å§‹æˆ–ç»“æŸæ—¶çš„æ“ä½œï¼Œå¦‚æŒ‚è½½ç›®å½•æˆ–è®¾ç½®èµ„æºé™åˆ¶ã€‚

#### **PAM æ¨¡å—æ§åˆ¶**

æ§åˆ¶å†³å®šæ¨¡å—å¯¹æˆåŠŸæˆ–å¤±è´¥çš„å“åº”ï¼Œå½±å“æ•´ä½“èº«ä»½éªŒè¯è¿‡ç¨‹ã€‚è¿™äº›åŒ…æ‹¬ï¼š

* **Required**ï¼šå¿…éœ€æ¨¡å—çš„å¤±è´¥æœ€ç»ˆå¯¼è‡´å¤±è´¥ï¼Œä½†ä»…åœ¨æ£€æŸ¥æ‰€æœ‰åç»­æ¨¡å—åã€‚
* **Requisite**ï¼šå¤±è´¥æ—¶ç«‹å³ç»ˆæ­¢è¿‡ç¨‹ã€‚
* **Sufficient**ï¼šæˆåŠŸç»•è¿‡åŒä¸€é¢†åŸŸçš„å…¶ä½™æ£€æŸ¥ï¼Œé™¤éåç»­æ¨¡å—å¤±è´¥ã€‚
* **Optional**ï¼šä»…åœ¨å…¶ä¸ºå †æ ˆä¸­å”¯ä¸€æ¨¡å—æ—¶å¯¼è‡´å¤±è´¥ã€‚

#### ç¤ºä¾‹åœºæ™¯

åœ¨å¤šä¸ª auth æ¨¡å—çš„è®¾ç½®ä¸­ï¼Œè¿‡ç¨‹éµå¾ªä¸¥æ ¼çš„é¡ºåºã€‚å¦‚æœ `pam_securetty` æ¨¡å—å‘ç°ç™»å½•ç»ˆç«¯æœªæˆæƒï¼Œåˆ™é˜»æ­¢ root ç™»å½•ï¼Œä½†ç”±äºå…¶â€œå¿…éœ€â€çŠ¶æ€ï¼Œæ‰€æœ‰æ¨¡å—ä»ä¼šè¢«å¤„ç†ã€‚`pam_env` è®¾ç½®ç¯å¢ƒå˜é‡ï¼Œå¯èƒ½æœ‰åŠ©äºç”¨æˆ·ä½“éªŒã€‚`pam_ldap` å’Œ `pam_unix` æ¨¡å—ååŒå·¥ä½œä»¥éªŒè¯ç”¨æˆ·ï¼Œ`pam_unix` å°è¯•ä½¿ç”¨å…ˆå‰æä¾›çš„å¯†ç ï¼Œä»è€Œæé«˜èº«ä»½éªŒè¯æ–¹æ³•çš„æ•ˆç‡å’Œçµæ´»æ€§ã€‚

### å‚è€ƒæ–‡çŒ®

* [https://hotpotato.tistory.com/434](https://hotpotato.tistory.com/434)

#### [WhiteIntel](https://whiteintel.io)

<figure><img src="../../.gitbook/assets/image (1227).png" alt=""><figcaption></figcaption></figure>

[**WhiteIntel**](https://whiteintel.io) æ˜¯ä¸€ä¸ªç”± **æš—ç½‘** é©±åŠ¨çš„æœç´¢å¼•æ“ï¼Œæä¾› **å…è´¹** åŠŸèƒ½ä»¥æ£€æŸ¥å…¬å¸æˆ–å…¶å®¢æˆ·æ˜¯å¦è¢« **çªƒå–æ¶æ„è½¯ä»¶** **æ³„éœ²**ã€‚

WhiteIntel çš„ä¸»è¦ç›®æ ‡æ˜¯æ‰“å‡»ç”±äºä¿¡æ¯çªƒå–æ¶æ„è½¯ä»¶å¯¼è‡´çš„è´¦æˆ·æ¥ç®¡å’Œå‹’ç´¢è½¯ä»¶æ”»å‡»ã€‚

æ‚¨å¯ä»¥è®¿é—®ä»–ä»¬çš„ç½‘ç«™å¹¶å…è´¹å°è¯•ä»–ä»¬çš„å¼•æ“ï¼š

{% embed url="https://whiteintel.io" %}

{% hint style="success" %}
å­¦ä¹ ä¸å®è·µ AWS é»‘å®¢æŠ€æœ¯ï¼š<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
å­¦ä¹ ä¸å®è·µ GCP é»‘å®¢æŠ€æœ¯ï¼š<img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>æ”¯æŒ HackTricks</summary>

* æŸ¥çœ‹ [**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**ç”µæŠ¥ç¾¤ç»„**](https://t.me/peass) æˆ– **å…³æ³¨** æˆ‘ä»¬çš„ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github ä»“åº“æäº¤ PR æ¥åˆ†äº«é»‘å®¢æŠ€å·§ã€‚

</details>
{% endhint %}
