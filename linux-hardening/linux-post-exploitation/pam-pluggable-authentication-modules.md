# PAM - Pluggable Authentication Modules

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the**  [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter**  [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}


### Podstawowe informacje

**PAM (Pluggable Authentication Modules)** dziaa jako mechanizm zabezpiecze, kt贸ry **weryfikuje to偶samo u偶ytkownik贸w pr贸bujcych uzyska dostp do usug komputerowych**, kontrolujc ich dostp na podstawie r贸偶nych kryteri贸w. Jest to podobne do cyfrowego stra偶nika, kt贸ry zapewnia, 偶e tylko autoryzowani u偶ytkownicy mog korzysta z okrelonych usug, jednoczenie potencjalnie ograniczajc ich u偶ycie, aby zapobiec przeci偶eniu systemu.

#### Pliki konfiguracyjne

* **Systemy Solaris i UNIX** zazwyczaj wykorzystuj centralny plik konfiguracyjny znajdujcy si w `/etc/pam.conf`.
* **Systemy Linux** preferuj podejcie oparte na katalogach, przechowujc konfiguracje specyficzne dla usug w `/etc/pam.d`. Na przykad, plik konfiguracyjny dla usugi logowania znajduje si w `/etc/pam.d/login`.

Przykad konfiguracji PAM dla usugi logowania mo偶e wyglda nastpujco:
```
auth required /lib/security/pam_securetty.so
auth required /lib/security/pam_nologin.so
auth sufficient /lib/security/pam_ldap.so
auth required /lib/security/pam_unix_auth.so try_first_pass
account sufficient /lib/security/pam_ldap.so
account required /lib/security/pam_unix_acct.so
password required /lib/security/pam_cracklib.so
password required /lib/security/pam_ldap.so
password required /lib/security/pam_pwdb.so use_first_pass
session required /lib/security/pam_unix_session.so
```
#### **Zarzdzanie PAM Realmami**

Te realm'y, lub grupy zarzdzania, obejmuj **auth**, **account**, **password** i **session**, z kt贸rych ka偶da odpowiada za r贸偶ne aspekty procesu uwierzytelniania i zarzdzania sesjami:

* **Auth**: Weryfikuje to偶samo u偶ytkownika, czsto proszc o haso.
* **Account**: Obsuguje weryfikacj konta, sprawdzajc warunki takie jak przynale偶no do grupy lub ograniczenia czasowe.
* **Password**: Zarzdza aktualizacjami hase, w tym kontrol zo偶onoci lub zapobieganiem atakom sownikowym.
* **Session**: Zarzdza dziaaniami podczas rozpoczcia lub zakoczenia sesji usugi, takimi jak montowanie katalog贸w lub ustawianie limit贸w zasob贸w.

#### **Kontrola modu贸w PAM**

Kontrole okrelaj reakcj moduu na sukces lub pora偶k, wpywajc na og贸lny proces uwierzytelniania. Nale偶 do nich:

* **Required**: Pora偶ka wymaganego moduu skutkuje ostateczn pora偶k, ale tylko po sprawdzeniu wszystkich kolejnych modu贸w.
* **Requisite**: Natychmiastowe zakoczenie procesu w przypadku pora偶ki.
* **Sufficient**: Sukces omija pozostae kontrole tego samego realm'u, chyba 偶e kolejny modu zawiedzie.
* **Optional**: Powoduje pora偶k tylko wtedy, gdy jest jedynym moduem w stosie.

#### Przykadowy scenariusz

W konfiguracji z wieloma moduami auth, proces przebiega w cisej kolejnoci. Jeli modu `pam_securetty` znajdzie terminal logowania jako nieautoryzowany, logowania roota s zablokowane, jednak wszystkie moduy s nadal przetwarzane z powodu jego statusu "required". Modu `pam_env` ustawia zmienne rodowiskowe, co mo偶e wspiera dowiadczenia u偶ytkownika. Moduy `pam_ldap` i `pam_unix` wsp贸pracuj, aby uwierzytelni u偶ytkownika, przy czym `pam_unix` pr贸buje u偶y wczeniej podanego hasa, co zwiksza efektywno i elastyczno metod uwierzytelniania.

### Referencje

* [https://hotpotato.tistory.com/434](https://hotpotato.tistory.com/434)


{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Wsparcie dla HackTricks</summary>

* Sprawd藕 [**plany subskrypcyjne**](https://github.com/sponsors/carlospolop)!
* **Docz do**  [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegram**](https://t.me/peass) lub **led藕** nas na **Twitterze**  [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Dziel si trikami hackingowymi, przesyajc PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repozytori贸w github.

</details>
{% endhint %}
