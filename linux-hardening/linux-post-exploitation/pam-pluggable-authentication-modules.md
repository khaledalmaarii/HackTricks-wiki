<details>

<summary><strong>ä»é›¶å¼€å§‹å­¦ä¹ AWSé»‘å®¢æŠ€æœ¯ï¼Œæˆä¸ºä¸“å®¶</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTEï¼ˆHackTricks AWSçº¢é˜Ÿä¸“å®¶ï¼‰</strong></a><strong>ï¼</strong></summary>

æ”¯æŒHackTricksçš„å…¶ä»–æ–¹å¼ï¼š

- å¦‚æœæ‚¨æƒ³çœ‹åˆ°æ‚¨çš„**å…¬å¸åœ¨HackTricksä¸­åšå¹¿å‘Š**æˆ–**ä¸‹è½½PDFæ ¼å¼çš„HackTricks**ï¼Œè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
- è·å–[**å®˜æ–¹PEASS & HackTrickså‘¨è¾¹äº§å“**](https://peass.creator-spring.com)
- æ¢ç´¢[**PEASSå®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬çš„ç‹¬å®¶[**NFTs**](https://opensea.io/collection/the-peass-family)
- **åŠ å…¥** ğŸ’¬ [**Discordç¾¤**](https://discord.gg/hRep4RUj7f) æˆ– [**ç”µæŠ¥ç¾¤**](https://t.me/peass) æˆ– **å…³æ³¨**æˆ‘ä»¬çš„**Twitter** ğŸ¦ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**ã€‚**
- é€šè¿‡å‘[**HackTricks**](https://github.com/carlospolop/hacktricks)å’Œ[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) githubä»“åº“æäº¤PRæ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚

</details>


## åŸºæœ¬ä¿¡æ¯

**PAMï¼ˆå¯æ’æ‹”è®¤è¯æ¨¡å—ï¼‰**å……å½“ä¸€ä¸ªå®‰å…¨æœºåˆ¶ï¼Œ**éªŒè¯è¯•å›¾è®¿é—®è®¡ç®—æœºæœåŠ¡çš„ç”¨æˆ·çš„èº«ä»½**ï¼Œæ ¹æ®å„ç§æ ‡å‡†æ§åˆ¶å…¶è®¿é—®ã€‚å®ƒç±»ä¼¼äºæ•°å­—çœ‹é—¨äººï¼Œç¡®ä¿åªæœ‰æˆæƒç”¨æˆ·å¯ä»¥ä¸ç‰¹å®šæœåŠ¡äº’åŠ¨ï¼ŒåŒæ—¶å¯èƒ½é™åˆ¶å…¶ä½¿ç”¨ä»¥é˜²æ­¢ç³»ç»Ÿè¶…è½½ã€‚

### é…ç½®æ–‡ä»¶

- **Solariså’ŒåŸºäºUNIXçš„ç³»ç»Ÿ**é€šå¸¸ä½¿ç”¨ä½äº`/etc/pam.conf`çš„ä¸­å¤®é…ç½®æ–‡ä»¶ã€‚
- **Linuxç³»ç»Ÿ**æ›´å€¾å‘äºé‡‡ç”¨ç›®å½•æ–¹å¼ï¼Œå°†ç‰¹å®šäºæœåŠ¡çš„é…ç½®å­˜å‚¨åœ¨`/etc/pam.d`ä¸­ã€‚ä¾‹å¦‚ï¼Œç™»å½•æœåŠ¡çš„é…ç½®æ–‡ä»¶ä½äº`/etc/pam.d/login`ã€‚

ç™»å½•æœåŠ¡çš„PAMé…ç½®ç¤ºä¾‹å¯èƒ½å¦‚ä¸‹æ‰€ç¤ºï¼š
```text
auth required /lib/security/pam_securetty.so
auth required /lib/security/pam_nologin.so
auth sufficient /lib/security/pam_ldap.so
auth required /lib/security/pam_unix_auth.so try_first_pass
account sufficient /lib/security/pam_ldap.so
account required /lib/security/pam_unix_acct.so
password required /lib/security/pam_cracklib.so
password required /lib/security/pam_ldap.so
password required /lib/security/pam_pwdb.so use_first_pass
session required /lib/security/pam_unix_session.so
```
### **PAMç®¡ç†é¢†åŸŸ**

è¿™äº›é¢†åŸŸæˆ–ç®¡ç†ç»„åŒ…æ‹¬**auth**ï¼Œ**account**ï¼Œ**password**å’Œ**session**ï¼Œæ¯ä¸ªè´Ÿè´£è®¤è¯å’Œä¼šè¯ç®¡ç†è¿‡ç¨‹çš„ä¸åŒæ–¹é¢ï¼š

- **Auth**ï¼šéªŒè¯ç”¨æˆ·èº«ä»½ï¼Œé€šå¸¸é€šè¿‡æç¤ºè¾“å…¥å¯†ç ã€‚
- **Account**ï¼šå¤„ç†è´¦æˆ·éªŒè¯ï¼Œæ£€æŸ¥è¯¸å¦‚ç»„æˆå‘˜èµ„æ ¼æˆ–æ—¶é—´é™åˆ¶ç­‰æ¡ä»¶ã€‚
- **Password**ï¼šç®¡ç†å¯†ç æ›´æ–°ï¼ŒåŒ…æ‹¬å¤æ‚æ€§æ£€æŸ¥æˆ–é˜²æ­¢å­—å…¸æ”»å‡»ã€‚
- **Session**ï¼šç®¡ç†æœåŠ¡ä¼šè¯å¼€å§‹æˆ–ç»“æŸæœŸé—´çš„æ“ä½œï¼Œä¾‹å¦‚æŒ‚è½½ç›®å½•æˆ–è®¾ç½®èµ„æºé™åˆ¶ã€‚

### **PAMæ¨¡å—æ§åˆ¶**

æ§åˆ¶æŒ‡å¯¼æ¨¡å—å¯¹æˆåŠŸæˆ–å¤±è´¥çš„å“åº”ï¼Œå½±å“æ•´ä¸ªè®¤è¯è¿‡ç¨‹ã€‚è¿™äº›åŒ…æ‹¬ï¼š

- **Required**ï¼šå¿…éœ€æ¨¡å—å¤±è´¥ä¼šå¯¼è‡´æœ€ç»ˆå¤±è´¥ï¼Œä½†åªæœ‰åœ¨æ£€æŸ¥æ‰€æœ‰åç»­æ¨¡å—åæ‰ä¼šå¤±è´¥ã€‚
- **Requisite**ï¼šå¤±è´¥æ—¶ç«‹å³ç»ˆæ­¢è¿›ç¨‹ã€‚
- **Sufficient**ï¼šæˆåŠŸä¼šç»•è¿‡åŒä¸€é¢†åŸŸçš„å…¶ä½™æ£€æŸ¥ï¼Œé™¤éåç»­æ¨¡å—å¤±è´¥ã€‚
- **Optional**ï¼šä»…åœ¨å †æ ˆä¸­æ˜¯å”¯ä¸€æ¨¡å—æ—¶æ‰ä¼šå¯¼è‡´å¤±è´¥ã€‚

### ç¤ºä¾‹åœºæ™¯

åœ¨å…·æœ‰å¤šä¸ªauthæ¨¡å—çš„è®¾ç½®ä¸­ï¼Œæµç¨‹éµå¾ªä¸¥æ ¼é¡ºåºã€‚å¦‚æœ`pam_securetty`æ¨¡å—å‘ç°ç™»å½•ç»ˆç«¯æœªç»æˆæƒï¼Œåˆ™ä¼šé˜»æ­¢rootç™»å½•ï¼Œä½†ç”±äºå…¶â€œrequiredâ€çŠ¶æ€ï¼Œæ‰€æœ‰æ¨¡å—ä»ä¼šè¢«å¤„ç†ã€‚`pam_env`è®¾ç½®ç¯å¢ƒå˜é‡ï¼Œå¯èƒ½æœ‰åŠ©äºç”¨æˆ·ä½“éªŒã€‚`pam_ldap`å’Œ`pam_unix`æ¨¡å—å…±åŒå·¥ä½œä»¥å¯¹ç”¨æˆ·è¿›è¡Œèº«ä»½éªŒè¯ï¼Œå…¶ä¸­`pam_unix`å°è¯•ä½¿ç”¨å…ˆå‰æä¾›çš„å¯†ç ï¼Œå¢å¼ºäº†è®¤è¯æ–¹æ³•çš„æ•ˆç‡å’Œçµæ´»æ€§ã€‚

# å‚è€ƒèµ„æ–™
* [https://hotpotato.tistory.com/434](https://hotpotato.tistory.com/434)
