# macOS ã‚«ãƒ¼ãƒãƒ« & ã‚·ã‚¹ãƒ†ãƒ æ‹¡å¼µæ©Ÿèƒ½

{% hint style="success" %}
AWSãƒãƒƒã‚­ãƒ³ã‚°ã®å­¦ç¿’ã¨å®Ÿè·µ:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
GCPãƒãƒƒã‚­ãƒ³ã‚°ã®å­¦ç¿’ã¨å®Ÿè·µ: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricksã®ã‚µãƒãƒ¼ãƒˆ</summary>

* [**ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ãƒ—ãƒ©ãƒ³**](https://github.com/sponsors/carlospolop)ã‚’ãƒã‚§ãƒƒã‚¯ï¼
* ğŸ’¬ [**Discordã‚°ãƒ«ãƒ¼ãƒ—**](https://discord.gg/hRep4RUj7f)ã«å‚åŠ ã™ã‚‹ã‹ã€[**telegramã‚°ãƒ«ãƒ¼ãƒ—**](https://t.me/peass)ã«å‚åŠ ã™ã‚‹ã‹ã€**Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**ã‚’ãƒ•ã‚©ãƒ­ãƒ¼**ã—ã¦ãã ã•ã„ã€‚
* **HackTricks**ã¨[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)ã®GitHubãƒªãƒã‚¸ãƒˆãƒªã«PRã‚’æå‡ºã—ã¦ã€ãƒãƒƒã‚­ãƒ³ã‚°ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ã‚’å…±æœ‰ã—ã¦ãã ã•ã„ã€‚

</details>
{% endhint %}

## XNU ã‚«ãƒ¼ãƒãƒ«

**macOSã®ã‚³ã‚¢ã¯XNU**ã§ã‚ã‚Šã€ã€ŒX is Not Unixã€ã®ç•¥ã§ã™ã€‚ã“ã®ã‚«ãƒ¼ãƒãƒ«ã¯åŸºæœ¬çš„ã«**Machãƒã‚¤ã‚¯ãƒ­ã‚«ãƒ¼ãƒãƒ«**ï¼ˆå¾Œè¿°ã—ã¾ã™ï¼‰ã¨**Berkeley Software Distributionï¼ˆBSDï¼‰**ã®è¦ç´ ã‹ã‚‰æ§‹æˆã•ã‚Œã¦ã„ã¾ã™ã€‚XNUã¯ã¾ãŸã€**I/O Kitã¨ã„ã†ã‚·ã‚¹ãƒ†ãƒ ã‚’ä»‹ã—ã¦ã‚«ãƒ¼ãƒãƒ«ãƒ‰ãƒ©ã‚¤ãƒã‚’æä¾›**ã—ã¾ã™ã€‚XNUã‚«ãƒ¼ãƒãƒ«ã¯Darwinã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä¸€éƒ¨ã§ã‚ã‚Šã€**ãã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã¯è‡ªç”±ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™**ã€‚

ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç ”ç©¶è€…ã‚„Unixé–‹ç™ºè€…ã®è¦³ç‚¹ã‹ã‚‰è¦‹ã‚‹ã¨ã€**macOS**ã¯ã€ã‚¨ãƒ¬ã‚¬ãƒ³ãƒˆãªGUIã¨å¤šãã®ã‚«ã‚¹ã‚¿ãƒ ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å‚™ãˆãŸ**FreeBSD**ã‚·ã‚¹ãƒ†ãƒ ã«ã‹ãªã‚Š**ä¼¼ã¦**ã„ã‚‹ã¨æ„Ÿã˜ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚BSDå‘ã‘ã«é–‹ç™ºã•ã‚ŒãŸã»ã¨ã‚“ã©ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¯ã€Unixãƒ¦ãƒ¼ã‚¶ã«ã¨ã£ã¦é¦´æŸ“ã¿ã®ã‚ã‚‹ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ãƒ„ãƒ¼ãƒ«ãŒmacOSã«ã™ã¹ã¦å‚™ã‚ã£ã¦ã„ã‚‹ãŸã‚ã€ä¿®æ­£ã‚’åŠ ãˆã‚‹ã“ã¨ãªãmacOSã§ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ãŠã‚ˆã³å®Ÿè¡Œã§ãã¾ã™ã€‚ãŸã ã—ã€XNUã‚«ãƒ¼ãƒãƒ«ã«ã¯MachãŒçµ„ã¿è¾¼ã¾ã‚Œã¦ã„ã‚‹ãŸã‚ã€å¾“æ¥ã®Unixãƒ©ã‚¤ã‚¯ãªã‚·ã‚¹ãƒ†ãƒ ã¨macOSã®é–“ã«ã¯ã„ãã¤ã‹ã®é‡è¦ãªé•ã„ãŒã‚ã‚Šã€ã“ã‚Œã‚‰ã®é•ã„ã¯æ½œåœ¨çš„ãªå•é¡Œã‚’å¼•ãèµ·ã“ã™ã‹ã€ç‹¬è‡ªã®åˆ©ç‚¹ã‚’æä¾›ã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚

XNUã®ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ãƒãƒ¼ã‚¸ãƒ§ãƒ³: [https://opensource.apple.com/source/xnu/](https://opensource.apple.com/source/xnu/)

### Mach

Machã¯**UNIXäº’æ›ã®ãƒã‚¤ã‚¯ãƒ­ã‚«ãƒ¼ãƒãƒ«**ã§ã‚ã‚Šã€ãã®ä¸»è¦ãªè¨­è¨ˆåŸå‰‡ã®1ã¤ã¯ã€**ã‚«ãƒ¼ãƒãƒ«ã‚¹ãƒšãƒ¼ã‚¹ã§å®Ÿè¡Œã•ã‚Œã‚‹ã‚³ãƒ¼ãƒ‰ã®é‡ã‚’æœ€å°é™ã«æŠ‘ãˆã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚­ãƒ³ã‚°ã€I/Oãªã©ã®å¤šãã®å…¸å‹çš„ãªã‚«ãƒ¼ãƒãƒ«æ©Ÿèƒ½ã‚’ãƒ¦ãƒ¼ã‚¶ãƒ¬ãƒ™ãƒ«ã®ã‚¿ã‚¹ã‚¯ã¨ã—ã¦å®Ÿè¡Œ**ã™ã‚‹ã“ã¨ã§ã™ã€‚

XNUã§ã¯ã€Machã¯**ãƒ—ãƒ­ã‚»ãƒƒã‚µã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒªãƒ³ã‚°ã€ãƒãƒ«ãƒã‚¿ã‚¹ã‚­ãƒ³ã‚°ã€ãŠã‚ˆã³ä»®æƒ³ãƒ¡ãƒ¢ãƒªç®¡ç†**ãªã©ã€é€šå¸¸ã‚«ãƒ¼ãƒãƒ«ãŒå‡¦ç†ã™ã‚‹å¤šãã®é‡è¦ãªä½ãƒ¬ãƒ™ãƒ«æ“ä½œã‚’æ‹…å½“ã—ã¦ã„ã¾ã™ã€‚

### BSD

XNU **ã‚«ãƒ¼ãƒãƒ«**ã¯ã¾ãŸã€**FreeBSD**ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‹ã‚‰æ´¾ç”Ÿã—ãŸã‚³ãƒ¼ãƒ‰ã®ã‹ãªã‚Šã®é‡ã‚’**çµ„ã¿è¾¼ã‚“ã§**ã„ã¾ã™ã€‚ã“ã®ã‚³ãƒ¼ãƒ‰ã¯ã€**Machã¨åŒã˜ã‚¢ãƒ‰ãƒ¬ã‚¹ç©ºé–“å†…ã§ã‚«ãƒ¼ãƒãƒ«ã®ä¸€éƒ¨ã¨ã—ã¦å®Ÿè¡Œ**ã•ã‚Œã¾ã™ã€‚ãŸã ã—ã€XNUå†…ã®FreeBSDã‚³ãƒ¼ãƒ‰ã¯ã€Machã¨ã®äº’æ›æ€§ã‚’ç¢ºä¿ã™ã‚‹ãŸã‚ã«å¤‰æ›´ãŒå¿…è¦ã§ã‚ã‚‹ãŸã‚ã€å…ƒã®FreeBSDã‚³ãƒ¼ãƒ‰ã¨ã¯å¤§ããç•°ãªã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚ FreeBSDã¯ã€æ¬¡ã®ã‚ˆã†ãªå¤šãã®ã‚«ãƒ¼ãƒãƒ«æ“ä½œã«è²¢çŒ®ã—ã¦ã„ã¾ã™ï¼š

* ãƒ—ãƒ­ã‚»ã‚¹ç®¡ç†
* ã‚·ã‚°ãƒŠãƒ«å‡¦ç†
* ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŠã‚ˆã³ã‚°ãƒ«ãƒ¼ãƒ—ç®¡ç†ã‚’å«ã‚€åŸºæœ¬çš„ãªã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ¡ã‚«ãƒ‹ã‚ºãƒ 
* ã‚·ã‚¹ãƒ†ãƒ ã‚³ãƒ¼ãƒ«ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£
* TCP/IPã‚¹ã‚¿ãƒƒã‚¯ãŠã‚ˆã³ã‚½ã‚±ãƒƒãƒˆ
* ãƒ•ã‚¡ã‚¤ã‚¢ã‚¦ã‚©ãƒ¼ãƒ«ãŠã‚ˆã³ãƒ‘ã‚±ãƒƒãƒˆãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°

BSDã¨Machã®ç›¸äº’ä½œç”¨ã‚’ç†è§£ã™ã‚‹ã“ã¨ã¯è¤‡é›‘ã§ã‚ã‚Šã€ãã‚Œãã‚Œç•°ãªã‚‹æ¦‚å¿µãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚’æŒã£ã¦ã„ã‚‹ãŸã‚ã§ã™ã€‚ãŸã¨ãˆã°ã€BSDã¯ãƒ—ãƒ­ã‚»ã‚¹ã‚’åŸºæœ¬çš„ãªå®Ÿè¡Œå˜ä½ã¨ã—ã¦ä½¿ç”¨ã—ã¾ã™ãŒã€Machã¯ã‚¹ãƒ¬ãƒƒãƒ‰ã«åŸºã¥ã„ã¦å‹•ä½œã—ã¾ã™ã€‚ã“ã®ç›¸é•ã¯ã€XNUã«ãŠã„ã¦ã€**å„BSDãƒ—ãƒ­ã‚»ã‚¹ã‚’1ã¤ã®Machã‚¹ãƒ¬ãƒƒãƒ‰ã‚’å«ã‚€Machã‚¿ã‚¹ã‚¯ã«é–¢é€£ä»˜ã‘ã‚‹**ã“ã¨ã§èª¿æ•´ã•ã‚Œã¾ã™ã€‚BSDã®fork()ã‚·ã‚¹ãƒ†ãƒ ã‚³ãƒ¼ãƒ«ãŒä½¿ç”¨ã•ã‚Œã‚‹ã¨ã€ã‚«ãƒ¼ãƒãƒ«å†…ã®BSDã‚³ãƒ¼ãƒ‰ã¯ã€ã‚¿ã‚¹ã‚¯ã¨ã‚¹ãƒ¬ãƒƒãƒ‰æ§‹é€ ã‚’ä½œæˆã™ã‚‹ãŸã‚ã«Maché–¢æ•°ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

ã•ã‚‰ã«ã€**Machã¨BSDã¯ãã‚Œãã‚Œç•°ãªã‚‹ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ¢ãƒ‡ãƒ«ã‚’ç¶­æŒ**ã—ã¦ã„ã¾ã™ï¼š**Mach**ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ¢ãƒ‡ãƒ«ã¯**ãƒãƒ¼ãƒˆæ¨©é™**ã«åŸºã¥ã„ã¦ãŠã‚Šã€ä¸€æ–¹ã€BSDã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ¢ãƒ‡ãƒ«ã¯**ãƒ—ãƒ­ã‚»ã‚¹æ‰€æœ‰æ¨©**ã«åŸºã¥ã„ã¦å‹•ä½œã—ã¾ã™ã€‚ã“ã‚Œã‚‰2ã¤ã®ãƒ¢ãƒ‡ãƒ«ã®ç›¸é•ã¯ã€å ´åˆã«ã‚ˆã£ã¦ã¯ãƒ­ãƒ¼ã‚«ãƒ«ç‰¹æ¨©æ˜‡æ ¼ã®è„†å¼±æ€§ã‚’å¼•ãèµ·ã“ã™ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚å…¸å‹çš„ãªã‚·ã‚¹ãƒ†ãƒ ã‚³ãƒ¼ãƒ«ã«åŠ ãˆã¦ã€**ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¹ãƒšãƒ¼ã‚¹ãƒ—ãƒ­ã‚°ãƒ©ãƒ ãŒã‚«ãƒ¼ãƒãƒ«ã¨ã‚„ã‚Šå–ã‚Šã™ã‚‹ãŸã‚ã®Machãƒˆãƒ©ãƒƒãƒ—**ã‚‚å­˜åœ¨ã—ã¾ã™ã€‚ã“ã‚Œã‚‰ã®ç•°ãªã‚‹è¦ç´ ãŒçµ„ã¿åˆã‚ã•ã‚Šã€macOSã‚«ãƒ¼ãƒãƒ«ã®å¤šé¢çš„ã§ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ãªã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚’å½¢æˆã—ã¦ã„ã¾ã™ã€‚

### I/O Kit - ãƒ‰ãƒ©ã‚¤ãƒãƒ¼

I/O Kitã¯XNUã‚«ãƒ¼ãƒãƒ«å†…ã®ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘**ãƒ‡ãƒã‚¤ã‚¹ãƒ‰ãƒ©ã‚¤ãƒãƒ¼ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯**ã§ã‚ã‚Šã€**å‹•çš„ã«ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã‚‹ãƒ‡ãƒã‚¤ã‚¹ãƒ‰ãƒ©ã‚¤ãƒ**ã‚’å‡¦ç†ã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€å¤šæ§˜ãªãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ãŸã‚ã«ã€ã‚«ãƒ¼ãƒãƒ«ã«ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åŒ–ã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰ã‚’å³åº§ã«è¿½åŠ ã§ãã¾ã™ã€‚

{% content-ref url="macos-iokit.md" %}
[macos-iokit.md](macos-iokit.md)
{% endcontent-ref %}

### IPC - ãƒ—ãƒ­ã‚»ã‚¹é–“é€šä¿¡

{% content-ref url="../macos-proces-abuse/macos-ipc-inter-process-communication/" %}
[macos-ipc-inter-process-communication](../macos-proces-abuse/macos-ipc-inter-process-communication/)
{% endcontent-ref %}

### ã‚«ãƒ¼ãƒãƒ«ã‚­ãƒ£ãƒƒã‚·ãƒ¥

**ã‚«ãƒ¼ãƒãƒ«ã‚­ãƒ£ãƒƒã‚·ãƒ¥**ã¯ã€XNUã‚«ãƒ¼ãƒãƒ«ã®**äº‹å‰ã«ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ãŠã‚ˆã³ãƒªãƒ³ã‚¯ã•ã‚ŒãŸãƒãƒ¼ã‚¸ãƒ§ãƒ³**ã¨ã€å¿…é ˆã®ãƒ‡ãƒã‚¤ã‚¹**ãƒ‰ãƒ©ã‚¤ãƒãƒ¼**ãŠã‚ˆã³**ã‚«ãƒ¼ãƒãƒ«æ‹¡å¼µæ©Ÿèƒ½**ã‚’å«ã‚“ã§ã„ã¾ã™ã€‚ã“ã‚Œã¯**åœ§ç¸®**å½¢å¼ã§ä¿å­˜ã•ã‚Œã€èµ·å‹•ãƒ—ãƒ­ã‚»ã‚¹ä¸­ã«ãƒ¡ãƒ¢ãƒªã«å±•é–‹ã•ã‚Œã¾ã™ã€‚ã‚«ãƒ¼ãƒãƒ«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã«ã‚ˆã‚Šã€ã‚«ãƒ¼ãƒãƒ«ã¨é‡è¦ãªãƒ‰ãƒ©ã‚¤ãƒãƒ¼ã®æº–å‚™å®Œäº†ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒåˆ©ç”¨å¯èƒ½ã«ãªã‚‹ãŸã‚ã€èµ·å‹•æ™‚ã«ã“ã‚Œã‚‰ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’å‹•çš„ã«ãƒ­ãƒ¼ãƒ‰ãŠã‚ˆã³ãƒªãƒ³ã‚¯ã™ã‚‹ãŸã‚ã«è²»ã‚„ã•ã‚Œã‚‹æ™‚é–“ã¨ãƒªã‚½ãƒ¼ã‚¹ãŒå‰Šæ¸›ã•ã‚Œã€**ã‚ˆã‚Šé«˜é€Ÿãªèµ·å‹•æ™‚é–“**ãŒå®Ÿç¾ã•ã‚Œã¾ã™ã€‚

iOSã§ã¯ã€**`/System/Library/Caches/com.apple.kernelcaches/kernelcache`**ã«ã‚ã‚Šã€macOSã§ã¯**`find / -name kernelcache 2>/dev/null`**ã¾ãŸã¯**`mdfind kernelcache | grep kernelcache`**ã§è¦‹ã¤ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

**`kextstat`**ã‚’å®Ÿè¡Œã—ã¦ã€ãƒ­ãƒ¼ãƒ‰ã•ã‚ŒãŸã‚«ãƒ¼ãƒãƒ«æ‹¡å¼µæ©Ÿèƒ½ã‚’ç¢ºèªã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

#### IMG4

IMG4ãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼ã¯ã€AppleãŒiOSãŠã‚ˆã³macOSãƒ‡ãƒã‚¤ã‚¹ã§ä½¿ç”¨ã™ã‚‹**ãƒ•ã‚¡ãƒ¼ãƒ ã‚¦ã‚§ã‚¢ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆã‚«ãƒ¼ãƒãƒ«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãªã©ï¼‰ã‚’å®‰å…¨ã«**ä¿å­˜ãŠã‚ˆã³æ¤œè¨¼ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã‚‹ã‚³ãƒ³ãƒ†ãƒŠå½¢å¼ã§ã™ã€‚IMG4å½¢å¼ã«ã¯ã€ãƒ˜ãƒƒãƒ€ãƒ¼ã¨è¤‡æ•°ã®ã‚¿ã‚°ãŒå«ã¾ã‚Œã¦ãŠã‚Šã€å®Ÿéš›ã®ãƒšã‚¤ãƒ­ãƒ¼ãƒ‰ï¼ˆã‚«ãƒ¼ãƒãƒ«ã‚„ãƒ–ãƒ¼ãƒˆãƒ­ãƒ¼ãƒ€ãƒ¼ãªã©ï¼‰ã€ç½²åã€ãŠã‚ˆã³ä¸€é€£ã®ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ã‚«ãƒ—ã‚»ãƒ«åŒ–ã—ã¦ã„ã¾ã™ã€‚ã“ã®å½¢å¼ã¯æš—å·çš„ãªæ¤œè¨¼ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ãŠã‚Šã€ãƒ‡ãƒã‚¤ã‚¹ãŒãƒ•ã‚¡ãƒ¼ãƒ ã‚¦ã‚§ã‚¢ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çœŸæ­£æ€§ã¨æ•´åˆæ€§ã‚’å®Ÿè¡Œã™ã‚‹å‰ã«ç¢ºèªã§ãã¾ã™ã€‚

é€šå¸¸ã€ä»¥ä¸‹ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§æ§‹æˆã•ã‚Œã¦ã„ã¾ã™ï¼š

* **ãƒšã‚¤ãƒ­ãƒ¼ãƒ‰ï¼ˆIM4Pï¼‰**ï¼š
* ã—ã°ã—ã°åœ§ç¸®ã•ã‚Œã¦ã„ã¾ã™ï¼ˆLZFSE4ã€LZSSãªã©ï¼‰
* ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§æš—å·åŒ–ã•ã‚Œã¦ã„ã¾ã™
* **ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆï¼ˆIM4Mï¼‰**ï¼š
* ç½²åã‚’å«ã‚€
* è¿½åŠ ã®ã‚­ãƒ¼/å€¤ã®è¾æ›¸
* **ãƒªã‚¹ãƒˆã‚¢æƒ…å ±ï¼ˆIM4Rï¼‰**ï¼š
* APNonceã¨ã—ã¦ã‚‚çŸ¥ã‚‰ã‚Œã¦ã„ã¾ã™
* ä¸€éƒ¨ã®æ›´æ–°ã®å†ç”Ÿã‚’é˜²æ­¢ã—ã¾ã™
* ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼šé€šå¸¸ã€ã“ã‚Œã¯è¦‹ã¤ã‹ã‚Šã¾ã›ã‚“

ã‚«ãƒ¼ãƒãƒ«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’å±•é–‹ã™ã‚‹:
```bash
# pyimg4 (https://github.com/m1stadev/PyIMG4)
pyimg4 im4p extract -i kernelcache.release.iphone14 -o kernelcache.release.iphone14.e

# img4tool (https://github.com/tihmstar/img4tool
img4tool -e kernelcache.release.iphone14 -o kernelcache.release.iphone14.e
```
#### ã‚«ãƒ¼ãƒãƒ«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚·ãƒ³ãƒœãƒ«

æ™‚ã€…ã€Appleã¯**ã‚·ãƒ³ãƒœãƒ«**ä»˜ãã®**ã‚«ãƒ¼ãƒãƒ«ã‚­ãƒ£ãƒƒã‚·ãƒ¥**ã‚’ãƒªãƒªãƒ¼ã‚¹ã—ã¾ã™ã€‚[https://theapplewiki.com](https://theapplewiki.com/)ã®ãƒªãƒ³ã‚¯ã‚’ãŸã©ã‚‹ã“ã¨ã§ã€ã„ãã¤ã‹ã®ãƒ•ã‚¡ãƒ¼ãƒ ã‚¦ã‚§ã‚¢ã«ã‚·ãƒ³ãƒœãƒ«ãŒä»˜ã„ãŸã‚‚ã®ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã§ãã¾ã™ã€‚

### IPSW

ã“ã‚Œã‚‰ã¯Appleã®**ãƒ•ã‚¡ãƒ¼ãƒ ã‚¦ã‚§ã‚¢**ã§ã€[**https://ipsw.me/**](https://ipsw.me/)ã‹ã‚‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã§ãã¾ã™ã€‚ä»–ã®ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸­ã«ã¯**ã‚«ãƒ¼ãƒãƒ«ã‚­ãƒ£ãƒƒã‚·ãƒ¥**ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚\
ãƒ•ã‚¡ã‚¤ãƒ«ã‚’**æŠ½å‡º**ã™ã‚‹ã«ã¯ã€å˜ã«**è§£å‡**ã™ã‚‹ã ã‘ã§ã™ã€‚

ãƒ•ã‚¡ãƒ¼ãƒ ã‚¦ã‚§ã‚¢ã‚’æŠ½å‡ºã—ãŸå¾Œã€æ¬¡ã®ã‚ˆã†ãªãƒ•ã‚¡ã‚¤ãƒ«ãŒå¾—ã‚‰ã‚Œã¾ã™: **`kernelcache.release.iphone14`**ã€‚ã“ã‚Œã¯**IMG4**å½¢å¼ã§ã€æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã§èˆˆå‘³æ·±ã„æƒ…å ±ã‚’æŠ½å‡ºã§ãã¾ã™:

* [**pyimg4**](https://github.com/m1stadev/PyIMG4)

{% code overflow="wrap" %}
```bash
pyimg4 im4p extract -i kernelcache.release.iphone14 -o kernelcache.release.iphone14.e
```
{% endcode %}

* [**img4tool**](https://github.com/tihmstar/img4tool)
```bash
img4tool -e kernelcache.release.iphone14 -o kernelcache.release.iphone14.e
```
ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã—ã¦ã€æŠ½å‡ºã•ã‚ŒãŸkernelcacheã®ã‚·ãƒ³ãƒœãƒ«ã‚’ç¢ºèªã§ãã¾ã™: **`nm -a kernelcache.release.iphone14.e | wc -l`**

ã“ã‚Œã«ã‚ˆã‚Šã€**ã™ã¹ã¦ã®æ‹¡å¼µæ©Ÿèƒ½**ã¾ãŸã¯**èˆˆå‘³ã‚’æŒã£ã¦ã„ã‚‹1ã¤**ã‚’æŠ½å‡ºã§ãã¾ã™:
```bash
# List all extensions
kextex -l kernelcache.release.iphone14.e
## Extract com.apple.security.sandbox
kextex -e com.apple.security.sandbox kernelcache.release.iphone14.e

# Extract all
kextex_all kernelcache.release.iphone14.e

# Check the extension for symbols
nm -a binaries/com.apple.security.sandbox | wc -l
```
## macOSã‚«ãƒ¼ãƒãƒ«æ‹¡å¼µæ©Ÿèƒ½

macOSã¯**ã‚«ãƒ¼ãƒãƒ«æ‹¡å¼µæ©Ÿèƒ½ï¼ˆ.kextï¼‰ã‚’ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã“ã¨ã«éå¸¸ã«åˆ¶é™çš„**ã§ã‚ã‚Šã€ãã®ã‚³ãƒ¼ãƒ‰ãŒå®Ÿè¡Œã•ã‚Œã‚‹é«˜ã„ç‰¹æ¨©ã®ãŸã‚ã§ã™ã€‚å®Ÿéš›ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ã»ã¼ä¸å¯èƒ½ã§ã™ï¼ˆãƒã‚¤ãƒ‘ã‚¹ãŒè¦‹ã¤ã‹ã‚‹é™ã‚Šï¼‰ã€‚

{% content-ref url="macos-kernel-extensions.md" %}
[macos-kernel-extensions.md](macos-kernel-extensions.md)
{% endcontent-ref %}

### macOSã‚·ã‚¹ãƒ†ãƒ æ‹¡å¼µæ©Ÿèƒ½

macOSã¯ã‚«ãƒ¼ãƒãƒ«æ‹¡å¼µæ©Ÿèƒ½ã®ä»£ã‚ã‚Šã«ã‚·ã‚¹ãƒ†ãƒ æ‹¡å¼µæ©Ÿèƒ½ã‚’ä½œæˆã—ã¾ã—ãŸã€‚ã“ã‚Œã«ã‚ˆã‚Šã€é–‹ç™ºè€…ã¯ã‚«ãƒ¼ãƒãƒ«æ‹¡å¼µæ©Ÿèƒ½ã‚’ä½¿ç”¨ã™ã‚‹å¿…è¦ãŒãªããªã‚Šã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¬ãƒ™ãƒ«ã®APIã‚’ä»‹ã—ã¦ã‚«ãƒ¼ãƒãƒ«ã¨ã‚„ã‚Šå–ã‚Šã§ãã¾ã™ã€‚

{% content-ref url="macos-system-extensions.md" %}
[macos-system-extensions.md](macos-system-extensions.md)
{% endcontent-ref %}

## å‚è€ƒæ–‡çŒ®

* [**The Mac Hacker's Handbook**](https://www.amazon.com/-/es/Charlie-Miller-ebook-dp-B004U7MUMU/dp/B004U7MUMU/ref=mt\_other?\_encoding=UTF8\&me=\&qid=)
* [**https://taomm.org/vol1/analysis.html**](https://taomm.org/vol1/analysis.html)

{% hint style="success" %}
AWSãƒãƒƒã‚­ãƒ³ã‚°ã®å­¦ç¿’ã¨å®Ÿè·µï¼š<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
GCPãƒãƒƒã‚­ãƒ³ã‚°ã®å­¦ç¿’ã¨å®Ÿè·µï¼š<img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricksã®ã‚µãƒãƒ¼ãƒˆ</summary>

* [**ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ãƒ—ãƒ©ãƒ³**](https://github.com/sponsors/carlospolop)ã‚’ãƒã‚§ãƒƒã‚¯ï¼
* ğŸ’¬ [**Discordã‚°ãƒ«ãƒ¼ãƒ—**](https://discord.gg/hRep4RUj7f)ã«å‚åŠ ã™ã‚‹ã‹ã€[**telegramã‚°ãƒ«ãƒ¼ãƒ—**](https://t.me/peass)ã«å‚åŠ ã™ã‚‹ã‹ã€**Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)ã‚’ãƒ•ã‚©ãƒ­ãƒ¼ã™ã‚‹ã€‚
* ãƒãƒƒã‚­ãƒ³ã‚°ãƒˆãƒªãƒƒã‚¯ã‚’å…±æœ‰ã™ã‚‹ãŸã‚ã«ã€[**HackTricks**](https://github.com/carlospolop/hacktricks)ã¨[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)ã®GitHubãƒªãƒã‚¸ãƒˆãƒªã«PRã‚’æå‡ºã™ã‚‹ã€‚

</details>
{% endhint %}
