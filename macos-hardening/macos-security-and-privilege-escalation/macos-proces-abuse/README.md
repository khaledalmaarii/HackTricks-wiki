# macOS í”„ë¡œì„¸ìŠ¤ ë‚¨ìš©

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)ë¡œë¶€í„° AWS í•´í‚¹ì„ ì²˜ìŒë¶€í„° ì „ë¬¸ê°€ê¹Œì§€ ë°°ìš°ì„¸ìš”</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

HackTricksë¥¼ ì§€ì›í•˜ëŠ” ë‹¤ë¥¸ ë°©ë²•:

* **íšŒì‚¬ê°€ HackTricksì— ê´‘ê³ ë˜ê¸¸ ì›í•˜ê±°ë‚˜ HackTricksë¥¼ PDFë¡œ ë‹¤ìš´ë¡œë“œí•˜ê¸¸ ì›í•œë‹¤ë©´** [**êµ¬ë… ìš”ê¸ˆì œ**](https://github.com/sponsors/carlospolop)ë¥¼ í™•ì¸í•˜ì„¸ìš”!
* [**ê³µì‹ PEASS & HackTricks êµ¿ì¦ˆ**](https://peass.creator-spring.com)ë¥¼ êµ¬ë§¤í•˜ì„¸ìš”
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ë¥¼ ë°œê²¬í•˜ì„¸ìš”, ë‹¹ì‚¬ì˜ ë…ì  [**NFTs**](https://opensea.io/collection/the-peass-family) ì»¬ë ‰ì…˜
* **ğŸ’¬ [ë””ìŠ¤ì½”ë“œ ê·¸ë£¹](https://discord.gg/hRep4RUj7f)** ë˜ëŠ” [í…”ë ˆê·¸ë¨ ê·¸ë£¹](https://t.me/peass)ì— **ê°€ì…**í•˜ê±°ë‚˜ **íŠ¸ìœ„í„°** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks\_live)ì„ **íŒ”ë¡œìš°**í•˜ì„¸ìš”.
* **í•´í‚¹ ìš”ë ¹ì„ ê³µìœ í•˜ë ¤ë©´** [**HackTricks**](https://github.com/carlospolop/hacktricks) ë° [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github ì €ì¥ì†Œë¡œ PRì„ ì œì¶œí•˜ì„¸ìš”.

</details>

## í”„ë¡œì„¸ìŠ¤ ê¸°ë³¸ ì •ë³´

í”„ë¡œì„¸ìŠ¤ëŠ” ì‹¤í–‰ ì¤‘ì¸ ì‹¤í–‰ íŒŒì¼ì˜ ì¸ìŠ¤í„´ìŠ¤ì´ì§€ë§Œ, í”„ë¡œì„¸ìŠ¤ëŠ” ì½”ë“œë¥¼ ì‹¤í–‰í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì´ë“¤ì€ ìŠ¤ë ˆë“œì…ë‹ˆë‹¤. ë”°ë¼ì„œ **í”„ë¡œì„¸ìŠ¤ëŠ” ë©”ëª¨ë¦¬, ê¸°ìˆ ì, í¬íŠ¸, ê¶Œí•œì„ ì œê³µí•˜ëŠ” ì‹¤í–‰ ì¤‘ì¸ ìŠ¤ë ˆë“œì˜ ì»¨í…Œì´ë„ˆì— ë¶ˆê³¼**ì…ë‹ˆë‹¤.

ì „í†µì ìœ¼ë¡œ, í”„ë¡œì„¸ìŠ¤ëŠ” ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤(ë‹¨ PID 1 ì œì™¸) ë‚´ì—ì„œ **`fork`**ë¥¼ í˜¸ì¶œí•˜ì—¬ ì‹œì‘ë˜ì—ˆìœ¼ë©°, ì´ëŠ” í˜„ì¬ í”„ë¡œì„¸ìŠ¤ì˜ ì •í™•í•œ ì‚¬ë³¸ì„ ìƒì„±í•œ ë‹¤ìŒ **ìì‹ í”„ë¡œì„¸ìŠ¤**ê°€ ì¼ë°˜ì ìœ¼ë¡œ ìƒˆ ì‹¤í–‰ íŒŒì¼ì„ ë¡œë“œí•˜ê³  ì‹¤í–‰í•˜ê¸° ìœ„í•´ **`execve`**ë¥¼ í˜¸ì¶œí–ˆìŠµë‹ˆë‹¤. ê·¸ëŸ° ë‹¤ìŒ, ì´ í”„ë¡œì„¸ìŠ¤ë¥¼ ë” ë¹ ë¥´ê²Œ ë§Œë“¤ê¸° ìœ„í•´ **`vfork`**ê°€ ë„ì…ë˜ì—ˆìŠµë‹ˆë‹¤.\
ê·¸ëŸ° ë‹¤ìŒ **`posix_spawn`**ì´ ë„ì…ë˜ì–´ **`vfork`**ì™€ **`execve`**ë¥¼ í•˜ë‚˜ì˜ í˜¸ì¶œë¡œ ê²°í•©í•˜ê³  ë‹¤ìŒê³¼ ê°™ì€ í”Œë˜ê·¸ë¥¼ í—ˆìš©í–ˆìŠµë‹ˆë‹¤:

* `POSIX_SPAWN_RESETIDS`: ìœ íš¨ IDë¥¼ ì‹¤ì œ IDë¡œ ì¬ì„¤ì •
* `POSIX_SPAWN_SETPGROUP`: í”„ë¡œì„¸ìŠ¤ ê·¸ë£¹ ì†Œì† ì„¤ì •
* `POSUX_SPAWN_SETSIGDEF`: ì‹œê·¸ë„ ê¸°ë³¸ ë™ì‘ ì„¤ì •
* `POSIX_SPAWN_SETSIGMASK`: ì‹œê·¸ë„ ë§ˆìŠ¤í¬ ì„¤ì •
* `POSIX_SPAWN_SETEXEC`: ë™ì¼í•œ í”„ë¡œì„¸ìŠ¤ì—ì„œ ì‹¤í–‰ (`execve`ì™€ ìœ ì‚¬í•˜ì§€ë§Œ ë” ë§ì€ ì˜µì…˜ í¬í•¨)
* `POSIX_SPAWN_START_SUSPENDED`: ì¼ì‹œ ì¤‘ì§€ëœ ìƒíƒœì—ì„œ ì‹œì‘
* `_POSIX_SPAWN_DISABLE_ASLR`: ASLR ì—†ì´ ì‹œì‘
* `_POSIX_SPAWN_NANO_ALLOCATOR:` libmallocì˜ Nano í• ë‹¹ê¸° ì‚¬ìš©
* `_POSIX_SPAWN_ALLOW_DATA_EXEC:` ë°ì´í„° ì„¸ê·¸ë¨¼íŠ¸ì—ì„œ `rwx` í—ˆìš©
* `POSIX_SPAWN_CLOEXEC_DEFAULT`: ê¸°ë³¸ì ìœ¼ë¡œ exec(2)ì—ì„œ ëª¨ë“  íŒŒì¼ ê¸°ìˆ ì ë‹«ê¸°
* `_POSIX_SPAWN_HIGH_BITS_ASLR:` ASLR ìŠ¬ë¼ì´ë“œì˜ ìƒìœ„ ë¹„íŠ¸ ë¬´ì‘ìœ„í™”

ë˜í•œ, `posix_spawn`ì€ ìƒì„±ëœ í”„ë¡œì„¸ìŠ¤ì˜ ì¼ë¶€ ì¸¡ë©´ì„ ì œì–´í•˜ëŠ” **`posix_spawnattr`** ë°°ì—´ì„ ì§€ì •í•˜ê³ , ê¸°ìˆ ìì˜ ìƒíƒœë¥¼ ìˆ˜ì •í•˜ëŠ” **`posix_spawn_file_actions`**ì„ í—ˆìš©í•©ë‹ˆë‹¤.

í”„ë¡œì„¸ìŠ¤ê°€ ì¢…ë£Œë˜ë©´ ë¶€ëª¨ í”„ë¡œì„¸ìŠ¤ì—ê²Œ **ë¦¬í„´ ì½”ë“œë¥¼ ì „ì†¡**í•˜ë©°(ë¶€ëª¨ê°€ ì¢…ë£Œëœ ê²½ìš° ìƒˆ ë¶€ëª¨ëŠ” PID 1ì…ë‹ˆë‹¤), `SIGCHLD` ì‹ í˜¸ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ë¶€ëª¨ëŠ” `wait4()` ë˜ëŠ” `waitid()`ë¥¼ í˜¸ì¶œí•˜ì—¬ ì´ ê°’ì„ ê°€ì ¸ì™€ì•¼ í•˜ë©°, ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ ìì‹ì€ ì—¬ì „íˆ ë‚˜ì—´ë˜ì–´ ìˆì§€ë§Œ ë¦¬ì†ŒìŠ¤ë¥¼ ì†Œë¹„í•˜ì§€ ì•ŠëŠ” ì¢€ë¹„ ìƒíƒœì— ë¨¸ë¬´ë¦…ë‹ˆë‹¤.

### PID

PID(í”„ë¡œì„¸ìŠ¤ ì‹ë³„ì)ëŠ” ê³ ìœ í•œ í”„ë¡œì„¸ìŠ¤ë¥¼ ì‹ë³„í•©ë‹ˆë‹¤. XNUì—ì„œ **PID**ëŠ” **64ë¹„íŠ¸**ë¡œ ë‹¨ì¡°ë¡­ê²Œ ì¦ê°€í•˜ë©° **ì ˆëŒ€ë¡œ ê°ì‹¸ì§€ ì•ŠìŠµë‹ˆë‹¤**(ë‚¨ìš©ì„ ë°©ì§€í•˜ê¸° ìœ„í•´).

### í”„ë¡œì„¸ìŠ¤ ê·¸ë£¹, ì„¸ì…˜ ë° ì—°í•©

**í”„ë¡œì„¸ìŠ¤**ëŠ” ê·¸ë£¹ì— ì‚½ì…í•˜ì—¬ ì²˜ë¦¬ë¥¼ ì‰½ê²Œ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ì…¸ ìŠ¤í¬ë¦½íŠ¸ì˜ ëª…ë ¹ì€ ë™ì¼í•œ í”„ë¡œì„¸ìŠ¤ ê·¸ë£¹ì— ìˆìœ¼ë¯€ë¡œ killì„ ì‚¬ìš©í•˜ì—¬ **í•¨ê»˜ ì‹œê·¸ë„ì„ ë³´ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤**.\
ë˜í•œ **ì„¸ì…˜ì—ì„œ í”„ë¡œì„¸ìŠ¤ë¥¼ ê·¸ë£¹í™”**í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í”„ë¡œì„¸ìŠ¤ê°€ ì„¸ì…˜ì„ ì‹œì‘í•˜ë©´(`setsid(2)`), ìì‹ í”„ë¡œì„¸ìŠ¤ëŠ” ìì‹ ì˜ ì„¸ì…˜ì„ ì‹œì‘í•˜ì§€ ì•ŠëŠ” í•œ ì„¸ì…˜ ë‚´ì— ì„¤ì •ë©ë‹ˆë‹¤.

Coalitionì€ Darwinì—ì„œ í”„ë¡œì„¸ìŠ¤ë¥¼ ê·¸ë£¹í™”í•˜ëŠ” ë˜ ë‹¤ë¥¸ ë°©ë²•ì…ë‹ˆë‹¤. ì—°í•©ì— ê°€ì…í•˜ëŠ” í”„ë¡œì„¸ìŠ¤ëŠ” í’€ ë¦¬ì†ŒìŠ¤ì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆìœ¼ë©°, ì¥ë¶€ë¥¼ ê³µìœ í•˜ê±°ë‚˜ Jetsamì„ ì§ë©´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì—°í•©ì—ëŠ” ë¦¬ë”, XPC ì„œë¹„ìŠ¤, ìµìŠ¤í…ì…˜ì´ ë‹¤ë¥¸ ì—­í• ì´ ìˆìŠµë‹ˆë‹¤.

### ìê²© ì¦ëª… ë° í˜ë¥´ì†Œë‚˜

ê° í”„ë¡œì„¸ìŠ¤ëŠ” ì‹œìŠ¤í…œì—ì„œì˜ ê¶Œí•œì„ ì‹ë³„í•˜ëŠ” **ìê²© ì¦ëª…**ì„ ë³´ìœ í•©ë‹ˆë‹¤. ê° í”„ë¡œì„¸ìŠ¤ì—ëŠ” ì£¼ `uid`ì™€ ì£¼ `gid`ê°€ í•˜ë‚˜ì”© ìˆìŠµë‹ˆë‹¤(ì—¬ëŸ¬ ê·¸ë£¹ì— ì†í•  ìˆ˜ë„ ìˆìŒ).\
ë°”ì´ë„ˆë¦¬ì— `setuid/setgid` ë¹„íŠ¸ê°€ ìˆëŠ” ê²½ìš° ì‚¬ìš©ì ë° ê·¸ë£¹ IDë¥¼ ë³€ê²½í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.\
ìƒˆë¡œìš´ uid/gidë¥¼ ì„¤ì •í•˜ëŠ” ì—¬ëŸ¬ í•¨ìˆ˜ê°€ ìˆìŠµë‹ˆë‹¤.

ì‹œìŠ¤í…œ í˜¸ì¶œ **`persona`**ëŠ” **ëŒ€ì²´** ìê²© ì¦ëª… ì„¸íŠ¸ë¥¼ ì œê³µí•©ë‹ˆë‹¤. í˜ë¥´ì†Œë‚˜ë¥¼ ì±„íƒí•˜ë©´ í•´ë‹¹ uid, gid ë° ê·¸ë£¹ ë©¤ë²„ì‹­ì„ **ë™ì‹œì—** ê°€ì •í•©ë‹ˆë‹¤. [**ì†ŒìŠ¤ ì½”ë“œ**](https://github.com/apple/darwin-xnu/blob/main/bsd/sys/persona.h)ì—ì„œ í•´ë‹¹ êµ¬ì¡°ì²´ë¥¼ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
```c
struct kpersona_info { uint32_t persona_info_version;
uid_t    persona_id; /* overlaps with UID */
int      persona_type;
gid_t    persona_gid;
uint32_t persona_ngroups;
gid_t    persona_groups[NGROUPS];
uid_t    persona_gmuid;
char     persona_name[MAXLOGNAME + 1];

/* TODO: MAC policies?! */
}
```
## ì“°ë ˆë“œ ê¸°ë³¸ ì •ë³´

1. **POSIX ì“°ë ˆë“œ (pthreads):** macOSëŠ” C/C++ë¥¼ ìœ„í•œ í‘œì¤€ ìŠ¤ë ˆë”© API ì¼ë¶€ì¸ POSIX ì“°ë ˆë“œ (`pthreads`)ë¥¼ ì§€ì›í•©ë‹ˆë‹¤. macOSì—ì„œì˜ pthreads êµ¬í˜„ì€ `/usr/lib/system/libsystem_pthread.dylib`ì— ìˆìœ¼ë©°, ì´ëŠ” ê³µê°œì ìœ¼ë¡œ ì´ìš© ê°€ëŠ¥í•œ `libpthread` í”„ë¡œì íŠ¸ì—ì„œ ê°€ì ¸ì˜¨ ê²ƒì…ë‹ˆë‹¤. ì´ ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” ìŠ¤ë ˆë“œë¥¼ ìƒì„±í•˜ê³  ê´€ë¦¬í•˜ëŠ” ë° í•„ìš”í•œ í•¨ìˆ˜ë¥¼ ì œê³µí•©ë‹ˆë‹¤.
2. **ì“°ë ˆë“œ ìƒì„±:** `pthread_create()` í•¨ìˆ˜ëŠ” ìƒˆë¡œìš´ ì“°ë ˆë“œë¥¼ ìƒì„±í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. ë‚´ë¶€ì ìœ¼ë¡œ ì´ í•¨ìˆ˜ëŠ” `bsdthread_create()`ë¥¼ í˜¸ì¶œí•˜ë©°, ì´ëŠ” XNU ì»¤ë„( macOSê°€ ê¸°ë°˜ìœ¼ë¡œ í•˜ëŠ” ì»¤ë„)ì— íŠ¹í™”ëœ í•˜ìœ„ ìˆ˜ì¤€ ì‹œìŠ¤í…œ í˜¸ì¶œì…ë‹ˆë‹¤. ì´ ì‹œìŠ¤í…œ í˜¸ì¶œì€ `pthread_attr` (ì†ì„±)ì—ì„œ íŒŒìƒëœ ë‹¤ì–‘í•œ í”Œë˜ê·¸ë¥¼ ì·¨í•˜ë©°, ì´ëŠ” ìŠ¤ì¼€ì¤„ë§ ì •ì±… ë° ìŠ¤íƒ í¬ê¸°ë¥¼ ì§€ì •í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤.
* **ê¸°ë³¸ ìŠ¤íƒ í¬ê¸°:** ìƒˆë¡œìš´ ì“°ë ˆë“œì˜ ê¸°ë³¸ ìŠ¤íƒ í¬ê¸°ëŠ” 512 KBì´ë©°, ì¼ë°˜ ì‘ì—…ì—ëŠ” ì¶©ë¶„í•˜ì§€ë§Œ í•„ìš”ì— ë”°ë¼ ìŠ¤ë ˆë“œ ì†ì„±ì„ í†µí•´ ì¡°ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
3. **ì“°ë ˆë“œ ì´ˆê¸°í™”:** `__pthread_init()` í•¨ìˆ˜ëŠ” ì“°ë ˆë“œ ì„¤ì • ì¤‘ì— ì¤‘ìš”í•˜ë©°, `env[]` ì¸ìˆ˜ë¥¼ í™œìš©í•˜ì—¬ ìŠ¤íƒì˜ ìœ„ì¹˜ ë° í¬ê¸°ì— ëŒ€í•œ ì„¸ë¶€ ì •ë³´ë¥¼ í¬í•¨í•  ìˆ˜ ìˆëŠ” í™˜ê²½ ë³€ìˆ˜ë¥¼ êµ¬ë¬¸ ë¶„ì„í•©ë‹ˆë‹¤.

#### macOSì—ì„œì˜ ì“°ë ˆë“œ ì¢…ë£Œ

1. **ì“°ë ˆë“œ ì¢…ë£Œ:** ì¼ë°˜ì ìœ¼ë¡œ ì“°ë ˆë“œëŠ” `pthread_exit()`ë¥¼ í˜¸ì¶œí•˜ì—¬ ì¢…ë£Œë©ë‹ˆë‹¤. ì´ í•¨ìˆ˜ë¥¼ í†µí•´ ì“°ë ˆë“œëŠ” ì •ë¦¬ë¥¼ ìˆ˜í–‰í•˜ê³  í•„ìš”í•œ ì •ë¦¬ë¥¼ í•˜ë©°, ì“°ë ˆë“œê°€ ì°¸ì—¬í•˜ëŠ” ëª¨ë“  ê³³ì— ë°˜í™˜ ê°’ì„ ë³´ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
2. **ì“°ë ˆë“œ ì •ë¦¬:** `pthread_exit()`ë¥¼ í˜¸ì¶œí•˜ë©´ ëª¨ë“  ê´€ë ¨ ì“°ë ˆë“œ êµ¬ì¡°ë¥¼ ì œê±°í•˜ëŠ” `pthread_terminate()` í•¨ìˆ˜ê°€ í˜¸ì¶œë©ë‹ˆë‹¤. ì´ í•¨ìˆ˜ëŠ” Mach ìŠ¤ë ˆë“œ í¬íŠ¸(MachëŠ” XNU ì»¤ë„ì˜ í†µì‹  ì„œë¸Œì‹œìŠ¤í…œ)ë¥¼ í• ë‹¹ í•´ì œí•˜ê³ , ì“°ë ˆë“œì™€ ê´€ë ¨ëœ ì»¤ë„ ìˆ˜ì¤€ êµ¬ì¡°ë¥¼ ì œê±°í•˜ëŠ” ì‹œìŠ¤í…œ í˜¸ì¶œì¸ `bsdthread_terminate`ì„ í˜¸ì¶œí•©ë‹ˆë‹¤.

#### ë™ê¸°í™” ë©”ì»¤ë‹ˆì¦˜

ê³µìœ  ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ ì•¡ì„¸ìŠ¤ë¥¼ ê´€ë¦¬í•˜ê³  ê²½ìŸ ì¡°ê±´ì„ í”¼í•˜ê¸° ìœ„í•´ macOSëŠ” ì—¬ëŸ¬ ë™ê¸°í™” ê¸°ë³¸ ìš”ì†Œë¥¼ ì œê³µí•©ë‹ˆë‹¤. ì´ëŸ¬í•œ ìš”ì†ŒëŠ” ë°ì´í„° ë¬´ê²°ì„±ê³¼ ì‹œìŠ¤í…œ ì•ˆì •ì„±ì„ ë³´ì¥í•˜ê¸° ìœ„í•´ ë©€í‹° ìŠ¤ë ˆë”© í™˜ê²½ì—ì„œ ì¤‘ìš”í•©ë‹ˆë‹¤:

1. **ë®¤í…ìŠ¤:**
* **ì¼ë°˜ ë®¤í…ìŠ¤ (ì„œëª…: 0x4D555458):** 60ë°”ì´íŠ¸(ë®¤í…ìŠ¤ 56ë°”ì´íŠ¸ ë° ì„œëª… 4ë°”ì´íŠ¸)ì˜ ë©”ëª¨ë¦¬ í’‹í”„ë¦°íŠ¸ë¥¼ ê°€ì§„ í‘œì¤€ ë®¤í…ìŠ¤.
* **ë¹ ë¥¸ ë®¤í…ìŠ¤ (ì„œëª…: 0x4d55545A):** ì¼ë°˜ ë®¤í…ìŠ¤ì™€ ìœ ì‚¬í•˜ì§€ë§Œ ë¹ ë¥¸ ì‘ì—…ì„ ìœ„í•´ ìµœì í™”ë˜ì–´ ìˆìœ¼ë©°, í¬ê¸°ë„ 60ë°”ì´íŠ¸ì…ë‹ˆë‹¤.
2. **ì¡°ê±´ ë³€ìˆ˜:**
* íŠ¹ì • ì¡°ê±´ì´ ë°œìƒí•  ë•Œê¹Œì§€ ëŒ€ê¸°í•˜ëŠ” ë° ì‚¬ìš©ë˜ë©°, 44ë°”ì´íŠ¸(40ë°”ì´íŠ¸ì™€ 4ë°”ì´íŠ¸ ì„œëª…) í¬ê¸°ì…ë‹ˆë‹¤.
* **ì¡°ê±´ ë³€ìˆ˜ ì†ì„± (ì„œëª…: 0x434e4441):** ì¡°ê±´ ë³€ìˆ˜ì˜ êµ¬ì„± ì†ì„±ìœ¼ë¡œ, 12ë°”ì´íŠ¸ í¬ê¸°ì…ë‹ˆë‹¤.
3. **í•œ ë²ˆ ë³€ìˆ˜ (ì„œëª…: 0x4f4e4345):**
* ì´ˆê¸°í™” ì½”ë“œ ì¡°ê°ì´ í•œ ë²ˆë§Œ ì‹¤í–‰ë˜ë„ë¡ ë³´ì¥í•©ë‹ˆë‹¤. í¬ê¸°ëŠ” 12ë°”ì´íŠ¸ì…ë‹ˆë‹¤.
4. **ì½ê¸°-ì“°ê¸° ì ê¸ˆ:**
* í•œ ë²ˆì— ì—¬ëŸ¬ ë¦¬ë” ë˜ëŠ” í•œ ë²ˆì— í•˜ë‚˜ì˜ ì‘ì„±ìë¥¼ í—ˆìš©í•˜ì—¬ ê³µìœ  ë°ì´í„°ì— íš¨ìœ¨ì ìœ¼ë¡œ ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* **ì½ê¸°-ì“°ê¸° ì ê¸ˆ (ì„œëª…: 0x52574c4b):** 196ë°”ì´íŠ¸ í¬ê¸°ì…ë‹ˆë‹¤.
* **ì½ê¸°-ì“°ê¸° ì ê¸ˆ ì†ì„± (ì„œëª…: 0x52574c41):** ì½ê¸°-ì“°ê¸° ì ê¸ˆì˜ ì†ì„±ìœ¼ë¡œ, 20ë°”ì´íŠ¸ í¬ê¸°ì…ë‹ˆë‹¤.

{% hint style="success" %}
ì´ëŸ¬í•œ ê°ì²´ì˜ ë§ˆì§€ë§‰ 4ë°”ì´íŠ¸ëŠ” ì˜¤ë²„í”Œë¡œìš°ë¥¼ ê°ì§€í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤.
{% endhint %}

### ì“°ë ˆë“œ ì§€ì—­ ë³€ìˆ˜ (TLV)

**ì“°ë ˆë“œ ì§€ì—­ ë³€ìˆ˜ (TLV)**ëŠ” macOSì˜ ì‹¤í–‰ íŒŒì¼ í˜•ì‹ì¸ Mach-O íŒŒì¼ì˜ ë§¥ë½ì—ì„œ, ë©€í‹° ìŠ¤ë ˆë“œ ì‘ìš© í”„ë¡œê·¸ë¨ì˜ ê° ì“°ë ˆë“œì— íŠ¹ì •í•œ ë³€ìˆ˜ë¥¼ ì„ ì–¸í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ê° ì“°ë ˆë“œê°€ ë³€ìˆ˜ì˜ ë³„ë„ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê°€ì§€ë¯€ë¡œ ì¶©ëŒì„ í”¼í•˜ê³  ë®¤í…ìŠ¤ì™€ ê°™ì€ ëª…ì‹œì  ë™ê¸°í™” ë©”ì»¤ë‹ˆì¦˜ ì—†ì´ ë°ì´í„° ë¬´ê²°ì„±ì„ ìœ ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

C ë° ê´€ë ¨ ì–¸ì–´ì—ì„œëŠ” **`__thread`** í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ì“°ë ˆë“œ ì§€ì—­ ë³€ìˆ˜ë¥¼ ì„ ì–¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì•„ë˜ëŠ” ì˜ˆì‹œì—ì„œ ì‘ë™ ë°©ì‹ì…ë‹ˆë‹¤:
```c
cCopy code__thread int tlv_var;

void main (int argc, char **argv){
tlv_var = 10;
}
```
ì´ ì½”ë“œ ì¡°ê°ì€ `tlv_var`ë¥¼ ìŠ¤ë ˆë“œ ë¡œì»¬ ë³€ìˆ˜ë¡œ ì •ì˜í•©ë‹ˆë‹¤. ì´ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ëŠ” ê° ìŠ¤ë ˆë“œëŠ” ìì²´ `tlv_var`ë¥¼ ê°€ì§€ë©°, í•œ ìŠ¤ë ˆë“œê°€ `tlv_var`ë¥¼ ë³€ê²½í•´ë„ ë‹¤ë¥¸ ìŠ¤ë ˆë“œì˜ `tlv_var`ì—ëŠ” ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

Mach-O ì´ì§„ íŒŒì¼ì—ì„œ ìŠ¤ë ˆë“œ ë¡œì»¬ ë³€ìˆ˜ì™€ ê´€ë ¨ëœ ë°ì´í„°ëŠ” íŠ¹ì • ì„¹ì…˜ìœ¼ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤:

* **`__DATA.__thread_vars`**: ì´ ì„¹ì…˜ì—ëŠ” ìŠ¤ë ˆë“œ ë¡œì»¬ ë³€ìˆ˜ì— ëŒ€í•œ ë©”íƒ€ë°ì´í„°ê°€ í¬í•¨ë˜ë©°, ë³€ìˆ˜ì˜ ìœ í˜• ë° ì´ˆê¸°í™” ìƒíƒœì™€ ê°™ì€ ì •ë³´ê°€ í¬í•¨ë©ë‹ˆë‹¤.
* **`__DATA.__thread_bss`**: ì´ ì„¹ì…˜ì€ ëª…ì‹œì ìœ¼ë¡œ ì´ˆê¸°í™”ë˜ì§€ ì•Šì€ ìŠ¤ë ˆë“œ ë¡œì»¬ ë³€ìˆ˜ì— ì‚¬ìš©ë©ë‹ˆë‹¤. ì´ëŠ” 0ìœ¼ë¡œ ì´ˆê¸°í™”ëœ ë°ì´í„°ë¥¼ ìœ„í•´ í• ë‹¹ëœ ë©”ëª¨ë¦¬ ì¼ë¶€ì…ë‹ˆë‹¤.

ë˜í•œ Mach-OëŠ” ìŠ¤ë ˆë“œê°€ ì¢…ë£Œë  ë•Œ ìŠ¤ë ˆë“œ ë¡œì»¬ ë³€ìˆ˜ë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•œ **`tlv_atexit`**ë¼ëŠ” íŠ¹ì • APIë¥¼ ì œê³µí•©ë‹ˆë‹¤. ì´ APIë¥¼ ì‚¬ìš©í•˜ë©´ ìŠ¤ë ˆë“œê°€ ì¢…ë£Œë  ë•Œ ìŠ¤ë ˆë“œ ë¡œì»¬ ë°ì´í„°ë¥¼ ì •ë¦¬í•˜ëŠ” íŠ¹ë³„í•œ í•¨ìˆ˜ì¸ ì†Œë©¸ìë¥¼ **ë“±ë¡**í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### ìŠ¤ë ˆë”© ìš°ì„ ìˆœìœ„

ìŠ¤ë ˆë“œ ìš°ì„ ìˆœìœ„ë¥¼ ì´í•´í•˜ëŠ” ê²ƒì€ ìš´ì˜ ì²´ì œê°€ ì–´ë–¤ ìŠ¤ë ˆë“œë¥¼ ì‹¤í–‰í• ì§€ì™€ ì–¸ì œ ì‹¤í–‰í• ì§€ë¥¼ ê²°ì •í•˜ëŠ” ë°©ì‹ì„ ì‚´í´ë³´ëŠ” ê²ƒì„ í¬í•¨í•©ë‹ˆë‹¤. ì´ ê²°ì •ì€ ê° ìŠ¤ë ˆë“œì— í• ë‹¹ëœ ìš°ì„ ìˆœìœ„ ìˆ˜ì¤€ì— ì˜í•´ ì˜í–¥ì„ ë°›ìŠµë‹ˆë‹¤. macOS ë° Unixì™€ ìœ ì‚¬í•œ ì‹œìŠ¤í…œì—ì„œëŠ” `nice`, `renice`, í’ˆì§ˆ ì„œë¹„ìŠ¤(QoS) í´ë˜ìŠ¤ì™€ ê°™ì€ ê°œë…ì„ ì‚¬ìš©í•˜ì—¬ ì´ë¥¼ ì²˜ë¦¬í•©ë‹ˆë‹¤.

#### Nice ë° Renice

1. **Nice:**
* í”„ë¡œì„¸ìŠ¤ì˜ `nice` ê°’ì€ ìš°ì„ ìˆœìœ„ì— ì˜í–¥ì„ ë¯¸ì¹˜ëŠ” ìˆ«ìì…ë‹ˆë‹¤. ê° í”„ë¡œì„¸ìŠ¤ì—ëŠ” -20(ê°€ì¥ ë†’ì€ ìš°ì„ ìˆœìœ„)ì—ì„œ 19(ê°€ì¥ ë‚®ì€ ìš°ì„ ìˆœìœ„)ê¹Œì§€ì˜ nice ê°’ì´ ìˆìŠµë‹ˆë‹¤. í”„ë¡œì„¸ìŠ¤ê°€ ìƒì„±ë  ë•Œì˜ ê¸°ë³¸ nice ê°’ì€ ì¼ë°˜ì ìœ¼ë¡œ 0ì…ë‹ˆë‹¤.
* ë‚®ì€ nice ê°’(ë” ê°€ê¹Œìš´ -20)ì€ í”„ë¡œì„¸ìŠ¤ë¥¼ ë” "ì´ê¸°ì "ìœ¼ë¡œ ë§Œë“¤ì–´ ë‹¤ë¥¸ nice ê°’ì´ ë” ë†’ì€ í”„ë¡œì„¸ìŠ¤ì— ë¹„í•´ ë” ë§ì€ CPU ì‹œê°„ì„ ì œê³µí•©ë‹ˆë‹¤.
2. **Renice:**
* `renice`ëŠ” ì´ë¯¸ ì‹¤í–‰ ì¤‘ì¸ í”„ë¡œì„¸ìŠ¤ì˜ nice ê°’ì„ ë³€ê²½í•˜ëŠ” ë° ì‚¬ìš©ë˜ëŠ” ëª…ë ¹ì…ë‹ˆë‹¤. ì´ë¥¼ ì‚¬ìš©í•˜ì—¬ í”„ë¡œì„¸ìŠ¤ì˜ ìš°ì„ ìˆœìœ„ë¥¼ ë™ì ìœ¼ë¡œ ì¡°ì •í•˜ì—¬ ìƒˆ nice ê°’ì— ë”°ë¼ CPU ì‹œê°„ í• ë‹¹ì„ ì¦ê°€ ë˜ëŠ” ê°ì†Œì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* ì˜ˆë¥¼ ë“¤ì–´, í”„ë¡œì„¸ìŠ¤ê°€ ì¼ì‹œì ìœ¼ë¡œ ë” ë§ì€ CPU ë¦¬ì†ŒìŠ¤ê°€ í•„ìš”í•œ ê²½ìš° `renice`ë¥¼ ì‚¬ìš©í•˜ì—¬ nice ê°’ì„ ë‚®ì¶œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

#### í’ˆì§ˆ ì„œë¹„ìŠ¤(QoS) í´ë˜ìŠ¤

QoS í´ë˜ìŠ¤ëŠ” íŠ¹íˆ **Grand Central Dispatch (GCD)**ë¥¼ ì§€ì›í•˜ëŠ” macOSì™€ ê°™ì€ ì‹œìŠ¤í…œì—ì„œ ìŠ¤ë ˆë“œ ìš°ì„ ìˆœìœ„ë¥¼ ì²˜ë¦¬í•˜ëŠ” ë” í˜„ëŒ€ì ì¸ ë°©ë²•ì…ë‹ˆë‹¤. QoS í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë©´ ì¤‘ìš”ì„±ì´ë‚˜ ê¸´ê¸‰ì„±ì— ë”°ë¼ ì‘ì—…ì„ ë‹¤ë¥¸ ìˆ˜ì¤€ìœ¼ë¡œ ë¶„ë¥˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. macOSëŠ” ì´ëŸ¬í•œ QoS í´ë˜ìŠ¤ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìë™ìœ¼ë¡œ ìŠ¤ë ˆë“œ ìš°ì„ ìˆœìœ„ë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤:

1. **ì‚¬ìš©ì ìƒí˜¸ì‘ìš©:**
* ì´ í´ë˜ìŠ¤ëŠ” í˜„ì¬ ì‚¬ìš©ìì™€ ìƒí˜¸ì‘ìš©í•˜ê±°ë‚˜ ì¢‹ì€ ì‚¬ìš©ì ê²½í—˜ì„ ì œê³µí•˜ê¸° ìœ„í•´ ì¦‰ê°ì ì¸ ê²°ê³¼ê°€ í•„ìš”í•œ ì‘ì—…ì„ ìœ„í•œ ê²ƒì…ë‹ˆë‹¤. ì´ëŸ¬í•œ ì‘ì—…ì€ ì¸í„°í˜ì´ìŠ¤ë¥¼ ë°˜ì‘ì ìœ¼ë¡œ ìœ ì§€í•˜ê¸° ìœ„í•´ ê°€ì¥ ë†’ì€ ìš°ì„ ìˆœìœ„ê°€ ë¶€ì—¬ë©ë‹ˆë‹¤(ì˜ˆ: ì• ë‹ˆë©”ì´ì…˜ ë˜ëŠ” ì´ë²¤íŠ¸ ì²˜ë¦¬).
2. **ì‚¬ìš©ì ì‹œì‘:**
* ì‚¬ìš©ìê°€ ì‹œì‘í•˜ê³  ì¦‰ê°ì ì¸ ê²°ê³¼ë¥¼ ê¸°ëŒ€í•˜ëŠ” ì‘ì—…ìœ¼ë¡œ, ë¬¸ì„œë¥¼ ì—´ê±°ë‚˜ ê³„ì‚°ì´ í•„ìš”í•œ ë²„íŠ¼ì„ í´ë¦­í•˜ëŠ” ë“±ì˜ ì‘ì—…ì´ ì—¬ê¸°ì— í•´ë‹¹ë©ë‹ˆë‹¤. ì´ëŸ¬í•œ ì‘ì—…ì€ ë†’ì€ ìš°ì„ ìˆœìœ„ì´ì§€ë§Œ ì‚¬ìš©ì ìƒí˜¸ì‘ìš©ë³´ë‹¤ëŠ” ë‚®ìŠµë‹ˆë‹¤.
3. **ìœ í‹¸ë¦¬í‹°:**
* ì´ëŸ¬í•œ ì‘ì—…ì€ ì˜¤ëœ ì‹œê°„ì´ ê±¸ë¦¬ë©° ì¼ë°˜ì ìœ¼ë¡œ ì§„í–‰ë¥  í‘œì‹œê¸°ê°€ í‘œì‹œë©ë‹ˆë‹¤(ì˜ˆ: íŒŒì¼ ë‹¤ìš´ë¡œë“œ, ë°ì´í„° ê°€ì ¸ì˜¤ê¸°). ì‚¬ìš©ì ì‹œì‘ ì‘ì—…ë³´ë‹¤ ìš°ì„ ìˆœìœ„ê°€ ë‚®ìœ¼ë©° ì¦‰ì‹œ ì™„ë£Œí•  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤.
4. **ë°±ê·¸ë¼ìš´ë“œ:**
* ì´ í´ë˜ìŠ¤ëŠ” ë°±ê·¸ë¼ìš´ë“œì—ì„œ ì‘ë™í•˜ë©° ì‚¬ìš©ìì—ê²Œ í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì¸ë±ì‹±, ë™ê¸°í™” ë˜ëŠ” ë°±ì—…ê³¼ ê°™ì€ ì‘ì—…ì´ ì—¬ê¸°ì— í•´ë‹¹ë©ë‹ˆë‹¤. ì´ëŸ¬í•œ ì‘ì—…ì€ ê°€ì¥ ë‚®ì€ ìš°ì„ ìˆœìœ„ë¥¼ ê°€ì§€ë©° ì‹œìŠ¤í…œ ì„±ëŠ¥ì— ë¯¸ë¯¸í•œ ì˜í–¥ì„ ë¯¸ì¹©ë‹ˆë‹¤.

QoS í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë©´ ê°œë°œìê°€ ì •í™•í•œ ìš°ì„ ìˆœìœ„ ìˆ«ìë¥¼ ê´€ë¦¬í•  í•„ìš”ê°€ ì—†ê³  ëŒ€ì‹  ì‘ì—…ì˜ ì„±ê²©ì— ì§‘ì¤‘í•˜ê³  ì‹œìŠ¤í…œì´ CPU ë¦¬ì†ŒìŠ¤ë¥¼ ìµœì í™”í•©ë‹ˆë‹¤.

ë˜í•œ ìŠ¤ì¼€ì¤„ë§ ì •ì±…ì„ ì§€ì •í•˜ëŠ” ë‹¤ì–‘í•œ **ìŠ¤ë ˆë“œ ìŠ¤ì¼€ì¤„ë§ ì •ì±…**ì´ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” `thread_policy_[set/get]`ì„ ì‚¬ìš©í•˜ì—¬ ìˆ˜í–‰í•  ìˆ˜ ìˆìœ¼ë©°, ê²½ìŸ ì¡°ê±´ ê³µê²©ì— ìœ ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
### Python Injection

ë§Œì•½ í™˜ê²½ ë³€ìˆ˜ **`PYTHONINSPECT`** ê°€ ì„¤ì •ë˜ì–´ ìˆë‹¤ë©´, íŒŒì´ì¬ í”„ë¡œì„¸ìŠ¤ëŠ” ì‹¤í–‰ì´ ëë‚˜ë©´ íŒŒì´ì¬ CLIë¡œ ì „í™˜ë©ë‹ˆë‹¤. ë˜í•œ **`PYTHONSTARTUP`**ì„ ì‚¬ìš©í•˜ì—¬ ëŒ€í™”í˜• ì„¸ì…˜ì˜ ì‹œì‘ ì‹œì— ì‹¤í–‰í•  íŒŒì´ì¬ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì§€ì •í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.\
ê·¸ëŸ¬ë‚˜ **`PYTHONINSPECT`**ê°€ ëŒ€í™”í˜• ì„¸ì…˜ì„ ìƒì„±í•  ë•Œ **`PYTHONSTARTUP`** ìŠ¤í¬ë¦½íŠ¸ëŠ” ì‹¤í–‰ë˜ì§€ ì•ŠìŒì„ ìœ ì˜í•˜ì‹­ì‹œì˜¤.

**`PYTHONPATH`** ë° **`PYTHONHOME`**ê³¼ ê°™ì€ ë‹¤ë¥¸ í™˜ê²½ ë³€ìˆ˜ë„ íŒŒì´ì¬ ëª…ë ¹ì–´ê°€ ì„ì˜ì˜ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ëŠ” ë° ìœ ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**`pyinstaller`**ë¡œ ì»´íŒŒì¼ëœ ì‹¤í–‰ íŒŒì¼ì€ ë‚´ì¥ëœ íŒŒì´ì¬ì„ ì‚¬ìš©í•˜ë”ë¼ë„ ì´ëŸ¬í•œ í™˜ê²½ ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

{% hint style="danger" %}
ì „ë°˜ì ìœ¼ë¡œ í™˜ê²½ ë³€ìˆ˜ë¥¼ ì•…ìš©í•˜ì—¬ íŒŒì´ì¬ì´ ì„ì˜ì˜ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ë„ë¡ ë§Œë“œëŠ” ë°©ë²•ì„ ì°¾ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.\
ê·¸ëŸ¬ë‚˜ ëŒ€ë¶€ë¶„ì˜ ì‚¬ëŒë“¤ì€ **Hombrew**ë¥¼ ì‚¬ìš©í•˜ì—¬ íŒŒì´ì¬ì„ ì„¤ì¹˜í•˜ë©°, ì´ëŠ” ê¸°ë³¸ ê´€ë¦¬ì ì‚¬ìš©ìì— ëŒ€í•´ **ì“°ê¸° ê°€ëŠ¥í•œ ìœ„ì¹˜**ì— íŒŒì´ì¬ì„ ì„¤ì¹˜í•©ë‹ˆë‹¤. ë‹¤ìŒê³¼ ê°™ì´ ì´ë¥¼ ì•…ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:
```bash
mv /opt/homebrew/bin/python3 /opt/homebrew/bin/python3.old
cat > /opt/homebrew/bin/python3 <<EOF
#!/bin/bash
# Extra hijack code
/opt/homebrew/bin/python3.old "$@"
EOF
chmod +x /opt/homebrew/bin/python3
```
## íƒì§€

### Shield

[**Shield**](https://theevilbit.github.io/shield/) ([**Github**](https://github.com/theevilbit/Shield))ì€ ë‹¤ìŒê³¼ ê°™ì€ í”„ë¡œì„¸ìŠ¤ ì£¼ì… ì‘ì—…ì„ **íƒì§€í•˜ê³  ì°¨ë‹¨**í•  ìˆ˜ ìˆëŠ” ì˜¤í”ˆ ì†ŒìŠ¤ ì‘ìš© í”„ë¡œê·¸ë¨ì…ë‹ˆë‹¤:

- **í™˜ê²½ ë³€ìˆ˜ ì‚¬ìš©**: **`DYLD_INSERT_LIBRARIES`**, **`CFNETWORK_LIBRARY_PATH`**, **`RAWCAMERA_BUNDLE_PATH`**, **`ELECTRON_RUN_AS_NODE`** ì¤‘ í•˜ë‚˜ì˜ í™˜ê²½ ë³€ìˆ˜ì˜ ì¡´ì¬ë¥¼ ëª¨ë‹ˆí„°ë§í•©ë‹ˆë‹¤.
- **`task_for_pid`** í˜¸ì¶œ ì‚¬ìš©: í•œ í”„ë¡œì„¸ìŠ¤ê°€ ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ì˜ **ì‘ì—… í¬íŠ¸ë¥¼ ê°€ì ¸ì˜¤ë ¤ê³  í•  ë•Œ** ì´ë¥¼ ì°¾ì•„ì„œ í”„ë¡œì„¸ìŠ¤ì— ì½”ë“œë¥¼ ì£¼ì…í•  ìˆ˜ ìˆê²Œ í•©ë‹ˆë‹¤.
- **Electron ì•± ë§¤ê°œë³€ìˆ˜**: ëˆ„êµ°ê°€ëŠ” **`--inspect`**, **`--inspect-brk`**, **`--remote-debugging-port`** ëª…ë ¹í–‰ ì¸ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ Electron ì•±ì„ ë””ë²„ê¹… ëª¨ë“œë¡œ ì‹œì‘í•˜ê³  ì´ì— ì½”ë“œë¥¼ ì£¼ì…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- **ì‹¬ë³¼ë¦­ ë§í¬** ë˜ëŠ” **í•˜ë“œ ë§í¬** ì‚¬ìš©: ì¼ë°˜ì ìœ¼ë¡œ ê°€ì¥ í”í•œ ë‚¨ìš©ì€ **ì‚¬ìš©ì ê¶Œí•œìœ¼ë¡œ ë§í¬ë¥¼ ë§Œë“¤ê³ **, ì´ë¥¼ **ë³´ë‹¤ ë†’ì€ ê¶Œí•œ** ìœ„ì¹˜ë¡œ ì§€ì •í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. í•˜ë“œ ë§í¬ì™€ ì‹¬ë³¼ë¦­ ë§í¬ ëª¨ë‘ì— ëŒ€í•œ ê°ì§€ëŠ” ë§¤ìš° ê°„ë‹¨í•©ë‹ˆë‹¤. ë§í¬ë¥¼ ë§Œë“œëŠ” í”„ë¡œì„¸ìŠ¤ê°€ ëŒ€ìƒ íŒŒì¼ë³´ë‹¤ **ë‹¤ë¥¸ ê¶Œí•œ ìˆ˜ì¤€**ì„ ê°€ì§€ê³  ìˆìœ¼ë©´ **ê²½ê³ **ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. ì‹¬ë³¼ë¦­ ë§í¬ì˜ ê²½ìš° ë§í¬ì˜ ëŒ€ìƒì— ëŒ€í•œ ì •ë³´ê°€ ì—†ê¸° ë•Œë¬¸ì— ì°¨ë‹¨ì´ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤. ì´ëŠ” Appleì˜ EndpointSecuriy í”„ë ˆì„ì›Œí¬ì˜ ì œí•œì…ë‹ˆë‹¤.

### ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ì— ì˜í•œ í˜¸ì¶œ

[**ì´ ë¸”ë¡œê·¸ ê²Œì‹œë¬¼**](https://knight.sc/reverse%20engineering/2019/04/15/detecting-task-modifications.html)ì—ì„œëŠ” **`task_name_for_pid`** í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ë‹¤ë¥¸ **í”„ë¡œì„¸ìŠ¤ê°€ í”„ë¡œì„¸ìŠ¤ì— ì½”ë“œë¥¼ ì£¼ì…**í•˜ëŠ” ì •ë³´ë¥¼ ì–»ê³  ê·¸ ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ì— ëŒ€í•œ ì •ë³´ë¥¼ ì–»ëŠ” ë°©ë²•ì— ëŒ€í•´ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

í•´ë‹¹ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë ¤ë©´ í•´ë‹¹ í”„ë¡œì„¸ìŠ¤ë¥¼ ì‹¤í–‰í•˜ëŠ” ì‚¬ìš©ì ë˜ëŠ” **root**ì™€ **ê°™ì€ uid** ì—¬ì•¼ í•˜ë©° (ê·¸ í•¨ìˆ˜ëŠ” í”„ë¡œì„¸ìŠ¤ì— ëŒ€í•œ ì •ë³´ë¥¼ ë°˜í™˜í•˜ë©° ì½”ë“œë¥¼ ì£¼ì…í•˜ëŠ” ë°©ë²•ì€ ì•„ë‹˜).

## ì°¸ê³  ìë£Œ

- [https://theevilbit.github.io/shield/](https://theevilbit.github.io/shield/)
- [https://medium.com/@metnew/why-electron-apps-cant-store-your-secrets-confidentially-inspect-option-a49950d6d51f](https://medium.com/@metnew/why-electron-apps-cant-store-your-secrets-confidentially-inspect-option-a49950d6d51f)
