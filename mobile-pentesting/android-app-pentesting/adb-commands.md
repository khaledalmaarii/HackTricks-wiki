{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}


**Adb –∑–∞–∑–≤–∏—á–∞–π –∑–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤:**
```bash
#Windows
C:\Users\<username>\AppData\Local\Android\sdk\platform-tools\adb.exe

#MacOS
/Users/<username>/Library/Android/sdk/platform-tools/adb
```
**–Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –æ—Ç—Ä–∏–º–∞–Ω–∞ –∑:** [**http://adbshell.com/**](http://adbshell.com)

# –ó'—î–¥–Ω–∞–Ω–Ω—è
```
adb devices
```
–¶–µ –≤—ñ–¥–æ–±—Ä–∞–∑–∏—Ç—å –ø—ñ–¥–∫–ª—é—á–µ–Ω—ñ –ø—Ä–∏—Å—Ç—Ä–æ—ó; —è–∫—â–æ –∑'—è–≤–ª—è—î—Ç—å—Å—è "_**–Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–æ**_", —Ü–µ –æ–∑–Ω–∞—á–∞—î, —â–æ –≤–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ **—Ä–æ–∑–±–ª–æ–∫—É–≤–∞—Ç–∏** –≤–∞—à **–º–æ–±—ñ–ª—å–Ω–∏–π** —Ç–µ–ª–µ—Ñ–æ–Ω —ñ **–ø—Ä–∏–π–Ω—è—Ç–∏** –∑'—î–¥–Ω–∞–Ω–Ω—è.

–¶–µ –≤–∫–∞–∑—É—î –ø—Ä–∏—Å—Ç—Ä–æ—é, —â–æ –π–æ–º—É –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ —Å–µ—Ä–≤–µ—Ä adb –Ω–∞ –ø–æ—Ä—Ç—É 5555:
```
adb tcpip 5555
```
–ü—ñ–¥–∫–ª—é—á—ñ—Ç—å—Å—è –¥–æ —Ü—å–æ–≥–æ IP —Ç–∞ —Ü—å–æ–≥–æ –ø–æ—Ä—Ç—É:
```
adb connect <IP>:<PORT>
```
–Ø–∫—â–æ –≤–∏ –æ—Ç—Ä–∏–º–∞–ª–∏ –ø–æ–º–∏–ª–∫—É, –ø–æ–¥—ñ–±–Ω—É –¥–æ –Ω–∞—Å—Ç—É–ø–Ω–æ—ó, —É –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–æ–º—É –ø—Ä–æ–≥—Ä–∞–º–Ω–æ–º—É –∑–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—ñ Android (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, Genymotion):
```
adb server version (41) doesn't match this client (36); killing...
```
–¶–µ —Ç–æ–º—É, —â–æ –≤–∏ –Ω–∞–º–∞–≥–∞—î—Ç–µ—Å—è –ø—ñ–¥–∫–ª—é—á–∏—Ç–∏—Å—è –¥–æ —Å–µ—Ä–≤–µ—Ä–∞ ADB –∑ —ñ–Ω—à–æ—é –≤–µ—Ä—Å—ñ—î—é. –ü—Ä–æ—Å—Ç–æ —Å–ø—Ä–æ–±—É–π—Ç–µ –∑–Ω–∞–π—Ç–∏ –±—ñ–Ω–∞—Ä–Ω–∏–π —Ñ–∞–π–ª adb, —è–∫–∏–π –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –ø—Ä–æ–≥—Ä–∞–º–Ω–µ –∑–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è (–ø–µ—Ä–µ–π–¥—ñ—Ç—å –¥–æ `C:\Program Files\Genymobile\Genymotion` —ñ –∑–Ω–∞–π–¥—ñ—Ç—å adb.exe)

## –ö—ñ–ª—å–∫–∞ –ø—Ä–∏—Å—Ç—Ä–æ—ó–≤

–ö–æ–ª–∏ –≤–∏ –∑–Ω–∞–π–¥–µ—Ç–µ **–∫—ñ–ª—å–∫–∞ –ø—Ä–∏—Å—Ç—Ä–æ—ó–≤, –ø—ñ–¥–∫–ª—é—á–µ–Ω–∏—Ö –¥–æ –≤–∞—à–æ–≥–æ –∫–æ–º–ø'—é—Ç–µ—Ä–∞**, –≤–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –±—É–¥–µ **–≤–∫–∞–∑–∞—Ç–∏, –Ω–∞ —è–∫–æ–º—É –∑ –Ω–∏—Ö** –≤–∏ —Ö–æ—á–µ—Ç–µ –≤–∏–∫–æ–Ω–∞—Ç–∏ –∫–æ–º–∞–Ω–¥—É adb.
```bash
adb devices
List of devices attached
10.10.10.247:42135	offline
127.0.0.1:5555	device
```

```bash
adb -s 127.0.0.1:5555 shell
x86_64:/ # whoami
root
```
## Port Tunneling

–£ –≤–∏–ø–∞–¥–∫—É, —è–∫—â–æ **adb** **–ø–æ—Ä—Ç** –¥–æ—Å—Ç—É–ø–Ω–∏–π –ª–∏—à–µ –∑ **localhost** –Ω–∞ –∞–Ω–¥—Ä–æ—ó–¥-–ø—Ä–∏—Å—Ç—Ä–æ—ó, –∞–ª–µ **—É –≤–∞—Å —î –¥–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ SSH**, –≤–∏ –º–æ–∂–µ—Ç–µ **–ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–∏—Ç–∏ –ø–æ—Ä—Ç 5555** —ñ –ø—ñ–¥–∫–ª—é—á–∏—Ç–∏—Å—è —á–µ—Ä–µ–∑ adb:
```bash
ssh -i ssh_key username@10.10.10.10 -L 5555:127.0.0.1:5555 -p 2222
adb connect 127.0.0.1:5555
```
# –ú–µ–Ω–µ–¥–∂–µ—Ä –ø–∞–∫–µ—Ç—ñ–≤

## –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è/–í–∏–¥–∞–ª–µ–Ω–Ω—è

### adb install \[option] \<path>
```bash
adb install test.apk

adb install -l test.apk # forward lock application

adb install -r test.apk # replace existing application

adb install -t test.apk # allow test packages

adb install -s test.apk # install application on sdcard

adb install -d test.apk # allow version code downgrade

adb install -p test.apk # partial application install
```
### adb uninstall \[options] \<PACKAGE>
```bash
adb uninstall com.test.app

adb uninstall -k com.test.app Keep the data and cache directories around after package removal.
```
## –ü–∞–∫–µ—Ç–∏

–í–∏–≤–æ–¥–∏—Ç—å –≤—Å—ñ –ø–∞–∫–µ—Ç–∏, –∑–∞ –±–∞–∂–∞–Ω–Ω—è–º –ª–∏—à–µ —Ç—ñ, —á–∏—î —ñ–º'—è –ø–∞–∫–µ—Ç–∞ –º—ñ—Å—Ç–∏—Ç—å —Ç–µ–∫—Å—Ç —É \<FILTER>. 

### adb shell pm list packages \[options] \<FILTER-STR>
```bash
adb shell pm list packages <FILTER-STR>

adb shell pm list packages -f <FILTER-STR> #See their associated file.

adb shell pm list packages -d <FILTER-STR> #Filter to only show disabled packages.

adb shell pm list packages -e <FILTER-STR> #Filter to only show enabled packages.

adb shell pm list packages -s <FILTER-STR> #Filter to only show system packages.

adb shell pm list packages -3 <FILTER-STR> #Filter to only show third party packages.

adb shell pm list packages -i <FILTER-STR> #See the installer for the packages.

adb shell pm list packages -u <FILTER-STR> #Also include uninstalled packages.

adb shell pm list packages --user <USER_ID> <FILTER-STR> #The user space to query.
```
### adb shell pm path \<PACKAGE>

–í–∏–≤–æ–¥–∏—Ç—å —à–ª—è—Ö –¥–æ APK –≤–∫–∞–∑–∞–Ω–æ–≥–æ .
```bash
adb shell pm path com.android.phone
```
### adb shell pm clear \<PACKAGE>

–í–∏–¥–∞–ª–∏—Ç–∏ –≤—Å—ñ –¥–∞–Ω—ñ, –ø–æ–≤'—è–∑–∞–Ω—ñ –∑ –ø–∞–∫–µ—Ç–æ–º.
```bash
adb shell pm clear com.test.abc
```
# File Manager

### adb pull \<remote> \[local]

–ó–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ –≤–∫–∞–∑–∞–Ω–∏–π —Ñ–∞–π–ª –∑ –µ–º—É–ª—è—Ç–æ—Ä–∞/–ø—Ä–∏—Å—Ç—Ä–æ—é –Ω–∞ –≤–∞—à –∫–æ–º–ø'—é—Ç–µ—Ä.
```bash
adb pull /sdcard/demo.mp4 ./
```
### adb push \<local> \<remote>

–ó–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ –≤–∫–∞–∑–∞–Ω–∏–π —Ñ–∞–π–ª –∑ –≤–∞—à–æ–≥–æ –∫–æ–º–ø'—é—Ç–µ—Ä–∞ –Ω–∞ –µ–º—É–ª—è—Ç–æ—Ä/–ø—Ä–∏—Å—Ç—Ä—ñ–π.
```bash
adb push test.apk /sdcard
```
# Screencapture/Screenrecord

### adb shell screencap \<filename>

–ó–Ω—ñ–º–æ–∫ –µ–∫—Ä–∞–Ω–∞ –¥–∏—Å–ø–ª–µ—è –ø—Ä–∏—Å—Ç—Ä–æ—é.
```bash
adb shell screencap /sdcard/screen.png
```
### adb shell screenrecord \[options] \<filename>

–ó–∞–ø–∏—Å—É–≤–∞–Ω–Ω—è –µ–∫—Ä–∞–Ω—É –ø—Ä–∏—Å—Ç—Ä–æ—ó–≤, —â–æ –ø—Ä–∞—Ü—é—é—Ç—å –Ω–∞ Android 4.4 (API —Ä—ñ–≤–µ–Ω—å 19) —Ç–∞ –≤–∏—â–µ.
```bash
adb shell screenrecord /sdcard/demo.mp4
adb shell screenrecord --size <WIDTHxHEIGHT>
adb shell screenrecord --bit-rate <RATE>
adb shell screenrecord --time-limit <TIME> #Sets the maximum recording time, in seconds. The default and maximum value is 180 (3 minutes).
adb shell screenrecord --rotate # Rotates 90 degrees
adb shell screenrecord --verbose
```
(–Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å Ctrl-C, —â–æ–± –∑—É–ø–∏–Ω–∏—Ç–∏ –∑–∞–ø–∏—Å)

**–í–∏ –º–æ–∂–µ—Ç–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ —Ñ–∞–π–ª–∏ (–∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Ç–∞ –≤—ñ–¥–µ–æ) –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é **_**adb pull**_

# Shell

### adb shell

–û—Ç—Ä–∏–º–∞—Ç–∏ –æ–±–æ–ª–æ–Ω–∫—É –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –ø—Ä–∏—Å—Ç—Ä–æ—é
```bash
adb shell
```
### adb shell \<CMD>

–í–∏–∫–æ–Ω–∞—Ç–∏ –∫–æ–º–∞–Ω–¥—É –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –ø—Ä–∏—Å—Ç—Ä–æ—é
```bash
adb shell ls
```
## pm

–ù–∞—Å—Ç—É–ø–Ω—ñ –∫–æ–º–∞–Ω–¥–∏ –≤–∏–∫–æ–Ω—É—é—Ç—å—Å—è –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –æ–±–æ–ª–æ–Ω–∫–∏
```bash
pm list packages #List installed packages
pm path <package name> #Get the path to the apk file of tha package
am start [<options>] #Start an activity. Whiout options you can see the help menu
am startservice [<options>] #Start a service. Whiout options you can see the help menu
am broadcast [<options>] #Send a broadcast. Whiout options you can see the help menu
input [text|keyevent] #Send keystrokes to device
```
# Processes

–Ø–∫—â–æ –≤–∏ —Ö–æ—á–µ—Ç–µ –æ—Ç—Ä–∏–º–∞—Ç–∏ PID –ø—Ä–æ—Ü–µ—Å—É –≤–∞—à–æ–≥–æ –¥–æ–¥–∞—Ç–∫—É, –≤–∏ –º–æ–∂–µ—Ç–µ –≤–∏–∫–æ–Ω–∞—Ç–∏:
```bash
adb shell ps
```
–Ü —à—É–∫–∞–π—Ç–µ —Å–≤—ñ–π –¥–æ–¥–∞—Ç–æ–∫

–ê–±–æ –≤–∏ –º–æ–∂–µ—Ç–µ –∑—Ä–æ–±–∏—Ç–∏
```bash
adb shell pidof com.your.application
```
–Ü –≤—ñ–Ω –≤–∏–≤–µ–¥–µ PID –ø—Ä–æ–≥—Ä–∞–º–∏

# System
```bash
adb root
```
–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—î –¥–µ–º–æ–Ω adbd –∑ –ø—Ä–∞–≤–∞–º–∏ root. –ü–æ—Ç—ñ–º –≤–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑–Ω–æ–≤—É –ø—ñ–¥–∫–ª—é—á–∏—Ç–∏—Å—è –¥–æ —Å–µ—Ä–≤–µ—Ä–∞ ADB, —ñ –≤–∏ –±—É–¥–µ—Ç–µ root (—è–∫—â–æ –¥–æ—Å—Ç—É–ø–Ω–æ)
```bash
adb sideload <update.zip>
```
flashing/restoring Android update.zip packages.

# Logs

## Logcat

–©–æ–± **–≤—ñ–¥—Ñ—ñ–ª—å—Ç—Ä—É–≤–∞—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ª–∏—à–µ –æ–¥–Ω–æ–≥–æ –¥–æ–¥–∞—Ç–∫—É**, –æ—Ç—Ä–∏–º–∞–π—Ç–µ PID –¥–æ–¥–∞—Ç–∫—É —Ç–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ grep (linux/macos) –∞–±–æ findstr (windows) –¥–ª—è —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó –≤–∏—Ö–æ–¥—É logcat:
```bash
adb logcat | grep 4526
adb logcat | findstr 4526
```
### adb logcat \[option] \[filter-specs]
```bash
adb logcat
```
Notes: –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å Ctrl-C, —â–æ–± –∑—É–ø–∏–Ω–∏—Ç–∏ –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥
```bash
adb logcat *:V # lowest priority, filter to only show Verbose level

adb logcat *:D #¬†filter to only show Debug level

adb logcat *:I #¬†filter to only show Info level

adb logcat *:W #¬†filter to only show Warning level

adb logcat *:E #¬†filter to only show Error level

adb logcat *:F # filter to only show Fatal level

adb logcat *:S #¬†Silent, highest priority, on which nothing is ever printed
```
### adb logcat -b \<Buffer>
```bash
adb logcat -b # radio View the buffer that contains radio/telephony related messages.

adb logcat -b #¬†event View the buffer containing events-related messages.

adb logcat -b #¬†main default

adb logcat -c #¬†Clears the entire log and exits.

adb logcat -d #¬†Dumps the log to the screen and exits.

adb logcat -f test.logs #¬†Writes log message output to test.logs .

adb logcat -g #¬†Prints the size of the specified log buffer and exits.

adb logcat -n <count> #¬†Sets the maximum number of rotated logs to <count>.
```
## dumpsys

–≤–∏–≤–∞–Ω—Ç–∞–∂—É—î —Å–∏—Å—Ç–µ–º–Ω—ñ –¥–∞–Ω—ñ

### adb shell dumpsys \[options]
```bash
adb shell dumpsys

adb shell dumpsys meminfo

adb shell dumpsys battery
```
Notes: –ú–æ–±—ñ–ª—å–Ω–∏–π –ø—Ä–∏—Å—Ç—Ä—ñ–π –∑ —É–≤—ñ–º–∫–Ω–µ–Ω–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ —Ä–æ–∑—Ä–æ–±–Ω–∏–∫–∞, —â–æ –ø—Ä–∞—Ü—é—î –Ω–∞ Android 5.0 –∞–±–æ –≤–∏—â–µ.
```bash
adb shell dumpsys batterystats collects battery data from your device
```
Notes: [Battery Historian](https://github.com/google/battery-historian) –ø–µ—Ä–µ—Ç–≤–æ—Ä—é—î —Ü—ñ –¥–∞–Ω—ñ –≤ HTML –≤—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—é. **STEP 1** _adb shell dumpsys batterystats > batterystats.txt_ **STEP 2** _python historian.py batterystats.txt > batterystats.html_
```bash
adb shell dumpsys batterystats --reset erases old collection data
```
adb shell dumpsys activity

# –†–µ–∑–µ—Ä–≤–Ω–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è

–†–µ–∑–µ—Ä–≤–Ω–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è Android-–ø—Ä–∏—Å—Ç—Ä–æ—é –∑ adb.
```bash
adb backup [-apk] [-shared] [-system] [-all] -f file.backup
# -apk -- Include APK from Third partie's applications
# -shared -- Include removable storage
# -system -- Include system Applciations
# -all -- Include all the applications

adb shell pm list packages -f -3      #List packages
adb backup -f myapp_backup.ab -apk com.myapp # backup on one device
adb restore myapp_backup.ab                  # restore to the same or any other device
```
–Ø–∫—â–æ –≤–∏ —Ö–æ—á–µ—Ç–µ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –≤–º—ñ—Å—Ç —Ä–µ–∑–µ—Ä–≤–Ω–æ—ó –∫–æ–ø—ñ—ó:
```bash
( printf "\x1f\x8b\x08\x00\x00\x00\x00\x00" ; tail -c +25 myapp_backup.ab ) |  tar xfvz -
```
{% hint style="success" %}
–í–∏–≤—á–∞–π—Ç–µ —Ç–∞ –ø—Ä–∞–∫—Ç–∏–∫—É–π—Ç–µ AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
–í–∏–≤—á–∞–π—Ç–µ —Ç–∞ –ø—Ä–∞–∫—Ç–∏–∫—É–π—Ç–µ GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>–ü—ñ–¥—Ç—Ä–∏–º–∞–π—Ç–µ HackTricks</summary>

* –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ [**–ø–ª–∞–Ω–∏ –ø—ñ–¥–ø–∏—Å–∫–∏**](https://github.com/sponsors/carlospolop)!
* **–ü—Ä–∏—î–¥–Ω—É–π—Ç–µ—Å—å –¥–æ** üí¨ [**–≥—Ä—É–ø–∏ Discord**](https://discord.gg/hRep4RUj7f) –∞–±–æ [**–≥—Ä—É–ø–∏ telegram**](https://t.me/peass) –∞–±–æ **—Å–ª—ñ–¥–∫—É–π—Ç–µ** –∑–∞ –Ω–∞–º–∏ –≤ **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **–î—ñ–ª—ñ—Ç—å—Å—è —Ö–∞–∫–µ—Ä—Å—å–∫–∏–º–∏ —Ç—Ä—é–∫–∞–º–∏, –Ω–∞–¥—Å–∏–ª–∞—é—á–∏ PR –¥–æ** [**HackTricks**](https://github.com/carlospolop/hacktricks) —Ç–∞ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó–≤ –Ω–∞ github.

</details>
{% endhint %}
