{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}


**AdbëŠ” ì¼ë°˜ì ìœ¼ë¡œ ë‹¤ìŒ ìœ„ì¹˜ì— ìˆìŠµë‹ˆë‹¤:**
```bash
#Windows
C:\Users\<username>\AppData\Local\Android\sdk\platform-tools\adb.exe

#MacOS
/Users/<username>/Library/Android/sdk/platform-tools/adb
```
**ì •ë³´ ì¶œì²˜:** [**http://adbshell.com/**](http://adbshell.com)

# ì—°ê²°
```
adb devices
```
ì´ ëª…ë ¹ì€ ì—°ê²°ëœ ì¥ì¹˜ë¥¼ ë‚˜ì—´í•©ë‹ˆë‹¤. "_**unauthorized**_"ê°€ ë‚˜íƒ€ë‚˜ë©´, ì´ëŠ” **ëª¨ë°”ì¼**ì˜ ì ê¸ˆì„ í•´ì œí•˜ê³  ì—°ê²°ì„ **ìˆ˜ë½**í•´ì•¼ í•¨ì„ ì˜ë¯¸í•©ë‹ˆë‹¤.

ì´ëŠ” ì¥ì¹˜ì— í¬íŠ¸ 5555ì—ì„œ adb ì„œë²„ë¥¼ ì‹œì‘í•´ì•¼ í•¨ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤:
```
adb tcpip 5555
```
í•´ë‹¹ IPì™€ í¬íŠ¸ì— ì—°ê²°:
```
adb connect <IP>:<PORT>
```
ê°€ìƒ Android ì†Œí”„íŠ¸ì›¨ì–´(ì˜ˆ: Genymotion)ì—ì„œ ë‹¤ìŒê³¼ ê°™ì€ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ë©´:
```
adb server version (41) doesn't match this client (36); killing...
```
ADB ì„œë²„ì— ë‹¤ë¥¸ ë²„ì „ìœ¼ë¡œ ì—°ê²°í•˜ë ¤ê³  í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ì†Œí”„íŠ¸ì›¨ì–´ê°€ ì‚¬ìš©í•˜ëŠ” adb ë°”ì´ë„ˆë¦¬ë¥¼ ì°¾ì•„ë³´ì„¸ìš” (C:\Program Files\Genymobile\Genymotionë¡œ ê°€ì„œ adb.exeë¥¼ ê²€ìƒ‰í•˜ì„¸ìš”).

## ì—¬ëŸ¬ ì¥ì¹˜

**ì—¬ëŸ¬ ì¥ì¹˜ê°€ ê·€í•˜ì˜ ë¨¸ì‹ ì— ì—°ê²°ë˜ì–´ ìˆëŠ” ê²½ìš°** ì–´ë–¤ ì¥ì¹˜ì—ì„œ adb ëª…ë ¹ì„ ì‹¤í–‰í•  ê²ƒì¸ì§€ **ì§€ì •í•´ì•¼** í•©ë‹ˆë‹¤.
```bash
adb devices
List of devices attached
10.10.10.247:42135	offline
127.0.0.1:5555	device
```

```bash
adb -s 127.0.0.1:5555 shell
x86_64:/ # whoami
root
```
## Port Tunneling

ì•ˆë“œë¡œì´ë“œ ì¥ì¹˜ì—ì„œ **adb** **í¬íŠ¸**ê°€ **localhost**ì—ì„œë§Œ **ì ‘ê·¼ ê°€ëŠ¥**í•˜ì§€ë§Œ **SSHë¥¼ í†µí•´ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ê²½ìš°**, **í¬íŠ¸ 5555ë¥¼ í¬ì›Œë”©**í•˜ê³  adbë¥¼ í†µí•´ ì—°ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:
```bash
ssh -i ssh_key username@10.10.10.10 -L 5555:127.0.0.1:5555 -p 2222
adb connect 127.0.0.1:5555
```
# íŒ¨í‚· ê´€ë¦¬ì

## ì„¤ì¹˜/ì œê±°

### adb install \[option] \<path>
```bash
adb install test.apk

adb install -l test.apk # forward lock application

adb install -r test.apk # replace existing application

adb install -t test.apk # allow test packages

adb install -s test.apk # install application on sdcard

adb install -d test.apk # allow version code downgrade

adb install -p test.apk # partial application install
```
### adb uninstall \[options] \<PACKAGE>
```bash
adb uninstall com.test.app

adb uninstall -k com.test.app Keep the data and cache directories around after package removal.
```
## íŒ¨í‚¤ì§€

ëª¨ë“  íŒ¨í‚¤ì§€ë¥¼ ì¶œë ¥í•˜ë©°, ì„ íƒì ìœ¼ë¡œ íŒ¨í‚¤ì§€ ì´ë¦„ì— \<FILTER> í…ìŠ¤íŠ¸ê°€ í¬í•¨ëœ íŒ¨í‚¤ì§€ë§Œ ì¶œë ¥í•©ë‹ˆë‹¤.

### adb shell pm list packages \[options] \<FILTER-STR>
```bash
adb shell pm list packages <FILTER-STR>

adb shell pm list packages -f <FILTER-STR> #See their associated file.

adb shell pm list packages -d <FILTER-STR> #Filter to only show disabled packages.

adb shell pm list packages -e <FILTER-STR> #Filter to only show enabled packages.

adb shell pm list packages -s <FILTER-STR> #Filter to only show system packages.

adb shell pm list packages -3 <FILTER-STR> #Filter to only show third party packages.

adb shell pm list packages -i <FILTER-STR> #See the installer for the packages.

adb shell pm list packages -u <FILTER-STR> #Also include uninstalled packages.

adb shell pm list packages --user <USER_ID> <FILTER-STR> #The user space to query.
```
### adb shell pm path \<PACKAGE>

ì£¼ì–´ì§„ APKì˜ ê²½ë¡œë¥¼ ì¶œë ¥í•©ë‹ˆë‹¤.
```bash
adb shell pm path com.android.phone
```
### adb shell pm clear \<PACKAGE>

íŒ¨í‚¤ì§€ì™€ ê´€ë ¨ëœ ëª¨ë“  ë°ì´í„°ë¥¼ ì‚­ì œí•©ë‹ˆë‹¤.
```bash
adb shell pm clear com.test.abc
```
# íŒŒì¼ ê´€ë¦¬ì

### adb pull \<remote> \[local]

ì§€ì •ëœ íŒŒì¼ì„ ì—ë®¬ë ˆì´í„°/ì¥ì¹˜ì—ì„œ ì»´í“¨í„°ë¡œ ë‹¤ìš´ë¡œë“œí•©ë‹ˆë‹¤.
```bash
adb pull /sdcard/demo.mp4 ./
```
### adb push \<local> \<remote>

ì§€ì •ëœ íŒŒì¼ì„ ì»´í“¨í„°ì—ì„œ ì—ë®¬ë ˆì´í„°/ì¥ì¹˜ë¡œ ì—…ë¡œë“œí•©ë‹ˆë‹¤.
```bash
adb push test.apk /sdcard
```
# Screencapture/Screenrecord

### adb shell screencap \<filename>

ë””ë°”ì´ìŠ¤ í™”ë©´ì˜ ìŠ¤í¬ë¦°ìƒ·ì„ ì°ìŠµë‹ˆë‹¤.
```bash
adb shell screencap /sdcard/screen.png
```
### adb shell screenrecord \[options] \<filename>

Android 4.4 (API level 19) ì´ìƒì—ì„œ ì‹¤í–‰ë˜ëŠ” ì¥ì¹˜ì˜ í™”ë©´ì„ ë…¹í™”í•©ë‹ˆë‹¤.
```bash
adb shell screenrecord /sdcard/demo.mp4
adb shell screenrecord --size <WIDTHxHEIGHT>
adb shell screenrecord --bit-rate <RATE>
adb shell screenrecord --time-limit <TIME> #Sets the maximum recording time, in seconds. The default and maximum value is 180 (3 minutes).
adb shell screenrecord --rotate # Rotates 90 degrees
adb shell screenrecord --verbose
```
(ë…¹í™”ë¥¼ ì¤‘ì§€í•˜ë ¤ë©´ Ctrl-Cë¥¼ ëˆ„ë¥´ì„¸ìš”)

**_**adb pull**_ì„ ì‚¬ìš©í•˜ì—¬ íŒŒì¼(ì´ë¯¸ì§€ ë° ë¹„ë””ì˜¤)ì„ ë‹¤ìš´ë¡œë“œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.**

# ì…¸

### adb ì…¸

ì¥ì¹˜ ë‚´ë¶€ì—ì„œ ì…¸ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.
```bash
adb shell
```
### adb shell \<CMD>

ë””ë°”ì´ìŠ¤ ë‚´ì—ì„œ ëª…ë ¹ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.
```bash
adb shell ls
```
## pm

ë‹¤ìŒ ëª…ë ¹ì€ ì…¸ ë‚´ì—ì„œ ì‹¤í–‰ë©ë‹ˆë‹¤.
```bash
pm list packages #List installed packages
pm path <package name> #Get the path to the apk file of tha package
am start [<options>] #Start an activity. Whiout options you can see the help menu
am startservice [<options>] #Start a service. Whiout options you can see the help menu
am broadcast [<options>] #Send a broadcast. Whiout options you can see the help menu
input [text|keyevent] #Send keystrokes to device
```
# Processes

ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ í”„ë¡œì„¸ìŠ¤ PIDë¥¼ ì–»ìœ¼ë ¤ë©´ ë‹¤ìŒì„ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:
```bash
adb shell ps
```
ê·¸ë¦¬ê³  ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ê²€ìƒ‰í•˜ì„¸ìš”

ë˜ëŠ” ë‹¤ìŒì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤
```bash
adb shell pidof com.your.application
```
ê·¸ë¦¬ê³  ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ PIDë¥¼ ì¶œë ¥í•©ë‹ˆë‹¤.

# ì‹œìŠ¤í…œ
```bash
adb root
```
adbd ë°ëª¬ì„ ë£¨íŠ¸ ê¶Œí•œìœ¼ë¡œ ì¬ì‹œì‘í•©ë‹ˆë‹¤. ê·¸ëŸ° ë‹¤ìŒ, ADB ì„œë²„ì— ë‹¤ì‹œ ì—°ê²°í•´ì•¼ í•˜ë©°, ë£¨íŠ¸ ê¶Œí•œì„ ê°€ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤(ê°€ëŠ¥í•œ ê²½ìš°).
```bash
adb sideload <update.zip>
```
flashing/restoring Android update.zip íŒ¨í‚¤ì§€.

# Logs

## Logcat

**í•˜ë‚˜ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë©”ì‹œì§€ë§Œ í•„í„°ë§í•˜ë ¤ë©´**, ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ PIDë¥¼ ê°€ì ¸ì˜¤ê³  grep (linux/macos) ë˜ëŠ” findstr (windows)ë¥¼ ì‚¬ìš©í•˜ì—¬ logcatì˜ ì¶œë ¥ì„ í•„í„°ë§í•˜ì‹­ì‹œì˜¤:
```bash
adb logcat | grep 4526
adb logcat | findstr 4526
```
### adb logcat \[option] \[filter-specs]
```bash
adb logcat
```
Notes: ëª¨ë‹ˆí„°ë¥¼ ì¤‘ì§€í•˜ë ¤ë©´ Ctrl-Cë¥¼ ëˆ„ë¥´ì„¸ìš”.
```bash
adb logcat *:V # lowest priority, filter to only show Verbose level

adb logcat *:D #Â filter to only show Debug level

adb logcat *:I #Â filter to only show Info level

adb logcat *:W #Â filter to only show Warning level

adb logcat *:E #Â filter to only show Error level

adb logcat *:F # filter to only show Fatal level

adb logcat *:S #Â Silent, highest priority, on which nothing is ever printed
```
### adb logcat -b \<Buffer>
```bash
adb logcat -b # radio View the buffer that contains radio/telephony related messages.

adb logcat -b #Â event View the buffer containing events-related messages.

adb logcat -b #Â main default

adb logcat -c #Â Clears the entire log and exits.

adb logcat -d #Â Dumps the log to the screen and exits.

adb logcat -f test.logs #Â Writes log message output to test.logs .

adb logcat -g #Â Prints the size of the specified log buffer and exits.

adb logcat -n <count> #Â Sets the maximum number of rotated logs to <count>.
```
## dumpsys

ì‹œìŠ¤í…œ ë°ì´í„° ë¤í”„

### adb shell dumpsys \[options]
```bash
adb shell dumpsys

adb shell dumpsys meminfo

adb shell dumpsys battery
```
Notes: Android 5.0 ì´ìƒì—ì„œ Developer Optionsê°€ í™œì„±í™”ëœ ëª¨ë°”ì¼ ì¥ì¹˜.
```bash
adb shell dumpsys batterystats collects battery data from your device
```
Notes: [Battery Historian](https://github.com/google/battery-historian)ëŠ” í•´ë‹¹ ë°ì´í„°ë¥¼ HTML ì‹œê°í™”ë¡œ ë³€í™˜í•©ë‹ˆë‹¤. **STEP 1** _adb shell dumpsys batterystats > batterystats.txt_ **STEP 2** _python historian.py batterystats.txt > batterystats.html_
```bash
adb shell dumpsys batterystats --reset erases old collection data
```
adb shell dumpsys activity

# ë°±ì—…

adbë¥¼ í†µí•´ ì•ˆë“œë¡œì´ë“œ ê¸°ê¸°ë¥¼ ë°±ì—…í•©ë‹ˆë‹¤.
```bash
adb backup [-apk] [-shared] [-system] [-all] -f file.backup
# -apk -- Include APK from Third partie's applications
# -shared -- Include removable storage
# -system -- Include system Applciations
# -all -- Include all the applications

adb shell pm list packages -f -3      #List packages
adb backup -f myapp_backup.ab -apk com.myapp # backup on one device
adb restore myapp_backup.ab                  # restore to the same or any other device
```
ë°±ì—…ì˜ ë‚´ìš©ì„ ê²€ì‚¬í•˜ë ¤ë©´:
```bash
( printf "\x1f\x8b\x08\x00\x00\x00\x00\x00" ; tail -c +25 myapp_backup.ab ) |  tar xfvz -
```
{% hint style="success" %}
AWS í•´í‚¹ ë°°ìš°ê¸° ë° ì—°ìŠµí•˜ê¸°:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
GCP í•´í‚¹ ë°°ìš°ê¸° ë° ì—°ìŠµí•˜ê¸°: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks ì§€ì›í•˜ê¸°</summary>

* [**êµ¬ë… ê³„íš**](https://github.com/sponsors/carlospolop) í™•ì¸í•˜ê¸°!
* **ğŸ’¬ [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— ì°¸ì—¬í•˜ê±°ë‚˜ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**ë¥¼ íŒ”ë¡œìš°í•˜ì„¸ìš”.**
* **[**HackTricks**](https://github.com/carlospolop/hacktricks) ë° [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) ê¹ƒí—ˆë¸Œ ë¦¬í¬ì§€í† ë¦¬ì— PRì„ ì œì¶œí•˜ì—¬ í•´í‚¹ íŠ¸ë¦­ì„ ê³µìœ í•˜ì„¸ìš”.**

</details>
{% endhint %}
