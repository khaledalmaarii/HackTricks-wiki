# ìƒì²´ ì¸ì¦ ìš°íšŒ (ì•ˆë“œë¡œì´ë“œ)

{% hint style="success" %}
AWS í•´í‚¹ ë°°ìš°ê¸° ë° ì—°ìŠµí•˜ê¸°:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
GCP í•´í‚¹ ë°°ìš°ê¸° ë° ì—°ìŠµí•˜ê¸°: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks ì§€ì›í•˜ê¸°</summary>

* [**êµ¬ë… ê³„íš**](https://github.com/sponsors/carlospolop) í™•ì¸í•˜ê¸°!
* **ğŸ’¬ [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— ì°¸ì—¬í•˜ê±°ë‚˜ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**ë¥¼ íŒ”ë¡œìš°í•˜ì„¸ìš”.**
* **[**HackTricks**](https://github.com/carlospolop/hacktricks) ë° [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) ê¹ƒí—ˆë¸Œ ë¦¬í¬ì§€í† ë¦¬ì— PRì„ ì œì¶œí•˜ì—¬ í•´í‚¹ íŠ¸ë¦­ì„ ê³µìœ í•˜ì„¸ìš”.**

</details>
{% endhint %}

## **ë°©ë²• 1 â€“ ì•”í˜¸í™” ê°ì²´ ì‚¬ìš© ì—†ì´ ìš°íšŒí•˜ê¸°**

ì—¬ê¸°ì„œì˜ ì´ˆì ì€ ì¸ì¦ ê³¼ì •ì—ì„œ ì¤‘ìš”í•œ *onAuthenticationSucceeded* ì½œë°±ì…ë‹ˆë‹¤. WithSecureì˜ ì—°êµ¬ìë“¤ì€ NULL *CryptoObject*ë¥¼ *onAuthenticationSucceeded(...)*ì—ì„œ ìš°íšŒí•  ìˆ˜ ìˆëŠ” [Frida ìŠ¤í¬ë¦½íŠ¸](https://github.com/WithSecureLABS/android-keystore-audit/blob/master/frida-scripts/fingerprint-bypass.js)ë¥¼ ê°œë°œí–ˆìŠµë‹ˆë‹¤. ì´ ìŠ¤í¬ë¦½íŠ¸ëŠ” ë©”ì„œë“œ í˜¸ì¶œ ì‹œ ì§€ë¬¸ ì¸ì¦ì„ ìë™ìœ¼ë¡œ ìš°íšŒí•˜ë„ë¡ ê°•ì œí•©ë‹ˆë‹¤. ì•„ë˜ëŠ” ì•ˆë“œë¡œì´ë“œ ì§€ë¬¸ ì»¨í…ìŠ¤íŠ¸ì—ì„œ ìš°íšŒë¥¼ ë³´ì—¬ì£¼ëŠ” ê°„ë‹¨í•œ ì½”ë“œ ì¡°ê°ì´ë©°, ì „ì²´ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ [GitHub](https://github.com/St3v3nsS/InsecureBanking)ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
```javascript
biometricPrompt = new BiometricPrompt(this, executor, new BiometricPrompt.AuthenticationCallback() {
@Override
public void onAuthenticationSucceeded(@NonNull BiometricPrompt.AuthenticationResult result) {
Toast.makeText(MainActivity.this,"Success",Toast.LENGTH_LONG).show();
}
});
```
Frida ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰í•˜ëŠ” ëª…ë ¹:
```bash
frida -U -f com.generic.insecurebankingfingerprint --no-pause -l fingerprint-bypass.js
```
## **ë°©ë²• 2 â€“ ì˜ˆì™¸ ì²˜ë¦¬ ì ‘ê·¼ë²•**

ë˜ ë‹¤ë¥¸ [Frida ìŠ¤í¬ë¦½íŠ¸](https://github.com/WithSecureLABS/android-keystore-audit/blob/master/frida-scripts/fingerprint-bypass-via-exception-handling.js)ì¸ WithSecureëŠ” ì•ˆì „í•˜ì§€ ì•Šì€ ì•”í˜¸í™” ê°ì²´ ì‚¬ìš©ì„ ìš°íšŒí•˜ëŠ” ë°©ë²•ì„ ë‹¤ë£¹ë‹ˆë‹¤. ì´ ìŠ¤í¬ë¦½íŠ¸ëŠ” ì§€ë¬¸ìœ¼ë¡œ ì¸ì¦ë˜ì§€ ì•Šì€ *CryptoObject*ì™€ í•¨ê»˜ *onAuthenticationSucceeded*ë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤. ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ë‹¤ë¥¸ ì•”í˜¸ ê°ì²´ë¥¼ ì‚¬ìš©í•˜ë ¤ê³  í•˜ë©´ ì˜ˆì™¸ê°€ ë°œìƒí•©ë‹ˆë‹¤. ì´ ìŠ¤í¬ë¦½íŠ¸ëŠ” *onAuthenticationSucceeded*ë¥¼ í˜¸ì¶œí•˜ê³  _Cipher_ í´ë˜ìŠ¤ì—ì„œ *javax.crypto.IllegalBlockSizeException*ì„ ì²˜ë¦¬í•  ì¤€ë¹„ë¥¼ í•˜ì—¬, ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì‚¬ìš©ë˜ëŠ” í›„ì† ê°ì²´ê°€ ìƒˆë¡œìš´ í‚¤ë¡œ ì•”í˜¸í™”ë˜ë„ë¡ ë³´ì¥í•©ë‹ˆë‹¤.

Frida ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰í•˜ëŠ” ëª…ë ¹:
```bash
frida -U -f com.generic.insecurebankingfingerprint --no-pause -l fingerprint-bypass-via-exception-handling.js
```
ì§€ë¬¸ í™”ë©´ì— ë„ë‹¬í•˜ê³  `authenticate()`ê°€ ì‹œì‘ë˜ë©´, Frida ì½˜ì†”ì— `bypass()`ë¥¼ ì…ë ¥í•˜ì—¬ ìš°íšŒ ê¸°ëŠ¥ì„ í™œì„±í™”í•©ë‹ˆë‹¤:
```
Spawning com.generic.insecurebankingfingerprint...
[Android Emulator 5554::com.generic.insecurebankingfingerprint]-> Hooking BiometricPrompt.authenticate()...
Hooking BiometricPrompt.authenticate2()...
Hooking FingerprintManager.authenticate()...
[Android Emulator 5554::com.generic.insecurebankingfingerprint]-> bypass()
```
## **Method 3 â€“ Instrumentation Frameworks**

Xposed ë˜ëŠ” Fridaì™€ ê°™ì€ ë„êµ¬ëŠ” ëŸ°íƒ€ì„ì— ì• í”Œë¦¬ì¼€ì´ì…˜ ë©”ì„œë“œì— í›„í‚¹í•˜ëŠ” ë° ì‚¬ìš©ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì§€ë¬¸ ì¸ì¦ì˜ ê²½ìš°, ì´ëŸ¬í•œ í”„ë ˆì„ì›Œí¬ëŠ”:

1. **ì¸ì¦ ì½œë°± ëª¨ì˜**: `BiometricPrompt.AuthenticationCallback`ì˜ `onAuthenticationSucceeded`, `onAuthenticationFailed` ë˜ëŠ” `onAuthenticationError` ë©”ì„œë“œì— í›„í‚¹í•˜ì—¬ ì§€ë¬¸ ì¸ì¦ í”„ë¡œì„¸ìŠ¤ì˜ ê²°ê³¼ë¥¼ ì œì–´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
2. **SSL í•€ë‹ ìš°íšŒ**: ì´ë¥¼ í†µí•´ ê³µê²©ìëŠ” í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ ê°„ì˜ íŠ¸ë˜í”½ì„ ê°€ë¡œì±„ê³  ìˆ˜ì •í•  ìˆ˜ ìˆìœ¼ë©°, ì¸ì¦ í”„ë¡œì„¸ìŠ¤ë¥¼ ë³€ê²½í•˜ê±°ë‚˜ ë¯¼ê°í•œ ë°ì´í„°ë¥¼ íƒˆì·¨í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

Fridaì˜ ì˜ˆì œ ëª…ë ¹:
```bash
frida -U -l script-to-bypass-authentication.js --no-pause -f com.generic.in
```
## **ë°©ë²• 4 â€“ ë¦¬ë²„ìŠ¤ ì—”ì§€ë‹ˆì–´ë§ ë° ì½”ë“œ ìˆ˜ì •**

`APKTool`, `dex2jar`, `JD-GUI`ì™€ ê°™ì€ ë¦¬ë²„ìŠ¤ ì—”ì§€ë‹ˆì–´ë§ ë„êµ¬ë¥¼ ì‚¬ìš©í•˜ì—¬ Android ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë””ì»´íŒŒì¼í•˜ê³ , ì†ŒìŠ¤ ì½”ë“œë¥¼ ì½ê³ , ì¸ì¦ ë©”ì»¤ë‹ˆì¦˜ì„ ì´í•´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¼ë°˜ì ì¸ ë‹¨ê³„ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:

1. **APK ë””ì»´íŒŒì¼**: APK íŒŒì¼ì„ ë” ì¸ê°„ì´ ì½ê¸° ì‰¬ìš´ í˜•ì‹(ì˜ˆ: Java ì½”ë“œ)ìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.
2. **ì½”ë“œ ë¶„ì„**: ì§€ë¬¸ ì¸ì¦ êµ¬í˜„ì„ ì°¾ì•„ë³´ê³  ì ì¬ì ì¸ ì•½ì (ì˜ˆ: ëŒ€ì²´ ë©”ì»¤ë‹ˆì¦˜ ë˜ëŠ” ë¶€ì ì ˆí•œ ê²€ì¦ ê²€ì‚¬)ì„ ì‹ë³„í•©ë‹ˆë‹¤.
3. **APK ì¬ì»´íŒŒì¼**: ì§€ë¬¸ ì¸ì¦ì„ ìš°íšŒí•˜ë„ë¡ ì½”ë“œë¥¼ ìˆ˜ì •í•œ í›„, ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì¬ì»´íŒŒì¼í•˜ê³  ì„œëª…í•œ ë‹¤ìŒ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ ì¥ì¹˜ì— ì„¤ì¹˜í•©ë‹ˆë‹¤.

## **ë°©ë²• 5 â€“ ì‚¬ìš©ì ì •ì˜ ì¸ì¦ ë„êµ¬ ì‚¬ìš©**

ì¸ì¦ ë©”ì»¤ë‹ˆì¦˜ì„ í…ŒìŠ¤íŠ¸í•˜ê³  ìš°íšŒí•˜ë„ë¡ ì„¤ê³„ëœ ì „ë¬¸ ë„êµ¬ì™€ ìŠ¤í¬ë¦½íŠ¸ê°€ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´:

1. **MAGISK ëª¨ë“ˆ**: MAGISKëŠ” ì‚¬ìš©ìê°€ ì¥ì¹˜ë¥¼ ë£¨íŒ…í•˜ê³  ì§€ë¬¸ì„ í¬í•¨í•œ í•˜ë“œì›¨ì–´ ìˆ˜ì¤€ ì •ë³´ë¥¼ ìˆ˜ì •í•˜ê±°ë‚˜ ìŠ¤í‘¸í•‘í•  ìˆ˜ ìˆëŠ” ëª¨ë“ˆì„ ì¶”ê°€í•  ìˆ˜ ìˆëŠ” Android ë„êµ¬ì…ë‹ˆë‹¤.
2. **ì‚¬ìš©ì ì •ì˜ ìŠ¤í¬ë¦½íŠ¸**: Android Debug Bridge(ADB)ì™€ ìƒí˜¸ ì‘ìš©í•˜ê±°ë‚˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë°±ì—”ë“œì™€ ì§ì ‘ ìƒí˜¸ ì‘ìš©í•˜ì—¬ ì§€ë¬¸ ì¸ì¦ì„ ì‹œë®¬ë ˆì´ì…˜í•˜ê±°ë‚˜ ìš°íšŒí•˜ëŠ” ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## ì°¸ê³  ë¬¸í—Œ
* [https://securitycafe.ro/2022/09/05/mobile-pentesting-101-bypassing-biometric-authentication/](https://securitycafe.ro/2022/09/05/mobile-pentesting-101-bypassing-biometric-authentication/)

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
