# Biyometrik Kimlik DoÄŸrulamasÄ±nÄ± Atlatma (Android)

{% hint style="success" %}
AWS Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks EÄŸitim AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ± (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
GCP Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks EÄŸitim GCP KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ± (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* **ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n ya da **Twitter'da** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**'i takip edin.**
* **Hacking ipuÃ§larÄ±nÄ± paylaÅŸmak iÃ§in** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna PR gÃ¶nderin.

</details>
{% endhint %}

## **YÃ¶ntem 1 â€“ Kripto Nesne KullanÄ±mÄ± Olmadan Atlatma**

Burada odak noktasÄ±, kimlik doÄŸrulama sÃ¼recinde kritik Ã¶neme sahip olan *onAuthenticationSucceeded* geri Ã§aÄŸrÄ±sÄ±dÄ±r. WithSecure'daki araÅŸtÄ±rmacÄ±lar, *onAuthenticationSucceeded(...)* iÃ§indeki NULL *CryptoObject*'in atlatÄ±lmasÄ±nÄ± saÄŸlayan bir [Frida scripti](https://github.com/WithSecureLABS/android-keystore-audit/blob/master/frida-scripts/fingerprint-bypass.js) geliÅŸtirdiler. Script, metodun Ã§aÄŸrÄ±lmasÄ±yla birlikte parmak izi kimlik doÄŸrulamasÄ±nÄ±n otomatik olarak atlatÄ±lmasÄ±nÄ± zorlar. AÅŸaÄŸÄ±da, bir Android Parmak Ä°zi baÄŸlamÄ±nda atlatmayÄ± gÃ¶steren basitleÅŸtirilmiÅŸ bir kod parÃ§asÄ± bulunmaktadÄ±r; tam uygulama [GitHub](https://github.com/St3v3nsS/InsecureBanking)'da mevcuttur.
```javascript
biometricPrompt = new BiometricPrompt(this, executor, new BiometricPrompt.AuthenticationCallback() {
@Override
public void onAuthenticationSucceeded(@NonNull BiometricPrompt.AuthenticationResult result) {
Toast.makeText(MainActivity.this,"Success",Toast.LENGTH_LONG).show();
}
});
```
Frida betiÄŸini Ã§alÄ±ÅŸtÄ±rmak iÃ§in komut:
```bash
frida -U -f com.generic.insecurebankingfingerprint --no-pause -l fingerprint-bypass.js
```
## **YÃ¶ntem 2 â€“ Ä°stisna YÃ¶netimi YaklaÅŸÄ±mÄ±**

WithSecure tarafÄ±ndan yazÄ±lan baÅŸka bir [Frida script](https://github.com/WithSecureLABS/android-keystore-audit/blob/master/frida-scripts/fingerprint-bypass-via-exception-handling.js), gÃ¼vensiz kripto nesne kullanÄ±mÄ±nÄ± atlatmayÄ± ele alÄ±yor. Script, parmak izi ile yetkilendirilmemiÅŸ bir *CryptoObject* ile *onAuthenticationSucceeded*'i Ã§aÄŸÄ±rÄ±r. Uygulama farklÄ± bir ÅŸifreleme nesnesi kullanmaya Ã§alÄ±ÅŸÄ±rsa, bir istisna tetiklenecektir. Script, *onAuthenticationSucceeded*'i Ã§aÄŸÄ±rmaya ve _Cipher_ sÄ±nÄ±fÄ±ndaki *javax.crypto.IllegalBlockSizeException*'Ä± yÃ¶netmeye hazÄ±rlanÄ±r, bÃ¶ylece uygulama tarafÄ±ndan kullanÄ±lan sonraki nesnelerin yeni anahtar ile ÅŸifrelenmesini saÄŸlar.

Frida script'ini Ã§alÄ±ÅŸtÄ±rmak iÃ§in komut:
```bash
frida -U -f com.generic.insecurebankingfingerprint --no-pause -l fingerprint-bypass-via-exception-handling.js
```
Parmak izi ekranÄ±na ulaÅŸtÄ±ÄŸÄ±nÄ±zda ve `authenticate()` baÅŸlatÄ±ldÄ±ÄŸÄ±nda, bypass'Ä± etkinleÅŸtirmek iÃ§in Frida konsoluna `bypass()` yazÄ±n:
```
Spawning com.generic.insecurebankingfingerprint...
[Android Emulator 5554::com.generic.insecurebankingfingerprint]-> Hooking BiometricPrompt.authenticate()...
Hooking BiometricPrompt.authenticate2()...
Hooking FingerprintManager.authenticate()...
[Android Emulator 5554::com.generic.insecurebankingfingerprint]-> bypass()
```
## **YÃ¶ntem 3 â€“ EnstrÃ¼mantasyon Ã‡erÃ§eveleri**

Xposed veya Frida gibi enstrÃ¼mantasyon Ã§erÃ§eveleri, uygulama yÃ¶ntemlerine Ã§alÄ±ÅŸma zamanÄ±nda baÄŸlanmak iÃ§in kullanÄ±labilir. Parmak izi kimlik doÄŸrulamasÄ± iÃ§in bu Ã§erÃ§eveler:

1. **Kimlik DoÄŸrulama Geri AramalarÄ±nÄ± Taklit Etme**: `BiometricPrompt.AuthenticationCallback`'Ä±n `onAuthenticationSucceeded`, `onAuthenticationFailed` veya `onAuthenticationError` yÃ¶ntemlerine baÄŸlanarak, parmak izi kimlik doÄŸrulama sÃ¼recinin sonucunu kontrol edebilirsiniz.
2. **SSL Pinning'i Atlatma**: Bu, bir saldÄ±rganÄ±n istemci ile sunucu arasÄ±ndaki trafiÄŸi kesip deÄŸiÅŸtirmesine olanak tanÄ±r, bu da kimlik doÄŸrulama sÃ¼recini deÄŸiÅŸtirebilir veya hassas verileri Ã§alabilir.

Frida iÃ§in Ã¶rnek komut:
```bash
frida -U -l script-to-bypass-authentication.js --no-pause -f com.generic.in
```
## **YÃ¶ntem 4 â€“ Tersine MÃ¼hendislik ve Kod DeÄŸiÅŸtirme**

`APKTool`, `dex2jar` ve `JD-GUI` gibi tersine mÃ¼hendislik araÃ§larÄ±, bir Android uygulamasÄ±nÄ± decompile etmek, kaynak kodunu okumak ve kimlik doÄŸrulama mekanizmasÄ±nÄ± anlamak iÃ§in kullanÄ±labilir. AdÄ±mlar genellikle ÅŸunlarÄ± iÃ§erir:

1. **APK'yÄ± Decompile Etme**: APK dosyasÄ±nÄ± daha okunabilir bir formata (Java kodu gibi) dÃ¶nÃ¼ÅŸtÃ¼rme.
2. **Kodu Analiz Etme**: parmak izi kimlik doÄŸrulama uygulamasÄ±nÄ± arama ve potansiyel zayÄ±flÄ±klarÄ± (yedekleme mekanizmalarÄ± veya uygunsuz doÄŸrulama kontrolleri gibi) belirleme.
3. **APK'yÄ± Yeniden Derleme**: Parmak izi kimlik doÄŸrulamayÄ± atlamak iÃ§in kodu deÄŸiÅŸtirdikten sonra, uygulama yeniden derlenir, imzalanÄ±r ve test iÃ§in cihaza yÃ¼klenir.

## **YÃ¶ntem 5 â€“ Ã–zel Kimlik DoÄŸrulama AraÃ§larÄ± Kullanma**

Kimlik doÄŸrulama mekanizmalarÄ±nÄ± test etmek ve atlamak iÃ§in tasarlanmÄ±ÅŸ Ã¶zel araÃ§lar ve betikler vardÄ±r. Ã–rneÄŸin:

1. **MAGISK ModÃ¼lleri**: MAGISK, kullanÄ±cÄ±larÄ±n cihazlarÄ±nÄ± rootlamasÄ±na ve parmak izleri de dahil olmak Ã¼zere donanÄ±m dÃ¼zeyindeki bilgileri deÄŸiÅŸtirebilen veya taklit edebilen modÃ¼ller eklemesine olanak tanÄ±yan bir Android aracÄ±dÄ±r.
2. **Ã–zel YapÄ±m Betikler**: Android Debug Bridge (ADB) ile etkileÅŸimde bulunmak veya uygulamanÄ±n arka ucuyla doÄŸrudan etkileÅŸimde bulunarak parmak izi kimlik doÄŸrulamayÄ± simÃ¼le etmek veya atlamak iÃ§in betikler yazÄ±labilir.

## Referanslar
* [https://securitycafe.ro/2022/09/05/mobile-pentesting-101-bypassing-biometric-authentication/](https://securitycafe.ro/2022/09/05/mobile-pentesting-101-bypassing-biometric-authentication/)

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
