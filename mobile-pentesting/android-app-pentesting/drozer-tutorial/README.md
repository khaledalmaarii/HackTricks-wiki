# Drozer íŠœí† ë¦¬ì–¼

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong>ë¥¼ í†µí•´ AWS í•´í‚¹ì„ ì²˜ìŒë¶€í„° ì „ë¬¸ê°€ê¹Œì§€ ë°°ì›Œë³´ì„¸ìš”<strong>!</strong></summary>

HackTricksë¥¼ ì§€ì›í•˜ëŠ” ë‹¤ë¥¸ ë°©ë²•:

* **íšŒì‚¬ë¥¼ HackTricksì—ì„œ ê´‘ê³ í•˜ê±°ë‚˜ HackTricksë¥¼ PDFë¡œ ë‹¤ìš´ë¡œë“œ**í•˜ë ¤ë©´ [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)ë¥¼ í™•ì¸í•˜ì„¸ìš”!
* [**ê³µì‹ PEASS & HackTricks ìŠ¤ì›¨ê·¸**](https://peass.creator-spring.com)ë¥¼ ì–»ìœ¼ì„¸ìš”.
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ë¥¼ ë°œê²¬í•˜ì„¸ìš”. ë…ì ì ì¸ [**NFTs**](https://opensea.io/collection/the-peass-family) ì»¬ë ‰ì…˜ì…ë‹ˆë‹¤.
* ğŸ’¬ [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— **ì°¸ì—¬**í•˜ê±°ë‚˜ **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)**ë¥¼** **íŒ”ë¡œìš°**í•˜ì„¸ìš”.
* **HackTricks**ì™€ **HackTricks Cloud** github ì €ì¥ì†Œì— PRì„ ì œì¶œí•˜ì—¬ **í•´í‚¹ íŠ¸ë¦­ì„ ê³µìœ **í•˜ì„¸ìš”.

</details>

<img src="../../../.gitbook/assets/i3.png" alt="" data-size="original">

**ë²„ê·¸ ë°”ìš´í‹° íŒ**: **í•´ì»¤ë“¤ì´ ë§Œë“  í”„ë¦¬ë¯¸ì—„ ë²„ê·¸ ë°”ìš´í‹° í”Œë«í¼ì¸ Intigritiì— ê°€ì…**í•˜ì„¸ìš”! ì˜¤ëŠ˜ [**https://go.intigriti.com/hacktricks**](https://go.intigriti.com/hacktricks)ì—ì„œ ê°€ì…í•˜ê³  ìµœëŒ€ **$100,000**ì˜ ë°”ìš´í‹°ë¥¼ ë°›ìœ¼ì„¸ìš”!

{% embed url="https://go.intigriti.com/hacktricks" %}

## í…ŒìŠ¤íŠ¸ìš© APKs

* [Sieve](https://github.com/mwrlabs/drozer/releases/download/2.3.4/sieve.apk) (mrwlabsì—ì„œ ì œê³µ)
* [DIVA](https://payatu.com/wp-content/uploads/2016/01/diva-beta.tar.gz)


**ì´ íŠœí† ë¦¬ì–¼ì˜ ì¼ë¶€ëŠ” [Drozer ë¬¸ì„œ pdf](https://labs.withsecure.com/content/dam/labs/docs/mwri-drozer-user-guide-2015-03-23.pdf)ì—ì„œ ì¶”ì¶œë˜ì—ˆìŠµë‹ˆë‹¤.**

## ì„¤ì¹˜

í˜¸ìŠ¤íŠ¸ì— Drozer í´ë¼ì´ì–¸íŠ¸ë¥¼ ì„¤ì¹˜í•˜ì„¸ìš”. [ìµœì‹  ë¦´ë¦¬ìŠ¤](https://github.com/mwrlabs/drozer/releases)ì—ì„œ ë‹¤ìš´ë¡œë“œí•˜ì„¸ìš”.
```bash
pip install drozer-2.4.4-py2-none-any.whl
pip install twisted
pip install service_identity
```
[ìµœì‹  ë¦´ë¦¬ìŠ¤](https://github.com/mwrlabs/drozer/releases)ì—ì„œ drozer APKë¥¼ ë‹¤ìš´ë¡œë“œí•˜ê³  ì„¤ì¹˜í•˜ì„¸ìš”. í˜„ì¬ ë²„ì „ì€ [ì—¬ê¸°](https://github.com/mwrlabs/drozer/releases/download/2.3.4/drozer-agent-2.3.4.apk)ì…ë‹ˆë‹¤.
```bash
adb install drozer.apk
```
### ì„œë²„ ì‹œì‘í•˜ê¸°

ì—ì´ì „íŠ¸ëŠ” í¬íŠ¸ 31415ì—ì„œ ì‹¤í–‰ ì¤‘ì´ë©°, Drozer í´ë¼ì´ì–¸íŠ¸ì™€ ì—ì´ì „íŠ¸ ê°„ì˜ í†µì‹ ì„ ìˆ˜ë¦½í•˜ê¸° ìœ„í•´ [í¬íŠ¸ í¬ì›Œë”©](https://en.wikipedia.org/wiki/Port\_forwarding)ì´ í•„ìš”í•©ë‹ˆë‹¤. ë‹¤ìŒì€ ì´ë¥¼ ìˆ˜í–‰í•˜ê¸° ìœ„í•œ ëª…ë ¹ì–´ì…ë‹ˆë‹¤:
```bash
adb forward tcp:31415 tcp:31415
```
ë§ˆì§€ë§‰ìœ¼ë¡œ, **ì• í”Œë¦¬ì¼€ì´ì…˜**ì„ **ì‹¤í–‰**í•˜ê³  "**ON**" ë²„íŠ¼ì„ ëˆ„ë¥´ì„¸ìš”.

![](<../../../.gitbook/assets/image (63).png>)

ê·¸ë¦¬ê³  ì´ì— ì—°ê²°í•˜ì„¸ìš”:
```bash
drozer console connect
```
## í¥ë¯¸ë¡œìš´ ëª…ë ¹ì–´

| **ëª…ë ¹ì–´**    | **ì„¤ëª…**                                                                                                                                        |
| --------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------ |
| **Help MODULE** | ì„ íƒí•œ ëª¨ë“ˆì˜ ë„ì›€ë§ì„ í‘œì‹œí•©ë‹ˆë‹¤.                                                                                                                      |
| **list**        | í˜„ì¬ ì„¸ì…˜ì—ì„œ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” ëª¨ë“  drozer ëª¨ë“ˆì˜ ëª©ë¡ì„ í‘œì‹œí•©ë‹ˆë‹¤. ì´ ëª…ë ¹ì€ ì ì ˆí•œ ê¶Œí•œì´ ì—†ëŠ” ëª¨ë“ˆì„ ìˆ¨ê¹ë‹ˆë‹¤. |
| **shell**       | ì—ì´ì „íŠ¸ì˜ ì»¨í…ìŠ¤íŠ¸ì—ì„œ ë””ë°”ì´ìŠ¤ì—ì„œ ëŒ€í™”í˜• Linux ì‰˜ì„ ì‹œì‘í•©ë‹ˆë‹¤.                                                                           |
| **clean**       | drozerê°€ ì•ˆë“œë¡œì´ë“œ ì¥ì¹˜ì— ì €ì¥í•œ ì„ì‹œ íŒŒì¼ì„ ì œê±°í•©ë‹ˆë‹¤.                                                                                         |
| **load**        | drozer ëª…ë ¹ì„ í¬í•¨í•˜ëŠ” íŒŒì¼ì„ ë¡œë“œí•˜ê³  ìˆœì°¨ì ìœ¼ë¡œ ì‹¤í–‰í•©ë‹ˆë‹¤.                                                                                   |
| **module**      | ì¸í„°ë„·ì—ì„œ ì¶”ê°€ì ì¸ drozer ëª¨ë“ˆì„ ì°¾ì•„ ì„¤ì¹˜í•©ë‹ˆë‹¤.                                                                                          |
| **unset**       | drozerê°€ ìƒì„±í•˜ëŠ” ëª¨ë“  Linux ì‰˜ì— ì „ë‹¬ë˜ëŠ” ì´ë¦„ì´ ì§€ì •ëœ ë³€ìˆ˜ë¥¼ ì œê±°í•©ë‹ˆë‹¤.                                                                         |
| **set**         | drozerì— ì˜í•´ ìƒì„±ëœ ëª¨ë“  Linux ì‰˜ì— í™˜ê²½ ë³€ìˆ˜ë¡œ ì „ë‹¬ë  ê°’ì„ ë³€ìˆ˜ì— ì €ì¥í•©ë‹ˆë‹¤.                                   |
| **shell**       | ì—ì´ì „íŠ¸ì˜ ì»¨í…ìŠ¤íŠ¸ì—ì„œ ë””ë°”ì´ìŠ¤ì—ì„œ ëŒ€í™”í˜• Linux ì‰˜ì„ ì‹œì‘í•©ë‹ˆë‹¤.                                                                            |
| **run MODULE**  | drozer ëª¨ë“ˆì„ ì‹¤í–‰í•©ë‹ˆë‹¤.                                                                                                                                |
| **exploit**     | drozerëŠ” ë””ë°”ì´ìŠ¤ì—ì„œ ì‹¤í–‰í•  exploitsë¥¼ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. `drozer exploit list`                                                                             |
| **payload**     | exploitsëŠ” í˜ì´ë¡œë“œê°€ í•„ìš”í•©ë‹ˆë‹¤. `drozer payload list`                                                                                                     |

### íŒ¨í‚¤ì§€

ì´ë¦„ì˜ ì¼ë¶€ë¡œ í•„í„°ë§í•˜ì—¬ íŒ¨í‚¤ì§€ì˜ **ì´ë¦„**ì„ ì°¾ìŠµë‹ˆë‹¤:
```bash
dz> run app.package.list -f sieve
com.mwr.example.sieve
```
**íŒ¨í‚¤ì§€ì˜ ê¸°ë³¸ ì •ë³´**:

- **Package Name**: com.example.app
- **Version Name**: 1.0
- **Version Code**: 1
- **Target SDK Version**: 28
- **Min SDK Version**: 21
- **Permissions**: INTERNET, ACCESS_NETWORK_STATE, READ_EXTERNAL_STORAGE, WRITE_EXTERNAL_STORAGE

**íŒ¨í‚¤ì§€ì˜ ê¸°ë³¸ ì •ë³´**:

- **íŒ¨í‚¤ì§€ ì´ë¦„**: com.example.app
- **ë²„ì „ ì´ë¦„**: 1.0
- **ë²„ì „ ì½”ë“œ**: 1
- **ëŒ€ìƒ SDK ë²„ì „**: 28
- **ìµœì†Œ SDK ë²„ì „**: 21
- **í—ˆê°€ ê¶Œí•œ**: INTERNET, ACCESS_NETWORK_STATE, READ_EXTERNAL_STORAGE, WRITE_EXTERNAL_STORAGE
```bash
dz> run app.package.info -a com.mwr.example.sieve
Package: com.mwr.example.sieve
Process Name: com.mwr.example.sieve
Version: 1.0
Data Directory: /data/data/com.mwr.example.sieve
APK Path: /data/app/com.mwr.example.sieve-2.apk
UID: 10056
GID: [1028, 1015, 3003]
Shared Libraries: null
Shared User ID: null
Uses Permissions:
- android.permission.READ_EXTERNAL_STORAGE
- android.permission.WRITE_EXTERNAL_STORAGE
- android.permission.INTERNET
Defines Permissions:
- com.mwr.example.sieve.READ_KEYS
- com.mwr.example.sieve.WRITE_KEYS
```
**Manifest** ì½ê¸°:

Manifest íŒŒì¼ì€ Android ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ í•µì‹¬ êµ¬ì„± ìš”ì†Œë¥¼ ì •ì˜í•˜ëŠ” XML íŒŒì¼ì…ë‹ˆë‹¤. ì´ íŒŒì¼ì€ ì•±ì˜ íŒ¨í‚¤ì§€ ì´ë¦„, ì•¡í‹°ë¹„í‹°, ì„œë¹„ìŠ¤, ë¸Œë¡œë“œìºìŠ¤íŠ¸ ìˆ˜ì‹ ì ë“±ê³¼ ê°™ì€ ì•±ì˜ êµ¬ì„± ìš”ì†Œì— ëŒ€í•œ ì •ë³´ë¥¼ í¬í•¨í•©ë‹ˆë‹¤. ë˜í•œ ì•±ì˜ ê¶Œí•œ, í•˜ë“œì›¨ì–´ ìš”êµ¬ ì‚¬í•­, ì•± ì•„ì´ì½˜ ë° ë¼ì´ë¸ŒëŸ¬ë¦¬ ì¢…ì†ì„±ê³¼ ê°™ì€ ë‹¤ë¥¸ ì¤‘ìš”í•œ ì„¸ë¶€ ì •ë³´ë„ í¬í•¨í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì•±ì„ í•´í‚¹í•˜ê±°ë‚˜ íœí…ŒìŠ¤íŠ¸ë¥¼ ìˆ˜í–‰í•  ë•Œ, Manifest íŒŒì¼ì€ ë§¤ìš° ì¤‘ìš”í•œ ì •ë³´ë¥¼ ì œê³µí•©ë‹ˆë‹¤. ì•±ì˜ êµ¬ì„± ìš”ì†Œì™€ ê¶Œí•œì„ ë¶„ì„í•˜ì—¬ ì•±ì˜ ì·¨ì•½ì ì„ ì‹ë³„í•˜ê³  ì•…ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ ì•±ì˜ ê¸°ëŠ¥ê³¼ ë™ì‘ì„ ì´í•´í•˜ëŠ” ë° ë„ì›€ì´ ë©ë‹ˆë‹¤.

Manifest íŒŒì¼ì€ ì•±ì˜ APK íŒŒì¼ ë‚´ì— í¬í•¨ë˜ì–´ ìˆìœ¼ë©°, ë‹¤ì–‘í•œ ë„êµ¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ì—´ëŒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, `aapt` ë„êµ¬ë¥¼ ì‚¬ìš©í•˜ì—¬ Manifest íŒŒì¼ì„ ì¶”ì¶œí•˜ê³  ë¶„ì„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜ëŠ” `apktool`ì„ ì‚¬ìš©í•˜ì—¬ APK íŒŒì¼ì„ ë””ì»´íŒŒì¼í•˜ê³  Manifest íŒŒì¼ì„ í™•ì¸í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.

ì•±ì„ ë¶„ì„í•˜ê±°ë‚˜ í•´í‚¹í•  ë•Œ, Manifest íŒŒì¼ì€ ì²« ë²ˆì§¸ë¡œ ì‚´í´ë´ì•¼ í•  ì¤‘ìš”í•œ íŒŒì¼ì…ë‹ˆë‹¤. ì•±ì˜ êµ¬ì„± ìš”ì†Œ, ê¶Œí•œ ë° ê¸°ëŠ¥ì„ ì´í•´í•˜ëŠ” ë° ë„ì›€ì´ ë˜ë©°, ì•±ì˜ ì·¨ì•½ì ì„ ì‹ë³„í•˜ê³  ì•…ìš©í•˜ëŠ” ë° ë„ì›€ì´ ë©ë‹ˆë‹¤.
```bash
run app.package.manifest jakhar.aseem.diva
```
**íŒ¨í‚¤ì§€ì˜ ê³µê²© í‘œë©´**:
```bash
dz> run app.package.attacksurface com.mwr.example.sieve
Attack Surface:
3 activities exported
0 broadcast receivers exported
2 content providers exported
2 services exported
is debuggable
```
* **Activities**: ì–´ë–¤ ì¢…ë¥˜ì˜ ê¶Œí•œ ì œí•œì„ ìš°íšŒí•˜ì—¬ ì•¡í‹°ë¹„í‹°ë¥¼ ì‹œì‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* **Content providers**: ê°œì¸ ë°ì´í„°ì— ì ‘ê·¼í•˜ê±°ë‚˜ ì·¨ì•½ì (SQL Injection ë˜ëŠ” Path Traversal)ì„ ì´ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* **Services**:
* **is debuggable**: [ìì„¸íˆ ì•Œì•„ë³´ê¸°](./#is-debuggeable)

### Activities

AndroidManifest.xml íŒŒì¼ì—ì„œ ë‚´ë³´ë‚¸(activity) êµ¬ì„± ìš”ì†Œì˜ "android:exported" ê°’ì´ **"true"**ë¡œ ì„¤ì •ë˜ì–´ ìˆìŠµë‹ˆë‹¤:
```markup
<activity android:name="com.my.app.Initial" android:exported="true">
</activity>
```
**ë‚´ë³´ë‚¸ ì•¡í‹°ë¹„í‹° ëª©ë¡**:

To list the exported activities of an Android application, you can use the `drozer` tool. 

ì•ˆë“œë¡œì´ë“œ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë‚´ë³´ë‚¸ ì•¡í‹°ë¹„í‹° ëª©ë¡ì„ í™•ì¸í•˜ë ¤ë©´ `drozer` ë„êµ¬ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

First, start the `drozer` console by running the command `drozer console`. 

ë¨¼ì €, `drozer console` ëª…ë ¹ì„ ì‹¤í–‰í•˜ì—¬ `drozer` ì½˜ì†”ì„ ì‹œì‘í•©ë‹ˆë‹¤.

Once you are in the `drozer` console, use the `run app.package.exported_activities -a <package_name>` command to list the exported activities of the specified package. 

`drozer` ì½˜ì†”ì— ë“¤ì–´ê°€ë©´, `run app.package.exported_activities -a <package_name>` ëª…ë ¹ì„ ì‚¬ìš©í•˜ì—¬ ì§€ì •ëœ íŒ¨í‚¤ì§€ì˜ ë‚´ë³´ë‚¸ ì•¡í‹°ë¹„í‹° ëª©ë¡ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

Replace `<package_name>` with the actual package name of the target application. 

`<package_name>`ì„ ëŒ€ìƒ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì‹¤ì œ íŒ¨í‚¤ì§€ ì´ë¦„ìœ¼ë¡œ ëŒ€ì²´í•˜ì„¸ìš”.

For example, to list the exported activities of an application with the package name `com.example.app`, use the command `run app.package.exported_activities -a com.example.app`. 

ì˜ˆë¥¼ ë“¤ì–´, íŒ¨í‚¤ì§€ ì´ë¦„ì´ `com.example.app`ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë‚´ë³´ë‚¸ ì•¡í‹°ë¹„í‹° ëª©ë¡ì„ í™•ì¸í•˜ë ¤ë©´ `run app.package.exported_activities -a com.example.app` ëª…ë ¹ì„ ì‚¬ìš©í•˜ì„¸ìš”.

The `drozer` tool will then display the list of exported activities, along with their corresponding package names. 

ê·¸ëŸ¬ë©´ `drozer` ë„êµ¬ê°€ ë‚´ë³´ë‚¸ ì•¡í‹°ë¹„í‹° ëª©ë¡ê³¼ í•´ë‹¹ íŒ¨í‚¤ì§€ ì´ë¦„ì„ í‘œì‹œí•©ë‹ˆë‹¤.
```bash
dz> run app.activity.info -a com.mwr.example.sieve
Package: com.mwr.example.sieve
com.mwr.example.sieve.FileSelectActivity
com.mwr.example.sieve.MainLoginActivity
com.mwr.example.sieve.PWList
```
**ì•¡í‹°ë¹„í‹° ì‹œì‘**:

ì–´ë–¤ ì¢…ë¥˜ì˜ ê¶Œí•œì´ ì‹¤í–‰ì„ ë°©ì§€í•´ì•¼ í•  ìˆ˜ë„ ìˆëŠ”ë°, ì•¡í‹°ë¹„í‹°ë¥¼ ì‹œì‘í•˜ê³  ìš°íšŒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

{% code overflow="wrap" %}
```bash
dz> run app.activity.start --component com.mwr.example.sieve com.mwr.example.sieve.PWList
```
{% endcode %}

**adb**ë¥¼ ì‚¬ìš©í•˜ì—¬ ë‚´ë³´ë‚¸ ì•¡í‹°ë¹„í‹°ë¥¼ ì‹œì‘í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤:

* íŒ¨í‚¤ì§€ ì´ë¦„ì€ com.example.demoì…ë‹ˆë‹¤.
* ë‚´ë³´ë‚¸ ì•¡í‹°ë¹„í‹° ì´ë¦„ì€ com.example.test.MainActivityì…ë‹ˆë‹¤.
```bash
adb shell am start -n com.example.demo/com.example.test.MainActivity
```
### ì½˜í…ì¸  ì œê³µì

ì´ ê²Œì‹œë¬¼ì€ ì—¬ê¸°ì— ìˆì„ë§Œí¼ í¬ê¸°ê°€ ì»¤ì„œ **[ì—¬ê¸°ì—ì„œ ë³„ë„ì˜ í˜ì´ì§€ì—ì„œ ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤](exploiting-content-providers.md)**.

### ì„œë¹„ìŠ¤

ë‚´ë³´ë‚¸ ì„œë¹„ìŠ¤ëŠ” Manifest.xml ë‚´ì—ì„œ ì„ ì–¸ë©ë‹ˆë‹¤:

{% code overflow="wrap" %}
```markup
<service android:name=".AuthService" android:exported="true" android:process=":remote"/>
```
{% endcode %}

ì½”ë“œ ë‚´ì—ì„œ **`handleMessage`** í•¨ìˆ˜ë¥¼ **í™•ì¸**í•˜ì‹­ì‹œì˜¤. ì´ í•¨ìˆ˜ëŠ” **ë©”ì‹œì§€ë¥¼ ìˆ˜ì‹ **í•©ë‹ˆë‹¤:

![](<../../../.gitbook/assets/image (194).png>)

#### ì„œë¹„ìŠ¤ ëª©ë¡
```bash
dz> run app.service.info -a com.mwr.example.sieve
Package: com.mwr.example.sieve
com.mwr.example.sieve.AuthService
Permission: null
com.mwr.example.sieve.CryptoService
Permission: null
```
#### **ì„œë¹„ìŠ¤ì™€ ìƒí˜¸ ì‘ìš©í•˜ê¸°**

To interact with a service using drozer, you need to start a drozer session and then use the `run` command to execute various commands against the target service. 

drozer provides a set of built-in modules that can be used to interact with different types of services. These modules can be loaded using the `load` command.

Here is an example of how to interact with a service using drozer:

1. Start a drozer session by running the following command:

   ```
   drozer console connect
   ```

2. Once the session is started, you can use the `run` command to execute various commands against the target service. For example, to list the activities of an Android app, you can use the following command:

   ```
   run app.activity.info -a <package_name>
   ```

   Replace `<package_name>` with the package name of the target app.

3. You can also use the `load` command to load a specific module. For example, to load the `broadcast` module, you can use the following command:

   ```
   load broadcast
   ```

   Once the module is loaded, you can use the `run` command to execute commands specific to that module.

By using the `run` and `load` commands, you can interact with different services and perform various actions such as listing activities, sending broadcasts, and more.
```bash
app.service.send            Send a Message to a service, and display the reply
app.service.start           Start Service
app.service.stop            Stop Service
```
#### ì˜ˆì‹œ

`app.service.send`ì— ëŒ€í•œ **drozer** ë„ì›€ë§ì„ ì‚´í´ë³´ì„¸ìš”:

![](<../../../.gitbook/assets/image (196) (1).png>)

"_msg.what_", "_msg.arg1_", "_msg.arg2_" ë‚´ë¶€ì— ìˆëŠ” ë°ì´í„°ë¥¼ ë¨¼ì € ë³´ë‚´ê²Œ ë©ë‹ˆë‹¤. ì½”ë“œ ë‚´ë¶€ì—ì„œ **ì–´ë–¤ ì •ë³´ê°€ ì‚¬ìš©ë˜ëŠ”ì§€**ì™€ ê·¸ ìœ„ì¹˜ë¥¼ í™•ì¸í•´ì•¼ í•©ë‹ˆë‹¤.\
`--extra` ì˜µì…˜ì„ ì‚¬ìš©í•˜ì—¬ "_msg.replyTo"ì—ì„œ í•´ì„ë  ìˆ˜ ìˆëŠ” ë‚´ìš©ì„ ë³´ë‚¼ ìˆ˜ ìˆìœ¼ë©°, `--bundle-as-obj`ë¥¼ ì‚¬ìš©í•˜ì—¬ ì œê³µëœ ì„¸ë¶€ ì •ë³´ë¡œ ê°ì²´ë¥¼ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë‹¤ìŒ ì˜ˆì‹œì—ì„œ:

* `what == 2354`
* `arg1 == 9234`
* `arg2 == 1`
* `replyTo == object(string com.mwr.example.sieve.PIN 1337)`
```bash
run app.service.send com.mwr.example.sieve com.mwr.example.sieve.AuthService --msg 2354 9234 1 --extra string com.mwr.example.sieve.PIN 1337 --bundle-as-obj
```
![](<../../../.gitbook/assets/image (195).png>)

### ë¸Œë¡œë“œìºìŠ¤íŠ¸ ë¦¬ì‹œë²„

**Android ê¸°ë³¸ ì •ë³´ ì„¹ì…˜ì—ì„œ ë¸Œë¡œë“œìºìŠ¤íŠ¸ ë¦¬ì‹œë²„ê°€ ë¬´ì—‡ì¸ì§€ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤**.

ë¸Œë¡œë“œìºìŠ¤íŠ¸ ë¦¬ì‹œë²„ë¥¼ ë°œê²¬í•œ í›„ì—ëŠ” **ê·¸ë“¤ì˜ ì½”ë“œë¥¼ í™•ì¸**í•´ì•¼ í•©ë‹ˆë‹¤. ë°›ì€ ë©”ì‹œì§€ë¥¼ ì²˜ë¦¬í•˜ëŠ” **`onReceive`** í•¨ìˆ˜ì— íŠ¹ë³„íˆ ì£¼ì˜í•´ì•¼ í•©ë‹ˆë‹¤.

#### **ëª¨ë“ ** ë¸Œë¡œë“œìºìŠ¤íŠ¸ ë¦¬ì‹œë²„ ê°ì§€
```bash
run app.broadcast.info #Detects all
```
#### ì•±ì˜ ë¸Œë¡œë“œìºìŠ¤íŠ¸ ë¦¬ì‹œë²„ í™•ì¸

To check the broadcast receivers of an Android app, you can use the `drozer` tool. Drozer is a comprehensive security assessment framework for Android devices. Follow the steps below to check the broadcast receivers of an app using drozer:

1. Install drozer on your machine by following the instructions provided in the [drozer GitHub repository](https://github.com/FSecureLABS/drozer).

2. Connect your Android device to your machine using a USB cable and enable USB debugging on the device.

3. Open a terminal and run the following command to start drozer:

   ```
   drozer console connect
   ```

4. Once the drozer console is open, run the following command to list all installed packages on the device:

   ```
   run app.package.list -f
   ```

   This command will display a list of all installed packages along with their package names.

5. Identify the package name of the app you want to check the broadcast receivers for.

6. Run the following command to list the broadcast receivers of the app:

   ```
   run app.broadcast.info -a <package_name>
   ```

   Replace `<package_name>` with the actual package name of the app.

7. Drozer will display information about the broadcast receivers of the app, including their names, permissions, and exported status.

By following these steps, you can easily check the broadcast receivers of an Android app using drozer. This information can be useful for identifying potential security vulnerabilities or analyzing the behavior of the app.
```bash
#Check one negative
run app.broadcast.info -a jakhar.aseem.diva
Package: jakhar.aseem.diva
No matching receivers.

# Check one positive
run app.broadcast.info -a com.google.android.youtube
Package: com.google.android.youtube
com.google.android.libraries.youtube.player.PlayerUiModule$LegacyMediaButtonIntentReceiver
Permission: null
com.google.android.apps.youtube.app.common.notification.GcmBroadcastReceiver
Permission: com.google.android.c2dm.permission.SEND
com.google.android.apps.youtube.app.PackageReplacedReceiver
Permission: null
com.google.android.libraries.youtube.account.AccountsChangedReceiver
Permission: null
com.google.android.apps.youtube.app.application.system.LocaleUpdatedReceiver
Permission: null
```
#### ë°©ì†¡ **ìƒí˜¸ì‘ìš©**

Broadcast ìƒí˜¸ì‘ìš©ì€ ì•ˆë“œë¡œì´ë“œ ì•±ì—ì„œ ë°œìƒí•˜ëŠ” ë¸Œë¡œë“œìºìŠ¤íŠ¸ ë©”ì‹œì§€ë¥¼ ê°ì§€í•˜ê³  ì¡°ì‘í•˜ëŠ” ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ì•±ì˜ ë™ì‘ì„ ë³€ê²½í•˜ê±°ë‚˜ ë¯¼ê°í•œ ì •ë³´ë¥¼ ë…¸ì¶œì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. drozerëŠ” ì•±ì˜ ë¸Œë¡œë“œìºìŠ¤íŠ¸ ìƒí˜¸ì‘ìš©ì„ í…ŒìŠ¤íŠ¸í•˜ê¸° ìœ„í•œ ë‹¤ì–‘í•œ ë„êµ¬ì™€ ëª…ë ¹ì–´ë¥¼ ì œê³µí•©ë‹ˆë‹¤.

##### Broadcast Interactionsì˜ ìœ í˜•

- **Broadcast Intentë¥¼ ê°ì§€í•˜ê¸°**: ì•±ì´ ë¸Œë¡œë“œìºìŠ¤íŠ¸ ë©”ì‹œì§€ë¥¼ ìˆ˜ì‹ í•˜ëŠ”ì§€ í™•ì¸í•˜ê¸° ìœ„í•´ ì•±ì˜ ë¸Œë¡œë“œìºìŠ¤íŠ¸ ìˆ˜ì‹ ìë¥¼ íƒì§€í•©ë‹ˆë‹¤.
- **Broadcast Intentë¥¼ ì¡°ì‘í•˜ê¸°**: ì•±ì˜ ë™ì‘ì„ ë³€ê²½í•˜ê¸° ìœ„í•´ ë¸Œë¡œë“œìºìŠ¤íŠ¸ ë©”ì‹œì§€ë¥¼ ì¡°ì‘í•©ë‹ˆë‹¤.
- **Broadcast Intentë¥¼ ì£¼ì…í•˜ê¸°**: ì•±ì— ë¸Œë¡œë“œìºìŠ¤íŠ¸ ë©”ì‹œì§€ë¥¼ ì£¼ì…í•˜ì—¬ ë¯¼ê°í•œ ì •ë³´ë¥¼ ë…¸ì¶œì‹œí‚µë‹ˆë‹¤.

##### drozerë¥¼ ì‚¬ìš©í•œ Broadcast Interactions

drozerëŠ” ë‹¤ìŒê³¼ ê°™ì€ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ ì•±ì˜ ë¸Œë¡œë“œìºìŠ¤íŠ¸ ìƒí˜¸ì‘ìš©ì„ í…ŒìŠ¤íŠ¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- `run app.broadcast.send` ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ ë¸Œë¡œë“œìºìŠ¤íŠ¸ ë©”ì‹œì§€ë¥¼ ë³´ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- `run app.broadcast.info` ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ ì•±ì˜ ë¸Œë¡œë“œìºìŠ¤íŠ¸ ìˆ˜ì‹ ì ì •ë³´ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- `run app.broadcast.inject` ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ ì•±ì— ë¸Œë¡œë“œìºìŠ¤íŠ¸ ë©”ì‹œì§€ë¥¼ ì£¼ì…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

drozerë¥¼ ì‚¬ìš©í•˜ì—¬ ì•±ì˜ ë¸Œë¡œë“œìºìŠ¤íŠ¸ ìƒí˜¸ì‘ìš©ì„ í…ŒìŠ¤íŠ¸í•˜ë©´ ì•±ì˜ ì·¨ì•½ì ì„ ë°œê²¬í•˜ê³  ì•…ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ ì•± ê°œë°œìëŠ” ë¸Œë¡œë“œìºìŠ¤íŠ¸ ìˆ˜ì‹ ìë¥¼ ì•ˆì „í•˜ê²Œ êµ¬í˜„í•˜ê³ , ë¸Œë¡œë“œìºìŠ¤íŠ¸ ë©”ì‹œì§€ë¥¼ ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ì†ŒìŠ¤ì—ì„œë§Œ ì²˜ë¦¬í•´ì•¼ í•©ë‹ˆë‹¤.
```bash
app.broadcast.info          Get information about broadcast receivers
app.broadcast.send          Send broadcast using an intent
app.broadcast.sniff         Register a broadcast receiver that can sniff particular intents
```
#### ë©”ì‹œì§€ ë³´ë‚´ê¸°

ì´ ì˜ˆì œì—ì„œëŠ” [FourGoats apk](https://github.com/linkedin/qark/blob/master/tests/goatdroid.apk) Content Providerë¥¼ ë‚¨ìš©í•˜ì—¬ ì‚¬ìš©ìì˜ í—ˆë½ì„ ìš”êµ¬í•˜ì§€ ì•Šê³  ì„ì˜ì˜ SMSë¥¼ **ë¹„ í”„ë¦¬ë¯¸ì—„ ëŒ€ìƒ**ìœ¼ë¡œ **ë³´ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤**.

![](<../../../.gitbook/assets/image (199).png>)

![](<../../../.gitbook/assets/image (197) (1).png>)

ì½”ë“œë¥¼ ì½ìœ¼ë©´ "_phoneNumber_" ë° "_message_" ë§¤ê°œë³€ìˆ˜ë¥¼ Content Providerë¡œ ë³´ë‚´ì•¼ í•©ë‹ˆë‹¤.
```bash
run app.broadcast.send --action org.owasp.goatdroid.fourgoats.SOCIAL_SMS --component org.owasp.goatdroid.fourgoats.broadcastreceivers SendSMSNowReceiver --extra string phoneNumber 123456789 --extra string message "Hello mate!"
```
### ë””ë²„ê¹… ê°€ëŠ¥ ì—¬ë¶€

í”„ë¡œë•ì…˜ APKëŠ” ì ˆëŒ€ë¡œ ë””ë²„ê¹…ì´ ê°€ëŠ¥í•´ì„œëŠ” ì•ˆë©ë‹ˆë‹¤.\
ì´ëŠ” ì‹¤í–‰ ì¤‘ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì— **ìë°” ë””ë²„ê±°ë¥¼ ì—°ê²°**í•˜ì—¬ ëŸ°íƒ€ì„ì—ì„œ ê²€ì‚¬í•˜ê³ , ì¤‘ë‹¨ì ì„ ì„¤ì •í•˜ê³ , ë‹¨ê³„ë³„ë¡œ ì§„í–‰í•˜ë©°, ë³€ìˆ˜ ê°’ì„ ìˆ˜ì§‘í•˜ê³  ì‹¬ì§€ì–´ ë³€ê²½í•  ìˆ˜ë„ ìˆë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤. [InfoSec instituteì—ì„œëŠ” ë””ë²„ê¹… ê°€ëŠ¥í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ë” ê¹Šì´ íŒŒê³ ë“¤ê³  ëŸ°íƒ€ì„ ì½”ë“œë¥¼ ì£¼ì…í•˜ëŠ” ë° ëŒ€í•œ í›Œë¥­í•œ ê¸°ì‚¬](../exploiting-a-debuggeable-applciation.md)ë¥¼ ì œê³µí•˜ê³  ìˆìŠµë‹ˆë‹¤.

ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ë””ë²„ê¹… ê°€ëŠ¥í•œ ê²½ìš°, Manifestì— ë‚˜íƒ€ë‚  ê²ƒì…ë‹ˆë‹¤:
```xml
<application theme="@2131296387" debuggable="true"
```
**Drozer**ë¥¼ ì‚¬ìš©í•˜ì—¬ ëª¨ë“  ë””ë²„ê¹… ê°€ëŠ¥í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤:
```bash
run app.package.debuggable
```
## íŠœí† ë¦¬ì–¼

* [https://resources.infosecinstitute.com/android-penetration-tools-walkthrough-series-drozer/#gref](https://resources.infosecinstitute.com/android-penetration-tools-walkthrough-series-drozer/#gref)
* [https://github.com/mgcfish/mobiletools/blob/master/_posts/2016-08-01-Using-Drozer-for-application-security-assessments.md](https://github.com/mgcfish/mobiletools/blob/master/_posts/2016-08-01-Using-Drozer-for-application-security-assessments.md)
* [https://www.hackingarticles.in/android-penetration-testing-drozer/](https://www.hackingarticles.in/android-penetration-testing-drozer/)
* [https://medium.com/@ashrafrizvi3006/how-to-test-android-application-security-using-drozer-edc002c5dcac](https://medium.com/@ashrafrizvi3006/how-to-test-android-application-security-using-drozer-edc002c5dcac)

## ì¶”ê°€ ì •ë³´

* [https://blog.dixitaditya.com/android-pentesting-cheatsheet/](https://blog.dixitaditya.com/android-pentesting-cheatsheet/)

<img src="../../../.gitbook/assets/i3.png" alt="" data-size="original">

**ë²„ê·¸ ë°”ìš´í‹° íŒ**: í•´ì»¤ë“¤ì´ ë§Œë“  í”„ë¦¬ë¯¸ì—„ ë²„ê·¸ ë°”ìš´í‹° í”Œë«í¼ì¸ **Intigritiì— ê°€ì…**í•˜ì„¸ìš”! ì˜¤ëŠ˜ [**https://go.intigriti.com/hacktricks**](https://go.intigriti.com/hacktricks)ì—ì„œ ê°€ì…í•˜ê³  ìµœëŒ€ **$100,000**ì˜ ë°”ìš´í‹°ë¥¼ ë°›ìœ¼ì„¸ìš”!

{% embed url="https://go.intigriti.com/hacktricks" %}

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong>ë¥¼ í†µí•´ AWS í•´í‚¹ì„ ì²˜ìŒë¶€í„° ì „ë¬¸ê°€ê¹Œì§€ ë°°ì›Œë³´ì„¸ìš”<strong>!</strong></summary>

HackTricksë¥¼ ì§€ì›í•˜ëŠ” ë‹¤ë¥¸ ë°©ë²•:

* **íšŒì‚¬ë¥¼ HackTricksì—ì„œ ê´‘ê³ í•˜ê±°ë‚˜ HackTricksë¥¼ PDFë¡œ ë‹¤ìš´ë¡œë“œ**í•˜ë ¤ë©´ [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)ë¥¼ í™•ì¸í•˜ì„¸ìš”!
* [**ê³µì‹ PEASS & HackTricks ìŠ¤ì›¨ê·¸**](https://peass.creator-spring.com)ë¥¼ ì–»ìœ¼ì„¸ìš”.
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ë¥¼ ë°œê²¬í•˜ì„¸ìš”. ë…ì ì ì¸ [**NFTs**](https://opensea.io/collection/the-peass-family) ì»¬ë ‰ì…˜ì…ë‹ˆë‹¤.
* ğŸ’¬ [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— **ì°¸ì—¬**í•˜ê±°ë‚˜ **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)**ë¥¼** íŒ”ë¡œìš°í•˜ì„¸ìš”.
* **HackTricks**ì™€ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github ì €ì¥ì†Œì— PRì„ ì œì¶œí•˜ì—¬ ì—¬ëŸ¬ë¶„ì˜ í•´í‚¹ ê¸°ìˆ ì„ ê³µìœ í•˜ì„¸ìš”.

</details>
