# Drozer Tutorial

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

<img src="../../../.gitbook/assets/i3.png" alt="" data-size="original">

**Bug bounty tip**: **sign up** for **Intigriti**, Î¼Î¹Î± premium **bug bounty platform created by hackers, for hackers**! Join us at [**https://go.intigriti.com/hacktricks**](https://go.intigriti.com/hacktricks) today, and start earning bounties up to **$100,000**!

{% embed url="https://go.intigriti.com/hacktricks" %}

## APKs to test

* [Sieve](https://github.com/mwrlabs/drozer/releases/download/2.3.4/sieve.apk) (from mrwlabs)
* [DIVA](https://payatu.com/wp-content/uploads/2016/01/diva-beta.tar.gz)

**Parts of this tutorial were extracted from the** [**Drozer documentation pdf**](https://labs.withsecure.com/content/dam/labs/docs/mwri-drozer-user-guide-2015-03-23.pdf)**.**

## Installation

Install Drozer Client inside your host. Download it from the [latest releases](https://github.com/mwrlabs/drozer/releases).
```bash
pip install drozer-2.4.4-py2-none-any.whl
pip install twisted
pip install service_identity
```
ÎšÎ±Ï„ÎµÎ²Î¬ÏƒÏ„Îµ ÎºÎ±Î¹ ÎµÎ³ÎºÎ±Ï„Î±ÏƒÏ„Î®ÏƒÏ„Îµ Ï„Î¿ drozer APK Î±Ï€ÏŒ Ï„Î¹Ï‚ [Ï„ÎµÎ»ÎµÏ…Ï„Î±Î¯ÎµÏ‚ ÎµÎºÎ´ÏŒÏƒÎµÎ¹Ï‚](https://github.com/mwrlabs/drozer/releases). Î‘Ï…Ï„Î® Ï„Î· ÏƒÏ„Î¹Î³Î¼Î® ÎµÎ¯Î½Î±Î¹ [Î±Ï…Ï„Î®](https://github.com/mwrlabs/drozer/releases/download/2.3.4/drozer-agent-2.3.4.apk).
```bash
adb install drozer.apk
```
### Starting the Server

ÎŸ Ï€ÏÎ¬ÎºÏ„Î¿ÏÎ±Ï‚ ÎµÎºÏ„ÎµÎ»ÎµÎ¯Ï„Î±Î¹ ÏƒÏ„Î· Î¸ÏÏÎ± 31415, Ï€ÏÎ­Ï€ÎµÎ¹ Î½Î± [port forward](https://en.wikipedia.org/wiki/Port\_forwarding) Î³Î¹Î± Î½Î± ÎºÎ±Î¸Î¹ÎµÏÏÏƒÎ¿Ï…Î¼Îµ Ï„Î·Î½ ÎµÏ€Î¹ÎºÎ¿Î¹Î½Ï‰Î½Î¯Î± Î¼ÎµÏ„Î±Î¾Ï Ï„Î¿Ï… Drozer Client ÎºÎ±Î¹ Ï„Î¿Ï… Agent, ÎµÎ´Ï ÎµÎ¯Î½Î±Î¹ Î· ÎµÎ½Ï„Î¿Î»Î® Î³Î¹Î± Î½Î± Ï„Î¿ ÎºÎ¬Î½Î¿Ï…Î¼Îµ:
```bash
adb forward tcp:31415 tcp:31415
```
Î¤Î­Î»Î¿Ï‚, **ÎµÎºÎºÎ¹Î½Î®ÏƒÏ„Îµ** Ï„Î·Î½ **ÎµÏ†Î±ÏÎ¼Î¿Î³Î®** ÎºÎ±Î¹ Ï€Î±Ï„Î®ÏƒÏ„Îµ Ï„Î¿ ÎºÎ¿Ï…Î¼Ï€Î¯ "**ON**"

![](<../../../.gitbook/assets/image (459).png>)

ÎšÎ±Î¹ ÏƒÏ…Î½Î´ÎµÎ¸ÎµÎ¯Ï„Îµ ÏƒÎµ Î±Ï…Ï„Î®Î½:
```bash
drozer console connect
```
## Interesting Commands

| **Commands**    | **Description**                                                                                                                                        |
| --------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------ |
| **Help MODULE** | Î•Î¼Ï†Î±Î½Î¯Î¶ÎµÎ¹ Î²Î¿Î®Î¸ÎµÎ¹Î± Î³Î¹Î± Ï„Î¿ ÎµÏ€Î¹Î»ÎµÎ³Î¼Î­Î½Î¿ module                                                                                                            |
| **list**        | Î•Î¼Ï†Î±Î½Î¯Î¶ÎµÎ¹ Î¼Î¹Î± Î»Î¯ÏƒÏ„Î± Î¼Îµ ÏŒÎ»Î± Ï„Î± drozer modules Ï€Î¿Ï… Î¼Ï€Î¿ÏÎ¿ÏÎ½ Î½Î± ÎµÎºÏ„ÎµÎ»Î¿ÏÎ½Ï„Î±Î¹ ÏƒÏ„Î·Î½ Ï„ÏÎ­Ï‡Î¿Ï…ÏƒÎ± ÏƒÏ…Î½ÎµÎ´ÏÎ¯Î±. Î‘Ï…Ï„ÏŒ ÎºÏÏÎ²ÎµÎ¹ modules Ï€Î¿Ï… Î´ÎµÎ½ Î­Ï‡ÎµÏ„Îµ ÎºÎ±Ï„Î¬Î»Î»Î·Î»ÎµÏ‚ Î¬Î´ÎµÎ¹ÎµÏ‚ Î³Î¹Î± Î½Î± ÎµÎºÏ„ÎµÎ»Î­ÏƒÎµÏ„Îµ. |
| **shell**       | ÎÎµÎºÎ¹Î½Î¬ Î¼Î¹Î± Î´Î¹Î±Î´ÏÎ±ÏƒÏ„Î¹ÎºÎ® Linux shell ÏƒÏ„Î· ÏƒÏ…ÏƒÎºÎµÏ…Î®, ÏƒÏ„Î¿ Ï€Î»Î±Î¯ÏƒÎ¹Î¿ Ï„Î¿Ï… Agent.                                                                                 |
| **clean**       | Î‘Ï†Î±Î¹ÏÎµÎ¯ Ï„Î± Ï€ÏÎ¿ÏƒÏ‰ÏÎ¹Î½Î¬ Î±ÏÏ‡ÎµÎ¯Î± Ï€Î¿Ï… Î±Ï€Î¿Î¸Î·ÎºÎµÏÎµÎ¹ Ï„Î¿ drozer ÏƒÏ„Î· ÏƒÏ…ÏƒÎºÎµÏ…Î® Android.                                                                             |
| **load**        | Î¦Î¿ÏÏ„ÏÎ½ÎµÎ¹ Î­Î½Î± Î±ÏÏ‡ÎµÎ¯Î¿ Ï€Î¿Ï… Ï€ÎµÏÎ¹Î­Ï‡ÎµÎ¹ drozer commands ÎºÎ±Î¹ Ï„Î± ÎµÎºÏ„ÎµÎ»ÎµÎ¯ Î´Î¹Î±Î´Î¿Ï‡Î¹ÎºÎ¬.                                                                             |
| **module**      | Î’ÏÎ¯ÏƒÎºÎµÎ¹ ÎºÎ±Î¹ ÎµÎ³ÎºÎ±Î¸Î¹ÏƒÏ„Î¬ ÎµÏ€Î¹Ï€Î»Î­Î¿Î½ drozer modules Î±Ï€ÏŒ Ï„Î¿ Î”Î¹Î±Î´Î¯ÎºÏ„Ï…Î¿.                                                                                        |
| **unset**       | Î‘Ï†Î±Î¹ÏÎµÎ¯ Î¼Î¹Î± Î¿Î½Î¿Î¼Î±ÏƒÏ„Î¹ÎºÎ® Î¼ÎµÏ„Î±Î²Î»Î·Ï„Î® Ï€Î¿Ï… Ï„Î¿ drozer Ï€ÎµÏÎ½Î¬ ÏƒÎµ Î¿Ï€Î¿Î¹Î±Î´Î®Ï€Î¿Ï„Îµ Linux shells Ï€Î¿Ï… Î´Î·Î¼Î¹Î¿Ï…ÏÎ³ÎµÎ¯.                                                       |
| **set**         | Î‘Ï€Î¿Î¸Î·ÎºÎµÏÎµÎ¹ Î¼Î¹Î± Ï„Î¹Î¼Î® ÏƒÎµ Î¼Î¹Î± Î¼ÎµÏ„Î±Î²Î»Î·Ï„Î® Ï€Î¿Ï… Î¸Î± Ï€ÎµÏÎ±ÏƒÏ„ÎµÎ¯ Ï‰Ï‚ Ï€ÎµÏÎ¹Î²Î±Î»Î»Î¿Î½Ï„Î¹ÎºÎ® Î¼ÎµÏ„Î±Î²Î»Î·Ï„Î® ÏƒÎµ Î¿Ï€Î¿Î¹Î±Î´Î®Ï€Î¿Ï„Îµ Linux shells Ï€Î¿Ï… Î´Î·Î¼Î¹Î¿Ï…ÏÎ³ÎµÎ¯ Ï„Î¿ drozer.                 |
| **shell**       | ÎÎµÎºÎ¹Î½Î¬ Î¼Î¹Î± Î´Î¹Î±Î´ÏÎ±ÏƒÏ„Î¹ÎºÎ® Linux shell ÏƒÏ„Î· ÏƒÏ…ÏƒÎºÎµÏ…Î®, ÏƒÏ„Î¿ Ï€Î»Î±Î¯ÏƒÎ¹Î¿ Ï„Î¿Ï… Agent                                                                                 |
| **run MODULE**  | Î•ÎºÏ„ÎµÎ»ÎµÎ¯ Î­Î½Î± drozer module                                                                                                                              |
| **exploit**     | Î¤Î¿ Drozer Î¼Ï€Î¿ÏÎµÎ¯ Î½Î± Î´Î·Î¼Î¹Î¿Ï…ÏÎ³Î®ÏƒÎµÎ¹ exploits Î³Î¹Î± ÎµÎºÏ„Î­Î»ÎµÏƒÎ· ÏƒÏ„Î· ÏƒÏ…ÏƒÎºÎµÏ…Î®. `drozer exploit list`                                                             |
| **payload**     | Î¤Î± exploits Ï‡ÏÎµÎ¹Î¬Î¶Î¿Î½Ï„Î±Î¹ Î­Î½Î± payload. `drozer payload list`                                                                                             |

### Package

Î’ÏÎµÎ¯Ï„Îµ Ï„Î¿ **ÏŒÎ½Î¿Î¼Î±** Ï„Î¿Ï… Ï€Î±ÎºÎ­Ï„Î¿Ï… Ï†Î¹Î»Ï„ÏÎ¬ÏÎ¿Î½Ï„Î±Ï‚ Î¼Îµ Î²Î¬ÏƒÎ· Î­Î½Î± Î¼Î­ÏÎ¿Ï‚ Ï„Î¿Ï… Î¿Î½ÏŒÎ¼Î±Ï„Î¿Ï‚:
```bash
dz> run app.package.list -f sieve
com.mwr.example.sieve
```
**Î’Î±ÏƒÎ¹ÎºÎ­Ï‚ Î Î»Î·ÏÎ¿Ï†Î¿ÏÎ¯ÎµÏ‚** Ï„Î¿Ï… Ï€Î±ÎºÎ­Ï„Î¿Ï…:
```bash
dz> run app.package.info -a com.mwr.example.sieve
Package: com.mwr.example.sieve
Process Name: com.mwr.example.sieve
Version: 1.0
Data Directory: /data/data/com.mwr.example.sieve
APK Path: /data/app/com.mwr.example.sieve-2.apk
UID: 10056
GID: [1028, 1015, 3003]
Shared Libraries: null
Shared User ID: null
Uses Permissions:
- android.permission.READ_EXTERNAL_STORAGE
- android.permission.WRITE_EXTERNAL_STORAGE
- android.permission.INTERNET
Defines Permissions:
- com.mwr.example.sieve.READ_KEYS
- com.mwr.example.sieve.WRITE_KEYS
```
Î”Î¹Î±Î²Î¬ÏƒÏ„Îµ **Manifest**:
```bash
run app.package.manifest jakhar.aseem.diva
```
**Î•Ï€Î¹Ï†Î¬Î½ÎµÎ¹Î± ÎµÏ€Î¯Î¸ÎµÏƒÎ·Ï‚** Ï„Î¿Ï… Ï€Î±ÎºÎ­Ï„Î¿Ï…:
```bash
dz> run app.package.attacksurface com.mwr.example.sieve
Attack Surface:
3 activities exported
0 broadcast receivers exported
2 content providers exported
2 services exported
is debuggable
```
* **Î”ÏÎ±ÏƒÏ„Î·ÏÎ¹ÏŒÏ„Î·Ï„ÎµÏ‚**: ÎŠÏƒÏ‰Ï‚ Î¼Ï€Î¿ÏÎµÎ¯Ï„Îµ Î½Î± Î¾ÎµÎºÎ¹Î½Î®ÏƒÎµÏ„Îµ Î¼Î¹Î± Î´ÏÎ±ÏƒÏ„Î·ÏÎ¹ÏŒÏ„Î·Ï„Î± ÎºÎ±Î¹ Î½Î± Ï€Î±ÏÎ±ÎºÎ¬Î¼ÏˆÎµÏ„Îµ ÎºÎ¬Ï€Î¿Î¹Î¿ ÎµÎ¯Î´Î¿Ï‚ ÎµÎ¾Î¿Ï…ÏƒÎ¹Î¿Î´ÏŒÏ„Î·ÏƒÎ·Ï‚ Ï€Î¿Ï… Î¸Î± Î­Ï€ÏÎµÏ€Îµ Î½Î± ÏƒÎ±Ï‚ Î±Ï€Î¿Ï„ÏÎ­Ï€ÎµÎ¹ Î±Ï€ÏŒ Ï„Î¿ Î½Î± Ï„Î·Î½ ÎµÎºÎºÎ¹Î½Î®ÏƒÎµÏ„Îµ.
* **Î Î±ÏÎ¿Ï‡ÎµÎ¯Ï‚ Ï€ÎµÏÎ¹ÎµÏ‡Î¿Î¼Î­Î½Î¿Ï…**: ÎŠÏƒÏ‰Ï‚ Î¼Ï€Î¿ÏÎµÎ¯Ï„Îµ Î½Î± Î±Ï€Î¿ÎºÏ„Î®ÏƒÎµÏ„Îµ Ï€ÏÏŒÏƒÎ²Î±ÏƒÎ· ÏƒÎµ Î¹Î´Î¹Ï‰Ï„Î¹ÎºÎ¬ Î´ÎµÎ´Î¿Î¼Î­Î½Î± Î® Î½Î± ÎµÎºÎ¼ÎµÏ„Î±Î»Î»ÎµÏ…Ï„ÎµÎ¯Ï„Îµ ÎºÎ¬Ï€Î¿Î¹Î± ÎµÏ…Ï€Î¬Î¸ÎµÎ¹Î± (SQL Injection Î® Path Traversal).
* **Î¥Ï€Î·ÏÎµÏƒÎ¯ÎµÏ‚**:
* **is debuggable**: [ÎœÎ¬Î¸ÎµÏ„Îµ Ï€ÎµÏÎ¹ÏƒÏƒÏŒÏ„ÎµÏÎ±](./#is-debuggeable)

### Î”ÏÎ±ÏƒÏ„Î·ÏÎ¹ÏŒÏ„Î·Ï„ÎµÏ‚

Î— Ï„Î¹Î¼Î® â€œandroid:exportedâ€ ÎµÎ½ÏŒÏ‚ ÎµÎ¾Î±Î³ÏŒÎ¼ÎµÎ½Î¿Ï… ÏƒÏ…ÏƒÏ„Î±Ï„Î¹ÎºÎ¿Ï Î´ÏÎ±ÏƒÏ„Î·ÏÎ¹ÏŒÏ„Î·Ï„Î±Ï‚ ÎµÎ¯Î½Î±Î¹ ÏÏ…Î¸Î¼Î¹ÏƒÎ¼Î­Î½Î· ÏƒÎµ **â€œtrueâ€** ÏƒÏ„Î¿ Î±ÏÏ‡ÎµÎ¯Î¿ AndroidManifest.xml:
```markup
<activity android:name="com.my.app.Initial" android:exported="true">
</activity>
```
**Î›Î¯ÏƒÏ„Î± ÎµÎ¾Î±Î³ÏŒÎ¼ÎµÎ½Ï‰Î½ Î´ÏÎ±ÏƒÏ„Î·ÏÎ¹Î¿Ï„Î®Ï„Ï‰Î½**:
```bash
dz> run app.activity.info -a com.mwr.example.sieve
Package: com.mwr.example.sieve
com.mwr.example.sieve.FileSelectActivity
com.mwr.example.sieve.MainLoginActivity
com.mwr.example.sieve.PWList
```
**ÎˆÎ½Î±ÏÎ¾Î· Î´ÏÎ±ÏƒÏ„Î·ÏÎ¹ÏŒÏ„Î·Ï„Î±Ï‚**:

ÎŠÏƒÏ‰Ï‚ Î¼Ï€Î¿ÏÎµÎ¯Ï„Îµ Î½Î± Î¾ÎµÎºÎ¹Î½Î®ÏƒÎµÏ„Îµ Î¼Î¹Î± Î´ÏÎ±ÏƒÏ„Î·ÏÎ¹ÏŒÏ„Î·Ï„Î± ÎºÎ±Î¹ Î½Î± Ï€Î±ÏÎ±ÎºÎ¬Î¼ÏˆÎµÏ„Îµ ÎºÎ¬Ï€Î¿Î¹Î¿ ÎµÎ¯Î´Î¿Ï‚ ÎµÎ¾Î¿Ï…ÏƒÎ¹Î¿Î´ÏŒÏ„Î·ÏƒÎ·Ï‚ Ï€Î¿Ï… Î¸Î± Î­Ï€ÏÎµÏ€Îµ Î½Î± ÏƒÎ±Ï‚ Î±Ï€Î¿Ï„ÏÎ­Ï€ÎµÎ¹ Î±Ï€ÏŒ Ï„Î¿ Î½Î± Ï„Î·Î½ ÎµÎºÎºÎ¹Î½Î®ÏƒÎµÏ„Îµ.

{% code overflow="wrap" %}
```bash
dz> run app.activity.start --component com.mwr.example.sieve com.mwr.example.sieve.PWList
```
{% endcode %}

ÎœÏ€Î¿ÏÎµÎ¯Ï„Îµ ÎµÏ€Î¯ÏƒÎ·Ï‚ Î½Î± Î¾ÎµÎºÎ¹Î½Î®ÏƒÎµÏ„Îµ Î¼Î¹Î± ÎµÎ¾Î±Î³ÏŒÎ¼ÎµÎ½Î· Î´ÏÎ±ÏƒÏ„Î·ÏÎ¹ÏŒÏ„Î·Ï„Î± Î±Ï€ÏŒ Ï„Î¿ **adb**:

* PackageName ÎµÎ¯Î½Î±Î¹ com.example.demo
* Exported ActivityName ÎµÎ¯Î½Î±Î¹ com.example.test.MainActivity
```bash
adb shell am start -n com.example.demo/com.example.test.MainActivity
```
### Content Providers

Î‘Ï…Ï„Î® Î· Î±Î½Î¬ÏÏ„Î·ÏƒÎ· Î®Ï„Î±Î½ Ï„ÏŒÏƒÎ¿ Î¼ÎµÎ³Î¬Î»Î· ÏÏƒÏ„Îµ Î½Î± ÎµÎ¯Î½Î±Î¹ ÎµÎ´Ï, Î¿Ï€ÏŒÏ„Îµ **Î¼Ï€Î¿ÏÎµÎ¯Ï„Îµ** [**Î½Î± Ï„Î·Î½ Î±Ï€Î¿ÎºÏ„Î®ÏƒÎµÏ„Îµ ÏƒÏ„Î· Î´Î¹ÎºÎ® Ï„Î·Ï‚ ÏƒÎµÎ»Î¯Î´Î± ÎµÎ´Ï**](exploiting-content-providers.md).

### Services

ÎœÎ¹Î± ÎµÎ¾Î±Î³ÏŒÎ¼ÎµÎ½Î· Ï…Ï€Î·ÏÎµÏƒÎ¯Î± Î´Î·Î»ÏÎ½ÎµÏ„Î±Î¹ Î¼Î­ÏƒÎ± ÏƒÏ„Î¿ Manifest.xml:

{% code overflow="wrap" %}
```markup
<service android:name=".AuthService" android:exported="true" android:process=":remote"/>
```
{% endcode %}

ÎœÎ­ÏƒÎ± ÏƒÏ„Î¿Î½ ÎºÏÎ´Î¹ÎºÎ± **Î­Î»ÎµÎ³Î¾Îµ** Ï„Î· \*\*`handleMessage`\*\* ÏƒÏ…Î½Î¬ÏÏ„Î·ÏƒÎ· Î· Î¿Ï€Î¿Î¯Î± Î¸Î± **Î»Î¬Î²ÎµÎ¹** Ï„Î¿ **Î¼Î®Î½Ï…Î¼Î±**:

![](<../../../.gitbook/assets/image (82).png>)

#### Î›Î¯ÏƒÏ„Î± Ï…Ï€Î·ÏÎµÏƒÎ¯Î±Ï‚
```bash
dz> run app.service.info -a com.mwr.example.sieve
Package: com.mwr.example.sieve
com.mwr.example.sieve.AuthService
Permission: null
com.mwr.example.sieve.CryptoService
Permission: null
```
#### **Î‘Î»Î»Î·Î»ÎµÏ€Î¯Î´ÏÎ±ÏƒÎ·** Î¼Îµ Î¼Î¹Î± Ï…Ï€Î·ÏÎµÏƒÎ¯Î±
```bash
app.service.send            Send a Message to a service, and display the reply
app.service.start           Start Service
app.service.stop            Stop Service
```
#### Î Î±ÏÎ¬Î´ÎµÎ¹Î³Î¼Î±

Take a look to the **drozer** help for `app.service.send`:

![](<../../../.gitbook/assets/image (1079).png>)

Note that you will be sending first the data inside "_msg.what_", then "_msg.arg1_" and "_msg.arg2_", you should check inside the code **Ï€Î¿Î¹Î± Ï€Î»Î·ÏÎ¿Ï†Î¿ÏÎ¯Î± Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹ÎµÎ¯Ï„Î±Î¹** ÎºÎ±Î¹ Ï€Î¿Ï.\
Using the `--extra` option you can send something interpreted by "_msg.replyTo"_, and using `--bundle-as-obj` you create and object with the provided details.

In the following example:

* `what == 2354`
* `arg1 == 9234`
* `arg2 == 1`
* `replyTo == object(string com.mwr.example.sieve.PIN 1337)`
```bash
run app.service.send com.mwr.example.sieve com.mwr.example.sieve.AuthService --msg 2354 9234 1 --extra string com.mwr.example.sieve.PIN 1337 --bundle-as-obj
```
![](<../../../.gitbook/assets/image (647).png>)

### Broadcast Receivers

**Î£Ï„Î·Î½ ÎµÎ½ÏŒÏ„Î·Ï„Î± Î²Î±ÏƒÎ¹ÎºÏÎ½ Ï€Î»Î·ÏÎ¿Ï†Î¿ÏÎ¹ÏÎ½ Ï„Î¿Ï… Android Î¼Ï€Î¿ÏÎµÎ¯Ï„Îµ Î½Î± Î´ÎµÎ¯Ï„Îµ Ï„Î¹ ÎµÎ¯Î½Î±Î¹ Î­Î½Î±Ï‚ Broadcast Receiver**.

Î‘Ï†Î¿Ï Î±Î½Î±ÎºÎ±Î»ÏÏˆÎµÏ„Îµ Î±Ï…Ï„Î¿ÏÏ‚ Ï„Î¿Ï…Ï‚ Broadcast Receivers, Î¸Î± Ï€ÏÎ­Ï€ÎµÎ¹ Î½Î± **ÎµÎ»Î­Î³Î¾ÎµÏ„Îµ Ï„Î¿Î½ ÎºÏÎ´Î¹ÎºÎ±** Ï„Î¿Ï…Ï‚. Î”ÏÏƒÏ„Îµ Î¹Î´Î¹Î±Î¯Ï„ÎµÏÎ· Ï€ÏÎ¿ÏƒÎ¿Ï‡Î® ÏƒÏ„Î· **Î»ÎµÎ¹Ï„Î¿Ï…ÏÎ³Î¯Î± `onReceive`** ÎºÎ±Î¸ÏÏ‚ Î¸Î± Î´Î¹Î±Ï‡ÎµÎ¹ÏÎ¯Î¶ÎµÏ„Î±Î¹ Ï„Î± Î¼Î·Î½ÏÎ¼Î±Ï„Î± Ï€Î¿Ï… Î»Î±Î¼Î²Î¬Î½Î¿Î½Ï„Î±Î¹.

#### **Î‘Î½Î¹Ï‡Î½ÎµÏÏƒÏ„Îµ ÏŒÎ»Î¿Ï…Ï‚** Ï„Î¿Ï…Ï‚ broadcast receivers
```bash
run app.broadcast.info #Detects all
```
#### ÎˆÎ»ÎµÎ³Ï‡Î¿Ï‚ Ï„Ï‰Î½ broadcast receivers Î¼Î¹Î±Ï‚ ÎµÏ†Î±ÏÎ¼Î¿Î³Î®Ï‚
```bash
#Check one negative
run app.broadcast.info -a jakhar.aseem.diva
Package: jakhar.aseem.diva
No matching receivers.

# Check one positive
run app.broadcast.info -a com.google.android.youtube
Package: com.google.android.youtube
com.google.android.libraries.youtube.player.PlayerUiModule$LegacyMediaButtonIntentReceiver
Permission: null
com.google.android.apps.youtube.app.common.notification.GcmBroadcastReceiver
Permission: com.google.android.c2dm.permission.SEND
com.google.android.apps.youtube.app.PackageReplacedReceiver
Permission: null
com.google.android.libraries.youtube.account.AccountsChangedReceiver
Permission: null
com.google.android.apps.youtube.app.application.system.LocaleUpdatedReceiver
Permission: null
```
#### Broadcast **Î‘Î»Î»Î·Î»ÎµÏ€Î¹Î´ÏÎ¬ÏƒÎµÎ¹Ï‚**
```bash
app.broadcast.info          Get information about broadcast receivers
app.broadcast.send          Send broadcast using an intent
app.broadcast.sniff         Register a broadcast receiver that can sniff particular intents
```
#### Î£Ï„ÎµÎ¯Î»Ï„Îµ Î­Î½Î± Î¼Î®Î½Ï…Î¼Î±

Î£Îµ Î±Ï…Ï„ÏŒ Ï„Î¿ Ï€Î±ÏÎ¬Î´ÎµÎ¹Î³Î¼Î±, ÎµÎºÎ¼ÎµÏ„Î±Î»Î»ÎµÏ…ÏŒÎ¼ÎµÎ½Î¿Î¹ Ï„Î¿Î½ [FourGoats apk](https://github.com/linkedin/qark/blob/master/tests/goatdroid.apk) Content Provider, Î¼Ï€Î¿ÏÎµÎ¯Ï„Îµ Î½Î± **ÏƒÏ„ÎµÎ¯Î»ÎµÏ„Îµ Î­Î½Î± Î±Ï…Î¸Î±Î¯ÏÎµÏ„Î¿ SMS** ÏƒÎµ Î¿Ï€Î¿Î¹Î¿Î½Î´Î®Ï€Î¿Ï„Îµ Î¼Î· premium Ï€ÏÎ¿Î¿ÏÎ¹ÏƒÎ¼ÏŒ **Ï‡Ï‰ÏÎ¯Ï‚ Î½Î± Î¶Î·Ï„Î®ÏƒÎµÏ„Îµ** Î¬Î´ÎµÎ¹Î± Î±Ï€ÏŒ Ï„Î¿Î½ Ï‡ÏÎ®ÏƒÏ„Î·.

![](<../../../.gitbook/assets/image (415).png>)

![](<../../../.gitbook/assets/image (573).png>)

Î‘Î½ Î´Î¹Î±Î²Î¬ÏƒÎµÏ„Îµ Ï„Î¿Î½ ÎºÏÎ´Î¹ÎºÎ±, Î¿Î¹ Ï€Î±ÏÎ¬Î¼ÎµÏ„ÏÎ¿Î¹ "_phoneNumber_" ÎºÎ±Î¹ "_message_" Ï€ÏÎ­Ï€ÎµÎ¹ Î½Î± ÏƒÏ„Î±Î»Î¿ÏÎ½ ÏƒÏ„Î¿Î½ Content Provider.
```bash
run app.broadcast.send --action org.owasp.goatdroid.fourgoats.SOCIAL_SMS --component org.owasp.goatdroid.fourgoats.broadcastreceivers SendSMSNowReceiver --extra string phoneNumber 123456789 --extra string message "Hello mate!"
```
### Is debuggeable

ÎˆÎ½Î± Ï€Î±ÏÎ±Î³Ï‰Î³Î¹ÎºÏŒ APK Î´ÎµÎ½ Î¸Î± Ï€ÏÎ­Ï€ÎµÎ¹ Ï€Î¿Ï„Î­ Î½Î± ÎµÎ¯Î½Î±Î¹ debuggeable.\
Î‘Ï…Ï„ÏŒ ÏƒÎ·Î¼Î±Î¯Î½ÎµÎ¹ ÏŒÏ„Î¹ Î¼Ï€Î¿ÏÎµÎ¯Ï„Îµ Î½Î± **ÏƒÏ…Î½Î´Î­ÏƒÎµÏ„Îµ Ï„Î¿Î½ java debugger** ÏƒÏ„Î·Î½ Ï„ÏÎ­Ï‡Î¿Ï…ÏƒÎ± ÎµÏ†Î±ÏÎ¼Î¿Î³Î®, Î½Î± Ï„Î·Î½ ÎµÏ€Î¹Î¸ÎµÏ‰ÏÎ®ÏƒÎµÏ„Îµ ÏƒÎµ Ï€ÏÎ±Î³Î¼Î±Ï„Î¹ÎºÏŒ Ï‡ÏÏŒÎ½Î¿, Î½Î± Î¿ÏÎ¯ÏƒÎµÏ„Îµ ÏƒÎ·Î¼ÎµÎ¯Î± Î´Î¹Î±ÎºÎ¿Ï€Î®Ï‚, Î½Î± Ï€ÏÎ¿Ï‡Ï‰ÏÎ®ÏƒÎµÏ„Îµ Î²Î®Î¼Î± Ï€ÏÎ¿Ï‚ Î²Î®Î¼Î±, Î½Î± ÏƒÏ…Î³ÎºÎµÎ½Ï„ÏÏÏƒÎµÏ„Îµ Ï„Î¹Î¼Î­Ï‚ Î¼ÎµÏ„Î±Î²Î»Î·Ï„ÏÎ½ ÎºÎ±Î¹ Î±ÎºÏŒÎ¼Î· ÎºÎ±Î¹ Î½Î± Ï„Î¹Ï‚ Î±Î»Î»Î¬Î¾ÎµÏ„Îµ. [Î¤Î¿ InfoSec institute Î­Ï‡ÎµÎ¹ Î­Î½Î± ÎµÎ¾Î±Î¹ÏÎµÏ„Î¹ÎºÏŒ Î¬ÏÎ¸ÏÎ¿](../exploiting-a-debuggeable-applciation.md) Î³Î¹Î± Ï„Î¿ Ï€ÏÏ‚ Î½Î± ÎµÎ¼Î²Î±Î¸ÏÎ½ÎµÏ„Îµ ÏŒÏ„Î±Î½ Î· ÎµÏ†Î±ÏÎ¼Î¿Î³Î® ÏƒÎ±Ï‚ ÎµÎ¯Î½Î±Î¹ debuggeable ÎºÎ±Î¹ Î½Î± ÎµÎ¹ÏƒÎ¬Î³ÎµÏ„Îµ ÎºÏÎ´Î¹ÎºÎ± ÏƒÎµ Ï€ÏÎ±Î³Î¼Î±Ï„Î¹ÎºÏŒ Ï‡ÏÏŒÎ½Î¿.

ÎŒÏ„Î±Î½ Î¼Î¹Î± ÎµÏ†Î±ÏÎ¼Î¿Î³Î® ÎµÎ¯Î½Î±Î¹ debuggeable, Î¸Î± ÎµÎ¼Ï†Î±Î½Î¯Î¶ÎµÏ„Î±Î¹ ÏƒÏ„Î¿ Manifest:
```xml
<application theme="@2131296387" debuggable="true"
```
ÎœÏ€Î¿ÏÎµÎ¯Ï„Îµ Î½Î± Î²ÏÎµÎ¯Ï„Îµ ÏŒÎ»ÎµÏ‚ Ï„Î¹Ï‚ ÎµÏ†Î±ÏÎ¼Î¿Î³Î­Ï‚ Ï€Î¿Ï… Î¼Ï€Î¿ÏÎ¿ÏÎ½ Î½Î± Î±Ï€Î¿ÏƒÏ†Î±Î»Î¼Î±Ï„Ï‰Î¸Î¿ÏÎ½ Î¼Îµ **Drozer**:
```bash
run app.package.debuggable
```
## Tutorials

* [https://resources.infosecinstitute.com/android-penetration-tools-walkthrough-series-drozer/#gref](https://resources.infosecinstitute.com/android-penetration-tools-walkthrough-series-drozer/#gref)
* [https://github.com/mgcfish/mobiletools/blob/master/\_posts/2016-08-01-Using-Drozer-for-application-security-assessments.md](https://github.com/mgcfish/mobiletools/blob/master/\_posts/2016-08-01-Using-Drozer-for-application-security-assessments.md)
* [https://www.hackingarticles.in/android-penetration-testing-drozer/](https://www.hackingarticles.in/android-penetration-testing-drozer/)
* [https://medium.com/@ashrafrizvi3006/how-to-test-android-application-security-using-drozer-edc002c5dcac](https://medium.com/@ashrafrizvi3006/how-to-test-android-application-security-using-drozer-edc002c5dcac)

## More info

* [https://blog.dixitaditya.com/android-pentesting-cheatsheet/](https://blog.dixitaditya.com/android-pentesting-cheatsheet/)

<img src="../../../.gitbook/assets/i3.png" alt="" data-size="original">

**Bug bounty tip**: **ÎµÎ³Î³ÏÎ±Ï†ÎµÎ¯Ï„Îµ** Î³Î¹Î± **Intigriti**, Î¼Î¹Î± premium **Ï€Î»Î±Ï„Ï†ÏŒÏÎ¼Î± bug bounty Ï€Î¿Ï… Î´Î·Î¼Î¹Î¿Ï…ÏÎ³Î®Î¸Î·ÎºÎµ Î±Ï€ÏŒ hackers, Î³Î¹Î± hackers**! Î•Î»Î¬Ï„Îµ Î¼Î±Î¶Î¯ Î¼Î±Ï‚ ÏƒÏ„Î¿ [**https://go.intigriti.com/hacktricks**](https://go.intigriti.com/hacktricks) ÏƒÎ®Î¼ÎµÏÎ±, ÎºÎ±Î¹ Î±ÏÏ‡Î¯ÏƒÏ„Îµ Î½Î± ÎºÎµÏÎ´Î¯Î¶ÎµÏ„Îµ Î²ÏÎ±Î²ÎµÎ¯Î± Î­Ï‰Ï‚ **$100,000**!

{% embed url="https://go.intigriti.com/hacktricks" %}

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
