# Drozeræ•™ç¨‹

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>â˜ï¸ HackTricksäº‘ â˜ï¸</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ğŸ¦ Twitter ğŸ¦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ğŸ™ï¸ Twitch ğŸ™ï¸</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ğŸ¥ Youtube ğŸ¥</strong></a></summary>

* ä½ åœ¨ä¸€å®¶**ç½‘ç»œå®‰å…¨å…¬å¸**å·¥ä½œå—ï¼Ÿä½ æƒ³åœ¨HackTricksä¸­çœ‹åˆ°ä½ çš„**å…¬å¸å¹¿å‘Š**å—ï¼Ÿæˆ–è€…ä½ æƒ³è·å¾—**PEASSçš„æœ€æ–°ç‰ˆæœ¬æˆ–ä¸‹è½½HackTricksçš„PDF**å—ï¼Ÿè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼
* å‘ç°æˆ‘ä»¬çš„ç‹¬å®¶[**NFTs**](https://opensea.io/collection/the-peass-family)æ”¶è—å“[**The PEASS Family**](https://opensea.io/collection/the-peass-family)
* è·å–[**å®˜æ–¹PEASSå’ŒHackTrickså‘¨è¾¹äº§å“**](https://peass.creator-spring.com)
* **åŠ å…¥**[**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discordç¾¤ç»„**](https://discord.gg/hRep4RUj7f)æˆ–[**ç”µæŠ¥ç¾¤ç»„**](https://t.me/peass)æˆ–**å…³æ³¨**æˆ‘åœ¨**Twitter**ä¸Šçš„[**ğŸ¦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks_live)**ã€‚**
* **é€šè¿‡å‘[hacktricks repo](https://github.com/carlospolop/hacktricks)å’Œ[hacktricks-cloud repo](https://github.com/carlospolop/hacktricks-cloud)æäº¤PRæ¥åˆ†äº«ä½ çš„é»‘å®¢æŠ€å·§**ã€‚

</details>

<img src="../../../.gitbook/assets/i3.png" alt="" data-size="original">

**èµé‡‘çŒäººæç¤º**ï¼š**æ³¨å†Œ**Intigritiï¼Œä¸€ä¸ªç”±é»‘å®¢åˆ›å»ºçš„é«˜çº§**èµé‡‘çŒäººå¹³å°**ï¼ç«‹å³åŠ å…¥æˆ‘ä»¬çš„[**https://go.intigriti.com/hacktricks**](https://go.intigriti.com/hacktricks)ï¼Œå¼€å§‹èµšå–é«˜è¾¾**$100,000**çš„èµé‡‘ï¼

{% embed url="https://go.intigriti.com/hacktricks" %}

## è¦æµ‹è¯•çš„APK

* [Sieve](https://github.com/mwrlabs/drozer/releases/download/2.3.4/sieve.apk)ï¼ˆæ¥è‡ªmrwlabsï¼‰
* [DIVA](https://payatu.com/wp-content/uploads/2016/01/diva-beta.tar.gz)

## å®‰è£…

åœ¨ä¸»æœºä¸Šå®‰è£…Drozerå®¢æˆ·ç«¯ã€‚ä»[æœ€æ–°ç‰ˆæœ¬](https://github.com/mwrlabs/drozer/releases)ä¸‹è½½å®ƒã€‚
```bash
pip install drozer-2.4.4-py2-none-any.whl
pip install twisted
pip install service_identity
```
ä»[æœ€æ–°ç‰ˆæœ¬](https://github.com/mwrlabs/drozer/releases)ä¸‹è½½å¹¶å®‰è£…drozer APKã€‚ç›®å‰çš„ç‰ˆæœ¬æ˜¯[è¿™ä¸ª](https://github.com/mwrlabs/drozer/releases/download/2.3.4/drozer-agent-2.3.4.apk)ã€‚
```
adb install drozer.apk
```
### å¯åŠ¨æœåŠ¡å™¨

ä»£ç†æ­£åœ¨ç«¯å£31415ä¸Šè¿è¡Œï¼Œæˆ‘ä»¬éœ€è¦è¿›è¡Œ[ç«¯å£è½¬å‘](https://en.wikipedia.org/wiki/Port\_forwarding)ä»¥å»ºç«‹Drozerå®¢æˆ·ç«¯å’Œä»£ç†ä¹‹é—´çš„é€šä¿¡ï¼Œä»¥ä¸‹æ˜¯æ‰§è¡Œæ­¤æ“ä½œçš„å‘½ä»¤ï¼š
```
adb forward tcp:31415 tcp:31415
```
æœ€åï¼Œ**å¯åŠ¨**åº”ç”¨ç¨‹åºå¹¶æŒ‰ä¸‹åº•éƒ¨çš„â€œ**ON**â€æŒ‰é’®ã€‚

![](<../../../.gitbook/assets/image (63).png>)

ç„¶åè¿æ¥åˆ°å®ƒï¼š
```
drozer console connect
```
## æœ‰è¶£çš„å‘½ä»¤

| **å‘½ä»¤**        | **æè¿°**                                                                                                                                                |
| --------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------ |
| **Help MODULE** | æ˜¾ç¤ºæ‰€é€‰æ¨¡å—çš„å¸®åŠ©ä¿¡æ¯                                                                                                                                  |
| **list**        | æ˜¾ç¤ºå½“å‰ä¼šè¯ä¸­å¯ä»¥æ‰§è¡Œçš„æ‰€æœ‰drozeræ¨¡å—çš„åˆ—è¡¨ã€‚æ­¤å‘½ä»¤éšè—æ‚¨æ²¡æœ‰é€‚å½“æƒé™è¿è¡Œçš„æ¨¡å—ã€‚                                                                       |
| **shell**       | åœ¨è®¾å¤‡ä¸Šä»¥Agentçš„ä¸Šä¸‹æ–‡å¯åŠ¨ä¸€ä¸ªäº¤äº’å¼Linux shellã€‚                                                                                                       |
| **clean**       | åˆ é™¤Androidè®¾å¤‡ä¸Šdrozerå­˜å‚¨çš„ä¸´æ—¶æ–‡ä»¶ã€‚                                                                                                                 |
| **load**        | åŠ è½½åŒ…å«drozerå‘½ä»¤å¹¶æŒ‰é¡ºåºæ‰§è¡Œå®ƒä»¬çš„æ–‡ä»¶ã€‚                                                                                                             |
| **module**      | ä»äº’è”ç½‘ä¸ŠæŸ¥æ‰¾å¹¶å®‰è£…é¢å¤–çš„drozeræ¨¡å—ã€‚                                                                                                                  |
| **unset**       | åˆ é™¤drozerä¼ é€’ç»™ä»»ä½•å®ƒç”Ÿæˆçš„Linux shellçš„å‘½åå˜é‡ã€‚                                                                                                       |
| **set**         | å°†ä¸€ä¸ªå€¼å­˜å‚¨åœ¨å˜é‡ä¸­ï¼Œè¯¥å˜é‡å°†ä½œä¸ºç¯å¢ƒå˜é‡ä¼ é€’ç»™drozerç”Ÿæˆçš„ä»»ä½•Linux shellã€‚                                                                               |
| **shell**       | åœ¨è®¾å¤‡ä¸Šä»¥Agentçš„ä¸Šä¸‹æ–‡å¯åŠ¨ä¸€ä¸ªäº¤äº’å¼Linux shellã€‚                                                                                                       |
| **run MODULE**  | æ‰§è¡Œä¸€ä¸ªdrozeræ¨¡å—ã€‚                                                                                                                                    |
| **exploit**     | Drozerå¯ä»¥åˆ›å»ºåœ¨è®¾å¤‡ä¸Šæ‰§è¡Œçš„åˆ©ç”¨ç¨‹åºã€‚`drozer exploit list`                                                                                             |
| **payload**     | åˆ©ç”¨ç¨‹åºéœ€è¦ä¸€ä¸ªæœ‰æ•ˆè½½è·ã€‚`drozer payload list`                                                                                                         |

### åŒ…

é€šè¿‡éƒ¨åˆ†åç§°è¿‡æ»¤ï¼Œæ‰¾åˆ°åŒ…çš„**åç§°**ï¼š
```
dz> run app.package.list -f sieve
com.mwr.example.sieve
```
**è½¯ä»¶åŒ…çš„åŸºæœ¬ä¿¡æ¯**ï¼š

- **Package Name**: com.example.app
- **Version Name**: 1.0
- **Version Code**: 1
- **Target SDK Version**: 28
- **Min SDK Version**: 21
- **Permissions**: android.permission.INTERNET, android.permission.ACCESS_NETWORK_STATE

---

**Installation**:

1. Download the APK file from the provided link.
2. Connect your Android device to your computer.
3. Open a terminal and navigate to the directory where the APK file is located.
4. Install the APK using the following command: `adb install app.apk`
5. Once the installation is complete, you can launch the app on your device.

---

**Usage**:

1. Launch the app on your Android device.
2. Explore the different features and functionalities of the app.
3. Take note of any suspicious behavior or vulnerabilities that you come across.
4. Use drozer to perform a security assessment of the app.
5. Analyze the results and identify any potential security issues.
6. Report your findings to the app developer or relevant stakeholders.

---

**Additional Resources**:

- [Drozer Documentation](https://github.com/FSecureLABS/drozer/wiki)
- [Android Developer Documentation](https://developer.android.com/docs)
```
dz> run app.package.info -a com.mwr.example.sieve
Package: com.mwr.example.sieve
Process Name: com.mwr.example.sieve
Version: 1.0
Data Directory: /data/data/com.mwr.example.sieve
APK Path: /data/app/com.mwr.example.sieve-2.apk
UID: 10056
GID: [1028, 1015, 3003]
Shared Libraries: null
Shared User ID: null
Uses Permissions:
- android.permission.READ_EXTERNAL_STORAGE
- android.permission.WRITE_EXTERNAL_STORAGE
- android.permission.INTERNET
Defines Permissions:
- com.mwr.example.sieve.READ_KEYS
- com.mwr.example.sieve.WRITE_KEYS
```
é˜…è¯»**æ¸…å•**ï¼š
```
run app.package.manifest jakhar.aseem.diva
```
**æ”»å‡»é¢**çš„èŒƒå›´ï¼š
```
dz> run app.package.attacksurface com.mwr.example.sieve
Attack Surface:
3 activities exported
0 broadcast receivers exported
2 content providers exported
2 services exported
is debuggable
```
* **æ´»åŠ¨**ï¼šä¹Ÿè®¸ä½ å¯ä»¥å¯åŠ¨ä¸€ä¸ªæ´»åŠ¨å¹¶ç»•è¿‡æŸç§åº”è¯¥é˜»æ­¢ä½ å¯åŠ¨çš„æˆæƒã€‚
* **å†…å®¹æä¾›è€…**ï¼šä¹Ÿè®¸ä½ å¯ä»¥è®¿é—®ç§æœ‰æ•°æ®æˆ–åˆ©ç”¨ä¸€äº›æ¼æ´ï¼ˆSQLæ³¨å…¥æˆ–è·¯å¾„éå†ï¼‰ã€‚
* **æœåŠ¡**ï¼š
* **is debuggable**ï¼š[äº†è§£æ›´å¤š](./#is-debuggeable)

### æ´»åŠ¨

åœ¨AndroidManifest.xmlæ–‡ä»¶ä¸­ï¼Œå¯¼å‡ºçš„æ´»åŠ¨ç»„ä»¶çš„â€œandroid:exportedâ€å€¼è¢«è®¾ç½®ä¸º**â€œtrueâ€**ï¼š
```markup
<activity android:name="com.my.app.Initial" android:exported="true">
</activity>
```
**åˆ—å‡ºå¯¼å‡ºçš„æ´»åŠ¨**ï¼š

To list the exported activities of an Android application, you can use the `drozer` tool. The exported activities are components of an app that can be accessed by other apps or external entities. These activities can potentially be exploited by attackers if they are not properly secured.

To list the exported activities using `drozer`, follow these steps:

1. Install `drozer` on your machine and set up the environment.
2. Connect your Android device to your machine using a USB cable.
3. Open a terminal and run the command `adb devices` to ensure that your device is recognized.
4. Run the command `drozer console connect` to establish a connection between `drozer` and your device.
5. Once connected, run the command `run app.activity.info -a <package_name>` to list the exported activities of the specified package.
6. Replace `<package_name>` with the package name of the target application.

The output will display the exported activities along with their corresponding information, such as the activity name, package name, and intent filters. This information can be useful for identifying potential security vulnerabilities in the application.

It is important to note that listing exported activities alone does not indicate a security vulnerability. However, it can provide valuable insights for further analysis and testing during a penetration test.
```
dz> run app.activity.info -a com.mwr.example.sieve
Package: com.mwr.example.sieve
com.mwr.example.sieve.FileSelectActivity
com.mwr.example.sieve.MainLoginActivity
com.mwr.example.sieve.PWList
```
**å¯åŠ¨æ´»åŠ¨**ï¼š

ä¹Ÿè®¸ä½ å¯ä»¥å¯åŠ¨ä¸€ä¸ªæ´»åŠ¨å¹¶ç»•è¿‡æŸç§åº”è¯¥é˜»æ­¢ä½ å¯åŠ¨å®ƒçš„æˆæƒã€‚
```
dz> run app.activity.start --component com.mwr.example.sieve com.mwr.example.sieve.PWList
```
æ‚¨è¿˜å¯ä»¥é€šè¿‡**adb**å¯åŠ¨å¯¼å‡ºçš„æ´»åŠ¨ï¼š

- åŒ…åä¸º com.example.demo
- å¯¼å‡ºçš„æ´»åŠ¨åä¸º com.example.test.MainActivity
```
adb shell am start -n com.example.demo/com.example.test.MainActivity
```
### å†…å®¹æä¾›è€…

è¿™ç¯‡æ–‡ç« å¤ªé•¿äº†ï¼Œæ‰€ä»¥**ä½ å¯ä»¥**[**åœ¨è¿™é‡Œè®¿é—®å®ƒçš„ç‹¬ç«‹é¡µé¢**](exploiting-content-providers.md)ã€‚

### æœåŠ¡

ä¸€ä¸ªå¯¼å‡ºçš„æœåŠ¡åœ¨Manifest.xmlä¸­å£°æ˜ï¼š
```markup
<service android:name=".AuthService" android:exported="true" android:process=":remote"/>
```
åœ¨ä»£ç ä¸­**æ£€æŸ¥**`handleMessage`å‡½æ•°ï¼Œè¯¥å‡½æ•°å°†**æ¥æ”¶**æ¶ˆæ¯ï¼š

![](<../../../.gitbook/assets/image (194).png>)

#### æœåŠ¡åˆ—è¡¨
```
dz> run app.service.info -a com.mwr.example.sieve
Package: com.mwr.example.sieve
com.mwr.example.sieve.AuthService
Permission: null
com.mwr.example.sieve.CryptoService
Permission: null
```
#### ä¸æœåŠ¡è¿›è¡Œäº¤äº’

To interact with a service, you can use the `run` command in drozer. This command allows you to execute various actions on the target service. 

è¦ä¸æœåŠ¡è¿›è¡Œäº¤äº’ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨drozerä¸­çš„`run`å‘½ä»¤ã€‚è¯¥å‘½ä»¤å…è®¸æ‚¨åœ¨ç›®æ ‡æœåŠ¡ä¸Šæ‰§è¡Œå„ç§æ“ä½œã€‚

The basic syntax for the `run` command is as follows:

`run <module> <action> [options]`

`run`å‘½ä»¤çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š

`run <æ¨¡å—> <æ“ä½œ> [é€‰é¡¹]`

- `<module>`: Specifies the module to be executed.
- `<module>`ï¼šæŒ‡å®šè¦æ‰§è¡Œçš„æ¨¡å—ã€‚

- `<action>`: Specifies the action to be performed on the module.
- `<action>`ï¼šæŒ‡å®šè¦åœ¨æ¨¡å—ä¸Šæ‰§è¡Œçš„æ“ä½œã€‚

- `[options]`: Specifies any additional options or parameters required by the module.
- `[options]`ï¼šæŒ‡å®šæ¨¡å—æ‰€éœ€çš„ä»»ä½•å…¶ä»–é€‰é¡¹æˆ–å‚æ•°ã€‚

For example, to interact with the `activity` module and launch an activity on the target device, you can use the following command:

ä¾‹å¦‚ï¼Œè¦ä¸`activity`æ¨¡å—è¿›è¡Œäº¤äº’å¹¶åœ¨ç›®æ ‡è®¾å¤‡ä¸Šå¯åŠ¨ä¸€ä¸ªæ´»åŠ¨ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š

```
run app.activity.start --component <package_name> <activity_name>
```

Replace `<package_name>` with the package name of the target app and `<activity_name>` with the name of the activity you want to launch.

å°†`<package_name>`æ›¿æ¢ä¸ºç›®æ ‡åº”ç”¨ç¨‹åºçš„åŒ…åï¼Œå°†`<activity_name>`æ›¿æ¢ä¸ºè¦å¯åŠ¨çš„æ´»åŠ¨çš„åç§°ã€‚

By using the `run` command with different modules and actions, you can interact with various services and perform actions such as starting activities, sending intents, querying content providers, and more.

é€šè¿‡ä½¿ç”¨ä¸åŒçš„æ¨¡å—å’Œæ“ä½œæ¥è¿è¡Œ`run`å‘½ä»¤ï¼Œæ‚¨å¯ä»¥ä¸å„ç§æœåŠ¡è¿›è¡Œäº¤äº’ï¼Œå¹¶æ‰§è¡Œå¯åŠ¨æ´»åŠ¨ã€å‘é€æ„å›¾ã€æŸ¥è¯¢å†…å®¹æä¾›ç¨‹åºç­‰æ“ä½œã€‚
```
app.service.send            Send a Message to a service, and display the reply
app.service.start           Start Service
app.service.stop            Stop Service
```
#### ç¤ºä¾‹

æŸ¥çœ‹`drozer`çš„`app.service.send`å¸®åŠ©æ–‡æ¡£ï¼š

![](<../../../.gitbook/assets/image (196) (1).png>)

è¯·æ³¨æ„ï¼Œæ‚¨å°†é¦–å…ˆå‘é€"_msg.what_"ä¸­çš„æ•°æ®ï¼Œç„¶åæ˜¯"_msg.arg1_"å’Œ"_msg.arg2_"ï¼Œæ‚¨åº”è¯¥åœ¨ä»£ç ä¸­æ£€æŸ¥**æ­£åœ¨ä½¿ç”¨çš„ä¿¡æ¯**ä»¥åŠå…¶ä½ç½®ã€‚\
ä½¿ç”¨`--extra`é€‰é¡¹ï¼Œæ‚¨å¯ä»¥å‘é€ç”±"_msg.replyTo"è§£é‡Šçš„å†…å®¹ï¼Œå¹¶ä½¿ç”¨`--bundle-as-obj`åˆ›å»ºä¸€ä¸ªå¸¦æœ‰æä¾›çš„è¯¦ç»†ä¿¡æ¯çš„å¯¹è±¡ã€‚

åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼š

* `what == 2354`
* `arg1 == 9234`
* `arg2 == 1`
* `replyTo == object(string com.mwr.example.sieve.PIN 1337)`
```
run app.service.send com.mwr.example.sieve com.mwr.example.sieve.AuthService --msg 2354 9234 1 --extra string com.mwr.example.sieve.PIN 1337 --bundle-as-obj
```
![](<../../../.gitbook/assets/image (195).png>)

### å¹¿æ’­æ¥æ”¶å™¨

Androidåº”ç”¨ç¨‹åºå¯ä»¥ä»Androidç³»ç»Ÿå’Œå…¶ä»–Androidåº”ç”¨ç¨‹åºå‘é€æˆ–æ¥æ”¶å¹¿æ’­æ¶ˆæ¯ï¼Œç±»ä¼¼äº[å‘å¸ƒ-è®¢é˜…](https://en.wikipedia.org/wiki/Publish%E2%80%93subscribe_pattern)è®¾è®¡æ¨¡å¼ã€‚è¿™äº›å¹¿æ’­åœ¨æ„Ÿå…´è¶£çš„äº‹ä»¶å‘ç”Ÿæ—¶å‘é€ã€‚ä¾‹å¦‚ï¼Œå½“ç³»ç»Ÿå¯åŠ¨æˆ–è®¾å¤‡å¼€å§‹å……ç”µæ—¶ï¼ŒAndroidç³»ç»Ÿä¼šå‘é€å¹¿æ’­ã€‚åº”ç”¨ç¨‹åºè¿˜å¯ä»¥å‘é€è‡ªå®šä¹‰å¹¿æ’­ï¼Œä¾‹å¦‚ï¼Œé€šçŸ¥å…¶ä»–åº”ç”¨ç¨‹åºå¯èƒ½æ„Ÿå…´è¶£çš„å†…å®¹ï¼ˆä¾‹å¦‚ï¼Œå·²ä¸‹è½½ä¸€äº›æ–°æ•°æ®ï¼‰ã€‚

åº”ç”¨ç¨‹åºå¯ä»¥æ³¨å†Œæ¥æ”¶ç‰¹å®šçš„å¹¿æ’­ã€‚å½“å‘é€å¹¿æ’­æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å°†å¹¿æ’­è·¯ç”±åˆ°å·²è®¢é˜…æ¥æ”¶è¯¥ç‰¹å®šç±»å‹å¹¿æ’­çš„åº”ç”¨ç¨‹åºã€‚

è¿™å¯èƒ½å‡ºç°åœ¨Manifest.xmlæ–‡ä»¶ä¸­ï¼š
```markup
<receiver android:name=".MyBroadcastReceiver"  android:exported="true">
<intent-filter>
<action android:name="android.intent.action.BOOT_COMPLETED"/>
<action android:name="android.intent.action.INPUT_METHOD_CHANGED" />
</intent-filter>
</receiver>
```
ä»ï¼š[https://developer.android.com/guide/components/broadcasts](https://developer.android.com/guide/components/broadcasts)

åœ¨å‘ç°è¿™äº›å¹¿æ’­æ¥æ”¶å™¨ä¹‹åï¼Œä½ åº”è¯¥**æ£€æŸ¥å®ƒä»¬çš„ä»£ç **ã€‚ç‰¹åˆ«æ³¨æ„\*\*`onReceive`\*\*å‡½æ•°ï¼Œå› ä¸ºå®ƒå°†å¤„ç†æ¥æ”¶åˆ°çš„æ¶ˆæ¯ã€‚

#### **æ£€æµ‹æ‰€æœ‰**å¹¿æ’­æ¥æ”¶å™¨
```bash
run app.broadcast.info #Detects all
```
#### æ£€æŸ¥åº”ç”¨ç¨‹åºçš„å¹¿æ’­æ¥æ”¶å™¨

To check the broadcast receivers of an Android app, you can use the `drozer` tool. This tool allows you to interact with the Android operating system at the application layer, providing a way to analyze and manipulate the app's components.

To begin, make sure you have `drozer` installed on your machine. Once installed, you can start the `drozer` console by running the command `drozer console`.

To check the broadcast receivers of an app, you can use the `run app.broadcast.info -a <package_name>` command. Replace `<package_name>` with the package name of the app you want to analyze.

This command will display a list of all the broadcast receivers registered by the app, along with their corresponding permissions and intent filters. By analyzing this information, you can identify potential security vulnerabilities or misconfigurations in the app's broadcast receivers.

It is important to note that this technique should only be used for legitimate purposes, such as penetration testing or security auditing. Unauthorized use of this technique is illegal and unethical. Always ensure you have proper authorization before performing any security assessments.
```bash
#Check one negative
run app.broadcast.info -a jakhar.aseem.diva
Package: jakhar.aseem.diva
No matching receivers.

# Check one positive
run app.broadcast.info -a com.google.android.youtube
Package: com.google.android.youtube
com.google.android.libraries.youtube.player.PlayerUiModule$LegacyMediaButtonIntentReceiver
Permission: null
com.google.android.apps.youtube.app.common.notification.GcmBroadcastReceiver
Permission: com.google.android.c2dm.permission.SEND
com.google.android.apps.youtube.app.PackageReplacedReceiver
Permission: null
com.google.android.libraries.youtube.account.AccountsChangedReceiver
Permission: null
com.google.android.apps.youtube.app.application.system.LocaleUpdatedReceiver
Permission: null
```
#### å¹¿æ’­ **äº¤äº’**

Broadcasts are a way for different components within an Android app to communicate with each other. They allow one component to send a message, called an intent, and other components can receive and respond to that message.

å¹¿æ’­æ˜¯Androidåº”ç”¨ç¨‹åºä¸­ä¸åŒç»„ä»¶ä¹‹é—´è¿›è¡Œé€šä¿¡çš„ä¸€ç§æ–¹å¼ã€‚å®ƒä»¬å…è®¸ä¸€ä¸ªç»„ä»¶å‘é€ä¸€æ¡æ¶ˆæ¯ï¼Œç§°ä¸ºæ„å›¾ï¼ˆintentï¼‰ï¼Œå…¶ä»–ç»„ä»¶å¯ä»¥æ¥æ”¶å¹¶å“åº”è¯¥æ¶ˆæ¯ã€‚

Broadcasts can be sent within an app or even between different apps. This makes them a powerful tool for inter-app communication.

å¹¿æ’­å¯ä»¥åœ¨åº”ç”¨ç¨‹åºå†…éƒ¨å‘é€ï¼Œç”šè‡³å¯ä»¥åœ¨ä¸åŒçš„åº”ç”¨ç¨‹åºä¹‹é—´å‘é€ã€‚è¿™ä½¿å¾—å®ƒä»¬æˆä¸ºåº”ç”¨ç¨‹åºé—´é€šä¿¡çš„å¼ºå¤§å·¥å…·ã€‚

There are two types of broadcasts: **normal broadcasts** and **ordered broadcasts**.

å¹¿æ’­æœ‰ä¸¤ç§ç±»å‹ï¼š**æ™®é€šå¹¿æ’­**å’Œ**æœ‰åºå¹¿æ’­**ã€‚

**Normal broadcasts** are asynchronous and are sent to all registered receivers at the same time. The receivers cannot abort the broadcast or change the order in which they receive it.

**æ™®é€šå¹¿æ’­**æ˜¯å¼‚æ­¥çš„ï¼Œä¼šåŒæ—¶å‘é€ç»™æ‰€æœ‰å·²æ³¨å†Œçš„æ¥æ”¶å™¨ã€‚æ¥æ”¶å™¨æ— æ³•ä¸­æ­¢å¹¿æ’­æˆ–æ›´æ”¹æ¥æ”¶å¹¿æ’­çš„é¡ºåºã€‚

**Ordered broadcasts**, on the other hand, are synchronous and are sent to receivers one at a time, in a specific order. Each receiver has the option to abort the broadcast or change the order in which subsequent receivers receive it.

å¦ä¸€æ–¹é¢ï¼Œ**æœ‰åºå¹¿æ’­**æ˜¯åŒæ­¥çš„ï¼ŒæŒ‰ç…§ç‰¹å®šçš„é¡ºåºé€ä¸ªå‘é€ç»™æ¥æ”¶å™¨ã€‚æ¯ä¸ªæ¥æ”¶å™¨éƒ½å¯ä»¥é€‰æ‹©ä¸­æ­¢å¹¿æ’­æˆ–æ›´æ”¹åç»­æ¥æ”¶å™¨æ¥æ”¶å¹¿æ’­çš„é¡ºåºã€‚

Broadcasts can be intercepted by malicious apps, allowing them to gain unauthorized access to sensitive information or perform malicious actions. Therefore, it is important to secure the broadcast interactions in your Android app to prevent potential security vulnerabilities.

æ¶æ„åº”ç”¨ç¨‹åºå¯ä»¥æ‹¦æˆªå¹¿æ’­ï¼Œä»è€Œä½¿å®ƒä»¬èƒ½å¤Ÿæœªç»æˆæƒåœ°è®¿é—®æ•æ„Ÿä¿¡æ¯æˆ–æ‰§è¡Œæ¶æ„æ“ä½œã€‚å› æ­¤ï¼Œä¿æŠ¤Androidåº”ç”¨ç¨‹åºä¸­çš„å¹¿æ’­äº¤äº’ä»¥é˜²æ­¢æ½œåœ¨çš„å®‰å…¨æ¼æ´éå¸¸é‡è¦ã€‚
```
app.broadcast.info          Get information about broadcast receivers
app.broadcast.send          Send broadcast using an intent
app.broadcast.sniff         Register a broadcast receiver that can sniff particular intents
```
#### å‘é€æ¶ˆæ¯

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œé€šè¿‡æ»¥ç”¨ [FourGoats apk](https://github.com/linkedin/qark/blob/master/tests/goatdroid.apk) çš„å†…å®¹æä¾›è€…ï¼Œä½ å¯ä»¥**å‘é€ä»»æ„çŸ­ä¿¡**åˆ°ä»»ä½•éé«˜çº§ç›®çš„åœ°ï¼Œ**æ— éœ€**å‘ç”¨æˆ·è¯·æ±‚æƒé™ã€‚

![](<../../../.gitbook/assets/image (199).png>)

![](<../../../.gitbook/assets/image (197) (1).png>)

å¦‚æœä½ é˜…è¯»ä»£ç ï¼Œä½ ä¼šå‘ç°éœ€è¦å°†å‚æ•° "_phoneNumber_" å’Œ "_message_" å‘é€ç»™å†…å®¹æä¾›è€…ã€‚
```
run app.broadcast.send --action org.owasp.goatdroid.fourgoats.SOCIAL_SMS --component org.owasp.goatdroid.fourgoats.broadcastreceivers SendSMSNowReceiver --extra string phoneNumber 123456789 --extra string message "Hello mate!"
```
### æ˜¯å¦å¯è°ƒè¯•

ä¸€ä¸ªç”Ÿäº§ç¯å¢ƒçš„ APK åº”è¯¥æ°¸è¿œä¸å¯è°ƒè¯•ã€‚\
è¿™æ„å‘³ç€ä½ å¯ä»¥**é™„åŠ  Java è°ƒè¯•å™¨**åˆ°æ­£åœ¨è¿è¡Œçš„åº”ç”¨ç¨‹åºï¼Œå®æ—¶æ£€æŸ¥å®ƒï¼Œè®¾ç½®æ–­ç‚¹ï¼Œé€æ­¥æ‰§è¡Œï¼Œæ”¶é›†å˜é‡å€¼ç”šè‡³ä¿®æ”¹å®ƒä»¬ã€‚[InfoSec ç ”ç©¶æ‰€æœ‰ä¸€ç¯‡å¾ˆå¥½çš„æ–‡ç« ](../exploiting-a-debuggeable-applciation.md)å…³äºåœ¨åº”ç”¨ç¨‹åºå¯è°ƒè¯•æ—¶æ·±å…¥æŒ–æ˜å¹¶æ³¨å…¥è¿è¡Œæ—¶ä»£ç ã€‚

å½“ä¸€ä¸ªåº”ç”¨ç¨‹åºå¯è°ƒè¯•æ—¶ï¼Œå®ƒä¼šå‡ºç°åœ¨æ¸…å•æ–‡ä»¶ä¸­ï¼š
```
<application theme="@2131296387" debuggable="true"
```
æ‚¨å¯ä»¥ä½¿ç”¨**Drozer**æ‰¾åˆ°æ‰€æœ‰å¯è°ƒè¯•çš„åº”ç”¨ç¨‹åºï¼š
```
run app.package.debuggable
```
## æ•™ç¨‹

* [https://resources.infosecinstitute.com/android-penetration-tools-walkthrough-series-drozer/#gref](https://resources.infosecinstitute.com/android-penetration-tools-walkthrough-series-drozer/#gref)
* [http://mobiletools.mwrinfosecurity.com/Using-Drozer-for-application-security-assessments/](http://mobiletools.mwrinfosecurity.com/Using-Drozer-for-application-security-assessments/)

## æ›´å¤šä¿¡æ¯

* [https://blog.dixitaditya.com/android-pentesting-cheatsheet/](https://blog.dixitaditya.com/android-pentesting-cheatsheet/)



<img src="../../../.gitbook/assets/i3.png" alt="" data-size="original">

**Bugèµé‡‘æç¤º**: **æ³¨å†Œ**Intigritiï¼Œä¸€ä¸ªç”±é»‘å®¢åˆ›å»ºçš„é«˜çº§**Bugèµé‡‘å¹³å°**ï¼ç«‹å³åŠ å…¥æˆ‘ä»¬çš„[**https://go.intigriti.com/hacktricks**](https://go.intigriti.com/hacktricks)ï¼Œå¼€å§‹èµšå–é«˜è¾¾**$100,000**çš„èµé‡‘ï¼

{% embed url="https://go.intigriti.com/hacktricks" %}

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>â˜ï¸ HackTricksäº‘ â˜ï¸</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ğŸ¦ æ¨ç‰¹ ğŸ¦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ğŸ™ï¸ Twitch ğŸ™ï¸</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ğŸ¥ Youtube ğŸ¥</strong></a></summary>

* ä½ åœ¨**ç½‘ç»œå®‰å…¨å…¬å¸**å·¥ä½œå—ï¼Ÿæƒ³è¦åœ¨HackTricksä¸­**å®£ä¼ ä½ çš„å…¬å¸**å—ï¼Ÿæˆ–è€…ä½ æƒ³è¦**è·å–æœ€æ–°ç‰ˆæœ¬çš„PEASSæˆ–ä¸‹è½½PDFæ ¼å¼çš„HackTricks**å—ï¼Ÿè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼
* å‘ç°æˆ‘ä»¬çš„ç‹¬å®¶[**NFTs**](https://opensea.io/collection/the-peass-family)æ”¶è—å“[**The PEASS Family**](https://opensea.io/collection/the-peass-family)
* è·å–[**å®˜æ–¹PEASSå’ŒHackTrickså‘¨è¾¹äº§å“**](https://peass.creator-spring.com)
* **åŠ å…¥**[**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discordç¾¤ç»„**](https://discord.gg/hRep4RUj7f)æˆ–[**ç”µæŠ¥ç¾¤ç»„**](https://t.me/peass)ï¼Œæˆ–è€…**å…³æ³¨**æˆ‘åœ¨**Twitter**ä¸Šçš„[**ğŸ¦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks_live)**ã€‚**
* **é€šè¿‡å‘[hacktricks repo](https://github.com/carlospolop/hacktricks)å’Œ[hacktricks-cloud repo](https://github.com/carlospolop/hacktricks-cloud)æäº¤PRæ¥åˆ†äº«ä½ çš„é»‘å®¢æŠ€å·§**ã€‚

</details>
