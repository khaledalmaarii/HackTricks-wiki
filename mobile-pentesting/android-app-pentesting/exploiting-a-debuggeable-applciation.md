# åˆ©ç”¨å¯è°ƒè¯•åº”ç”¨ç¨‹åº

<details>

<summary><strong>ä»é›¶å¼€å§‹å­¦ä¹ AWSé»‘å®¢æŠ€æœ¯ï¼Œæˆä¸ºè‹±é›„</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>ï¼</strong></summary>

æ”¯æŒHackTricksçš„å…¶ä»–æ–¹å¼ï¼š

* å¦‚æœæ‚¨æƒ³åœ¨**HackTricksä¸­çœ‹åˆ°æ‚¨çš„å…¬å¸å¹¿å‘Š**æˆ–**ä¸‹è½½HackTricksçš„PDF**ï¼Œè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼
* è·å–[**å®˜æ–¹PEASS & HackTrickså•†å“**](https://peass.creator-spring.com)
* å‘ç°[**PEASSå®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬ç‹¬å®¶çš„[**NFTsç³»åˆ—**](https://opensea.io/collection/the-peass-family)
* **åŠ å…¥** ğŸ’¬ [**Discordç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**telegramç¾¤ç»„**](https://t.me/peass) æˆ–åœ¨ **Twitter** ğŸ¦ ä¸Š**å…³æ³¨**æˆ‘ [**@carlospolopm**](https://twitter.com/carlospolopm)**ã€‚**
* **é€šè¿‡å‘[**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) githubä»“åº“æäº¤PRæ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚**

</details>

## **ç»•è¿‡rootå’Œå¯è°ƒè¯•æ£€æŸ¥**

**æœ¬æ–‡èŠ‚æ‘˜è‡ªå¸–å­** [**https://medium.com/@shubhamsonani/hacking-with-precision-bypass-techniques-via-debugger-in-android-apps-27fd562b2cc0**](https://medium.com/@shubhamsonani/hacking-with-precision-bypass-techniques-via-debugger-in-android-apps-27fd562b2cc0)

### ä½¿Androidåº”ç”¨ç¨‹åºå¯è°ƒè¯•å¹¶ç»•è¿‡æ£€æŸ¥çš„æ­¥éª¤

#### **ä½¿åº”ç”¨ç¨‹åºå¯è°ƒè¯•**

åŸºäº https://medium.com/@shubhamsonani/hacking-with-precision-bypass-techniques-via-debugger-in-android-apps-27fd562b2cc0 çš„å†…å®¹

1. **åç¼–è¯‘APKï¼š**
- ä½¿ç”¨APK-GUIå·¥å…·åç¼–è¯‘APKã€‚
- åœ¨_android-manifest_æ–‡ä»¶ä¸­æ’å…¥`android:debuggable=true`ä»¥å¯ç”¨è°ƒè¯•æ¨¡å¼ã€‚
- é‡æ–°ç¼–è¯‘ã€ç­¾åå¹¶å¯¹ä¿®æ”¹åçš„åº”ç”¨ç¨‹åºè¿›è¡Œzipalignã€‚

2. **å®‰è£…ä¿®æ”¹åçš„åº”ç”¨ç¨‹åºï¼š**
- ä½¿ç”¨å‘½ä»¤ï¼š`adb install <application_name>`ã€‚

3. **æ£€ç´¢åŒ…åï¼š**
- æ‰§è¡Œ`adb shell pm list packages â€“3`åˆ—å‡ºç¬¬ä¸‰æ–¹åº”ç”¨ç¨‹åºå¹¶æ‰¾åˆ°åŒ…åã€‚

4. **è®¾ç½®åº”ç”¨ç¨‹åºç­‰å¾…è°ƒè¯•å™¨è¿æ¥ï¼š**
- å‘½ä»¤ï¼š`adb shell am setup-debug-app â€“w <package_name>`ã€‚
- **æ³¨æ„ï¼š**æ¯æ¬¡å¯åŠ¨åº”ç”¨ç¨‹åºä¹‹å‰éƒ½å¿…é¡»è¿è¡Œæ­¤å‘½ä»¤ï¼Œä»¥ç¡®ä¿å®ƒç­‰å¾…è°ƒè¯•å™¨ã€‚
- è¦æŒä¹…åŒ–ï¼Œä½¿ç”¨`adb shell am setup-debug-app â€“w -â€“persistent <package_name>`ã€‚
- è¦ç§»é™¤æ‰€æœ‰æ ‡å¿—ï¼Œä½¿ç”¨`adb shell am clear-debug-app <package_name>`ã€‚

5. **åœ¨Android Studioä¸­å‡†å¤‡è°ƒè¯•ï¼š**
- åœ¨Android Studioä¸­å¯¼èˆªåˆ°_æ–‡ä»¶ -> æ‰“å¼€é…ç½®æ–‡ä»¶æˆ–APK_ã€‚
- æ‰“å¼€é‡æ–°ç¼–è¯‘çš„APKã€‚

6. **åœ¨å…³é”®Javaæ–‡ä»¶ä¸­è®¾ç½®æ–­ç‚¹ï¼š**
- åœ¨`MainActivity.java`ï¼ˆç‰¹åˆ«æ˜¯åœ¨`onCreate`æ–¹æ³•ä¸­ï¼‰ã€`b.java`å’Œ`ContextWrapper.java`ä¸­æ”¾ç½®æ–­ç‚¹ã€‚

#### **ç»•è¿‡æ£€æŸ¥**

åº”ç”¨ç¨‹åºåœ¨æŸäº›ç‚¹ä¼šéªŒè¯å®ƒæ˜¯å¦å¯è°ƒè¯•ï¼Œå¹¶ä¸”è¿˜ä¼šæ£€æŸ¥æŒ‡ç¤ºè®¾å¤‡å·²rootçš„äºŒè¿›åˆ¶æ–‡ä»¶ã€‚è°ƒè¯•å™¨å¯ç”¨äºä¿®æ”¹åº”ç”¨ä¿¡æ¯ï¼Œå–æ¶ˆè®¾ç½®å¯è°ƒè¯•ä½ï¼Œå¹¶æ›´æ”¹æœç´¢çš„äºŒè¿›åˆ¶æ–‡ä»¶çš„åç§°ä»¥ç»•è¿‡è¿™äº›æ£€æŸ¥ã€‚

å¯¹äºå¯è°ƒè¯•æ£€æŸ¥ï¼š

1. **ä¿®æ”¹æ ‡å¿—è®¾ç½®ï¼š**
- åœ¨è°ƒè¯•å™¨æ§åˆ¶å°çš„å˜é‡éƒ¨åˆ†ï¼Œå¯¼èˆªåˆ°ï¼š`this mLoadedAPK -> mApplicationInfo -> flags = 814267974`ã€‚
- **æ³¨æ„ï¼š**`flags = 814267974`çš„äºŒè¿›åˆ¶è¡¨ç¤ºæ˜¯`11000011100111011110`ï¼Œè¡¨æ˜"Flag_debuggable"æ˜¯æ´»åŠ¨çš„ã€‚

![è°ƒè¯•å™¨æˆªå›¾](https://miro.medium.com/v2/resize:fit:1400/1*-ckiSbWGSoc1beuxxpKbow.png)
*å›¾ï¼šæˆªå›¾å±•ç¤ºäº†è°ƒè¯•å™¨è§†å›¾å’Œæ ‡å¿—è®¾ç½®çš„ä¿®æ”¹ã€‚*

è¿™äº›æ­¥éª¤å…±åŒç¡®ä¿äº†åº”ç”¨ç¨‹åºå¯ä»¥è¢«è°ƒè¯•ï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨è°ƒè¯•å™¨ç»•è¿‡æŸäº›å®‰å…¨æ£€æŸ¥ï¼Œä¾¿äºæ›´æ·±å…¥åœ°åˆ†ææˆ–ä¿®æ”¹åº”ç”¨ç¨‹åºçš„è¡Œä¸ºã€‚

æ­¥éª¤2æ¶‰åŠå°†æ ‡å¿—å€¼æ›´æ”¹ä¸º814267972ï¼Œå…¶äºŒè¿›åˆ¶è¡¨ç¤ºä¸º110000101101000000100010100ã€‚

## **åˆ©ç”¨æ¼æ´**

ä½¿ç”¨ä¸€ä¸ªåŒ…å«æŒ‰é’®å’Œæ–‡æœ¬è§†å›¾çš„æ˜“å—æ”»å‡»çš„åº”ç”¨ç¨‹åºè¿›è¡Œäº†æ¼”ç¤ºã€‚æœ€åˆï¼Œåº”ç”¨ç¨‹åºæ˜¾ç¤ºâ€œCrack Meâ€ã€‚ç›®æ ‡æ˜¯åœ¨è¿è¡Œæ—¶å°†æ¶ˆæ¯ä»â€œTry Againâ€æ›´æ”¹ä¸ºâ€œHackedâ€ï¼Œè€Œä¸ä¿®æ”¹æºä»£ç ã€‚

### **æ£€æŸ¥æ¼æ´**
- ä½¿ç”¨`apktool`åç¼–è¯‘åº”ç”¨ç¨‹åºä»¥è®¿é—®`AndroidManifest.xml`æ–‡ä»¶ã€‚
- `AndroidManifest.xml`ä¸­å­˜åœ¨`android_debuggable="true"`è¡¨æ˜åº”ç”¨ç¨‹åºæ˜¯å¯è°ƒè¯•çš„ï¼Œå¹¶ä¸”å®¹æ˜“å—åˆ°æ”»å‡»ã€‚
- å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œ`apktool`ä»…ç”¨äºæ£€æŸ¥å¯è°ƒè¯•çŠ¶æ€ï¼Œè€Œä¸æ›´æ”¹ä»»ä½•ä»£ç ã€‚

### **å‡†å¤‡è®¾ç½®**
- è¿‡ç¨‹åŒ…æ‹¬å¯åŠ¨æ¨¡æ‹Ÿå™¨ï¼Œå®‰è£…æ˜“å—æ”»å‡»çš„åº”ç”¨ç¨‹åºï¼Œå¹¶ä½¿ç”¨`adb jdwp`è¯†åˆ«æ­£åœ¨ç›‘å¬çš„Dalvik VMç«¯å£ã€‚
- JDWPï¼ˆJava Debug Wire Protocolï¼‰å…è®¸é€šè¿‡æš´éœ²å”¯ä¸€ç«¯å£æ¥è°ƒè¯•åœ¨VMä¸­è¿è¡Œçš„åº”ç”¨ç¨‹åºã€‚
- è¿œç¨‹è°ƒè¯•éœ€è¦ç«¯å£è½¬å‘ï¼Œç„¶åå°†JDBé™„åŠ åˆ°ç›®æ ‡åº”ç”¨ç¨‹åºã€‚

### **åœ¨è¿è¡Œæ—¶æ³¨å…¥ä»£ç **
- é€šè¿‡è®¾ç½®æ–­ç‚¹å’Œæ§åˆ¶åº”ç”¨ç¨‹åºæµç¨‹è¿›è¡Œäº†åˆ©ç”¨ã€‚
- ä½¿ç”¨`classes`å’Œ`methods <class_name>`å‘½ä»¤æ¥æ­ç¤ºåº”ç”¨ç¨‹åºçš„ç»“æ„ã€‚
- åœ¨`onClick`æ–¹æ³•å¤„è®¾ç½®äº†ä¸€ä¸ªæ–­ç‚¹ï¼Œå¹¶æ§åˆ¶äº†å…¶æ‰§è¡Œã€‚
- ä½¿ç”¨`locals`ã€`next`å’Œ`set`å‘½ä»¤æ¥æ£€æŸ¥å’Œä¿®æ”¹å±€éƒ¨å˜é‡ï¼Œç‰¹åˆ«æ˜¯å°†â€œTry Againâ€æ¶ˆæ¯æ›´æ”¹ä¸ºâ€œHackedâ€ã€‚
- ä½¿ç”¨`run`å‘½ä»¤æ‰§è¡Œä¿®æ”¹åçš„ä»£ç ï¼ŒæˆåŠŸåœ°å®æ—¶æ›´æ”¹äº†åº”ç”¨ç¨‹åºçš„è¾“å‡ºã€‚

è¿™ä¸ªä¾‹å­å±•ç¤ºäº†å¦‚ä½•æ“çºµå¯è°ƒè¯•åº”ç”¨ç¨‹åºçš„è¡Œä¸ºï¼Œçªå‡ºäº†æ›´å¤æ‚çš„åˆ©ç”¨å¯èƒ½æ€§ï¼Œå¦‚åœ¨åº”ç”¨ç¨‹åºçš„ä¸Šä¸‹æ–‡ä¸­è·å¾—è®¾å¤‡çš„shellè®¿é—®æƒé™ã€‚



# å‚è€ƒèµ„æ–™
* [https://medium.com/@shubhamsonani/hacking-with-precision-bypass-techniques-via-debugger-in-android-apps-27fd562b2cc0](https://medium.com/@shubhamsonani/hacking-with-precision-bypass-techniques-via-debugger-in-android-apps-27fd562b2cc0)
* [https://resources.infosecinstitute.com/android-hacking-security-part-6-exploiting-debuggable-android-applications](https://resources.infosecinstitute.com/android-hacking-security-part-6-exploiting-debuggable-android-applications)

<details>

<summary><strong>ä»é›¶å¼€å§‹å­¦ä¹ AWSé»‘å®¢æŠ€æœ¯ï¼Œæˆä¸ºè‹±é›„</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>ï¼</strong></summary>

æ”¯æŒHackTricksçš„å…¶ä»–æ–¹å¼ï¼š

* å¦‚æœæ‚¨æƒ³åœ¨**HackTricksä¸­çœ‹åˆ°æ‚¨çš„å…¬å¸å¹¿å‘Š**æˆ–**ä¸‹è½½HackTricksçš„PDF**ï¼Œè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼
* è·å–[**å®˜æ–¹PEASS & HackTrickså•†å“**](https://peass.creator-spring.com)
* å‘ç°[**PEASSå®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬ç‹¬å®¶çš„[**NFTsç³»åˆ—**](https://opensea.io/collection/the-peass-family)
* **åŠ å…¥** ğŸ’¬ [**Discordç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**telegramç¾¤ç»„**](https://t.me/peass) æˆ–åœ¨ **Twitter** ğŸ¦ ä¸Š**å…³æ³¨**æˆ‘ [**@carlospolopm**](https://twitter.com/carlospolopm)**ã€‚**
* **é€šè¿‡å‘[**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) githubä»“åº“æäº¤PRæ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚**

</details>
