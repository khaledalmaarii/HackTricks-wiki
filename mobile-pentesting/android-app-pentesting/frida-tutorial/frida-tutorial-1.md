# Frida íŠœí† ë¦¬ì–¼ 1

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong>ì—ì„œ <strong>AWS í•´í‚¹ì„ ì œë¡œë¶€í„° ì „ë¬¸ê°€ê¹Œì§€ ë°°ìš°ì„¸ìš”</strong>!<strong></strong></summary>

HackTricksë¥¼ ì§€ì›í•˜ëŠ” ë‹¤ë¥¸ ë°©ë²•:

* **íšŒì‚¬ë¥¼ HackTricksì—ì„œ ê´‘ê³ í•˜ê±°ë‚˜ HackTricksë¥¼ PDFë¡œ ë‹¤ìš´ë¡œë“œ**í•˜ë ¤ë©´ [**êµ¬ë… ìš”ê¸ˆì œ**](https://github.com/sponsors/carlospolop)ë¥¼ í™•ì¸í•˜ì„¸ìš”!
* [**ê³µì‹ PEASS & HackTricks ìŠ¤ì™œê·¸**](https://peass.creator-spring.com)ë¥¼ êµ¬ë§¤í•˜ì„¸ìš”
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ë¥¼ ë°œê²¬í•˜ì„¸ìš”, ë‹¹ì‚¬ì˜ ë…ì  [**NFTs**](https://opensea.io/collection/the-peass-family) ì»¬ë ‰ì…˜
* **ğŸ’¬ [**ë””ìŠ¤ì½”ë“œ ê·¸ë£¹**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— ê°€ì…í•˜ê±°ë‚˜** íŠ¸ìœ„í„°** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks\_live)ë¥¼ **íŒ”ë¡œìš°**í•˜ì„¸ìš”.
* **HackTricks** ë° **HackTricks Cloud** github ì €ì¥ì†Œì— PRì„ ì œì¶œí•˜ì—¬ **í•´í‚¹ ìš”ë ¹ì„ ê³µìœ **í•˜ì„¸ìš”.

</details>

<figure><img src="../../../.gitbook/assets/i3.png" alt=""><figcaption></figcaption></figure>

**ë²„ê·¸ ë°”ìš´í‹° íŒ**: **í•´ì»¤ë“¤ì— ì˜í•´ ë§Œë“¤ì–´ì§„ í”„ë¦¬ë¯¸ì—„ ë²„ê·¸ ë°”ìš´í‹° í”Œë«í¼**ì¸ **Intigriti**ì— **ê°€ì…**í•˜ì„¸ìš”! ì˜¤ëŠ˜ [**https://go.intigriti.com/hacktricks**](https://go.intigriti.com/hacktricks)ì—ì„œ **$100,000**ê¹Œì§€ì˜ ë°”ìš´í‹°ë¥¼ ë°›ìœ¼ì„¸ìš”!

{% embed url="https://go.intigriti.com/hacktricks" %}

**ì´ ê²Œì‹œë¬¼ ìš”ì•½**: [https://medium.com/infosec-adventures/introduction-to-frida-5a3f51595ca1](https://medium.com/infosec-adventures/introduction-to-frida-5a3f51595ca1)\
**APK**: [https://github.com/t0thkr1s/frida-demo/releases](https://github.com/t0thkr1s/frida-demo/releases)\
**ì†ŒìŠ¤ ì½”ë“œ**: [https://github.com/t0thkr1s/frida-demo](https://github.com/t0thkr1s/frida-demo)

## Python

Fridaë¥¼ ì‚¬ìš©í•˜ë©´ ì‹¤í–‰ ì¤‘ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ í•¨ìˆ˜ì— **JavaScript ì½”ë“œë¥¼ ì‚½ì…**í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ **python**ì„ ì‚¬ìš©í•˜ì—¬ **í›…ì„ í˜¸ì¶œ**í•˜ê³  ì‹¬ì§€ì–´ **í›…ê³¼ ìƒí˜¸ ì‘ìš©**í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.

ì´ê²ƒì€ ì´ íŠœí† ë¦¬ì–¼ì—ì„œ ì œì•ˆëœ ëª¨ë“  ì˜ˆì œì™€ í•¨ê»˜ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ê°„ë‹¨í•œ python ìŠ¤í¬ë¦½íŠ¸ì…ë‹ˆë‹¤:
```python
#hooking.py
import frida, sys

with open(sys.argv[1], 'r') as f:
jscode = f.read()
process = frida.get_usb_device().attach('infosecadventures.fridademo')
script = process.create_script(jscode)
print('[ * ] Running Frida Demo application')
script.load()
sys.stdin.read()
```
ìŠ¤í¬ë¦½íŠ¸ë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤:
```bash
python hooking.py <hookN.js>
```
íŒŒì´ì¬ì„ fridaì™€ í•¨ê»˜ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì„ ì•Œì•„ë‘ëŠ” ê²ƒì´ ìœ ìš©í•˜ì§€ë§Œ ì´ ì˜ˆì œì—ì„œëŠ” ëª…ë ¹ì¤„ frida ë„êµ¬ë¥¼ ì§ì ‘ í˜¸ì¶œí•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤:
```bash
frida -U --no-pause -l hookN.js -f infosecadventures.fridademo
```
## í›„í¬ 1 - ë¶€ìš¸ ìš°íšŒ

ì—¬ê¸°ì„œëŠ” _infosecadventures.fridademo.utils.PinUtil_ í´ë˜ìŠ¤ì˜ **ë¶€ìš¸** ë©”ì†Œë“œ(_checkPin_)ë¥¼ **í›„í¬**í•˜ëŠ” ë°©ë²•ì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
```javascript
//hook1.js
Java.perform(function() {
console.log("[ * ] Starting implementation override...")
var MainActivity = Java.use("infosecadventures.fridademo.utils.PinUtil");
MainActivity.checkPin.implementation = function(pin){
console.log("[ + ] PIN check successfully bypassed!")
return true;
}
});
```

```
python hooking.py hook1.js
```
Mirar: í•¨ìˆ˜ëŠ” ë¬¸ìì—´ì„ ë§¤ê°œë³€ìˆ˜ë¡œ ë°›ìœ¼ë©°, ì˜¤ë²„ë¡œë“œí•  í•„ìš”ê°€ ì—†ìŠµë‹ˆê¹Œ?

## í›„í¬ 2 - í•¨ìˆ˜ ë¬´ì°¨ë³„ ëŒ€ì…

### ì •ì ì´ ì•„ë‹Œ í•¨ìˆ˜

í´ë˜ìŠ¤ì˜ ì •ì ì´ ì•„ë‹Œ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë ¤ë©´ **ë¨¼ì € í•´ë‹¹ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤**ê°€ í•„ìš”í•©ë‹ˆë‹¤. ê·¸ëŸ° ë‹¤ìŒ í•´ë‹¹ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\
ì´ë¥¼ ìœ„í•´ **ê¸°ì¡´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì°¾ì•„** ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:
```javascript
Java.perform(function() {
console.log("[ * ] Starting PIN Brute-force, please wait...");
Java.choose("infosecadventures.fridademo.utils.PinUtil", {
onMatch: function(instance) {
console.log("[ * ] Instance found in memory: " + instance);
for(var i = 1000; i < 9999; i++){
if(instance.checkPin(i + "") == true){
console.log("[ + ] Found correct PIN: " + i);
break;
}
}
},
onComplete: function() { }
});
});
```
ì´ ê²½ìš°ì—ëŠ” ì¸ìŠ¤í„´ìŠ¤ê°€ ì—†ê¸° ë•Œë¬¸ì— ì‘ë™í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

### ì •ì  í•¨ìˆ˜

í•¨ìˆ˜ê°€ ì •ì ì¸ ê²½ìš°, ê·¸ëƒ¥ í˜¸ì¶œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:
```javascript
//hook2.js
Java.perform(function () {
console.log("[ * ] Starting PIN Brute-force, please wait...")
var PinUtil = Java.use("infosecadventures.fridademo.utils.PinUtil");

for(var i=1000; i < 9999; i++)
{
if(PinUtil.checkPin(i+"") == true){
console.log("[ + ] Found correct PIN: " + i);
}
}
});
```
## í›„í¬ 3 - ì¸ìˆ˜ ë° ë°˜í™˜ ê°’ ê²€ìƒ‰

í•¨ìˆ˜ë¥¼ í›„í‚¹í•˜ì—¬ **ì „ë‹¬ëœ ì¸ìˆ˜**ì˜ ê°’ì„ **ì¶œë ¥**í•˜ê³  **ë°˜í™˜ ê°’**ì˜ ê°’ì„ ì¶œë ¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:
```javascript
//hook3.js
Java.perform(function() {
console.log("[ * ] Starting implementation override...")

var EncryptionUtil = Java.use("infosecadventures.fridademo.utils.EncryptionUtil");
EncryptionUtil.encrypt.implementation = function(key, value){
console.log("Key: " + key);
console.log("Value: " + value);
var encrypted_ret = this.encrypt(key, value); //Call the original function
console.log("Encrypted value: " + encrypted_ret);
return encrypted_ret;
}
});
```
## ì¤‘ìš”

ì´ íŠœí† ë¦¬ì–¼ì—ì„œëŠ” ë©”ì†Œë“œ ì´ë¦„ê³¼ _.implementation_ì„ ì‚¬ìš©í•˜ì—¬ ë©”ì†Œë“œë¥¼ í›„í‚¹í–ˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ **ë™ì¼í•œ ì´ë¦„ì˜ ë©”ì†Œë“œê°€ ì—¬ëŸ¬ ê°œ**ì¸ ê²½ìš°, í›„í‚¹í•˜ë ¤ëŠ” ë©”ì†Œë“œë¥¼ **ì§€ì •í•´ì•¼** í•˜ë©° **ì¸ìˆ˜ì˜ ìœ í˜•ì„ ë‚˜íƒ€ë‚´ì•¼** í•©ë‹ˆë‹¤.

ë‹¤ìŒ íŠœí† ë¦¬ì–¼ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<figure><img src="../../../.gitbook/assets/i3.png" alt=""><figcaption></figcaption></figure>

**ë²„ê·¸ ë°”ìš´í‹° íŒ**: **Intigriti**ì— ê°€ì…í•˜ì—¬ í•´ì»¤ë“¤ì´ ë§Œë“  í”„ë¦¬ë¯¸ì—„ **ë²„ê·¸ ë°”ìš´í‹° í”Œë«í¼**ì— ì°¸ì—¬í•˜ì„¸ìš”! [**https://go.intigriti.com/hacktricks**](https://go.intigriti.com/hacktricks)ì—ì„œ ì˜¤ëŠ˜ë¶€í„° ìµœëŒ€ **$100,000**ì˜ ë°”ìš´í‹°ë¥¼ ë°›ì•„ë³´ì„¸ìš”!

{% embed url="https://go.intigriti.com/hacktricks" %}

<details>

<summary><strong>ì œë¡œë¶€í„° íˆì–´ë¡œê°€ ë˜ê¸°ê¹Œì§€ AWS í•´í‚¹ ë°°ìš°ê¸°</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

HackTricksë¥¼ ì§€ì›í•˜ëŠ” ë‹¤ë¥¸ ë°©ë²•:

* **íšŒì‚¬ë¥¼ HackTricksì—ì„œ ê´‘ê³ í•˜ê±°ë‚˜ HackTricksë¥¼ PDFë¡œ ë‹¤ìš´ë¡œë“œ**í•˜ë ¤ë©´ [**êµ¬ë… ìš”ê¸ˆì œ**](https://github.com/sponsors/carlospolop)ë¥¼ í™•ì¸í•˜ì„¸ìš”!
* [**ê³µì‹ PEASS & HackTricks ìŠ¤ì™œê·¸**](https://peass.creator-spring.com)ë¥¼ êµ¬ë§¤í•˜ì„¸ìš”
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ë¥¼ ë°œê²¬í•˜ì„¸ìš”, ë‹¹ì‚¬ì˜ ë…ì  [**NFTs**](https://opensea.io/collection/the-peass-family) ì»¬ë ‰ì…˜
* ğŸ’¬ [**ë””ìŠ¤ì½”ë“œ ê·¸ë£¹**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— **ê°€ì…**í•˜ê±°ë‚˜ **íŠ¸ìœ„í„°** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks\_live)**ë¥¼ íŒ”ë¡œìš°**í•˜ì„¸ìš”.
* **HackTricks** ë° **HackTricks Cloud** github ì €ì¥ì†Œì— PRì„ ì œì¶œí•˜ì—¬ **í•´í‚¹ íŠ¸ë¦­ì„ ê³µìœ **í•˜ì„¸ìš”.

</details>
