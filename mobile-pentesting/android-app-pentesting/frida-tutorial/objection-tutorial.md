# Objection Tutorial

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

<img src="../../../.gitbook/assets/i3.png" alt="" data-size="original">

**Bug bounty tip**: **sign up** for **Intigriti**, a premium **bug bounty platform created by hackers, for hackers**! Join us at [**https://go.intigriti.com/hacktricks**](https://go.intigriti.com/hacktricks) today, and start earning bounties up to **$100,000**!

{% embed url="https://go.intigriti.com/hacktricks" %}

## **Introduction**

**objection - Runtime Mobile Exploration**

[**Objection**](https://github.com/sensepost/objection)ëŠ” [Frida](https://www.frida.re)ë¡œ êµ¬ë™ë˜ëŠ” ëŸ°íƒ€ì„ ëª¨ë°”ì¼ íƒìƒ‰ íˆ´í‚·ì…ë‹ˆë‹¤. ì´ëŠ” íƒˆì˜¥ë˜ê±°ë‚˜ ë£¨íŒ…ëœ ëª¨ë°”ì¼ ì¥ì¹˜ ì—†ì´ ëª¨ë°”ì¼ ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ ê·¸ ë³´ì•ˆ ìƒíƒœë¥¼ í‰ê°€í•˜ëŠ” ë° ë„ì›€ì„ ì£¼ê¸° ìœ„í•´ ë§Œë“¤ì–´ì¡ŒìŠµë‹ˆë‹¤.

**Note:** ì´ê²ƒì€ ì–´ë–¤ í˜•íƒœì˜ íƒˆì˜¥ / ë£¨íŠ¸ ìš°íšŒê°€ ì•„ë‹™ë‹ˆë‹¤. `objection`ì„ ì‚¬ìš©í•¨ìœ¼ë¡œì¨, ì‚¬ìš©ìëŠ” ì§ë©´í•œ ìƒŒë“œë°•ìŠ¤ì— ì˜í•´ ë¶€ê³¼ëœ ëª¨ë“  ì œí•œì— ì—¬ì „íˆ ì œí•œë©ë‹ˆë‹¤.

### Resume

**objection**ì˜ **ëª©í‘œ**ëŠ” ì‚¬ìš©ìê°€ **Fridaê°€ ì œê³µí•˜ëŠ” ì£¼ìš” ì‘ì—…ì„ í˜¸ì¶œ**í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. **ê·¸ë ‡ì§€ ì•Šìœ¼ë©´**, ì‚¬ìš©ìëŠ” í…ŒìŠ¤íŠ¸í•˜ë ¤ëŠ” **ëª¨ë“  ì• í”Œë¦¬ì¼€ì´ì…˜ì— ëŒ€í•´ ë‹¨ì¼ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ìƒì„±í•´ì•¼** í•©ë‹ˆë‹¤.

## Tutorial

ì´ íŠœí† ë¦¬ì–¼ì—ì„œëŠ” ì—¬ê¸°ì—ì„œ ë‹¤ìš´ë¡œë“œí•  ìˆ˜ ìˆëŠ” APKë¥¼ ì‚¬ìš©í•  ê²ƒì…ë‹ˆë‹¤:

{% file src="../../../.gitbook/assets/app-release.zip" %}

ë˜ëŠ” [ì›ë³¸ ì €ì¥ì†Œ](https://github.com/asvid/FridaApp)ì—ì„œ (app-release.apk ë‹¤ìš´ë¡œë“œ)

### Installation
```bash
pip3 install objection
```
### Connection

**ì •ìƒ ADB ì—°ê²°**ì„ ë§Œë“¤ê³  **ì¥ì¹˜ì—ì„œ** **frida** ì„œë²„ë¥¼ **ì‹œì‘**í•©ë‹ˆë‹¤ (ê·¸ë¦¬ê³  í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ ëª¨ë‘ì—ì„œ fridaê°€ ì‘ë™í•˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤).

**ë£¨íŒ…ëœ ì¥ì¹˜**ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°, _**--gadget**_ ì˜µì…˜ ë‚´ì—ì„œ í…ŒìŠ¤íŠ¸í•  ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì„ íƒí•´ì•¼ í•©ë‹ˆë‹¤. ì´ ê²½ìš°:
```bash
frida-ps -Uai
objection --gadget asvid.github.io.fridaapp explore
```
### Basic Actions

ì´ íŠœí† ë¦¬ì–¼ì—ì„œëŠ” ìœ ìš©í•˜ë‹¤ê³  ìƒê°ë˜ëŠ” ëª…ë ¹ì–´ë§Œ ë‚˜ì—´í•  ê²ƒì´ë©°, objectionsì˜ ëª¨ë“  ê°€ëŠ¥í•œ ëª…ë ¹ì–´ëŠ” ë‚˜ì—´ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

#### Environment

í™˜ê²½ ë‚´ì—ì„œ í¥ë¯¸ë¡œìš´ ì •ë³´(ì˜ˆ: ë¹„ë°€ë²ˆí˜¸ ë˜ëŠ” ê²½ë¡œ)ë¥¼ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
```bash
env
```
![](<../../../.gitbook/assets/image (220).png>)

#### í”„ë¦¬ë‹¤ ì •ë³´
```bash
frida
```
![](<../../../.gitbook/assets/image (1093).png>)

#### ì—…ë¡œë“œ/ë‹¤ìš´ë¡œë“œ
```bash
file download <remote path> [<local path>]
file upload <local path> [<remote path>]
```
#### frida ìŠ¤í¬ë¦½íŠ¸ ê°€ì ¸ì˜¤ê¸°
```bash
import <local path frida-script>
```
#### SSLPinning
```bash
android sslpinning disable #Attempts to disable SSL Pinning on Android devices.
```
#### ë£¨íŠ¸ íƒì§€
```bash
android root disable  #Attempts to disable root detection on Android devices.
android root simulate #Attempts to simulate a rooted Android environment.
```
#### Exec Command
```bash
android shell_exec whoami
```
#### ìŠ¤í¬ë¦°ìƒ·
```bash
android ui screenshot /tmp/screenshot
android ui FLAG_SECURE false  #This may enable you to take screenshots using the hardware keys
```
### ì •ì  ë¶„ì„ì„ ë™ì ìœ¼ë¡œ ë§Œë“¤ê¸°

ì‹¤ì œ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œëŠ” **ì •ì  ë¶„ì„** ë•ë¶„ì— objectionì„ ì‚¬ìš©í•˜ê¸° ì „ì— ì´ ë¶€ë¶„ì—ì„œ ë°œê²¬ëœ ëª¨ë“  ì •ë³´ë¥¼ ì•Œì•„ì•¼ í•©ë‹ˆë‹¤. ì–´ì¨Œë“ , ì´ ë°©ë²•ì„ í†µí•´ **ìƒˆë¡œìš´ ê²ƒ**ì„ ë³¼ ìˆ˜ ìˆì„ì§€ë„ ëª¨ë¦…ë‹ˆë‹¤. ì—¬ê¸°ì—ì„œëŠ” í´ë˜ìŠ¤, ë©”ì„œë“œ ë° ë‚´ë³´ë‚¸ ê°ì²´ì˜ ì „ì²´ ëª©ë¡ë§Œ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì´ê²ƒì€ ì–´ë–¤ ë°©ë²•ìœ¼ë¡œë“  ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ **ì½ì„ ìˆ˜ ìˆëŠ” ì†ŒìŠ¤ ì½”ë“œ**ë¥¼ ì–»ì„ ìˆ˜ ì—†ëŠ” ê²½ìš°ì—ë„ ìœ ìš©í•©ë‹ˆë‹¤.

#### í™œë™, ìˆ˜ì‹ ê¸° ë° ì„œë¹„ìŠ¤ ëª©ë¡
```bash
android hooking list activities
```
![](<../../../.gitbook/assets/image (1016).png>)
```bash
android hooking list services
android hooking list receivers
```
Fridaë¥¼ ì°¾ì„ ìˆ˜ ì—†ìœ¼ë©´ ì˜¤ë¥˜ê°€ ë°œìƒí•©ë‹ˆë‹¤.

#### í˜„ì¬ í™œë™ ê°€ì ¸ì˜¤ê¸°
```bash
android hooking get current_activity
```
![](<../../../.gitbook/assets/image (813).png>)

#### í´ë˜ìŠ¤ ê²€ìƒ‰

ì• í”Œë¦¬ì¼€ì´ì…˜ ë‚´ì—ì„œ í´ë˜ìŠ¤ë¥¼ ì°¾ì•„ë³´ê² ìŠµë‹ˆë‹¤.
```bash
android hooking search classes asvid.github.io.fridaapp
```
![](<../../../.gitbook/assets/image (507).png>)

#### í´ë˜ìŠ¤ì˜ ë©”ì„œë“œ ê²€ìƒ‰

ì´ì œ _MainActivity:_ í´ë˜ìŠ¤ ë‚´ë¶€ì˜ ë©”ì„œë“œë¥¼ ì¶”ì¶œí•´ ë³´ê² ìŠµë‹ˆë‹¤.
```bash
android hooking search methods asvid.github.io.fridaapp MainActivity
```
![](<../../../.gitbook/assets/image (929).png>)

#### í´ë˜ìŠ¤ì˜ ì„ ì–¸ëœ ë©”ì†Œë“œì™€ ê·¸ ë§¤ê°œë³€ìˆ˜ ëª©ë¡

í´ë˜ìŠ¤ì˜ ë©”ì†Œë“œê°€ ì–´ë–¤ ë§¤ê°œë³€ìˆ˜ë¥¼ í•„ìš”ë¡œ í•˜ëŠ”ì§€ ì•Œì•„ë´…ì‹œë‹¤:
```bash
android hooking list class_methods asvid.github.io.fridaapp.MainActivity
```
![](<../../../.gitbook/assets/image (299).png>)

#### í´ë˜ìŠ¤ ëª©ë¡

í˜„ì¬ ì• í”Œë¦¬ì¼€ì´ì…˜ ë‚´ì—ì„œ ë¡œë“œëœ ëª¨ë“  í´ë˜ìŠ¤ë¥¼ ë‚˜ì—´í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤:
```bash
android hooking list classes #List all loaded classes, As the target application gets usedmore, this command will return more classes.
```
ì´ê²ƒì€ **í´ë˜ìŠ¤ì˜ ë©”ì„œë“œë¥¼ í›„í‚¹í•˜ê³  í´ë˜ìŠ¤ì˜ ì´ë¦„ë§Œ ì•Œê³  ìˆì„ ë•Œ** ë§¤ìš° ìœ ìš©í•©ë‹ˆë‹¤. ì´ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ **í´ë˜ìŠ¤ë¥¼ ì†Œìœ í•œ ëª¨ë“ˆì„ ê²€ìƒ‰**í•œ ë‹¤ìŒ ë©”ì„œë“œë¥¼ í›„í‚¹í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### í›„í‚¹ì´ ì‰¬ì›€

#### ë©”ì„œë“œ í›„í‚¹(ê°ì‹œ)

ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ [ì†ŒìŠ¤ ì½”ë“œ](https://github.com/asvid/FridaApp/blob/master/app/src/main/java/asvid/github/io/fridaapp/MainActivity.kt)ì—ì„œ **MainActivity**ì˜ **í•¨ìˆ˜** _**sum()**_ ì´ **ë§¤ì´ˆ** ì‹¤í–‰ëœë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•¨ìˆ˜ê°€ í˜¸ì¶œë  ë•Œë§ˆë‹¤ **ëª¨ë“  ê°€ëŠ¥í•œ ì •ë³´**(ì¸ìˆ˜, ë°˜í™˜ ê°’ ë° ë°±íŠ¸ë ˆì´ìŠ¤)ë¥¼ **ë¤í”„**í•´ ë³´ê² ìŠµë‹ˆë‹¤:
```bash
android hooking watch class_method asvid.github.io.fridaapp.MainActivity.sum --dump-args --dump-backtrace --dump-return
```
![](<../../../.gitbook/assets/image (1086).png>)

#### ì „ì²´ í´ë˜ìŠ¤ í›„í‚¹(ê°ì‹œ)

ì‚¬ì‹¤ MainActivity í´ë˜ìŠ¤ì˜ ëª¨ë“  ë©”ì†Œë“œê°€ ì •ë§ í¥ë¯¸ë¡­ìŠµë‹ˆë‹¤. **ëª¨ë‘ í›„í‚¹**í•´ë´…ì‹œë‹¤. ì¡°ì‹¬í•˜ì„¸ìš”, ì´ë¡œ ì¸í•´ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ **ì¶©ëŒ**í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
```bash
android hooking watch class asvid.github.io.fridaapp.MainActivity --dump-args --dump-return
```
If you play with the application while the class is hooked you will see when **ê° í•¨ìˆ˜ê°€ í˜¸ì¶œë˜ëŠ”ì§€**, its **ì¸ìˆ˜** and the **ë°˜í™˜** value.

![](<../../../.gitbook/assets/image (861).png>)

#### í•¨ìˆ˜ì˜ ë¶ˆë¦¬ì–¸ ë°˜í™˜ ê°’ ë³€ê²½

From the source code you can see that the function _checkPin_ gets a _String_ as argument and returns a _boolean_. Lets make the function **í•­ìƒ trueë¥¼ ë°˜í™˜í•˜ê²Œ**:

![](<../../../.gitbook/assets/image (883).png>)

Now, If you write anything in the text box for the PIN code you will see tat anything is valid:

![](<../../../.gitbook/assets/image (228).png>)

### í´ë˜ìŠ¤ ì¸ìŠ¤í„´ìŠ¤

Search for and print **íŠ¹ì • Java í´ë˜ìŠ¤ì˜ ì‹¤ì‹œê°„ ì¸ìŠ¤í„´ìŠ¤**, specified by a fully qualified class name. Out is the result of an attempt at getting a string value for a discovered objection which would typically **ê°ì²´ì˜ ì†ì„± ê°’ì„ í¬í•¨í• **.
```
android heap print_instances <class>
```
![](<../../../.gitbook/assets/image (1095).png>)

### Keystore/Intents

í‚¤ìŠ¤í† ì–´ì™€ ì¸í…íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ì‹¤í—˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:
```bash
android keystore list
android intents launch_activity
android intent launch_service
```
### ë©”ëª¨ë¦¬

#### ë¤í”„
```bash
memory dump all <local destination> #Dump all memory
memory dump from_base <base_address> <size_to_dump> <local_destination> #Dump a part
```
#### ëª©ë¡
```bash
memory list modules
```
![](<../../../.gitbook/assets/image (286).png>)

ëª©ë¡ì˜ ë§¨ ì•„ë˜ì—ì„œ fridaë¥¼ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤:

![](<../../../.gitbook/assets/image (1097).png>)

fridaê°€ ë¬´ì—‡ì„ ë‚´ë³´ë‚´ëŠ”ì§€ í™•ì¸í•´ ë´…ì‹œë‹¤:

![](<../../../.gitbook/assets/image (298).png>)

#### ê²€ìƒ‰/ì“°ê¸°

objectionì„ ì‚¬ìš©í•˜ì—¬ ë©”ëª¨ë¦¬ ë‚´ì—ì„œ ê²€ìƒ‰í•˜ê³  ì“¸ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤:
```bash
memory search "<pattern eg: 41 41 41 ?? 41>" (--string) (--offsets-only)
memory write "<address>" "<pattern eg: 41 41 41 41>" (--string)
```
### SQLite

`sqlite` ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ sqlite ë°ì´í„°ë² ì´ìŠ¤ì™€ ìƒí˜¸ì‘ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### Exit
```bash
exit
```
## Objectionì—ì„œ ë‚´ê°€ ë†“ì¹˜ëŠ” ê²ƒ

* í›„í‚¹ ë©”ì„œë“œê°€ ê°€ë” ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì¶©ëŒì‹œí‚µë‹ˆë‹¤ (ì´ëŠ” Frida ë•Œë¬¸ì´ê¸°ë„ í•©ë‹ˆë‹¤).
* í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ì¸ìŠ¤í„´ìŠ¤ì˜ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  í´ë˜ìŠ¤ì˜ ìƒˆ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ê³  ì´ë¥¼ ì‚¬ìš©í•˜ì—¬ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
* ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì‚¬ìš©ë˜ëŠ” ì¼ë°˜ì ì¸ ì•”í˜¸í™” ë©”ì„œë“œë¥¼ í›„í‚¹í•˜ì—¬ ì•”í˜¸í™”ëœ í…ìŠ¤íŠ¸, í‰ë¬¸, í‚¤, IV ë° ì‚¬ìš©ëœ ì•Œê³ ë¦¬ì¦˜ì„ ë³¼ ìˆ˜ ìˆëŠ” ë‹¨ì¶•í‚¤(sslpinningê³¼ ê°™ì€)ê°€ ì—†ìŠµë‹ˆë‹¤.

<img src="../../../.gitbook/assets/i3.png" alt="" data-size="original">

**ë²„ê·¸ ë°”ìš´í‹° íŒ**: **í•´ì»¤ë¥¼ ìœ„í•´ í•´ì»¤ê°€ ë§Œë“  í”„ë¦¬ë¯¸ì—„** **ë²„ê·¸ ë°”ìš´í‹° í”Œë«í¼ì¸** **Intigriti**ì— **ê°€ì…í•˜ì„¸ìš”**! ì˜¤ëŠ˜ [**https://go.intigriti.com/hacktricks**](https://go.intigriti.com/hacktricks)ì—ì„œ ì €í¬ì™€ í•¨ê»˜í•˜ê³  ìµœëŒ€ **$100,000**ì˜ ë³´ìƒì„ ë°›ê¸° ì‹œì‘í•˜ì„¸ìš”!

{% embed url="https://go.intigriti.com/hacktricks" %}

{% hint style="success" %}
AWS í•´í‚¹ ë°°ìš°ê¸° ë° ì—°ìŠµí•˜ê¸°:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
GCP í•´í‚¹ ë°°ìš°ê¸° ë° ì—°ìŠµí•˜ê¸°: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks ì§€ì›í•˜ê¸°</summary>

* [**êµ¬ë… ê³„íš**](https://github.com/sponsors/carlospolop) í™•ì¸í•˜ê¸°!
* ğŸ’¬ [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— **ê°€ì…í•˜ê±°ë‚˜** **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**ë¥¼** **íŒ”ë¡œìš°í•˜ì„¸ìš”.**
* [**HackTricks**](https://github.com/carlospolop/hacktricks) ë° [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) ê¹ƒí—ˆë¸Œ ë¦¬í¬ì§€í† ë¦¬ì— PRì„ ì œì¶œí•˜ì—¬ í•´í‚¹ íŠ¸ë¦­ì„ ê³µìœ í•˜ì„¸ìš”.

</details>
{% endhint %}
