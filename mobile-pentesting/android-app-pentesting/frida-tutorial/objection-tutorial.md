# Objection Tutorial

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

<img src="../../../.gitbook/assets/i3.png" alt="" data-size="original">

**Bug bounty tip**: **Intigriti** iÃ§in **kayÄ±t olun**, **hackers tarafÄ±ndan, hackers iÃ§in oluÅŸturulmuÅŸ premium bir bug bounty platformu**! BugÃ¼n [**https://go.intigriti.com/hacktricks**](https://go.intigriti.com/hacktricks) adresine katÄ±lÄ±n ve **$100,000**'a kadar Ã¶dÃ¼ller kazanmaya baÅŸlayÄ±n!

{% embed url="https://go.intigriti.com/hacktricks" %}

## **Introduction**

**objection - Runtime Mobile Exploration**

[**Objection**](https://github.com/sensepost/objection), [Frida](https://www.frida.re) tarafÄ±ndan desteklenen bir runtime mobil keÅŸif aracÄ±dÄ±r. Jailbroken veya rooted bir mobil cihaza ihtiyaÃ§ duymadan mobil uygulamalarÄ± ve gÃ¼venlik durumlarÄ±nÄ± deÄŸerlendirmeye yardÄ±mcÄ± olmak amacÄ±yla oluÅŸturulmuÅŸtur.

**Not:** Bu, bir tÃ¼r jailbreak / root bypass deÄŸildir. `objection` kullanarak, karÅŸÄ±laÅŸtÄ±ÄŸÄ±nÄ±z geÃ§erli sandbox tarafÄ±ndan dayatÄ±lan tÃ¼m kÄ±sÄ±tlamalarla sÄ±nÄ±rlÄ± kalmaya devam edersiniz.

### Resume

**objection**'Ä±n **amacÄ±**, kullanÄ±cÄ±nÄ±n **Frida'nÄ±n sunduÄŸu ana eylemleri Ã§aÄŸÄ±rmasÄ±na** izin vermektir. **Aksi takdirde**, kullanÄ±cÄ± test etmek istediÄŸi **her uygulama iÃ§in tek bir script oluÅŸturmak zorunda kalacaktÄ±r.**

## Tutorial

Bu eÄŸitim iÃ§in burada indirebileceÄŸiniz APK'yÄ± kullanacaÄŸÄ±m:

{% file src="../../../.gitbook/assets/app-release.zip" %}

Ya da [orijinal deposundan](https://github.com/asvid/FridaApp) (app-release.apk'yi indirin)

### Installation
```bash
pip3 install objection
```
### BaÄŸlantÄ±

Bir **normal ADB baÄŸlantÄ±sÄ±** kurun ve cihazda **frida** sunucusunu **baÅŸlatÄ±n** (ve frida'nÄ±n hem istemci hem de sunucuda Ã§alÄ±ÅŸtÄ±ÄŸÄ±nÄ± kontrol edin).

EÄŸer bir **rootlu cihaz** kullanÄ±yorsanÄ±z, test etmek istediÄŸiniz uygulamayÄ± _**--gadget**_ seÃ§eneÄŸi iÃ§inde seÃ§meniz gerekmektedir. bu durumda:
```bash
frida-ps -Uai
objection --gadget asvid.github.io.fridaapp explore
```
### Temel Eylemler

Objection'Ä±n tÃ¼m olasÄ± komutlarÄ± bu eÄŸitimde listelenmeyecek, sadece daha faydalÄ± bulduÄŸum komutlar yer alacak.

#### Ortam

Ortam iÃ§inde bazÄ± ilginÃ§ bilgiler (ÅŸifreler veya yollar gibi) bulunabilir.
```bash
env
```
![](<../../../.gitbook/assets/image (220).png>)

#### Frida Bilgisi
```bash
frida
```
![](<../../../.gitbook/assets/image (1093).png>)

#### YÃ¼kleme/Ä°ndirme
```bash
file download <remote path> [<local path>]
file upload <local path> [<remote path>]
```
#### Frida betiÄŸini iÃ§e aktarÄ±n
```bash
import <local path frida-script>
```
#### SSLPinning
```bash
android sslpinning disable #Attempts to disable SSL Pinning on Android devices.
```
#### Root tespiti
```bash
android root disable  #Attempts to disable root detection on Android devices.
android root simulate #Attempts to simulate a rooted Android environment.
```
#### Exec Komutu
```bash
android shell_exec whoami
```
#### Ekran GÃ¶rÃ¼ntÃ¼leri
```bash
android ui screenshot /tmp/screenshot
android ui FLAG_SECURE false  #This may enable you to take screenshots using the hardware keys
```
### Statik analiz Dinamik hale getirildi

GerÃ§ek bir uygulamada, objection kullanmadan Ã¶nce bu bÃ¶lÃ¼mde keÅŸfedilen tÃ¼m bilgileri **statik analiz** sayesinde bilmemiz gerekir. Yine de, bu ÅŸekilde belki de **yeni bir ÅŸey** gÃ¶rebilirsiniz Ã§Ã¼nkÃ¼ burada yalnÄ±zca sÄ±nÄ±flarÄ±n, yÃ¶ntemlerin ve dÄ±ÅŸa aktarÄ±lan nesnelerin tam bir listesini bulacaksÄ±nÄ±z.

Bu, bir ÅŸekilde uygulamanÄ±n **okunabilir kaynak kodunu elde edemiyorsanÄ±z** da faydalÄ±dÄ±r.

#### Etkinlikleri, alÄ±cÄ±larÄ± ve hizmetleri listele
```bash
android hooking list activities
```
![](<../../../.gitbook/assets/image (1016).png>)
```bash
android hooking list services
android hooking list receivers
```
Frida, hiÃ§biri bulunamazsa bir hata verecektir.

#### Mevcut aktiviteyi alma
```bash
android hooking get current_activity
```
![](<../../../.gitbook/assets/image (813).png>)

#### SÄ±nÄ±flarÄ± Ara

UygulamamÄ±zÄ±n iÃ§indeki sÄ±nÄ±flarÄ± aramaya baÅŸlayalÄ±m.
```bash
android hooking search classes asvid.github.io.fridaapp
```
![](<../../../.gitbook/assets/image (507).png>)

#### Bir sÄ±nÄ±fÄ±n Arama YÃ¶ntemleri

Åimdi _MainActivity:_ sÄ±nÄ±fÄ±ndaki yÃ¶ntemleri Ã§Ä±karalÄ±m:
```bash
android hooking search methods asvid.github.io.fridaapp MainActivity
```
![](<../../../.gitbook/assets/image (929).png>)

#### Bir sÄ±nÄ±fÄ±n tanÄ±mlÄ± YÃ¶ntemlerini ve parametrelerini listele

SÄ±nÄ±fÄ±n yÃ¶ntemlerinin hangi parametrelere ihtiyaÃ§ duyduÄŸunu bulalÄ±m:
```bash
android hooking list class_methods asvid.github.io.fridaapp.MainActivity
```
![](<../../../.gitbook/assets/image (299).png>)

#### SÄ±nÄ±flarÄ± listele

AyrÄ±ca, mevcut uygulama iÃ§inde yÃ¼klenen tÃ¼m sÄ±nÄ±flarÄ± listeleyebilirsiniz:
```bash
android hooking list classes #List all loaded classes, As the target application gets usedmore, this command will return more classes.
```
Bu, **bir sÄ±nÄ±fÄ±n yÃ¶ntemini hooklamak istiyorsanÄ±z ve sadece sÄ±nÄ±fÄ±n adÄ±nÄ± biliyorsanÄ±z** Ã§ok faydalÄ±dÄ±r. Bu fonksiyonu **sÄ±nÄ±fÄ±n hangi modÃ¼le ait olduÄŸunu aramak iÃ§in** kullanabilirsiniz ve ardÄ±ndan yÃ¶ntemini hooklayabilirsiniz.

### HooklamanÄ±n kolay olmasÄ±

#### Bir yÃ¶ntemi hooklamak (izlemek)

UygulamanÄ±n [kaynak kodundan](https://github.com/asvid/FridaApp/blob/master/app/src/main/java/asvid/github/io/fridaapp/MainActivity.kt) bildiÄŸimiz gibi, **MainActivity**'den **sum()** **fonksiyonu** **her saniye** Ã§alÄ±ÅŸtÄ±rÄ±lmaktadÄ±r. Fonksiyon her Ã§aÄŸrÄ±ldÄ±ÄŸÄ±nda **tÃ¼m olasÄ± bilgileri** (argÃ¼manlar, dÃ¶nÃ¼ÅŸ deÄŸeri ve geri izleme) **dÃ¶kme** yapmayÄ± deneyelim:
```bash
android hooking watch class_method asvid.github.io.fridaapp.MainActivity.sum --dump-args --dump-backtrace --dump-return
```
![](<../../../.gitbook/assets/image (1086).png>)

#### Bir sÄ±nÄ±fÄ± tamamen izlemek (hooking)

AslÄ±nda MainActivity sÄ±nÄ±fÄ±nÄ±n tÃ¼m yÃ¶ntemlerini gerÃ§ekten ilginÃ§ buluyorum, hepsini **hooklayalÄ±m**. Dikkatli olun, bu bir uygulamayÄ± **Ã§Ã¶kertebilir**.
```bash
android hooking watch class asvid.github.io.fridaapp.MainActivity --dump-args --dump-return
```
EÄŸer sÄ±nÄ±fÄ±n baÄŸlÄ± olduÄŸu uygulama ile oynarsanÄ±z, **her bir fonksiyonun ne zaman Ã§aÄŸrÄ±ldÄ±ÄŸÄ±nÄ±**, **argÃ¼manlarÄ±nÄ±** ve **dÃ¶nÃ¼ÅŸ** deÄŸerini gÃ¶receksiniz.

![](<../../../.gitbook/assets/image (861).png>)

#### Bir fonksiyonun boolean dÃ¶nÃ¼ÅŸ deÄŸerini deÄŸiÅŸtirme

Kaynak koddan, _checkPin_ fonksiyonunun bir _String_ argÃ¼manÄ± aldÄ±ÄŸÄ±nÄ± ve bir _boolean_ dÃ¶ndÃ¼rdÃ¼ÄŸÃ¼nÃ¼ gÃ¶rebilirsiniz. Fonksiyonu **her zaman true dÃ¶ndÃ¼recek** ÅŸekilde ayarlayalÄ±m:

![](<../../../.gitbook/assets/image (883).png>)

ArtÄ±k, PIN kodu iÃ§in metin kutusuna herhangi bir ÅŸey yazarsanÄ±z, her ÅŸeyin geÃ§erli olduÄŸunu gÃ¶receksiniz:

![](<../../../.gitbook/assets/image (228).png>)

### SÄ±nÄ±f Ã¶rnekleri

Belirli bir Java sÄ±nÄ±fÄ±nÄ±n **canlÄ± Ã¶rneklerini** arayÄ±n ve yazdÄ±rÄ±n; bu, tam nitelikli sÄ±nÄ±f adÄ± ile belirtilmiÅŸtir. Bulunan bir objection iÃ§in bir dize deÄŸeri elde etme giriÅŸiminin sonucu, genellikle **nesne iÃ§in Ã¶zellik deÄŸerlerini** iÃ§erecektir.
```
android heap print_instances <class>
```
![](<../../../.gitbook/assets/image (1095).png>)

### Keystore/Intents

Keystore ve intent'lerle oynayabilirsiniz:
```bash
android keystore list
android intents launch_activity
android intent launch_service
```
### Bellek

#### Dump
```bash
memory dump all <local destination> #Dump all memory
memory dump from_base <base_address> <size_to_dump> <local_destination> #Dump a part
```
#### Liste
```bash
memory list modules
```
![](<../../../.gitbook/assets/image (286).png>)

Listenin en altÄ±nda frida'yÄ± gÃ¶rebilirsiniz:

![](<../../../.gitbook/assets/image (1097).png>)

Frida'nÄ±n neyi dÄ±ÅŸa aktardÄ±ÄŸÄ±nÄ± kontrol edelim:

![](<../../../.gitbook/assets/image (298).png>)

#### Ara/Yaz

Objection ile bellek iÃ§inde arama yapabilir ve yazabilirsiniz:
```bash
memory search "<pattern eg: 41 41 41 ?? 41>" (--string) (--offsets-only)
memory write "<address>" "<pattern eg: 41 41 41 41>" (--string)
```
### SQLite

SQLite veritabanlarÄ±yla etkileÅŸimde bulunmak iÃ§in `sqlite` komutunu kullanabilirsiniz.

### Exit
```bash
exit
```
## Objection'da Ne Eksik

* Hooking yÃ¶ntemleri bazen uygulamayÄ± Ã§Ã¶kertiyor (bu aynÄ± zamanda Frida'dan da kaynaklanÄ±yor).
* SÄ±nÄ±flarÄ±n Ã¶rneklerini kullanarak Ã¶rneÄŸin fonksiyonlarÄ±nÄ± Ã§aÄŸÄ±rmak mÃ¼mkÃ¼n deÄŸil. Ve yeni sÄ±nÄ±f Ã¶rnekleri oluÅŸturup bunlarÄ± fonksiyonlarÄ± Ã§aÄŸÄ±rmak iÃ§in kullanamazsÄ±nÄ±z.
* Uygulama tarafÄ±ndan kullanÄ±lan tÃ¼m yaygÄ±n kripto yÃ¶ntemlerini hooklamak iÃ§in (ÅŸifreli metin, dÃ¼z metin, anahtarlar, IV'ler ve kullanÄ±lan algoritmalar gÃ¶rmek iÃ§in) sslpinnin gibi bir kÄ±sayol yok.

<img src="../../../.gitbook/assets/i3.png" alt="" data-size="original">

**Bug bounty ipucu**: **Intigriti** iÃ§in **kayÄ±t olun**, **hackers tarafÄ±ndan, hackers iÃ§in oluÅŸturulmuÅŸ premium bir bug bounty platformu**! BugÃ¼n [**https://go.intigriti.com/hacktricks**](https://go.intigriti.com/hacktricks) adresine katÄ±lÄ±n ve **$100,000**'a kadar Ã¶dÃ¼ller kazanmaya baÅŸlayÄ±n!

{% embed url="https://go.intigriti.com/hacktricks" %}

{% hint style="success" %}
AWS Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
GCP Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* **ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n ya da **Twitter**'da **bizi takip edin** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Hacking ipuÃ§larÄ±nÄ± paylaÅŸmak iÃ§in** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna PR gÃ¶nderin.

</details>
{% endhint %}
