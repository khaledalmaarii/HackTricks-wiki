# Reversing Native Libraries

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}


**Za viÅ¡e informacija pogledajte:** [**https://maddiestone.github.io/AndroidAppRE/reversing\_native\_libs.html**](https://maddiestone.github.io/AndroidAppRE/reversing\_native\_libs.html)

Android aplikacije mogu koristiti nativne biblioteke, obiÄno napisane u C ili C++, za zadatke koji zahtevaju visoke performanse. Kreatori malvera takoÄ‘e koriste ove biblioteke, jer ih je teÅ¾e obrnuti nego DEX bajtkod. Odeljak naglaÅ¡ava veÅ¡tine obrnute inÅ¾enjeringa prilagoÄ‘ene Androidu, umesto da uÄi jezike asemblera. ARM i x86 verzije biblioteka su obezbeÄ‘ene radi kompatibilnosti.

### KljuÄne taÄke:

* **Nativne biblioteke u Android aplikacijama:**
* Koriste se za zadatke koji zahtevaju visoke performanse.
* Napisane u C ili C++, Å¡to oteÅ¾ava obrnuto inÅ¾enjerstvo.
* PronaÄ‘ene u `.so` (deljeni objekat) formatu, sliÄno Linux binarnim datotekama.
* Kreatori malvera preferiraju nativni kod kako bi oteÅ¾ali analizu.
* **Java Native Interface (JNI) & Android NDK:**
* JNI omoguÄ‡ava implementaciju Java metoda u nativnom kodu.
* NDK je set alata specifiÄnih za Android za pisanje nativnog koda.
* JNI i NDK povezuju Java (ili Kotlin) kod sa nativnim bibliotekama.
* **UÄitavanje i izvrÅ¡avanje biblioteka:**
* Biblioteke se uÄitavaju u memoriju koristeÄ‡i `System.loadLibrary` ili `System.load`.
* JNI\_OnLoad se izvrÅ¡ava prilikom uÄitavanja biblioteke.
* Java-deklarisane nativne metode povezuju se sa nativnim funkcijama, omoguÄ‡avajuÄ‡i izvrÅ¡avanje.
* **Povezivanje Java metoda sa nativnim funkcijama:**
* **DinamiÄko povezivanje:** Imena funkcija u nativnim bibliotekama odgovaraju specifiÄnom obrascu, omoguÄ‡avajuÄ‡i automatsko povezivanje.
* **StatÄko povezivanje:** Koristi `RegisterNatives` za povezivanje, pruÅ¾ajuÄ‡i fleksibilnost u imenovanju i strukturi funkcija.
* **Alati i tehnike obrnute inÅ¾enjeringa:**
* Alati poput Ghidra i IDA Pro pomaÅ¾u u analizi nativnih biblioteka.
* `JNIEnv` je kljuÄan za razumevanje JNI funkcija i interakcija.
* PruÅ¾ene su veÅ¾be za veÅ¾banje uÄitavanja biblioteka, povezivanja metoda i identifikacije nativnih funkcija.

### Resursi:

* **UÄenje ARM asemblera:**
* PreporuÄuje se za dublje razumevanje osnovne arhitekture.
* [Osnovi ARM asemblera](https://azeria-labs.com/writing-arm-assembly-part-1/) iz Azeria Labs se preporuÄuje.
* **JNI & NDK dokumentacija:**
* [Oracle-ova JNI specifikacija](https://docs.oracle.com/javase/7/docs/technotes/guides/jni/spec/jniTOC.html)
* [Android-ovi JNI saveti](https://developer.android.com/training/articles/perf-jni)
* [PoÄetak sa NDK](https://developer.android.com/ndk/guides/)
* **Debagovanje nativnih biblioteka:**
* [Debagovanje Android nativnih biblioteka koristeÄ‡i JEB dekompajler](https://medium.com/@shubhamsonani/how-to-debug-android-native-libraries-using-jeb-decompiler-eec681a22cf3)


{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
