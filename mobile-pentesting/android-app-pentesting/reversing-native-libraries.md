# Reversing Native Libraries

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}


**For further information check:** [**https://maddiestone.github.io/AndroidAppRE/reversing\_native\_libs.html**](https://maddiestone.github.io/AndroidAppRE/reversing\_native\_libs.html)

Aplikacje Android mogÄ… korzystaÄ‡ z bibliotek natywnych, zazwyczaj napisanych w C lub C++, do zadaÅ„ wymagajÄ…cych duÅ¼ej wydajnoÅ›ci. TwÃ³rcy zÅ‚oÅ›liwego oprogramowania rÃ³wnieÅ¼ uÅ¼ywajÄ… tych bibliotek, poniewaÅ¼ sÄ… trudniejsze do inÅ¼ynierii odwrotnej niÅ¼ kod bajtowy DEX. Sekcja ta podkreÅ›la umiejÄ™tnoÅ›ci inÅ¼ynierii odwrotnej dostosowane do Androida, zamiast uczyÄ‡ jÄ™zykÃ³w asemblera. Wersje bibliotek dla ARM i x86 sÄ… dostarczane dla zapewnienia kompatybilnoÅ›ci.

### Key Points:

* **Native Libraries in Android Apps:**
* UÅ¼ywane do zadaÅ„ wymagajÄ…cych duÅ¼ej wydajnoÅ›ci.
* Napisane w C lub C++, co utrudnia inÅ¼ynieriÄ™ odwrotnÄ….
* ZnajdujÄ… siÄ™ w formacie `.so` (shared object), podobnym do binariÃ³w Linuxa.
* TwÃ³rcy zÅ‚oÅ›liwego oprogramowania preferujÄ… kod natywny, aby utrudniÄ‡ analizÄ™.
* **Java Native Interface (JNI) & Android NDK:**
* JNI pozwala na implementacjÄ™ metod Java w kodzie natywnym.
* NDK to zestaw narzÄ™dzi specyficznych dla Androida do pisania kodu natywnego.
* JNI i NDK Å‚Ä…czÄ… kod Java (lub Kotlin) z bibliotekami natywnymi.
* **Library Loading & Execution:**
* Biblioteki sÄ… Å‚adowane do pamiÄ™ci za pomocÄ… `System.loadLibrary` lub `System.load`.
* JNI\_OnLoad jest wykonywane po zaÅ‚adowaniu biblioteki.
* Metody natywne zadeklarowane w Javie Å‚Ä…czÄ… siÄ™ z funkcjami natywnymi, umoÅ¼liwiajÄ…c wykonanie.
* **Linking Java Methods to Native Functions:**
* **Dynamic Linking:** Nazwy funkcji w bibliotekach natywnych pasujÄ… do okreÅ›lonego wzoru, co umoÅ¼liwia automatyczne Å‚Ä…czenie.
* **Static Linking:** UÅ¼ywa `RegisterNatives` do Å‚Ä…czenia, co zapewnia elastycznoÅ›Ä‡ w nazewnictwie funkcji i strukturze.
* **Reverse Engineering Tools and Techniques:**
* NarzÄ™dzia takie jak Ghidra i IDA Pro pomagajÄ… w analizie bibliotek natywnych.
* `JNIEnv` jest kluczowe dla zrozumienia funkcji JNI i interakcji.
* Zapewnione sÄ… Ä‡wiczenia do praktyki Å‚adowania bibliotek, Å‚Ä…czenia metod i identyfikowania funkcji natywnych.

### Resources:

* **Learning ARM Assembly:**
* Sugerowane dla gÅ‚Ä™bszego zrozumienia podstawowej architektury.
* [ARM Assembly Basics](https://azeria-labs.com/writing-arm-assembly-part-1/) z Azeria Labs jest zalecane.
* **JNI & NDK Documentation:**
* [Oracle's JNI Specification](https://docs.oracle.com/javase/7/docs/technotes/guides/jni/spec/jniTOC.html)
* [Android's JNI Tips](https://developer.android.com/training/articles/perf-jni)
* [Getting Started with the NDK](https://developer.android.com/ndk/guides/)
* **Debugging Native Libraries:**
* [Debug Android Native Libraries Using JEB Decompiler](https://medium.com/@shubhamsonani/how-to-debug-android-native-libraries-using-jeb-decompiler-eec681a22cf3)


{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
