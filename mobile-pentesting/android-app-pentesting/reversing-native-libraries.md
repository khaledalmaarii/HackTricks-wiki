# Odwracanie bibliotek natywnych

<details>

<summary><strong>Naucz siÄ™ hakowaÄ‡ AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Inne sposoby wsparcia HackTricks:

* JeÅ›li chcesz zobaczyÄ‡ swojÄ… **firmÄ™ reklamowanÄ… w HackTricks** lub **pobraÄ‡ HackTricks w formacie PDF**, sprawdÅº [**PLAN SUBSKRYPCJI**](https://github.com/sponsors/carlospolop)!
* ZdobÄ…dÅº [**oficjalne gadÅ¼ety PEASS & HackTricks**](https://peass.creator-spring.com)
* Odkryj [**RodzinÄ™ PEASS**](https://opensea.io/collection/the-peass-family), naszÄ… kolekcjÄ™ ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* **DoÅ‚Ä…cz do** ğŸ’¬ [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **Å›ledÅº** nas na **Twitterze** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Podziel siÄ™ swoimi sztuczkami hakerskimi, przesyÅ‚ajÄ…c PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>

**Aby uzyskaÄ‡ dalsze informacje, sprawdÅº: [https://maddiestone.github.io/AndroidAppRE/reversing\_native\_libs.html](https://maddiestone.github.io/AndroidAppRE/reversing\_native\_libs.html)**

Aplikacje Android mogÄ… korzystaÄ‡ z bibliotek natywnych, zwykle napisanych w jÄ™zyku C lub C++, do wykonywania zadaÅ„ o duÅ¼ej wydajnoÅ›ci. TwÃ³rcy zÅ‚oÅ›liwego oprogramowania rÃ³wnieÅ¼ korzystajÄ… z tych bibliotek, poniewaÅ¼ sÄ… trudniejsze do odwrÃ³cenia niÅ¼ kod bajtowy DEX. Sekcja ta skupia siÄ™ na umiejÄ™tnoÅ›ciach odwracania inÅ¼ynieryjnego dostosowanych do systemu Android, a nie na nauczaniu jÄ™zykÃ³w asemblera. Wersje bibliotek dla architektur ARM i x86 sÄ… dostÄ™pne dla zapewnienia kompatybilnoÅ›ci.

### Kluczowe punkty:
- **Biblioteki natywne w aplikacjach Android:**
- UÅ¼ywane do zadaÅ„ o duÅ¼ej wydajnoÅ›ci.
- Napisane w jÄ™zyku C lub C++, co utrudnia odwracanie inÅ¼ynieryjne.
- ZnajdujÄ… siÄ™ w formacie `.so` (shared object), podobnym do binarnych plikÃ³w Linux.
- TwÃ³rcy zÅ‚oÅ›liwego oprogramowania preferujÄ… kod natywny, aby utrudniÄ‡ analizÄ™.

- **Java Native Interface (JNI) i Android NDK:**
- JNI umoÅ¼liwia implementacjÄ™ metod Javy w kodzie natywnym.
- NDK to zestaw narzÄ™dzi specyficznych dla systemu Android do pisania kodu natywnego.
- JNI i NDK Å‚Ä…czÄ… kod Javy (lub Kotlin) z bibliotekami natywnymi.

- **Åadowanie i wykonywanie bibliotek:**
- Biblioteki sÄ… Å‚adowane do pamiÄ™ci za pomocÄ… `System.loadLibrary` lub `System.load`.
- Wykonuje siÄ™ JNI_OnLoad podczas Å‚adowania biblioteki.
- Deklarowane w Javie metody natywne Å‚Ä…czÄ… siÄ™ z funkcjami natywnymi, umoÅ¼liwiajÄ…c ich wykonanie.

- **ÅÄ…czenie metod Javy z funkcjami natywnymi:**
- **ÅÄ…czenie dynamiczne:** Nazwy funkcji w bibliotekach natywnych pasujÄ… do okreÅ›lonego wzorca, co umoÅ¼liwia automatyczne Å‚Ä…czenie.
- **ÅÄ…czenie statyczne:** Wykorzystuje `RegisterNatives` do Å‚Ä…czenia, zapewniajÄ…c elastycznoÅ›Ä‡ w nazewnictwie i strukturze funkcji.

- **NarzÄ™dzia i techniki odwracania inÅ¼ynieryjnego:**
- NarzÄ™dzia takie jak Ghidra i IDA Pro pomagajÄ… analizowaÄ‡ biblioteki natywne.
- `JNIEnv` jest kluczowy do zrozumienia funkcji i interakcji JNI.
- Ä†wiczenia sÄ… dostarczane w celu praktyki Å‚adowania bibliotek, Å‚Ä…czenia metod i identyfikacji funkcji natywnych.

### Zasoby:
- **Nauka jÄ™zyka asemblera ARM:**
- Zalecane dla lepszego zrozumienia podstawowej architektury.
- [Podstawy jÄ™zyka asemblera ARM](https://azeria-labs.com/writing-arm-assembly-part-1/) od Azeria Labs sÄ… polecane.

- **Dokumentacja JNI i NDK:**
- [Specyfikacja JNI Oracle](https://docs.oracle.com/javase/7/docs/technotes/guides/jni/spec/jniTOC.html)
- [WskazÃ³wki dotyczÄ…ce JNI w Androidzie](https://developer.android.com/training/articles/perf-jni)
- [RozpoczÄ™cie pracy z NDK](https://developer.android.com/ndk/guides/)

- **Debugowanie bibliotek natywnych:**
- [Debugowanie bibliotek natywnych Androida za pomocÄ… dekompilatora JEB](https://medium.com/@shubhamsonani/how-to-debug-android-native-libraries-using-jeb-decompiler-eec681a22cf3)

<details>

<summary><strong>Naucz siÄ™ hakowaÄ‡ AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Inne sposoby wsparcia HackTricks:

* JeÅ›li chcesz zobaczyÄ‡ swojÄ… **firmÄ™ reklamowanÄ… w HackTricks** lub **pobraÄ‡ HackTricks w formacie PDF**, sprawdÅº [**PLAN SUBSKRYPCJI**](https://github.com/sponsors/carlospolop)!
* ZdobÄ…dÅº [**oficjalne gadÅ¼ety PEASS & HackTricks**](https://peass.creator-spring.com)
* Odkryj [**RodzinÄ™ PEASS**](https://opensea.io/collection/the-peass-family), naszÄ… kolekcjÄ™ ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* **DoÅ‚Ä…cz do** ğŸ’¬ [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **Å›ledÅº** nas na **Twitterze** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Podziel siÄ™ swoimi sztuczkami hakerskimi, przesyÅ‚ajÄ…c PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
