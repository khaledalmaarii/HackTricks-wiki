# Reversing Native Libraries

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}


**Pour plus d'informations, consultez :** [**https://maddiestone.github.io/AndroidAppRE/reversing\_native\_libs.html**](https://maddiestone.github.io/AndroidAppRE/reversing\_native\_libs.html)

Les applications Android peuvent utiliser des biblioth√®ques natives, g√©n√©ralement √©crites en C ou C++, pour des t√¢ches critiques en termes de performance. Les cr√©ateurs de logiciels malveillants utilisent √©galement ces biblioth√®ques, car elles sont plus difficiles √† r√©troconcevoir que le bytecode DEX. La section met l'accent sur les comp√©tences en r√©tro-ing√©nierie adapt√©es √† Android, plut√¥t que d'enseigner des langages d'assemblage. Des versions ARM et x86 des biblioth√®ques sont fournies pour la compatibilit√©.

### Points Cl√©s :

* **Biblioth√®ques Natives dans les Applications Android :**
* Utilis√©es pour des t√¢ches intensives en performance.
* √âcrites en C ou C++, rendant la r√©tro-ing√©nierie difficile.
* Trouv√©es au format `.so` (objet partag√©), similaire aux binaires Linux.
* Les cr√©ateurs de logiciels malveillants pr√©f√®rent le code natif pour rendre l'analyse plus difficile.
* **Java Native Interface (JNI) & Android NDK :**
* JNI permet d'impl√©menter des m√©thodes Java en code natif.
* NDK est un ensemble d'outils sp√©cifique √† Android pour √©crire du code natif.
* JNI et NDK relient le code Java (ou Kotlin) aux biblioth√®ques natives.
* **Chargement et Ex√©cution des Biblioth√®ques :**
* Les biblioth√®ques sont charg√©es en m√©moire √† l'aide de `System.loadLibrary` ou `System.load`.
* JNI\_OnLoad est ex√©cut√© lors du chargement de la biblioth√®que.
* Les m√©thodes natives d√©clar√©es en Java se lient aux fonctions natives, permettant l'ex√©cution.
* **Liaison des M√©thodes Java aux Fonctions Natives :**
* **Liaison Dynamique :** Les noms de fonctions dans les biblioth√®ques natives correspondent √† un mod√®le sp√©cifique, permettant une liaison automatique.
* **Liaison Statique :** Utilise `RegisterNatives` pour la liaison, offrant flexibilit√© dans la nomination et la structure des fonctions.
* **Outils et Techniques de R√©tro-Ing√©nierie :**
* Des outils comme Ghidra et IDA Pro aident √† analyser les biblioth√®ques natives.
* `JNIEnv` est crucial pour comprendre les fonctions et interactions JNI.
* Des exercices sont fournis pour pratiquer le chargement de biblioth√®ques, la liaison de m√©thodes et l'identification de fonctions natives.

### Ressources :

* **Apprendre l'Assemblage ARM :**
* Sugg√©r√© pour une compr√©hension plus approfondie de l'architecture sous-jacente.
* [ARM Assembly Basics](https://azeria-labs.com/writing-arm-assembly-part-1/) d'Azeria Labs est recommand√©.
* **Documentation JNI & NDK :**
* [Sp√©cification JNI d'Oracle](https://docs.oracle.com/javase/7/docs/technotes/guides/jni/spec/jniTOC.html)
* [Conseils JNI d'Android](https://developer.android.com/training/articles/perf-jni)
* [Commencer avec le NDK](https://developer.android.com/ndk/guides/)
* **D√©bogage des Biblioth√®ques Natives :**
* [D√©boguer les Biblioth√®ques Natives Android en Utilisant JEB Decompiler](https://medium.com/@shubhamsonani/how-to-debug-android-native-libraries-using-jeb-decompiler-eec681a22cf3)


{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
