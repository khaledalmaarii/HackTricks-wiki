# Reversing Native Libraries

{% hint style="success" %}
Lernen & √ºben Sie AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Lernen & √ºben Sie GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* √úberpr√ºfen Sie die [**Abonnementpl√§ne**](https://github.com/sponsors/carlospolop)!
* **Treten Sie der** üí¨ [**Discord-Gruppe**](https://discord.gg/hRep4RUj7f) oder der [**Telegram-Gruppe**](https://t.me/peass) bei oder **folgen** Sie uns auf **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Teilen Sie Hacking-Tricks, indem Sie PRs zu den** [**HackTricks**](https://github.com/carlospolop/hacktricks) und [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub-Repos einreichen.

</details>
{% endhint %}


**F√ºr weitere Informationen siehe:** [**https://maddiestone.github.io/AndroidAppRE/reversing\_native\_libs.html**](https://maddiestone.github.io/AndroidAppRE/reversing\_native\_libs.html)

Android-Apps k√∂nnen native Bibliotheken verwenden, die typischerweise in C oder C++ geschrieben sind, f√ºr leistungsintensive Aufgaben. Malware-Ersteller nutzen ebenfalls diese Bibliotheken, da sie schwieriger umzukehren sind als DEX-Bytecode. Der Abschnitt betont Reverse-Engineering-F√§higkeiten, die auf Android zugeschnitten sind, anstatt Assemblersprachen zu lehren. ARM- und x86-Versionen von Bibliotheken werden zur Kompatibilit√§t bereitgestellt.

### Wichtige Punkte:

* **Native Bibliotheken in Android-Apps:**
* Werden f√ºr leistungsintensive Aufgaben verwendet.
* In C oder C++ geschrieben, was das Reverse Engineering herausfordernd macht.
* Im `.so` (Shared Object)-Format gefunden, √§hnlich wie Linux-Bin√§rdateien.
* Malware-Ersteller bevorzugen nativen Code, um die Analyse zu erschweren.
* **Java Native Interface (JNI) & Android NDK:**
* JNI erm√∂glicht es, Java-Methoden in nativen Code zu implementieren.
* NDK ist ein Android-spezifisches Set von Tools zum Schreiben von nativem Code.
* JNI und NDK verbinden Java (oder Kotlin) Code mit nativen Bibliotheken.
* **Bibliotheksladung & Ausf√ºhrung:**
* Bibliotheken werden mit `System.loadLibrary` oder `System.load` in den Speicher geladen.
* JNI\_OnLoad wird beim Laden der Bibliothek ausgef√ºhrt.
* In Java deklarierte native Methoden verkn√ºpfen sich mit nativen Funktionen, was die Ausf√ºhrung erm√∂glicht.
* **Verkn√ºpfung von Java-Methoden mit nativen Funktionen:**
* **Dynamische Verkn√ºpfung:** Funktionsnamen in nativen Bibliotheken entsprechen einem bestimmten Muster, was eine automatische Verkn√ºpfung erm√∂glicht.
* **Statische Verkn√ºpfung:** Verwendet `RegisterNatives` zur Verkn√ºpfung und bietet Flexibilit√§t bei der Benennung und Struktur von Funktionen.
* **Reverse Engineering-Tools und -Techniken:**
* Tools wie Ghidra und IDA Pro helfen bei der Analyse nativer Bibliotheken.
* `JNIEnv` ist entscheidend f√ºr das Verst√§ndnis von JNI-Funktionen und -Interaktionen.
* √úbungen werden bereitgestellt, um das Laden von Bibliotheken, die Verkn√ºpfung von Methoden und die Identifizierung nativer Funktionen zu √ºben.

### Ressourcen:

* **ARM-Assembly lernen:**
* Empfohlen f√ºr ein tieferes Verst√§ndnis der zugrunde liegenden Architektur.
* [ARM Assembly Basics](https://azeria-labs.com/writing-arm-assembly-part-1/) von Azeria Labs wird empfohlen.
* **JNI & NDK-Dokumentation:**
* [Oracles JNI-Spezifikation](https://docs.oracle.com/javase/7/docs/technotes/guides/jni/spec/jniTOC.html)
* [Androids JNI-Tipps](https://developer.android.com/training/articles/perf-jni)
* [Erste Schritte mit dem NDK](https://developer.android.com/ndk/guides/)
* **Debugging nativer Bibliotheken:**
* [Debuggen von Android-nativen Bibliotheken mit JEB Decompiler](https://medium.com/@shubhamsonani/how-to-debug-android-native-libraries-using-jeb-decompiler-eec681a22cf3)


{% hint style="success" %}
Lernen & √ºben Sie AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Lernen & √ºben Sie GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* √úberpr√ºfen Sie die [**Abonnementpl√§ne**](https://github.com/sponsors/carlospolop)!
* **Treten Sie der** üí¨ [**Discord-Gruppe**](https://discord.gg/hRep4RUj7f) oder der [**Telegram-Gruppe**](https://t.me/peass) bei oder **folgen** Sie uns auf **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Teilen Sie Hacking-Tricks, indem Sie PRs zu den** [**HackTricks**](https://github.com/carlospolop/hacktricks) und [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub-Repos einreichen.

</details>
{% endhint %}
