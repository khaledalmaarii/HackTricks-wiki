# Tapjacking

<details>

<summary><strong>AWS hackleme becerilerini sÄ±fÄ±rdan ileri seviyeye Ã¶ÄŸrenmek iÃ§in</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ±)</strong></a><strong>'Ä± Ã¶ÄŸrenin!</strong></summary>

HackTricks'i desteklemenin diÄŸer yollarÄ±:

* **Åirketinizi HackTricks'te reklamÄ±nÄ±zÄ± gÃ¶rmek** veya **HackTricks'i PDF olarak indirmek** iÃ§in [**ABONELÄ°K PLANLARINI**](https://github.com/sponsors/carlospolop) kontrol edin!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* [**The PEASS Ailesi'ni**](https://opensea.io/collection/the-peass-family) keÅŸfedin, Ã¶zel [**NFT'lerimiz**](https://opensea.io/collection/the-peass-family) koleksiyonumuz
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katÄ±lÄ±n** veya **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)**'Ä± takip edin**.
* **Hacking hilelerinizi** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna **PR gÃ¶ndererek paylaÅŸÄ±n**.

</details>

## **Temel Bilgiler**

**Tapjacking**, bir **kÃ¶tÃ¼ niyetli uygulamanÄ±n** baÅŸlatÄ±ldÄ±ÄŸÄ± ve bir kurban uygulamanÄ±n Ã¼zerine yerleÅŸtiÄŸi bir saldÄ±rÄ±dÄ±r. Kurban uygulamayÄ± gÃ¶rÃ¼nÃ¼r ÅŸekilde engellediÄŸinde, kullanÄ±cÄ± arayÃ¼zÃ¼, kullanÄ±cÄ±yÄ± yanÄ±ltacak ÅŸekilde tasarlanÄ±rken, etkileÅŸimi kurban uygulamaya iletmektedir.\
Bu ÅŸekilde, kullanÄ±cÄ±ya, gerÃ§ekte kurban uygulamada eylemler gerÃ§ekleÅŸtirdiÄŸini bilmemesi saÄŸlanÄ±r.

### Tespit

Bu saldÄ±rÄ±ya karÅŸÄ± savunmasÄ±z uygulamalarÄ± tespit etmek iÃ§in android manifestteki **dÄ±ÅŸa aktarÄ±lan aktiviteleri** aramalÄ±sÄ±nÄ±z (bir intent-filter'a sahip bir aktivite varsayÄ±lan olarak otomatik olarak dÄ±ÅŸa aktarÄ±lÄ±r). DÄ±ÅŸa aktarÄ±lan aktiviteleri bulduktan sonra, **herhangi bir izin gerekip gerekmediÄŸini kontrol edin**. Ã‡Ã¼nkÃ¼ **kÃ¶tÃ¼ niyetli uygulama da o izne ihtiyaÃ§ duyacaktÄ±r**.

### Koruma

#### Android 12 (API 31,32) ve daha yÃ¼ksek

[**Bu kaynaÄŸa gÃ¶re**](https://www.geeksforgeeks.org/tapjacking-in-android/)**,** Android 12 (API 31 ve 30) ve daha yÃ¼ksek sÃ¼rÃ¼mlerinden itibaren tapjacking saldÄ±rÄ±larÄ± otomatik olarak Android tarafÄ±ndan engellenir. Bu nedenle, uygulama savunmasÄ±z olsa bile **sÃ¶mÃ¼rÃ¼lemezsiniz**.

#### `filterTouchesWhenObscured`

EÄŸer **`android:filterTouchesWhenObscured`** **`true`** olarak ayarlanmÄ±ÅŸsa, `View`, gÃ¶rÃ¼nÃ¼r baÅŸka bir pencere tarafÄ±ndan engellendiÄŸinde dokunmalarÄ± almayacaktÄ±r.

#### **`setFilterTouchesWhenObscured`**

EÄŸer Android sÃ¼rÃ¼mÃ¼ daha dÃ¼ÅŸÃ¼kse, **`setFilterTouchesWhenObscured`** Ã¶zelliÄŸi **`true`** olarak ayarlanÄ±rsa, bu zafiyetin sÃ¶mÃ¼rÃ¼lmesini engelleyebilir.\
Ã–rneÄŸin, bir dÃ¼ÄŸme **gÃ¶rÃ¼nÃ¼r ÅŸekilde engellendiÄŸinde otomatik olarak devre dÄ±ÅŸÄ± bÄ±rakÄ±labilir**:
```xml
<Button android:text="Button"
android:id="@+id/button1"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:filterTouchesWhenObscured="true">
</Button>
```
## SÃ¶mÃ¼rÃ¼

### Tapjacking-ExportedActivity

En **son Android uygulamasÄ±** bir Tapjacking saldÄ±rÄ±sÄ± gerÃ§ekleÅŸtiren (+ saldÄ±rÄ±ya uÄŸrayan uygulamanÄ±n dÄ±ÅŸa aktarÄ±lan bir etkinliÄŸini Ã§aÄŸÄ±rmadan Ã¶nce) ÅŸurada bulunabilir: [**https://github.com/carlospolop/Tapjacking-ExportedActivity**](https://github.com/carlospolop/Tapjacking-ExportedActivity).

Kullanmak iÃ§in **README talimatlarÄ±nÄ± takip edin**.

### FloatingWindowApp

TÄ±klama hÄ±rsÄ±zlÄ±ÄŸÄ± saldÄ±rÄ±sÄ± gerÃ§ekleÅŸtirmek iÃ§in diÄŸer etkinliklerin Ã¼zerine yerleÅŸtirilebilen **FloatingWindowApp**'i uygulayan bir Ã¶rnek proje [**FloatingWindowApp**](https://github.com/aminography/FloatingWindowApp) adresinde bulunabilir (biraz eski, apk oluÅŸtururken iyi ÅŸanslar).

### Qark

{% hint style="danger" %}
Bu proje artÄ±k bakÄ±msÄ±z gÃ¶rÃ¼nÃ¼yor ve bu iÅŸlevsellik artÄ±k dÃ¼zgÃ¼n Ã§alÄ±ÅŸmÄ±yor gibi gÃ¶rÃ¼nÃ¼yor.
{% endhint %}

Muhtemel **Tapjacking** zafiyetlerini test etmek iÃ§in kÃ¶tÃ¼ niyetli bir uygulama oluÅŸturmak iÃ§in [**qark**](https://github.com/linkedin/qark) aracÄ±nÄ± `--exploit-apk` --sdk-path `/Users/username/Library/Android/sdk` parametreleriyle kullanabilirsiniz.

Bu saldÄ±rÄ±yÄ± Ã¶nlemek oldukÃ§a basittir Ã§Ã¼nkÃ¼ geliÅŸtirici, bir gÃ¶rÃ¼nÃ¼m baÅŸka bir gÃ¶rÃ¼nÃ¼m tarafÄ±ndan kaplandÄ±ÄŸÄ±nda dokunma olaylarÄ±nÄ± almayÄ± seÃ§meyebilir. [Android GeliÅŸtirici ReferansÄ±](https://developer.android.com/reference/android/view/View#security) kullanÄ±larak ÅŸu ÅŸekilde aÃ§Ä±klanmÄ±ÅŸtÄ±r:

> Bir izin isteÄŸi vermek, bir satÄ±n alma yapmak veya bir reklama tÄ±klamak gibi bir eylemin kullanÄ±cÄ±nÄ±n tam bilgisi ve onayÄ±yla gerÃ§ekleÅŸtirildiÄŸini doÄŸrulamanÄ±n bazen Ã¶nemli olduÄŸu durumlar vardÄ±r. Ne yazÄ±k ki, kÃ¶tÃ¼ niyetli bir uygulama, kullanÄ±cÄ±nÄ±n bu eylemleri farkÄ±nda olmadan gerÃ§ekleÅŸtirmesini saÄŸlamak iÃ§in gÃ¶rÃ¼nÃ¼mÃ¼n amaÃ§lanan amacÄ±nÄ± gizleyebilir. Bir Ã§Ã¶zÃ¼m olarak, Ã§erÃ§eve, hassas iÅŸlevselliÄŸe eriÅŸim saÄŸlayan gÃ¶rÃ¼nÃ¼mlerin gÃ¼venliÄŸini artÄ±rmak iÃ§in kullanÄ±labilecek bir dokunma filtreleme mekanizmasÄ± sunar.
>
> Dokunma filtrelemeyi etkinleÅŸtirmek iÃ§in [`setFilterTouchesWhenObscured(boolean)`](https://developer.android.com/reference/android/view/View#setFilterTouchesWhenObscured%28boolean%29) yÃ¶ntemini Ã§aÄŸÄ±rÄ±n veya android:filterTouchesWhenObscured dÃ¼zen Ã¶zniteliÄŸini true olarak ayarlayÄ±n. EtkinleÅŸtirildiÄŸinde, Ã§erÃ§eve, gÃ¶rÃ¼nÃ¼mÃ¼n penceresinin baÅŸka bir gÃ¶rÃ¼nÃ¼r pencere tarafÄ±ndan kaplandÄ±ÄŸÄ± her zaman alÄ±nan dokunmalarÄ± atar. SonuÃ§ olarak, bir tost, iletiÅŸim kutusu veya diÄŸer bir pencere gÃ¶rÃ¼nÃ¼mÃ¼n penceresinin Ã¼zerinde gÃ¶rÃ¼ndÃ¼ÄŸÃ¼nde gÃ¶rÃ¼nÃ¼m dokunmalarÄ± almayacaktÄ±r.

<details>

<summary><strong>AWS hackleme konusunda sÄ±fÄ±rdan kahraman olmaya</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong> Ã¶ÄŸrenin!</strong></summary>

HackTricks'i desteklemenin diÄŸer yollarÄ±:

* Åirketinizi HackTricks'te **reklam vermek veya HackTricks'i PDF olarak indirmek** iÃ§in [**ABONELÄ°K PLANLARI**](https://github.com/sponsors/carlospolop)'na gÃ¶z atÄ±n!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* Ã–zel [**NFT'lerden**](https://opensea.io/collection/the-peass-family) oluÅŸan koleksiyonumuz olan [**The PEASS Family**](https://opensea.io/collection/the-peass-family)'yi keÅŸfedin
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katÄ±lÄ±n** veya bizi **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)** takip edin**.
* **Hacking hilelerinizi** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarÄ±na **PR gÃ¶ndererek paylaÅŸÄ±n**.

</details>
