# Cordova Apps

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

**è©³ç´°ã«ã¤ã„ã¦ã¯ã€[https://infosecwriteups.com/recreating-cordova-mobile-apps-to-bypass-security-implementations-8845ff7bdc58](https://infosecwriteups.com/recreating-cordova-mobile-apps-to-bypass-security-implementations-8845ff7bdc58)ã‚’ç¢ºèªã—ã¦ãã ã•ã„**ã€‚ã“ã‚Œã¯è¦ç´„ã§ã™ï¼š

Apache Cordovaã¯ã€**JavaScriptã€HTMLã€CSS**ã‚’ä½¿ç”¨ã—ã¦**ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³**ã®é–‹ç™ºã‚’å¯èƒ½ã«ã™ã‚‹ã“ã¨ã§çŸ¥ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€AndroidãŠã‚ˆã³iOSã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ä½œæˆãŒå¯èƒ½ã§ã™ãŒã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’ä¿è­·ã™ã‚‹ãŸã‚ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒ¡ã‚«ãƒ‹ã‚ºãƒ ãŒæ¬ ã‘ã¦ã„ã¾ã™ã€‚React Nativeã¨ã¯ç•°ãªã‚Šã€Cordovaã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã—ãªã„ãŸã‚ã€ã‚³ãƒ¼ãƒ‰æ”¹ã–ã‚“ã®è„†å¼±æ€§ãŒç”Ÿã˜ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚Cordovaã¯WebViewã‚’ä½¿ç”¨ã—ã¦ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã—ã€APKã¾ãŸã¯IPAãƒ•ã‚¡ã‚¤ãƒ«ã«ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã•ã‚ŒãŸå¾Œã§ã‚‚HTMLãŠã‚ˆã³JavaScriptã‚³ãƒ¼ãƒ‰ã‚’éœ²å‡ºã•ã›ã¾ã™ã€‚ä¸€æ–¹ã€React Nativeã¯JavaScript VMã‚’ä½¿ç”¨ã—ã¦JavaScriptã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè¡Œã—ã€ã‚ˆã‚Šè‰¯ã„ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ä¿è­·ã‚’æä¾›ã—ã¾ã™ã€‚

### Cordovaã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚¯ãƒ­ãƒ¼ãƒ³ä½œæˆ

Cordovaã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã‚¯ãƒ­ãƒ¼ãƒ³ã™ã‚‹å‰ã«ã€NodeJSãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã€Android SDKã€Java JDKã€Gradleãªã©ã®ä»–ã®å‰ææ¡ä»¶ã‚‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãã ã•ã„ã€‚å…¬å¼ã®Cordova [ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://cordova.apache.org/docs/en/11.x/guide/cli/#install-pre-requisites-for-building)ã¯ã€ã“ã‚Œã‚‰ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã«é–¢ã™ã‚‹åŒ…æ‹¬çš„ãªã‚¬ã‚¤ãƒ‰ã‚’æä¾›ã—ã¦ã„ã¾ã™ã€‚

`com.android.bank`ã¨ã„ã†ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åã®`Bank.apk`ã¨ã„ã†ä¾‹ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è€ƒãˆã¦ã¿ã¾ã—ã‚‡ã†ã€‚ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã«ã¯ã€`bank.apk`ã‚’è§£å‡ã—ã€`bank/assets/www`ãƒ•ã‚©ãƒ«ãƒ€ãƒ¼ã«ç§»å‹•ã—ã¾ã™ã€‚ã“ã®ãƒ•ã‚©ãƒ«ãƒ€ãƒ¼ã«ã¯ã€HTMLãŠã‚ˆã³JSãƒ•ã‚¡ã‚¤ãƒ«ã‚’å«ã‚€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®å®Œå…¨ãªã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®è¨­å®šã¯`bank/res/xml/config.xml`ã«ã‚ã‚Šã¾ã™ã€‚

ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã‚¯ãƒ­ãƒ¼ãƒ³ã™ã‚‹ã«ã¯ã€æ¬¡ã®æ‰‹é †ã«å¾“ã£ã¦ãã ã•ã„ï¼š
```bash
npm install -g cordova@latest
cordova create bank-new com.android.bank Bank
cd bank-new
```
`bank/assets/www`ã®å†…å®¹ã‚’`bank-new/www`ã«ã‚³ãƒ”ãƒ¼ã—ã¾ã™ãŒã€`cordova_plugins.js`ã€`cordova.js`ã€`cordova-js-src/`ã€ãŠã‚ˆã³`plugins/`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¯é™¤å¤–ã—ã¾ã™ã€‚

æ–°ã—ã„Cordovaãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã™ã‚‹éš›ã«ã¯ã€ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ï¼ˆAndroidã¾ãŸã¯iOSï¼‰ã‚’æŒ‡å®šã—ã¦ãã ã•ã„ã€‚Androidã‚¢ãƒ—ãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³ã™ã‚‹å ´åˆã¯ã€Androidãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã‚’è¿½åŠ ã—ã¾ã™ã€‚Cordovaã®ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¨Android APIãƒ¬ãƒ™ãƒ«ã¯ç•°ãªã‚‹ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¨ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹Android APIã®è©³ç´°ã«ã¤ã„ã¦ã¯ã€Cordovaã®[ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://cordova.apache.org/docs/en/11.x/guide/platforms/android/)ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

é©åˆ‡ãªCordova Androidãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ç¢ºèªã™ã‚‹ã«ã¯ã€å…ƒã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®`cordova.js`ãƒ•ã‚¡ã‚¤ãƒ«å†…ã®`PLATFORM_VERSION_BUILD_LABEL`ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ãã ã•ã„ã€‚

ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã®è¨­å®šå¾Œã€å¿…è¦ãªãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚å…ƒã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®`bank/assets/www/cordova_plugins.js`ãƒ•ã‚¡ã‚¤ãƒ«ã«ã¯ã€ã™ã¹ã¦ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¨ãã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒãƒªã‚¹ãƒˆã•ã‚Œã¦ã„ã¾ã™ã€‚ä»¥ä¸‹ã®ã‚ˆã†ã«ã€å„ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’å€‹åˆ¥ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãã ã•ã„ã€‚
```bash
cd bank-new
cordova plugin add cordova-plugin-dialogs@2.0.1
```
ã‚‚ã—ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãŒnpmã§åˆ©ç”¨ã§ããªã„å ´åˆã¯ã€GitHubã‹ã‚‰å–å¾—ã§ãã¾ã™:
```bash
cd bank-new
cordova plugin add https://github.com/moderna/cordova-plugin-cache.git
```
ã™ã¹ã¦ã®å‰ææ¡ä»¶ãŒæº€ãŸã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ã‹ã‚‰ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã—ã¦ãã ã•ã„ï¼š
```bash
cd bank-new
cordova requirements
```
APKã‚’ãƒ“ãƒ«ãƒ‰ã™ã‚‹ã«ã¯ã€æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã—ã¾ã™ï¼š
```bash
cd bank-new
cordova build android â€” packageType=apk
```
ã“ã®ã‚³ãƒãƒ³ãƒ‰ã¯ã€ãƒ‡ãƒãƒƒã‚°ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒæœ‰åŠ¹ãªAPKã‚’ç”Ÿæˆã—ã€Google Chromeã‚’ä»‹ã—ãŸãƒ‡ãƒãƒƒã‚°ã‚’å®¹æ˜“ã«ã—ã¾ã™ã€‚ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ã‚³ãƒ¼ãƒ‰æ”¹ã–ã‚“æ¤œå‡ºãƒ¡ã‚«ãƒ‹ã‚ºãƒ ãŒå«ã¾ã‚Œã¦ã„ã‚‹å ´åˆã€ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å‰ã«APKã«ç½²åã™ã‚‹ã“ã¨ãŒé‡è¦ã§ã™ã€‚

### è‡ªå‹•åŒ–ãƒ„ãƒ¼ãƒ«

ã‚¯ãƒ­ãƒ¼ãƒ³ãƒ—ãƒ­ã‚»ã‚¹ã‚’è‡ªå‹•åŒ–ã—ãŸã„æ–¹ã«ã¯ã€**[MobSecco](https://github.com/Anof-cyber/MobSecco)**ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚ã“ã‚Œã¯ã€Androidã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚¯ãƒ­ãƒ¼ãƒ³ã‚’ç°¡ç´ åŒ–ã—ã€ä¸Šè¨˜ã®æ‰‹é †ã‚’ç°¡ç•¥åŒ–ã—ã¾ã™ã€‚

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
