# Cordova åº”ç”¨ç¨‹åº

<details>

<summary><strong>ä»é›¶å¼€å§‹å­¦ä¹  AWS é»‘å®¢æ”»å‡»æˆä¸ºè‹±é›„ï¼Œé€šè¿‡</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS çº¢é˜Ÿä¸“å®¶)</strong></a><strong>ï¼</strong></summary>

æ”¯æŒ HackTricks çš„å…¶ä»–æ–¹å¼ï¼š

* å¦‚æœæ‚¨æƒ³åœ¨ **HackTricks ä¸­çœ‹åˆ°æ‚¨çš„å…¬å¸å¹¿å‘Š** æˆ– **ä¸‹è½½ HackTricks çš„ PDF ç‰ˆæœ¬**ï¼Œè¯·æŸ¥çœ‹ [**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼
* è·å– [**å®˜æ–¹ PEASS & HackTricks å•†å“**](https://peass.creator-spring.com)
* å‘ç° [**PEASS å®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬ç‹¬å®¶çš„ [**NFT é›†åˆ**](https://opensea.io/collection/the-peass-family)
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**telegram ç¾¤ç»„**](https://t.me/peass) æˆ–åœ¨ **Twitter** ğŸ¦ ä¸Š **å…³æ³¨** æˆ‘ [**@carlospolopm**](https://twitter.com/carlospolopm)**ã€‚**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github ä»“åº“æäº¤ PR æ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚

</details>

ä¿¡æ¯å–è‡ªå¸–å­ [https://infosecwriteups.com/recreating-cordova-mobile-apps-to-bypass-security-implementations-8845ff7bdc58](https://infosecwriteups.com/recreating-cordova-mobile-apps-to-bypass-security-implementations-8845ff7bdc58)

## åŸºæœ¬ä¿¡æ¯

Apache Cordova æ˜¯ä¸€ä¸ªæµè¡Œçš„æ¡†æ¶ï¼Œå…è®¸æ‚¨ä½¿ç”¨ **JavaScriptã€HTML å’Œ CSS** åˆ›å»º **æ··åˆåº”ç”¨ç¨‹åº**ï¼ˆAndroid å’Œ iOSï¼‰ã€‚

Cordova çš„ä¸€ä¸ªä¸»è¦é—®é¢˜æ˜¯å®ƒ **æ²¡æœ‰é»˜è®¤çš„æ–¹æ³•æ¥ä¿æŠ¤** åº”ç”¨ç¨‹åºçš„ **æºä»£ç **ï¼Œä¸åƒ react-native é‚£æ ·ã€‚Cordova åº”ç”¨ç¨‹åºæ²¡æœ‰é»˜è®¤çš„æ–¹æ³•æ¥ç¼–è¯‘å®ƒï¼Œè¿™ä½¿å¾—ä»£ç ç¯¡æ”¹å˜å¾— **å®¹æ˜“**ã€‚Cordova åº”ç”¨ç¨‹åºä½¿ç”¨ WebView æ¥ä½¿ç”¨ HTML å’Œ JS æ¸²æŸ“åº”ç”¨ç¨‹åºï¼Œå³ä½¿åœ¨ç¼–è¯‘æˆ APK æˆ– IPA ä¹‹åä¹Ÿä¼šæ³„éœ²æºä»£ç ï¼Œè€Œ react native ä½¿ç”¨ JavaScript VM æ¥è¿è¡Œ JavaScript ä»£ç ã€‚

### å…‹éš† Cordova åº”ç”¨ç¨‹åº <a href="#8f50" id="8f50"></a>

è¦åˆ›å»º Cordova åº”ç”¨ç¨‹åºï¼Œæˆ‘ä»¬éœ€è¦å®‰è£… NodeJSã€‚é™¤äº† NodeJSï¼Œæˆ‘ä»¬è¿˜éœ€è¦å®‰è£…å…¶ä»–ä¸€äº›ä¸œè¥¿æ¥å®Œæˆæ„å»ºè¿‡ç¨‹ï¼Œå¦‚ Android SDKã€Java JDK å’Œ Gradleã€‚æ‚¨å¯ä»¥æŒ‰ç…§[å®˜æ–¹æ–‡æ¡£](https://cordova.apache.org/docs/en/11.x/guide/cli/#install-pre-requisites-for-building)çš„è¦æ±‚åˆ—è¡¨è¿›è¡Œæ“ä½œã€‚

ä»¥è¿™ä¸ªä¾‹å­ä¸ºä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥å‡è®¾åŸå§‹åº”ç”¨ç¨‹åºçš„åç§°æ˜¯ `Bank.apk`ï¼ŒåŒ…åæ˜¯ `com.android.bank`

è§£å‹ `bank.apk` å¹¶æ‰“å¼€ `bank/assets/www` æ–‡ä»¶å¤¹ã€‚æˆ‘ä»¬å¯ä»¥æŸ¥çœ‹ **Cordova åº”ç”¨ç¨‹åºçš„å®Œæ•´æºä»£ç **ã€‚æ‰€æœ‰ HTML å’Œ JS ä»£ç éƒ½å¯ä»¥ç”¨æ¥åˆ›å»ºåº”ç”¨ç¨‹åºçš„å…‹éš†ã€‚æˆ‘ä»¬è¿˜å¯ä»¥åœ¨ `bank/res/xml/config.xml` ä¸­æ‰¾åˆ°åº”ç”¨ç¨‹åºçš„é…ç½®æ–‡ä»¶ã€‚

ç°åœ¨æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªæ–°çš„ Cordova åº”ç”¨ç¨‹åºé¡¹ç›®ï¼š
```bash
npm install -g cordova@latest
cordova create bank-new com.android.bank Bank
cd bank-new
```
ç°åœ¨æˆ‘ä»¬éœ€è¦å°†æ‰€æœ‰æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ä» `bank/assets/www` å¤åˆ¶åˆ° `bank-new/www`ã€‚

å½“æˆ‘ä»¬å¤åˆ¶æºä»£ç æ—¶ï¼Œæˆ‘ä»¬éœ€è¦æ’é™¤ä¸€äº›æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ï¼Œå¦‚ `cordova_plugins.js, cordova.js, cordova-js-src/, plugins/`ã€‚æˆ‘ä»¬å¯ä»¥å¤åˆ¶æ‰€æœ‰æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ï¼Œä¸åŒ…æ‹¬ä¸Šè¿°æåˆ°çš„ã€‚

å½“æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–°çš„Cordovaé¡¹ç›®æ—¶ï¼Œæˆ‘ä»¬éœ€è¦æŒ‡æ˜åº”ç”¨æ˜¯ä¸ºAndroidè¿˜æ˜¯iOSã€‚ç”±äºæˆ‘ä»¬æ­£åœ¨å…‹éš†Androidåº”ç”¨ï¼Œæˆ‘ä»¬éœ€è¦ä¸ºå…¶æ·»åŠ ä¸€ä¸ªAndroidå¹³å°ã€‚åœ¨Cordovaä¸­ï¼Œæˆ‘ä»¬æœ‰å¹³å°ç‰ˆæœ¬ï¼Œæ¯ä¸ªç‰ˆæœ¬éƒ½æœ‰ä¸åŒçš„ç‰¹æ€§å’Œå¯¹Android APIæˆ–Androidç‰ˆæœ¬çš„æ”¯æŒã€‚

Android APIå’ŒCordova Androidå¹³å°ç‰ˆæœ¬éƒ½æ˜¯ä¸åŒçš„ã€‚æ‚¨å¯ä»¥[æŸ¥çœ‹](https://cordova.apache.org/docs/en/11.x/guide/platforms/android/)å¹³å°ç‰ˆæœ¬åˆ—è¡¨åŠå…¶å¯¹Android APIçš„æ”¯æŒã€‚

è¦æ·»åŠ Cordova Androidå¹³å°ï¼Œæˆ‘ä»¬éœ€è¦æ‰¾å‡ºåº”ç”¨æœ€åˆä½¿ç”¨çš„æ˜¯å“ªä¸ªç‰ˆæœ¬ã€‚å¦‚æœæ‚¨ä½¿ç”¨ä¸åŒçš„ç‰ˆæœ¬ï¼Œæ‚¨å¯èƒ½ä¼šé‡åˆ°é—®é¢˜ï¼Œå› ä¸ºæˆ‘ä»¬æ­£åœ¨ä½¿ç”¨ç›¸åŒçš„æºä»£ç æ¥å…‹éš†åº”ç”¨ã€‚æ‚¨å¯ä»¥æ‰“å¼€ `cordova.js` æ–‡ä»¶å¹¶æœç´¢ `PLATFORM_VERSION_BUILD_LABEL` æ¥æ‰¾åˆ°åº”ç”¨ä½¿ç”¨çš„ç‰ˆæœ¬ã€‚

\

ç°åœ¨æˆ‘ä»¬å·²ç»æ·»åŠ äº†Androidå¹³å°æ”¯æŒï¼Œæˆ‘ä»¬å¯ä»¥æ·»åŠ åº”ç”¨æ‰€éœ€çš„æ‰€æœ‰æ’ä»¶ã€‚åœ¨åŸå§‹åº”ç”¨ `bank/assets/www/cordova_plugins.js` ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ‰¾åˆ°åº”ç”¨ä½¿ç”¨çš„æ‰€æœ‰æ’ä»¶çš„åˆ—è¡¨ã€‚æˆ‘ä»¬éœ€è¦é€ä¸€å®‰è£…è¿™äº›æ’ä»¶ã€‚åœ¨ `cordova_plugins.js` æ–‡ä»¶ä¸­æœç´¢ `module.exports.metadata`ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥çœ‹åˆ°æ‰€æœ‰æ’ä»¶åŠå…¶ç‰ˆæœ¬ã€‚

<figure><img src="https://miro.medium.com/v2/resize:fit:1124/1*Hap3DmxS6-1apNj5RfpC3g.png" alt="Cordova Plugins" height="570" width="562"><figcaption><p>Cordva æ’ä»¶</p></figcaption></figure>

æˆ‘ä»¬éœ€è¦ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤é€ä¸€å®‰è£…æ‰€æœ‰æ’ä»¶
```bash
cd bank-new
cordova plugin add cordova-plugin-dialogs@2.0.1
```
{% hint style="warning" %}
å¦‚æœåœ¨npmä¸Šæ‰¾ä¸åˆ°æ’ä»¶ï¼Œè¯·åœ¨Githubä¸Šæœç´¢ï¼š
```bash
cd bank-new
cordova plugin add https://github.com/moderna/cordova-plugin-cache.git
```
{% endhint %}

è¦ç¼–è¯‘åº”ç”¨ç¨‹åºï¼Œæˆ‘ä»¬éœ€è¦ç¡®ä¿å·²ç»å®‰è£…äº†æ‰€æœ‰å¿…éœ€çš„æ¡ä»¶ã€‚
```bash
cd bank-new
cordova requirements
```
ä¸€æ—¦æˆ‘ä»¬å‡†å¤‡å¥½æ‰€æœ‰è®¾ç½®ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ„å»ºapkã€‚
```bash
cd bank-new
cordova build android â€” packageType=apk
```
ä¸Šè¿°æ„å»ºå‘½ä»¤å°†åˆ›å»ºä¸€ä¸ªå¯ç”¨äº†è°ƒè¯•æ–¹æ³•çš„apkï¼Œè¿™å…è®¸æˆ‘ä»¬ä½¿ç”¨Google Chromeå¯¹åº”ç”¨ç¨‹åºè¿›è¡Œè°ƒè¯•ã€‚åœ¨å®‰è£…apkä¹‹å‰ï¼Œè¯·ç¡®ä¿å¯¹apkè¿›è¡Œç­¾åã€‚å¦‚æœåº”ç”¨ç¨‹åºå…·æœ‰ä»£ç ç¯¡æ”¹æ£€æµ‹åŠŸèƒ½ï¼Œé™¤éæ²¡æœ‰è®¾ç½®ç‰¹å®šé…ç½®ï¼Œå¦åˆ™å°†è¢«ç»•è¿‡ã€‚

### è‡ªåŠ¨åŒ–å·¥å…·

[**MobSecco**](https://github.com/Anof-cyber/MobSecco)ï¼šä¸€ä¸ªè‡ªåŠ¨åŒ–å…‹éš†Androidåº”ç”¨ç¨‹åºå®Œæ•´è¿‡ç¨‹çš„å·¥å…·ã€‚

<details>

<summary><strong>ä»é›¶å¼€å§‹å­¦ä¹ AWSé»‘å®¢æ”»å‡»ç›´åˆ°æˆä¸ºä¸“å®¶ï¼Œé€šè¿‡</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>ï¼</strong></summary>

æ”¯æŒHackTricksçš„å…¶ä»–æ–¹å¼ï¼š

* å¦‚æœæ‚¨å¸Œæœ›åœ¨**HackTricksä¸­çœ‹åˆ°æ‚¨çš„å…¬å¸å¹¿å‘Š**æˆ–**ä¸‹è½½HackTricksçš„PDFç‰ˆæœ¬**ï¼Œè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼
* è·å–[**å®˜æ–¹PEASS & HackTrickså•†å“**](https://peass.creator-spring.com)
* å‘ç°[**PEASSå®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬ç‹¬å®¶çš„[**NFTsç³»åˆ—**](https://opensea.io/collection/the-peass-family)
* **åŠ å…¥** ğŸ’¬ [**Discordç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**telegramç¾¤ç»„**](https://t.me/peass) æˆ–åœ¨ **Twitter** ğŸ¦ ä¸Š**å…³æ³¨**æˆ‘ [**@carlospolopm**](https://twitter.com/carlospolopm)**ã€‚**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) githubä»“åº“æäº¤PRæ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚**

</details>
