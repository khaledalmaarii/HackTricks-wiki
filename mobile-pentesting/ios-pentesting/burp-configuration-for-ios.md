# Configuration de Burp Suite pour iOS

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>â˜ï¸ HackTricks Cloud â˜ï¸</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ğŸ¦ Twitter ğŸ¦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ğŸ™ï¸ Twitch ğŸ™ï¸</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ğŸ¥ Youtube ğŸ¥</strong></a></summary>

* Travaillez-vous dans une **entreprise de cybersÃ©curitÃ©** ? Voulez-vous voir votre **entreprise annoncÃ©e dans HackTricks** ? ou voulez-vous avoir accÃ¨s Ã  la **derniÃ¨re version de PEASS ou tÃ©lÃ©charger HackTricks en PDF** ? Consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop) !
* DÃ©couvrez [**The PEASS Family**](https://opensea.io/collection/the-peass-family), notre collection exclusive de [**NFTs**](https://opensea.io/collection/the-peass-family)
* Obtenez le [**swag officiel PEASS & HackTricks**](https://peass.creator-spring.com)
* **Rejoignez le** [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe telegram**](https://t.me/peass) ou **suivez** moi sur **Twitter** [**ğŸ¦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Partagez vos astuces de piratage en soumettant des PR au** [**repo hacktricks**](https://github.com/carlospolop/hacktricks) **et au** [**repo hacktricks-cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

![](<../.gitbook/assets/image (9) (1) (2).png>)

\
Utilisez [**Trickest**](https://trickest.io/) pour crÃ©er et **automatiser des workflows** alimentÃ©s par les outils communautaires les plus avancÃ©s au monde.\
Obtenez l'accÃ¨s aujourd'hui :

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

## Installation du certificat Burp sur iOS physique

Vous pouvez installer [**Burp Mobile Assistant**](https://portswigger.net/burp/documentation/desktop/tools/mobile-assistant/installing) **pour vous aider Ã  installer le certificat Burp, configurer le proxy et effectuer le SSL Pinning.**\
Ou vous pouvez suivre manuellement les Ã©tapes suivantes :

* Configurez **Burp** comme le **proxy de l'iPhone dans les paramÃ¨tres** --> **Wifi** --> **Cliquez sur le rÃ©seau** --> **Proxy**
* AccÃ©dez Ã  `http://burp` et tÃ©lÃ©chargez le certificat
* AccÃ©dez Ã  **ParamÃ¨tres** --> **GÃ©nÃ©ral** --> **VPN et gestion des appareils** --> SÃ©lectionnez le profil tÃ©lÃ©chargÃ© et installez-le (vous devrez entrer votre code)
* AccÃ©dez Ã  **ParamÃ¨tres** --> **GÃ©nÃ©ral** --> **Ã€ propos de** --> **ParamÃ¨tres de confiance du certificat** et activez PortSwigger CA

### Configuration d'un proxy d'interception via localhost

La configuration de Burp pour intercepter votre trafic est assez simple. Nous supposons que votre appareil iOS et votre ordinateur hÃ´te sont connectÃ©s Ã  un rÃ©seau Wi-Fi qui permet le trafic client-Ã -client. Si le trafic client-Ã -client n'est pas autorisÃ©, vous pouvez utiliser usbmuxd pour vous connecter Ã  Burp via USB.

PortSwigger fournit un bon [tutoriel sur la configuration d'un appareil iOS pour travailler avec Burp](https://support.portswigger.net/customer/portal/articles/1841108-configuring-an-ios-device-to-work-with-burp) et un [tutoriel sur l'installation du certificat CA de Burp sur un appareil iOS](https://support.portswigger.net/customer/portal/articles/1841109-installing-burp-s-ca-certificate-in-an-ios-device).

#### Utilisation de Burp via USB sur un appareil jailbreakÃ©

Lors de l'analyse dynamique, il est intÃ©ressant d'utiliser la connexion SSH pour router notre trafic vers Burp qui s'exÃ©cute sur notre ordinateur. CommenÃ§ons :

Tout d'abord, nous devons utiliser **iproxy** pour rendre SSH d'iOS disponible sur localhost.
```bash
$ iproxy 2222 22
waiting for connection
```
La prochaine Ã©tape consiste Ã  effectuer une redirection de port Ã  distance du port 8080 sur l'appareil iOS vers l'interface localhost sur notre ordinateur sur le port 8080.
```bash
ssh -R 8080:localhost:8080 root@localhost -p 2222
```
Vous devriez maintenant pouvoir accÃ©der Ã  Burp sur votre appareil iOS. Ouvrez Safari sur iOS et allez sur **127.0.0.1:8080** et vous devriez voir la page de Burp Suite. C'est Ã©galement le moment idÃ©al pour [installer le certificat CA](https://support.portswigger.net/customer/portal/articles/1841109-installing-burp-s-ca-certificate-in-an-ios-device) de Burp sur votre appareil iOS.

La derniÃ¨re Ã©tape consiste Ã  dÃ©finir le proxy globalement sur votre appareil iOS :

1. Allez dans **ParamÃ¨tres** -> **Wi-Fi**
2. Connectez-vous Ã  _n'importe quel_ Wi-Fi (vous pouvez littÃ©ralement vous connecter Ã  n'importe quel Wi-Fi car le trafic pour les ports 80 et 443 sera routÃ© via USB, car nous utilisons simplement le paramÃ¨tre Proxy pour le Wi-Fi afin de pouvoir dÃ©finir un proxy global)
3. Une fois connectÃ©, cliquez sur le petit icÃ´ne bleu sur le cÃ´tÃ© droit du Wi-Fi connectÃ©
4. Configurez votre proxy en sÃ©lectionnant **Manuel**
5. Tapez 127.0.0.1 comme **Serveur**
6. Tapez 8080 comme **Port**

### Surveillance/Sniffing complet du rÃ©seau

Si vous devez **surveiller autre chose que les communications HTTP**, vous pouvez renifler tout le trafic de l'appareil avec **wireshark**.\
Vous pouvez renifler Ã  distance tout le trafic en temps rÃ©el sur iOS en [crÃ©ant une interface virtuelle Ã  distance](https://stackoverflow.com/questions/9555403/capturing-mobile-phone-traffic-on-wireshark/33175819#33175819) pour votre appareil iOS. Assurez-vous d'abord que **Wireshark** est **installÃ©** sur votre ordinateur hÃ´te macOS.

1. **Connectez** votre appareil iOS Ã  votre ordinateur hÃ´te macOS via USB.
2. Vous devez connaÃ®tre l'**UDID de votre appareil iOS** avant de pouvoir commencer Ã  renifler. Ouvrez le Terminal sur macOS et entrez la commande suivante, en remplissant l'UDID de votre appareil iOS.
```bash
$ rvictl -s <UDID>
Starting device <UDID> [SUCCEEDED] with interface rvi0
```
1. Lancez **Wireshark** et sÃ©lectionnez "**rvi0**" comme interface de capture.
2. Filtrez le trafic avec les filtres de capture dans Wireshark pour afficher ce que vous souhaitez surveiller (par exemple, tout le trafic HTTP envoyÃ©/reÃ§u via l'adresse IP 192.168.1.1).
```
ip.addr == 192.168.1.1 && http
```
![](<../../.gitbook/assets/image (472).png>)

La documentation de Wireshark offre de nombreux exemples de [filtres de capture](https://wiki.wireshark.org/CaptureFilters) qui devraient vous aider Ã  filtrer le trafic pour obtenir les informations que vous souhaitez.

## Installation du certificat Burp dans le simulateur

* **Exporter le certificat Burp**

Dans _Proxy_ --> _Options_ --> _Export CA certificate_ --> _Certificate in DER format_

![](<../../.gitbook/assets/image (459).png>)

* **Faites glisser et dÃ©posez** le certificat dans l'Ã©mulateur
* **Dans l'Ã©mulateur**, allez dans _RÃ©glages_ --> _GÃ©nÃ©ral_ --> _Profil_ --> _PortSwigger CA_, et **vÃ©rifiez le certificat**
* **Dans l'Ã©mulateur**, allez dans _RÃ©glages_ --> _GÃ©nÃ©ral_ --> _Ã€ propos_ --> _ParamÃ¨tres de confiance du certificat_, et **activez PortSwigger CA**

![](<../../.gitbook/assets/image (460).png>)

**FÃ©licitations, vous avez configurÃ© avec succÃ¨s le certificat Burp CA dans le simulateur iOS**

{% hint style="info" %}
**Le simulateur iOS utilisera les configurations de proxy de MacOS.**
{% endhint %}

### Configuration du proxy MacOS

Ã‰tapes pour configurer Burp en tant que proxy :

* Allez dans _PrÃ©fÃ©rences SystÃ¨me_ --> _RÃ©seau_ --> _AvancÃ©_
* Dans l'onglet _Proxies_, cochez _Proxy Web (HTTP)_ et _Proxy Web sÃ©curisÃ© (HTTPS)_
* Dans les deux options, configurez _127.0.0.1:8080_

![](<../../.gitbook/assets/image (461).png>)

* Cliquez sur _**OK**_ et sur _**Appliquer**_

![](<../.gitbook/assets/image (9) (1) (2).png>)

\
Utilisez [**Trickest**](https://trickest.io/) pour crÃ©er et **automatiser des workflows** alimentÃ©s par les outils communautaires les plus avancÃ©s au monde.\
Obtenez l'accÃ¨s aujourd'hui :

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>â˜ï¸ HackTricks Cloud â˜ï¸</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ğŸ¦ Twitter ğŸ¦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ğŸ™ï¸ Twitch ğŸ™ï¸</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ğŸ¥ Youtube ğŸ¥</strong></a></summary>

* Travaillez-vous dans une **entreprise de cybersÃ©curitÃ©** ? Voulez-vous voir votre **entreprise annoncÃ©e dans HackTricks** ? ou voulez-vous avoir accÃ¨s Ã  la **derniÃ¨re version de PEASS ou tÃ©lÃ©charger HackTricks en PDF** ? Consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop) !
* DÃ©couvrez [**The PEASS Family**](https://opensea.io/collection/the-peass-family), notre collection exclusive de [**NFTs**](https://opensea.io/collection/the-peass-family)
* Obtenez le [**swag officiel PEASS & HackTricks**](https://peass.creator-spring.com)
* **Rejoignez le** [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe telegram**](https://t.me/peass) ou **suivez** moi sur **Twitter** [**ğŸ¦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Partagez vos astuces de piratage en soumettant des PR au** [**repo hacktricks**](https://github.com/carlospolop/hacktricks) **et au** [**repo hacktricks-cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>
