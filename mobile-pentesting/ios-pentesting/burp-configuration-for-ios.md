# iOS Burp Suiteé…ç½®

<details>

<summary><strong>ä»é›¶å¼€å§‹å­¦ä¹ AWSé»‘å®¢æŠ€æœ¯ï¼Œæˆä¸ºä¸“å®¶</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTEï¼ˆHackTricks AWS Red Team Expertï¼‰</strong></a><strong>ï¼</strong></summary>

æ”¯æŒHackTricksçš„å…¶ä»–æ–¹å¼ï¼š

- å¦‚æœæ‚¨æƒ³çœ‹åˆ°æ‚¨çš„**å…¬å¸åœ¨HackTricksä¸­è¢«å¹¿å‘Š**æˆ–**ä¸‹è½½PDFæ ¼å¼çš„HackTricks**ï¼Œè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
- è·å–[**å®˜æ–¹PEASS & HackTrickså‘¨è¾¹äº§å“**](https://peass.creator-spring.com)
- æ¢ç´¢[**PEASSå®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬çš„ç‹¬å®¶[NFTs](https://opensea.io/collection/the-peass-family)æ”¶è—å“
- **åŠ å…¥** ğŸ’¬ [**Discordç¾¤**](https://discord.gg/hRep4RUj7f) æˆ– [**ç”µæŠ¥ç¾¤**](https://t.me/peass) æˆ–åœ¨**Twitter**ä¸Šå…³æ³¨æˆ‘ä»¬ ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks\_live)**ã€‚**
- é€šè¿‡å‘[**HackTricks**](https://github.com/carlospolop/hacktricks)å’Œ[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) githubä»“åº“æäº¤PRæ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚

</details>

<figure><img src="../../.gitbook/assets/image (3) (1) (1) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

\
ä½¿ç”¨[**Trickest**](https://trickest.com/?utm\_campaign=hacktrics\&utm\_medium=banner\&utm\_source=hacktricks)å¯ä»¥è½»æ¾æ„å»ºå’Œ**è‡ªåŠ¨åŒ–å·¥ä½œæµç¨‹**ï¼Œä½¿ç”¨ä¸–ç•Œä¸Š**æœ€å…ˆè¿›**çš„ç¤¾åŒºå·¥å…·ã€‚\
ç«‹å³è·å–è®¿é—®æƒé™ï¼š

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

## åœ¨iOSè®¾å¤‡ä¸Šå®‰è£…Burpè¯ä¹¦

ä¸ºäº†è¿›è¡Œå®‰å…¨çš„Webæµé‡åˆ†æå’ŒiOSè®¾å¤‡ä¸Šçš„SSLç»‘å®šï¼Œå¯ä»¥é€šè¿‡**Burp Mobile Assistant**æˆ–æ‰‹åŠ¨é…ç½®æ¥åˆ©ç”¨Burp Suiteã€‚ä»¥ä¸‹æ˜¯ä¸¤ç§æ–¹æ³•çš„ç®€è¦æŒ‡å—ï¼š

### ä½¿ç”¨Burp Mobile Assistantè¿›è¡Œè‡ªåŠ¨å®‰è£…

**Burp Mobile Assistant**ç®€åŒ–äº†Burpè¯ä¹¦çš„å®‰è£…è¿‡ç¨‹ã€ä»£ç†é…ç½®å’ŒSSL Pinningã€‚è¯¦ç»†æŒ‡å¯¼å¯åœ¨[PortSwiggerçš„å®˜æ–¹æ–‡æ¡£](https://portswigger.net/burp/documentation/desktop/tools/mobile-assistant/installing)ä¸­æ‰¾åˆ°ã€‚

### æ‰‹åŠ¨å®‰è£…æ­¥éª¤

1. **ä»£ç†é…ç½®ï¼š** é¦–å…ˆåœ¨iPhoneçš„Wi-Fiè®¾ç½®ä¸­å°†Burpè®¾ç½®ä¸ºä»£ç†ã€‚
2. **è¯ä¹¦ä¸‹è½½ï¼š** åœ¨è®¾å¤‡çš„æµè§ˆå™¨ä¸­å¯¼èˆªè‡³`http://burp`ä»¥ä¸‹è½½è¯ä¹¦ã€‚
3. **è¯ä¹¦å®‰è£…ï¼š** é€šè¿‡**è®¾ç½®** > **é€šç”¨** > **VPNå’Œè®¾å¤‡ç®¡ç†**å®‰è£…ä¸‹è½½çš„é…ç½®æ–‡ä»¶ï¼Œç„¶ååœ¨**è¯ä¹¦ä¿¡ä»»è®¾ç½®**ä¸‹å¯ç”¨å¯¹PortSwigger CAçš„ä¿¡ä»»ã€‚

### é…ç½®æ‹¦æˆªä»£ç†

è¯¥è®¾ç½®ä½¿iOSè®¾å¤‡ä¸äº’è”ç½‘ä¹‹é—´çš„æµé‡åˆ†æé€šè¿‡Burpè¿›è¡Œï¼Œéœ€è¦æ”¯æŒå®¢æˆ·ç«¯åˆ°å®¢æˆ·ç«¯æµé‡çš„Wi-Fiç½‘ç»œã€‚å¦‚æœä¸å¯ç”¨ï¼Œé€šè¿‡usbmuxdçš„USBè¿æ¥å¯ä»¥ä½œä¸ºæ›¿ä»£æ–¹æ³•ã€‚PortSwiggerçš„æ•™ç¨‹æä¾›äº†å…³äº[è®¾å¤‡é…ç½®](https://support.portswigger.net/customer/portal/articles/1841108-configuring-an-ios-device-to-work-with-burp)å’Œ[è¯ä¹¦å®‰è£…](https://support.portswigger.net/customer/portal/articles/1841109-installing-burp-s-ca-certificate-in-an-ios-device)çš„è¯¦ç»†è¯´æ˜ã€‚

### é’ˆå¯¹è¶Šç‹±è®¾å¤‡çš„é«˜çº§é…ç½®

å¯¹äºè¶Šç‹±è®¾å¤‡çš„ç”¨æˆ·ï¼Œé€šè¿‡USBä¸Šçš„SSHï¼ˆé€šè¿‡**iproxy**ï¼‰æä¾›äº†ä¸€ç§ç›´æ¥é€šè¿‡Burpè·¯ç”±æµé‡çš„æ–¹æ³•ï¼š

1. **å»ºç«‹SSHè¿æ¥ï¼š** ä½¿ç”¨iproxyå°†SSHè½¬å‘åˆ°æœ¬åœ°ä¸»æœºï¼Œå…è®¸iOSè®¾å¤‡è¿æ¥åˆ°è¿è¡ŒBurpçš„è®¡ç®—æœºã€‚

```bash
iproxy 2222 22
```
2. **è¿œç¨‹ç«¯å£è½¬å‘ï¼š** å°†iOSè®¾å¤‡çš„ç«¯å£8080è½¬å‘åˆ°è®¡ç®—æœºçš„localhostï¼Œä»¥ä¾¿ç›´æ¥è®¿é—®Burpçš„ç•Œé¢ã€‚

```bash
ssh -R 8080:localhost:8080 root@localhost -p 2222
```
3. **å…¨å±€ä»£ç†è®¾ç½®ï¼š** æœ€åï¼Œé…ç½®iOSè®¾å¤‡çš„Wi-Fiè®¾ç½®ä½¿ç”¨æ‰‹åŠ¨ä»£ç†ï¼Œå°†æ‰€æœ‰Webæµé‡å¼•å¯¼é€šè¿‡Burpã€‚

### å®Œæ•´çš„ç½‘ç»œç›‘æ§/å—…æ¢

å¯ä»¥ä½¿ç”¨**Wireshark**é«˜æ•ˆåœ°ç›‘æ§éHTTPè®¾å¤‡æµé‡ï¼Œè¿™æ˜¯ä¸€ç§èƒ½å¤Ÿæ•è·æ‰€æœ‰å½¢å¼æ•°æ®æµé‡çš„å·¥å…·ã€‚å¯¹äºiOSè®¾å¤‡ï¼Œé€šè¿‡åˆ›å»ºè¿œç¨‹è™šæ‹Ÿæ¥å£å®ç°å®æ—¶æµé‡ç›‘æ§ï¼Œè¿™ä¸€è¿‡ç¨‹åœ¨[æ­¤Stack Overflowå¸–å­](https://stackoverflow.com/questions/9555403/capturing-mobile-phone-traffic-on-wireshark/33175819#33175819)ä¸­æœ‰è¯¦ç»†è¯´æ˜ã€‚åœ¨å¼€å§‹ä¹‹å‰ï¼Œéœ€è¦åœ¨macOSç³»ç»Ÿä¸Šå®‰è£…**Wireshark**ã€‚

è¯¥è¿‡ç¨‹æ¶‰åŠå‡ ä¸ªå…³é”®æ­¥éª¤ï¼š

1. é€šè¿‡USBåœ¨iOSè®¾å¤‡å’ŒmacOSä¸»æœºä¹‹é—´å»ºç«‹è¿æ¥ã€‚
2. ç¡®å®šiOSè®¾å¤‡çš„**UDID**ï¼Œè¿™æ˜¯è¿›è¡Œæµé‡ç›‘æ§çš„å¿…è¦æ­¥éª¤ã€‚å¯ä»¥é€šè¿‡åœ¨macOSç»ˆç«¯ä¸­æ‰§è¡Œå‘½ä»¤æ¥å®Œæˆï¼š
```bash
$ rvictl -s <UDID>
Starting device <UDID> [SUCCEEDED] with interface rvi0
```
3. åœ¨ç¡®å®šäº†UDIDä¹‹åï¼Œéœ€è¦æ‰“å¼€**Wireshark**ï¼Œå¹¶é€‰æ‹©â€œrvi0â€æ¥å£è¿›è¡Œæ•°æ®æ•è·ã€‚
4. å¯¹äºç›®æ ‡ç›‘æ§ï¼Œä¾‹å¦‚æ•è·ä¸ç‰¹å®šIPåœ°å€ç›¸å…³çš„HTTPæµé‡ï¼Œå¯ä»¥ä½¿ç”¨Wiresharkçš„æ•è·è¿‡æ»¤å™¨ï¼š

## åœ¨æ¨¡æ‹Ÿå™¨ä¸­å®‰è£…Burpè¯ä¹¦

* **å¯¼å‡ºBurpè¯ä¹¦**

åœ¨_Proxy_ --> _Options_ --> _Export CA certificate_ --> _Certificate in DER format_

![](<../../.gitbook/assets/image (459).png>)

* **æ‹–æ”¾**è¯ä¹¦åˆ°æ¨¡æ‹Ÿå™¨ä¸­
* **åœ¨æ¨¡æ‹Ÿå™¨ä¸­**è½¬åˆ°_Settings_ --> _General_ --> _Profile_ --> _PortSwigger CA_ï¼Œå¹¶**éªŒè¯è¯ä¹¦**
* **åœ¨æ¨¡æ‹Ÿå™¨ä¸­**è½¬åˆ°_Settings_ --> _General_ --> _About_ --> _Certificate Trust Settings_ï¼Œå¹¶**å¯ç”¨PortSwigger CA**

![](<../../.gitbook/assets/image (460).png>)

**æ­å–œï¼Œæ‚¨å·²æˆåŠŸåœ¨iOSæ¨¡æ‹Ÿå™¨ä¸­é…ç½®äº†Burp CAè¯ä¹¦**

{% hint style="info" %}
**iOSæ¨¡æ‹Ÿå™¨å°†ä½¿ç”¨MacOSçš„ä»£ç†é…ç½®ã€‚**
{% endhint %}

### MacOSä»£ç†é…ç½®

é…ç½®Burpä½œä¸ºä»£ç†çš„æ­¥éª¤ï¼š

* è½¬åˆ°_System Preferences_ --> _Network_ --> _Advanced_
* åœ¨_Proxies_é€‰é¡¹å¡ä¸­æ ‡è®°_Web Proxy (HTTP)_å’Œ_Secure Web Proxy (HTTPS)_
* åœ¨ä¸¤ä¸ªé€‰é¡¹ä¸­é…ç½®_127.0.0.1:8080_

![](<../../.gitbook/assets/image (461).png>)

* ç‚¹å‡»_**Ok**_ï¼Œç„¶åç‚¹å‡»_**Apply**_

<figure><img src="../../.gitbook/assets/image (3) (1) (1) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

\
ä½¿ç”¨[**Trickest**](https://trickest.com/?utm\_campaign=hacktrics\&utm\_medium=banner\&utm\_source=hacktricks)å¯ä»¥è½»æ¾æ„å»ºå’Œ**è‡ªåŠ¨åŒ–å·¥ä½œæµ**ï¼Œä½¿ç”¨ä¸–ç•Œä¸Š**æœ€å…ˆè¿›**çš„ç¤¾åŒºå·¥å…·ã€‚\
ç«‹å³è·å–è®¿é—®æƒé™ï¼š

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

<details>

<summary><strong>ä»é›¶å¼€å§‹å­¦ä¹ AWSé»‘å®¢æŠ€æœ¯ï¼Œæˆä¸ºä¸“å®¶</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

æ”¯æŒHackTricksçš„å…¶ä»–æ–¹å¼ï¼š

* å¦‚æœæ‚¨æƒ³åœ¨HackTricksä¸­çœ‹åˆ°æ‚¨çš„**å…¬å¸å¹¿å‘Š**æˆ–**ä¸‹è½½PDFæ ¼å¼çš„HackTricks**ï¼Œè¯·æŸ¥çœ‹[**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* è·å–[**å®˜æ–¹PEASS & HackTrickså‘¨è¾¹äº§å“**](https://peass.creator-spring.com)
* å‘ç°[**PEASSå®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬çš„ç‹¬å®¶[NFTs](https://opensea.io/collection/the-peass-family)æ”¶è—å“
* **åŠ å…¥** ğŸ’¬ [**Discordç¾¤**](https://discord.gg/hRep4RUj7f) æˆ– [**ç”µæŠ¥ç¾¤**](https://t.me/peass) æˆ–åœ¨**Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks\_live)**ä¸Šå…³æ³¨**æˆ‘ä»¬ã€‚
* é€šè¿‡å‘[**HackTricks**](https://github.com/carlospolop/hacktricks)å’Œ[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) githubä»“åº“æäº¤PRæ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚

</details>
