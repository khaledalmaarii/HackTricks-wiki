# Izdvajanje privilegija iz kompajlirane aplikacije

<details>

<summary><strong>NauÄite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Drugi naÄini podrÅ¡ke HackTricks-u:

* Ako Å¾elite da vidite **vaÅ¡u kompaniju reklamiranu na HackTricks-u** ili **preuzmete HackTricks u PDF formatu** proverite [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Nabavite [**zvaniÄni PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Otkrijte [**The PEASS Family**](https://opensea.io/collection/the-peass-family), naÅ¡u kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* **PridruÅ¾ite se** ğŸ’¬ [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili nas **pratite** na **Twitter-u** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Podelite svoje hakovanje trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>


SaÅ¾etak stranice [https://mas.owasp.org/MASTG/tests/ios/MASVS-PLATFORM/MASTG-TEST-0069/#review-entitlements-embedded-in-the-compiled-app-binary](https://mas.owasp.org/MASTG/tests/ios/MASVS-PLATFORM/MASTG-TEST-0069/#review-entitlements-embedded-in-the-compiled-app-binary)

### **Izdvajanje privilegija i mobilnih provizionih fajlova**

Kada se bavite IPA aplikacijom ili instaliranom aplikacijom na jailbroken ureÄ‘aju, moÅ¾da neÄ‡e biti moguÄ‡e pronaÄ‡i `.entitlements` fajlove ili `embedded.mobileprovision` fajl direktno. MeÄ‘utim, privilegije mogu biti izdvojene iz binarne aplikacije, prateÄ‡i postupke opisane u poglavlju "iOS Basic Security Testing", posebno u odeljku "Acquiring the App Binary".

ÄŒak i sa enkriptovanim binarnim fajlovima, odreÄ‘eni koraci mogu biti primenjeni za izdvajanje ovih fajlova. Ukoliko ovi koraci ne uspeju, moÅ¾e biti potrebno koristiti alate kao Å¡to su Clutch (ako je kompatibilan sa verzijom iOS-a), frida-ios-dump ili sliÄni alati za dekripciju i izdvajanje aplikacije.

#### **Izdvajanje Entitlements Plist fajla iz binarne aplikacije**

Sa binarnom aplikacijom dostupnom na raÄunaru, **binwalk** se moÅ¾e koristiti za izdvajanje svih XML fajlova. SledeÄ‡a komanda demonstrira kako to uraditi:
```bash
$ binwalk -e -y=xml ./Telegram\ X

DECIMAL       HEXADECIMAL     DESCRIPTION
--------------------------------------------------------------------------------
1430180       0x15D2A4        XML document, version: "1.0"
1458814       0x16427E        XML document, version: "1.0"
```
Alternativno, **radare2** se moÅ¾e koristiti za tiho pokretanje komande i izlazak, pretraÅ¾ujuÄ‡i sve stringove u binarnom fajlu aplikacije koji sadrÅ¾e "PropertyList":
```bash
$ r2 -qc 'izz~PropertyList' ./Telegram\ X

0x0015d2a4 ascii <?xml version="1.0" encoding="UTF-8" standalone="yes"?>...
0x0016427d ascii H<?xml version="1.0" encoding="UTF-8"?>...
```
Oba metoda, binwalk i radare2, omoguÄ‡avaju ekstrakciju `plist` datoteka, a pregled prvog (0x0015d2a4) otkriva uspeÅ¡no vraÄ‡anje [originalne datoteke privilegija iz Telegrama](https://github.com/peter-iakovlev/Telegram-iOS/blob/77ee5c4dabdd6eb5f1e2ff76219edf7e18b45c00/Telegram-iOS/Telegram-iOS-AppStoreLLC.entitlements).

Za binarne aplikacije pristupljene na jailbroken ureÄ‘ajima (npr. putem SSH-a), komanda **grep** sa opcijom `-a, --text` moÅ¾e se koristiti za tretiranje svih datoteka kao ASCII teksta:
```bash
$ grep -a -A 5 'PropertyList' /var/containers/Bundle/Application/...
```
PrilagoÄ‘avanje zastavice `-A num, --after-context=num` omoguÄ‡ava prikazivanje viÅ¡e ili manje linija. Ova metoda je primenjiva Äak i na Å¡ifrovane binarne aplikacije i proverena je na viÅ¡e aplikacija iz App Store-a. Prethodno pomenuti alati takoÄ‘e se mogu koristiti na jailbroken iOS ureÄ‘ajima u sliÄne svrhe.

**Napomena**: Direktno koriÅ¡Ä‡enje komande `strings` nije preporuÄljivo za ovaj zadatak zbog ograniÄenja u pronalaÅ¾enju relevantnih informacija. Umesto toga, preporuÄuje se koriÅ¡Ä‡enje grep sa zastavicom `-a` na binarnom fajlu ili koriÅ¡Ä‡enje radare2 (`izz`)/rabin2 (`-zz`) za efikasnije rezultate.

<details>

<summary><strong>NauÄite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Drugi naÄini podrÅ¡ke HackTricks-u:

* Ako Å¾elite da vidite **vaÅ¡u kompaniju reklamiranu u HackTricks-u** ili **preuzmete HackTricks u PDF formatu**, proverite [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Nabavite [**zvaniÄni PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Otkrijte [**The PEASS Family**](https://opensea.io/collection/the-peass-family), naÅ¡u kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* **PridruÅ¾ite se** ğŸ’¬ [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili nas **pratite** na **Twitter-u** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Podelite svoje hakovanje trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>
