# WyodrÄ™bnianie uprawnieÅ„ z skompilowanej aplikacji

<details>

<summary><strong>Naucz siÄ™ hakowaÄ‡ AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Inne sposoby wsparcia HackTricks:

* JeÅ›li chcesz zobaczyÄ‡ swojÄ… **firmÄ™ reklamowanÄ… w HackTricks** lub **pobraÄ‡ HackTricks w formacie PDF**, sprawdÅº [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* ZdobÄ…dÅº [**oficjalne gadÅ¼ety PEASS & HackTricks**](https://peass.creator-spring.com)
* Odkryj [**RodzinÄ™ PEASS**](https://opensea.io/collection/the-peass-family), naszÄ… kolekcjÄ™ ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* **DoÅ‚Ä…cz do** ğŸ’¬ [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **Å›ledÅº** nas na **Twitterze** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Podziel siÄ™ swoimi sztuczkami hakerskimi, przesyÅ‚ajÄ…c PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>


Podsumowanie strony [https://mas.owasp.org/MASTG/tests/ios/MASVS-PLATFORM/MASTG-TEST-0069/#review-entitlements-embedded-in-the-compiled-app-binary](https://mas.owasp.org/MASTG/tests/ios/MASVS-PLATFORM/MASTG-TEST-0069/#review-entitlements-embedded-in-the-compiled-app-binary)

### **WyodrÄ™bnianie uprawnieÅ„ i plikÃ³w Mobile Provision**

Podczas pracy z plikiem IPA aplikacji lub zainstalowanej aplikacji na urzÄ…dzeniu z jailbreakiem, moÅ¼e byÄ‡ niemoÅ¼liwe znalezienie bezpoÅ›rednio plikÃ³w `.entitlements` lub `embedded.mobileprovision`. Jednak listy wÅ‚aÅ›ciwoÅ›ci uprawnieÅ„ nadal moÅ¼na wyodrÄ™bniÄ‡ z binarnego pliku aplikacji, postÄ™pujÄ…c zgodnie z procedurami opisanymi w rozdziale "iOS Basic Security Testing", a w szczegÃ³lnoÅ›ci w sekcji "Acquiring the App Binary".

Nawet w przypadku zaszyfrowanych binarnych plikÃ³w, moÅ¼na zastosowaÄ‡ pewne kroki, aby wyodrÄ™bniÄ‡ te pliki. JeÅ›li te kroki zawiodÄ…, mogÄ… byÄ‡ wymagane narzÄ™dzia takie jak Clutch (jeÅ›li jest kompatybilny z wersjÄ… iOS), frida-ios-dump lub podobne narzÄ™dzia do odszyfrowania i wyodrÄ™bnienia aplikacji.

#### **WyodrÄ™bnianie pliku Entitlements Plist z binarnej aplikacji**

Po uzyskaniu dostÄ™pu do binarnego pliku aplikacji na komputerze, moÅ¼na uÅ¼yÄ‡ narzÄ™dzia **binwalk**, aby wyodrÄ™bniÄ‡ wszystkie pliki XML. PoniÅ¼sza komenda pokazuje, jak to zrobiÄ‡:
```bash
$ binwalk -e -y=xml ./Telegram\ X

DECIMAL       HEXADECIMAL     DESCRIPTION
--------------------------------------------------------------------------------
1430180       0x15D2A4        XML document, version: "1.0"
1458814       0x16427E        XML document, version: "1.0"
```
Alternatywnie, moÅ¼na uÅ¼yÄ‡ **radare2**, aby cicho uruchomiÄ‡ polecenie i zakoÅ„czyÄ‡, wyszukujÄ…c wszystkie ciÄ…gi znakÃ³w w binarnym pliku aplikacji, ktÃ³re zawierajÄ… "PropertyList":
```bash
$ r2 -qc 'izz~PropertyList' ./Telegram\ X

0x0015d2a4 ascii <?xml version="1.0" encoding="UTF-8" standalone="yes"?>...
0x0016427d ascii H<?xml version="1.0" encoding="UTF-8"?>...
```
Obie metody, binwalk i radare2, umoÅ¼liwiajÄ… ekstrakcjÄ™ plikÃ³w `plist`, a inspekcja pierwszego z nich (0x0015d2a4) ujawnia udane odzyskanie [oryginalnego pliku entitlements z Telegramu](https://github.com/peter-iakovlev/Telegram-iOS/blob/77ee5c4dabdd6eb5f1e2ff76219edf7e18b45c00/Telegram-iOS/Telegram-iOS-AppStoreLLC.entitlements).

Dla binarnych aplikacji dostÄ™pnych na jailbroken urzÄ…dzeniach (np. za pomocÄ… SSH), moÅ¼na uÅ¼yÄ‡ polecenia **grep** z flagÄ… `-a, --text`, aby traktowaÄ‡ wszystkie pliki jako tekst ASCII:
```bash
$ grep -a -A 5 'PropertyList' /var/containers/Bundle/Application/...
```
Dostosowanie flagi `-A num, --after-context=num` pozwala na wyÅ›wietlanie wiÄ™kszej lub mniejszej liczby linii. Ta metoda jest wykonalna nawet dla zaszyfrowanych plikÃ³w binarnych aplikacji i zostaÅ‚a zweryfikowana na wielu aplikacjach ze sklepu App Store. NarzÄ™dzia wspomniane wczeÅ›niej mogÄ… rÃ³wnieÅ¼ byÄ‡ uÅ¼ywane na jailbroken urzÄ…dzeniach iOS w celach podobnych.

**Uwaga**: BezpoÅ›rednie uÅ¼ycie polecenia `strings` nie jest zalecane do tego zadania ze wzglÄ™du na jego ograniczenia w znajdowaniu istotnych informacji. Zamiast tego, zaleca siÄ™ uÅ¼ycie grep z flagÄ… `-a` na pliku binarnym lub skorzystanie z narzÄ™dzi radare2 (`izz`)/rabin2 (`-zz`) dla bardziej efektywnych wynikÃ³w.

<details>

<summary><strong>Naucz siÄ™ hakowaÄ‡ AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Inne sposoby wsparcia HackTricks:

* JeÅ›li chcesz zobaczyÄ‡ **reklamÄ™ swojej firmy w HackTricks** lub **pobraÄ‡ HackTricks w formacie PDF**, sprawdÅº [**PLAN SUBSKRYPCYJNY**](https://github.com/sponsors/carlospolop)!
* ZdobÄ…dÅº [**oficjalne gadÅ¼ety PEASS & HackTricks**](https://peass.creator-spring.com)
* Odkryj [**RodzinÄ™ PEASS**](https://opensea.io/collection/the-peass-family), naszÄ… kolekcjÄ™ ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* **DoÅ‚Ä…cz do** ğŸ’¬ [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **Å›ledÅº** nas na **Twitterze** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Podziel siÄ™ swoimi sztuczkami hakerskimi, przesyÅ‚ajÄ…c PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
