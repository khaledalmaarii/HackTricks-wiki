# iOS Fridaé…ç½®

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>â˜ï¸ HackTricksäº‘ â˜ï¸</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ğŸ¦ æ¨ç‰¹ ğŸ¦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ğŸ™ï¸ Twitch ğŸ™ï¸</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ğŸ¥ Youtube ğŸ¥</strong></a></summary>

* ä½ åœ¨ä¸€ä¸ª**ç½‘ç»œå®‰å…¨å…¬å¸**å·¥ä½œå—ï¼Ÿä½ æƒ³åœ¨HackTricksä¸­çœ‹åˆ°ä½ çš„**å…¬å¸å¹¿å‘Š**å—ï¼Ÿæˆ–è€…ä½ æƒ³è¦**è·å–PEASSçš„æœ€æ–°ç‰ˆæœ¬æˆ–ä¸‹è½½PDFæ ¼å¼çš„HackTricks**å—ï¼Ÿè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼
* å‘ç°æˆ‘ä»¬çš„ç‹¬å®¶[**NFTs**](https://opensea.io/collection/the-peass-family)æ”¶è—å“[**The PEASS Family**](https://opensea.io/collection/the-peass-family)
* è·å–[**å®˜æ–¹PEASSå’ŒHackTrickså‘¨è¾¹äº§å“**](https://peass.creator-spring.com)
* **åŠ å…¥**[**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discordç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ–è€… [**telegramç¾¤ç»„**](https://t.me/peass) æˆ–è€… **å…³æ³¨**æˆ‘åœ¨**Twitter**ä¸Šçš„[**ğŸ¦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks\_live)**ã€‚**
* **é€šè¿‡å‘**[**hacktricks repo**](https://github.com/carlospolop/hacktricks) **å’Œ**[**hacktricks-cloud repo**](https://github.com/carlospolop/hacktricks-cloud) **æäº¤PRæ¥åˆ†äº«ä½ çš„é»‘å®¢æŠ€å·§ã€‚**

</details>

## å®‰è£…Frida

åœ¨è¶Šç‹±è®¾å¤‡çš„**Cydia/Sileo**åº”ç”¨ä¸­ï¼Œé€šè¿‡è¿›å…¥**Manage -> Sources -> Edit -> Add**å¹¶è¾“å…¥[**https://build.frida.re** ](https://build.frida.re)æ¥æ·»åŠ Fridaçš„å­˜å‚¨åº“ã€‚è¿™å°†åœ¨æºåˆ—è¡¨ä¸­æ·»åŠ ä¸€ä¸ªæ–°çš„æºã€‚è¿›å…¥F**rida** **æº**ï¼Œç°åœ¨ä½ åº”è¯¥**å®‰è£…** **Frida**è½¯ä»¶åŒ…ã€‚

![](https://miro.medium.com/max/614/0\*qSD26kBtgt\_UIZk1.png)

å¦‚æœä½ ä½¿ç”¨çš„æ˜¯**Corellium**ï¼Œä½ éœ€è¦ä»[https://github.com/frida/frida/releases](https://github.com/frida/frida/releases)ä¸‹è½½Fridaçš„å‘å¸ƒç‰ˆæœ¬ï¼ˆ`frida-gadget-[yourversion]-ios-universal.dylib.gz`ï¼‰ï¼Œå¹¶è§£å‹ç¼©å¹¶å¤åˆ¶åˆ°Fridaè¦æ±‚çš„dylibä½ç½®ï¼Œä¾‹å¦‚ï¼š`/Users/[youruser]/.cache/frida/gadget-ios.dylib`

å®‰è£…å®Œæˆåï¼Œä½ å¯ä»¥åœ¨ä½ çš„ç”µè„‘ä¸Šä½¿ç”¨å‘½ä»¤**`frida-ls-devices`**å¹¶æ£€æŸ¥è®¾å¤‡æ˜¯å¦å‡ºç°ï¼ˆä½ çš„ç”µè„‘éœ€è¦èƒ½å¤Ÿè®¿é—®å®ƒï¼‰ã€‚\
è¿˜å¯ä»¥æ‰§è¡Œ**`frida-ps -Uia`**æ¥æ£€æŸ¥æ‰‹æœºä¸Šæ­£åœ¨è¿è¡Œçš„è¿›ç¨‹ã€‚

## æ— éœ€è¶Šç‹±è®¾å¤‡å’Œæ— éœ€ä¿®è¡¥åº”ç”¨ç¨‹åºçš„Frida

æŸ¥çœ‹è¿™ç¯‡å…³äºå¦‚ä½•åœ¨éè¶Šç‹±è®¾å¤‡ä¸Šä½¿ç”¨Fridaè€Œæ— éœ€ä¿®è¡¥åº”ç”¨ç¨‹åºçš„åšå®¢æ–‡ç« ï¼š[https://mrbypass.medium.com/unlocking-potential-exploring-frida-objection-on-non-jailbroken-devices-without-application-ed0367a84f07](https://mrbypass.medium.com/unlocking-potential-exploring-frida-objection-on-non-jailbroken-devices-without-application-ed0367a84f07)

## å®‰è£…Fridaå®¢æˆ·ç«¯

å®‰è£…**fridaå·¥å…·**ï¼š
```bash
pip install frida-tools
pip install frida
```
å®‰è£…äº†FridaæœåŠ¡å™¨å¹¶ä¸”è®¾å¤‡æ­£åœ¨è¿è¡Œå’Œè¿æ¥ä¸­ï¼Œ**æ£€æŸ¥**å®¢æˆ·ç«¯æ˜¯å¦**å·¥ä½œ**ï¼š
```bash
frida-ls-devices  # List devices
frida-ps -Uia     # Get running processes
```
## Fridaè·Ÿè¸ª

Frida is a dynamic instrumentation toolkit that allows you to inject JavaScript code into running processes. It is commonly used for reverse engineering, debugging, and dynamic analysis of mobile applications. In this section, we will discuss how to configure Frida for iOS pentesting.

Fridaæ˜¯ä¸€ä¸ªåŠ¨æ€æ’æ¡©å·¥å…·åŒ…ï¼Œå…è®¸æ‚¨å°†JavaScriptä»£ç æ³¨å…¥åˆ°æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹ä¸­ã€‚å®ƒé€šå¸¸ç”¨äºç§»åŠ¨åº”ç”¨ç¨‹åºçš„é€†å‘å·¥ç¨‹ã€è°ƒè¯•å’ŒåŠ¨æ€åˆ†æã€‚åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†è®¨è®ºå¦‚ä½•é…ç½®Fridaç”¨äºiOSæ¸—é€æµ‹è¯•ã€‚

### Setting up Frida Server on iOS

To use Frida on iOS, you need to set up Frida Server on the target device. Follow the steps below to configure Frida Server:

1. Jailbreak the iOS device or use a jailbroken device.
2. Install the Frida package from the Cydia repository.
3. Open a terminal and run the following command to start Frida Server:

   ```bash
   frida-server -l 0.0.0.0
   ```

   This will start Frida Server and listen on all available network interfaces.

4. Make sure the device and the machine running Frida have network connectivity.

### Connecting to Frida Server from the Host Machine

Once Frida Server is running on the iOS device, you can connect to it from your host machine using the Frida command-line tools or the Frida Python bindings. Follow the steps below to connect to Frida Server:

1. Install the Frida command-line tools or the Frida Python bindings on your host machine.
2. Open a terminal and run the following command to connect to Frida Server:

   ```bash
   frida-ps -H <device_ip_address>
   ```

   Replace `<device_ip_address>` with the IP address of the iOS device running Frida Server.

3. If the connection is successful, you will see a list of running processes on the iOS device.

### Injecting JavaScript Code into a Process

Once you are connected to Frida Server, you can inject JavaScript code into a running process on the iOS device. Follow the steps below to inject JavaScript code:

1. Identify the process ID (PID) of the target process using the `frida-ps` command.
2. Open a terminal and run the following command to inject JavaScript code into the target process:

   ```bash
   frida -H <device_ip_address> -p <pid> -l <script.js>
   ```

   Replace `<device_ip_address>` with the IP address of the iOS device running Frida Server, `<pid>` with the process ID of the target process, and `<script.js>` with the path to the JavaScript code file.

3. If the injection is successful, the JavaScript code will be executed in the target process.

### Conclusion

Configuring Frida for iOS pentesting involves setting up Frida Server on the target device and connecting to it from the host machine. Once connected, you can inject JavaScript code into running processes on the iOS device for reverse engineering, debugging, and dynamic analysis. Frida is a powerful tool that can greatly enhance your iOS pentesting capabilities.
```bash
# Trace all methods of all classes
frida-trace -U <program> -m "*[* *]"

# Trace all methods with the word "authentication" from classes that start with "NE"
frida-trace -U <program> -m "*[NE* *authentication*]"
```
### è·å–æ‰€æœ‰ç±»å’Œæ–¹æ³•

* è·å–**æ‰€æœ‰**å¯ç”¨çš„**ç±»**ï¼ˆé€šè¿‡å­—ç¬¦ä¸²è¿›è¡Œè¿‡æ»¤ï¼‰

{% code title="/tmp/script.js" %}
```javascript
// frida -U <program> -l /tmp/script.js

var filterClass = "filterstring";

if (ObjC.available) {
for (var className in ObjC.classes) {
if (ObjC.classes.hasOwnProperty(className)) {
if (!filterClass || className.includes(filterClass)) {
console.log(className);
}
}
}
} else {
console.log("Objective-C runtime is not available.");
}
```
{% endcode %}

* è·å–ä¸€ä¸ªç±»çš„æ‰€æœ‰æ–¹æ³•ï¼ˆé€šè¿‡å­—ç¬¦ä¸²è¿‡æ»¤ï¼‰

{% code title="/tmp/script.js" %}
```javascript
// frida -U <program> -l /tmp/script.js

var specificClass = "YourClassName";
var filterMethod = "filtermethod";

if (ObjC.available) {
if (ObjC.classes.hasOwnProperty(specificClass)) {
var methods = ObjC.classes[specificClass].$ownMethods;
for (var i = 0; i < methods.length; i++) {
if (!filterMethod || methods[i].includes(filterClass)) {
console.log(specificClass + ': ' + methods[i]);
}
}
} else {
console.log("Class not found.");
}
} else {
console.log("Objective-C runtime is not available.");
}
```
{% endcode %}

## Frida Android æ•™ç¨‹

{% content-ref url="../android-app-pentesting/frida-tutorial/" %}
[frida-tutorial](../android-app-pentesting/frida-tutorial/)
{% endcontent-ref %}

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>â˜ï¸ HackTricks äº‘ â˜ï¸</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ğŸ¦ Twitter ğŸ¦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ğŸ™ï¸ Twitch ğŸ™ï¸</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ğŸ¥ Youtube ğŸ¥</strong></a></summary>

* ä½ åœ¨ä¸€å®¶ **ç½‘ç»œå®‰å…¨å…¬å¸** å·¥ä½œå—ï¼Ÿä½ æƒ³åœ¨ HackTricks ä¸­ **å®£ä¼ ä½ çš„å…¬å¸** å—ï¼Ÿæˆ–è€…ä½ æƒ³è·å¾— **PEASS çš„æœ€æ–°ç‰ˆæœ¬æˆ–ä¸‹è½½ HackTricks çš„ PDF** å—ï¼Ÿè¯·æŸ¥çœ‹ [**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼
* å‘ç°æˆ‘ä»¬çš„ç‹¬å®¶ [**NFTs**](https://opensea.io/collection/the-peass-family) é›†åˆ [**The PEASS Family**](https://opensea.io/collection/the-peass-family)
* è·å– [**å®˜æ–¹ PEASS & HackTricks å•†å“**](https://peass.creator-spring.com)
* **åŠ å…¥** [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**telegram ç¾¤ç»„**](https://t.me/peass) æˆ– **å…³æ³¨** æˆ‘çš„ **Twitter** [**ğŸ¦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks\_live)**ã€‚**
* **é€šè¿‡å‘** [**hacktricks ä»“åº“**](https://github.com/carlospolop/hacktricks) **å’Œ** [**hacktricks-cloud ä»“åº“**](https://github.com/carlospolop/hacktricks-cloud) **æäº¤ PR æ¥åˆ†äº«ä½ çš„é»‘å®¢æŠ€å·§ã€‚**

</details>
