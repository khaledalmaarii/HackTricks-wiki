# Extensions d'application iOS

<details>

<summary><strong>Apprenez le piratage AWS de z√©ro √† h√©ros avec</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (Expert Red Team AWS HackTricks)</strong></a><strong>!</strong></summary>

Autres fa√ßons de soutenir HackTricks :

- Si vous souhaitez voir votre **entreprise annonc√©e dans HackTricks** ou **t√©l√©charger HackTricks en PDF**, consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop) !
- Obtenez le [**swag officiel PEASS & HackTricks**](https://peass.creator-spring.com)
- D√©couvrez [**La famille PEASS**](https://opensea.io/collection/the-peass-family), notre collection exclusive de [**NFT**](https://opensea.io/collection/the-peass-family)
- **Rejoignez le** üí¨ [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe Telegram**](https://t.me/peass) ou **suivez** moi sur **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
- **Partagez vos astuces de piratage en soumettant des PR aux** [**HackTricks**](https://github.com/carlospolop/hacktricks) et [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) d√©p√¥ts GitHub.

</details>

Les extensions d'application am√©liorent les fonctionnalit√©s des applications en leur permettant d'interagir avec d'autres applications ou le syst√®me, en fournissant des fonctionnalit√©s ou du contenu personnalis√©. Ces extensions comprennent :

- **Clavier personnalis√©** : Offre un clavier unique dans toutes les applications, rempla√ßant le clavier iOS par d√©faut.
- **Partager** : Permet de partager sur les r√©seaux sociaux ou avec d'autres directement.
- **Aujourd'hui (Widgets)** : Fournit du contenu ou effectue des t√¢ches rapidement √† partir de la vue Aujourd'hui du Centre de notifications.

Lorsqu'un utilisateur interagit avec ces extensions, telles que le partage de texte √† partir d'une application h√¥te, l'extension traite cette entr√©e dans son contexte, en exploitant les informations partag√©es pour effectuer sa t√¢che, comme d√©taill√© dans la documentation d'Apple.

### **Consid√©rations de s√©curit√©**

Les aspects cl√©s de s√©curit√© comprennent :

- Les extensions et leurs applications conteneurs communiquent via une communication inter-processus, pas directement.
- Le **widget Aujourd'hui** est unique en ce sens qu'il peut demander √† son application de s'ouvrir via une m√©thode sp√©cifique.
- L'acc√®s aux donn√©es partag√©es est autoris√© dans un conteneur priv√©, mais l'acc√®s direct est restreint.
- Certaines API, y compris HealthKit, sont interdites aux extensions d'application, qui ne peuvent pas non plus d√©marrer des t√¢ches de longue dur√©e, acc√©der √† l'appareil photo ou au microphone, sauf pour les extensions iMessage.

### Analyse statique

#### **Identification des extensions d'application**

Pour trouver des extensions d'application dans le code source, recherchez `NSExtensionPointIdentifier` dans Xcode ou inspectez le bundle d'application pour les fichiers `.appex` indiquant des extensions. Sans code source, utilisez grep ou SSH pour localiser ces identifiants dans le bundle d'application.

#### **Types de donn√©es pris en charge**

V√©rifiez le fichier `Info.plist` d'une extension pour `NSExtensionActivationRule` afin d'identifier les types de donn√©es pris en charge. Cette configuration garantit que seuls les types de donn√©es compatibles d√©clenchent l'extension dans les applications h√¥tes.

#### **Partage de donn√©es**

Le partage de donn√©es entre une application et son extension n√©cessite un conteneur partag√©, configur√© via les "Groupes d'applications" et accessible via `NSUserDefaults`. Cet espace partag√© est n√©cessaire pour les transferts en arri√®re-plan initi√©s par les extensions.

#### **Restriction des extensions**

Les applications peuvent restreindre certains types d'extensions, en particulier les claviers personnalis√©s, garantissant que la manipulation de donn√©es sensibles est conforme aux protocoles de s√©curit√©.

### Analyse dynamique

L'analyse dynamique implique :

- **Inspection des √©l√©ments partag√©s** : Accrochez-vous √† `NSExtensionContext - inputItems` pour voir les types de donn√©es partag√©es et leurs origines.
- **Identification des extensions** : D√©couvrez quelles extensions traitent vos donn√©es en observant les m√©canismes internes, comme `NSXPCConnection`.

Des outils comme `frida-trace` peuvent aider √† comprendre les processus sous-jacents, en particulier pour ceux int√©ress√©s par les d√©tails techniques de la communication inter-processus.

## R√©f√©rences
* [https://mas.owasp.org/MASTG/iOS/0x06h-Testing-Platform-Interaction/](https://mas.owasp.org/MASTG/iOS/0x06h-Testing-Platform-Interaction/)
* [https://mas.owasp.org/MASTG/tests/ios/MASVS-PLATFORM/MASTG-TEST-0072/](https://mas.owasp.org/MASTG/tests/ios/MASVS-PLATFORM/MASTG-TEST-0072/) 

<details>

<summary><strong>Apprenez le piratage AWS de z√©ro √† h√©ros avec</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (Expert Red Team AWS HackTricks)</strong></a><strong>!</strong></summary>

Autres fa√ßons de soutenir HackTricks :

- Si vous souhaitez voir votre **entreprise annonc√©e dans HackTricks** ou **t√©l√©charger HackTricks en PDF**, consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop) !
- Obtenez le [**swag officiel PEASS & HackTricks**](https://peass.creator-spring.com)
- D√©couvrez [**La famille PEASS**](https://opensea.io/collection/the-peass-family), notre collection exclusive de [**NFT**](https://opensea.io/collection/the-peass-family)
- **Rejoignez le** üí¨ [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe Telegram**](https://t.me/peass) ou **suivez** moi sur **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
- **Partagez vos astuces de piratage en soumettant des PR aux** [**HackTricks**](https://github.com/carlospolop/hacktricks) et [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) d√©p√¥ts GitHub.

</details>
