# Rozszerzenia aplikacji iOS

<details>

<summary><strong>Naucz si hakowa AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Inne sposoby wsparcia HackTricks:

* Jeli chcesz zobaczy swoj **firm reklamowan w HackTricks** lub **pobra HackTricks w formacie PDF**, sprawd藕 [**PLAN SUBSKRYPCJI**](https://github.com/sponsors/carlospolop)!
* Zdobd藕 [**oficjalne gad偶ety PEASS & HackTricks**](https://peass.creator-spring.com)
* Odkryj [**Rodzin PEASS**](https://opensea.io/collection/the-peass-family), nasz kolekcj ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* **Docz do**  [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **led藕** nas na **Twitterze**  [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Podziel si swoimi sztuczkami hakerskimi, przesyajc PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repozytori贸w GitHub.

</details>

Rozszerzenia aplikacji zwikszaj funkcjonalno aplikacji, umo偶liwiajc im interakcj z innymi aplikacjami lub systemem, dostarczajc niestandardowe funkcje lub treci. Te rozszerzenia obejmuj:

- **Niestandardowa klawiatura**: Oferuje unikaln klawiatur we wszystkich aplikacjach, zastpujc domyln klawiatur iOS.
- **Udostpnianie**: Umo偶liwia udostpnianie w sieciach spoecznociowych lub bezporednio innym osobom.
- **Dzisiaj (Wid偶ety)**: Dostarcza treci lub wykonuje zadania szybko z widoku "Dzisiaj" w Centrum powiadomie.

Kiedy u偶ytkownik korzysta z tych rozszerze, na przykad udostpnia tekst z aplikacji gospodarza, rozszerzenie przetwarza ten wejciowy tekst w swoim kontekcie, wykorzystujc udostpnione informacje do wykonania swojego zadania, jak szczeg贸owo opisano w dokumentacji Apple.

### **Aspekty bezpieczestwa**

Kluczowe aspekty bezpieczestwa obejmuj:

- Rozszerzenia i aplikacje, w kt贸rych si znajduj, komunikuj si za pomoc komunikacji midzyprocesowej, a nie bezporednio.
- **Wid偶et Dzisiaj** jest wyjtkowy, poniewa偶 mo偶e za偶da otwarcia swojej aplikacji za pomoc okrelonej metody.
- Dostp do udostpnionych danych jest dozwolony w ramach prywatnego kontenera, ale bezporedni dostp jest ograniczony.
- Pewne interfejsy API, w tym HealthKit, s niedostpne dla rozszerze aplikacji, kt贸re r贸wnie偶 nie mog uruchamia dugotrwaych zada, uzyskiwa dostpu do aparatu ani mikrofonu, z wyjtkiem rozszerze iMessage.

### Analiza statyczna

#### **Identyfikowanie rozszerze aplikacji**

Aby znale藕 rozszerzenia aplikacji w kodzie 藕r贸dowym, wyszukaj `NSExtensionPointIdentifier` w Xcode lub sprawd藕 paczk aplikacji pod ktem plik贸w `.appex`, wskazujcych na rozszerzenia. Bez kodu 藕r贸dowego u偶yj grep lub SSH, aby zlokalizowa te identyfikatory w paczce aplikacji.

#### **Obsugiwane typy danych**

Sprawd藕 plik `Info.plist` rozszerzenia, aby zidentyfikowa obsugiwane typy danych za pomoc `NSExtensionActivationRule`. Ta konfiguracja zapewnia, 偶e tylko zgodne typy danych wywouj rozszerzenie w aplikacjach gospodarza.

#### **Udostpnianie danych**

Udostpnianie danych midzy aplikacj a jej rozszerzeniem wymaga wsp贸lnego kontenera, skonfigurowanego za pomoc "Grup aplikacji" i dostpnego za porednictwem `NSUserDefaults`. To wsp贸lne miejsce jest niezbdne do transfer贸w w tle inicjowanych przez rozszerzenia.

#### **Ograniczanie rozszerze**

Aplikacje mog ogranicza okrelone typy rozszerze, zwaszcza niestandardowe klawiatury, zapewniajc zgodno z protokoami bezpieczestwa w obszarze obsugi poufnych danych.

### Analiza dynamiczna

Analiza dynamiczna obejmuje:

- **Inspekcj udostpnionych element贸w**: Podcz si do `NSExtensionContext - inputItems`, aby zobaczy typy danych i pochodzenie udostpnionych informacji.
- **Identyfikowanie rozszerze**: Odkryj, kt贸re rozszerzenia przetwarzaj twoje dane, obserwujc wewntrzne mechanizmy, takie jak `NSXPCConnection`.

Narzdzia takie jak `frida-trace` mog pom贸c w zrozumieniu podstawowych proces贸w, zwaszcza dla tych, kt贸rzy interesuj si technicznymi szczeg贸ami komunikacji midzyprocesowej.

## Referencje
* [https://mas.owasp.org/MASTG/iOS/0x06h-Testing-Platform-Interaction/](https://mas.owasp.org/MASTG/iOS/0x06h-Testing-Platform-Interaction/)
* [https://mas.owasp.org/MASTG/tests/ios/MASVS-PLATFORM/MASTG-TEST-0072/](https://mas.owasp.org/MASTG/tests/ios/MASVS-PLATFORM/MASTG-TEST-0072/)

<details>

<summary><strong>Naucz si hakowa AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Inne sposoby wsparcia HackTricks:

* Jeli chcesz zobaczy swoj **firm reklamowan w HackTricks** lub **pobra HackTricks w formacie PDF**, sprawd藕 [**PLAN SUBSKRYPCJI**](https://github.com/sponsors/carlospolop)!
* Zdobd藕 [**oficjalne gad偶ety PEASS & HackTricks**](https://peass.creator-spring.com)
* Odkryj [**Rodzin PEASS**](https://opensea.io/collection/the-peass-family), nasz kolekcj ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* **Docz do**  [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **led藕** nas na **Twitterze**  [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Podziel si swoimi sztuczkami hakerskimi, przesyajc PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repozytori贸w GitHub.

</details>
