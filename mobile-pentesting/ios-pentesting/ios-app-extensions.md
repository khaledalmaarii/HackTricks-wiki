# iOS App Extensions

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

Ekstenzije aplikacija poboljÅ¡avaju funkcionalnost aplikacija omoguÄ‡avajuÄ‡i im interakciju sa drugim aplikacijama ili sistemom, pruÅ¾ajuÄ‡i prilagoÄ‘ene funkcije ili sadrÅ¾aj. Ove ekstenzije ukljuÄuju:

- **PrilagoÄ‘ena tastatura**: Nudi jedinstvenu tastaturu u svim aplikacijama, zamenjujuÄ‡i podrazumevanu iOS tastaturu.
- **Deljenje**: OmoguÄ‡ava deljenje na druÅ¡tvenim mreÅ¾ama ili sa drugima direktno.
- **Danas (Widgeti)**: PruÅ¾a sadrÅ¾aj ili obavlja zadatke brzo iz pregleda Danas u centru za obaveÅ¡tenja.

Kada korisnik koristi ove ekstenzije, kao Å¡to je deljenje teksta iz matiÄne aplikacije, ekstenzija obraÄ‘uje ovaj unos unutar svog konteksta, koristeÄ‡i deljene informacije za obavljanje svog zadatka, kako je detaljno opisano u Apple-ovoj dokumentaciji.

### **Bezbednosna razmatranja**

KljuÄni bezbednosni aspekti ukljuÄuju:

- Ekstenzije i njihove matiÄne aplikacije komuniciraju putem meÄ‘uprocesne komunikacije, a ne direktno.
- **Danas widget** je jedinstven po tome Å¡to moÅ¾e zatraÅ¾iti od svoje aplikacije da se otvori putem specifiÄne metode.
- Pristup deljenim podacima je dozvoljen unutar privatnog kontejnera, ali je direktan pristup ograniÄen.
- OdreÄ‘eni API-ji, ukljuÄujuÄ‡i HealthKit, su zabranjeni za ekstenzije aplikacija, koje takoÄ‘e ne mogu zapoÄeti dugotrajne zadatke, pristupiti kameri ili mikrofonu, osim za iMessage ekstenzije.

### Staticka analiza

#### **Identifikacija ekstenzija aplikacija**

Da biste pronaÅ¡li ekstenzije aplikacija u izvor kodu, pretraÅ¾ujte `NSExtensionPointIdentifier` u Xcode-u ili pregledajte paket aplikacije za `.appex` datoteke koje oznaÄavaju ekstenzije. Bez izvornog koda, koristite grep ili SSH da locirate ove identifikatore unutar paketa aplikacije.

#### **PodrÅ¾ani tipovi podataka**

Proverite `Info.plist` datoteku ekstenzije za `NSExtensionActivationRule` kako biste identifikovali podrÅ¾ane tipove podataka. Ova postavka osigurava da samo kompatibilni tipovi podataka aktiviraju ekstenziju u matiÄnim aplikacijama.

#### **Deljenje podataka**

Deljenje podataka izmeÄ‘u aplikacije i njene ekstenzije zahteva zajedniÄki kontejner, postavljen putem "App Groups" i pristupljen kroz `NSUserDefaults`. Ovaj zajedniÄki prostor je neophodan za pozadinske transfere koje pokreÄ‡u ekstenzije.

#### **OgraniÄavanje ekstenzija**

Aplikacije mogu ograniÄiti odreÄ‘ene tipove ekstenzija, posebno prilagoÄ‘ene tastature, osiguravajuÄ‡i da rukovanje osetljivim podacima bude u skladu sa bezbednosnim protokolima.

### DinamiÄka analiza

DinamiÄka analiza ukljuÄuje:

- **Ispitivanje deljenih stavki**: Hook u `NSExtensionContext - inputItems` da biste videli deljene tipove podataka i poreklo.
- **Identifikacija ekstenzija**: Otkrijte koje ekstenzije obraÄ‘uju vaÅ¡e podatke posmatrajuÄ‡i unutraÅ¡nje mehanizme, poput `NSXPCConnection`.

Alati poput `frida-trace` mogu pomoÄ‡i u razumevanju osnovnih procesa, posebno za one koji su zainteresovani za tehniÄke detalje meÄ‘uprocesne komunikacije.

## Reference
* [https://mas.owasp.org/MASTG/iOS/0x06h-Testing-Platform-Interaction/](https://mas.owasp.org/MASTG/iOS/0x06h-Testing-Platform-Interaction/)
* [https://mas.owasp.org/MASTG/tests/ios/MASVS-PLATFORM/MASTG-TEST-0072/](https://mas.owasp.org/MASTG/tests/ios/MASVS-PLATFORM/MASTG-TEST-0072/)

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
