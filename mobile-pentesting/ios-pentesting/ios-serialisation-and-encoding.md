<details>

<summary><strong>ä»é›¶å¼€å§‹å­¦ä¹ AWSé»‘å®¢æŠ€æœ¯ï¼Œæˆä¸º</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTEï¼ˆHackTricks AWSçº¢é˜Ÿä¸“å®¶ï¼‰</strong></a><strong>ï¼</strong></summary>

æ”¯æŒHackTricksçš„å…¶ä»–æ–¹å¼ï¼š

* å¦‚æœæ‚¨æƒ³çœ‹åˆ°æ‚¨çš„**å…¬å¸åœ¨HackTricksä¸­åšå¹¿å‘Š**æˆ–**ä¸‹è½½PDFæ ¼å¼çš„HackTricks**ï¼Œè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* è·å–[**å®˜æ–¹PEASS & HackTrickså‘¨è¾¹äº§å“**](https://peass.creator-spring.com)
* æ¢ç´¢[**PEASSå®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬çš„ç‹¬å®¶[**NFTs**](https://opensea.io/collection/the-peass-family)
* **åŠ å…¥** ğŸ’¬ [**Discordç¾¤**](https://discord.gg/hRep4RUj7f) æˆ– [**ç”µæŠ¥ç¾¤**](https://t.me/peass) æˆ– **å…³æ³¨**æˆ‘ä»¬çš„**Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)**ã€‚**
* é€šè¿‡å‘[**HackTricks**](https://github.com/carlospolop/hacktricks)å’Œ[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) githubä»“åº“æäº¤PRæ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚

</details>

ä»£ç å’Œæ›´å¤šä¿¡æ¯è¯·æŸ¥çœ‹[https://mas.owasp.org/MASTG/iOS/0x06h-Testing-Platform-Interaction/#object-persistence](https://mas.owasp.org/MASTG/iOS/0x06h-Testing-Platform-Interaction/#object-persistence).

## iOSå¼€å‘ä¸­çš„å¯¹è±¡åºåˆ—åŒ–

åœ¨iOSä¸­ï¼Œ**å¯¹è±¡åºåˆ—åŒ–**æ¶‰åŠå°†å¯¹è±¡è½¬æ¢ä¸ºä¸€ç§å¯ä»¥è½»æ¾å­˜å‚¨æˆ–ä¼ è¾“çš„æ ¼å¼ï¼Œç„¶ååœ¨éœ€è¦æ—¶ä»è¯¥æ ¼å¼é‡å»ºå¯¹è±¡ã€‚ä¸¤ä¸ªä¸»è¦åè®®ï¼Œ**`NSCoding`**å’Œ**`NSSecureCoding`**ï¼Œä¸ºObjective-Cæˆ–`NSObject`å­ç±»æä¾›äº†ä¾¿åˆ©ï¼Œå…è®¸å°†å¯¹è±¡åºåˆ—åŒ–ä¸º**`NSData`**ï¼Œè¿™æ˜¯ä¸€ä¸ªåŒ…è£…å­—èŠ‚ç¼“å†²åŒºçš„æ ¼å¼ã€‚

### **`NSCoding`** å®ç°
è¦å®ç°`NSCoding`ï¼Œä¸€ä¸ªç±»å¿…é¡»ç»§æ‰¿è‡ª`NSObject`æˆ–æ ‡è®°ä¸º`@objc`ã€‚è¯¥åè®®è¦æ±‚å®ç°ä¸¤ä¸ªæ–¹æ³•æ¥å¯¹å®ä¾‹å˜é‡è¿›è¡Œç¼–ç å’Œè§£ç ï¼š
```swift
class CustomPoint: NSObject, NSCoding {
var x: Double = 0.0
var name: String = ""

func encode(with aCoder: NSCoder) {
aCoder.encode(x, forKey: "x")
aCoder.encode(name, forKey: "name")
}

required convenience init?(coder aDecoder: NSCoder) {
guard let name = aDecoder.decodeObject(forKey: "name") as? String else { return nil }
self.init(x: aDecoder.decodeDouble(forKey: "x"), name: name)
}
}
```
### **é€šè¿‡`NSSecureCoding`å¢å¼ºå®‰å…¨æ€§**
ä¸ºäº†å‡è½»æ”»å‡»è€…å‘å·²æ„å»ºå¯¹è±¡ä¸­æ³¨å…¥æ•°æ®çš„æ¼æ´ï¼Œ**`NSSecureCoding`**æä¾›äº†ä¸€ä¸ªå¢å¼ºçš„åè®®ã€‚ç¬¦åˆ`NSSecureCoding`çš„ç±»åœ¨è§£ç è¿‡ç¨‹ä¸­å¿…é¡»éªŒè¯å¯¹è±¡çš„ç±»å‹ï¼Œç¡®ä¿åªæœ‰é¢„æœŸçš„å¯¹è±¡ç±»å‹è¢«å®ä¾‹åŒ–ã€‚ç„¶è€Œï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè™½ç„¶`NSSecureCoding`å¢å¼ºäº†ç±»å‹å®‰å…¨æ€§ï¼Œä½†å®ƒå¹¶ä¸åŠ å¯†æ•°æ®æˆ–ç¡®ä¿æ•°æ®å®Œæ•´æ€§ï¼Œå› æ­¤éœ€è¦é¢å¤–çš„æªæ–½æ¥ä¿æŠ¤æ•æ„Ÿä¿¡æ¯ï¼š
```swift
static var supportsSecureCoding: Bool {
return true
}

let obj = decoder.decodeObject(of: MyClass.self, forKey: "myKey")
```
## ä½¿ç”¨ `NSKeyedArchiver` è¿›è¡Œæ•°æ®å½’æ¡£
`NSKeyedArchiver` åŠå…¶å¯¹åº”çš„ `NSKeyedUnarchiver` å…è®¸å°†å¯¹è±¡ç¼–ç åˆ°æ–‡ä»¶ä¸­ï¼Œç„¶ååœ¨ä»¥åæ£€ç´¢å®ƒä»¬ã€‚è¿™ç§æœºåˆ¶å¯¹äºæŒä¹…åŒ–å¯¹è±¡å¾ˆæœ‰ç”¨ï¼š
```swift
NSKeyedArchiver.archiveRootObject(customPoint, toFile: "/path/to/archive")
let customPoint = NSKeyedUnarchiver.unarchiveObjectWithFile("/path/to/archive") as? CustomPoint
```
### ä½¿ç”¨ `Codable` è¿›è¡Œç®€åŒ–åºåˆ—åŒ–
Swift çš„ `Codable` åè®®ç»“åˆäº† `Decodable` å’Œ `Encodable`ï¼Œç®€åŒ–äº†è¯¸å¦‚ `String`ã€`Int`ã€`Double` ç­‰å¯¹è±¡çš„ç¼–ç å’Œè§£ç ï¼Œæ— éœ€é¢å¤–åŠªåŠ›ï¼š
```swift
struct CustomPointStruct: Codable {
var x: Double
var name: String
}
```
è¿™ç§æ–¹æ³•æ”¯æŒç›´æ¥å°†æ•°æ®åºåˆ—åŒ–åˆ°å±æ€§åˆ—è¡¨å’ŒJSONï¼Œå¢å¼ºäº†Swiftåº”ç”¨ç¨‹åºä¸­çš„æ•°æ®å¤„ç†èƒ½åŠ›ã€‚

## JSONå’ŒXMLç¼–ç æ›¿ä»£æ–¹æ¡ˆ
é™¤äº†åŸç”Ÿæ”¯æŒå¤–ï¼Œè¿˜æœ‰å‡ ä¸ªç¬¬ä¸‰æ–¹åº“æä¾›äº†JSONå’ŒXMLç¼–ç /è§£ç åŠŸèƒ½ï¼Œæ¯ä¸ªåº“éƒ½æœ‰å…¶è‡ªå·±çš„æ€§èƒ½ç‰¹å¾å’Œå®‰å…¨è€ƒè™‘ã€‚ç‰¹åˆ«æ˜¯è¦ä»”ç»†é€‰æ‹©è¿™äº›åº“ï¼Œä»¥å‡è½»æ¼æ´ï¼Œå¦‚é€šè¿‡é…ç½®è§£æå™¨æ¥é˜²æ­¢å¤–éƒ¨å®ä½“å¤„ç†çš„XXEï¼ˆXMLå¤–éƒ¨å®ä½“ï¼‰æ”»å‡»ã€‚

### å®‰å…¨è€ƒè™‘
åœ¨åºåˆ—åŒ–æ•°æ®æ—¶ï¼Œç‰¹åˆ«æ˜¯è¦å†™å…¥æ–‡ä»¶ç³»ç»Ÿæ—¶ï¼Œå¿…é¡»è­¦æƒ•å¯èƒ½åŒ…å«æ•æ„Ÿä¿¡æ¯ã€‚å¦‚æœåºåˆ—åŒ–æ•°æ®è¢«æ‹¦æˆªæˆ–å¤„ç†ä¸å½“ï¼Œå¯èƒ½ä¼šå¯¼è‡´åº”ç”¨ç¨‹åºé¢ä¸´æœªç»æˆæƒçš„æ“ä½œæˆ–æ•°æ®æ³„éœ²ç­‰é£é™©ã€‚å»ºè®®å¯¹åºåˆ—åŒ–æ•°æ®è¿›è¡ŒåŠ å¯†å’Œç­¾åä»¥å¢å¼ºå®‰å…¨æ€§ã€‚

## å‚è€ƒèµ„æ–™
* [https://mas.owasp.org/MASTG/iOS/0x06h-Testing-Platform-Interaction/#object-persistence](https://mas.owasp.org/MASTG/iOS/0x06h-Testing-Platform-Interaction/#object-persistence)

<details>

<summary><strong>ä»é›¶å¼€å§‹å­¦ä¹ AWSé»‘å®¢æŠ€æœ¯ï¼Œæˆä¸ºä¸“å®¶</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

æ”¯æŒHackTricksçš„å…¶ä»–æ–¹å¼ï¼š

* å¦‚æœæ‚¨æƒ³çœ‹åˆ°æ‚¨çš„**å…¬å¸åœ¨HackTricksä¸­åšå¹¿å‘Š**æˆ–**ä¸‹è½½PDFæ ¼å¼çš„HackTricks**ï¼Œè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* è·å–[**å®˜æ–¹PEASS & HackTrickså‘¨è¾¹äº§å“**](https://peass.creator-spring.com)
* æ¢ç´¢[**PEASSå®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬çš„ç‹¬å®¶[**NFTs**](https://opensea.io/collection/the-peass-family)
* **åŠ å…¥** ğŸ’¬ [**Discordç¾¤**](https://discord.gg/hRep4RUj7f) æˆ– [**ç”µæŠ¥ç¾¤**](https://t.me/peass) æˆ–åœ¨**Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)**ä¸Š**å…³æ³¨æˆ‘ä»¬ã€‚
* é€šè¿‡å‘[**HackTricks**](https://github.com/carlospolop/hacktricks)å’Œ[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) githubä»“åº“æäº¤PRæ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚

</details>
