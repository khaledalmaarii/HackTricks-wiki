{% hint style="success" %}
U캜ite i ve쬭ajte AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
U캜ite i ve쬭ajte GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Podr쬴te HackTricks</summary>

* Proverite [**planove pretplate**](https://github.com/sponsors/carlospolop)!
* **Pridru쬴te se** 游눫 [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili **pratite** nas na **Twitteru** 游냕 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Podelite hakerske trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>
{% endhint %}

Kod i vi코e informacija na [https://mas.owasp.org/MASTG/iOS/0x06h-Testing-Platform-Interaction/#object-persistence](https://mas.owasp.org/MASTG/iOS/0x06h-Testing-Platform-Interaction/#object-persistence).

## Serijalizacija objekata u iOS razvoju

U iOS-u, **serijalizacija objekata** podrazumeva konvertovanje objekata u format koji se mo쬰 lako skladi코titi ili prenositi, a zatim njihovo rekonstrukciju iz ovog formata kada je to potrebno. Dva glavna protokola, **`NSCoding`** i **`NSSecureCoding`**, olak코avaju ovaj proces za Objective-C ili `NSObject` podklase, omogu캖avaju캖i objektima da budu serijalizovani u **`NSData`**, format koji obavija bajt bafer.

### **`NSCoding`** Implementacija
Da bi se implementirao `NSCoding`, klasa mora nasle캠ivati od `NSObject` ili biti ozna캜ena kao `@objc`. Ovaj protokol zahteva implementaciju dva metoda za kodiranje i dekodiranje instancnih varijabli:
```swift
class CustomPoint: NSObject, NSCoding {
var x: Double = 0.0
var name: String = ""

func encode(with aCoder: NSCoder) {
aCoder.encode(x, forKey: "x")
aCoder.encode(name, forKey: "name")
}

required convenience init?(coder aDecoder: NSCoder) {
guard let name = aDecoder.decodeObject(forKey: "name") as? String else { return nil }
self.init(x: aDecoder.decodeDouble(forKey: "x"), name: name)
}
}
```
### **Pove캖anje bezbednosti sa `NSSecureCoding`**
Da bi se umanjile ranjivosti gde napada캜i ubacuju podatke u ve캖 konstruisane objekte, **`NSSecureCoding`** nudi pobolj코ani protokol. Klase koje se pridr쬬vaju `NSSecureCoding` moraju da verifikuju tip objekata tokom dekodiranja, osiguravaju캖i da se instanciraju samo o캜ekivani tipovi objekata. Me캠utim, va쬹o je napomenuti da, iako `NSSecureCoding` pobolj코ava bezbednost tipa, ne enkriptuje podatke niti osigurava njihovu integritet, 코to zahteva dodatne mere za za코titu osetljivih informacija:
```swift
static var supportsSecureCoding: Bool {
return true
}

let obj = decoder.decodeObject(of: MyClass.self, forKey: "myKey")
```
## Data Archiving with `NSKeyedArchiver`
`NSKeyedArchiver` i njegov pandan, `NSKeyedUnarchiver`, omogu캖avaju kodiranje objekata u datoteku i kasnije njihovo preuzimanje. Ovaj mehanizam je koristan za trajno 캜uvanje objekata:
```swift
NSKeyedArchiver.archiveRootObject(customPoint, toFile: "/path/to/archive")
let customPoint = NSKeyedUnarchiver.unarchiveObjectWithFile("/path/to/archive") as? CustomPoint
```
### Kori코캖enje `Codable` za pojednostavljenu serializaciju
Swiftov `Codable` protokol kombinuje `Decodable` i `Encodable`, olak코avaju캖i kodiranje i dekodiranje objekata kao 코to su `String`, `Int`, `Double`, itd., bez dodatnog truda:
```swift
struct CustomPointStruct: Codable {
var x: Double
var name: String
}
```
Ovaj pristup podr쬬va jednostavnu serijalizaciju ka i od property lista i JSON-a, pobolj코avaju캖i rukovanje podacima u Swift aplikacijama.

## JSON i XML kodiranje alternativama
Pored nativne podr코ke, nekoliko biblioteka tre캖ih strana nudi mogu캖nosti kodiranja/dekodiranja JSON-a i XML-a, svaka sa svojim karakteristikama performansi i bezbednosnim razmatranjima. Va쬹o je pa쬷jivo odabrati ove biblioteke, posebno kako bi se umanjile ranjivosti poput XXE (XML spolja코njih entiteta) napada konfigurisanjem parsera da spre캜e obradu spolja코njih entiteta.

### Bezbednosna razmatranja
Kada se serijalizuju podaci, posebno u sistem datoteka, va쬹o je biti oprezan u vezi sa potencijalnim uklju캜ivanjem osetljivih informacija. Serijalizovani podaci, ako budu presretnuti ili nepravilno obra캠eni, mogu izlo쬴ti aplikacije rizicima kao 코to su neovla코캖ene radnje ili curenje podataka. Preporu캜uje se enkripcija i potpisivanje serijalizovanih podataka kako bi se pobolj코ala bezbednost.

## Reference
* [https://mas.owasp.org/MASTG/iOS/0x06h-Testing-Platform-Interaction/#object-persistence](https://mas.owasp.org/MASTG/iOS/0x06h-Testing-Platform-Interaction/#object-persistence)

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** 游눫 [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** 游냕 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
