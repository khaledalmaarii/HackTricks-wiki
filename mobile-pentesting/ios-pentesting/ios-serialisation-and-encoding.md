<details>

<summary><strong>Naucz si hakowa AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Inne sposoby wsparcia HackTricks:

* Jeli chcesz zobaczy swoj **firm reklamowan w HackTricks** lub **pobra HackTricks w formacie PDF**, sprawd藕 [**PLAN SUBSKRYPCJI**](https://github.com/sponsors/carlospolop)!
* Zdobd藕 [**oficjalne gad偶ety PEASS & HackTricks**](https://peass.creator-spring.com)
* Odkryj [**Rodzin PEASS**](https://opensea.io/collection/the-peass-family), nasz kolekcj ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* **Docz do**  [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **led藕** nas na **Twitterze**  [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Podziel si swoimi sztuczkami hakerskimi, przesyajc PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>

Kod i wicej informacji na stronie [https://mas.owasp.org/MASTG/iOS/0x06h-Testing-Platform-Interaction/#object-persistence](https://mas.owasp.org/MASTG/iOS/0x06h-Testing-Platform-Interaction/#object-persistence).

## Serializacja obiekt贸w w rozwoju iOS

W iOS, **serializacja obiekt贸w** polega na konwertowaniu obiekt贸w na format, kt贸ry mo偶na atwo przechowywa lub przesya, a nastpnie odtwarzaniu ich z tego formatu, gdy s potrzebne. Dwa g贸wne protokoy, **`NSCoding`** i **`NSSecureCoding`**, uatwiaj ten proces dla klas Objective-C lub `NSObject`, pozwalajc na serializacj obiekt贸w do formatu **`NSData`**, kt贸ry zawiera bufor bajt贸w.

### Implementacja **`NSCoding`**
Aby zaimplementowa `NSCoding`, klasa musi dziedziczy po `NSObject` lub by oznaczona jako `@objc`. Ten protok贸 wymaga implementacji dw贸ch metod do kodowania i dekodowania zmiennych instancji:
```swift
class CustomPoint: NSObject, NSCoding {
var x: Double = 0.0
var name: String = ""

func encode(with aCoder: NSCoder) {
aCoder.encode(x, forKey: "x")
aCoder.encode(name, forKey: "name")
}

required convenience init?(coder aDecoder: NSCoder) {
guard let name = aDecoder.decodeObject(forKey: "name") as? String else { return nil }
self.init(x: aDecoder.decodeDouble(forKey: "x"), name: name)
}
}
```
### **Wzmacnianie bezpieczestwa za pomoc `NSSecureCoding`**
Aby zagodzi podatnoci, w kt贸rych atakujcy wstrzykuj dane do ju偶 skonstruowanych obiekt贸w, **`NSSecureCoding`** oferuje ulepszony protok贸. Klasy zgodne z `NSSecureCoding` musz zweryfikowa typ obiekt贸w podczas dekodowania, zapewniajc, 偶e s tworzone tylko oczekiwane typy obiekt贸w. Jednak wa偶ne jest zauwa偶enie, 偶e chocia偶 `NSSecureCoding` zwiksza bezpieczestwo typ贸w, nie szyfruje danych ani nie zapewnia ich integralnoci, co wymaga dodatkowych rodk贸w ochrony poufnych informacji:
```swift
static var supportsSecureCoding: Bool {
return true
}

let obj = decoder.decodeObject(of: MyClass.self, forKey: "myKey")
```
## Archiwizacja danych za pomoc `NSKeyedArchiver`
`NSKeyedArchiver` i jego odpowiednik, `NSKeyedUnarchiver`, umo偶liwiaj kodowanie obiekt贸w do pliku i p贸藕niejsze ich odtworzenie. Mechanizm ten jest przydatny do trwaego przechowywania obiekt贸w:
```swift
NSKeyedArchiver.archiveRootObject(customPoint, toFile: "/path/to/archive")
let customPoint = NSKeyedUnarchiver.unarchiveObjectWithFile("/path/to/archive") as? CustomPoint
```
### U偶ywanie `Codable` do uproszczonej serializacji
Protok贸 `Codable` w jzyku Swift czy `Decodable` i `Encodable`, uatwiajc kodowanie i dekodowanie obiekt贸w takich jak `String`, `Int`, `Double`, itp., bez dodatkowego wysiku:
```swift
struct CustomPointStruct: Codable {
var x: Double
var name: String
}
```
To podejcie obsuguje proste serializowanie do i z listy waciwoci oraz JSON, poprawiajc obsug danych w aplikacjach Swift.

## Alternatywy dla kodowania JSON i XML
Opr贸cz natywnej obsugi, istnieje kilka bibliotek innych firm, kt贸re oferuj mo偶liwo kodowania/odkodowywania JSON i XML, z r贸偶nymi charakterystykami wydajnociowymi i uwzgldniajcymi bezpieczestwo. Wa偶ne jest dokadne wybieranie tych bibliotek, zwaszcza w celu zminimalizowania podatnoci na ataki XXE (XML External Entities) poprzez konfiguracj parser贸w w celu zapobiegania przetwarzaniu zewntrznych jednostek.

### Uwagi dotyczce bezpieczestwa
Podczas serializowania danych, zwaszcza do systemu plik贸w, wa偶ne jest zachowanie czujnoci wobec potencjalnego uwzgldnienia poufnych informacji. Serializowane dane, jeli zostan przechwycone lub nieprawidowo obsu偶one, mog narazi aplikacje na ryzyko takie jak nieautoryzowane dziaania lub wyciek danych. Zaleca si szyfrowanie i podpisywanie serializowanych danych w celu poprawy bezpieczestwa.


## Odwoania
* [https://mas.owasp.org/MASTG/iOS/0x06h-Testing-Platform-Interaction/#object-persistence](https://mas.owasp.org/MASTG/iOS/0x06h-Testing-Platform-Interaction/#object-persistence)

<details>

<summary><strong>Naucz si hakowa AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Inne sposoby wsparcia HackTricks:

* Jeli chcesz zobaczy swoj **firm reklamowan w HackTricks** lub **pobra HackTricks w formacie PDF**, sprawd藕 [**PLAN SUBSKRYPCJI**](https://github.com/sponsors/carlospolop)!
* Zdobd藕 [**oficjalne gad偶ety PEASS & HackTricks**](https://peass.creator-spring.com)
* Odkryj [**Rodzin PEASS**](https://opensea.io/collection/the-peass-family), nasz kolekcj ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* **Docz do**  [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **led藕** nas na **Twitterze**  [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Podziel si swoimi sztuczkami hakerskimi, przesyajc PR do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
