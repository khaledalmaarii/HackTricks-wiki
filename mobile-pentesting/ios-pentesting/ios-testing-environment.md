# iOS Test OrtamÄ±

<details>

<summary><strong>AWS hacklemeyi sÄ±fÄ±rdan kahramana Ã¶ÄŸrenin</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ±)</strong></a><strong> ile!</strong></summary>

HackTricks'Ä± desteklemenin diÄŸer yollarÄ±:

* **Åirketinizi HackTricks'te reklamÄ±nÄ± gÃ¶rmek istiyorsanÄ±z** veya **HackTricks'i PDF olarak indirmek istiyorsanÄ±z** [**ABONELÄ°K PLANLARI**](https://github.com/sponsors/carlospolop)'na gÃ¶z atÄ±n!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* [**PEASS Ailesi'ni**](https://opensea.io/collection/the-peass-family) keÅŸfedin, Ã¶zel [**NFT'lerimiz**](https://opensea.io/collection/the-peass-family) koleksiyonumuz
* **KatÄ±lÄ±n** ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) veya bizi **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks\_live)'da **takip edin**.
* **Hacking pÃ¼f noktalarÄ±nÄ±zÄ± paylaÅŸarak PR'lar gÃ¶ndererek** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarÄ±na katkÄ±da bulunun.

</details>

## Apple GeliÅŸtirici ProgramÄ±

Bir **provisioning kimliÄŸi**, bir Apple geliÅŸtirici hesabÄ±yla iliÅŸkilendirilen genel ve Ã¶zel anahtarlarÄ±n bir koleksiyonudur. UygulamalarÄ± **imzalamak** iÃ§in **99$/yÄ±l** Ã¶deyerek **Apple GeliÅŸtirici ProgramÄ±'na** kaydolmanÄ±z gerekmektedir. Bu olmadan, fiziksel bir cihazda kaynak kodundan uygulamalarÄ± Ã§alÄ±ÅŸtÄ±ramazsÄ±nÄ±z. Bunun iÃ§in baÅŸka bir seÃ§enek ise **jailbreak yapÄ±lmÄ±ÅŸ bir cihaz** kullanmaktÄ±r.

Xcode 7.2'den itibaren Apple, gerÃ§ek bir iPhone Ã¼zerinde uygulamanÄ±zÄ± yazÄ±p test etmenizi saÄŸlayan **Ã¼cretsiz bir iOS geliÅŸtirme provisioning profili oluÅŸturma seÃ§eneÄŸi** sunmaktadÄ±r. _Xcode_ --> _Tercihler_ --> _Hesaplar_ --> _+_ (Yeni Appli ID ekleyin) --> _OluÅŸturulan Apple ID'ye tÄ±klayÄ±n_ --> _SertifikalarÄ± YÃ¶net_ --> _+_ (Apple GeliÅŸtirme) --> _Tamam_\
\_\_ArdÄ±ndan, uygulamanÄ±zÄ± iPhone'da Ã§alÄ±ÅŸtÄ±rmak iÃ§in Ã¶nce **iPhonu bilgisayara gÃ¼venilir olarak iÅŸaretlemeniz gerekmektedir**. Daha sonra, uygulamayÄ± Xcode'dan mobil cihazda Ã§alÄ±ÅŸtÄ±rmayÄ± deneyebilirsiniz, ancak bir hata alacaksÄ±nÄ±z. Bu durumda _Ayarlar_ --> _Genel_ --> _Profiller ve Cihaz YÃ¶netimi_ --> GÃ¼venilir olmayan profili seÃ§in ve "**GÃ¼ven**"e tÄ±klayÄ±n.

**AynÄ± imzalama sertifikasÄ± ile imzalanmÄ±ÅŸ uygulamalar, anahtarlÄ±k Ã¶ÄŸeleri gibi kaynaklarÄ± gÃ¼venli bir ÅŸekilde paylaÅŸabilir**.

Provisioning profilleri telefonun iÃ§inde **`/Library/MobileDevice/ProvisioningProfiles`** dizininde saklanmaktadÄ±r.

## **SimÃ¼latÃ¶r**

{% hint style="info" %}
Bir **simÃ¼latÃ¶rÃ¼n bir emÃ¼latÃ¶r olmadÄ±ÄŸÄ±nÄ±** unutmayÄ±n. SimÃ¼latÃ¶r, cihazÄ±n davranÄ±ÅŸÄ±nÄ± ve iÅŸlevlerini sadece taklit eder, gerÃ§ekten kullanmaz.
{% endhint %}

### **SimÃ¼latÃ¶r**

Bir simÃ¼latÃ¶rde bir pentest gerÃ§ekleÅŸtirmenin, jailbreak yapÄ±lmÄ±ÅŸ bir cihazda yapmaktan **Ã§ok daha sÄ±nÄ±rlÄ±** olacaÄŸÄ±nÄ± bilmelisiniz.

Bir iOS uygulamasÄ±nÄ± oluÅŸturmak ve desteklemek iÃ§in gereken tÃ¼m araÃ§lar **yalnÄ±zca resmi olarak Mac OS'ta desteklenmektedir**.\
Apple'Ä±n iOS uygulamalarÄ± oluÅŸturmak/hata ayÄ±klamak/enstrÃ¼mantasyon yapmak iÃ§in de facto aracÄ± **Xcode**'dur. DiÄŸer **simÃ¼latÃ¶rler** ve farklÄ± **SDK** **sÃ¼rÃ¼mlerini** indirmek ve uygulamanÄ±zÄ± **derlemek** ve **test etmek** iÃ§in gereklidir.\
Xcode'u **resmi uygulama maÄŸazasÄ±ndan indirmeniz** ÅŸiddetle tavsiye edilir. DiÄŸer sÃ¼rÃ¼mler kÃ¶tÃ¼ amaÃ§lÄ± yazÄ±lÄ±mlar iÃ§erebilir.

SimÃ¼latÃ¶r dosyalarÄ± `/Users/<kullanÄ±cÄ±adÄ±>/Library/Developer/CoreSimulator/Devices` dizininde bulunabilir.

SimÃ¼latÃ¶rÃ¼ aÃ§mak iÃ§in Xcode'u Ã§alÄ±ÅŸtÄ±rÄ±n, ardÄ±ndan _Xcode sekmesine_ gidin --> _GeliÅŸtirici AraÃ§larÄ±nÄ± AÃ§_ --> _SimÃ¼latÃ¶r_\
\_\_AÅŸaÄŸÄ±daki resimde "iPod touch \[...]" Ã¼zerine tÄ±klayarak test etmek iÃ§in baÅŸka bir cihazÄ± seÃ§ebilirsiniz:

![](<../../.gitbook/assets/image (267).png>)

![](<../../.gitbook/assets/image (517).png>)
```bash
xcrun simctl list | grep Booted
iPhone 8 (BF5DA4F8-6BBE-4EA0-BA16-7E3AFD16C06C) (Booted)
```
Once you know the UID the apps installed within it can be found in `/Users/<username>/Library/Developer/CoreSimulator/Devices/{UID}/data/Containers/Data/Application`

However, surprisingly you won't find the application here. You need to access `/Users/<username>/Library/Developer/Xcode/DerivedData/{Application}/Build/Products/Debug-iphonesimulator/`

And in this folder you can **find the package of the application.**

## Emulator

Corellium is the only publicly available iOS emulator. It is an enterprise SaaS solution with a per user license model and does not offer any trial license.

## Jailbeaking

Apple strictly requires that the code running on the iPhone must be **signed by a certificate issued by Apple**. **Jailbreaking** is the process of actively **circumventing such restrictions** and other security controls put in places by the OS. Therefore, once the device is jailbroken, the **integrity check** which is responsible for checking apps being installed is patched so it is **bypassed**.

{% hint style="info" %}
Unlike Android, **you cannot switch to "Developer Mode"** in iOS to run unsigned/untrusted code on the device.
{% endhint %}

### Android Rooting vs. iOS Jailbreaking

While often compared, **rooting** on Android and **jailbreaking** on iOS are fundamentally different processes. Rooting Android devices might involve **installing the `su` binary** or **replacing the system with a rooted custom ROM**, which doesn't necessarily require exploits if the bootloader is unlocked. **Flashing custom ROMs** replaces the device's OS after unlocking the bootloader, sometimes requiring an exploit.

In contrast, iOS devices cannot flash custom ROMs due to the bootloader's restriction to only boot Apple-signed images. **Jailbreaking iOS** aims to bypass Apple's code signing protections to run unsigned code, a process complicated by Apple's continuous security enhancements.

### Jailbreaking Challenges

Jailbreaking iOS is increasingly difficult as Apple patches vulnerabilities quickly. **Downgrading iOS** is only possible for a limited time after a release, making jailbreaking a time-sensitive matter. Devices used for security testing should not be updated unless re-jailbreaking is guaranteed.

iOS updates are controlled by a **challenge-response mechanism** (SHSH blobs), allowing installation only for Apple-signed responses. This mechanism, known as a "signing window", limits the ability to store and later use OTA firmware packages. The [IPSW Downloads website](https://ipsw.me) is a resource for checking current signing windows.

### Jailbreak Varieties

* **Tethered jailbreaks** require a computer connection for each reboot.
* **Semi-tethered jailbreaks** allow booting into non-jailbroken mode without a computer.
* **Semi-untethered jailbreaks** require manual re-jailbreaking without needing a computer.
* **Untethered jailbreaks** offer a permanent jailbreak solution without the need for re-application.

### Jailbreaking Tools and Resources

Jailbreaking tools vary by iOS version and device. Resources such as [Can I Jailbreak?](https://canijailbreak.com), [The iPhone Wiki](https://www.theiphonewiki.com), and [Reddit Jailbreak](https://www.reddit.com/r/jailbreak/) provide up-to-date information. Examples include:

* [Checkra1n](https://checkra.in/) for A7-A11 chip devices.
* [Palera1n](https://palera.in/) for Checkm8 devices (A8-A11) on iOS 15.0-16.5.
* [Unc0ver](https://unc0ver.dev/) for iOS versions up to 14.8.

Modifying your device carries risks, and jailbreaking should be approached with caution.

### Jailbreaking Benefits and Risks

Jailbreaking **removes OS-imposed sandboxing**, allowing apps to access the entire filesystem. This freedom enables the installation of unapproved apps and access to more APIs. However, for regular users, jailbreaking is **not recommended** due to potential security risks and device instability.

### **After Jailbreaking**

{% content-ref url="basic-ios-testing-operations.md" %}
[basic-ios-testing-operations.md](basic-ios-testing-operations.md)
{% endcontent-ref %}

### **Jailbreak Detection**

**Several applications will try to detect if the mobile is jailbroken and in that case the application won't run**

* After jailbreaking an iOS **files and folders are usually installed**, these can be searched to determine if the device is jailbroken.
* In a jailbroken device applications get **read/write access to new files** outside the sandbox
* Some **API** **calls** will **behave differently**
* The presence of the **OpenSSH** service
* Calling `/bin/sh` will **return 1** instead of 0

**More information about how to detect jailbreaking** [**here**](https://www.trustwave.com/en-us/resources/blogs/spiderlabs-blog/jailbreak-detection-methods/)**.**

You can try to avoid this detections using **objection's** `ios jailbreak disable`

## **Jailbreak Detection Bypass**

* You can try to avoid this detections using **objection's** `ios jailbreak disable`
* You could also install the tool **Liberty Lite** (https://ryleyangus.com/repo/). Once the repo is added, the app should appear in the â€˜Searchâ€™ tab

## References

* [https://mas.owasp.org/MASTG/iOS/0x06b-iOS-Security-Testing/](https://mas.owasp.org/MASTG/iOS/0x06b-iOS-Security-Testing/)

<details>

<summary><strong>Learn AWS hacking from zero to hero with</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Other ways to support HackTricks:

* If you want to see your **company advertised in HackTricks** or **download HackTricks in PDF** Check the [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Get the [**official PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Discover [**The PEASS Family**](https://opensea.io/collection/the-peass-family), our collection of exclusive [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **Share your hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
