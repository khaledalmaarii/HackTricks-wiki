# iOS Testing Environment

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
{% endhint %}

## Apple Developer Program

Bir **provisioning identity**, bir Apple geliÅŸtirici hesabÄ±yla iliÅŸkili olan bir dizi genel ve Ã¶zel anahtardÄ±r. **UygulamalarÄ± imzalamak** iÃ§in **99$/yÄ±l** Ã¶deyerek **Apple Developer Program**'a kaydolmanÄ±z gerekir. Bunu yapmadan, bir fiziksel cihazda kaynak kodundan uygulamalarÄ± Ã§alÄ±ÅŸtÄ±ramazsÄ±nÄ±z. Bunu yapmanÄ±n bir diÄŸer seÃ§eneÄŸi ise **jailbroken bir cihaz** kullanmaktÄ±r.

Xcode 7.2 ile birlikte Apple, gerÃ§ek bir iPhone'da uygulamanÄ±zÄ± yazmanÄ±za ve test etmenize olanak tanÄ±yan **Ã¼cretsiz bir iOS geliÅŸtirme provisioning profili** oluÅŸturma seÃ§eneÄŸi sunmuÅŸtur. _Xcode_ --> _Preferences_ --> _Accounts_ --> _+_ (Kimlik bilgilerinizi ekleyin) --> _OluÅŸturduÄŸunuz Apple ID'ye tÄ±klayÄ±n_ --> _Manage Certificates_ --> _+_ (Apple Development) --> _Done_\
\_\_Daha sonra, uygulamanÄ±zÄ± iPhone'unuzda Ã§alÄ±ÅŸtÄ±rmak iÃ§in Ã¶nce **iPhone'un bilgisayarÄ± gÃ¼venilir olarak gÃ¶stermesini saÄŸlamanÄ±z gerekir.** ArdÄ±ndan, **Xcode'dan mobilde uygulamayÄ± Ã§alÄ±ÅŸtÄ±rmayÄ± deneyebilirsiniz,** ancak bir hata gÃ¶rÃ¼necektir. Bu nedenle _Settings_ --> _General_ --> _Profiles and Device Management_ --> GÃ¼venilmeyen profili seÃ§in ve "**Trust**" butonuna tÄ±klayÄ±n.

**AynÄ± imzalama sertifikasÄ±yla imzalanmÄ±ÅŸ uygulamalar, gÃ¼venli bir ÅŸekilde kaynaklarÄ± paylaÅŸabilir, Ã¶rneÄŸin anahtar zinciri Ã¶ÄŸeleri**.

Provisioning profilleri telefonun iÃ§inde **`/Library/MobileDevice/ProvisioningProfiles`** dizininde saklanÄ±r.

## **Simulator**

{% hint style="info" %}
Bir **simÃ¼latÃ¶rÃ¼n emÃ¼latÃ¶rle aynÄ± olmadÄ±ÄŸÄ±nÄ±** unutmayÄ±n. SimÃ¼latÃ¶r, cihazÄ±n davranÄ±ÅŸÄ±nÄ± ve iÅŸlevlerini simÃ¼le eder, ancak bunlarÄ± gerÃ§ekten kullanmaz.
{% endhint %}

### **Simulator**

Bilmeniz gereken ilk ÅŸey, **bir simÃ¼latÃ¶r iÃ§inde pentest yapmanÄ±n, jailbreak yapÄ±lmÄ±ÅŸ bir cihazda yapmaktan Ã§ok daha sÄ±nÄ±rlÄ± olacaÄŸÄ±dÄ±r**.

iOS uygulamasÄ± oluÅŸturmak ve desteklemek iÃ§in gereken tÃ¼m araÃ§lar **sadece resmi olarak Mac OS'ta desteklenmektedir**.\
Apple'Ä±n iOS uygulamalarÄ±nÄ± oluÅŸturmak/ayarlarÄ±nÄ± dÃ¼zeltmek/geliÅŸtirmek iÃ§in kullanÄ±lan de facto aracÄ± **Xcode**'dur. UygulamanÄ±zÄ± oluÅŸturmak ve **test** etmek iÃ§in gereken diÄŸer bileÅŸenleri, Ã¶rneÄŸin **simÃ¼latÃ¶rler** ve farklÄ± **SDK** **sÃ¼rÃ¼mlerini** indirmek iÃ§in kullanÄ±labilir.\
Xcode'u **resmi uygulama maÄŸazasÄ±ndan** **indirmek** ÅŸiddetle tavsiye edilir. DiÄŸer sÃ¼rÃ¼mler kÃ¶tÃ¼ amaÃ§lÄ± yazÄ±lÄ±m iÃ§erebilir.

SimÃ¼latÃ¶r dosyalarÄ± `/Users/<username>/Library/Developer/CoreSimulator/Devices` dizininde bulunabilir.

SimÃ¼latÃ¶rÃ¼ aÃ§mak iÃ§in Xcode'u Ã§alÄ±ÅŸtÄ±rÄ±n, ardÄ±ndan _Xcode sekmesine_ basÄ±n --> _Open Developer tools_ --> _Simulator_\
\_\_AÅŸaÄŸÄ±daki resimde "iPod touch \[...\]" Ã¼zerine tÄ±klayarak test etmek iÃ§in baÅŸka bir cihaz seÃ§ebilirsiniz:

![](<../../.gitbook/assets/image (270).png>)

![](<../../.gitbook/assets/image (520).png>)

### SimÃ¼latÃ¶rdeki Uygulamalar

`/Users/<username>/Library/Developer/CoreSimulator/Devices` dizininde tÃ¼m **kurulu simÃ¼latÃ¶rleri** bulabilirsiniz. EmÃ¼latÃ¶rlerden birinde oluÅŸturulmuÅŸ bir uygulamanÄ±n dosyalarÄ±na eriÅŸmek istiyorsanÄ±z, **uygulamanÄ±n hangi emÃ¼latÃ¶rde kurulu olduÄŸunu bilmek zor olabilir**. DoÄŸru UID'yi **bulmanÄ±n hÄ±zlÄ± bir yolu**, simÃ¼latÃ¶rde uygulamayÄ± Ã§alÄ±ÅŸtÄ±rmak ve ÅŸunu yÃ¼rÃ¼tmektir:
```bash
xcrun simctl list | grep Booted
iPhone 8 (BF5DA4F8-6BBE-4EA0-BA16-7E3AFD16C06C) (Booted)
```
Once you know the UID the apps installed within it can be found in `/Users/<username>/Library/Developer/CoreSimulator/Devices/{UID}/data/Containers/Data/Application`

Ancak, ÅŸaÅŸÄ±rtÄ±cÄ± bir ÅŸekilde burada uygulamayÄ± bulamayacaksÄ±nÄ±z. `/Users/<username>/Library/Developer/Xcode/DerivedData/{Application}/Build/Products/Debug-iphonesimulator/` adresine eriÅŸmeniz gerekiyor.

Ve bu klasÃ¶rde **uygulamanÄ±n paketini bulabilirsiniz.**

## Emulator

Corellium, kamuya aÃ§Ä±k tek iOS emÃ¼latÃ¶rÃ¼dÃ¼r. KullanÄ±cÄ± baÅŸÄ±na lisans modeli ile bir kurumsal SaaS Ã§Ã¶zÃ¼mÃ¼dÃ¼r ve herhangi bir deneme lisansÄ± sunmamaktadÄ±r.

## Jailbeaking

Apple, iPhone'da Ã§alÄ±ÅŸan kodun **Apple tarafÄ±ndan verilen bir sertifika ile imzalanmasÄ±nÄ±** kesinlikle gerektirir. **Jailbreaking**, OS tarafÄ±ndan konulan bu tÃ¼r kÄ±sÄ±tlamalarÄ± ve diÄŸer gÃ¼venlik kontrollerini **aÅŸma** sÃ¼recidir. Bu nedenle, cihaz jailbreak edildiÄŸinde, uygulamalarÄ±n yÃ¼klenmesini kontrol eden **bÃ¼tÃ¼nlÃ¼k kontrolÃ¼** yamanÄ±r, bÃ¶ylece **bypass edilir**.

{% hint style="info" %}
Android'in aksine, iOS'ta cihazda imzasÄ±z/gÃ¼venilmeyen kod Ã§alÄ±ÅŸtÄ±rmak iÃ§in "GeliÅŸtirici Modu"na geÃ§emezsiniz.
{% endhint %}

### Android Rooting vs. iOS Jailbreaking

SÄ±klÄ±kla karÅŸÄ±laÅŸtÄ±rÄ±lsa da, Android'de **rooting** ve iOS'ta **jailbreaking** temelde farklÄ± sÃ¼reÃ§lerdir. Android cihazlarda **`su` ikili dosyasÄ±nÄ± yÃ¼klemek** veya **sistemi kÃ¶klÃ¼ bir Ã¶zel ROM ile deÄŸiÅŸtirmek** gibi iÅŸlemler, bootloader kilidi aÃ§Ä±ldÄ±ÄŸÄ±nda mutlaka istismar gerektirmeyebilir. **Ã–zel ROM'larÄ±n yÃ¼klenmesi**, bootloader kilidi aÃ§Ä±ldÄ±ktan sonra cihazÄ±n iÅŸletim sistemini deÄŸiÅŸtirir ve bazen bir istismar gerektirebilir.

Buna karÅŸÄ±lÄ±k, iOS cihazlarÄ±, bootloader'Ä±n yalnÄ±zca Apple imzalÄ± gÃ¶rÃ¼ntÃ¼leri baÅŸlatma kÄ±sÄ±tlamasÄ± nedeniyle Ã¶zel ROM'larÄ± yÃ¼kleyemez. **iOS'u jailbreak etmek**, imzasÄ±z kod Ã§alÄ±ÅŸtÄ±rmak iÃ§in Apple'Ä±n kod imzalama korumalarÄ±nÄ± aÅŸmayÄ± hedefler; bu sÃ¼reÃ§, Apple'Ä±n sÃ¼rekli gÃ¼venlik iyileÅŸtirmeleri ile karmaÅŸÄ±klaÅŸÄ±r.

### Jailbreaking Challenges

iOS'u jailbreak etmek, Apple'Ä±n gÃ¼venlik aÃ§Ä±klarÄ±nÄ± hÄ±zla yamalamasÄ± nedeniyle giderek zorlaÅŸmaktadÄ±r. **iOS'u dÃ¼ÅŸÃ¼rmek**, bir sÃ¼rÃ¼mden sonra sÄ±nÄ±rlÄ± bir sÃ¼re iÃ§in mÃ¼mkÃ¼ndÃ¼r ve bu da jailbreak iÅŸlemini zaman aÃ§Ä±sÄ±ndan hassas hale getirir. GÃ¼venlik testi iÃ§in kullanÄ±lan cihazlar, yeniden jailbreak garantisi verilmedikÃ§e gÃ¼ncellenmemelidir.

iOS gÃ¼ncellemeleri, yalnÄ±zca Apple imzalÄ± yanÄ±tlar iÃ§in yÃ¼klemeye izin veren bir **challenge-response mekanizmasÄ±** (SHSH bloblarÄ±) ile kontrol edilir. "Ä°mzalama penceresi" olarak bilinen bu mekanizma, OTA firmware paketlerini depolama ve daha sonra kullanma yeteneÄŸini sÄ±nÄ±rlar. [IPSW Downloads web sitesi](https://ipsw.me), mevcut imzalama pencerelerini kontrol etmek iÃ§in bir kaynaktÄ±r.

### Jailbreak Varieties

* **Tethered jailbreaks**, her yeniden baÅŸlatma iÃ§in bir bilgisayar baÄŸlantÄ±sÄ± gerektirir.
* **Semi-tethered jailbreaks**, bilgisayar olmadan jailbreak edilmemiÅŸ moda geÃ§iÅŸe izin verir.
* **Semi-untethered jailbreaks**, bilgisayar gerektirmeden manuel yeniden jailbreak etmeyi gerektirir.
* **Untethered jailbreaks**, yeniden uygulama gerektirmeden kalÄ±cÄ± bir jailbreak Ã§Ã¶zÃ¼mÃ¼ sunar.

### Jailbreaking Tools and Resources

Jailbreaking araÃ§larÄ±, iOS sÃ¼rÃ¼mÃ¼ne ve cihaza gÃ¶re deÄŸiÅŸir. [Can I Jailbreak?](https://canijailbreak.com), [The iPhone Wiki](https://www.theiphonewiki.com) ve [Reddit Jailbreak](https://www.reddit.com/r/jailbreak/) gibi kaynaklar gÃ¼ncel bilgiler saÄŸlar. Ã–rnekler:

* A7-A11 Ã§ipli cihazlar iÃ§in [Checkra1n](https://checkra.in/).
* iOS 15.0-16.5'te Checkm8 cihazlarÄ± iÃ§in [Palera1n](https://palera.in/).
* iOS sÃ¼rÃ¼mleri iÃ§in [Unc0ver](https://unc0ver.dev/) 14.8'e kadar.

CihazÄ±nÄ±zÄ± deÄŸiÅŸtirmek risk taÅŸÄ±r ve jailbreak iÅŸlemi dikkatle yaklaÅŸÄ±lmalÄ±dÄ±r.

### Jailbreaking Benefits and Risks

Jailbreaking, **OS tarafÄ±ndan dayatÄ±lan sandboxing'i kaldÄ±rÄ±r**, uygulamalarÄ±n tÃ¼m dosya sistemine eriÅŸmesine izin verir. Bu Ã¶zgÃ¼rlÃ¼k, onaylanmamÄ±ÅŸ uygulamalarÄ±n yÃ¼klenmesini ve daha fazla API'ye eriÅŸimi saÄŸlar. Ancak, normal kullanÄ±cÄ±lar iÃ§in, potansiyel gÃ¼venlik riskleri ve cihaz kararsÄ±zlÄ±ÄŸÄ± nedeniyle jailbreak **tavsiye edilmez**.

### **After Jailbreaking**

{% content-ref url="basic-ios-testing-operations.md" %}
[basic-ios-testing-operations.md](basic-ios-testing-operations.md)
{% endcontent-ref %}

### **Jailbreak Detection**

**BirÃ§ok uygulama, mobil cihazÄ±n jailbreak edilip edilmediÄŸini tespit etmeye Ã§alÄ±ÅŸacak ve bu durumda uygulama Ã§alÄ±ÅŸmayacaktÄ±r.**

* Jailbreak iÅŸleminden sonra bir iOS'da **dosyalar ve klasÃ¶rler genellikle yÃ¼klenir**, bu dosyalar cihazÄ±n jailbreak edilip edilmediÄŸini belirlemek iÃ§in aranabilir.
* Jailbreak edilmiÅŸ bir cihazda uygulamalar, sandbox dÄ±ÅŸÄ±ndaki yeni dosyalara **okuma/yazma eriÅŸimi** alÄ±r.
* BazÄ± **API** **Ã§aÄŸrÄ±larÄ±** **farklÄ± davranacaktÄ±r.**
* **OpenSSH** hizmetinin varlÄ±ÄŸÄ±.
* `/bin/sh` Ã§aÄŸrÄ±sÄ± **0 yerine 1** dÃ¶ndÃ¼recektir.

**Jailbreaking'i tespit etme yÃ¶ntemleri hakkÄ±nda daha fazla bilgi** [**burada**](https://www.trustwave.com/en-us/resources/blogs/spiderlabs-blog/jailbreak-detection-methods/)**.**

Bu tespitlerden kaÃ§Ä±nmayÄ± deneyebilirsiniz **objection'Ä±n** `ios jailbreak disable` komutunu kullanarak.

## **Jailbreak Detection Bypass**

* Bu tespitlerden kaÃ§Ä±nmayÄ± deneyebilirsiniz **objection'Ä±n** `ios jailbreak disable` komutunu kullanarak.
* AyrÄ±ca **Liberty Lite** (https://ryleyangus.com/repo/) aracÄ±nÄ± yÃ¼kleyebilirsiniz. Repo eklendikten sonra, uygulama 'Arama' sekmesinde gÃ¶rÃ¼nmelidir.

## References

* [https://mas.owasp.org/MASTG/iOS/0x06b-iOS-Security-Testing/](https://mas.owasp.org/MASTG/iOS/0x06b-iOS-Security-Testing/)
{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
</details>
{% endhint %}
