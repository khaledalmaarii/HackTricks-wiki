# iOS UIActivity PaylaÅŸÄ±mÄ±

{% hint style="success" %}
AWS Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks EÄŸitim AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ± (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
GCP Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks EÄŸitim GCP KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ± (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* **ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n ya da **Twitter'da** bizi **takip edin** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Hacking ipuÃ§larÄ±nÄ± paylaÅŸmak iÃ§in** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna PR gÃ¶nderin.

</details>
{% endhint %}

# UIActivity PaylaÅŸÄ±mÄ±nÄ±n BasitleÅŸtirilmesi

iOS 6'dan itibaren, Ã¼Ã§Ã¼ncÃ¼ taraf uygulamalar, Apple'Ä±n [Uygulamalar ArasÄ± Ä°letiÅŸim kÄ±lavuzunda](https://developer.apple.com/library/archive/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/Inter-AppCommunication/Inter-AppCommunication.html#//apple_ref/doc/uid/TP40007072-CH6-SW3) belirtildiÄŸi gibi, AirDrop gibi mekanizmalarÄ± kullanarak metin, URL veya resim gibi **veri paylaÅŸma** yeteneÄŸine sahip olmuÅŸtur. Bu Ã¶zellik, "PaylaÅŸ" butonuna etkileÅŸimde bulunulduÄŸunda ortaya Ã§Ä±kan sistem genelinde bir _paylaÅŸÄ±m etkinliÄŸi sayfasÄ±_ aracÄ±lÄ±ÄŸÄ±yla kendini gÃ¶sterir.

TÃ¼m yerleÅŸik paylaÅŸÄ±m seÃ§eneklerinin kapsamlÄ± bir listesi [UIActivity.ActivityType](https://developer.apple.com/documentation/uikit/uiactivity/activitytype) adresinde mevcuttur. GeliÅŸtiriciler, uygulamalarÄ± iÃ§in uygun olmadÄ±ÄŸÄ±nÄ± dÃ¼ÅŸÃ¼ndÃ¼kleri belirli paylaÅŸÄ±m seÃ§eneklerini hariÃ§ tutmayÄ± tercih edebilirler.

## **Veri NasÄ±l PaylaÅŸÄ±lÄ±r**

Dikkat edilmesi gerekenler:

- PaylaÅŸÄ±lan verinin niteliÄŸi.
- Ã–zel etkinliklerin dahil edilmesi.
- Belirli etkinlik tÃ¼rlerinin hariÃ§ tutulmasÄ±.

PaylaÅŸÄ±m, paylaÅŸÄ±lacak Ã¶ÄŸelerin geÃ§irildiÄŸi bir `UIActivityViewController` Ã¶rneÄŸi oluÅŸturularak kolaylaÅŸtÄ±rÄ±lÄ±r. Bu, ÅŸu ÅŸekilde Ã§aÄŸrÄ±larak gerÃ§ekleÅŸtirilir:
```bash
$ rabin2 -zq Telegram\ X.app/Telegram\ X | grep -i activityItems
0x1000df034 45 44 initWithActivityItems:applicationActivities:
```
GeliÅŸtiriciler, `UIActivityViewController`'Ä± baÅŸlatÄ±ldÄ±ÄŸÄ± aktiviteler ve Ã¶zel aktiviteler iÃ§in dikkatlice incelemeli, ayrÄ±ca belirtilen `excludedActivityTypes`'Ä± da gÃ¶z Ã¶nÃ¼nde bulundurmalÄ±dÄ±r.

## **Veri Alma YÃ¶ntemi**

Veri alÄ±rken aÅŸaÄŸÄ±daki unsurlar kritik Ã¶neme sahiptir:

- **Ã¶zel belge tÃ¼rlerinin** beyanÄ±.
- UygulamanÄ±n aÃ§abileceÄŸi **belge tÃ¼rlerinin** belirtilmesi.
- **alÄ±nan verilerin bÃ¼tÃ¼nlÃ¼ÄŸÃ¼nÃ¼n** doÄŸrulanmasÄ±.

Kaynak koduna eriÅŸim olmadan, `Info.plist` dosyasÄ±nda `UTExportedTypeDeclarations`, `UTImportedTypeDeclarations` ve `CFBundleDocumentTypes` gibi anahtarlarÄ± inceleyerek bir uygulamanÄ±n iÅŸleyebileceÄŸi ve beyan edebileceÄŸi belge tÃ¼rlerini anlamak mÃ¼mkÃ¼ndÃ¼r.

Bu anahtarlar hakkÄ±nda kÄ±sa bir rehber [Stackoverflow](https://stackoverflow.com/questions/21937978/what-are-utimportedtypedeclarations-and-utexportedtypedeclarations-used-for-on-i) Ã¼zerinde mevcuttur ve sistem genelinde tanÄ±nma iÃ§in UTIs tanÄ±mlamanÄ±n ve iÃ§e aktarmanÄ±n Ã¶nemini vurgular, ayrÄ±ca belge tÃ¼rlerini uygulamanÄ±zla iliÅŸkilendirerek "AÃ§" diyalogunda entegrasyon saÄŸlar.

## Dinamik Test YaklaÅŸÄ±mÄ±

**gÃ¶nderme aktivitelerini** test etmek iÃ§in:

- PaylaÅŸÄ±lan Ã¶ÄŸeleri ve aktiviteleri yakalamak iÃ§in `init(activityItems:applicationActivities:)` yÃ¶ntemine hook atÄ±labilir.
- `excludedActivityTypes` Ã¶zelliÄŸini keserek hariÃ§ tutulan aktiviteleri belirlemek mÃ¼mkÃ¼ndÃ¼r.

**Ã¶ÄŸeleri alma** sÃ¼reci ise:

- "AÃ§..." diyalogunu tetikleyen baÅŸka bir kaynaktan (Ã¶rneÄŸin, AirDrop, e-posta) uygulama ile bir dosya paylaÅŸmayÄ± iÃ§erir.
- UygulamanÄ±n yanÄ±tÄ±nÄ± gÃ¶zlemlemek iÃ§in statik analiz sÄ±rasÄ±nda belirlenen diÄŸer yÃ¶ntemler arasÄ±nda `application:openURL:options:` yÃ¶ntemine hook atmak.
- UygulamanÄ±n dayanÄ±klÄ±lÄ±ÄŸÄ±nÄ± deÄŸerlendirmek iÃ§in hatalÄ± dosyalar veya fuzzing teknikleri kullanmak.

## Referanslar
* [https://mobile-security.gitbook.io/mobile-security-testing-guide/ios-testing-guide/0x06h-testing-platform-interaction](https://mobile-security.gitbook.io/mobile-security-testing-guide/ios-testing-guide/0x06h-testing-platform-interaction)

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
