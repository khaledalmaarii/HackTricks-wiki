# iOS UIActivity Sharing

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

# UIActivity Sharing Simplified

iOS 6ë¶€í„°, ì„œë“œíŒŒí‹° ì• í”Œë¦¬ì¼€ì´ì…˜ì€ Appleì˜ [Inter-App Communication guide](https://developer.apple.com/library/archive/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/Inter-AppCommunication/Inter-AppCommunication.html#//apple_ref/doc/uid/TP40007072-CH6-SW3)ì—ì„œ ì„¤ëª…ëœ ëŒ€ë¡œ AirDropê³¼ ê°™ì€ ë©”ì»¤ë‹ˆì¦˜ì„ ì‚¬ìš©í•˜ì—¬ í…ìŠ¤íŠ¸, URL ë˜ëŠ” ì´ë¯¸ì§€ì™€ ê°™ì€ **ë°ì´í„°ë¥¼ ê³µìœ **í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ ê¸°ëŠ¥ì€ "ê³µìœ " ë²„íŠ¼ê³¼ ìƒí˜¸ì‘ìš©í•  ë•Œ ë‚˜íƒ€ë‚˜ëŠ” ì‹œìŠ¤í…œ ì „ì²´ì˜ _ê³µìœ  í™œë™ ì‹œíŠ¸_ë¥¼ í†µí•´ êµ¬í˜„ë©ë‹ˆë‹¤.

ëª¨ë“  ë‚´ì¥ ê³µìœ  ì˜µì…˜ì˜ í¬ê´„ì ì¸ ì—´ê±°ëŠ” [UIActivity.ActivityType](https://developer.apple.com/documentation/uikit/uiactivity/activitytype)ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê°œë°œìëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì í•©í•˜ì§€ ì•Šë‹¤ê³  íŒë‹¨ë˜ëŠ” íŠ¹ì • ê³µìœ  ì˜µì…˜ì„ ì œì™¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## **ë°ì´í„° ê³µìœ  ë°©ë²•**

ë‹¤ìŒ ì‚¬í•­ì— ì£¼ì˜ë¥¼ ê¸°ìš¸ì—¬ì•¼ í•©ë‹ˆë‹¤:

- ê³µìœ ë˜ëŠ” ë°ì´í„°ì˜ ì„±ê²©.
- ì‚¬ìš©ì ì •ì˜ í™œë™ì˜ í¬í•¨.
- íŠ¹ì • í™œë™ ìœ í˜•ì˜ ì œì™¸.

ê³µìœ ëŠ” `UIActivityViewController`ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ì—¬ ì´‰ì§„ë˜ë©°, ê³µìœ í•  í•­ëª©ì´ ì „ë‹¬ë©ë‹ˆë‹¤. ì´ëŠ” ë‹¤ìŒê³¼ ê°™ì´ í˜¸ì¶œí•˜ì—¬ ë‹¬ì„±ë©ë‹ˆë‹¤:
```bash
$ rabin2 -zq Telegram\ X.app/Telegram\ X | grep -i activityItems
0x1000df034 45 44 initWithActivityItems:applicationActivities:
```
ê°œë°œìëŠ” `UIActivityViewController`ì—ì„œ ì´ˆê¸°í™”ëœ í™œë™ ë° ì‚¬ìš©ì ì •ì˜ í™œë™ê³¼ ì§€ì •ëœ `excludedActivityTypes`ë¥¼ ë©´ë°€íˆ ê²€í† í•´ì•¼ í•©ë‹ˆë‹¤.

## **ë°ì´í„° ìˆ˜ì‹  ë°©ë²•**

ë°ì´í„°ë¥¼ ìˆ˜ì‹ í•  ë•Œ ë‹¤ìŒ ì‚¬í•­ì´ ì¤‘ìš”í•©ë‹ˆë‹¤:

- **ì‚¬ìš©ì ì •ì˜ ë¬¸ì„œ ìœ í˜•**ì˜ ì„ ì–¸.
- **ì•±ì´ ì—´ ìˆ˜ ìˆëŠ” ë¬¸ì„œ ìœ í˜•**ì˜ ëª…ì‹œ.
- **ìˆ˜ì‹ ëœ ë°ì´í„°ì˜ ë¬´ê²°ì„±** í™•ì¸.

ì†ŒìŠ¤ ì½”ë“œì— ì ‘ê·¼í•  ìˆ˜ ì—†ë”ë¼ë„ `Info.plist`ì—ì„œ `UTExportedTypeDeclarations`, `UTImportedTypeDeclarations`, `CFBundleDocumentTypes`ì™€ ê°™ì€ í‚¤ë¥¼ ê²€ì‚¬í•˜ì—¬ ì•±ì´ ì²˜ë¦¬í•˜ê³  ì„ ì–¸í•  ìˆ˜ ìˆëŠ” ë¬¸ì„œ ìœ í˜•ì„ ì´í•´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì´ í‚¤ì— ëŒ€í•œ ê°„ê²°í•œ ê°€ì´ë“œëŠ” [Stackoverflow](https://stackoverflow.com/questions/21937978/what-are-utimportedtypedeclarations-and-utexportedtypedeclarations-used-for-on-i)ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìœ¼ë©°, ì‹œìŠ¤í…œ ì „ë°˜ì— ê±¸ì³ UTIë¥¼ ì •ì˜í•˜ê³  ê°€ì ¸ì˜¤ëŠ” ê²ƒì˜ ì¤‘ìš”ì„±ê³¼ "Open With" ëŒ€í™” ìƒìì—ì„œ ë¬¸ì„œ ìœ í˜•ì„ ì•±ê³¼ ì—°ê´€ì‹œí‚¤ëŠ” ë°©ë²•ì„ ê°•ì¡°í•©ë‹ˆë‹¤.

## ë™ì  í…ŒìŠ¤íŠ¸ ì ‘ê·¼ë²•

**ë³´ë‚´ëŠ” í™œë™**ì„ í…ŒìŠ¤íŠ¸í•˜ê¸° ìœ„í•´ì„œëŠ”:

- `init(activityItems:applicationActivities:)` ë©”ì„œë“œì— í›„í‚¹í•˜ì—¬ ê³µìœ ë˜ëŠ” í•­ëª©ê³¼ í™œë™ì„ ìº¡ì²˜í•©ë‹ˆë‹¤.
- `excludedActivityTypes` ì†ì„±ì„ ê°€ë¡œì±„ì–´ ì œì™¸ëœ í™œë™ì„ ì‹ë³„í•©ë‹ˆë‹¤.

**í•­ëª© ìˆ˜ì‹ **ì€ ë‹¤ìŒì„ í¬í•¨í•©ë‹ˆë‹¤:

- ë‹¤ë¥¸ ì†ŒìŠ¤(ì˜ˆ: AirDrop, ì´ë©”ì¼)ì—ì„œ ì•±ìœ¼ë¡œ íŒŒì¼ì„ ê³µìœ í•˜ì—¬ "Open with..." ëŒ€í™” ìƒìë¥¼ ìœ ë„í•©ë‹ˆë‹¤.
- ì •ì  ë¶„ì„ ì¤‘ ì‹ë³„ëœ ë‹¤ë¥¸ ë©”ì„œë“œì™€ í•¨ê»˜ `application:openURL:options:`ì— í›„í‚¹í•˜ì—¬ ì•±ì˜ ë°˜ì‘ì„ ê´€ì°°í•©ë‹ˆë‹¤.
- ì˜ëª»ëœ í˜•ì‹ì˜ íŒŒì¼ì´ë‚˜ í¼ì§• ê¸°ë²•ì„ ì‚¬ìš©í•˜ì—¬ ì•±ì˜ ê²¬ê³ ì„±ì„ í‰ê°€í•©ë‹ˆë‹¤.

## ì°¸ê³  ë¬¸í—Œ
* [https://mobile-security.gitbook.io/mobile-security-testing-guide/ios-testing-guide/0x06h-testing-platform-interaction](https://mobile-security.gitbook.io/mobile-security-testing-guide/ios-testing-guide/0x06h-testing-platform-interaction)

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
