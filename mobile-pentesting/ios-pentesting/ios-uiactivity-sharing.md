# iOS UIActivity Sharing

{% hint style="success" %}
å­¦ä¹ ä¸å®è·µ AWS é»‘å®¢æŠ€æœ¯ï¼š<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks åŸ¹è®­ AWS çº¢é˜Ÿä¸“å®¶ (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
å­¦ä¹ ä¸å®è·µ GCP é»‘å®¢æŠ€æœ¯ï¼š<img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks åŸ¹è®­ GCP çº¢é˜Ÿä¸“å®¶ (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>æ”¯æŒ HackTricks</summary>

* æŸ¥çœ‹ [**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**Telegram ç¾¤ç»„**](https://t.me/peass) æˆ– **å…³æ³¨** æˆ‘ä»¬çš„ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub ä»“åº“æäº¤ PR æ¥åˆ†äº«é»‘å®¢æŠ€å·§ã€‚

</details>
{% endhint %}

# UIActivity Sharing ç®€åŒ–

ä» iOS 6 å¼€å§‹ï¼Œç¬¬ä¸‰æ–¹åº”ç”¨ç¨‹åºå¯ä»¥ä½¿ç”¨ AirDrop ç­‰æœºåˆ¶**å…±äº«æ•°æ®**ï¼Œä¾‹å¦‚æ–‡æœ¬ã€URL æˆ–å›¾åƒï¼Œå…·ä½“å†…å®¹è§è‹¹æœçš„ [åº”ç”¨é—´é€šä¿¡æŒ‡å—](https://developer.apple.com/library/archive/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/Inter-AppCommunication/Inter-AppCommunication.html#//apple_ref/doc/uid/TP40007072-CH6-SW3)ã€‚æ­¤åŠŸèƒ½é€šè¿‡ç³»ç»ŸèŒƒå›´çš„ _å…±äº«æ´»åŠ¨è¡¨_ ä½“ç°ï¼Œå½“ä¸â€œå…±äº«â€æŒ‰é’®äº¤äº’æ—¶ä¼šå‡ºç°ã€‚

æ‰€æœ‰å†…ç½®å…±äº«é€‰é¡¹çš„å…¨é¢åˆ—ä¸¾å¯åœ¨ [UIActivity.ActivityType](https://developer.apple.com/documentation/uikit/uiactivity/activitytype) ä¸­æ‰¾åˆ°ã€‚å¼€å‘è€…å¯ä»¥é€‰æ‹©æ’é™¤ç‰¹å®šçš„å…±äº«é€‰é¡¹ï¼Œå¦‚æœä»–ä»¬è®¤ä¸ºè¿™äº›é€‰é¡¹ä¸é€‚åˆä»–ä»¬çš„åº”ç”¨ç¨‹åºã€‚

## **å¦‚ä½•å…±äº«æ•°æ®**

åº”å…³æ³¨ä»¥ä¸‹å‡ ç‚¹ï¼š

- å…±äº«æ•°æ®çš„æ€§è´¨ã€‚
- è‡ªå®šä¹‰æ´»åŠ¨çš„åŒ…å«ã€‚
- æŸäº›æ´»åŠ¨ç±»å‹çš„æ’é™¤ã€‚

å…±äº«æ˜¯é€šè¿‡å®ä¾‹åŒ– `UIActivityViewController` æ¥å®ç°çš„ï¼Œå¾…å…±äº«çš„é¡¹ç›®å°†ä¼ é€’ç»™è¯¥æ§åˆ¶å™¨ã€‚è¿™æ˜¯é€šè¿‡è°ƒç”¨å®ç°çš„ï¼š
```bash
$ rabin2 -zq Telegram\ X.app/Telegram\ X | grep -i activityItems
0x1000df034 45 44 initWithActivityItems:applicationActivities:
```
å¼€å‘è€…åº”ä»”ç»†æ£€æŸ¥ `UIActivityViewController` çš„æ´»åŠ¨å’Œåˆå§‹åŒ–æ—¶çš„è‡ªå®šä¹‰æ´»åŠ¨ï¼Œä»¥åŠä»»ä½•æŒ‡å®šçš„ `excludedActivityTypes`ã€‚

## **å¦‚ä½•æ¥æ”¶æ•°æ®**

æ¥æ”¶æ•°æ®æ—¶ä»¥ä¸‹æ–¹é¢è‡³å…³é‡è¦ï¼š

- **è‡ªå®šä¹‰æ–‡æ¡£ç±»å‹**çš„å£°æ˜ã€‚
- **åº”ç”¨å¯ä»¥æ‰“å¼€çš„æ–‡æ¡£ç±»å‹**çš„æŒ‡å®šã€‚
- **æ¥æ”¶æ•°æ®çš„å®Œæ•´æ€§**çš„éªŒè¯ã€‚

åœ¨æ²¡æœ‰æºä»£ç è®¿é—®çš„æƒ…å†µä¸‹ï¼Œä»ç„¶å¯ä»¥æ£€æŸ¥ `Info.plist` ä¸­çš„é”®ï¼Œå¦‚ `UTExportedTypeDeclarations`ã€`UTImportedTypeDeclarations` å’Œ `CFBundleDocumentTypes`ï¼Œä»¥äº†è§£åº”ç”¨å¯ä»¥å¤„ç†å’Œå£°æ˜çš„æ–‡æ¡£ç±»å‹ã€‚

å…³äºè¿™äº›é”®çš„ç®€æ˜æŒ‡å—å¯åœ¨ [Stackoverflow](https://stackoverflow.com/questions/21937978/what-are-utimportedtypedeclarations-and-utexportedtypedeclarations-used-for-on-i) ä¸Šæ‰¾åˆ°ï¼Œå¼ºè°ƒäº†å®šä¹‰å’Œå¯¼å…¥ UTI ä»¥ä¾¿ç³»ç»ŸèŒƒå›´å†…è¯†åˆ«çš„é‡è¦æ€§ï¼Œå¹¶å°†æ–‡æ¡£ç±»å‹ä¸æ‚¨çš„åº”ç”¨å…³è”ï¼Œä»¥ä¾¿åœ¨â€œæ‰“å¼€æ–¹å¼â€å¯¹è¯æ¡†ä¸­é›†æˆã€‚

## åŠ¨æ€æµ‹è¯•æ–¹æ³•

è¦æµ‹è¯• **å‘é€æ´»åŠ¨**ï¼Œå¯ä»¥ï¼š

- é’©ä½ `init(activityItems:applicationActivities:)` æ–¹æ³•ä»¥æ•è·æ­£åœ¨å…±äº«çš„é¡¹ç›®å’Œæ´»åŠ¨ã€‚
- é€šè¿‡æ‹¦æˆª `excludedActivityTypes` å±æ€§æ¥è¯†åˆ«è¢«æ’é™¤çš„æ´»åŠ¨ã€‚

å¯¹äº **æ¥æ”¶é¡¹ç›®**ï¼Œæ¶‰åŠï¼š

- ä»å…¶ä»–æ¥æºï¼ˆä¾‹å¦‚ AirDropã€ç”µå­é‚®ä»¶ï¼‰ä¸åº”ç”¨å…±äº«æ–‡ä»¶ï¼Œæç¤ºâ€œæ‰“å¼€æ–¹å¼...â€å¯¹è¯æ¡†ã€‚
- é’©ä½ `application:openURL:options:` ä»¥åŠåœ¨é™æ€åˆ†æä¸­è¯†åˆ«çš„å…¶ä»–æ–¹æ³•ï¼Œä»¥è§‚å¯Ÿåº”ç”¨çš„å“åº”ã€‚
- ä½¿ç”¨æ ¼å¼é”™è¯¯çš„æ–‡ä»¶æˆ–æ¨¡ç³Šæµ‹è¯•æŠ€æœ¯æ¥è¯„ä¼°åº”ç”¨çš„ç¨³å¥æ€§ã€‚

## å‚è€ƒ
* [https://mobile-security.gitbook.io/mobile-security-testing-guide/ios-testing-guide/0x06h-testing-platform-interaction](https://mobile-security.gitbook.io/mobile-security-testing-guide/ios-testing-guide/0x06h-testing-platform-interaction)

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
