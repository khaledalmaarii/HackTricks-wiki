# iOS UIActivity Sharing

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

# UIActivity Sharing Simplified

Od iOS 6 pa nadalje, aplikacije treÄ‡ih strana su omoguÄ‡ene da **dele podatke** kao Å¡to su tekst, URL-ovi ili slike koristeÄ‡i mehanizme poput AirDrop-a, kako je navedeno u Apple-ovom [VodiÄu za meÄ‘usobnu komunikaciju aplikacija](https://developer.apple.com/library/archive/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/Inter-AppCommunication/Inter-AppCommunication.html#//apple_ref/doc/uid/TP40007072-CH6-SW3). Ova funkcija se manifestuje kroz sistemski _sheet za deljenje aktivnosti_ koji se pojavljuje prilikom interakcije sa dugmetom "Podeli".

Sveobuhvatna enumeracija svih ugraÄ‘enih opcija deljenja dostupna je na [UIActivity.ActivityType](https://developer.apple.com/documentation/uikit/uiactivity/activitytype). Programeri mogu odluÄiti da iskljuÄe odreÄ‘ene opcije deljenja ako smatraju da nisu prikladne za njihovu aplikaciju.

## **Kako deliti podatke**

PaÅ¾nja treba biti usmerena na:

- Prirodu podataka koji se dele.
- UkljuÄivanje prilagoÄ‘enih aktivnosti.
- IskljuÄivanje odreÄ‘enih tipova aktivnosti.

Deljenje se olakÅ¡ava instanciranjem `UIActivityViewController`, kojem se prosleÄ‘uju stavke koje se nameravaju deliti. To se postiÅ¾e pozivanjem:
```bash
$ rabin2 -zq Telegram\ X.app/Telegram\ X | grep -i activityItems
0x1000df034 45 44 initWithActivityItems:applicationActivities:
```
Developeri bi trebali paÅ¾ljivo ispitati `UIActivityViewController` za aktivnosti i prilagoÄ‘ene aktivnosti sa kojima je inicijalizovan, kao i sve navedene `excludedActivityTypes`.

## **Kako primiti podatke**

SledeÄ‡i aspekti su kljuÄni prilikom primanja podataka:

- Deklaracija **prilagoÄ‘enih tipova dokumenata**.
- Specifikacija **tipova dokumenata koje aplikacija moÅ¾e otvoriti**.
- Verifikacija **integriteta primljenih podataka**.

Bez pristupa izvornoj kodu, moÅ¾e se joÅ¡ uvek ispitati `Info.plist` za kljuÄeve kao Å¡to su `UTExportedTypeDeclarations`, `UTImportedTypeDeclarations`, i `CFBundleDocumentTypes` kako bi se razumele vrste dokumenata koje aplikacija moÅ¾e obraditi i deklarisati.

Kratak vodiÄ o ovim kljuÄevima dostupan je na [Stackoverflow](https://stackoverflow.com/questions/21937978/what-are-utimportedtypedeclarations-and-utexportedtypedeclarations-used-for-on-i), naglaÅ¡avajuÄ‡i vaÅ¾nost definisanja i uvoza UTI za sistemsko prepoznavanje i povezivanje tipova dokumenata sa vaÅ¡om aplikacijom za integraciju u dijalogu "Otvoriti sa".

## DinamiÄki pristup testiranju

Da bi se testirale **aktivnosti slanja**, moÅ¾e se:

- UkljuÄiti u metodu `init(activityItems:applicationActivities:)` kako bi se uhvatili stavke i aktivnosti koje se dele.
- Identifikovati iskljuÄene aktivnosti presretanjem svojstva `excludedActivityTypes`.

Za **primanje stavki**, to ukljuÄuje:

- Deljenje datoteke sa aplikacijom iz drugog izvora (npr. AirDrop, email) koja pokreÄ‡e dijalog "Otvoriti sa...".
- UkljuÄivanje `application:openURL:options:` meÄ‘u drugim metodama identifikovanim tokom statiÄke analize kako bi se posmatrao odgovor aplikacije.
- KoriÅ¡Ä‡enje neispravnih datoteka ili fuzzing tehnika za procenu otpornosti aplikacije.

## Reference
* [https://mobile-security.gitbook.io/mobile-security-testing-guide/ios-testing-guide/0x06h-testing-platform-interaction](https://mobile-security.gitbook.io/mobile-security-testing-guide/ios-testing-guide/0x06h-testing-platform-interaction)

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
