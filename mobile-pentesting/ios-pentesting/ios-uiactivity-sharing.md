<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>â˜ï¸ HackTricksäº‘ â˜ï¸</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ğŸ¦ æ¨ç‰¹ ğŸ¦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ğŸ™ï¸ Twitch ğŸ™ï¸</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ğŸ¥ Youtube ğŸ¥</strong></a></summary>

- ä½ åœ¨**ç½‘ç»œå®‰å…¨å…¬å¸**å·¥ä½œå—ï¼Ÿä½ æƒ³åœ¨HackTricksä¸­çœ‹åˆ°ä½ çš„**å…¬å¸å¹¿å‘Š**å—ï¼Ÿæˆ–è€…ä½ æƒ³è·å¾—**PEASSçš„æœ€æ–°ç‰ˆæœ¬æˆ–ä¸‹è½½PDFæ ¼å¼çš„HackTricks**å—ï¼Ÿè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼

- å‘ç°æˆ‘ä»¬çš„ç‹¬å®¶[**NFTs**](https://opensea.io/collection/the-peass-family)æ”¶è—å“[**The PEASS Family**](https://opensea.io/collection/the-peass-family)

- è·å¾—[**å®˜æ–¹PEASSå’ŒHackTrickså‘¨è¾¹äº§å“**](https://peass.creator-spring.com)

- **åŠ å…¥** [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discordç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**ç”µæŠ¥ç¾¤ç»„**](https://t.me/peass) æˆ– **å…³æ³¨**æˆ‘åœ¨**æ¨ç‰¹**ä¸Šçš„[**ğŸ¦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks_live)**ã€‚**

- **é€šè¿‡å‘[hacktricks repo](https://github.com/carlospolop/hacktricks)å’Œ[hacktricks-cloud repo](https://github.com/carlospolop/hacktricks-cloud)æäº¤PRæ¥åˆ†äº«ä½ çš„é»‘å®¢æŠ€å·§**ã€‚

</details>


# UIActivity Sharing

ä»iOS 6å¼€å§‹ï¼Œç¬¬ä¸‰æ–¹åº”ç”¨å¯ä»¥é€šè¿‡ç‰¹å®šæœºåˆ¶ï¼ˆä¾‹å¦‚AirDropï¼‰å…±äº«æ•°æ®ï¼ˆé¡¹ç›®ï¼‰ã€‚ä»ç”¨æˆ·çš„è§’åº¦æ¥çœ‹ï¼Œè¿™ä¸ªåŠŸèƒ½æ˜¯ä¼—æ‰€å‘¨çŸ¥çš„ç³»ç»Ÿçº§â€œå…±äº«æ´»åŠ¨è¡¨â€ï¼Œåœ¨ç‚¹å‡»â€œåˆ†äº«â€æŒ‰é’®åå‡ºç°ã€‚

å¯ä»¥åœ¨[UIActivity.ActivityType](https://developer.apple.com/documentation/uikit/uiactivity/activitytype)ä¸­æ‰¾åˆ°å¯ç”¨çš„å†…ç½®å…±äº«æœºåˆ¶çš„å®Œæ•´åˆ—è¡¨ã€‚å¦‚æœå¯¹äºåº”ç”¨ç¨‹åºæ¥è¯´ä¸åˆé€‚ï¼Œ**å¼€å‘äººå‘˜å¯ä»¥æ’é™¤å…¶ä¸­ä¸€äº›å…±äº«æœºåˆ¶**ã€‚

## **å‘é€é¡¹ç›®**

åœ¨æµ‹è¯•`UIActivity`å…±äº«æ—¶ï¼Œåº”ç‰¹åˆ«æ³¨æ„ä»¥ä¸‹å†…å®¹ï¼š

* è¢«å…±äº«çš„æ•°æ®ï¼ˆé¡¹ç›®ï¼‰ï¼Œ
* è‡ªå®šä¹‰æ´»åŠ¨ï¼Œ
* æ’é™¤çš„æ´»åŠ¨ç±»å‹ã€‚

é€šè¿‡åˆ›å»º`UIActivityViewController`å¹¶å°†æ‰€éœ€çš„é¡¹ç›®ï¼ˆURLã€æ–‡æœ¬ã€å›¾ç‰‡ï¼‰ä¼ é€’ç»™[`init(activityItems:applicationActivities:)`](https://developer.apple.com/documentation/uikit/uiactivityviewcontroller/1622019-init)æ¥å®ç°é€šè¿‡`UIActivity`å…±äº«æ•°æ®ã€‚

å¦‚æœæœ‰æºä»£ç ï¼Œåº”æŸ¥çœ‹`UIActivityViewController`ï¼š

* æ£€æŸ¥ä¼ é€’ç»™`init(activityItems:applicationActivities:)`æ–¹æ³•çš„æ´»åŠ¨ã€‚
* æ£€æŸ¥æ˜¯å¦å®šä¹‰äº†è‡ªå®šä¹‰æ´»åŠ¨ï¼ˆä¹Ÿä¼ é€’ç»™ä¸Šè¿°æ–¹æ³•ï¼‰ã€‚
* éªŒè¯`excludedActivityTypes`ï¼Œå¦‚æœæœ‰çš„è¯ã€‚

å¦‚æœåªæœ‰å·²ç¼–è¯‘/å®‰è£…çš„åº”ç”¨ç¨‹åºï¼Œè¯·å°è¯•æœç´¢ä¸Šè¿°æ–¹æ³•å’Œå±æ€§ï¼Œä¾‹å¦‚ï¼š
```bash
$ rabin2 -zq Telegram\ X.app/Telegram\ X | grep -i activityItems
0x1000df034 45 44 initWithActivityItems:applicationActivities:
```
## **æ¥æ”¶é¡¹ç›®**

åœ¨æ¥æ”¶é¡¹ç›®æ—¶ï¼Œæ‚¨åº”è¯¥æ£€æŸ¥ä»¥ä¸‹å†…å®¹ï¼š

* å¦‚æœåº”ç”¨ç¨‹åºé€šè¿‡æŸ¥çœ‹Xcodeé¡¹ç›®çš„â€œInfoâ€é€‰é¡¹å¡æ¥**å£°æ˜è‡ªå®šä¹‰æ–‡æ¡£ç±»å‹**ï¼Œåˆ™å¯ä»¥æŸ¥çœ‹**å¯¼å‡º/å¯¼å…¥UTI**ï¼ˆUniform Type Identifiersï¼‰çš„åˆ—è¡¨ã€‚æ‰€æœ‰ç³»ç»Ÿå£°æ˜çš„UTIçš„åˆ—è¡¨å¯ä»¥åœ¨[å­˜æ¡£çš„Appleå¼€å‘è€…æ–‡æ¡£](https://developer.apple.com/library/archive/documentation/Miscellaneous/Reference/UTIRef/Articles/System-DeclaredUniformTypeIdentifiers.html#//apple_ref/doc/uid/TP40009259)ä¸­æ‰¾åˆ°ã€‚
* å¦‚æœåº”ç”¨ç¨‹åºé€šè¿‡æŸ¥çœ‹Xcodeé¡¹ç›®çš„â€œInfoâ€é€‰é¡¹å¡æ¥**æŒ‡å®šå…¶å¯ä»¥æ‰“å¼€çš„ä»»ä½•æ–‡æ¡£ç±»å‹**ï¼Œåˆ™åº”æ£€æŸ¥**æ–‡æ¡£ç±»å‹**ã€‚å¦‚æœå­˜åœ¨ï¼Œå®ƒä»¬ç”±åç§°å’Œä¸€ä¸ªæˆ–å¤šä¸ªè¡¨ç¤ºæ•°æ®ç±»å‹çš„UTIç»„æˆï¼ˆä¾‹å¦‚ï¼ŒPNGæ–‡ä»¶çš„â€œpublic.pngâ€ï¼‰ã€‚iOSä½¿ç”¨æ­¤ä¿¡æ¯æ¥ç¡®å®šåº”ç”¨ç¨‹åºæ˜¯å¦æœ‰èµ„æ ¼æ‰“å¼€ç»™å®šçš„æ–‡æ¡£ï¼ˆä»…æŒ‡å®šå¯¼å‡º/å¯¼å…¥UTIæ˜¯ä¸å¤Ÿçš„ï¼‰ã€‚
* å¦‚æœåº”ç”¨ç¨‹åºé€šè¿‡æŸ¥çœ‹åº”ç”¨ç¨‹åºå§”æ‰˜ä¸­çš„[`application:openURL:options:`](https://developer.apple.com/documentation/uikit/uiapplicationdelegate/1623112-application?language=objc)ï¼ˆæˆ–å…¶å·²å¼ƒç”¨çš„ç‰ˆæœ¬[`UIApplicationDelegate application:openURL:sourceApplication:annotation:`](https://developer.apple.com/documentation/uikit/uiapplicationdelegate/1623073-application?language=objc)ï¼‰æ¥**æ­£ç¡®éªŒè¯æ¥æ”¶åˆ°çš„æ•°æ®**ã€‚

å¦‚æœæ²¡æœ‰æºä»£ç ï¼Œæ‚¨ä»ç„¶å¯ä»¥æŸ¥çœ‹`Info.plist`æ–‡ä»¶å¹¶æœç´¢ä»¥ä¸‹å†…å®¹ï¼š

* å¦‚æœåº”ç”¨ç¨‹åºå£°æ˜äº†å¯¼å‡º/å¯¼å…¥çš„**è‡ªå®šä¹‰æ–‡æ¡£ç±»å‹**ï¼Œåˆ™å¯ä»¥æŸ¥çœ‹`UTExportedTypeDeclarations`/`UTImportedTypeDeclarations`ã€‚
* å¦‚æœåº”ç”¨ç¨‹åºæŒ‡å®šäº†å…¶å¯ä»¥æ‰“å¼€çš„**æ–‡æ¡£ç±»å‹**ï¼Œåˆ™å¯ä»¥æŸ¥çœ‹`CFBundleDocumentTypes`ã€‚

å…³äºä½¿ç”¨è¿™äº›é”®çš„éå¸¸è¯¦ç»†çš„è§£é‡Šå¯ä»¥åœ¨[Stackoverflow](https://stackoverflow.com/questions/21937978/what-are-utimportedtypedeclarations-and-utexportedtypedeclarations-used-for-on-i)ä¸Šæ‰¾åˆ°ï¼Œä½†è¿™é‡Œæœ‰ä¸€ä¸ªæ‘˜è¦ï¼š

* `UTExportedTypeDeclarations`ï¼šç”¨äºå®šä¹‰åº”ç”¨ç¨‹åºå¸Œæœ›æ•™ç»™å®‰è£…åœ¨ç³»ç»Ÿä¸Šçš„ç³»ç»Ÿçš„**è‡ªå®šä¹‰UTI**ã€‚**UTIæè¿°äº†ä¸€æ®µæ•°æ®**ï¼ˆä¸ä¸€å®šæ˜¯æ–‡ä»¶å†…çš„æ•°æ®ï¼ï¼‰å¹¶ä¸”è‡³å°‘éœ€è¦ä¸€ä¸ª**æ ‡è¯†ç¬¦**ï¼ˆ`com.example.MyCoolDataType`ï¼‰ã€‚æ­¤å¤–ï¼Œå®ƒå¯èƒ½å…·æœ‰ä¸€ä¸ª**åç§°**ï¼ˆ`My Cool Data Type`ï¼‰ï¼Œä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶å**æ‰©å±•å**ï¼ˆ`.myCoolDataType`ï¼‰ï¼Œä¸€ä¸ªæˆ–å¤šä¸ª**MIMEç±»å‹**ï¼ˆ`x-application/my-cool-data-type`ï¼‰ï¼Œä¸€ä¸ªæˆ–å¤šä¸ª**å‰ªè´´æ¿ç±»å‹**ï¼ˆåœ¨ä½¿ç”¨å¤åˆ¶å’Œç²˜è´´ä¼ è¾“è¯¥ç±»å‹çš„æ•°æ®æ—¶ä½¿ç”¨ï¼‰ï¼Œä»¥åŠä¸€ä¸ªæˆ–å¤šä¸ª**ä¼ ç»Ÿæ“ä½œç³»ç»Ÿç±»å‹**ã€‚é€šå¸¸ï¼Œæ‚¨è¿˜å¸Œæœ›UTIç¬¦åˆç°æœ‰çš„UTIï¼ˆä¾‹å¦‚ï¼Œå½“æ‚¨è¯´æ‚¨çš„UTIç¬¦åˆ`public.data`æ—¶ï¼Œä»»ä½•å¯ä»¥å¤„ç†é€šç”¨æ•°æ®çš„è¿›ç¨‹ä¹Ÿå¯ä»¥å¤„ç†æ‚¨çš„UTIï¼‰ã€‚
* ä¾‹å¦‚ï¼šæ‚¨å®šä¹‰äº†è‡ªå·±çš„ä¸“æœ‰æ–‡ä»¶æ•°æ®æ ¼å¼ï¼Œå¹¶ä¸”å¸Œæœ›å…¶ä»–åº”ç”¨ç¨‹åºã€æ’ä»¶ã€æ‰©å±•ç­‰ä¹ŸçŸ¥é“æ­¤æ•°æ®æ ¼å¼ã€‚
* `UTImportedTypeDeclarations`ï¼šæ‚¨ä½¿ç”¨`UTImportedTypeDeclarations`æ¥**å‘ç³»ç»Ÿä»‹ç»æ‚¨å¸Œæœ›åœ¨ç³»ç»Ÿä¸­çŸ¥é“ä½†ä¸æ˜¯æ‚¨çš„UTIçš„UTI**ã€‚
* ä¾‹å¦‚ï¼šæ‚¨çš„åº”ç”¨ç¨‹åºèƒ½å¤Ÿè¯»å–å¦ä¸€ä¸ªåº”ç”¨ç¨‹åºçš„ä¸“æœ‰æ•°æ®æ ¼å¼ï¼Œä½†æ‚¨ä¸çŸ¥é“è¯¥åº”ç”¨ç¨‹åºæ˜¯å¦å·²å®‰è£…åœ¨ç³»ç»Ÿä¸Šã€‚
* `CFBundleDocumentTypes`ï¼šæ‚¨ä½¿ç”¨`CFBundleDocumentTypes`æ¥å‘Šè¯‰ç³»ç»Ÿæ‚¨çš„åº”ç”¨ç¨‹åºèƒ½å¤Ÿæ‰“å¼€å“ªäº›æ–‡æ¡£ç±»å‹ã€‚é™¤éæ‚¨åœ¨æ­¤å¤„**è¿˜åˆ—å‡ºæ‚¨çš„UTI**ï¼Œå¦åˆ™è¿™äº›UTIä¸ä¼šä¸æ‚¨çš„åº”ç”¨ç¨‹åºå…³è”åœ¨Finderä¸­ï¼Œæ‚¨çš„åº”ç”¨ç¨‹åºä¹Ÿä¸ä¼šå‡ºç°åœ¨â€œæ‰“å¼€æ–¹å¼ >â€èœå•ä¸­ã€‚\
å¯¹äºæ–‡æ¡£ç±»å‹ï¼Œæ‚¨å§‹ç»ˆå¿…é¡»è®¾ç½®çš„å”¯ä¸€å†…å®¹æ˜¯è§’è‰²ã€‚**è§’è‰²**å¯ä»¥æ˜¯â€œ**Viewer**â€ï¼ˆæ‚¨å¯ä»¥æ˜¾ç¤ºè¯¥æ–‡ä»¶ç±»å‹ï¼Œä½†æ— æ³•ç¼–è¾‘å®ƒï¼‰ï¼Œâ€œ**Editor**â€ï¼ˆæ‚¨å¯ä»¥æ˜¾ç¤ºå’Œç¼–è¾‘è¯¥æ–‡ä»¶ç±»å‹ï¼‰ï¼Œæˆ–â€œ**None**â€ï¼ˆæœªæŒ‡å®šå¯ä»¥å¯¹è¯¥æ–‡ä»¶æ‰§è¡Œçš„æ“ä½œï¼‰ã€‚
* ä¾‹å¦‚ï¼šæ‚¨å¸Œæœ›æ‚¨çš„åº”ç”¨ç¨‹åºä¸æŸäº›æ–‡ä»¶ç±»å‹å…³è”ï¼Œå¯ä»¥é€šè¿‡æ‰©å±•åã€MIMEç±»å‹æˆ–UTIæ ‡è¯†ç¬¦è¿›è¡Œæ ‡è¯†ã€‚**å¦‚æœæ‚¨å¸Œæœ›æ‚¨çš„åº”ç”¨ç¨‹åºä¸UTIç±»å‹å…³è”ï¼Œåº”ç”¨ç¨‹åºåº”å¯¼å…¥æˆ–å¯¼å‡ºè¯¥ç±»å‹**ï¼Œå¦åˆ™ç³»ç»Ÿå¯èƒ½ä¸çŸ¥é“è¯¥ç±»å‹ï¼Œå¹¶ä¸”æ³¨å†ŒæœªçŸ¥çš„UTIç±»å‹æ ¹æœ¬æ²¡æœ‰ä»»ä½•æ•ˆæœã€‚

## åŠ¨æ€æµ‹è¯•

å¯¹äº**å‘é€æ´»åŠ¨**ï¼Œæ‚¨å¯ä»¥ï¼š

* é’©å–æˆ‘ä»¬åœ¨é™æ€åˆ†æä¸­çœ‹åˆ°çš„æ–¹æ³•ï¼ˆ[`init(activityItems:applicationActivities:)`](https://developer.apple.com/documentation/uikit/uiactivityviewcontroller/1622019-init)ï¼‰ä»¥è·å–`activityItems`å’Œ`applicationActivities`ã€‚
* é€šè¿‡é’©å–[`excludedActivityTypes`å±æ€§](https://developer.apple.com/documentation/uikit/uiactivityviewcontroller/1622009-excludedactivitytypes)æ¥æ‰¾å‡ºè¢«æ’é™¤çš„æ´»åŠ¨ç±»å‹ã€‚

å¯¹äºæ¥æ”¶é¡¹ç›®ï¼Œæ‚¨å¯ä»¥ï¼š

* ä»å¦ä¸€ä¸ªåº”ç”¨ç¨‹åºæˆ–é€šè¿‡AirDropæˆ–ç”µå­é‚®ä»¶ä¸åº”ç”¨ç¨‹åº**å…±äº«**æ–‡ä»¶ã€‚é€‰æ‹©æ–‡ä»¶ä»¥è§¦å‘â€œæ‰“å¼€æ–¹å¼â€¦â€å¯¹è¯æ¡†ï¼ˆå³ï¼Œæ²¡æœ‰é»˜è®¤åº”ç”¨ç¨‹åºä¼šæ‰“å¼€æ–‡ä»¶ï¼Œä¾‹å¦‚PDFï¼‰ã€‚
* é’©å–`application:openURL:options:`å’Œä¹‹å‰é™æ€åˆ†æä¸­è¯†åˆ«å‡ºçš„ä»»ä½•å…¶ä»–æ–¹æ³•ã€‚
* è§‚å¯Ÿåº”ç”¨ç¨‹åºè¡Œä¸ºã€‚
* æ­¤å¤–ï¼Œæ‚¨å¯ä»¥å‘é€ç‰¹å®šçš„æ ¼å¼é”™è¯¯æ–‡ä»¶å’Œ/æˆ–ä½¿ç”¨æ¨¡ç³Šæµ‹è¯•æŠ€æœ¯ã€‚

**åœ¨æ­¤å¤„é˜…è¯»æ›´å¤š**[**ï¼ˆè‹±æ–‡ï¼‰**](https://mobile-security.gitbook.io/mobile-security-testing-guide/ios-testing-guide/0x06h-testing-platform-interaction#dynamic-analysis-8)**ã€‚**


<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>â˜ï¸ HackTricks Cloud â˜ï¸</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ğŸ¦ Twitter ğŸ¦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ğŸ™ï¸ Twitch ğŸ™ï¸</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ğŸ¥ Youtube ğŸ¥</strong></a></summary>

- æ‚¨åœ¨**ç½‘ç»œå®‰å…¨å…¬å¸**å·¥ä½œå—ï¼Ÿæ‚¨æƒ³åœ¨HackTricksä¸­çœ‹åˆ°æ‚¨çš„å…¬å¸å¹¿å‘Šå—ï¼Ÿæˆ–è€…æ‚¨æƒ³è·å¾—PEASSçš„**æœ€æ–°ç‰ˆæœ¬æˆ–ä¸‹è½½PDFæ ¼å¼çš„HackTricks**ï¼Ÿè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼

- å‘ç°æˆ‘ä»¬çš„ç‹¬å®¶[NFTæ”¶è—å“**The PEASS Family**](https://opensea.io/collection/the-peass-family)

- è·å–[**å®˜æ–¹PEASSå’ŒHackTricksè¡£ç‰©**](https://peass.creator-spring.com)

- **åŠ å…¥**[**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discordç¾¤ç»„**](https://discord.gg/hRep4RUj7f)æˆ–[**ç”µæŠ¥ç¾¤ç»„**](https://t.me/peass)ï¼Œæˆ–åœ¨**Twitter**ä¸Š**å…³æ³¨**æˆ‘[**ğŸ¦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks_live)**ã€‚**

- **é€šè¿‡å‘[hacktricks repo](https://github.com/carlospolop/hacktricks)å’Œ[hacktricks-cloud repo](https://github.com/carlospolop/hacktricks-cloud)æäº¤PRæ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§**ã€‚

</details>
