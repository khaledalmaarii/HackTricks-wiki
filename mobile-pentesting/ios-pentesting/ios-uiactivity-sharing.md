# Deljenje UI aktivnosti na iOS-u

<details>

<summary><strong>NauÄite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Drugi naÄini podrÅ¡ke HackTricks-u:

* Ako Å¾elite da vidite **vaÅ¡u kompaniju reklamiranu na HackTricks-u** ili **preuzmete HackTricks u PDF formatu** proverite [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Nabavite [**zvaniÄni PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Otkrijte [**The PEASS Family**](https://opensea.io/collection/the-peass-family), naÅ¡u kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* **PridruÅ¾ite se** ğŸ’¬ [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili nas **pratite** na **Twitter-u** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Podelite svoje hakovanje trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>

# Deljenje UI aktivnosti pojednostavljeno

Od iOS 6 nadalje, treÄ‡e strane aplikacije su omoguÄ‡ene da **deljenje podataka** kao Å¡to su tekst, URL-ovi ili slike koriste mehanizme poput AirDrop-a, kako je opisano u Apple-ovom [VodiÄu za meÄ‘uaplikacijsku komunikaciju](https://developer.apple.com/library/archive/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/Inter-AppCommunication/Inter-AppCommunication.html#//apple_ref/doc/uid/TP40007072-CH6-SW3). Ova funkcionalnost se manifestuje kroz sistemski _deljeni list aktivnosti_ koji se prikazuje prilikom interakcije sa dugmetom "Deljenje".

Potpuni pregled svih ugraÄ‘enih opcija za deljenje dostupan je na [UIActivity.ActivityType](https://developer.apple.com/documentation/uikit/uiactivity/activitytype). RazvijaÄi mogu izabrati da iskljuÄe odreÄ‘ene opcije za deljenje ako smatraju da nisu pogodne za njihovu aplikaciju.

## **Kako deliti podatke**

PaÅ¾nja treba biti usmerena na:

- Prirodu podataka koji se dele.
- UkljuÄivanje prilagoÄ‘enih aktivnosti.
- IskljuÄivanje odreÄ‘enih tipova aktivnosti.

Deljenje se olakÅ¡ava putem instanciranja `UIActivityViewController`-a, kojem se prosleÄ‘uju stavke namenjene za deljenje. To se postiÅ¾e pozivanjem:
```bash
$ rabin2 -zq Telegram\ X.app/Telegram\ X | grep -i activityItems
0x1000df034 45 44 initWithActivityItems:applicationActivities:
```
Razvojni programeri bi trebali paÅ¾ljivo pregledati `UIActivityViewController` za aktivnosti i prilagoÄ‘ene aktivnosti s kojima je inicijaliziran, kao i za bilo koje navedene `excludedActivityTypes`.

## **Kako primiti podatke**

SljedeÄ‡i aspekti su kljuÄni prilikom primanja podataka:

- Deklaracija **prilagoÄ‘enih vrsta dokumenata**.
- Specifikacija **vrsta dokumenata koje aplikacija moÅ¾e otvoriti**.
- Verifikacija **integriteta primljenih podataka**.

Bez pristupa izvornom kodu, ipak je moguÄ‡e pregledati `Info.plist` za kljuÄeve poput `UTExportedTypeDeclarations`, `UTImportedTypeDeclarations` i `CFBundleDocumentTypes` kako bi se razumjeli tipovi dokumenata koje aplikacija moÅ¾e obraditi i deklarirati.

Kratki vodiÄ o ovim kljuÄevima dostupan je na [Stackoverflow](https://stackoverflow.com/questions/21937978/what-are-utimportedtypedeclarations-and-utexportedtypedeclarations-used-for-on-i), koji istiÄe vaÅ¾nost definiranja i uvoza UTI-ova za prepoznavanje na razini sustava i povezivanje vrsta dokumenata s vaÅ¡om aplikacijom za integraciju u dijalog "Otvori s".

## Pristup dinamiÄkom testiranju

Za testiranje **slanja aktivnosti**, moguÄ‡e je:

- Povezati se s metodom `init(activityItems:applicationActivities:)` kako bi se uhvatili predmeti i aktivnosti koje se dijele.
- Identificirati iskljuÄene aktivnosti presretanjem svojstva `excludedActivityTypes`.

Za **primanje predmeta**, ukljuÄuje:

- Dijeljenje datoteke s aplikacijom s druge izvore (npr. AirDrop, e-poÅ¡ta) koja pokreÄ‡e dijalog "Otvori s...".
- Povezivanje `application:openURL:options:` i drugih identificiranih metoda tijekom statiÄke analize kako bi se promatrala reakcija aplikacije.
- Upotreba neispravnih datoteka ili tehnika ispitivanja otpornosti aplikacije kako bi se procijenila njena robusnost.

## Reference
* [https://mobile-security.gitbook.io/mobile-security-testing-guide/ios-testing-guide/0x06h-testing-platform-interaction](https://mobile-security.gitbook.io/mobile-security-testing-guide/ios-testing-guide/0x06h-testing-platform-interaction)

<details>

<summary><strong>NauÄite hakiranje AWS-a od nule do heroja s</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Drugi naÄini podrÅ¡ke HackTricks-u:

* Ako Å¾elite vidjeti **oglaÅ¡avanje vaÅ¡e tvrtke u HackTricks-u** ili **preuzeti HackTricks u PDF-u**, provjerite [**PLANOVE PRETPLATE**](https://github.com/sponsors/carlospolop)!
* Nabavite [**sluÅ¾beni PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Otkrijte [**The PEASS Family**](https://opensea.io/collection/the-peass-family), naÅ¡u kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* **PridruÅ¾ite se** ğŸ’¬ [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili nas **pratite** na **Twitteru** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Podijelite svoje hakirajuÄ‡e trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorije.

</details>
