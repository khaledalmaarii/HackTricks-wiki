# iOS UIActivity Sharing

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

# UIActivity Sharing Simplified

iOS 6ä»¥é™ã€ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¯ã€Appleã®[ã‚¢ãƒ—ãƒªé–“é€šä¿¡ã‚¬ã‚¤ãƒ‰](https://developer.apple.com/library/archive/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/Inter-AppCommunication/Inter-AppCommunication.html#//apple_ref/doc/uid/TP40007072-CH6-SW3)ã«è¨˜è¼‰ã•ã‚Œã¦ã„ã‚‹ã‚ˆã†ã«ã€AirDropãªã©ã®ãƒ¡ã‚«ãƒ‹ã‚ºãƒ ã‚’ä½¿ç”¨ã—ã¦ã€ãƒ†ã‚­ã‚¹ãƒˆã€URLã€ç”»åƒãªã©ã®**ãƒ‡ãƒ¼ã‚¿ã‚’å…±æœ‰**ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚ã“ã®æ©Ÿèƒ½ã¯ã€ã€Œå…±æœ‰ã€ãƒœã‚¿ãƒ³ã¨å¯¾è©±ã™ã‚‹ã“ã¨ã§è¡¨ç¤ºã•ã‚Œã‚‹ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã®_å…±æœ‰ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ã‚·ãƒ¼ãƒˆ_ã‚’é€šã˜ã¦ç¾ã‚Œã¾ã™ã€‚

ã™ã¹ã¦ã®çµ„ã¿è¾¼ã¿å…±æœ‰ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®åŒ…æ‹¬çš„ãªåˆ—æŒ™ã¯ã€[UIActivity.ActivityType](https://developer.apple.com/documentation/uikit/uiactivity/activitytype)ã§åˆ©ç”¨å¯èƒ½ã§ã™ã€‚é–‹ç™ºè€…ã¯ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ä¸é©åˆ‡ã¨åˆ¤æ–­ã—ãŸå ´åˆã€ç‰¹å®šã®å…±æœ‰ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’é™¤å¤–ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

## **ãƒ‡ãƒ¼ã‚¿ã‚’å…±æœ‰ã™ã‚‹æ–¹æ³•**

æ³¨æ„ã™ã¹ãç‚¹ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ï¼š

- å…±æœ‰ã•ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿ã®æ€§è³ªã€‚
- ã‚«ã‚¹ã‚¿ãƒ ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ã®å«æœ‰ã€‚
- ç‰¹å®šã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ã‚¿ã‚¤ãƒ—ã®é™¤å¤–ã€‚

å…±æœ‰ã¯ã€å…±æœ‰ã™ã‚‹ã‚¢ã‚¤ãƒ†ãƒ ã‚’æ¸¡ã™`UIActivityViewController`ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹åŒ–ã‚’é€šã˜ã¦ä¿ƒé€²ã•ã‚Œã¾ã™ã€‚ã“ã‚Œã¯ã€æ¬¡ã®ã‚ˆã†ã«å‘¼ã³å‡ºã™ã“ã¨ã§å®Ÿç¾ã•ã‚Œã¾ã™ï¼š
```bash
$ rabin2 -zq Telegram\ X.app/Telegram\ X | grep -i activityItems
0x1000df034 45 44 initWithActivityItems:applicationActivities:
```
Developers should scrutinize the `UIActivityViewController` for the activities and custom activities it's initialized with, as well as any specified `excludedActivityTypes`.

## **ãƒ‡ãƒ¼ã‚¿ã®å—ä¿¡æ–¹æ³•**

ãƒ‡ãƒ¼ã‚¿ã‚’å—ä¿¡ã™ã‚‹éš›ã«é‡è¦ãªå´é¢ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ï¼š

- **ã‚«ã‚¹ã‚¿ãƒ ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚¿ã‚¤ãƒ—**ã®å®£è¨€ã€‚
- **ã‚¢ãƒ—ãƒªãŒé–‹ã‘ã‚‹ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚¿ã‚¤ãƒ—**ã®æŒ‡å®šã€‚
- **å—ä¿¡ãƒ‡ãƒ¼ã‚¿ã®æ•´åˆæ€§ã®ç¢ºèª**ã€‚

ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ããªãã¦ã‚‚ã€`Info.plist`ã‚’èª¿æŸ»ã—ã¦`UTExportedTypeDeclarations`ã€`UTImportedTypeDeclarations`ã€`CFBundleDocumentTypes`ã®ã‚ˆã†ãªã‚­ãƒ¼ã‚’ç¢ºèªã™ã‚‹ã“ã¨ã§ã€ã‚¢ãƒ—ãƒªãŒæ‰±ãˆã‚‹ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚¿ã‚¤ãƒ—ã‚’ç†è§£ã§ãã¾ã™ã€‚

ã“ã‚Œã‚‰ã®ã‚­ãƒ¼ã«é–¢ã™ã‚‹ç°¡æ½”ãªã‚¬ã‚¤ãƒ‰ã¯[Stackoverflow](https://stackoverflow.com/questions/21937978/what-are-utimportedtypedeclarations-and-utexportedtypedeclarations-used-for-on-i)ã§å…¥æ‰‹å¯èƒ½ã§ã€ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã§ã®èªè­˜ã®ãŸã‚ã«UTIã‚’å®šç¾©ãŠã‚ˆã³ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã€ã‚¢ãƒ—ãƒªã¨ã®çµ±åˆã®ãŸã‚ã«ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚¿ã‚¤ãƒ—ã‚’é–¢é€£ä»˜ã‘ã‚‹é‡è¦æ€§ã‚’å¼·èª¿ã—ã¦ã„ã¾ã™ã€‚

## å‹•çš„ãƒ†ã‚¹ãƒˆã‚¢ãƒ—ãƒ­ãƒ¼ãƒ

**ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ã®é€ä¿¡**ã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹ã«ã¯ã€æ¬¡ã®ã“ã¨ãŒã§ãã¾ã™ï¼š

- `init(activityItems:applicationActivities:)`ãƒ¡ã‚½ãƒƒãƒ‰ã«ãƒ•ãƒƒã‚¯ã—ã¦ã€å…±æœ‰ã•ã‚Œã‚‹ã‚¢ã‚¤ãƒ†ãƒ ã¨ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ã‚’ã‚­ãƒ£ãƒ—ãƒãƒ£ã—ã¾ã™ã€‚
- `excludedActivityTypes`ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ã‚¤ãƒ³ã‚¿ãƒ¼ã‚»ãƒ—ãƒˆã—ã¦é™¤å¤–ã•ã‚ŒãŸã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ã‚’ç‰¹å®šã—ã¾ã™ã€‚

**ã‚¢ã‚¤ãƒ†ãƒ ã®å—ä¿¡**ã«ã¯ã€æ¬¡ã®ã“ã¨ãŒå«ã¾ã‚Œã¾ã™ï¼š

- ä»–ã®ã‚½ãƒ¼ã‚¹ï¼ˆä¾‹ï¼šAirDropã€ãƒ¡ãƒ¼ãƒ«ï¼‰ã‹ã‚‰ã‚¢ãƒ—ãƒªã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å…±æœ‰ã—ã€ã€ŒOpen with...ã€ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã‚’è¡¨ç¤ºã•ã›ã¾ã™ã€‚
- é™çš„åˆ†æä¸­ã«ç‰¹å®šã•ã‚ŒãŸä»–ã®ãƒ¡ã‚½ãƒƒãƒ‰ã®ä¸­ã§`application:openURL:options:`ã«ãƒ•ãƒƒã‚¯ã—ã¦ã€ã‚¢ãƒ—ãƒªã®å¿œç­”ã‚’è¦³å¯Ÿã—ã¾ã™ã€‚
- ä¸æ­£ãªãƒ•ã‚¡ã‚¤ãƒ«ã‚„ãƒ•ã‚¡ã‚¸ãƒ³ã‚°æŠ€è¡“ã‚’ä½¿ç”¨ã—ã¦ã‚¢ãƒ—ãƒªã®å …ç‰¢æ€§ã‚’è©•ä¾¡ã—ã¾ã™ã€‚

## å‚è€ƒæ–‡çŒ®
* [https://mobile-security.gitbook.io/mobile-security-testing-guide/ios-testing-guide/0x06h-testing-platform-interaction](https://mobile-security.gitbook.io/mobile-security-testing-guide/ios-testing-guide/0x06h-testing-platform-interaction)

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
