# iOS UIActivity PaylaÅŸÄ±mÄ±

<details>

<summary><strong>AWS hacklemeyi sÄ±fÄ±rdan kahramanla Ã¶ÄŸrenin</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ±)</strong></a><strong>!</strong></summary>

HackTricks'i desteklemenin diÄŸer yollarÄ±:

* **Åirketinizi HackTricks'te reklamÄ±nÄ±zÄ± gÃ¶rmek** veya **HackTricks'i PDF olarak indirmek** iÃ§in [**ABONELÄ°K PLANLARINI**](https://github.com/sponsors/carlospolop) kontrol edin!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* [**The PEASS Ailesi'ni**](https://opensea.io/collection/the-peass-family) keÅŸfedin, Ã¶zel [**NFT'lerimiz**](https://opensea.io/collection/the-peass-family) koleksiyonumuz
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katÄ±lÄ±n** veya **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)**'Ä± takip edin**.
* **Hacking hilelerinizi** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna **PR gÃ¶ndererek paylaÅŸÄ±n**.

</details>

# UIActivity PaylaÅŸÄ±mÄ± BasitleÅŸtirildi

iOS 6'dan itibaren, Ã¼Ã§Ã¼ncÃ¼ taraf uygulamalarÄ±n metin, URL veya resim gibi verileri paylaÅŸmasÄ±na olanak tanÄ±nmÄ±ÅŸtÄ±r. Bu Ã¶zellik, Apple'Ä±n [Uygulama ArasÄ± Ä°letiÅŸim kÄ±lavuzunda](https://developer.apple.com/library/archive/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/Inter-AppCommunication/Inter-AppCommunication.html#//apple_ref/doc/uid/TP40007072-CH6-SW3) belirtildiÄŸi gibi AirDrop gibi mekanizmalar aracÄ±lÄ±ÄŸÄ±yla gerÃ§ekleÅŸir. Bu Ã¶zellik, "PaylaÅŸ" dÃ¼ÄŸmesiyle etkileÅŸime geÃ§ildiÄŸinde ortaya Ã§Ä±kan sistem genelinde bir _paylaÅŸÄ±m etkinlik sayfasÄ±_ ile kendini gÃ¶sterir.

TÃ¼m yerleÅŸik paylaÅŸÄ±m seÃ§eneklerinin kapsamlÄ± bir numaralandÄ±rmasÄ± [UIActivity.ActivityType](https://developer.apple.com/documentation/uikit/uiactivity/activitytype) adresinde bulunabilir. GeliÅŸtiriciler, uygulamalarÄ± iÃ§in uygun bulmadÄ±klarÄ± belirli paylaÅŸÄ±m seÃ§eneklerini hariÃ§ tutmayÄ± tercih edebilirler.

## **Veri NasÄ±l PaylaÅŸÄ±lÄ±r**

Dikkat ÅŸu noktalara yÃ¶nlendirilmelidir:

- PaylaÅŸÄ±lan verinin doÄŸasÄ±.
- Ã–zel etkinliklerin dahil edilmesi.
- Belirli etkinlik tÃ¼rlerinin hariÃ§ tutulmasÄ±.

PaylaÅŸÄ±m, paylaÅŸÄ±lacak Ã¶ÄŸelerin geÃ§irildiÄŸi bir `UIActivityViewController` Ã¶rnekleme ile kolaylaÅŸtÄ±rÄ±lÄ±r. Bunun iÃ§in aÅŸaÄŸÄ±daki Ã§aÄŸrÄ± yapÄ±lÄ±r:
```bash
$ rabin2 -zq Telegram\ X.app/Telegram\ X | grep -i activityItems
0x1000df034 45 44 initWithActivityItems:applicationActivities:
```
GeliÅŸtiriciler, `UIActivityViewController`'Ä± incelemeli ve baÅŸlatÄ±ldÄ±ÄŸÄ± aktiviteleri ve Ã¶zel aktiviteleri, ayrÄ±ca belirtilen `excludedActivityTypes`'Ä± dikkatlice kontrol etmelidir.

## **Veri Alma NasÄ±l YapÄ±lÄ±r**

Veri alÄ±rken aÅŸaÄŸÄ±daki unsurlar Ã¶nemlidir:

- **Ã–zel belge tÃ¼rlerinin** bildirimi.
- UygulamanÄ±n aÃ§abileceÄŸi **belge tÃ¼rlerinin belirtilmesi**.
- AlÄ±nan verinin **bÃ¼tÃ¼nlÃ¼ÄŸÃ¼nÃ¼n doÄŸrulanmasÄ±**.

Kaynak koduna eriÅŸim olmadan, bir uygulamanÄ±n hangi belge tÃ¼rlerini iÅŸleyebileceÄŸini ve bildirebileceÄŸini anlamak iÃ§in `Info.plist` dosyasÄ± incelenebilir. `UTExportedTypeDeclarations`, `UTImportedTypeDeclarations` ve `CFBundleDocumentTypes` gibi anahtarlar bu tÃ¼r belgelerin tanÄ±mlanmasÄ± ve sistem genelinde tanÄ±nmasÄ± iÃ§in UTI'larÄ±n tanÄ±mlanmasÄ±nÄ±n ve uygulamanÄ±zÄ±n "AÃ§ ile" iletiÅŸim kutusuna entegre edilmesinin Ã¶nemini vurgulamaktadÄ±r.

Bu anahtarlar hakkÄ±nda Ã¶zlÃ¼ bir kÄ±lavuz [Stackoverflow](https://stackoverflow.com/questions/21937978/what-are-utimportedtypedeclarations-and-utexportedtypedeclarations-used-for-on-i) Ã¼zerinde mevcuttur.

## Dinamik Test YaklaÅŸÄ±mÄ±

**Aktiviteleri gÃ¶ndermek** iÃ§in ÅŸunlar yapÄ±labilir:

- PaylaÅŸÄ±lan Ã¶ÄŸeleri ve paylaÅŸÄ±lan aktiviteleri yakalamak iÃ§in `init(activityItems:applicationActivities:)` yÃ¶ntemine baÄŸlanmak.
- `excludedActivityTypes` Ã¶zelliÄŸini engelleyen aktiviteleri yakalamak iÃ§in `excludedActivityTypes` Ã¶zelliÄŸini engelleyen aktiviteleri yakalamak.

**Ã–ÄŸeleri almak** iÃ§in ÅŸunlar yapÄ±lmalÄ±dÄ±r:

- BaÅŸka bir kaynaktan (Ã¶rneÄŸin, AirDrop, e-posta) uygulamayla bir dosya paylaÅŸmak ve "AÃ§ ile..." iletiÅŸim kutusunu tetiklemek.
- UygulamanÄ±n yanÄ±tÄ±nÄ± gÃ¶zlemlemek iÃ§in statik analiz sÄ±rasÄ±nda belirlenen diÄŸer yÃ¶ntemler arasÄ±nda `application:openURL:options:` yÃ¶ntemine baÄŸlanmak.
- UygulamanÄ±n saÄŸlamlÄ±ÄŸÄ±nÄ± deÄŸerlendirmek iÃ§in hatalÄ± dosyalar veya fuzzing teknikleri kullanmak.

## Referanslar
* [https://mobile-security.gitbook.io/mobile-security-testing-guide/ios-testing-guide/0x06h-testing-platform-interaction](https://mobile-security.gitbook.io/mobile-security-testing-guide/ios-testing-guide/0x06h-testing-platform-interaction)

<details>

<summary><strong>AWS hacklemeyi sÄ±fÄ±rdan kahraman olmak iÃ§in</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

HackTricks'i desteklemenin diÄŸer yollarÄ±:

* Åirketinizi HackTricks'te **reklamÄ±nÄ±zÄ± gÃ¶rmek veya HackTricks'i PDF olarak indirmek** iÃ§in [**ABONELÄ°K PLANLARI**](https://github.com/sponsors/carlospolop)'na gÃ¶z atÄ±n!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* Ã–zel [**NFT'lerden**](https://opensea.io/collection/the-peass-family) oluÅŸan koleksiyonumuz olan [**The PEASS Family**](https://opensea.io/collection/the-peass-family)'yi keÅŸfedin
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n veya **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)'u takip edin.
* **Hacking hilelerinizi** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna PR gÃ¶ndererek paylaÅŸÄ±n.

</details>
