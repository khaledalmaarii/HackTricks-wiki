{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

<figure><img src="https://pentest.eu/RENDER_WebSec_10fps_21sec_9MB_29042024.gif" alt=""><figcaption></figcaption></figure>

{% embed url="https://websec.nl/" %}


iOS ê¸°ê¸°ì—ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ ê°„ ë°ì´í„° ê³µìœ ëŠ” [`UIPasteboard`](https://developer.apple.com/documentation/uikit/uipasteboard) ë©”ì»¤ë‹ˆì¦˜ì— ì˜í•´ ì´‰ì§„ë˜ë©°, ì´ëŠ” ë‘ ê°€ì§€ ì£¼ìš” ë²”ì£¼ë¡œ ë‚˜ë‰©ë‹ˆë‹¤:

- **ì‹œìŠ¤í…œ ì „ì²´ ì¼ë°˜ ë¶™ì—¬ë„£ê¸° ë³´ë“œ**: ì´ëŠ” **ëª¨ë“  ì• í”Œë¦¬ì¼€ì´ì…˜**ê³¼ ë°ì´í„°ë¥¼ ê³µìœ í•˜ëŠ” ë° ì‚¬ìš©ë˜ë©°, ì¥ì¹˜ ì¬ì‹œì‘ ë° ì•± ì œê±° í›„ì—ë„ ë°ì´í„°ë¥¼ ì§€ì†ì ìœ¼ë¡œ ìœ ì§€í•˜ë„ë¡ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ ê¸°ëŠ¥ì€ iOS 10ë¶€í„° ì œê³µë©ë‹ˆë‹¤.
- **ì‚¬ìš©ì ì •ì˜ / ëª…ëª…ëœ ë¶™ì—¬ë„£ê¸° ë³´ë“œ**: ì´ëŠ” **ì•± ë‚´ì—ì„œ ë˜ëŠ” ë™ì¼í•œ íŒ€ IDë¥¼ ê³µìœ í•˜ëŠ” ë‹¤ë¥¸ ì•±ê³¼** ë°ì´í„°ë¥¼ ê³µìœ í•˜ê¸° ìœ„í•´ íŠ¹ë³„íˆ ì„¤ê³„ë˜ì—ˆìœ¼ë©°, ì´ë¥¼ ìƒì„±í•˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ í”„ë¡œì„¸ìŠ¤ì˜ ìˆ˜ëª… ì´ìƒìœ¼ë¡œ ì§€ì†ë˜ë„ë¡ ì„¤ê³„ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ì´ëŠ” iOS 10ì—ì„œ ë„ì…ëœ ë³€ê²½ ì‚¬í•­ì„ ë”°ë¦…ë‹ˆë‹¤.

**ë³´ì•ˆ ê³ ë ¤ì‚¬í•­**ì€ ë¶™ì—¬ë„£ê¸° ë³´ë“œë¥¼ ì‚¬ìš©í•  ë•Œ ì¤‘ìš”í•œ ì—­í• ì„ í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´:
- ì‚¬ìš©ìê°€ **ë¶™ì—¬ë„£ê¸° ë³´ë“œ**ì— ì ‘ê·¼í•  ì•± ê¶Œí•œì„ ê´€ë¦¬í•  ìˆ˜ ìˆëŠ” ë©”ì»¤ë‹ˆì¦˜ì´ ì—†ìŠµë‹ˆë‹¤.
- ë¶™ì—¬ë„£ê¸° ë³´ë“œì— ëŒ€í•œ ë¬´ë‹¨ ë°°ê²½ ëª¨ë‹ˆí„°ë§ ìœ„í—˜ì„ ì™„í™”í•˜ê¸° ìœ„í•´, ì ‘ê·¼ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì „ê²½ì— ìˆì„ ë•Œë¡œ ì œí•œë©ë‹ˆë‹¤(ì´ê²ƒì€ iOS 9ë¶€í„°).
- ê°œì¸ ì •ë³´ ë³´í˜¸ ë¬¸ì œë¡œ ì¸í•´ ì§€ì†ì ì¸ ëª…ëª…ëœ ë¶™ì—¬ë„£ê¸° ë³´ë“œì˜ ì‚¬ìš©ì€ ê³µìœ  ì»¨í…Œì´ë„ˆë¥¼ ì„ í˜¸í•©ë‹ˆë‹¤.
- iOS 10ì—ì„œ ë„ì…ëœ **ìœ ë‹ˆë²„ì„¤ í´ë¦½ë³´ë“œ** ê¸°ëŠ¥ì€ ì¼ë°˜ ë¶™ì—¬ë„£ê¸° ë³´ë“œë¥¼ í†µí•´ ì¥ì¹˜ ê°„ ì½˜í…ì¸ ë¥¼ ê³µìœ í•  ìˆ˜ ìˆê²Œ í•˜ë©°, ê°œë°œìëŠ” ë°ì´í„° ë§Œë£Œë¥¼ ì„¤ì •í•˜ê³  ìë™ ì½˜í…ì¸  ì „ì†¡ì„ ë¹„í™œì„±í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**ë¯¼ê°í•œ ì •ë³´ê°€ ìš°ì—°íˆ** ì „ì—­ ë¶™ì—¬ë„£ê¸° ë³´ë“œì— ì €ì¥ë˜ì§€ ì•Šë„ë¡ í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤. ë˜í•œ, ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ì „ì—­ ë¶™ì—¬ë„£ê¸° ë³´ë“œ ë°ì´í„°ë¥¼ ì˜ë„í•˜ì§€ ì•Šì€ ì‘ì—…ì— ì•…ìš©ë˜ì§€ ì•Šë„ë¡ ì„¤ê³„ë˜ì–´ì•¼ í•˜ë©°, ê°œë°œìëŠ” ë¯¼ê°í•œ ì •ë³´ë¥¼ í´ë¦½ë³´ë“œì— ë³µì‚¬í•˜ëŠ” ê²ƒì„ ë°©ì§€í•˜ê¸° ìœ„í•œ ì¡°ì¹˜ë¥¼ êµ¬í˜„í•˜ë„ë¡ ê¶Œì¥ë©ë‹ˆë‹¤.

### ì •ì  ë¶„ì„

ì •ì  ë¶„ì„ì„ ìœ„í•´ ì†ŒìŠ¤ ì½”ë“œë‚˜ ë°”ì´ë„ˆë¦¬ì—ì„œ ë‹¤ìŒì„ ê²€ìƒ‰í•©ë‹ˆë‹¤:
- `generalPasteboard`ëŠ” **ì‹œìŠ¤í…œ ì „ì²´ ì¼ë°˜ ë¶™ì—¬ë„£ê¸° ë³´ë“œ**ì˜ ì‚¬ìš©ì„ ì‹ë³„í•©ë‹ˆë‹¤.
- `pasteboardWithName:create:` ë° `pasteboardWithUniqueName`ì€ **ì‚¬ìš©ì ì •ì˜ ë¶™ì—¬ë„£ê¸° ë³´ë“œ** ìƒì„±ì„ ìœ„í•œ ê²ƒì…ë‹ˆë‹¤. ì§€ì†ì„±ì´ í™œì„±í™”ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ì´ëŠ” ë” ì´ìƒ ì‚¬ìš©ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

### ë™ì  ë¶„ì„

ë™ì  ë¶„ì„ì€ íŠ¹ì • ë©”ì„œë“œë¥¼ í›„í‚¹í•˜ê±°ë‚˜ ì¶”ì í•˜ëŠ” ê²ƒì„ í¬í•¨í•©ë‹ˆë‹¤:
- ì‹œìŠ¤í…œ ì „ì²´ ì‚¬ìš©ì„ ìœ„í•´ `generalPasteboard`ë¥¼ ëª¨ë‹ˆí„°ë§í•©ë‹ˆë‹¤.
- ì‚¬ìš©ì ì •ì˜ êµ¬í˜„ì„ ìœ„í•´ `pasteboardWithName:create:` ë° `pasteboardWithUniqueName`ì„ ì¶”ì í•©ë‹ˆë‹¤.
- ì§€ì†ì„± ì„¤ì •ì„ í™•ì¸í•˜ê¸° ìœ„í•´ ë” ì´ìƒ ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” `setPersistent:` ë©”ì„œë“œ í˜¸ì¶œì„ ê´€ì°°í•©ë‹ˆë‹¤.

ëª¨ë‹ˆí„°ë§í•´ì•¼ í•  ì£¼ìš” ì„¸ë¶€ ì‚¬í•­ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:
- **ë¶™ì—¬ë„£ê¸° ë³´ë“œ ì´ë¦„** ë° **ë‚´ìš©**(ì˜ˆ: ë¬¸ìì—´, URL, ì´ë¯¸ì§€ í™•ì¸).
- ì¡´ì¬í•˜ëŠ” **í•­ëª© ìˆ˜** ë° **ë°ì´í„° ìœ í˜•**, í‘œì¤€ ë° ì‚¬ìš©ì ì •ì˜ ë°ì´í„° ìœ í˜• ê²€ì‚¬ë¥¼ í™œìš©í•©ë‹ˆë‹¤.
- `setItems:options:` ë©”ì„œë“œë¥¼ ê²€ì‚¬í•˜ì—¬ **ë§Œë£Œ ë° ë¡œì»¬ ì „ìš© ì˜µì…˜**ì„ í™•ì¸í•©ë‹ˆë‹¤.

ëª¨ë‹ˆí„°ë§ ë„êµ¬ ì‚¬ìš©ì˜ ì˜ˆëŠ” **objectionì˜ ë¶™ì—¬ë„£ê¸° ë³´ë“œ ëª¨ë‹ˆí„°**ë¡œ, ì¼ë°˜ ë¶™ì—¬ë„£ê¸° ë³´ë“œë¥¼ 5ì´ˆë§ˆë‹¤ ë³€ê²½ ì‚¬í•­ì„ í™•ì¸í•˜ê³  ìƒˆë¡œìš´ ë°ì´í„°ë¥¼ ì¶œë ¥í•©ë‹ˆë‹¤.

ë‹¤ìŒì€ objectionì˜ ì ‘ê·¼ ë°©ì‹ì—ì„œ ì˜ê°ì„ ë°›ì€ ê°„ë‹¨í•œ JavaScript ìŠ¤í¬ë¦½íŠ¸ ì˜ˆì œë¡œ, ë¶™ì—¬ë„£ê¸° ë³´ë“œì˜ ë³€ê²½ ì‚¬í•­ì„ 5ì´ˆë§ˆë‹¤ ì½ê³  ê¸°ë¡í•©ë‹ˆë‹¤:
```javascript
const UIPasteboard = ObjC.classes.UIPasteboard;
const Pasteboard = UIPasteboard.generalPasteboard();
var items = "";
var count = Pasteboard.changeCount().toString();

setInterval(function () {
const currentCount = Pasteboard.changeCount().toString();
const currentItems = Pasteboard.items().toString();

if (currentCount === count) { return; }

items = currentItems;
count = currentCount;

console.log('[* Pasteboard changed] count: ' + count +
' hasStrings: ' + Pasteboard.hasStrings().toString() +
' hasURLs: ' + Pasteboard.hasURLs().toString() +
' hasImages: ' + Pasteboard.hasImages().toString());
console.log(items);

}, 1000 * 5);
```
## References

* [https://mobile-security.gitbook.io/mobile-security-testing-guide/ios-testing-guide/0x06h-testing-platform-interaction#testing-object-persistence-mstg-platform-8](https://mobile-security.gitbook.io/mobile-security-testing-guide/ios-testing-guide/0x06h-testing-platform-interaction#testing-object-persistence-mstg-platform-8)
* [https://hackmd.io/@robihamanto/owasp-robi](https://hackmd.io/@robihamanto/owasp-robi)
* [https://mas.owasp.org/MASTG/tests/ios/MASVS-PLATFORM/MASTG-TEST-0073/](https://mas.owasp.org/MASTG/tests/ios/MASVS-PLATFORM/MASTG-TEST-0073/)

<figure><img src="https://pentest.eu/RENDER_WebSec_10fps_21sec_9MB_29042024.gif" alt=""><figcaption></figcaption></figure>

{% embed url="https://websec.nl/" %}


{% hint style="success" %}
AWS í•´í‚¹ ë°°ìš°ê¸° ë° ì—°ìŠµí•˜ê¸°:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
GCP í•´í‚¹ ë°°ìš°ê¸° ë° ì—°ìŠµí•˜ê¸°: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks ì§€ì›í•˜ê¸°</summary>

* [**êµ¬ë… ê³„íš**](https://github.com/sponsors/carlospolop) í™•ì¸í•˜ê¸°!
* **ğŸ’¬ [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— ì°¸ì—¬í•˜ê±°ë‚˜ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**ë¥¼ íŒ”ë¡œìš°í•˜ì„¸ìš”.**
* **[**HackTricks**](https://github.com/carlospolop/hacktricks) ë° [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) ê¹ƒí—ˆë¸Œ ë¦¬í¬ì§€í† ë¦¬ì— PRì„ ì œì¶œí•˜ì—¬ í•´í‚¹ íŒì„ ê³µìœ í•˜ì„¸ìš”.**

</details>
{% endhint %}
