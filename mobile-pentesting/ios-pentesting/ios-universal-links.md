# iOS Universal Links


<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong>ë¥¼ í†µí•´ AWS í•´í‚¹ì„ ì²˜ìŒë¶€í„° ì „ë¬¸ê°€ê¹Œì§€ ë°°ì›Œë³´ì„¸ìš”<strong>!</strong></summary>

HackTricksë¥¼ ì§€ì›í•˜ëŠ” ë‹¤ë¥¸ ë°©ë²•:

* **íšŒì‚¬ë¥¼ HackTricksì—ì„œ ê´‘ê³ í•˜ê±°ë‚˜ HackTricksë¥¼ PDFë¡œ ë‹¤ìš´ë¡œë“œ**í•˜ë ¤ë©´ [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)ë¥¼ í™•ì¸í•˜ì„¸ìš”!
* [**ê³µì‹ PEASS & HackTricks ìŠ¤ì›¨ê·¸**](https://peass.creator-spring.com)ë¥¼ ì–»ìœ¼ì„¸ìš”.
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ë¥¼ ë°œê²¬í•˜ì„¸ìš”. ë…ì ì ì¸ [**NFTs**](https://opensea.io/collection/the-peass-family) ì»¬ë ‰ì…˜ì…ë‹ˆë‹¤.
* ğŸ’¬ [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— **ì°¸ì—¬**í•˜ê±°ë‚˜ **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)**ë¥¼** **íŒ”ë¡œìš°**í•˜ì„¸ìš”.
* **HackTricks**ì™€ **HackTricks Cloud** github ì €ì¥ì†Œì— PRì„ ì œì¶œí•˜ì—¬ **í•´í‚¹ íŠ¸ë¦­ì„ ê³µìœ **í•˜ì„¸ìš”.

</details>


## ì†Œê°œ

Universal ë§í¬ëŠ” ì‚¬ìš©ìì—ê²Œ **ì›í™œí•œ ë¦¬ë””ë ‰ì…˜** ê²½í—˜ì„ ì œê³µí•˜ì—¬ Safari ë¦¬ë””ë ‰ì…˜ì„ ìš°íšŒí•˜ê³  ì•±ì—ì„œ ì½˜í…ì¸ ë¥¼ ì§ì ‘ ì—´ ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤. ì´ ë§í¬ëŠ” ë‹¤ë¥¸ ì•±ì—ì„œ ìš”ì²­í•  ìˆ˜ ì—†ìœ¼ë¯€ë¡œ **ê³ ìœ **í•˜ê³  ì•ˆì „í•©ë‹ˆë‹¤. ì´ëŠ” ì›¹ ì‚¬ì´íŠ¸ì˜ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ì— `apple-app-site-association` JSON íŒŒì¼ì„ í˜¸ìŠ¤íŒ…í•˜ì—¬ ì›¹ ì‚¬ì´íŠ¸ì™€ ì•± ì‚¬ì´ì˜ ê²€ì¦ ê°€ëŠ¥í•œ ë§í¬ë¥¼ ì„¤ì •í•¨ìœ¼ë¡œì¨ ë³´ì¥ë©ë‹ˆë‹¤. ì•±ì´ ì„¤ì¹˜ë˜ì§€ ì•Šì€ ê²½ìš° Safariê°€ ì‚¬ìš©ìë¥¼ ì›¹ í˜ì´ì§€ë¡œ ì•ˆë‚´í•˜ì—¬ ì•±ì˜ ì¡´ì¬ë¥¼ ìœ ì§€í•©ë‹ˆë‹¤.

íœí…ŒìŠ¤í„°ì—ê²ŒëŠ” `apple-app-site-association` íŒŒì¼ì´ íŠ¹íˆ í¥ë¯¸ë¡œìš¸ ìˆ˜ ìˆìœ¼ë©°, ì´ íŒŒì¼ì€ ë¯¸ë°œí‘œ ê¸°ëŠ¥ê³¼ ê´€ë ¨ëœ ê²ƒì„ í¬í•¨í•˜ì—¬ **ë¯¼ê°í•œ ê²½ë¡œ**ë¥¼ ë“œëŸ¬ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### **ì—°ê²°ëœ ë„ë©”ì¸ ê¶Œí•œ ë¶„ì„**

ê°œë°œìëŠ” Xcodeì˜ ê¸°ëŠ¥ íƒ­ì—ì„œ **ì—°ê²°ëœ ë„ë©”ì¸**ì„ êµ¬ì„±í•˜ê±°ë‚˜ `.entitlements` íŒŒì¼ì„ ê²€ì‚¬í•˜ì—¬ Universal ë§í¬ë¥¼ í™œì„±í™”í•©ë‹ˆë‹¤. ê° ë„ë©”ì¸ì€ `applinks:`ë¡œ ì ‘ë‘ì‚¬ê°€ ë¶™ìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, Telegramì˜ êµ¬ì„±ì€ ë‹¤ìŒê³¼ ê°™ì´ ë‚˜íƒ€ë‚  ìˆ˜ ìˆìŠµë‹ˆë‹¤:
```xml
<key>com.apple.developer.associated-domains</key>
<array>
<string>applinks:telegram.me</string>
<string>applinks:t.me</string>
</array>
```
ë” í¬ê´„ì ì¸ í†µì°°ë ¥ì„ ìœ„í•´ì„œëŠ” [ë³´ê´€ëœ Apple ê°œë°œì ë¬¸ì„œ](https://developer.apple.com/library/archive/documentation/General/Conceptual/AppSearch/UniversalLinks.html#//apple_ref/doc/uid/TP40016308-CH12-SW2)ë¥¼ ì°¸ì¡°í•˜ì‹­ì‹œì˜¤.

ì»´íŒŒì¼ëœ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš°, entitlementsëŠ” [ì´ ê°€ì´ë“œ](extracting-entitlements-from-compiled-application.md)ì— ì„¤ëª…ëœëŒ€ë¡œ ì¶”ì¶œë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### **Apple App Site Association íŒŒì¼ ê²€ìƒ‰**

`apple-app-site-association` íŒŒì¼ì€ entitlementsì—ì„œ ì§€ì •ëœ ë„ë©”ì¸ì„ ì‚¬ìš©í•˜ì—¬ ì„œë²„ì—ì„œ ê²€ìƒ‰ë˜ì–´ì•¼ í•©ë‹ˆë‹¤. íŒŒì¼ì€ `https://<ë„ë©”ì¸>/apple-app-site-association`ì„ í†µí•´ ì§ì ‘ì ìœ¼ë¡œ ì ‘ê·¼ ê°€ëŠ¥í•´ì•¼ í•©ë‹ˆë‹¤. [Apple App Site Association (AASA) Validator](https://branch.io/resources/aasa-validator/)ì™€ ê°™ì€ ë„êµ¬ëŠ” ì´ ê³¼ì •ì„ ë•ëŠ” ë° ë„ì›€ì´ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### **ì•±ì—ì„œ Universal Links ì²˜ë¦¬**

ì•±ì€ Universal Linksë¥¼ ì˜¬ë°”ë¥´ê²Œ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ íŠ¹ì • ë©”ì„œë“œë¥¼ êµ¬í˜„í•´ì•¼ í•©ë‹ˆë‹¤. ì£¼ìš”í•œ ë©”ì„œë“œëŠ” [`application:continueUserActivity:restorationHandler:`](https://developer.apple.com/documentation/uikit/uiapplicationdelegate/1623072-application)ì…ë‹ˆë‹¤. ì²˜ë¦¬ë˜ëŠ” URLì˜ schemeì´ HTTP ë˜ëŠ” HTTPSì—¬ì•¼ í•˜ë©°, ë‹¤ë¥¸ schemeì€ ì§€ì›ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

#### **ë°ì´í„° í•¸ë“¤ëŸ¬ ë©”ì„œë“œ ìœ íš¨ì„± ê²€ì‚¬**

Universal Linksë¡œ ì•±ì´ ì—´ë¦´ ë•Œ, `NSUserActivity` ê°ì²´ê°€ URLê³¼ í•¨ê»˜ ì•±ì— ì „ë‹¬ë©ë‹ˆë‹¤. ì´ URLì„ ì²˜ë¦¬í•˜ê¸° ì „ì— ë³´ì•ˆ ìœ„í—˜ì„ ë°©ì§€í•˜ê¸° ìœ„í•´ ìœ íš¨ì„±ì„ ê²€ì‚¬í•˜ê³  ì •ë¦¬í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤. ë‹¤ìŒì€ ì´ ê³¼ì •ì„ ë³´ì—¬ì£¼ëŠ” Swift ì˜ˆì‹œì…ë‹ˆë‹¤:
```swift
func application(_ application: UIApplication, continue userActivity: NSUserActivity,
restorationHandler: @escaping ([UIUserActivityRestoring]?) -> Void) -> Bool {
// Check for web browsing activity and valid URL
if userActivity.activityType == NSUserActivityTypeBrowsingWeb, let url = userActivity.webpageURL {
application.open(url, options: [:], completionHandler: nil)
}

return true
}
```
URLì€ íŠ¹íˆ ë§¤ê°œë³€ìˆ˜ë¥¼ í¬í•¨í•˜ëŠ” ê²½ìš°ì—ëŠ” ì‹ ì¤‘í•˜ê²Œ êµ¬ë¬¸ ë¶„ì„ë˜ê³  ìœ íš¨ì„±ì´ ê²€ì‚¬ë˜ì–´ì•¼ í•©ë‹ˆë‹¤. `NSURLComponents` APIëŠ” ì´ëŸ¬í•œ ëª©ì ì— ìœ ìš©í•˜ë©°, ì•„ë˜ì— ì„¤ëª…ëœ ëŒ€ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:
```swift
func application(_ application: UIApplication,
continue userActivity: NSUserActivity,
restorationHandler: @escaping ([Any]?) -> Void) -> Bool {
guard userActivity.activityType == NSUserActivityTypeBrowsingWeb,
let incomingURL = userActivity.webpageURL,
let components = NSURLComponents(url: incomingURL, resolvingAgainstBaseURL: true),
let path = components.path,
let params = components.queryItems else {
return false
}

if let albumName = params.first(where: { $0.name == "albumname" })?.value,
let photoIndex = params.first(where: { $0.name == "index" })?.value {
// Process the URL with album name and photo index

return true

} else {
// Handle invalid or missing parameters

return false
}
}
```
ê°œë°œìë“¤ì€ **ì—´ì‹¬íˆ êµ¬ì„±í•˜ê³  í™•ì¸í•¨ìœ¼ë¡œì¨** ìœ ë‹ˆë²„ì„¤ ë§í¬ê°€ ì‚¬ìš©ì ê²½í—˜ì„ í–¥ìƒì‹œí‚¤ë©´ì„œ ë³´ì•ˆ ë° ê°œì¸ ì •ë³´ ë³´í˜¸ ê¸°ì¤€ì„ ìœ ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.




## ì°¸ê³  ìë£Œ
* [https://mas.owasp.org/MASTG/tests/ios/MASVS-PLATFORM/MASTG-TEST-0070/#static-analysis](https://mas.owasp.org/MASTG/tests/ios/MASVS-PLATFORM/MASTG-TEST-0070/#static-analysis)
* [https://mobile-security.gitbook.io/mobile-security-testing-guide/ios-testing-guide/0x06h-testing-platform-interaction#testing-object-persistence-mstg-platform-8](https://mobile-security.gitbook.io/mobile-security-testing-guide/ios-testing-guide/0x06h-testing-platform-interaction#testing-object-persistence-mstg-platform-8)



<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong>ë¥¼ í†µí•´ **ì œë¡œë¶€í„° AWS í•´í‚¹ì„ ì „ë¬¸ê°€ ìˆ˜ì¤€ìœ¼ë¡œ ë°°ì›Œë³´ì„¸ìš”**!</summary>

HackTricksë¥¼ ì§€ì›í•˜ëŠ” ë‹¤ë¥¸ ë°©ë²•:

* **íšŒì‚¬ë¥¼ HackTricksì—ì„œ ê´‘ê³ í•˜ê±°ë‚˜ HackTricksë¥¼ PDFë¡œ ë‹¤ìš´ë¡œë“œ**í•˜ë ¤ë©´ [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)ë¥¼ í™•ì¸í•˜ì„¸ìš”!
* [**ê³µì‹ PEASS & HackTricks ìŠ¤ì›¨ê·¸**](https://peass.creator-spring.com)ë¥¼ ì–»ìœ¼ì„¸ìš”.
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ë¥¼ ë°œê²¬í•˜ì„¸ìš”. ë…ì ì ì¸ [**NFTs**](https://opensea.io/collection/the-peass-family) ì»¬ë ‰ì…˜ì…ë‹ˆë‹¤.
* ğŸ’¬ [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— **ì°¸ì—¬**í•˜ê±°ë‚˜ **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)**ë¥¼** **íŒ”ë¡œìš°**í•˜ì„¸ìš”.
* **HackTricks**ì™€ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github ì €ì¥ì†Œì— PRì„ ì œì¶œí•˜ì—¬ ì—¬ëŸ¬ë¶„ì˜ í•´í‚¹ ê¸°êµë¥¼ ê³µìœ í•˜ì„¸ìš”.

</details>
