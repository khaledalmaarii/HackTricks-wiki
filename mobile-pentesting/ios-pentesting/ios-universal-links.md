# iOS Universal Links


<details>

<summary><strong>htARTE (HackTricks AWS Red Team ì „ë¬¸ê°€)ë¡œë¶€í„° AWS í•´í‚¹ì„ ì²˜ìŒë¶€í„° ì „ë¬¸ê°€ê¹Œì§€ ë°°ìš°ì„¸ìš”!</strong></summary>

HackTricksë¥¼ ì§€ì›í•˜ëŠ” ë‹¤ë¥¸ ë°©ë²•:

* **íšŒì‚¬ë¥¼ HackTricksì—ì„œ ê´‘ê³ í•˜ê±°ë‚˜ HackTricksë¥¼ PDFë¡œ ë‹¤ìš´ë¡œë“œ**í•˜ê³  ì‹¶ë‹¤ë©´ [**êµ¬ë… ìš”ê¸ˆì œ**](https://github.com/sponsors/carlospolop)ë¥¼ í™•ì¸í•˜ì„¸ìš”!
* [**ê³µì‹ PEASS & HackTricks ìŠ¤ì™œê·¸**](https://peass.creator-spring.com)ë¥¼ êµ¬ë§¤í•˜ì„¸ìš”
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ë¥¼ ë°œê²¬í•˜ì„¸ìš”, ë‹¹ì‚¬ì˜ ë…ì  [**NFTs**](https://opensea.io/collection/the-peass-family) ì»¬ë ‰ì…˜
* **ğŸ’¬ [Discord ê·¸ë£¹](https://discord.gg/hRep4RUj7f)** ë˜ëŠ” [í…”ë ˆê·¸ë¨ ê·¸ë£¹](https://t.me/peass)ì— **ê°€ì…**í•˜ê±°ë‚˜ **íŠ¸ìœ„í„°** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)ì„ **íŒ”ë¡œìš°**í•˜ì„¸ìš”.
* **í•´í‚¹ íŠ¸ë¦­ì„ ê³µìœ í•˜ë ¤ë©´ PRì„ ì œì¶œí•˜ì—¬** [**HackTricks**](https://github.com/carlospolop/hacktricks) ë° [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github ì €ì¥ì†Œì— ê¸°ì—¬í•˜ì„¸ìš”.

</details>


## ì†Œê°œ

Universal linksëŠ” ì‚¬ìš©ìì—ê²Œ ì•±ì—ì„œ ì½˜í…ì¸ ë¥¼ ì§ì ‘ ì—´ì–´ì£¼ì–´ Safari ë¦¬ë””ë ‰ì…˜ í•„ìš”ë¥¼ ìš°íšŒí•˜ì—¬ **ì›í™œí•œ ë¦¬ë””ë ‰ì…˜** ê²½í—˜ì„ ì œê³µí•©ë‹ˆë‹¤. ì´ëŸ¬í•œ ë§í¬ëŠ” ë‹¤ë¥¸ ì•±ì—ì„œ ìš”ì²­í•  ìˆ˜ ì—†ë„ë¡ **ê³ ìœ í•˜ê³  ì•ˆì „**í•˜ë©°, ì›¹ì‚¬ì´íŠ¸ì˜ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ì— `apple-app-site-association` JSON íŒŒì¼ì„ í˜¸ìŠ¤íŒ…í•˜ì—¬ ì›¹ì‚¬ì´íŠ¸ì™€ ì•± ê°„ì˜ ê²€ì¦ ê°€ëŠ¥í•œ ë§í¬ë¥¼ ì„¤ì •í•¨ìœ¼ë¡œì¨ ë³´ì¥ë©ë‹ˆë‹¤. ì•±ì´ ì„¤ì¹˜ë˜ì§€ ì•Šì€ ê²½ìš° Safariê°€ ì‚¬ìš©ìë¥¼ ì›¹í˜ì´ì§€ë¡œ ì•ˆë‚´í•˜ì—¬ ì•±ì˜ ì¡´ì¬ë¥¼ ìœ ì§€í•©ë‹ˆë‹¤.

íœ í…ŒìŠ¤í„°ë“¤ì—ê²ŒëŠ” `apple-app-site-association` íŒŒì¼ì´ íŠ¹íˆ í¥ë¯¸ë¡œìš¸ ìˆ˜ ìˆìœ¼ë©°, ì´ íŒŒì¼ì€ ë¯¸ë°œí‘œ ê¸°ëŠ¥ê³¼ ê´€ë ¨ëœ ê²½ë¡œë¥¼ í¬í•¨í•  ìˆ˜ ìˆëŠ” **ë¯¼ê°í•œ ê²½ë¡œ**ë¥¼ ë“œëŸ¬ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### **ì—°ê²°ëœ ë„ë©”ì¸ ê¶Œí•œ ë¶„ì„**

ê°œë°œìëŠ” Xcodeì˜ ê¸°ëŠ¥ íƒ­ì—ì„œ **ì—°ê²°ëœ ë„ë©”ì¸**ì„ êµ¬ì„±í•˜ê±°ë‚˜ `.entitlements` íŒŒì¼ì„ ê²€ì‚¬í•˜ì—¬ Universal Linksë¥¼ í™œì„±í™”í•©ë‹ˆë‹¤. ê° ë„ë©”ì¸ì€ `applinks:`ë¡œ ì ‘ë‘ì‚¬ê°€ ë¶™ìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, í…”ë ˆê·¸ë¨ì˜ êµ¬ì„±ì€ ë‹¤ìŒê³¼ ê°™ì´ ë‚˜íƒ€ë‚  ìˆ˜ ìˆìŠµë‹ˆë‹¤:
```xml
<key>com.apple.developer.associated-domains</key>
<array>
<string>applinks:telegram.me</string>
<string>applinks:t.me</string>
</array>
```
### **Apple App ì‚¬ì´íŠ¸ ì—°í•© í˜‘íšŒ íŒŒì¼ ê²€ìƒ‰**

`apple-app-site-association` íŒŒì¼ì€ ê¶Œí•œì— ì§€ì •ëœ ë„ë©”ì¸ì„ ì‚¬ìš©í•˜ì—¬ ì„œë²„ì—ì„œ ê²€ìƒ‰ë˜ì–´ì•¼ í•©ë‹ˆë‹¤. íŒŒì¼ì€ `https://<ë„ë©”ì¸>/apple-app-site-association`ì—ì„œ ì§ì ‘ ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆì–´ì•¼ í•©ë‹ˆë‹¤. [Apple App ì‚¬ì´íŠ¸ í˜‘íšŒ (AASA) Validator](https://branch.io/resources/aasa-validator/)ì™€ ê°™ì€ ë„êµ¬ëŠ”ì´ í”„ë¡œì„¸ìŠ¤ë¥¼ ì§€ì›í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### **ì•±ì—ì„œ Universal ë§í¬ ì²˜ë¦¬**

ì•±ì€ Universal ë§í¬ë¥¼ ì˜¬ë°”ë¥´ê²Œ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ íŠ¹ì • ë©”ì„œë“œë¥¼ êµ¬í˜„í•´ì•¼í•©ë‹ˆë‹¤. ì°¾ì•„ì•¼ í•  ì£¼ìš” ë©”ì„œë“œëŠ” [`application:continueUserActivity:restorationHandler:`](https://developer.apple.com/documentation/uikit/uiapplicationdelegate/1623072-application)ì…ë‹ˆë‹¤. ì²˜ë¦¬í•´ì•¼ í•˜ëŠ” URLì˜ schemeì´ HTTP ë˜ëŠ” HTTPS ì—¬ì•¼í•˜ë©°, ë‹¤ë¥¸ schemeì€ ì§€ì›ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

#### **ë°ì´í„° í•¸ë“¤ëŸ¬ ë©”ì„œë“œ ìœ íš¨ì„± ê²€ì‚¬**

Universal ë§í¬ê°€ ì•±ì„ ì—´ ë•Œ `NSUserActivity` ê°ì²´ê°€ URLê³¼ í•¨ê»˜ ì•±ìœ¼ë¡œ ì „ë‹¬ë©ë‹ˆë‹¤. ì´ URLì„ ì²˜ë¦¬í•˜ê¸° ì „ì— ë³´ì•ˆ ìœ„í—˜ì„ ë°©ì§€í•˜ê¸° ìœ„í•´ ìœ íš¨ì„±ì„ ê²€ì‚¬í•˜ê³  ì •ë¦¬í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤. ë‹¤ìŒì€ì´ í”„ë¡œì„¸ìŠ¤ë¥¼ ë³´ì—¬ì£¼ëŠ” Swiftì˜ ì˜ˆì‹œì…ë‹ˆë‹¤:
```swift
func application(_ application: UIApplication, continue userActivity: NSUserActivity,
restorationHandler: @escaping ([UIUserActivityRestoring]?) -> Void) -> Bool {
// Check for web browsing activity and valid URL
if userActivity.activityType == NSUserActivityTypeBrowsingWeb, let url = userActivity.webpageURL {
application.open(url, options: [:], completionHandler: nil)
}

return true
}
```
URLì€ íŠ¹íˆ ë§¤ê°œë³€ìˆ˜ë¥¼ í¬í•¨í•˜ëŠ” ê²½ìš° ì‹ ì¤‘í•˜ê²Œ êµ¬ë¬¸ ë¶„ì„ ë° ìœ íš¨ì„±ì„ ê²€ì‚¬í•´ì•¼ í•˜ë©° ì ì¬ì ì¸ ìŠ¤í‘¸í•‘ ë˜ëŠ” ì˜ëª»ëœ ë°ì´í„°ì— ëŒ€ë¹„í•´ì•¼ í•©ë‹ˆë‹¤. ì´ëŸ¬í•œ ëª©ì ìœ¼ë¡œ `NSURLComponents` APIê°€ ìœ ìš©í•˜ë©° ì•„ë˜ì—ì„œ ì„¤ëª…í•œ ëŒ€ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:
```swift
func application(_ application: UIApplication,
continue userActivity: NSUserActivity,
restorationHandler: @escaping ([Any]?) -> Void) -> Bool {
guard userActivity.activityType == NSUserActivityTypeBrowsingWeb,
let incomingURL = userActivity.webpageURL,
let components = NSURLComponents(url: incomingURL, resolvingAgainstBaseURL: true),
let path = components.path,
let params = components.queryItems else {
return false
}

if let albumName = params.first(where: { $0.name == "albumname" })?.value,
let photoIndex = params.first(where: { $0.name == "index" })?.value {
// Process the URL with album name and photo index

return true

} else {
// Handle invalid or missing parameters

return false
}
}
```
**ë…¸ë ¥í•˜ëŠ” êµ¬ì„± ë° ìœ íš¨ì„± ê²€ì‚¬**ë¥¼ í†µí•´, ê°œë°œìëŠ” ìœ ë‹ˆë²„ì„¤ ë§í¬ê°€ ì‚¬ìš©ì ê²½í—˜ì„ í–¥ìƒì‹œí‚¤ëŠ” ë™ì‹œì— ë³´ì•ˆ ë° ê°œì¸ ì •ë³´ ë³´í˜¸ ê¸°ì¤€ì„ ìœ ì§€í•  ìˆ˜ ìˆë„ë¡ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.


## ë„êµ¬
* [GetUniversal.link](https://getuniversal.link/): ì•±ì˜ ìœ ë‹ˆë²„ì„¤ ë§í¬ ë° AASA íŒŒì¼ì˜ í…ŒìŠ¤íŠ¸ ë° ê´€ë¦¬ë¥¼ ê°„ì†Œí™”í•˜ëŠ” ë° ë„ì›€ì´ ë©ë‹ˆë‹¤. ë„ë©”ì¸ì„ ì…ë ¥í•˜ì—¬ AASA íŒŒì¼ ë¬´ê²°ì„±ì„ í™•ì¸í•˜ê±°ë‚˜ ë§í¬ ë™ì‘ì„ ì‰½ê²Œ í…ŒìŠ¤íŠ¸í•˜ê¸° ìœ„í•´ ì‚¬ìš©ì ì •ì˜ ëŒ€ì‹œë³´ë“œë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ ì´ ë„êµ¬ëŠ” Appleì´ ë‹¤ìŒìœ¼ë¡œ AASA íŒŒì¼ì„ ìƒ‰ì¸í™”í•  ë•Œë¥¼ ê²°ì •í•˜ëŠ” ë° ë„ì›€ì„ ì¤ë‹ˆë‹¤.

## ì°¸ê³  ìë£Œ
* [https://mas.owasp.org/MASTG/tests/ios/MASVS-PLATFORM/MASTG-TEST-0070/#static-analysis](https://mas.owasp.org/MASTG/tests/ios/MASVS-PLATFORM/MASTG-TEST-0070/#static-analysis)
* [https://mobile-security.gitbook.io/mobile-security-testing-guide/ios-testing-guide/0x06h-testing-platform-interaction#testing-object-persistence-mstg-platform-8](https://mobile-security.gitbook.io/mobile-security-testing-guide/ios-testing-guide/0x06h-testing-platform-interaction#testing-object-persistence-mstg-platform-8)



<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong>ë¥¼ í†µí•´ ì œë¡œë¶€í„° ì˜ì›…ì´ ë  ë•Œê¹Œì§€ AWS í•´í‚¹ì„ ë°°ìš°ì„¸ìš”</summary>

HackTricksë¥¼ ì§€ì›í•˜ëŠ” ë‹¤ë¥¸ ë°©ë²•:

* **íšŒì‚¬ê°€ HackTricksë¥¼ ê´‘ê³ í•˜ê±°ë‚˜ PDFë¡œ ë‹¤ìš´ë¡œë“œí•˜ê³  ì‹¶ë‹¤ë©´** [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)ë¥¼ í™•ì¸í•˜ì„¸ìš”!
* [**ê³µì‹ PEASS & HackTricks ìŠ¤ì™œê·¸**](https://peass.creator-spring.com)ë¥¼ êµ¬ë§¤í•˜ì„¸ìš”
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ë¥¼ ë°œê²¬í•˜ì„¸ìš”, ë‹¹ì‚¬ì˜ ë…ì  [**NFTs**](https://opensea.io/collection/the-peass-family) ì»¬ë ‰ì…˜
* **ğŸ’¬ [ë””ìŠ¤ì½”ë“œ ê·¸ë£¹](https://discord.gg/hRep4RUj7f)** ë˜ëŠ” [í…”ë ˆê·¸ë¨ ê·¸ë£¹](https://t.me/peass)ì— **ê°€ì…**í•˜ê±°ë‚˜ **íŠ¸ìœ„í„°** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)ë¥¼ **íŒ”ë¡œìš°**í•˜ì„¸ìš”.
* **HackTricks** ë° **HackTricks Cloud** ê¹ƒí—ˆë¸Œ ì €ì¥ì†Œì— PRì„ ì œì¶œí•˜ì—¬ **í•´í‚¹ íŠ¸ë¦­ì„ ê³µìœ **í•˜ì„¸ìš”.

</details>
