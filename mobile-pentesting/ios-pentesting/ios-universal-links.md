<details>

<summary><strong>é›¶åŸºç¡€å­¦ä¹ AWSé»‘å®¢æ”»å‡»ç›´è‡³æˆä¸ºä¸“å®¶ï¼Œé€šè¿‡</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS çº¢é˜Ÿä¸“å®¶)</strong></a><strong>!</strong></summary>

æ”¯æŒHackTricksçš„å…¶ä»–æ–¹å¼:

* å¦‚æœæ‚¨æƒ³åœ¨ **HackTricksä¸­çœ‹åˆ°æ‚¨çš„å…¬å¸å¹¿å‘Š** æˆ– **ä¸‹è½½HackTricksçš„PDFç‰ˆæœ¬**ï¼Œè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* è·å– [**å®˜æ–¹PEASS & HackTrickså•†å“**](https://peass.creator-spring.com)
* å‘ç° [**PEASSå®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬ç‹¬å®¶çš„[**NFTsç³»åˆ—**](https://opensea.io/collection/the-peass-family)
* **åŠ å…¥** ğŸ’¬ [**Discordç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**telegramç¾¤ç»„**](https://t.me/peass) æˆ–åœ¨ **Twitter** ğŸ¦ ä¸Š **å…³æ³¨** æˆ‘ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) githubä»“åº“æäº¤PRæ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚

</details>


é€šç”¨é“¾æ¥å…è®¸**ç›´æ¥å°†ç”¨æˆ·é‡å®šå‘**åˆ°åº”ç”¨ç¨‹åºï¼Œæ— éœ€ç»è¿‡Safariè¿›è¡Œé‡å®šå‘ã€‚\
é€šç”¨é“¾æ¥æ˜¯**ç‹¬ä¸€æ— äºŒ**çš„ï¼Œå› æ­¤**å…¶ä»–åº”ç”¨æ— æ³•è®¤é¢†**ï¼Œå› ä¸ºå®ƒä»¬ä½¿ç”¨æ ‡å‡†çš„HTTP(S)é“¾æ¥åˆ°**ç½‘ç«™ï¼Œç½‘ç«™æ‰€æœ‰è€…å·²ä¸Šä¼ æ–‡ä»¶ä»¥ç¡®ä¿ç½‘ç«™å’Œåº”ç”¨ç¨‹åºç›¸å…³**ã€‚\
ç”±äºè¿™äº›é“¾æ¥ä½¿ç”¨HTTP(S)æ–¹æ¡ˆï¼Œå½“**åº”ç”¨æœªå®‰è£…æ—¶ï¼ŒSafariå°†æ‰“å¼€é“¾æ¥**ï¼Œå°†ç”¨æˆ·é‡å®šå‘åˆ°é¡µé¢ã€‚è¿™å…è®¸**åº”ç”¨ç¨‹åºå³ä½¿æœªå®‰è£…ä¹Ÿèƒ½ä¸åº”ç”¨ç¨‹åºé€šä¿¡**ã€‚

è¦åˆ›å»ºé€šç”¨é“¾æ¥ï¼Œéœ€è¦**åˆ›å»ºä¸€ä¸ªåä¸º`apple-app-site-association`çš„JSONæ–‡ä»¶**ï¼Œå¹¶å¡«å†™è¯¦ç»†ä¿¡æ¯ã€‚ç„¶åï¼Œéœ€è¦å°†æ­¤æ–‡ä»¶**æ‰˜ç®¡åœ¨æ‚¨çš„WebæœåŠ¡å™¨çš„æ ¹ç›®å½•ä¸­**ï¼ˆä¾‹å¦‚[https://google.com/apple-app-site-association](https://google.com/apple-app-site-association)ï¼‰ã€‚\
å¯¹äºæ¸—é€æµ‹è¯•äººå‘˜æ¥è¯´ï¼Œè¿™ä¸ªæ–‡ä»¶éå¸¸æœ‰è¶£ï¼Œå› ä¸ºå®ƒ**æ³„éœ²äº†è·¯å¾„**ã€‚å®ƒç”šè‡³å¯èƒ½æ³„éœ²å°šæœªå‘å¸ƒçš„ç‰ˆæœ¬çš„è·¯å¾„ã€‚

## â€‹**æ£€æŸ¥å…³è”åŸŸåæƒé™**

åœ¨Xcodeä¸­ï¼Œè½¬åˆ°**åŠŸèƒ½**æ ‡ç­¾å¹¶æœç´¢**å…³è”åŸŸå**ã€‚æ‚¨ä¹Ÿå¯ä»¥æ£€æŸ¥`.entitlements`æ–‡ä»¶ï¼Œå¯»æ‰¾`com.apple.developer.associated-domains`ã€‚æ¯ä¸ªåŸŸåå¿…é¡»ä»¥`applinks:`ä¸ºå‰ç¼€ï¼Œä¾‹å¦‚`applinks:www.mywebsite.com`ã€‚

ä»¥ä¸‹æ˜¯Telegramçš„`.entitlements`æ–‡ä»¶ç¤ºä¾‹ï¼š
```markup
<key>com.apple.developer.associated-domains</key>
<array>
<string>applinks:telegram.me</string>
<string>applinks:t.me</string>
</array>
```
æ›´å¤šè¯¦ç»†ä¿¡æ¯å¯ä»¥åœ¨[å­˜æ¡£çš„è‹¹æœå¼€å‘è€…æ–‡æ¡£](https://developer.apple.com/library/archive/documentation/General/Conceptual/AppSearch/UniversalLinks.html#//apple_ref/doc/uid/TP40016308-CH12-SW2)ä¸­æ‰¾åˆ°ã€‚

å¦‚æœæ‚¨åªæœ‰ç¼–è¯‘åçš„åº”ç”¨ç¨‹åºï¼Œæ‚¨å¯ä»¥æŒ‰ç…§ä»¥ä¸‹æŒ‡å—æå–æƒé™ï¼š

{% content-ref url="extracting-entitlements-from-compiled-application.md" %}
[extracting-entitlements-from-compiled-application.md](extracting-entitlements-from-compiled-application.md)
{% endcontent-ref %}

## **æ£€ç´¢è‹¹æœåº”ç”¨ç«™ç‚¹å…³è”æ–‡ä»¶**

å°è¯•ä½¿ç”¨æ‚¨ä»ä¸Šä¸€æ­¥è·å–çš„å…³è”åŸŸåä»æœåŠ¡å™¨æ£€ç´¢`apple-app-site-association`æ–‡ä»¶ã€‚è¿™ä¸ªæ–‡ä»¶éœ€è¦é€šè¿‡HTTPSè®¿é—®ï¼Œåœ°å€ä¸º`https://<domain>/apple-app-site-association` æˆ– `https://<domain>/.well-known/apple-app-site-association`ï¼Œä¸”ä¸ç»è¿‡ä»»ä½•é‡å®šå‘ã€‚

æ‚¨å¯ä»¥ä½¿ç”¨æµè§ˆå™¨è‡ªè¡Œæ£€ç´¢ï¼Œæˆ–ä½¿ç”¨[è‹¹æœåº”ç”¨ç«™ç‚¹å…³è”ï¼ˆAASAï¼‰éªŒè¯å™¨](https://branch.io/resources/aasa-validator/)ã€‚

## **æ£€æŸ¥é“¾æ¥æ¥æ”¶æ–¹æ³•**

ä¸ºäº†æ¥æ”¶é“¾æ¥å¹¶é€‚å½“å¤„ç†ï¼Œåº”ç”¨ä»£ç†å¿…é¡»å®ç°[`application:continueUserActivity:restorationHandler:`](https://developer.apple.com/documentation/uikit/uiapplicationdelegate/1623072-application)æ–¹æ³•ã€‚å¦‚æœæ‚¨æœ‰åŸå§‹é¡¹ç›®ï¼Œè¯·å°è¯•æœç´¢æ­¤æ–¹æ³•ã€‚

è¯·æ³¨æ„ï¼Œå¦‚æœåº”ç”¨ä½¿ç”¨[`openURL:options:completionHandler:`](https://developer.apple.com/documentation/uikit/uiapplication/1648685-openurl?language=objc)æ‰“å¼€åˆ°åº”ç”¨ç½‘ç«™çš„é€šç”¨é“¾æ¥ï¼Œé“¾æ¥ä¸ä¼šåœ¨åº”ç”¨ä¸­æ‰“å¼€ã€‚ç”±äºè°ƒç”¨æ¥è‡ªåº”ç”¨ï¼Œå®ƒä¸ä¼šè¢«ä½œä¸ºé€šç”¨é“¾æ¥å¤„ç†ã€‚

* `webpageURL`çš„æ–¹æ¡ˆå¿…é¡»æ˜¯HTTPæˆ–HTTPSï¼ˆä»»ä½•å…¶ä»–æ–¹æ¡ˆåº”è¯¥æŠ›å‡ºå¼‚å¸¸ï¼‰ã€‚å¯ä»¥ä½¿ç”¨`URLComponents` / `NSURLComponents`çš„[`scheme`å®ä¾‹å±æ€§](https://developer.apple.com/documentation/foundation/urlcomponents/1779624-scheme)æ¥éªŒè¯è¿™ä¸€ç‚¹ã€‚

## **æ£€æŸ¥æ•°æ®å¤„ç†æ–¹æ³•**

å½“iOSå› é€šç”¨é“¾æ¥æ‰“å¼€åº”ç”¨æ—¶ï¼Œåº”ç”¨ä¼šæ”¶åˆ°ä¸€ä¸ªå¸¦æœ‰`NSUserActivityTypeBrowsingWeb`å€¼çš„`NSUserActivity`å¯¹è±¡ã€‚æ´»åŠ¨å¯¹è±¡çš„`webpageURL`å±æ€§åŒ…å«ç”¨æˆ·è®¿é—®çš„HTTPæˆ–HTTPS URLã€‚ä»¥ä¸‹æ˜¯Swiftä¸­çš„ç¤ºä¾‹ï¼Œç”¨äºåœ¨æ‰“å¼€URLä¹‹å‰ç¡®åˆ‡éªŒè¯è¿™ä¸€ç‚¹ï¼š
```swift
func application(_ application: UIApplication, continue userActivity: NSUserActivity,
restorationHandler: @escaping ([UIUserActivityRestoring]?) -> Void) -> Bool {
// ...
if userActivity.activityType == NSUserActivityTypeBrowsingWeb, let url = userActivity.webpageURL {
application.open(url, options: [:], completionHandler: nil)
}

return true
}
```
æ­¤å¤–ï¼Œè¯·è®°ä½ï¼Œå¦‚æœ URL åŒ…å«å‚æ•°ï¼Œåœ¨ç»è¿‡ä»”ç»†çš„æ¸…ç†å’ŒéªŒè¯ä¹‹å‰ï¼Œä¸åº”è¯¥ä¿¡ä»»è¿™äº›å‚æ•°ï¼ˆå³ä½¿å®ƒä»¬æ¥è‡ªå¯ä¿¡åŸŸï¼‰ã€‚ä¾‹å¦‚ï¼Œå®ƒä»¬å¯èƒ½è¢«æ”»å‡»è€…ä¼ªé€ ï¼Œæˆ–è€…å¯èƒ½åŒ…å«æ ¼å¼é”™è¯¯çš„æ•°æ®ã€‚å¦‚æœæ˜¯è¿™ç§æƒ…å†µï¼Œæ•´ä¸ª URL ä»¥åŠå› æ­¤äº§ç”Ÿçš„é€šç”¨é“¾æ¥è¯·æ±‚å¿…é¡»è¢«ä¸¢å¼ƒã€‚

`NSURLComponents` API å¯ç”¨äºè§£æå’Œæ“ä½œ URL çš„ç»„ä»¶ã€‚è¿™ä¹Ÿå¯ä»¥æ˜¯æ–¹æ³• `application:continueUserActivity:restorationHandler:` æœ¬èº«çš„ä¸€éƒ¨åˆ†ï¼Œæˆ–è€…å¯èƒ½åœ¨ä»å®ƒè°ƒç”¨çš„å•ç‹¬æ–¹æ³•ä¸­å‘ç”Ÿã€‚ä»¥ä¸‹[ç¤ºä¾‹](https://developer.apple.com/documentation/uikit/core\_app/allowing\_apps\_and\_websites\_to\_link\_to\_your\_content/handling\_universal\_links#3001935)æ¼”ç¤ºäº†è¿™ä¸€ç‚¹ï¼š
```swift
func application(_ application: UIApplication,
continue userActivity: NSUserActivity,
restorationHandler: @escaping ([Any]?) -> Void) -> Bool {
guard userActivity.activityType == NSUserActivityTypeBrowsingWeb,
let incomingURL = userActivity.webpageURL,
let components = NSURLComponents(url: incomingURL, resolvingAgainstBaseURL: true),
let path = components.path,
let params = components.queryItems else {
return false
}

if let albumName = params.first(where: { $0.name == "albumname" })?.value,
let photoIndex = params.first(where: { $0.name == "index" })?.value {
// Interact with album name and photo index

return true

} else {
// Handle when album and/or album name or photo index missing

return false
}
}
```
# å‚è€ƒèµ„æ–™

{% embed url="https://mobile-security.gitbook.io/mobile-security-testing-guide/ios-testing-guide/0x06h-testing-platform-interaction#testing-object-persistence-mstg-platform-8" %}



<details>

<summary><strong>é€šè¿‡</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>ä»é›¶å¼€å§‹å­¦ä¹ AWSé»‘å®¢æŠ€æœ¯ï¼</strong></summary>

æ”¯æŒHackTricksçš„å…¶ä»–æ–¹å¼ï¼š

* å¦‚æœæ‚¨å¸Œæœ›åœ¨**HackTricksä¸­çœ‹åˆ°æ‚¨çš„å…¬å¸å¹¿å‘Š**æˆ–**ä¸‹è½½HackTricksçš„PDFç‰ˆæœ¬**ï¼Œè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼
* è·å–[**å®˜æ–¹PEASS & HackTrickså•†å“**](https://peass.creator-spring.com)
* æ¢ç´¢[**PEASSå®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬ç‹¬å®¶çš„[**NFTsç³»åˆ—**](https://opensea.io/collection/the-peass-family)
* **åŠ å…¥** ğŸ’¬ [**Discordç¾¤ç»„**](https://discord.gg/hRep4RUj7f)æˆ–[**telegramç¾¤ç»„**](https://t.me/peass)æˆ–åœ¨**Twitter** ğŸ¦ ä¸Š**å…³æ³¨**æˆ‘ [**@carlospolopm**](https://twitter.com/carlospolopm)**ã€‚**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) githubä»“åº“æäº¤PRæ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚

</details>
