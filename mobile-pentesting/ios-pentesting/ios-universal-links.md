<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>â˜ï¸ HackTricksäº‘ â˜ï¸</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ğŸ¦ æ¨ç‰¹ ğŸ¦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ğŸ™ï¸ Twitch ğŸ™ï¸</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ğŸ¥ Youtube ğŸ¥</strong></a></summary>

- ä½ åœ¨ä¸€ä¸ª**ç½‘ç»œå®‰å…¨å…¬å¸**å·¥ä½œå—ï¼Ÿä½ æƒ³åœ¨HackTricksä¸­çœ‹åˆ°ä½ çš„**å…¬å¸å¹¿å‘Š**å—ï¼Ÿæˆ–è€…ä½ æƒ³è·å¾—**PEASSçš„æœ€æ–°ç‰ˆæœ¬æˆ–ä¸‹è½½PDFæ ¼å¼çš„HackTricks**å—ï¼Ÿè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼

- å‘ç°æˆ‘ä»¬çš„ç‹¬å®¶[**NFTs**](https://opensea.io/collection/the-peass-family)æ”¶è—å“[**The PEASS Family**](https://opensea.io/collection/the-peass-family)

- è·å–[**å®˜æ–¹PEASSå’ŒHackTricksçš„è¡£ç‰©**](https://peass.creator-spring.com)

- **åŠ å…¥** [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discordç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**telegramç¾¤ç»„**](https://t.me/peass) æˆ– **å…³æ³¨**æˆ‘åœ¨**Twitter**ä¸Šçš„[**ğŸ¦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks_live)**ã€‚**

- **é€šè¿‡å‘[hacktricks repo](https://github.com/carlospolop/hacktricks)å’Œ[hacktricks-cloud repo](https://github.com/carlospolop/hacktricks-cloud)æäº¤PRæ¥åˆ†äº«ä½ çš„é»‘å®¢æŠ€å·§**ã€‚

</details>


é€šç”¨é“¾æ¥å…è®¸**ç›´æ¥å°†ç”¨æˆ·é‡å®šå‘**åˆ°åº”ç”¨ç¨‹åºï¼Œè€Œæ— éœ€é€šè¿‡Safariè¿›è¡Œé‡å®šå‘ã€‚\
é€šç”¨é“¾æ¥æ˜¯**å”¯ä¸€çš„**ï¼Œå› æ­¤å®ƒä»¬**ä¸èƒ½è¢«å…¶ä»–åº”ç”¨ç¨‹åºå ç”¨**ï¼Œå› ä¸ºå®ƒä»¬ä½¿ç”¨æ ‡å‡†çš„HTTP(S)é“¾æ¥åˆ°**æ‰€æœ‰è€…ä¸Šä¼ æ–‡ä»¶çš„ç½‘ç«™ï¼Œä»¥ç¡®ä¿ç½‘ç«™å’Œåº”ç”¨ç¨‹åºç›¸å…³**ã€‚\
ç”±äºè¿™äº›é“¾æ¥ä½¿ç”¨HTTP(S)åè®®ï¼Œå½“**åº”ç”¨ç¨‹åºæœªå®‰è£…æ—¶ï¼ŒSafariå°†æ‰“å¼€é“¾æ¥**ï¼Œå°†ç”¨æˆ·é‡å®šå‘åˆ°é¡µé¢ã€‚è¿™ä½¿å¾—**åº”ç”¨ç¨‹åºå¯ä»¥ä¸æœªå®‰è£…çš„åº”ç”¨ç¨‹åºè¿›è¡Œé€šä¿¡**ã€‚

è¦åˆ›å»ºé€šç”¨é“¾æ¥ï¼Œéœ€è¦**åˆ›å»ºä¸€ä¸ªåä¸º`apple-app-site-association`çš„JSONæ–‡ä»¶**ï¼Œå…¶ä¸­åŒ…å«è¯¦ç»†ä¿¡æ¯ã€‚ç„¶åï¼Œå°†æ­¤æ–‡ä»¶**æ‰˜ç®¡åœ¨æ‚¨çš„WebæœåŠ¡å™¨çš„æ ¹ç›®å½•**ä¸­ï¼ˆä¾‹å¦‚[https://google.com/apple-app-site-association](https://google.com/apple-app-site-association)ï¼‰ã€‚\
å¯¹äºæ¸—é€æµ‹è¯•äººå‘˜æ¥è¯´ï¼Œè¿™ä¸ªæ–‡ä»¶éå¸¸æœ‰è¶£ï¼Œå› ä¸ºå®ƒ**å…¬å¼€äº†è·¯å¾„**ã€‚å®ƒç”šè‡³å¯ä»¥å…¬å¼€å°šæœªå‘å¸ƒçš„ç‰ˆæœ¬çš„è·¯å¾„ã€‚

## **æ£€æŸ¥å…³è”åŸŸæƒåˆ©**

åœ¨Xcodeä¸­ï¼Œè½¬åˆ°**Capabilities**é€‰é¡¹å¡ï¼Œæœç´¢**å…³è”åŸŸ**ã€‚æ‚¨è¿˜å¯ä»¥æ£€æŸ¥`.entitlements`æ–‡ä»¶ï¼ŒæŸ¥æ‰¾`com.apple.developer.associated-domains`ã€‚æ¯ä¸ªåŸŸåéƒ½å¿…é¡»ä»¥`applinks:`ä¸ºå‰ç¼€ï¼Œä¾‹å¦‚`applinks:www.mywebsite.com`ã€‚

ä»¥ä¸‹æ˜¯Telegramçš„`.entitlements`æ–‡ä»¶çš„ç¤ºä¾‹ï¼š
```markup
<key>com.apple.developer.associated-domains</key>
<array>
<string>applinks:telegram.me</string>
<string>applinks:t.me</string>
</array>
```
æ›´è¯¦ç»†çš„ä¿¡æ¯å¯ä»¥åœ¨[å­˜æ¡£çš„Appleå¼€å‘è€…æ–‡æ¡£](https://developer.apple.com/library/archive/documentation/General/Conceptual/AppSearch/UniversalLinks.html#//apple\_ref/doc/uid/TP40016308-CH12-SW2)ä¸­æ‰¾åˆ°ã€‚

å¦‚æœä½ åªæœ‰ç¼–è¯‘åçš„åº”ç”¨ç¨‹åºï¼Œå¯ä»¥æŒ‰ç…§è¿™ä¸ªæŒ‡å—æå–æƒé™ï¼š

{% content-ref url="extracting-entitlements-from-compiled-application.md" %}
[extracting-entitlements-from-compiled-application.md](extracting-entitlements-from-compiled-application.md)
{% endcontent-ref %}

## **æ£€ç´¢Apple App Site Associationæ–‡ä»¶**

å°è¯•ä½¿ç”¨å‰ä¸€æ­¥éª¤è·å–çš„å…³è”åŸŸåä»æœåŠ¡å™¨æ£€ç´¢`apple-app-site-association`æ–‡ä»¶ã€‚è¯¥æ–‡ä»¶éœ€è¦é€šè¿‡HTTPSè®¿é—®ï¼Œæ²¡æœ‰ä»»ä½•é‡å®šå‘ï¼Œä½äº`https://<domain>/apple-app-site-association`æˆ–`https://<domain>/.well-known/apple-app-site-association`ã€‚

æ‚¨å¯ä»¥ä½¿ç”¨æµè§ˆå™¨è‡ªå·±æ£€ç´¢ï¼Œæˆ–ä½¿ç”¨[Apple App Site Association (AASA) Validator](https://branch.io/resources/aasa-validator/)ã€‚

## **æ£€æŸ¥é“¾æ¥æ¥æ”¶æ–¹æ³•**

ä¸ºäº†æ¥æ”¶é“¾æ¥å¹¶é€‚å½“å¤„ç†å®ƒä»¬ï¼Œåº”ç”¨å§”æ‰˜å¿…é¡»å®ç°[`application:continueUserActivity:restorationHandler:`](https://developer.apple.com/documentation/uikit/uiapplicationdelegate/1623072-application)æ–¹æ³•ã€‚å¦‚æœæ‚¨æœ‰åŸå§‹é¡¹ç›®ï¼Œè¯·å°è¯•æœç´¢æ­¤æ–¹æ³•ã€‚

è¯·æ³¨æ„ï¼Œå¦‚æœåº”ç”¨ä½¿ç”¨[`openURL:options:completionHandler:`](https://developer.apple.com/documentation/uikit/uiapplication/1648685-openurl?language=objc)æ‰“å¼€é€šå¾€åº”ç”¨ç½‘ç«™çš„é€šç”¨é“¾æ¥ï¼Œé“¾æ¥å°†ä¸ä¼šåœ¨åº”ç”¨ä¸­æ‰“å¼€ã€‚ç”±äºè°ƒç”¨æºè‡ªåº”ç”¨ï¼Œå®ƒä¸ä¼šè¢«å¤„ç†ä¸ºé€šç”¨é“¾æ¥ã€‚

* `webpageURL`çš„æ–¹æ¡ˆå¿…é¡»æ˜¯HTTPæˆ–HTTPSï¼ˆä»»ä½•å…¶ä»–æ–¹æ¡ˆéƒ½åº”è¯¥æŠ›å‡ºå¼‚å¸¸ï¼‰ã€‚å¯ä»¥ä½¿ç”¨`URLComponents` / `NSURLComponents`çš„[`scheme`å®ä¾‹å±æ€§](https://developer.apple.com/documentation/foundation/urlcomponents/1779624-scheme)æ¥éªŒè¯è¿™ä¸€ç‚¹ã€‚

## **æ£€æŸ¥æ•°æ®å¤„ç†æ–¹æ³•**

å½“iOSä½œä¸ºé€šç”¨é“¾æ¥çš„ç»“æœæ‰“å¼€åº”ç”¨æ—¶ï¼Œåº”ç”¨ä¼šæ”¶åˆ°ä¸€ä¸ª`NSUserActivity`å¯¹è±¡ï¼Œå…¶`activityType`å€¼ä¸º`NSUserActivityTypeBrowsingWeb`ã€‚æ´»åŠ¨å¯¹è±¡çš„`webpageURL`å±æ€§åŒ…å«ç”¨æˆ·è®¿é—®çš„HTTPæˆ–HTTPS URLã€‚ä»¥ä¸‹Swiftç¤ºä¾‹åœ¨æ‰“å¼€URLä¹‹å‰éªŒè¯äº†è¿™ä¸€ç‚¹ï¼š
```swift
func application(_ application: UIApplication, continue userActivity: NSUserActivity,
restorationHandler: @escaping ([UIUserActivityRestoring]?) -> Void) -> Bool {
// ...
if userActivity.activityType == NSUserActivityTypeBrowsingWeb, let url = userActivity.webpageURL {
application.open(url, options: [:], completionHandler: nil)
}

return true
}
```
æ­¤å¤–ï¼Œè¯·è®°ä½ï¼Œå¦‚æœURLåŒ…å«å‚æ•°ï¼Œåœ¨è¿›è¡Œä»”ç»†çš„æ¸…ç†å’ŒéªŒè¯ä¹‹å‰ï¼Œä¸åº”è¯¥ä¿¡ä»»å®ƒä»¬ï¼ˆå³ä½¿æ¥è‡ªå¯ä¿¡åŸŸï¼‰ã€‚ä¾‹å¦‚ï¼Œå®ƒä»¬å¯èƒ½å·²è¢«æ”»å‡»è€…ä¼ªé€ ï¼Œæˆ–è€…å¯èƒ½åŒ…å«æ ¼å¼é”™è¯¯çš„æ•°æ®ã€‚å¦‚æœæ˜¯è¿™ç§æƒ…å†µï¼Œæ•´ä¸ªURLä»¥åŠé€šç”¨é“¾æ¥è¯·æ±‚å¿…é¡»è¢«ä¸¢å¼ƒã€‚

`NSURLComponents` APIå¯ç”¨äºè§£æå’Œæ“ä½œURLçš„ç»„ä»¶ã€‚è¿™ä¹Ÿå¯ä»¥æ˜¯`application:continueUserActivity:restorationHandler:`æ–¹æ³•çš„ä¸€éƒ¨åˆ†ï¼Œæˆ–è€…å¯èƒ½åœ¨ä»è¯¥æ–¹æ³•è°ƒç”¨çš„å•ç‹¬æ–¹æ³•ä¸­å‘ç”Ÿã€‚ä»¥ä¸‹[ç¤ºä¾‹](https://developer.apple.com/documentation/uikit/core\_app/allowing\_apps\_and\_websites\_to\_link\_to\_your\_content/handling\_universal\_links#3001935)æ¼”ç¤ºäº†è¿™ä¸€ç‚¹ï¼š
```swift
func application(_ application: UIApplication,
continue userActivity: NSUserActivity,
restorationHandler: @escaping ([Any]?) -> Void) -> Bool {
guard userActivity.activityType == NSUserActivityTypeBrowsingWeb,
let incomingURL = userActivity.webpageURL,
let components = NSURLComponents(url: incomingURL, resolvingAgainstBaseURL: true),
let path = components.path,
let params = components.queryItems else {
return false
}

if let albumName = params.first(where: { $0.name == "albumname" })?.value,
let photoIndex = params.first(where: { $0.name == "index" })?.value {
// Interact with album name and photo index

return true

} else {
// Handle when album and/or album name or photo index missing

return false
}
}
```
# å‚è€ƒèµ„æ–™

{% embed url="https://mobile-security.gitbook.io/mobile-security-testing-guide/ios-testing-guide/0x06h-testing-platform-interaction#testing-object-persistence-mstg-platform-8" %}



<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>â˜ï¸ HackTricks äº‘ â˜ï¸</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ğŸ¦ æ¨ç‰¹ ğŸ¦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ğŸ™ï¸ Twitch ğŸ™ï¸</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ğŸ¥ Youtube ğŸ¥</strong></a></summary>

- ä½ åœ¨ä¸€å®¶ **ç½‘ç»œå®‰å…¨å…¬å¸** å·¥ä½œå—ï¼Ÿä½ æƒ³åœ¨ HackTricks ä¸­ **ä¸ºä½ çš„å…¬å¸åšå¹¿å‘Š** å—ï¼Ÿæˆ–è€…ä½ æƒ³è·å¾— **PEASS çš„æœ€æ–°ç‰ˆæœ¬æˆ–ä¸‹è½½ HackTricks çš„ PDF ç‰ˆæœ¬** å—ï¼Ÿè¯·æŸ¥çœ‹ [**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼

- å‘ç°æˆ‘ä»¬çš„ç‹¬å®¶ [**NFTs**](https://opensea.io/collection/the-peass-family) é›†åˆ [**The PEASS Family**](https://opensea.io/collection/the-peass-family)

- è·å¾— [**å®˜æ–¹ PEASS & HackTricks å•†å“**](https://peass.creator-spring.com)

- **åŠ å…¥** [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**Telegram ç¾¤ç»„**](https://t.me/peass)ï¼Œæˆ–è€…åœ¨ **Twitter** ä¸Š **å…³æ³¨** æˆ‘ [**ğŸ¦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks_live)**ã€‚**

- **é€šè¿‡å‘ [hacktricks ä»“åº“](https://github.com/carlospolop/hacktricks) å’Œ [hacktricks-cloud ä»“åº“](https://github.com/carlospolop/hacktricks-cloud) æäº¤ PR æ¥åˆ†äº«ä½ çš„é»‘å®¢æŠ€å·§**ã€‚

</details>
