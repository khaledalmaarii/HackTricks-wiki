# iOS Universal Links


<details>

<summary><strong>AWS hacklemeyi sÄ±fÄ±rdan kahraman seviyesine Ã¶ÄŸrenin</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong> ile!</strong></summary>

HackTricks'Ä± desteklemenin diÄŸer yollarÄ±:

* **Åirketinizi HackTricks'te reklamÄ±nÄ± gÃ¶rmek istiyorsanÄ±z** veya **HackTricks'i PDF olarak indirmek istiyorsanÄ±z** [**ABONELÄ°K PLANLARI**](https://github.com/sponsors/carlospolop)'na gÃ¶z atÄ±n!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* [**The PEASS Family'yi**](https://opensea.io/collection/the-peass-family) keÅŸfedin, Ã¶zel [**NFT'lerimiz**](https://opensea.io/collection/the-peass-family) koleksiyonumuz
* **KatÄ±lÄ±n** ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) veya bizi **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)'da **takip edin**.
* **Hacking pÃ¼f noktalarÄ±nÄ±zÄ± paylaÅŸarak PR'lar gÃ¶ndererek** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarÄ±na katkÄ±da bulunun.

</details>


## GiriÅŸ

Universal linkler, kullanÄ±cÄ±lara iÃ§eriÄŸi doÄŸrudan uygulamada aÃ§arak Safari yÃ¶nlendirmesi gereksinimini atlayarak **dikiÅŸsiz bir yÃ¶nlendirme** deneyimi sunar. Bu linkler **benzersiz** ve gÃ¼venlidir, Ã§Ã¼nkÃ¼ diÄŸer uygulamalar tarafÄ±ndan talep edilemezler. Bu, `apple-app-site-association` JSON dosyasÄ±nÄ±n web sitesinin kÃ¶k dizininde barÄ±ndÄ±rÄ±lmasÄ±yla saÄŸlanÄ±r, web sitesi ile uygulama arasÄ±nda doÄŸrulanabilir bir baÄŸlantÄ± kurulur. Uygulama yÃ¼klÃ¼ deÄŸilse, Safari devralacak ve kullanÄ±cÄ±yÄ± web sayfasÄ±na yÃ¶nlendirecek, uygulamanÄ±n varlÄ±ÄŸÄ±nÄ± sÃ¼rdÃ¼recektir.

SÄ±zma testÃ§ileri iÃ§in, `apple-app-site-association` dosyasÄ± Ã¶zellikle ilgi Ã§ekicidir Ã§Ã¼nkÃ¼ **duyarlÄ± yollarÄ±** ortaya Ã§Ä±karabilir, muhtemelen yayÄ±nlanmamÄ±ÅŸ Ã¶zelliklerle ilgili olanlarÄ± iÃ§erebilir.

### **Ä°liÅŸkilendirilmiÅŸ Alanlar Yetkisi'nin Analizi**

GeliÅŸtiriciler, Universal Linkleri Xcode'un Yetenekler sekmesinde **Ä°liÅŸkilendirilmiÅŸ Alanlar**'Ä± yapÄ±landÄ±rarak veya `.entitlements` dosyasÄ±nÄ± inceleyerek etkinleÅŸtirirler. Her alan `applinks:` ile baÅŸlar. Ã–rneÄŸin, Telegram'Ä±n yapÄ±landÄ±rmasÄ± aÅŸaÄŸÄ±daki gibi gÃ¶rÃ¼nebilir:
```xml
<key>com.apple.developer.associated-domains</key>
<array>
<string>applinks:telegram.me</string>
<string>applinks:t.me</string>
</array>
```
Daha kapsamlÄ± bilgiler iÃ§in [arÅŸivlenmiÅŸ Apple GeliÅŸtirici Belgelerine](https://developer.apple.com/library/archive/documentation/General/Conceptual/AppSearch/UniversalLinks.html#//apple_ref/doc/uid/TP40016308-CH12-SW2) baÅŸvurun.

DerlenmiÅŸ bir uygulama ile Ã§alÄ±ÅŸÄ±lÄ±yorsa, ayrÄ±ntÄ±lar [bu kÄ±lavuzda](extracting-entitlements-from-compiled-application.md) belirtildiÄŸi gibi Ã§Ä±karÄ±labilir.

### **Apple Uygulama Sitesi Ä°liÅŸkilendirme DosyasÄ±nÄ± Almak**

`apple-app-site-association` dosyasÄ±, ayrÄ±calÄ±klarda belirtilen alanlarÄ± kullanarak sunucudan alÄ±nmalÄ±dÄ±r. DosyanÄ±n doÄŸrudan `https://<domain>/apple-app-site-association` adresinden eriÅŸilebilir olduÄŸundan emin olun. [Apple Uygulama Sitesi Ä°liÅŸkilendirme (AASA) DoÄŸrulayÄ±cÄ±](https://branch.io/resources/aasa-validator/) gibi araÃ§lar bu sÃ¼reÃ§te yardÄ±mcÄ± olabilir.

### **Uygulamada Evrensel BaÄŸlantÄ±larÄ± Ä°ÅŸleme**

Uygulama, evrensel baÄŸlantÄ±larÄ± doÄŸru bir ÅŸekilde iÅŸlemek iÃ§in belirli yÃ¶ntemleri uygulamalÄ±dÄ±r. AranmasÄ± gereken temel yÃ¶ntem [`application:continueUserActivity:restorationHandler:`](https://developer.apple.com/documentation/uikit/uiapplicationdelegate/1623072-application) yÃ¶ntemidir. Ä°ÅŸlenen URL'lerin ÅŸemasÄ±nÄ±n HTTP veya HTTPS olmasÄ± Ã¶nemlidir, diÄŸerleri desteklenmeyecektir.

#### **Veri Ä°ÅŸleyici YÃ¶nteminin DoÄŸrulanmasÄ±**

Evrensel bir baÄŸlantÄ± bir uygulamayÄ± aÃ§tÄ±ÄŸÄ±nda, bir `NSUserActivity` nesnesi URL ile birlikte uygulamaya iletilir. Bu URL'yi iÅŸlemeden Ã¶nce, gÃ¼venlik risklerini Ã¶nlemek iÃ§in doÄŸrulamak ve temizlemek Ã¶nemlidir. Ä°ÅŸte bu sÃ¼reci gÃ¶steren Swift'te bir Ã¶rnek:
```swift
func application(_ application: UIApplication, continue userActivity: NSUserActivity,
restorationHandler: @escaping ([UIUserActivityRestoring]?) -> Void) -> Bool {
// Check for web browsing activity and valid URL
if userActivity.activityType == NSUserActivityTypeBrowsingWeb, let url = userActivity.webpageURL {
application.open(url, options: [:], completionHandler: nil)
}

return true
}
```
URL'ler Ã¶zellikle parametreler iÃ§eriyorsa dikkatlice ayrÄ±ÅŸtÄ±rÄ±lmalÄ± ve doÄŸrulanmalÄ±dÄ±r, bÃ¶ylece potansiyel sahtecilik veya hatalÄ± verilere karÅŸÄ± koruma saÄŸlanÄ±r. Bu amaÃ§la `NSURLComponents` API'si kullanÄ±ÅŸlÄ±dÄ±r, aÅŸaÄŸÄ±da gÃ¶sterildiÄŸi gibi:
```swift
func application(_ application: UIApplication,
continue userActivity: NSUserActivity,
restorationHandler: @escaping ([Any]?) -> Void) -> Bool {
guard userActivity.activityType == NSUserActivityTypeBrowsingWeb,
let incomingURL = userActivity.webpageURL,
let components = NSURLComponents(url: incomingURL, resolvingAgainstBaseURL: true),
let path = components.path,
let params = components.queryItems else {
return false
}

if let albumName = params.first(where: { $0.name == "albumname" })?.value,
let photoIndex = params.first(where: { $0.name == "index" })?.value {
// Process the URL with album name and photo index

return true

} else {
// Handle invalid or missing parameters

return false
}
}
```
**Dikkatli yapÄ±landÄ±rma ve doÄŸrulama** sayesinde geliÅŸtiriciler, evrensel baÄŸlantÄ±larÄ±n kullanÄ±cÄ± deneyimini artÄ±rÄ±rken gÃ¼venlik ve gizlilik standartlarÄ±nÄ± koruyabileceÄŸinden emin olabilirler.


## AraÃ§lar
* [GetUniversal.link](https://getuniversal.link/): UygulamanÄ±zÄ±n Evrensel BaÄŸlantÄ±larÄ± ve AASA dosyasÄ±nÄ±n test edilmesini ve yÃ¶netilmesini kolaylaÅŸtÄ±rmaya yardÄ±mcÄ± olur. AASA dosyasÄ±nÄ±n bÃ¼tÃ¼nlÃ¼ÄŸÃ¼nÃ¼ doÄŸrulamak iÃ§in alan adÄ±nÄ±zÄ± girin veya Ã¶zel panoyu kullanarak baÄŸlantÄ± davranÄ±ÅŸÄ±nÄ± kolayca test etmek iÃ§in Ã¶zel panoyu kullanÄ±n. Bu araÃ§ ayrÄ±ca Apple'Ä±n bir sonraki AASA dosyanÄ±zÄ± ne zaman dizine ekleyeceÄŸinizi belirlemenize yardÄ±mcÄ± olur.

## Referanslar
* [https://mas.owasp.org/MASTG/tests/ios/MASVS-PLATFORM/MASTG-TEST-0070/#static-analysis](https://mas.owasp.org/MASTG/tests/ios/MASVS-PLATFORM/MASTG-TEST-0070/#static-analysis)
* [https://mobile-security.gitbook.io/mobile-security-testing-guide/ios-testing-guide/0x06h-testing-platform-interaction#testing-object-persistence-mstg-platform-8](https://mobile-security.gitbook.io/mobile-security-testing-guide/ios-testing-guide/0x06h-testing-platform-interaction#testing-object-persistence-mstg-platform-8)



<details>

<summary><strong>SÄ±fÄ±rdan kahraman olacak ÅŸekilde AWS hacklemeyi Ã¶ÄŸrenin</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

HackTricks'Ä± desteklemenin diÄŸer yollarÄ±:

* **Åirketinizi HackTricks'te reklamÄ±nÄ± gÃ¶rmek istiyorsanÄ±z** veya **HackTricks'i PDF olarak indirmek istiyorsanÄ±z** [**ABONELÄ°K PLANLARI**]'na (https://github.com/sponsors/carlospolop) gÃ¶z atÄ±n!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) koleksiyonumuzu keÅŸfedin, Ã¶zel [**NFT'lerimiz**](https://opensea.io/collection/the-peass-family)
* **ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n veya bizi **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)** takip edin.**
* **Hacking pÃ¼f noktalarÄ±nÄ±zÄ± paylaÅŸarak PR'lar gÃ¶ndererek** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarÄ±na katkÄ±da bulunun.

</details>
