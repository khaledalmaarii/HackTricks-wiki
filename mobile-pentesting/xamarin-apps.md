# Xamarin Apps

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

This is a summary of the blog post [https://www.appknox.com/security/xamarin-reverse-engineering-a-guide-for-penetration-testers](https://www.appknox.com/security/xamarin-reverse-engineering-a-guide-for-penetration-testers)

## **Temel Bilgiler**

Xamarin, geliÅŸtiricilerin **iOS, Android ve Windows iÃ§in uygulamalar oluÅŸturmasÄ±nÄ±** saÄŸlamak amacÄ±yla tasarlanmÄ±ÅŸ **aÃ§Ä±k kaynak bir platformdur** ve .NET ile C# frameworklerini kullanÄ±r. Bu platform, modern uygulamalarÄ± verimli bir ÅŸekilde oluÅŸturmak iÃ§in birÃ§ok araÃ§ ve uzantÄ±ya eriÅŸim sunar.

### Xamarin'Ä±n Mimarisi

- **Android** iÃ§in, Xamarin, .NET baÄŸlamalarÄ± aracÄ±lÄ±ÄŸÄ±yla Android ve Java ad alanlarÄ±yla entegre olur ve Mono yÃ¼rÃ¼tme ortamÄ±nda Android Runtime (ART) ile birlikte Ã§alÄ±ÅŸÄ±r. Managed Callable Wrappers (MCW) ve Android Callable Wrappers (ACW), Mono ve ART arasÄ±nda iletiÅŸimi kolaylaÅŸtÄ±rÄ±r; her ikisi de Linux Ã§ekirdeÄŸi Ã¼zerine inÅŸa edilmiÅŸtir.
- **iOS** iÃ§in, uygulamalar Mono Ã§alÄ±ÅŸma zamanÄ± altÄ±nda Ã§alÄ±ÅŸÄ±r ve C# .NET kodunu ARM montaj diline dÃ¶nÃ¼ÅŸtÃ¼rmek iÃ§in tam Ahead of Time (AOT) derlemesi kullanÄ±r. Bu sÃ¼reÃ§, UNIX benzeri bir Ã§ekirdek Ã¼zerinde Objective-C Runtime ile birlikte Ã§alÄ±ÅŸÄ±r.

### .NET Runtime ve Mono Framework

**.NET framework**, uygulama geliÅŸtirme iÃ§in derlemeler, sÄ±nÄ±flar ve ad alanlarÄ± iÃ§erir ve .NET Runtime, kod yÃ¼rÃ¼tmesini yÃ¶netir. Platform baÄŸÄ±msÄ±zlÄ±ÄŸÄ± ve geriye dÃ¶nÃ¼k uyumluluk sunar. **Mono Framework**, 2005 yÄ±lÄ±nda .NET'i Linux'a geniÅŸletmek amacÄ±yla baÅŸlatÄ±lan aÃ§Ä±k kaynak bir .NET framework versiyonudur ve ÅŸu anda Microsoft tarafÄ±ndan desteklenmekte ve Xamarin tarafÄ±ndan yÃ¶netilmektedir.

### Xamarin UygulamalarÄ±nÄ±n Tersine MÃ¼hendisliÄŸi

#### Xamarin Derlemelerinin DeÄŸiÅŸtirilmesi

DeÄŸiÅŸtirme, derlenmiÅŸ kodu tekrar kaynak koda dÃ¶nÃ¼ÅŸtÃ¼rÃ¼r. Windows'ta, Visual Studio'daki ModÃ¼ller penceresi, deÄŸiÅŸtirme iÃ§in modÃ¼lleri tanÄ±mlayabilir ve Ã¼Ã§Ã¼ncÃ¼ taraf koda doÄŸrudan eriÅŸim saÄŸlayarak analiz iÃ§in kaynak kodunu Ã§Ä±karmaya olanak tanÄ±r.

#### JIT vs AOT Derlemesi

- **Android**, Just-In-Time (JIT) ve Ahead-Of-Time (AOT) derlemesini destekler ve optimal yÃ¼rÃ¼tme hÄ±zÄ± iÃ§in Hibrit AOT moduna sahiptir. Tam AOT, yalnÄ±zca Kurumsal lisanslara Ã¶zeldir.
- **iOS**, Apple'Ä±n dinamik kod yÃ¼rÃ¼tme Ã¼zerindeki kÄ±sÄ±tlamalarÄ± nedeniyle yalnÄ±zca AOT derlemesi kullanÄ±r.

### APK/IPA'dan dll DosyalarÄ±nÄ± Ã‡Ä±karma

APK/IPA'daki derlemelere eriÅŸmek iÃ§in dosyayÄ± aÃ§Ä±n ve derlemeler dizinini keÅŸfedin. Android iÃ§in, [XamAsmUnZ](https://github.com/cihansol/XamAsmUnZ) ve [xamarin-decompress](https://github.com/NickstaDB/xamarin-decompress) gibi araÃ§lar dll dosyalarÄ±nÄ± aÃ§abilir.
```bash
python3 xamarin-decompress.py -o /path/to/decompressed/apk
```
Android'daki assembly blob'larÄ± iÃ§in, [pyxamstore](https://github.com/jakev/pyxamstore) bunlarÄ± aÃ§abilir.
```bash
pyxamstore unpack -d /path/to/decompressed/apk/assemblies/
```
iOS dll dosyalarÄ±, uygulama kodunun Ã¶nemli kÄ±sÄ±mlarÄ±nÄ± ortaya Ã§Ä±kararak dekompilasyon iÃ§in kolayca eriÅŸilebilir durumdadÄ±r; bu kod genellikle farklÄ± platformlar arasÄ±nda ortak bir temel paylaÅŸÄ±r.

### Dinamik Analiz

Dinamik analiz, SSL pinning kontrolÃ¼ yapmayÄ± ve Xamarin uygulamalarÄ±ndaki .NET ikili dosyalarÄ±nÄ±n Ã§alÄ±ÅŸma zamanÄ± deÄŸiÅŸiklikleri iÃ§in [Fridax](https://github.com/NorthwaveSecurity/fridax) gibi araÃ§lar kullanmayÄ± iÃ§erir. Root tespiti veya SSL pinning'i atlatmak iÃ§in Frida betikleri mevcuttur ve bu, analiz yeteneklerini artÄ±rÄ±r.

DiÄŸer ilginÃ§ Frida betikleri:

* [**xamarin-antiroot**](https://codeshare.frida.re/@Gand3lf/xamarin-antiroot/)
* [**xamarin-root-detect-bypass**](https://codeshare.frida.re/@nuschpl/xamarin-root-detect-bypass/)
* [**Frida-xamarin-unpin**](https://github.com/GoSecure/frida-xamarin-unpin)


## Daha fazla bilgi
* [https://www.appknox.com/security/xamarin-reverse-engineering-a-guide-for-penetration-testers](https://www.appknox.com/security/xamarin-reverse-engineering-a-guide-for-penetration-testers)
* [https://thecobraden.com/posts/unpacking\_xamarin\_assembly\_stores/](https://thecobraden.com/posts/unpacking\_xamarin\_assembly\_stores/)

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
