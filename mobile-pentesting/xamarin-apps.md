# Xamarin Apps

<details>

<summary><strong>Naucz si hakowa AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Inne sposoby wsparcia HackTricks:

* Jeli chcesz zobaczy swoj **firm reklamowan w HackTricks** lub **pobra HackTricks w formacie PDF**, sprawd藕 [**PLAN SUBSKRYPCJI**](https://github.com/sponsors/carlospolop)!
* Zdobd藕 [**oficjalne gad偶ety PEASS & HackTricks**](https://peass.creator-spring.com)
* Odkryj [**Rodzin PEASS**](https://opensea.io/collection/the-peass-family), nasz kolekcj ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* **Docz do**  [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **led藕** nas na **Twitterze**  [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Podziel si swoimi sztuczkami hakerskimi, przesyajc PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>

To jest streszczenie artykuu na blogu [https://www.appknox.com/security/xamarin-reverse-engineering-a-guide-for-penetration-testers](https://www.appknox.com/security/xamarin-reverse-engineering-a-guide-for-penetration-testers)

## **Podstawowe informacje**

Xamarin to **platforma open-source** przeznaczona dla programist贸w do tworzenia aplikacji dla iOS, Androida i Windows przy u偶yciu framework贸w .NET i C#. Ta platforma oferuje dostp do licznych narzdzi i rozszerze umo偶liwiajcych efektywne tworzenie nowoczesnych aplikacji.

### Architektura Xamarin

- Dla systemu **Android**, Xamarin integruje si z przestrzeniami nazw Androida i Javy za pomoc powiza .NET, dziaajc w rodowisku wykonawczym Mono obok Android Runtime (ART). Zar贸wno Managed Callable Wrappers (MCW), jak i Android Callable Wrappers (ACW) uatwiaj komunikacj midzy Mono a ART, oba zbudowane na jdrze Linuxa.
- Dla systemu **iOS**, aplikacje dziaaj w rodowisku wykonawczym Mono, wykorzystujc pen kompilacj Ahead of Time (AOT) do przeksztacenia kodu C# .NET w jzyk asemblera ARM. Ten proces dziaa obok Objective-C Runtime na jdrze przypominajcym UNIX.

### .NET Runtime i Mono Framework

**.NET framework** zawiera zestawy, klasy i przestrzenie nazw do tworzenia aplikacji, a .NET Runtime zarzdza wykonaniem kodu. Oferuje on niezale偶no platformy i wsteczn kompatybilno. **Mono Framework** to wersja open-source frameworku .NET, rozpoczta w 2005 roku w celu rozszerzenia .NET na Linux, obecnie wspierana przez Microsoft i prowadzona przez Xamarin.

### Reverse Engineering aplikacji Xamarin

#### Dekompilacja zestaw贸w Xamarin

Dekompilacja przeksztaca skompilowany kod z powrotem na kod 藕r贸dowy. W systemie Windows, okno Moduy w programie Visual Studio mo偶e zidentyfikowa moduy do dekompilacji, umo偶liwiajc bezporedni dostp do kodu firm trzecich i wyodrbnienie kodu 藕r贸dowego do analizy.

#### Kompilacja JIT vs AOT

- **Android** obsuguje kompilacj Just-In-Time (JIT) i Ahead-Of-Time (AOT), z trybem Hybrid AOT dla optymalnej prdkoci wykonania. Pena kompilacja AOT jest dostpna tylko w licencjach Enterprise.
- **iOS** wykorzystuje wycznie kompilacj AOT ze wzgldu na ograniczenia Apple dotyczce dynamicznego wykonywania kodu.

### Wyodrbnianie plik贸w dll z APK/IPA

Aby uzyska dostp do zestaw贸w w pliku APK/IPA, nale偶y rozpakowa plik i przejrze katalog zestaw贸w. Dla systemu Android, narzdzia takie jak [XamAsmUnZ](https://github.com/cihansol/XamAsmUnZ) i [xamarin-decompress](https://github.com/NickstaDB/xamarin-decompress) mog rozpakowa pliki dll.
```bash
python3 xamarin-decompress.py -o /path/to/decompressed/apk
```
Dla blok贸w monta偶owych w systemie Android, [pyxamstore](https://github.com/jakev/pyxamstore) mo偶e je rozpakowa.
```bash
pyxamstore unpack -d /path/to/decompressed/apk/assemblies/
```
Pliki DLL dla systemu iOS s atwo dostpne do dekompilacji, ujawniajc znaczn cz kodu aplikacji, kt贸ry czsto jest wsp贸lny dla r贸偶nych platform.

### Analiza dynamiczna

Analiza dynamiczna polega na sprawdzaniu przypinania SSL i korzystaniu z narzdzi takich jak [Fridax](https://github.com/NorthwaveSecurity/fridax) do modyfikacji w czasie wykonywania binarnego pliku .NET w aplikacjach Xamarin. Dostpne s skrypty Frida umo偶liwiajce obejcie wykrywania roota lub przypinania SSL, zwikszajc mo偶liwoci analizy.

Inne interesujce skrypty Frida:

* [**xamarin-antiroot**](https://codeshare.frida.re/@Gand3lf/xamarin-antiroot/)
* [**xamarin-root-detect-bypass**](https://codeshare.frida.re/@nuschpl/xamarin-root-detect-bypass/)
* [**Frida-xamarin-unpin**](https://github.com/GoSecure/frida-xamarin-unpin)


## Dodatkowe informacje
* [https://www.appknox.com/security/xamarin-reverse-engineering-a-guide-for-penetration-testers](https://www.appknox.com/security/xamarin-reverse-engineering-a-guide-for-penetration-testers)
* [https://thecobraden.com/posts/unpacking\_xamarin\_assembly\_stores/](https://thecobraden.com/posts/unpacking\_xamarin\_assembly\_stores/)

<details>

<summary><strong>Naucz si hakowa AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Inne sposoby wsparcia HackTricks:

* Jeli chcesz zobaczy swoj **firm reklamowan w HackTricks** lub **pobra HackTricks w formacie PDF**, sprawd藕 [**PLAN SUBSKRYPCJI**](https://github.com/sponsors/carlospolop)!
* Zdobd藕 [**oficjalne gad偶ety PEASS & HackTricks**](https://peass.creator-spring.com)
* Odkryj [**Rodzin PEASS**](https://opensea.io/collection/the-peass-family), nasz kolekcj ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* **Docz do**  [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **led藕** nas na **Twitterze**  [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Podziel si swoimi sztuczkami hakerskimi, przesyajc PR do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
