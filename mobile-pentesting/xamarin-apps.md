# Xamarin ì•±

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong>ë¥¼ í†µí•´ AWS í•´í‚¹ì„ ì²˜ìŒë¶€í„° ì „ë¬¸ê°€ê¹Œì§€ ë°°ì›Œë³´ì„¸ìš”<strong>!</strong></summary>

HackTricksë¥¼ ì§€ì›í•˜ëŠ” ë‹¤ë¥¸ ë°©ë²•:

* **íšŒì‚¬ë¥¼ HackTricksì—ì„œ ê´‘ê³ í•˜ê±°ë‚˜ HackTricksë¥¼ PDFë¡œ ë‹¤ìš´ë¡œë“œ**í•˜ë ¤ë©´ [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)ë¥¼ í™•ì¸í•˜ì„¸ìš”!
* [**ê³µì‹ PEASS & HackTricks ìŠ¤ì›¨ê·¸**](https://peass.creator-spring.com)ë¥¼ ì–»ìœ¼ì„¸ìš”.
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ë¥¼ ë°œê²¬í•˜ì„¸ìš”. ë…ì ì ì¸ [**NFTs**](https://opensea.io/collection/the-peass-family) ì»¬ë ‰ì…˜ì…ë‹ˆë‹¤.
* ğŸ’¬ [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— **ì°¸ì—¬**í•˜ê±°ë‚˜ **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)ì„ **íŒ”ë¡œìš°**í•˜ì„¸ìš”.
* **HackTricks**ì™€ **HackTricks Cloud** github ì €ì¥ì†Œì— PRì„ ì œì¶œí•˜ì—¬ **í•´í‚¹ íŠ¸ë¦­ì„ ê³µìœ **í•˜ì„¸ìš”.

</details>

ì´ê²ƒì€ ë¸”ë¡œê·¸ ê²Œì‹œë¬¼ [https://www.appknox.com/security/xamarin-reverse-engineering-a-guide-for-penetration-testers](https://www.appknox.com/security/xamarin-reverse-engineering-a-guide-for-penetration-testers)ì˜ ìš”ì•½ì…ë‹ˆë‹¤.

## **ê¸°ë³¸ ì •ë³´**

Xamarinì€ .NET ë° C# í”„ë ˆì„ì›Œí¬ë¥¼ ì‚¬ìš©í•˜ì—¬ iOS, Android ë° Windowsìš© ì•±ì„ ê°œë°œí•˜ê¸° ìœ„í•´ ê°œë°œëœ **ì˜¤í”ˆ ì†ŒìŠ¤ í”Œë«í¼**ì…ë‹ˆë‹¤. ì´ í”Œë«í¼ì€ í˜„ëŒ€ì ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ íš¨ìœ¨ì ìœ¼ë¡œ ë§Œë“¤ê¸° ìœ„í•´ ë‹¤ì–‘í•œ ë„êµ¬ì™€ í™•ì¥ ê¸°ëŠ¥ì— ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### Xamarinì˜ ì•„í‚¤í…ì²˜

- **Android**ì˜ ê²½ìš°, Xamarinì€ .NET ë°”ì¸ë”©ì„ í†µí•´ Android ë° Java ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì™€ í†µí•©ë˜ë©° Mono ì‹¤í–‰ í™˜ê²½ì—ì„œ Android Runtime (ART)ê³¼ í•¨ê»˜ ì‘ë™í•©ë‹ˆë‹¤. ê´€ë¦¬ ê°€ëŠ¥í•œ í˜¸ì¶œ ë˜í¼(MCW)ì™€ Android í˜¸ì¶œ ë˜í¼(ACW)ëŠ” Monoì™€ ART ê°„ì˜ í†µì‹ ì„ ìš©ì´í•˜ê²Œ í•©ë‹ˆë‹¤. ì´ ë‘ ê°€ì§€ëŠ” Linux ì»¤ë„ ìœ„ì— êµ¬ì¶•ë˜ì–´ ìˆìŠµë‹ˆë‹¤.
- **iOS**ì˜ ê²½ìš°, ì• í”Œë¦¬ì¼€ì´ì…˜ì€ Mono ëŸ°íƒ€ì„ì—ì„œ ì‹¤í–‰ë˜ë©° C# .NET ì½”ë“œë¥¼ ARM ì–´ì…ˆë¸”ë¦¬ì–´ë¡œ ë³€í™˜í•˜ê¸° ìœ„í•´ ì™„ì „í•œ Ahead of Time (AOT) ì»´íŒŒì¼ì„ ì‚¬ìš©í•©ë‹ˆë‹¤. ì´ í”„ë¡œì„¸ìŠ¤ëŠ” UNIXì™€ ìœ ì‚¬í•œ ì»¤ë„ ìœ„ì—ì„œ Objective-C ëŸ°íƒ€ì„ê³¼ í•¨ê»˜ ì‹¤í–‰ë©ë‹ˆë‹¤.

### .NET ëŸ°íƒ€ì„ ë° Mono í”„ë ˆì„ì›Œí¬

**.NET í”„ë ˆì„ì›Œí¬**ëŠ” ì‘ìš© í”„ë¡œê·¸ë¨ ê°œë°œì„ ìœ„í•œ ì–´ì…ˆë¸”ë¦¬, í´ë˜ìŠ¤ ë° ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¥¼ í¬í•¨í•˜ë©° .NET ëŸ°íƒ€ì„ì€ ì½”ë“œ ì‹¤í–‰ì„ ê´€ë¦¬í•©ë‹ˆë‹¤. ì´ëŠ” í”Œë«í¼ ë…ë¦½ì„±ê³¼ ì—­í˜¸í™˜ì„±ì„ ì œê³µí•©ë‹ˆë‹¤. **Mono í”„ë ˆì„ì›Œí¬**ëŠ” .NET í”„ë ˆì„ì›Œí¬ì˜ ì˜¤í”ˆ ì†ŒìŠ¤ ë²„ì „ìœ¼ë¡œ, 2005ë…„ì— .NETì„ Linuxë¡œ í™•ì¥í•˜ê¸° ìœ„í•´ ì‹œì‘ë˜ì—ˆìœ¼ë©° í˜„ì¬ëŠ” Microsoftì—ì„œ ì§€ì›í•˜ê³  Xamarinì´ ì£¼ë„í•©ë‹ˆë‹¤.

### Xamarin ì•±ì˜ ì—­ê³µí•™

#### Xamarin ì–´ì…ˆë¸”ë¦¬ì˜ ë””ì»´íŒŒì¼

ë””ì»´íŒŒì¼ì€ ì»´íŒŒì¼ëœ ì½”ë“œë¥¼ ì†ŒìŠ¤ ì½”ë“œë¡œ ë³€í™˜í•˜ëŠ” ê³¼ì •ì…ë‹ˆë‹¤. Windowsì—ì„œëŠ” Visual Studioì˜ Modules ì°½ì„ í†µí•´ ë””ì»´íŒŒì¼í•  ëª¨ë“ˆì„ ì‹ë³„í•˜ì—¬ ì œ3ì ì½”ë“œì— ì§ì ‘ ì•¡ì„¸ìŠ¤í•˜ê³  ë¶„ì„ì„ ìœ„í•´ ì†ŒìŠ¤ ì½”ë“œë¥¼ ì¶”ì¶œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

#### JIT vs AOT ì»´íŒŒì¼

- **Android**ëŠ” Just-In-Time (JIT) ë° Ahead-Of-Time (AOT) ì»´íŒŒì¼ì„ ì§€ì›í•˜ë©° ìµœì ì˜ ì‹¤í–‰ ì†ë„ë¥¼ ìœ„í•œ Hybrid AOT ëª¨ë“œë¥¼ ì œê³µí•©ë‹ˆë‹¤. ì „ì²´ AOTëŠ” ì—”í„°í”„ë¼ì´ì¦ˆ ë¼ì´ì„ ìŠ¤ì—ë§Œ ì œê³µë©ë‹ˆë‹¤.
- **iOS**ëŠ” Appleì˜ ë™ì  ì½”ë“œ ì‹¤í–‰ì— ëŒ€í•œ ì œí•œìœ¼ë¡œ ì¸í•´ AOT ì»´íŒŒì¼ë§Œ ì‚¬ìš©í•©ë‹ˆë‹¤.

### APK/IPAì—ì„œ dll íŒŒì¼ ì¶”ì¶œ

APK/IPAì˜ ì–´ì…ˆë¸”ë¦¬ì— ì•¡ì„¸ìŠ¤í•˜ë ¤ë©´ íŒŒì¼ì„ ì••ì¶• í•´ì œí•˜ê³  ì–´ì…ˆë¸”ë¦¬ ë””ë ‰í† ë¦¬ë¥¼ íƒìƒ‰í•©ë‹ˆë‹¤. Androidì˜ ê²½ìš°, [XamAsmUnZ](https://github.com/cihansol/XamAsmUnZ)ì™€ [xamarin-decompress](https://github.com/NickstaDB/xamarin-decompress)ì™€ ê°™ì€ ë„êµ¬ë¥¼ ì‚¬ìš©í•˜ì—¬ dll íŒŒì¼ì„ ì••ì¶• í•´ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
```bash
python3 xamarin-decompress.py -o /path/to/decompressed/apk
```
Androidì—ì„œ ì–´ì…ˆë¸”ë¦¬ ë¸”ë¡­ì„ ì–¸íŒ©í•˜ëŠ” ë°ì—ëŠ” [pyxamstore](https://github.com/jakev/pyxamstore)ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
```bash
pyxamstore unpack -d /path/to/decompressed/apk/assemblies/
```
iOS dll íŒŒì¼ì€ ì†ì‰½ê²Œ ë³µí˜¸í™”í•  ìˆ˜ ìˆìœ¼ë©°, ë‹¤ì–‘í•œ í”Œë«í¼ì—ì„œ ê³µí†µì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ì½”ë“œì˜ ìƒë‹¹ ë¶€ë¶„ì„ ë…¸ì¶œì‹œí‚µë‹ˆë‹¤.

### ë™ì  ë¶„ì„

ë™ì  ë¶„ì„ì€ SSL í•€ë‹ì„ í™•ì¸í•˜ê³  Xamarin ì•±ì˜ .NET ì´ì§„ íŒŒì¼ì„ ëŸ°íƒ€ì„ì—ì„œ ìˆ˜ì •í•˜ê¸° ìœ„í•´ [Fridax](https://github.com/NorthwaveSecurity/fridax)ì™€ ê°™ì€ ë„êµ¬ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤. Frida ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‚¬ìš©í•˜ë©´ ë£¨íŠ¸ íƒì§€ ë˜ëŠ” SSL í•€ë‹ ìš°íšŒì™€ ê°™ì€ ê¸°ëŠ¥ì„ í–¥ìƒì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë‹¤ë¥¸ í¥ë¯¸ë¡œìš´ Frida ìŠ¤í¬ë¦½íŠ¸:

* [**xamarin-antiroot**](https://codeshare.frida.re/@Gand3lf/xamarin-antiroot/)
* [**xamarin-root-detect-bypass**](https://codeshare.frida.re/@nuschpl/xamarin-root-detect-bypass/)
* [**Frida-xamarin-unpin**](https://github.com/GoSecure/frida-xamarin-unpin)


## ì¶”ê°€ ì •ë³´
* [https://www.appknox.com/security/xamarin-reverse-engineering-a-guide-for-penetration-testers](https://www.appknox.com/security/xamarin-reverse-engineering-a-guide-for-penetration-testers)
* [https://thecobraden.com/posts/unpacking\_xamarin\_assembly\_stores/](https://thecobraden.com/posts/unpacking\_xamarin\_assembly\_stores/)

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong>ë¥¼ í†µí•´ AWS í•´í‚¹ì„ ì²˜ìŒë¶€í„° ì „ë¬¸ê°€ê¹Œì§€ ë°°ì›Œë³´ì„¸ìš”<strong>!</strong></summary>

HackTricksë¥¼ ì§€ì›í•˜ëŠ” ë‹¤ë¥¸ ë°©ë²•:

* **íšŒì‚¬ë¥¼ HackTricksì—ì„œ ê´‘ê³ í•˜ê±°ë‚˜ HackTricksë¥¼ PDFë¡œ ë‹¤ìš´ë¡œë“œ**í•˜ë ¤ë©´ [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)ë¥¼ í™•ì¸í•˜ì„¸ìš”!
* [**ê³µì‹ PEASS & HackTricks ìŠ¤ì›¨ê·¸**](https://peass.creator-spring.com)ë¥¼ êµ¬ë§¤í•˜ì„¸ìš”.
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ë¥¼ ë°œê²¬í•˜ì„¸ìš”. ë…ì ì ì¸ [**NFTs**](https://opensea.io/collection/the-peass-family) ì»¬ë ‰ì…˜ì…ë‹ˆë‹¤.
* ğŸ’¬ [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— **ì°¸ì—¬**í•˜ê±°ë‚˜ **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)ë¥¼ **íŒ”ë¡œìš°**í•˜ì„¸ìš”.
* **HackTricks**ì™€ **HackTricks Cloud** github ì €ì¥ì†Œì— PRì„ ì œì¶œí•˜ì—¬ ì—¬ëŸ¬ë¶„ì˜ í•´í‚¹ ê¸°ìˆ ì„ ê³µìœ í•˜ì„¸ìš”.

</details>
