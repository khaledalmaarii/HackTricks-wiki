# Xamarin aplikacije

<details>

<summary><strong>Nau캜ite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Drugi na캜ini podr코ke HackTricks-u:

* Ako 쬰lite da vidite **va코u kompaniju reklamiranu na HackTricks-u** ili **preuzmete HackTricks u PDF formatu** proverite [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Nabavite [**zvani캜ni PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Otkrijte [**The PEASS Family**](https://opensea.io/collection/the-peass-family), na코u kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* **Pridru쬴te se** 游눫 [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili nas **pratite** na **Twitter-u** 游냕 [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Podelite svoje hakovanje trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>

Ovo je sa쬰tak blog posta [https://www.appknox.com/security/xamarin-reverse-engineering-a-guide-for-penetration-testers](https://www.appknox.com/security/xamarin-reverse-engineering-a-guide-for-penetration-testers)

## **Osnovne informacije**

Xamarin je **open-source platforma** dizajnirana za razvoj aplikacija za iOS, Android i Windows koriste캖i .NET i C# framework-ove. Ova platforma pru쬬 pristup brojnim alatima i ekstenzijama za efikasno kreiranje modernih aplikacija.

### Xamarin-ova arhitektura

- Za **Android**, Xamarin se integri코e sa Android i Java namespace-ovima putem .NET veza, rade캖i unutar Mono izvr코nog okru쬰nja zajedno sa Android Runtime-om (ART). Managed Callable Wrappers (MCW) i Android Callable Wrappers (ACW) olak코avaju komunikaciju izme캠u Mono-a i ART-a, koji su oboje izgra캠eni na Linux kernelu.
- Za **iOS**, aplikacije se izvr코avaju pod Mono runtime-om, koriste캖i potpunu Ahead of Time (AOT) kompilaciju za pretvaranje C# .NET koda u ARM asemblerski jezik. Ovaj proces se izvr코ava zajedno sa Objective-C Runtime-om na UNIX-sli캜nom kernelu.

### .NET Runtime i Mono Framework

**.NET framework** uklju캜uje skupove, klase i namespace-ove za razvoj aplikacija, pri 캜emu .NET Runtime upravlja izvr코enjem koda. On nudi platformsku nezavisnost i kompatibilnost unazad. **Mono Framework** je open-source verzija .NET framework-a, pokrenuta 2005. godine da bi se .NET pro코irio na Linux, sada podr쬬na od strane Microsoft-a i vo캠ena od strane Xamarin-a.

### Reverse in쬰njering Xamarin aplikacija

#### Dekompilacija Xamarin Assembly-ja

Dekompilacija transformi코e kompilirani kod nazad u izvorni kod. Na Windows-u, prozor Moduli u Visual Studio-u mo쬰 identifikovati module za dekompilaciju, omogu캖avaju캖i direktni pristup kodu tre캖e strane i izvla캜enje izvornog koda radi analize.

#### JIT vs AOT kompilacija

- **Android** podr쬬va Just-In-Time (JIT) i Ahead-Of-Time (AOT) kompilaciju, sa Hibridnim AOT re쬴mom za optimalnu brzinu izvr코enja. Potpuna AOT je ekskluzivna za Enterprise licence.
- **iOS** isklju캜ivo koristi AOT kompilaciju zbog Apple-ovih ograni캜enja u vezi izvr코avanja dinami캜kog koda.

### Izdvajanje dll fajlova iz APK/IPA

Da biste pristupili skupovima u APK/IPA fajlu, raspakujte fajl i istra쬴te direktorijum skupova. Za Android, alati poput [XamAsmUnZ](https://github.com/cihansol/XamAsmUnZ) i [xamarin-decompress](https://github.com/NickstaDB/xamarin-decompress) mogu dekompresovati dll fajlove.
```bash
python3 xamarin-decompress.py -o /path/to/decompressed/apk
```
Za skupove monta쬰 u Androidu, [pyxamstore](https://github.com/jakev/pyxamstore) mo쬰 ih raspakovati.
```bash
pyxamstore unpack -d /path/to/decompressed/apk/assemblies/
```
iOS dll datoteke su lako dostupne za dekompilaciju, otkrivaju캖i zna캜ajne delove koda aplikacije, koji 캜esto dele zajedni캜ku osnovu na razli캜itim platformama.

### Dinami캜ka analiza

Dinami캜ka analiza uklju캜uje proveru SSL pinning-a i kori코캖enje alata poput [Fridax](https://github.com/NorthwaveSecurity/fridax) za izvr코ne modifikacije .NET binarnih fajlova u Xamarin aplikacijama. Frida skripte su dostupne za zaobila쬰nje detekcije root-a ili SSL pinning-a, pobolj코avaju캖i mogu캖nosti analize.

Druga interesantna Frida skripta:

* [**xamarin-antiroot**](https://codeshare.frida.re/@Gand3lf/xamarin-antiroot/)
* [**xamarin-root-detect-bypass**](https://codeshare.frida.re/@nuschpl/xamarin-root-detect-bypass/)
* [**Frida-xamarin-unpin**](https://github.com/GoSecure/frida-xamarin-unpin)


## Dodatne informacije
* [https://www.appknox.com/security/xamarin-reverse-engineering-a-guide-for-penetration-testers](https://www.appknox.com/security/xamarin-reverse-engineering-a-guide-for-penetration-testers)
* [https://thecobraden.com/posts/unpacking\_xamarin\_assembly\_stores/](https://thecobraden.com/posts/unpacking\_xamarin\_assembly\_stores/)

<details>

<summary><strong>Nau캜ite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Drugi na캜ini podr코ke HackTricks-u:

* Ako 쬰lite da vidite **va코u kompaniju ogla코enu na HackTricks-u** ili **preuzmete HackTricks u PDF formatu** proverite [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Nabavite [**zvani캜ni PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Otkrijte [**The PEASS Family**](https://opensea.io/collection/the-peass-family), na코u kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* **Pridru쬴te se** 游눫 [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili nas **pratite** na **Twitter-u** 游냕 [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Podelite svoje hakovanje trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>
