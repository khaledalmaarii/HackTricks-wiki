# Xamarin åº”ç”¨

<details>

<summary><strong>ä»é›¶å¼€å§‹å­¦ä¹  AWS é»‘å®¢æŠ€æœ¯ï¼Œæˆä¸ºä¸“å®¶</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTEï¼ˆHackTricks AWS çº¢é˜Ÿä¸“å®¶ï¼‰</strong></a><strong>ï¼</strong></summary>

æ”¯æŒ HackTricks çš„å…¶ä»–æ–¹å¼ï¼š

* å¦‚æœæ‚¨æƒ³çœ‹åˆ°æ‚¨çš„**å…¬å¸åœ¨ HackTricks ä¸­åšå¹¿å‘Š**æˆ–**ä¸‹è½½ PDF ç‰ˆæœ¬çš„ HackTricks**ï¼Œè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* è·å–[**å®˜æ–¹ PEASS & HackTricks å•†å“**](https://peass.creator-spring.com)
* æ¢ç´¢[**PEASS å®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬çš„ç‹¬å®¶[**NFT**](https://opensea.io/collection/the-peass-family)æ”¶è—å“
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**ç”µæŠ¥ç¾¤ç»„**](https://t.me/peass) æˆ–åœ¨ **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/carlospolopm) ä¸Š**å…³æ³¨**æˆ‘ã€‚
* é€šè¿‡å‘ [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github ä»“åº“æäº¤ PR æ¥**åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§**ã€‚

</details>

è¿™æ˜¯åšå®¢æ–‡ç« [https://www.appknox.com/security/xamarin-reverse-engineering-a-guide-for-penetration-testers](https://www.appknox.com/security/xamarin-reverse-engineering-a-guide-for-penetration-testers)çš„æ‘˜è¦

## **åŸºæœ¬ä¿¡æ¯**

Xamarin æ˜¯ä¸€ä¸ªä¸ºå¼€å‘äººå‘˜è®¾è®¡çš„**å¼€æºå¹³å°**ï¼Œä½¿ç”¨ .NET å’Œ C# æ¡†æ¶**æ„å»º iOSã€Android å’Œ Windows åº”ç”¨**ã€‚è¯¥å¹³å°æä¾›è®¿é—®ä¼—å¤šå·¥å…·å’Œæ‰©å±•ï¼Œä»¥é«˜æ•ˆåˆ›å»ºç°ä»£åº”ç”¨ç¨‹åºã€‚

### Xamarin çš„æ¶æ„

- å¯¹äº**Android**ï¼ŒXamarin é€šè¿‡ .NET ç»‘å®šä¸ Android å’Œ Java å‘½åç©ºé—´é›†æˆï¼Œåœ¨ Mono æ‰§è¡Œç¯å¢ƒä¸­ä¸ Android Runtime (ART) ä¸€èµ·è¿è¡Œã€‚æ‰˜ç®¡å¯è°ƒç”¨åŒ…è£…å™¨ (MCW) å’Œ Android å¯è°ƒç”¨åŒ…è£…å™¨ (ACW) ä¿ƒè¿› Mono å’Œ ART ä¹‹é—´çš„é€šä¿¡ï¼Œä¸¤è€…éƒ½å»ºç«‹åœ¨ Linux å†…æ ¸ä¸Šã€‚
- å¯¹äº**iOS**ï¼Œåº”ç”¨ç¨‹åºåœ¨ Mono è¿è¡Œæ—¶ä¸‹è¿è¡Œï¼Œåˆ©ç”¨å®Œå…¨çš„ Ahead of Time (AOT) ç¼–è¯‘å°† C# .NET ä»£ç è½¬æ¢ä¸º ARM æ±‡ç¼–è¯­è¨€ã€‚æ­¤è¿‡ç¨‹ä¸ Objective-C Runtime åœ¨ç±» UNIX å†…æ ¸ä¸Šè¿è¡Œã€‚

### .NET Runtime å’Œ Mono æ¡†æ¶

**.NET æ¡†æ¶**åŒ…æ‹¬ç”¨äºåº”ç”¨ç¨‹åºå¼€å‘çš„ç¨‹åºé›†ã€ç±»å’Œå‘½åç©ºé—´ï¼Œ.NET Runtime ç®¡ç†ä»£ç æ‰§è¡Œã€‚å®ƒæä¾›å¹³å°ç‹¬ç«‹æ€§å’Œå‘åå…¼å®¹æ€§ã€‚**Mono æ¡†æ¶**æ˜¯ .NET æ¡†æ¶çš„å¼€æºç‰ˆæœ¬ï¼Œäº 2005 å¹´å¯åŠ¨ï¼Œæ—¨åœ¨å°† .NET æ‰©å±•åˆ° Linuxï¼Œç°åœ¨å¾—åˆ° Microsoft çš„æ”¯æŒï¼Œå¹¶ç”± Xamarin é¢†å¯¼ã€‚

### åå‘å·¥ç¨‹ Xamarin åº”ç”¨

#### åç¼–è¯‘ Xamarin ç¨‹åºé›†

åç¼–è¯‘å°†ç¼–è¯‘åçš„ä»£ç è½¬æ¢å›æºä»£ç ã€‚åœ¨ Windows ä¸­ï¼ŒVisual Studio çš„æ¨¡å—çª—å£å¯ä»¥è¯†åˆ«ç”¨äºåç¼–è¯‘çš„æ¨¡å—ï¼Œä»è€Œå¯ä»¥ç›´æ¥è®¿é—®ç¬¬ä¸‰æ–¹ä»£ç å¹¶æå–æºä»£ç è¿›è¡Œåˆ†æã€‚

#### JIT ä¸ AOT ç¼–è¯‘

- **Android** æ”¯æŒå³æ—¶ (JIT) å’Œæå‰ (AOT) ç¼–è¯‘ï¼Œå…·æœ‰æ··åˆ AOT æ¨¡å¼ä»¥è·å¾—æœ€ä½³æ‰§è¡Œé€Ÿåº¦ã€‚å®Œå…¨ AOT ä»…é€‚ç”¨äºä¼ä¸šè®¸å¯è¯ã€‚
- **iOS** ç”±äºè‹¹æœå¯¹åŠ¨æ€ä»£ç æ‰§è¡Œçš„é™åˆ¶ï¼Œä»…ä½¿ç”¨ AOT ç¼–è¯‘ã€‚

### ä» APK/IPA ä¸­æå– dll æ–‡ä»¶

è¦è®¿é—® APK/IPA ä¸­çš„ç¨‹åºé›†ï¼Œè¯·è§£å‹æ–‡ä»¶å¹¶æµè§ˆç¨‹åºé›†ç›®å½•ã€‚å¯¹äº Androidï¼Œå¯ä»¥ä½¿ç”¨ [XamAsmUnZ](https://github.com/cihansol/XamAsmUnZ) å’Œ [xamarin-decompress](https://github.com/NickstaDB/xamarin-decompress) ç­‰å·¥å…·è§£å‹ç¼© dll æ–‡ä»¶ã€‚
```bash
python3 xamarin-decompress.py -o /path/to/decompressed/apk
```
åœ¨Androidä¸­ï¼Œ[pyxamstore](https://github.com/jakev/pyxamstore)å¯ä»¥è§£åŒ…æ±‡ç¼–å—ã€‚
```bash
pyxamstore unpack -d /path/to/decompressed/apk/assemblies/
```
iOSçš„dllæ–‡ä»¶å¯ä»¥è½»æ¾è®¿é—®å¹¶è¿›è¡Œåç¼–è¯‘ï¼Œæ­ç¤ºåº”ç”¨ç¨‹åºä»£ç çš„é‡è¦éƒ¨åˆ†ï¼Œè¿™äº›éƒ¨åˆ†é€šå¸¸åœ¨ä¸åŒå¹³å°ä¸Šå…±äº«å…±åŒçš„åŸºç¡€ã€‚

### åŠ¨æ€åˆ†æ

åŠ¨æ€åˆ†ææ¶‰åŠæ£€æŸ¥SSLç»‘å®šå¹¶ä½¿ç”¨ç±»ä¼¼[Fridax](https://github.com/NorthwaveSecurity/fridax)çš„å·¥å…·å¯¹Xamarinåº”ç”¨ç¨‹åºä¸­çš„.NETäºŒè¿›åˆ¶æ–‡ä»¶è¿›è¡Œè¿è¡Œæ—¶ä¿®æ”¹ã€‚Fridaè„šæœ¬å¯ç”¨äºç»•è¿‡rootæ£€æµ‹æˆ–SSLç»‘å®šï¼Œå¢å¼ºåˆ†æèƒ½åŠ›ã€‚

å…¶ä»–æœ‰è¶£çš„Fridaè„šæœ¬ï¼š

* [**xamarin-antiroot**](https://codeshare.frida.re/@Gand3lf/xamarin-antiroot/)
* [**xamarin-root-detect-bypass**](https://codeshare.frida.re/@nuschpl/xamarin-root-detect-bypass/)
* [**Frida-xamarin-unpin**](https://github.com/GoSecure/frida-xamarin-unpin)


## æ›´å¤šä¿¡æ¯
* [https://www.appknox.com/security/xamarin-reverse-engineering-a-guide-for-penetration-testers](https://www.appknox.com/security/xamarin-reverse-engineering-a-guide-for-penetration-testers)
* [https://thecobraden.com/posts/unpacking\_xamarin\_assembly\_stores/](https://thecobraden.com/posts/unpacking\_xamarin\_assembly\_stores/)

<details>

<summary><strong>ä»é›¶å¼€å§‹å­¦ä¹ AWSé»‘å®¢æŠ€æœ¯ï¼Œæˆä¸ºä¸“å®¶</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

æ”¯æŒHackTricksçš„å…¶ä»–æ–¹å¼ï¼š

* å¦‚æœæ‚¨æƒ³çœ‹åˆ°æ‚¨çš„**å…¬å¸åœ¨HackTricksä¸­åšå¹¿å‘Š**æˆ–**ä¸‹è½½PDFæ ¼å¼çš„HackTricks**ï¼Œè¯·æŸ¥çœ‹[**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* è·å–[**å®˜æ–¹PEASS & HackTrickså‘¨è¾¹äº§å“**](https://peass.creator-spring.com)
* æ¢ç´¢[**PEASS Family**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬çš„ç‹¬å®¶[NFTs](https://opensea.io/collection/the-peass-family)æ”¶è—å“
* **åŠ å…¥** ğŸ’¬ [**Discordç¾¤**](https://discord.gg/hRep4RUj7f) æˆ– [**ç”µæŠ¥ç¾¤**](https://t.me/peass) æˆ–åœ¨**Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/carlospolopm)**ä¸Šå…³æ³¨**æˆ‘ã€‚
* é€šè¿‡å‘[**HackTricks**](https://github.com/carlospolop/hacktricks)å’Œ[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) githubä»“åº“æäº¤PRæ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚

</details>
