# 1080 - Pentesting Socks

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong>ë¥¼ í†µí•´ AWS í•´í‚¹ì„ ì²˜ìŒë¶€í„° ì „ë¬¸ê°€ê¹Œì§€ ë°°ì›Œë³´ì„¸ìš”<strong>!</strong></summary>

HackTricksë¥¼ ì§€ì›í•˜ëŠ” ë‹¤ë¥¸ ë°©ë²•:

* **íšŒì‚¬ë¥¼ HackTricksì—ì„œ ê´‘ê³ í•˜ê±°ë‚˜ HackTricksë¥¼ PDFë¡œ ë‹¤ìš´ë¡œë“œ**í•˜ë ¤ë©´ [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)ë¥¼ í™•ì¸í•˜ì„¸ìš”!
* [**ê³µì‹ PEASS & HackTricks ìŠ¤ì›¨ê·¸**](https://peass.creator-spring.com)ë¥¼ ì–»ìœ¼ì„¸ìš”.
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ë¥¼ ë°œê²¬í•˜ì„¸ìš”. ë…ì ì ì¸ [**NFTs**](https://opensea.io/collection/the-peass-family) ì»¬ë ‰ì…˜ì…ë‹ˆë‹¤.
* ğŸ’¬ [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— **ì°¸ì—¬**í•˜ê±°ë‚˜ **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)ë¥¼ **íŒ”ë¡œìš°**í•˜ì„¸ìš”.
* **Hacking íŠ¸ë¦­ì„ ê³µìœ í•˜ë ¤ë©´** [**HackTricks**](https://github.com/carlospolop/hacktricks) ë° [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github ì €ì¥ì†Œì— PRì„ ì œì¶œí•˜ì„¸ìš”.

</details>

## ê¸°ë³¸ ì •ë³´

**SOCKS**ëŠ” í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ ê°„ì— í”„ë¡ì‹œë¥¼ í†µí•´ ë°ì´í„°ë¥¼ ì „ì†¡í•˜ëŠ” ë° ì‚¬ìš©ë˜ëŠ” í”„ë¡œí† ì½œì…ë‹ˆë‹¤. ë‹¤ì„¯ ë²ˆì§¸ ë²„ì „ì¸ **SOCKS5**ëŠ” ì„ íƒì  ì¸ì¦ ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ì—¬ ì¸ì¦ëœ ì‚¬ìš©ìë§Œ ì„œë²„ì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤. ì´ í”„ë¡œí† ì½œì€ ì£¼ë¡œ TCP ì—°ê²°ì˜ í”„ë¡ì‹œ ë° UDP íŒ¨í‚·ì˜ ì „ë‹¬ì„ ì²˜ë¦¬í•˜ë©° OSI ëª¨ë¸ì˜ ì„¸ì…˜ ê³„ì¸µ (ë ˆì´ì–´ 5)ì—ì„œ ì‘ë™í•©ë‹ˆë‹¤.

**ê¸°ë³¸ í¬íŠ¸:** 1080

## ì—´ê±°

### ì¸ì¦ í™•ì¸
```bash
nmap -p 1080 <ip> --script socks-auth-info
```
### ë¸Œë£¨íŠ¸ í¬ìŠ¤

#### ê¸°ë³¸ ì‚¬ìš©ë²•
```bash
nmap --script socks-brute -p 1080 <ip>
```
#### ê³ ê¸‰ ì‚¬ìš©ë²•

##### Socks Proxy

A SOCKS proxy is a protocol that allows a client to establish a TCP connection through a proxy server. It can be used to bypass firewalls and access restricted networks. In a pentesting scenario, SOCKS proxies can be useful for hiding the attacker's IP address and maintaining anonymity.

##### ì†Œì¼“ í”„ë¡ì‹œ

SOCKS í”„ë¡ì‹œëŠ” í´ë¼ì´ì–¸íŠ¸ê°€ í”„ë¡ì‹œ ì„œë²„ë¥¼ í†µí•´ TCP ì—°ê²°ì„ ì„¤ì •í•  ìˆ˜ ìˆëŠ” í”„ë¡œí† ì½œì…ë‹ˆë‹¤. ë°©í™”ë²½ì„ ìš°íšŒí•˜ê³  ì œí•œëœ ë„¤íŠ¸ì›Œí¬ì— ì ‘ê·¼í•˜ëŠ” ë° ì‚¬ìš©ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. íœí…ŒìŠ¤íŒ… ì‹œë‚˜ë¦¬ì˜¤ì—ì„œ SOCKS í”„ë¡ì‹œëŠ” ê³µê²©ìì˜ IP ì£¼ì†Œë¥¼ ìˆ¨ê¸°ê³  ìµëª…ì„±ì„ ìœ ì§€í•˜ëŠ” ë° ìœ ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

##### Dynamic Port Forwarding

Dynamic port forwarding is a technique that allows a client to create a secure tunnel between their local machine and a remote server. This can be useful for accessing resources on a remote network that are not directly accessible. In a pentesting context, dynamic port forwarding can be used to bypass network restrictions and gain access to internal systems.

##### ë™ì  í¬íŠ¸ í¬ì›Œë”©

ë™ì  í¬íŠ¸ í¬ì›Œë”©ì€ í´ë¼ì´ì–¸íŠ¸ê°€ ë¡œì»¬ ë¨¸ì‹ ê³¼ ì›ê²© ì„œë²„ ì‚¬ì´ì— ì•ˆì „í•œ í„°ë„ì„ ìƒì„±í•  ìˆ˜ ìˆëŠ” ê¸°ìˆ ì…ë‹ˆë‹¤. ì´ëŠ” ì§ì ‘ ì ‘ê·¼í•  ìˆ˜ ì—†ëŠ” ì›ê²© ë„¤íŠ¸ì›Œí¬ì˜ ë¦¬ì†ŒìŠ¤ì— ì ‘ê·¼í•˜ëŠ” ë° ìœ ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. íœí…ŒìŠ¤íŒ… í™˜ê²½ì—ì„œ ë™ì  í¬íŠ¸ í¬ì›Œë”©ì€ ë„¤íŠ¸ì›Œí¬ ì œí•œì„ ìš°íšŒí•˜ê³  ë‚´ë¶€ ì‹œìŠ¤í…œì— ì•¡ì„¸ìŠ¤í•˜ëŠ” ë° ì‚¬ìš©ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

##### Proxychains

Proxychains is a tool that allows applications to use proxy servers for network connections. It can be used to redirect network traffic through multiple proxies, providing an additional layer of anonymity. In a pentesting scenario, Proxychains can be used to hide the attacker's IP address and route traffic through different servers to avoid detection.

##### Proxychains

ProxychainsëŠ” ì‘ìš© í”„ë¡œê·¸ë¨ì´ ë„¤íŠ¸ì›Œí¬ ì—°ê²°ì— í”„ë¡ì‹œ ì„œë²„ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ë„êµ¬ì…ë‹ˆë‹¤. ì´ë¥¼ ì‚¬ìš©í•˜ì—¬ ë„¤íŠ¸ì›Œí¬ íŠ¸ë˜í”½ì„ ì—¬ëŸ¬ í”„ë¡ì‹œë¥¼ í†µí•´ ë¦¬ë””ë ‰ì…˜í•˜ì—¬ ì¶”ê°€ì ì¸ ìµëª…ì„±ì„ ì œê³µí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. íœí…ŒìŠ¤íŒ… ì‹œë‚˜ë¦¬ì˜¤ì—ì„œ ProxychainsëŠ” ê³µê²©ìì˜ IP ì£¼ì†Œë¥¼ ìˆ¨ê¸°ê³  ê°ì§€ë¥¼ í”¼í•˜ê¸° ìœ„í•´ íŠ¸ë˜í”½ì„ ë‹¤ë¥¸ ì„œë²„ë¥¼ í†µí•´ ë¼ìš°íŒ…í•˜ëŠ” ë° ì‚¬ìš©ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
```bash
nmap  --script socks-brute --script-args userdb=users.txt,passdb=rockyou.txt,unpwdb.timelimit=30m -p 1080 <ip>
```
# Pentesting SOCKS

## Introduction

SOCKS (Socket Secure) is a protocol that allows a client to establish a connection through a proxy server. It is commonly used for bypassing network restrictions and anonymizing internet traffic. In this section, we will explore various techniques for pentesting SOCKS servers.

## Enumeration

### Version Detection

To determine the version of the SOCKS server, we can send a `SOCKS5` handshake request and analyze the response. The server will reply with its supported version and authentication methods.

```bash
$ nc -v <target_ip> <target_port>
> 05 01 00
< 05 00
```

In the above example, the server responded with `05 00`, indicating that it supports `SOCKS5` and does not require authentication.

### User Enumeration

Some SOCKS servers may require authentication. To enumerate valid usernames, we can use a brute-force approach. By sending a `SOCKS5` handshake request with different usernames, we can analyze the server's response to determine if the username is valid.

```bash
$ nc -v <target_ip> <target_port>
> 05 01 00 02 00 00 00 00 00 00
< 05 02
```

In the above example, the server responded with `05 02`, indicating that it requires authentication. We can continue sending handshake requests with different usernames to determine valid ones.

## Exploitation

### Proxy Chaining

One technique for exploiting a SOCKS server is proxy chaining. By chaining multiple SOCKS servers together, we can create a chain of proxies that can be used for various purposes, such as bypassing network restrictions or hiding the source of an attack.

To set up proxy chaining, we need to configure each SOCKS server to forward traffic to the next server in the chain. This can be done by modifying the server's configuration file or using a tool like `proxychains`.

```bash
$ proxychains <command>
```

In the above example, `<command>` represents the command or tool that we want to run through the proxy chain.

### Traffic Analysis

Another technique for exploiting a SOCKS server is traffic analysis. By analyzing the traffic passing through the server, we can gather valuable information about the network and potentially identify vulnerabilities or sensitive data.

To perform traffic analysis, we can use tools like Wireshark to capture and analyze network packets. By filtering the captured packets based on the SOCKS server's IP address and port, we can focus on the relevant traffic.

## Conclusion

Pentesting SOCKS servers can provide valuable insights into network security and help identify potential vulnerabilities. By understanding the enumeration and exploitation techniques discussed in this section, pentesters can effectively assess the security of SOCKS servers.
```
PORT     STATE SERVICE
1080/tcp open  socks
| socks-brute:
|   Accounts
|     patrik:12345 - Valid credentials
|   Statistics
|_    Performed 1921 guesses in 6 seconds, average tps: 320
```
## í„°ë„ë§ê³¼ í¬íŠ¸ í¬ì›Œë”©

### ê¸°ë³¸ì ì¸ proxychains ì‚¬ìš©ë²•

socks í”„ë¡ì‹œë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ proxy chainsë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.
```
nano /etc/proxychains4.conf
```
ë‹¤ìŒì€ SOCKS í”„ë¡ì‹œì— ëŒ€í•œ íœí…ŒìŠ¤íŒ… ê¸°ìˆ ì— ê´€í•œ ë‚´ìš©ì…ë‹ˆë‹¤. ì•„ë˜ ë‚´ìš©ì€ /hive/hacktricks/network-services-pentesting/1080-pentesting-socks.md íŒŒì¼ì—ì„œ ê°€ì ¸ì˜¨ ê²ƒì…ë‹ˆë‹¤. ê´€ë ¨ëœ ì˜ì–´ í…ìŠ¤íŠ¸ë¥¼ í•œêµ­ì–´ë¡œ ë²ˆì—­í•˜ê³ , ë²ˆì—­ëœ ë‚´ìš©ì„ ë™ì¼í•œ ë§ˆí¬ë‹¤ìš´ ë° HTML êµ¬ë¬¸ìœ¼ë¡œ ìœ ì§€í•˜ì—¬ ë°˜í™˜í•˜ì„¸ìš”. ì½”ë“œ, í•´í‚¹ ê¸°ìˆ  ì´ë¦„, í•´í‚¹ ê´€ë ¨ ìš©ì–´, í´ë¼ìš°ë“œ/SaaS í”Œë«í¼ ì´ë¦„(ì˜ˆ: Workspace, aws, gcp...) ë° 'leak'ì´ë¼ëŠ” ë‹¨ì–´, íœí…ŒìŠ¤íŒ…, ë§ˆí¬ë‹¤ìš´ íƒœê·¸ì™€ ê°™ì€ ë‚´ìš©ì€ ë²ˆì—­í•˜ì§€ ë§ˆì„¸ìš”. ë˜í•œ ë²ˆì—­ ë° ë§ˆí¬ë‹¤ìš´ êµ¬ë¬¸ ì´ì™¸ì˜ ì¶”ê°€ ë‚´ìš©ì€ ì¶”ê°€í•˜ì§€ ë§ˆì„¸ìš”.
```
socks5 10.10.10.10 1080
```
ì¸ì¦ì´ ìˆëŠ” ê²½ìš°
```
socks5 10.10.10.10 1080 username password
```
#### ìì„¸í•œ ì •ë³´: [í„°ë„ë§ê³¼ í¬íŠ¸ í¬ì›Œë”©](../generic-methodologies-and-resources/tunneling-and-port-forwarding.md)

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong>ë¥¼ í†µí•´ AWS í•´í‚¹ì„ ì²˜ìŒë¶€í„° ì „ë¬¸ê°€ê¹Œì§€ ë°°ì›Œë³´ì„¸ìš”<strong>!</strong></summary>

HackTricksë¥¼ ì§€ì›í•˜ëŠ” ë‹¤ë¥¸ ë°©ë²•:

* **íšŒì‚¬ë¥¼ HackTricksì—ì„œ ê´‘ê³ í•˜ê±°ë‚˜ HackTricksë¥¼ PDFë¡œ ë‹¤ìš´ë¡œë“œ**í•˜ë ¤ë©´ [**êµ¬ë… ìš”ê¸ˆì œ**](https://github.com/sponsors/carlospolop)ë¥¼ í™•ì¸í•˜ì„¸ìš”!
* [**ê³µì‹ PEASS & HackTricks ìŠ¤ì›¨ê·¸**](https://peass.creator-spring.com)ë¥¼ ì–»ìœ¼ì„¸ìš”.
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ë¥¼ ë°œê²¬í•˜ì„¸ìš”. ë…ì ì ì¸ [**NFTs**](https://opensea.io/collection/the-peass-family) ì»¬ë ‰ì…˜ì…ë‹ˆë‹¤.
* ğŸ’¬ [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— **ì°¸ì—¬**í•˜ê±°ë‚˜ **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)ë¥¼ **íŒ”ë¡œìš°**í•˜ì„¸ìš”.
* **HackTricks**ì™€ **HackTricks Cloud** github ì €ì¥ì†Œì— PRì„ ì œì¶œí•˜ì—¬ ì—¬ëŸ¬ë¶„ì˜ í•´í‚¹ ê¸°êµë¥¼ ê³µìœ í•˜ì„¸ìš”.

</details>
