# 11211 - Pentesting Memcache

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ЁЯТм [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ЁЯРж [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Protocol Information

From [wikipedia](https://en.wikipedia.org/wiki/Memcached):

> **Memcached** (рдЙрдЪреНрдЪрд╛рд░рдг: рдореЗрдо-рдХреИрд╢реНрдб, рдореЗрдо-рдХреИрд╢-рдбреА) рдПрдХ рд╕рд╛рдорд╛рдиреНрдп-рдЙрджреНрджреЗрд╢реНрдп рд╡рд┐рддрд░рд┐рдд [рдореЗрдореЛрд░реА рдХреИрд╢рд┐рдВрдЧ](https://en.wikipedia.org/wiki/Memory\_caching) рдкреНрд░рдгрд╛рд▓реА рд╣реИред рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдЕрдХреНрд╕рд░ рдЧрддрд┐рд╢реАрд▓ рдбреЗрдЯрд╛рдмреЗрд╕-рдЪрд╛рд▓рд┐рдд рд╡реЗрдмрд╕рд╛рдЗрдЯреЛрдВ рдХреЛ рддреЗрдЬ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдбреЗрдЯрд╛ рдФрд░ рд╡рд╕реНрддреБрдУрдВ рдХреЛ RAM рдореЗрдВ рдХреИрд╢ рдХрд░рдХреЗ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рддрд╛рдХрд┐ рдмрд╛рд╣рд░реА рдбреЗрдЯрд╛ рд╕реНрд░реЛрдд (рдЬреИрд╕реЗ рдбреЗрдЯрд╛рдмреЗрд╕ рдпрд╛ API) рдХреЛ рдкрдврд╝рдиреЗ рдХреА рд╕рдВрдЦреНрдпрд╛ рдХреЛ рдХрдо рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХреЗред

рд╣рд╛рд▓рд╛рдВрдХрд┐ Memcached SASL рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рддрд╛ рд╣реИ, рдЕрдзрд┐рдХрд╛рдВрд╢ рдЙрджрд╛рд╣рд░рдг **рдкреНрд░рдорд╛рдгреАрдХрд░рдг рдХреЗ рдмрд┐рдирд╛ рдЙрдЬрд╛рдЧрд░** рд╣реЛрддреЗ рд╣реИрдВред

**рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдкреЛрд░реНрдЯ:** 11211
```
PORT      STATE SERVICE
11211/tcp open  unknown
```
## Enumeration

### Manual

рдПрдХ memcache рдЙрджрд╛рд╣рд░рдг рдХреЗ рдЕрдВрджрд░ рд╕рд╣реЗрдЬреЗ рдЧрдП рд╕рднреА рдЬрд╛рдирдХрд╛рд░реА рдХреЛ рдирд┐рдХрд╛рд▓рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдкрдХреЛ рдЪрд╛рд╣рд┐рдП:

1. **рд╕реНрд▓реИрдм** рдЦреЛрдЬреЗрдВ рдЬрд┐рдирдореЗрдВ **рд╕рдХреНрд░рд┐рдп рдЖрдЗрдЯрдо** рд╣реИрдВ
2. рдкрд╣рд▓реЗ рдкрд╣рдЪрд╛рдиреЗ рдЧрдП рд╕реНрд▓реИрдм рдХреЗ **рдХреА рдирд╛рдо** рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
3. **рдХреА рдирд╛рдо** рдкреНрд░рд╛рдкреНрдд рдХрд░рдХреЗ **рд╕рд╣реЗрдЬреЗ рдЧрдП рдбреЗрдЯрд╛** рдХреЛ рдирд┐рдХрд╛рд▓реЗрдВ

рдпрд╛рдж рд░рдЦреЗрдВ рдХрд┐ рдпрд╣ рд╕реЗрд╡рд╛ рдХреЗрд╡рд▓ рдПрдХ **рдХреИрд╢** рд╣реИ, рдЗрд╕рд▓рд┐рдП **рдбреЗрдЯрд╛ рдкреНрд░рдХрдЯ рдФрд░ рдЧрд╛рдпрдм рд╣реЛ рд╕рдХрддрд╛ рд╣реИ**ред
```bash
echo "version" | nc -vn -w 1 <IP> 11211      #Get version
echo "stats" | nc -vn -w 1 <IP> 11211        #Get status
echo "stats slabs" | nc -vn -w 1 <IP> 11211  #Get slabs
echo "stats items" | nc -vn -w 1 <IP> 11211  #Get items of slabs with info
echo "stats cachedump <number> 0" | nc -vn -w 1 <IP> 11211  #Get key names (the 0 is for unlimited output size)
echo "get <item_name>" | nc -vn -w 1 <IP> 11211  #Get saved info

#This php will just dump the keys, you need to use "get <item_name> later"
sudo apt-get install php-memcached
php -r '$c = new Memcached(); $c->addServer("localhost", 11211); var_dump( $c->getAllKeys() );'
```
### рдореИрдиреБрдЕрд▓2
```bash
sudo apt install libmemcached-tools
memcstat --servers=127.0.0.1 #Get stats
memcdump --servers=127.0.0.1 #Get all items
memccat  --servers=127.0.0.1 <item1> <item2> <item3> #Get info inside the item(s)
```
### рд╕реНрд╡рдЪрд╛рд▓рд┐рдд
```bash
nmap -n -sV --script memcached-info -p 11211 <IP>   #Just gather info
msf > use auxiliary/gather/memcached_extractor      #Extracts saved data
msf > use auxiliary/scanner/memcached/memcached_amp #Check is UDP DDoS amplification attack is possible
```
## **Memcache рдХреБрдВрдЬреА рдирд┐рдХрд╛рд▓рдирд╛**

Memcache рдХреЗ рдХреНрд╖реЗрддреНрд░ рдореЗрдВ, рдПрдХ рдкреНрд░реЛрдЯреЛрдХреЙрд▓ рдЬреЛ рдбреЗрдЯрд╛ рдХреЛ рд╕реНрд▓реИрдм рджреНрд╡рд╛рд░рд╛ рд╡реНрдпрд╡рд╕реНрдерд┐рдд рдХрд░рдиреЗ рдореЗрдВ рдорджрдж рдХрд░рддрд╛ рд╣реИ, рд╕рдВрдЧреНрд░рд╣реАрдд рдбреЗрдЯрд╛ рдХреА рдЬрд╛рдВрдЪ рдХреЗ рд▓рд┐рдП рд╡рд┐рд╢рд┐рд╖реНрдЯ рдХрдорд╛рдВрдб рдореМрдЬреВрдж рд╣реИрдВ, рд╣рд╛рд▓рд╛рдВрдХрд┐ рдЙрд▓реНрд▓реЗрдЦрдиреАрдп рд╕реАрдорд╛рдУрдВ рдХреЗ рд╕рд╛рде:

1. рдХреБрдВрдЬреА рдХреЗрд╡рд▓ рд╕реНрд▓реИрдм рд╡рд░реНрдЧ рджреНрд╡рд╛рд░рд╛ рдирд┐рдХрд╛рд▓реА рдЬрд╛ рд╕рдХрддреА рд╣реИрдВ, рд╕рдорд╛рди рд╕рд╛рдордЧреНрд░реА рдЖрдХрд╛рд░ рдХреЗ рдХреБрдВрдЬрд┐рдпреЛрдВ рдХреЛ рд╕рдореВрд╣рд┐рдд рдХрд░рддреЗ рд╣реБрдПред
2. рдкреНрд░рддреНрдпреЗрдХ рд╕реНрд▓реИрдм рд╡рд░реНрдЧ рдХреЗ рд▓рд┐рдП рдПрдХ рдкреГрд╖реНрда рдХреА рд╕реАрдорд╛ рд╣реИ, рдЬреЛ 1MB рдбреЗрдЯрд╛ рдХреЗ рдмрд░рд╛рдмрд░ рд╣реИред
3. рдпрд╣ рд╕реБрд╡рд┐рдзрд╛ рдЕрдиреМрдкрдЪрд╛рд░рд┐рдХ рд╣реИ рдФрд░ рдЗрд╕реЗ рдХрд┐рд╕реА рднреА рд╕рдордп рдмрдВрдж рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдЬреИрд╕рд╛ рдХрд┐ [рд╕рдореБрджрд╛рдп рдлреЛрд░рдо](https://groups.google.com/forum/?fromgroups=#!topic/memcached/1-T8I-RVGKM) рдореЗрдВ рдЪрд░реНрдЪрд╛ рдХреА рдЧрдИ рд╣реИред

рд╕рдВрднрд╛рд╡рд┐рдд рдЧреАрдЧрд╛рдмрд╛рдЗрдЯ рдбреЗрдЯрд╛ рдореЗрдВ рд╕реЗ рдХреЗрд╡рд▓ 1MB рдирд┐рдХрд╛рд▓рдиреЗ рдХреА рд╕реАрдорд╛ рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИред рд╣рд╛рд▓рд╛рдБрдХрд┐, рдпрд╣ рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдХреБрдВрдЬреА рдЙрдкрдпреЛрдЧ рдкреИрдЯрд░реНрди рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЕрдВрддрд░реНрджреГрд╖реНрдЯрд┐ рдкреНрд░рджрд╛рди рдХрд░ рд╕рдХрддреА рд╣реИ, рд╡рд┐рд╢рд┐рд╖реНрдЯ рдЖрд╡рд╢реНрдпрдХрддрд╛рдУрдВ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ред рдЬреЛ рд▓реЛрдЧ рдпрд╛рдВрддреНрд░рд┐рдХреА рдореЗрдВ рдХрдо рд░реБрдЪрд┐ рд░рдЦрддреЗ рд╣реИрдВ, рдЙрдирдХреЗ рд▓рд┐рдП [рдЙрдкрдХрд░рдг рдЕрдиреБрднрд╛рдЧ](https://lzone.de/cheat-sheet/memcached#tools) рдкрд░ рдЬрд╛рдирд╛ рд╡реНрдпрд╛рдкрдХ рдирд┐рдХрд╛рд╕реА рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧрд┐рддрд╛рдПрдБ рдкреНрд░рдХрдЯ рдХрд░рддрд╛ рд╣реИред рд╡реИрдХрд▓реНрдкрд┐рдХ рд░реВрдк рд╕реЗ, memcached рд╕реЗрдЯрдЕрдк рдХреЗ рд╕рд╛рде рд╕реАрдзреЗ рдмрд╛рддрдЪреАрдд рдХреЗ рд▓рд┐рдП рдЯреЗрд▓рдиреЗрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдиреАрдЪреЗ рд╡рд░реНрдгрд┐рдд рд╣реИред

### **рдпрд╣ рдХреИрд╕реЗ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ**

Memcache рдХреА рдореЗрдореЛрд░реА рд╕рдВрдЧрдарди рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИред "-vv" рд╡рд┐рдХрд▓реНрдк рдХреЗ рд╕рд╛рде memcache рд╢реБрд░реВ рдХрд░рдиреЗ рд╕реЗ рдпрд╣ рд╕реНрд▓реИрдм рд╡рд░реНрдЧ рдкреНрд░рдХрдЯ рд╣реЛрддреЗ рд╣реИрдВ рдЬреЛ рдпрд╣ рдЙрддреНрдкрдиреНрди рдХрд░рддрд╛ рд╣реИ, рдЬреИрд╕рд╛ рдХрд┐ рдиреАрдЪреЗ рджрд┐рдЦрд╛рдпрд╛ рдЧрдпрд╛ рд╣реИ:
```bash
$ memcached -vv
slab class   1: chunk size        96 perslab   10922
[...]
```
рд╕рднреА рд╡рд░реНрддрдорд╛рди рдореЗрдВ рдореМрдЬреВрдж рд╕реНрд▓реИрдмреНрд╕ рдХреЛ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрдорд╛рдВрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ:
```bash
stats slabs
```
рдПрдХрд▓ рдХреБрдВрдЬреА рдХреЛ memcached 1.4.13 рдореЗрдВ рдЬреЛрдбрд╝рдирд╛ рдпрд╣ рджрд░реНрд╢рд╛рддрд╛ рд╣реИ рдХрд┐ рд╕реНрд▓реИрдм рд╡рд░реНрдЧ рдХреИрд╕реЗ рднрд░реЗ рдФрд░ рдкреНрд░рдмрдВрдзрд┐рдд рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВред рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП:
```bash
set mykey 0 60 1
1
STORED
```
"stats slabs" рдХрдорд╛рдВрдб рдХреЛ рдХреБрдВрдЬреА рдЬреЛрдбрд╝рдиреЗ рдХреЗ рдмрд╛рдж рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рдиреЗ рд╕реЗ рд╕реНрд▓реИрдм рдЙрдкрдпреЛрдЧ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╡рд┐рд╕реНрддреГрдд рд╕рд╛рдВрдЦреНрдпрд┐рдХреА рдорд┐рд▓рддреА рд╣реИ:
```bash
stats slabs
[...]
```
рдпрд╣ рдЖрдЙрдЯрдкреБрдЯ рд╕рдХреНрд░рд┐рдп рд╕реНрд▓реИрдм рдкреНрд░рдХрд╛рд░, рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдЧрдП рдЪрдВрдХреНрд╕ рдФрд░ рд╕рдВрдЪрд╛рд▓рдирд╛рддреНрдордХ рд╕рд╛рдВрдЦреНрдпрд┐рдХреА рдХреЛ рдкреНрд░рдХрдЯ рдХрд░рддрд╛ рд╣реИ, рдЬреЛ рдкрдврд╝рдиреЗ рдФрд░ рд▓рд┐рдЦрдиреЗ рдХреЗ рд╕рдВрдЪрд╛рд▓рди рдХреА рджрдХреНрд╖рддрд╛ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд╛рдирдХрд╛рд░реА рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред

рдПрдХ рдФрд░ рдЙрдкрдпреЛрдЧреА рдХрдорд╛рдВрдб, "stats items", рдирд┐рд╖реНрдХрд╛рд╕рди, рдореЗрдореЛрд░реА рд╕реАрдорд╛рдУрдВ рдФрд░ рдЖрдЗрдЯрдо рдЬреАрд╡рди рдЪрдХреНрд░реЛрдВ рдкрд░ рдбреЗрдЯрд╛ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ:
```bash
stats items
[...]
```
рдпреЗ рдЖрдБрдХрдбрд╝реЗ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреИрд╢рд┐рдВрдЧ рд╡реНрдпрд╡рд╣рд╛рд░ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╢рд┐рдХреНрд╖рд┐рдд рдЕрдиреБрдорд╛рди рд▓рдЧрд╛рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреЗ рд╣реИрдВ, рдЬрд┐рд╕рдореЗрдВ рд╡рд┐рднрд┐рдиреНрди рд╕рд╛рдордЧреНрд░реА рдЖрдХрд╛рд░реЛрдВ рдХреЗ рд▓рд┐рдП рдХреИрд╢ рджрдХреНрд╖рддрд╛, рдореЗрдореЛрд░реА рдЖрд╡рдВрдЯрди, рдФрд░ рдмрдбрд╝реЗ рдСрдмреНрдЬреЗрдХреНрдЯреНрд╕ рдХреЛ рдХреИрд╢ рдХрд░рдиреЗ рдХреА рдХреНрд╖рдорддрд╛ рд╢рд╛рдорд┐рд▓ рд╣реИред

### **рдХреАрдЬрд╝ рдбрдВрдк рдХрд░рдирд╛**

рд╕рдВрд╕реНрдХрд░рдг 1.4.31 рд╕реЗ рдкрд╣рд▓реЗ, рдХреАрдЬрд╝ рдХреЛ рд╕реНрд▓реИрдм рдХреНрд▓рд╛рд╕ рджреНрд╡рд╛рд░рд╛ рдбрдВрдк рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ:
```bash
stats cachedump <slab class> <number of items to dump>
```
рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдХреНрд▓рд╛рд╕ #1 рдореЗрдВ рдПрдХ рдХреБрдВрдЬреА рдХреЛ рдбрдВрдк рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП:
```bash
stats cachedump 1 1000
ITEM mykey [1 b; 1350677968 s]
END
```
рдпрд╣ рд╡рд┐рдзрд┐ рд╕реНрд▓реИрдм рд╡рд░реНрдЧреЛрдВ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдкреБрдирд░рд╛рд╡реГрддреНрддрд┐ рдХрд░рддреА рд╣реИ, рдХреБрдВрдЬреА рдорд╛рдиреЛрдВ рдХреЛ рдирд┐рдХрд╛рд▓рддреА рд╣реИ рдФрд░ рд╡реИрдХрд▓реНрдкрд┐рдХ рд░реВрдк рд╕реЗ рдЙрдиреНрд╣реЗрдВ рдбрдВрдк рдХрд░рддреА рд╣реИред

### **MEMCACHE рдХреБрдВрдЬреА рдбрдВрдк рдХрд░рдирд╛ (рд╕рдВрд╕реНрдХрд░рдг 1.4.31+)**

memcache рд╕рдВрд╕реНрдХрд░рдг 1.4.31 рдФрд░ рдЙрд╕рд╕реЗ рдКрдкрд░ рдХреЗ рд╕рд╛рде, рдЙрддреНрдкрд╛рджрди рд╡рд╛рддрд╛рд╡рд░рдг рдореЗрдВ рдХреБрдВрдЬреА рдбрдВрдк рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдирдпрд╛, рд╕реБрд░рдХреНрд╖рд┐рдд рддрд░реАрдХрд╛ рдкреЗрд╢ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рдЬреЛ [рд░рд┐рд▓реАрдЬрд╝ рдиреЛрдЯреНрд╕](https://github.com/memcached/memcached/wiki/ReleaseNotes1431) рдореЗрдВ рд╡рд┐рд╕реНрддреГрдд рдЧреИрд░-рдмреНрд▓реЙрдХрд┐рдВрдЧ рдореЛрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИред рдпрд╣ рджреГрд╖реНрдЯрд┐рдХреЛрдг рд╡реНрдпрд╛рдкрдХ рдЖрдЙрдЯрдкреБрдЯ рдЙрддреНрдкрдиреНрди рдХрд░рддрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рджрдХреНрд╖рддрд╛ рдХреЗ рд▓рд┐рдП 'nc' рдХрдорд╛рдВрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреА рд╕рд┐рдлрд╛рд░рд┐рд╢ рдХреА рдЬрд╛рддреА рд╣реИред рдЙрджрд╛рд╣рд░рдгреЛрдВ рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реИрдВ:
```bash
echo 'lru_crawler metadump all' | nc 127.0.0.1 11211 | head -1
echo 'lru_crawler metadump all' | nc 127.0.0.1 11211 | grep ee6ba58566e234ccbbce13f9a24f9a28
```
### **DUMPING TOOLS**

Table [from here](https://lzone.de/blog).

| Programming Languages | Tools                                                                                                                              | Functionality                                                                                                                                                          |                                                                             |         |
| --------------------- | ---------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------- | ------- |
| PHP                   | [simple script](http://snipt.org/xtP)                                                                                              | рдХреБрдВрдЬреА рдирд╛рдо рдкреНрд░рд┐рдВрдЯ рдХрд░рддрд╛ рд╣реИред                                                                                                                                                      |                                                                             |         |
| Perl                  | [simple script](https://wiki.jasig.org/download/attachments/13572172/memcached-clean.pl?version=1\&modificationDate=1229693957401) | рдХреБрдВрдЬреА рдФрд░ рдорд╛рди рдкреНрд░рд┐рдВрдЯ рдХрд░рддрд╛ рд╣реИ                                                                                                                                                 |                                                                             |         |
| Ruby                  | [simple script](https://gist.github.com/1365005)                                                                                   | рдХреБрдВрдЬреА рдирд╛рдо рдкреНрд░рд┐рдВрдЯ рдХрд░рддрд╛ рд╣реИред                                                                                                                                                      |                                                                             |         |
| Perl                  | [memdump](https://search.cpan.org/\~dmaki/Memcached-libmemcached-0.4202/src/libmemcached/docs/memdump.pod)                         | CPAN рдореЙрдбреНрдпреВрд▓ рдореЗрдВ рдЙрдкрдХрд░рдг                                                                                                                                                    | [Memcached-libmemcached](https://search.cpan.org/\~dmaki/Memcached-libmemc) | ached/) |
| PHP                   | [memcache.php](http://livebookmark.net/journal/2008/05/21/memcachephp-stats-like-apcphp/)                                          | Memcache рдореЙрдирд┐рдЯрд░рд┐рдВрдЧ GUI рдЬреЛ рдХреБрдВрдЬреА рдХреЛ рдбрдВрдк рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рднреА рджреЗрддрд╛ рд╣реИ                                                                                                                  |                                                                             |         |
| libmemcached          | [peep](http://blog.evanweaver.com/2009/04/20/peeping-into-memcached/)                                                              | **рдЖрдкрдХреЗ memcached рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ рдлреНрд░реАрдЬ рдХрд░ рджреЗрддрд╛ рд╣реИ!!!** рдЙрддреНрдкрд╛рджрди рдореЗрдВ рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╕рдордп рд╕рд╛рд╡рдзрд╛рди рд░рд╣реЗрдВред рдлрд┐рд░ рднреА рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реБрдП рдЖрдк 1MB рд╕реАрдорд╛ рдХреЛ рдмрд╛рдпрдкрд╛рд╕ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ **рд╕рднреА** рдХреБрдВрдЬреА рдХреЛ рдбрдВрдк рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред |                                                                             |         |

## Troubleshooting <a href="#troubleshooting" id="troubleshooting"></a>

### 1MB Data Limit <a href="#1mb-data-limit" id="1mb-data-limit"></a>

рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ memcached 1.4 рд╕реЗ рдкрд╣рд▓реЗ рдЖрдк 1MB рд╕реЗ рдмрдбрд╝реЗ рдСрдмреНрдЬреЗрдХреНрдЯреНрд╕ рдХреЛ рд╕реНрдЯреЛрд░ рдирд╣реАрдВ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдХреНрдпреЛрдВрдХрд┐ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдЕрдзрд┐рдХрддрдо рд╕реНрд▓реИрдм рдЖрдХрд╛рд░ рд╣реИред

### Never Set a Timeout > 30 Days! <a href="#never-set-a-timeout--30-days" id="never-set-a-timeout--30-days"></a>

рдпрджрд┐ рдЖрдк рдПрдХ рдХреБрдВрдЬреА рдХреЛ рдПрдХ рдЯрд╛рдЗрдордЖрдЙрдЯ рдХреЗ рд╕рд╛рде тАЬрд╕реЗрдЯтАЭ рдпрд╛ тАЬрдРрдбтАЭ рдХрд░рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░рддреЗ рд╣реИрдВ рдЬреЛ рдЕрдзрд┐рдХрддрдо рдЕрдиреБрдордд рд╕реЗ рдмрдбрд╝рд╛ рд╣реИ, рддреЛ рдЖрдкрдХреЛ рд╡рд╣ рдирд╣реАрдВ рдорд┐рд▓ рд╕рдХрддрд╛ рд╣реИ рдЬрд┐рд╕рдХреА рдЖрдк рдЕрдкреЗрдХреНрд╖рд╛ рдХрд░рддреЗ рд╣реИрдВ рдХреНрдпреЛрдВрдХрд┐ memcached рддрдм рдорд╛рди рдХреЛ рдПрдХ рдпреВрдирд┐рдХреНрд╕ рдЯрд╛рдЗрдорд╕реНрдЯреИрдореНрдк рдХреЗ рд░реВрдк рдореЗрдВ рдорд╛рдирддрд╛ рд╣реИред рдпрджрд┐ рдЯрд╛рдЗрдорд╕реНрдЯреИрдореНрдк рдЕрддреАрдд рдореЗрдВ рд╣реИ рддреЛ рдпрд╣ рдмрд┐рд▓реНрдХреБрд▓ рдХреБрдЫ рдирд╣реАрдВ рдХрд░реЗрдЧрд╛ред рдЖрдкрдХрд╛ рдХрдорд╛рдВрдб рдЪреБрдкрдЪрд╛рдк рд╡рд┐рдлрд▓ рд╣реЛ рдЬрд╛рдПрдЧрд╛ред

рддреЛ рдпрджрд┐ рдЖрдк рдЕрдзрд┐рдХрддрдо рдЬреАрд╡рдирдХрд╛рд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рддреЛ 2592000 рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░реЗрдВред рдЙрджрд╛рд╣рд░рдг:
```
set my_key 0 2592000 1
1
```
### Disappearing Keys on Overflow <a href="#disappearing-keys-on-overflow" id="disappearing-keys-on-overflow"></a>

рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рдореЗрдВ рдХрд╣рд╛ рдЧрдпрд╛ рд╣реИ рдХрд┐ 64bit рдХреЗ рдУрд╡рд░рдлреНрд▓реЛ рд╣реЛрдиреЗ рдкрд░ тАЬincrтАЭ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рд╕реЗ рдорд╛рди рдЧрд╛рдпрдм рд╣реЛ рдЬрд╛рддрд╛ рд╣реИред рдЗрд╕реЗ рдлрд┐рд░ рд╕реЗ тАЬaddтАЭ/тАЭsetтАЭ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдмрдирд╛рдирд╛ рд╣реЛрдЧрд╛ред

### Replication <a href="#replication" id="replication"></a>

memcached рд╕реНрд╡рдпрдВ рдкреНрд░рддрд┐рдХреГрддрд┐ рдХрд╛ рд╕рдорд░реНрдерди рдирд╣реАрдВ рдХрд░рддрд╛ред рдпрджрд┐ рдЖрдкрдХреЛ рдЗрд╕рдХреА рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рддреЛ рдЖрдкрдХреЛ 3rd рдкрд╛рд░реНрдЯреА рд╕рдорд╛рдзрд╛рдиреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рд╣реЛрдЧрд╛:

* [repcached](http://repcached.lab.klab.org/): рдорд▓реНрдЯреА-рдорд╛рд╕реНрдЯрд░ рдЕрд╕рд┐рдВрдХреНрд░реЛрдирд╕ рдкреНрд░рддрд┐рдХреГрддрд┐ (memcached 1.2 рдкреИрдЪ рд╕реЗрдЯ)
* [Couchbase memcached interface](http://www.couchbase.com/memcached): CouchBase рдХрд╛ рдЙрдкрдпреЛрдЧ memcached рдбреНрд░реЙрдк-рдЗрди рдХреЗ рд░реВрдк рдореЗрдВ рдХрд░реЗрдВ
* [yrmcds](https://cybozu.github.io/yrmcds/): memcached рд╕рдВрдЧрдд рдорд╛рд╕реНрдЯрд░-рдЧреБрд▓рд╛рдо рдХреБрдВрдЬреА рдорд╛рди рднрдВрдбрд╛рд░
* [twemproxy](https://github.com/twitter/twemproxy) (рдЬрд┐рд╕реЗ рдирдЯрдХреНрд░реИрдХрд░ рднреА рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИ): memcached рд╕рдорд░реНрдерди рдХреЗ рд╕рд╛рде рдкреНрд░реЙрдХреНрд╕реА

### Commands Cheat-Sheet

{% content-ref url="memcache-commands.md" %}
[memcache-commands.md](memcache-commands.md)
{% endcontent-ref %}

### **Shodan**

* `port:11211 "STAT pid"`
* `"STAT pid"`

## References

* [https://lzone.de/cheat-sheet/memcached](https://lzone.de/cheat-sheet/memcached)

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ЁЯТм [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ЁЯРж [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
