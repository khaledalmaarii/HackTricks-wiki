# Memcache Komande

<details>

<summary><strong>NauÄite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Drugi naÄini podrÅ¡ke HackTricks-u:

* Ako Å¾elite da vidite **vaÅ¡u kompaniju reklamiranu na HackTricks-u** ili **preuzmete HackTricks u PDF formatu** proverite [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Nabavite [**zvaniÄni PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Otkrijte [**The PEASS Family**](https://opensea.io/collection/the-peass-family), naÅ¡u kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* **PridruÅ¾ite se** ğŸ’¬ [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili nas **pratite** na **Twitter-u** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Podelite svoje hakovanje trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>

## Cheat-Sheet Komande

**Sa** [**https://lzone.de/cheat-sheet/memcached**](https://lzone.de/cheat-sheet/memcached)

PodrÅ¾ane komande (zvaniÄne i neke nezvaniÄne) su dokumentovane u [doc/protocol.txt](https://github.com/memcached/memcached/blob/master/doc/protocol.txt) dokumentu.

NaÅ¾alost, opis sintakse nije baÅ¡ jasan i jednostavna pomoÄ‡na komanda koja bi prikazala postojeÄ‡e komande bila bi mnogo bolja. Evo pregleda komandi koje moÅ¾ete pronaÄ‡i u [izvoru](https://github.com/memcached/memcached) (kao od 19.08.2016):

| Komanda               | Opis                                                           | Primer                                                                                                                                                                                                                                     |
| --------------------- | --------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| get                   | ÄŒita vrednost                                                  | `get mojkljuc`                                                                                                                                                                                                                              |
| set                   | Postavlja kljuÄ bezuslovno                                     | <p><code>set mojkljuc &#x3C;flags> &#x3C;ttl> &#x3C;size></code><br><br>&#x3C;p>Obavezno koristite \r\n kao prelome linija prilikom koriÅ¡Ä‡enja Unix CLI alata. Na primer&#x3C;/p> <code>printf "set mojkljuc 0 60 4\r\ndata\r\n" | nc localhost 11211</code></p> |
| add                   | Dodaje novi kljuÄ                                              | `add novikljuc 0 60 5`                                                                                                                                                                                                                      |
| replace               | PrepiÅ¡e postojeÄ‡i kljuÄ                                        | `replace kljuc 0 60 5`                                                                                                                                                                                                                      |
| append                | Dodaje podatke postojeÄ‡em kljuÄu                               | `append kljuc 0 60 15`                                                                                                                                                                                                                      |
| prepend               | Dodaje podatke na poÄetak postojeÄ‡eg kljuÄa                     | `prepend kljuc 0 60 15`                                                                                                                                                                                                                     |
| incr                  | PoveÄ‡ava numeriÄku vrednost kljuÄa za odreÄ‘eni broj             | `incr mojkljuc 2`                                                                                                                                                                                                                           |
| decr                  | Smanjuje numeriÄku vrednost kljuÄa za odreÄ‘eni broj             | `decr mojkljuc 5`                                                                                                                                                                                                                           |
| delete                | BriÅ¡e postojeÄ‡i kljuÄ                                          | `delete mojkljuc`                                                                                                                                                                                                                           |
| flush\_all            | Odmah poniÅ¡tava sve stavke                                      | `flush_all`                                                                                                                                                                                                                                 |
| flush\_all            | PoniÅ¡tava sve stavke za n sekundi                               | `flush_all 900`                                                                                                                                                                                                                             |
| stats                 | Prikazuje opÅ¡te statistike                                     | `stats`                                                                                                                                                                                                                                     |
|                       | Prikazuje statistike memorije                                  | `stats slabs`                                                                                                                                                                                                                               |
|                       | Prikazuje statistike viÅ¡eg nivoa alokacije                     | `stats malloc`                                                                                                                                                                                                                              |
|                       | Prikazuje informacije o stavkama                               | `stats items`                                                                                                                                                                                                                               |
|                       |                                                                 | `stats detail`                                                                                                                                                                                                                              |
|                       |                                                                 | `stats sizes`                                                                                                                                                                                                                               |
|                       | Resetuje brojaÄe statistike                                    | `stats reset`                                                                                                                                                                                                                               |
| lru\_crawler metadump | Dumpuje (veÄ‡inu) metapodataka za (sve) stavke u keÅ¡u            | `lru_crawler metadump all`                                                                                                                                                                                                                  |
| version               | Prikazuje verziju servera                                       | `version`                                                                                                                                                                                                                                   |
| verbosity             | PoveÄ‡ava nivo logovanja                                         | `verbosity`                                                                                                                                                                                                                                 |
| quit                  | ZavrÅ¡ava sesiju                                                | `quit`                                                                                                                                                                                                                                      |

#### Statistike o saobraÄ‡aju <a href="#traffic-statistics" id="traffic-statistics"></a>

MoÅ¾ete dobiti trenutne statistike o saobraÄ‡aju koriÅ¡Ä‡enjem komande
```
stats
```
DobiÄ‡ete popis koji prikazuje broj veza, bajtova ulazno/izlazno i mnogo viÅ¡e.

Primer izlaza:
```
STAT pid 14868
STAT uptime 175931
STAT time 1220540125
STAT version 1.2.2
STAT pointer_size 32
STAT rusage_user 620.299700
STAT rusage_system 1545.703017
STAT curr_items 228
STAT total_items 779
STAT bytes 15525
STAT curr_connections 92
STAT total_connections 1740
STAT connection_structures 165
STAT cmd_get 7411
STAT cmd_set 28445156
STAT get_hits 5183
STAT get_misses 2228
STAT evictions 0
STAT bytes_read 2112768087
STAT bytes_written 1000038245
STAT limit_maxbytes 52428800
STAT threads 1
END
```
#### Statistika memorije <a href="#statistika-memorije" id="statistika-memorije"></a>

MoÅ¾ete dobiti trenutnu statistiku memorije koriÅ¡Ä‡enjem komande
```
stats slabs
```
# Memcache Commands

Memcache je popularna open-source memorija u keÅ¡u koja se Äesto koristi za ubrzavanje performansi web aplikacija. Ovde su neke od najÄeÅ¡Ä‡e koriÅ¡Ä‡enih komandi za rad sa Memcache-om.

## SET

Komanda SET se koristi za postavljanje vrednosti kljuÄa u Memcache. Ova komanda ima sledeÄ‡i format:

```
SET <kljuÄ> <vrednost> <vreme_isteka> <veliÄina>
```

- `<kljuÄ>`: KljuÄ pod kojim Ä‡e se Äuvati vrednost.
- `<vrednost>`: Vrednost koja Ä‡e biti saÄuvana.
- `<vreme_isteka>`: Vreme u sekundama nakon kojeg Ä‡e vrednost isteÄ‡i. Ako Å¾elite da vrednost bude trajna, moÅ¾ete postaviti ovu vrednost na 0.
- `<veliÄina>`: VeliÄina vrednosti u bajtovima.

## GET

Komanda GET se koristi za dobijanje vrednosti kljuÄa iz Memcache-a. Ova komanda ima sledeÄ‡i format:

```
GET <kljuÄ>
```

- `<kljuÄ>`: KljuÄ Äija se vrednost Å¾eli dobiti.

## DELETE

Komanda DELETE se koristi za brisanje kljuÄa iz Memcache-a. Ova komanda ima sledeÄ‡i format:

```
DELETE <kljuÄ>
```

- `<kljuÄ>`: KljuÄ koji Å¾elite da obriÅ¡ete.

## INCREMENT

Komanda INCREMENT se koristi za poveÄ‡anje vrednosti kljuÄa za odreÄ‘eni broj. Ova komanda ima sledeÄ‡i format:

```
INCREMENT <kljuÄ> <broj>
```

- `<kljuÄ>`: KljuÄ Äiju vrednost Å¾elite da poveÄ‡ate.
- `<broj>`: Broj za koji Å¾elite da poveÄ‡ate vrednost kljuÄa.

## DECREMENT

Komanda DECREMENT se koristi za smanjenje vrednosti kljuÄa za odreÄ‘eni broj. Ova komanda ima sledeÄ‡i format:

```
DECREMENT <kljuÄ> <broj>
```

- `<kljuÄ>`: KljuÄ Äiju vrednost Å¾elite da smanjite.
- `<broj>`: Broj za koji Å¾elite da smanjite vrednost kljuÄa.

## FLUSH_ALL

Komanda FLUSH_ALL se koristi za brisanje svih kljuÄeva iz Memcache-a. Ova komanda nema dodatne parametre.

## STATS

Komanda STATS se koristi za dobijanje statistiÄkih informacija o Memcache-u. Ova komanda nema dodatne parametre.

## VERSION

Komanda VERSION se koristi za dobijanje verzije Memcache servera. Ova komanda nema dodatne parametre.
```
STAT 1:chunk_size 80
STAT 1:chunks_per_page 13107
STAT 1:total_pages 1
STAT 1:total_chunks 13107
STAT 1:used_chunks 13106
STAT 1:free_chunks 1
STAT 1:free_chunks_end 12886
STAT 2:chunk_size 100
STAT 2:chunks_per_page 10485
STAT 2:total_pages 1
STAT 2:total_chunks 10485
STAT 2:used_chunks 10484
STAT 2:free_chunks 1
STAT 2:free_chunks_end 10477
[...]
STAT active_slabs 3
STAT total_malloced 3145436
END
```
Ako niste sigurni da li imate dovoljno memorije za vaÅ¡u memcached instancu, uvek obratite paÅ¾nju na brojaÄe "evictions" koje daje komanda "stats". Ako imate dovoljno memorije za instancu, brojaÄ "evictions" treba da bude 0 ili barem da se ne poveÄ‡ava.

#### Koji kljuÄevi se koriste? <a href="#which-keys-are-used" id="which-keys-are-used"></a>

Ne postoji ugraÄ‘ena funkcija koja direktno odreÄ‘uje trenutni skup kljuÄeva. MeÄ‘utim, moÅ¾ete koristiti
```
stats items
```
Komanda za odreÄ‘ivanje koliko kljuÄeva postoji.

```bash
stats items
```

Ova komanda Ä‡e prikazati statistiku o svim trenutno dostupnim kljuÄevima u memcache bazi podataka.
```
stats items
STAT items:1:number 220
STAT items:1:age 83095
STAT items:2:number 7
STAT items:2:age 1405
[...]
END
```
Ovo barem pomaÅ¾e da se vidi da li se koriste neki kljuÄevi. Da biste izlistali imena kljuÄeva iz PHP skripte koja veÄ‡ pristupa memcache-u, moÅ¾ete koristiti PHP kod sa [100days.de](http://100days.de/serendipity/archives/55-Dumping-MemcacheD-Content-Keys-with-PHP.html).

<details>

<summary><strong>NauÄite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Drugi naÄini podrÅ¡ke HackTricks-u:

* Ako Å¾elite da vidite **oglaÅ¡avanje vaÅ¡e kompanije u HackTricks-u** ili **preuzmete HackTricks u PDF formatu**, pogledajte [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Nabavite [**zvaniÄni PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Otkrijte [**The PEASS Family**](https://opensea.io/collection/the-peass-family), naÅ¡u kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* **PridruÅ¾ite se** ğŸ’¬ [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili nas **pratite** na **Twitter-u** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Podelite svoje hakovanje trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>
