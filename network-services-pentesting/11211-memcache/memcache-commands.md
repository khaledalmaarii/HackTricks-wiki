# Memcache Commands

## Memcache KomutlarÄ±

<details>

<summary><strong>AWS hacklemeyi sÄ±fÄ±rdan kahraman olmak iÃ§in</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ±)</strong></a><strong>!</strong></summary>

HackTricks'Ä± desteklemenin diÄŸer yollarÄ±:

* Åirketinizi HackTricks'te **reklamÄ±nÄ±zÄ± gÃ¶rmek** veya **HackTricks'i PDF olarak indirmek** iÃ§in [**ABONELÄ°K PLANLARI**](https://github.com/sponsors/carlospolop)'na gÃ¶z atÄ±n!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* Ã–zel [**NFT'lerden**](https://opensea.io/collection/the-peass-family) oluÅŸan koleksiyonumuz olan [**The PEASS Ailesi'ni**](https://opensea.io/collection/the-peass-family) keÅŸfedin
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katÄ±lÄ±n** veya **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks\_live)'u **takip edin**.
* **Hacking hilelerinizi** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna **PR gÃ¶ndererek** paylaÅŸÄ±n.

</details>

### Komutlar Hile KaÄŸÄ±dÄ±

**Kaynak** [**https://lzone.de/cheat-sheet/memcached**](https://lzone.de/cheat-sheet/memcached)

Desteklenen komutlar (resmi olanlar ve bazÄ± resmi olmayanlar), [doc/protocol.txt](https://github.com/memcached/memcached/blob/master/doc/protocol.txt) belgesinde belgelenmiÅŸtir.

Ne yazÄ±k ki, sÃ¶zdizimi aÃ§Ä±klamasÄ± gerÃ§ekten net deÄŸil ve mevcut komutlarÄ± listeleyen basit bir yardÄ±m komutu Ã§ok daha iyi olurdu. Ä°ÅŸte [kaynakta](https://github.com/memcached/memcached) bulabileceÄŸiniz komutlarÄ±n bir genel bakÄ±ÅŸÄ± (19.08.2016 tarihine kadar):

| Komut                 | AÃ§Ä±klama                                                 | Ã–rnek                                                                                                                                                                                                                                            |
| --------------------- | -------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| get                   | Bir deÄŸeri okur                                          | `get mykey`                                                                                                                                                                                                                                      |
| set                   | Bir anahtarÄ±n deÄŸerini koÅŸulsuz olarak ayarlar           | <p><code>set mykey &#x3C;flags> &#x3C;ttl> &#x3C;size></code><br><br>&#x3C;p>Unix CLI araÃ§larÄ±nÄ± kullanÄ±rken \r\n olarak satÄ±r sonu karakterlerini kullanmayÄ± unutmayÄ±n. Ã–rneÄŸin&#x3C;/p> <code>printf "set mykey 0 60 4\r\ndata\r\n"</code></p> |
| add                   | Yeni bir anahtar ekler                                   | `add newkey 0 60 5`                                                                                                                                                                                                                              |
| replace               | Mevcut bir anahtarÄ±n Ã¼zerine yazar                       | `replace key 0 60 5`                                                                                                                                                                                                                             |
| append                | Mevcut bir anahtara veri ekler                           | `append key 0 60 15`                                                                                                                                                                                                                             |
| prepend               | Mevcut bir anahtara veri baÅŸÄ±na ekler                    | `prepend key 0 60 15`                                                                                                                                                                                                                            |
| incr                  | SayÄ±sal anahtar deÄŸerini belirtilen sayÄ±yla artÄ±rÄ±r      | `incr mykey 2`                                                                                                                                                                                                                                   |
| decr                  | SayÄ±sal anahtar deÄŸerini belirtilen sayÄ±yla azaltÄ±r      | `decr mykey 5`                                                                                                                                                                                                                                   |
| delete                | Mevcut bir anahtarÄ± siler                                | `delete mykey`                                                                                                                                                                                                                                   |
| flush\_all            | TÃ¼m Ã¶ÄŸeleri hemen geÃ§ersiz kÄ±lar                         | `flush_all`                                                                                                                                                                                                                                      |
| flush\_all            | TÃ¼m Ã¶ÄŸeleri n saniye iÃ§inde geÃ§ersiz kÄ±lar               | `flush_all 900`                                                                                                                                                                                                                                  |
| stats                 | Genel istatistikleri yazdÄ±rÄ±r                            | `stats`                                                                                                                                                                                                                                          |
|                       | Bellek istatistiklerini yazdÄ±rÄ±r                         | `stats slabs`                                                                                                                                                                                                                                    |
|                       | Daha yÃ¼ksek seviye tahsis istatistiklerini yazdÄ±rÄ±r      | `stats malloc`                                                                                                                                                                                                                                   |
|                       | Ã–ÄŸeler hakkÄ±nda bilgi yazdÄ±rÄ±r                           | `stats items`                                                                                                                                                                                                                                    |
|                       |                                                          | `stats detail`                                                                                                                                                                                                                                   |
|                       |                                                          | `stats sizes`                                                                                                                                                                                                                                    |
|                       | Ä°statistik sayaÃ§larÄ±nÄ± sÄ±fÄ±rlar                          | `stats reset`                                                                                                                                                                                                                                    |
| lru\_crawler metadump | Ã–nbellekteki (tÃ¼m) Ã¶ÄŸelerin (Ã§oÄŸu) meta verilerini dÃ¶ker | `lru_crawler metadump all`                                                                                                                                                                                                                       |
| version               | Sunucu sÃ¼rÃ¼mÃ¼nÃ¼ yazdÄ±rÄ±r                                 | `version`                                                                                                                                                                                                                                        |
| verbosity             | GÃ¼nlÃ¼k seviyesini artÄ±rÄ±r                                | `verbosity`                                                                                                                                                                                                                                      |
| quit                  | Oturumu sonlandÄ±rÄ±r                                      | `quit`                                                                                                                                                                                                                                           |

**Trafik Ä°statistikleri**

Mevcut trafik istatistiklerini sorgulayabilirsiniz.

```
stats
```

AÅŸaÄŸÄ±daki Ã¶rnek Ã§Ä±ktÄ±da, baÄŸlantÄ± sayÄ±sÄ±, gelen/giden bayt miktarÄ± ve daha fazlasÄ± yer almaktadÄ±r.

Ã–rnek Ã‡Ä±ktÄ±:

```
STAT pid 14868
STAT uptime 175931
STAT time 1220540125
STAT version 1.2.2
STAT pointer_size 32
STAT rusage_user 620.299700
STAT rusage_system 1545.703017
STAT curr_items 228
STAT total_items 779
STAT bytes 15525
STAT curr_connections 92
STAT total_connections 1740
STAT connection_structures 165
STAT cmd_get 7411
STAT cmd_set 28445156
STAT get_hits 5183
STAT get_misses 2228
STAT evictions 0
STAT bytes_read 2112768087
STAT bytes_written 1000038245
STAT limit_maxbytes 52428800
STAT threads 1
END
```

**Bellek Ä°statistikleri**

Mevcut bellek istatistiklerini sorgulayabilirsiniz.

```
stats slabs
```

## Memcache Commands

Memcache is an in-memory key-value store that is commonly used for caching data in web applications. It is a popular choice for improving performance and reducing database load.

### Basic Commands

#### SET

**Description:** Sets a key-value pair in the cache.

**Syntax:** `set <key> <flags> <exptime> <bytes> [noreply]`

**Example:** `set mykey 0 3600 5\r\nhello\r`

#### GET

**Description:** Retrieves the value associated with a key from the cache.

**Syntax:** `get <key>`

**Example:** `get mykey`

#### DELETE

**Description:** Deletes a key-value pair from the cache.

**Syntax:** `delete <key> [noreply]`

**Example:** `delete mykey`

### Advanced Commands

#### INCR

**Description:** Increments the value of a key by a specified amount.

**Syntax:** `incr <key> <value>`

**Example:** `incr mykey 10`

#### DECR

**Description:** Decrements the value of a key by a specified amount.

**Syntax:** `decr <key> <value>`

**Example:** `decr mykey 5`

#### APPEND

**Description:** Appends data to the value of a key.

**Syntax:** `append <key> <bytes> [noreply]`

**Example:** `append mykey 5\r\nworld\r`

#### PREPEND

**Description:** Prepends data to the value of a key.

**Syntax:** `prepend <key> <bytes> [noreply]`

**Example:** `prepend mykey 5\r\nhello\r`

#### CAS

**Description:** Compares and swaps the value of a key.

**Syntax:** `cas <key> <flags> <exptime> <bytes> <cas_unique> [noreply]`

**Example:** `cas mykey 0 3600 5 12345\r\nhello\r`

### Conclusion

These are some of the basic and advanced commands that can be used with Memcache. Understanding and utilizing these commands can greatly enhance your ability to work with Memcache and optimize the performance of your web applications.

```
STAT 1:chunk_size 80
STAT 1:chunks_per_page 13107
STAT 1:total_pages 1
STAT 1:total_chunks 13107
STAT 1:used_chunks 13106
STAT 1:free_chunks 1
STAT 1:free_chunks_end 12886
STAT 2:chunk_size 100
STAT 2:chunks_per_page 10485
STAT 2:total_pages 1
STAT 2:total_chunks 10485
STAT 2:used_chunks 10484
STAT 2:free_chunks 1
STAT 2:free_chunks_end 10477
[...]
STAT active_slabs 3
STAT total_malloced 3145436
END
```

EÄŸer memcached Ã¶rneÄŸiniz iÃ§in yeterli belleÄŸe sahip olup olmadÄ±ÄŸÄ±nÄ±zdan emin deÄŸilseniz, "stats" komutu tarafÄ±ndan verilen "evictions" sayacÄ±na dikkat edin. EÄŸer Ã¶rnek iÃ§in yeterli belleÄŸiniz varsa, "evictions" sayacÄ± 0 veya en azÄ±ndan artmÄ±yor olmalÄ±dÄ±r.

**Hangi Anahtarlar KullanÄ±lÄ±yor?**

Mevcut anahtar kÃ¼mesini doÄŸrudan belirlemek iÃ§in yerleÅŸik bir iÅŸlev yoktur. Bununla birlikte, aÅŸaÄŸÄ±daki komutlarÄ± kullanarak anahtarlarÄ± belirleyebilirsiniz:

```
stats items
```

#### Command to Determine How Many Keys Exist

To determine the number of keys that exist in a Memcache server, you can use the `stats` command. This command provides statistics about the server, including the total number of keys stored.

```bash
$ echo "stats items" | nc <memcache_server_ip> <memcache_server_port>
```

Replace `<memcache_server_ip>` with the IP address of the Memcache server and `<memcache_server_port>` with the corresponding port number.

The output will include a line starting with `STAT items:`, followed by the total number of items/keys stored in the Memcache server.

```
stats items
STAT items:1:number 220
STAT items:1:age 83095
STAT items:2:number 7
STAT items:2:age 1405
[...]
END
```

Bu en azÄ±ndan hangi anahtarlarÄ±n kullanÄ±ldÄ±ÄŸÄ±nÄ± gÃ¶rmeye yardÄ±mcÄ± olur. Memcache eriÅŸimini zaten yapan bir PHP betiÄŸinden anahtar adlarÄ±nÄ± dÃ¶kmek iÃ§in [100days.de](http://100days.de/serendipity/archives/55-Dumping-MemcacheD-Content-Keys-with-PHP.html) adresindeki PHP kodunu kullanabilirsiniz.

<details>

<summary><strong>AWS hacklemeyi sÄ±fÄ±rdan kahraman olmak iÃ§in Ã¶ÄŸrenin</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

HackTricks'i desteklemenin diÄŸer yollarÄ±:

* Åirketinizi HackTricks'te **reklamÄ±nÄ±zÄ± gÃ¶rmek** veya HackTricks'i **PDF olarak indirmek** iÃ§in [**ABONELÄ°K PLANLARI**](https://github.com/sponsors/carlospolop)'na gÃ¶z atÄ±n!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* Ã–zel [**NFT'lerden**](https://opensea.io/collection/the-peass-family) oluÅŸan koleksiyonumuz [**The PEASS Family**](https://opensea.io/collection/the-peass-family)'i keÅŸfedin
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katÄ±lÄ±n** veya **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks\_live)'u **takip edin**.
* **Hacking hilelerinizi** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarÄ±na **PR gÃ¶ndererek paylaÅŸÄ±n**.

</details>
