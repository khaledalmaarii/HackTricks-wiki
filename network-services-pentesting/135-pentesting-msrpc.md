# 135, 593 - MSRPC Pentesting

<details>

<summary><strong>AWS hacklemeyi sÄ±fÄ±rdan kahraman olmak iÃ§in</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ±)</strong></a><strong>Ã¶ÄŸrenin!</strong></summary>

HackTricks'Ä± desteklemenin diÄŸer yollarÄ±:

* **Åirketinizi HackTricks'te reklamÄ±nÄ± gÃ¶rmek** veya **HackTricks'i PDF olarak indirmek** iÃ§in [**ABONELÄ°K PLANLARI'na**](https://github.com/sponsors/carlospolop) gÃ¶z atÄ±n!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* [**The PEASS Ailesi'ni**](https://opensea.io/collection/the-peass-family) keÅŸfedin, Ã¶zel [**NFT'lerimiz**](https://opensea.io/collection/the-peass-family) koleksiyonumuz
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katÄ±lÄ±n** veya **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)**'u takip edin**.
* **Hacking hilelerinizi** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna **PR gÃ¶ndererek paylaÅŸÄ±n**.

</details>

<figure><img src="../../.gitbook/assets/image (1) (3) (1).png" alt=""><figcaption></figcaption></figure>

Deneyimli hackerlar ve Ã¶dÃ¼l avcÄ±larÄ±yla iletiÅŸim kurmak iÃ§in [**HackenProof Discord**](https://discord.com/invite/N3FrSbmwdy) sunucusuna katÄ±lÄ±n!

**Hacking Ä°Ã§gÃ¶rÃ¼leri**\
Hacking'in heyecanÄ±na ve zorluklarÄ±na dalmÄ±ÅŸ iÃ§eriklerle etkileÅŸim kurun

**GerÃ§ek ZamanlÄ± Hack Haberleri**\
HÄ±zlÄ± tempolu hacking dÃ¼nyasÄ±nÄ± gerÃ§ek zamanlÄ± haberler ve iÃ§gÃ¶rÃ¼lerle takip edin

**En Son Duyurular**\
Yeni Ã¶dÃ¼l avlarÄ± baÅŸlatma ve Ã¶nemli platform gÃ¼ncellemeleri hakkÄ±nda bilgilendirme alÄ±n

**Bize katÄ±lÄ±n** [**Discord**](https://discord.com/invite/N3FrSbmwdy) ve bugÃ¼n en iyi hackerlarla iÅŸbirliÄŸi yapmaya baÅŸlayÄ±n!

## Temel Bilgiler

Microsoft Remote Procedure Call (MSRPC) protokolÃ¼, bir programÄ±n aÄŸÄ±n ayrÄ±ntÄ±larÄ±nÄ± anlamadan baÅŸka bir bilgisayarda bulunan bir programdan hizmet istemesini saÄŸlayan istemci-sunucu modelidir. Ä°lk olarak aÃ§Ä±k kaynaklÄ± yazÄ±lÄ±mdan tÃ¼retilen ve daha sonra Microsoft tarafÄ±ndan geliÅŸtirilen ve telif hakkÄ± alÄ±nan bir protokoldÃ¼r.

RPC uÃ§ nokta eÅŸlemesi, TCP ve UDP portu 135 Ã¼zerinden, TCP 139 ve 445'te SMB (boÅŸ veya kimlik doÄŸrulamalÄ± oturumla) ve TCP portu 593'te bir web servisi olarak eriÅŸilebilir.
```
135/tcp   open     msrpc         Microsoft Windows RPC
```
## MSRPC nasÄ±l Ã§alÄ±ÅŸÄ±r?

MÃ¼ÅŸteri uygulamasÄ± tarafÄ±ndan baÅŸlatÄ±lan MSRPC sÃ¼reci, yerel bir yama prosedÃ¼rÃ¼nÃ¼ Ã§aÄŸÄ±rmayÄ± iÃ§erir. Bu prosedÃ¼r daha sonra isteÄŸi sunucuya iletmek iÃ§in istemci Ã§alÄ±ÅŸma zamanÄ± kitaplÄ±ÄŸÄ±yla etkileÅŸime geÃ§er. Bu, parametreleri standart bir AÄŸ Veri Temsili formatÄ±na dÃ¶nÃ¼ÅŸtÃ¼rmeyi iÃ§erir. TaÅŸÄ±ma protokolÃ¼ seÃ§imi, sunucu uzaktaysa Ã§alÄ±ÅŸma zamanÄ± kitaplÄ±ÄŸÄ± tarafÄ±ndan belirlenir ve RPC'nin aÄŸ yÄ±ÄŸÄ±nÄ± Ã¼zerinden iletilmesini saÄŸlar.

![https://0xffsec.com/handbook/images/msrpc.png](https://0xffsec.com/handbook/images/msrpc.png)

## **AÃ§Ä±ÄŸa Ã‡Ä±karÄ±lmÄ±ÅŸ RPC Hizmetlerini TanÄ±mlama**

RPC yer bulucu hizmetini ve bireysel uÃ§ noktalarÄ± sorgulayarak TCP, UDP, HTTP ve SMB Ã¼zerindeki RPC hizmetlerinin aÃ§Ä±ÄŸa Ã§Ä±karÄ±lmasÄ± belirlenebilir. rpcdump gibi araÃ§lar, **IFID** deÄŸerleriyle belirtilen benzersiz RPC hizmetlerinin tanÄ±mlanmasÄ±nÄ± kolaylaÅŸtÄ±rÄ±r ve hizmet ayrÄ±ntÄ±larÄ±nÄ± ve iletiÅŸim baÄŸlantÄ±larÄ±nÄ± ortaya Ã§Ä±karÄ±r.
```
D:\rpctools> rpcdump [-p port] <IP>
**IFID**: 5a7b91f8-ff00-11d0-a9b2-00c04fb6e6fc version 1.0
Annotation: Messenger Service
UUID: 00000000-0000-0000-0000-000000000000
Binding: ncadg_ip_udp:<IP>[1028]
```
RPC yer bulucu hizmetine eriÅŸim, belirli protokoller aracÄ±lÄ±ÄŸÄ±yla etkinleÅŸtirilir: port 135 Ã¼zerinden eriÅŸim iÃ§in ncacn\_ip\_tcp ve ncadg\_ip\_udp, SMB baÄŸlantÄ±larÄ± iÃ§in ncacn\_np ve web tabanlÄ± RPC iletiÅŸimi iÃ§in ncacn\_http. AÅŸaÄŸÄ±daki komutlar, MSRPC hizmetlerini denetlemek ve etkileÅŸimde bulunmak iÃ§in Metasploit modÃ¼llerinin kullanÄ±mÄ±nÄ± Ã¶rneklemektedir, Ã¶ncelikle port 135'e odaklanarak:
```bash
use auxiliary/scanner/dcerpc/endpoint_mapper
use auxiliary/scanner/dcerpc/hidden
use auxiliary/scanner/dcerpc/management
use auxiliary/scanner/dcerpc/tcp_dcerpc_auditor
rpcdump.py <IP> -p 135
```
`tcp_dcerpc_auditor` hariÃ§ tÃ¼m seÃ§enekler Ã¶zel olarak 135 numaralÄ± port Ã¼zerindeki MSRPC'yi hedef almak iÃ§in tasarlanmÄ±ÅŸtÄ±r.

#### Ã–nemli RPC arayÃ¼zleri

* **IFID**: 12345778-1234-abcd-ef00-0123456789ab
* **AdlandÄ±rÄ±lmÄ±ÅŸ Pipe**: `\pipe\lsarpc`
* **AÃ§Ä±klama**: KullanÄ±cÄ±larÄ± sÄ±ralamak iÃ§in kullanÄ±lan LSA arayÃ¼zÃ¼.

* **IFID**: 3919286a-b10c-11d0-9ba8-00c04fd92ef5
* **AdlandÄ±rÄ±lmÄ±ÅŸ Pipe**: `\pipe\lsarpc`
* **AÃ§Ä±klama**: AlanlarÄ± ve gÃ¼ven iliÅŸkilerini sÄ±ralamak iÃ§in kullanÄ±lan LSA Dizin Hizmetleri (DS) arayÃ¼zÃ¼.

* **IFID**: 12345778-1234-abcd-ef00-0123456789ac
* **AdlandÄ±rÄ±lmÄ±ÅŸ Pipe**: `\pipe\samr`
* **AÃ§Ä±klama**: Hesap kilitlenme politikasÄ±na bakÄ±lmaksÄ±zÄ±n, genel SAM veritabanÄ± Ã¶ÄŸelerine (Ã¶rneÄŸin, kullanÄ±cÄ± adlarÄ±) eriÅŸmek ve kullanÄ±cÄ± parolalarÄ±nÄ± kaba kuvvet saldÄ±rÄ±sÄ±yla bulmak iÃ§in kullanÄ±lan LSA SAMR arayÃ¼zÃ¼.

* **IFID**: 1ff70682-0a51-30e8-076d-740be8cee98b
* **AdlandÄ±rÄ±lmÄ±ÅŸ Pipe**: `\pipe\atsvc`
* **AÃ§Ä±klama**: KomutlarÄ± uzaktan yÃ¼rÃ¼tmek iÃ§in kullanÄ±lan GÃ¶rev ZamanlayÄ±cÄ±sÄ±.

* **IFID**: 338cd001-2244-31f1-aaaa-900038001003
* **AdlandÄ±rÄ±lmÄ±ÅŸ Pipe**: `\pipe\winreg`
* **AÃ§Ä±klama**: Sistem kayÄ±t defterine eriÅŸmek ve deÄŸiÅŸtirmek iÃ§in kullanÄ±lan Uzaktan kayÄ±t defteri hizmeti.

* **IFID**: 367abb81-9844-35f1-ad32-98f038001003
* **AdlandÄ±rÄ±lmÄ±ÅŸ Pipe**: `\pipe\svcctl`
* **AÃ§Ä±klama**: Hizmet kontrol yÃ¶neticisi ve sunucu hizmetleri, hizmetleri uzaktan baÅŸlatmak ve durdurmak, komutlarÄ± yÃ¼rÃ¼tmek iÃ§in kullanÄ±lÄ±r.

* **IFID**: 4b324fc8-1670-01d3-1278-5a47bf6ee188
* **AdlandÄ±rÄ±lmÄ±ÅŸ Pipe**: `\pipe\srvsvc`
* **AÃ§Ä±klama**: Hizmet kontrol yÃ¶neticisi ve sunucu hizmetleri, hizmetleri uzaktan baÅŸlatmak ve durdurmak, komutlarÄ± yÃ¼rÃ¼tmek iÃ§in kullanÄ±lÄ±r.

* **IFID**: 4d9f4ab8-7d1c-11cf-861e-0020af6e7c57
* **AdlandÄ±rÄ±lmÄ±ÅŸ Pipe**: `\pipe\epmapper`
* **AÃ§Ä±klama**: WM aracÄ±lÄ±ÄŸÄ±yla kaba kuvvet parola denemesi ve bilgi toplama iÃ§in kullanÄ±lan DCOM arayÃ¼zÃ¼.

### IP adreslerini belirleme

[https://github.com/mubix/IOXIDResolver](https://github.com/mubix/IOXIDResolver) kullanarak, _**IOXIDResolver**_ arayÃ¼zÃ¼ndeki _**ServerAlive2**_ yÃ¶ntemi kÃ¶tÃ¼ye kullanÄ±labilir.

Bu yÃ¶ntem, HTB kutusu _APT_'den **IPv6** adresi gibi arayÃ¼z bilgilerini elde etmek iÃ§in kullanÄ±lmÄ±ÅŸtÄ±r. 0xdf APT yazÄ±sÄ±na [buradan](https://0xdf.gitlab.io/2021/04/10/htb-apt.html) bakabilirsiniz, iÃ§inde rpcmap.py'yi [Impacket](https://github.com/SecureAuthCorp/impacket/) ile _stringbinding_ kullanarak alternatif bir yÃ¶ntem bulunmaktadÄ±r (yukarÄ±ya bakÄ±nÄ±z).

## 593 NumaralÄ± Port

[rpctools](https://resources.oreilly.com/examples/9780596510305/tree/master/tools/rpctools) iÃ§indeki **rpcdump.exe** bu porta etkileÅŸimde bulunabilir.

#â€‹# Referanslar
* [https://www.cyber.airbus.com/the-oxid-resolver-part-1-remote-enumeration-of-network-interfaces-without-any-authentication/](https://www.cyber.airbus.com/the-oxid-resolver-part-1-remote-enumeration-of-network-interfaces-without-any-authentication/)
* [https://www.cyber.airbus.com/the-oxid-resolver-part-2-accessing-a-remote-object-inside-dcom/](https://www.cyber.airbus.com/the-oxid-resolver-part-2-accessing-a-remote-object-inside-dcom/)
* [https://0xffsec.com/handbook/services/msrpc/](https://0xffsec.com/handbook/services/msrpc/)

<figure><img src="../../.gitbook/assets/image (1) (3) (1).png" alt=""><figcaption></figcaption></figure>

Deneyimli hackerlar ve Ã¶dÃ¼l avcÄ±larÄ±yla iletiÅŸim kurmak iÃ§in [**HackenProof Discord**](https://discord.com/invite/N3FrSbmwdy) sunucusuna katÄ±lÄ±n!

**Hacking Insights**\
Hacking'in heyecanÄ±nÄ± ve zorluklarÄ±nÄ± inceleyen iÃ§eriklere katÄ±lÄ±n.

**GerÃ§ek ZamanlÄ± Hack Haberleri**\
HÄ±zlÄ± tempolu hacking dÃ¼nyasÄ±nÄ± gerÃ§ek zamanlÄ± haberler ve iÃ§gÃ¶rÃ¼lerle takip edin.

**En Son Duyurular**\
Yeni Ã¶dÃ¼l avlarÄ± baÅŸlatma ve Ã¶nemli platform gÃ¼ncellemeleri hakkÄ±nda bilgi edinin.

BugÃ¼n en iyi hackerlarla iÅŸbirliÄŸi yapmak iÃ§in [**Discord**](https://discord.com/invite/N3FrSbmwdy) adresimize katÄ±lÄ±n!

<details>

<summary><strong>SÄ±fÄ±rdan kahraman olmak iÃ§in AWS hackleme Ã¶ÄŸrenin</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

HackTricks'i desteklemenin diÄŸer yollarÄ±:

* Åirketinizi HackTricks'te **reklam vermek veya HackTricks'i PDF olarak indirmek** iÃ§in [**ABONELÄ°K PLANLARI**](https://github.com/sponsors/carlospolop)'na gÃ¶z atÄ±n!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin.
* Ã–zel [**NFT'lerden**](https://opensea.io/collection/the-peass-family) oluÅŸan koleksiyonumuz [**The PEASS Family**](https://opensea.io/collection/the-peass-family)'yi keÅŸfedin.
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n veya bizi **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)**'da** takip edin.
* Hacking hilelerinizi paylaÅŸarak HackTricks ve HackTricks Cloud github depolarÄ±na PR gÃ¶ndererek katkÄ±da bulunun.

</details>
