<details>

<summary><strong>Naucz si hakowa AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Inne sposoby wsparcia HackTricks:

* Jeli chcesz zobaczy swoj **firm reklamowan w HackTricks** lub **pobra HackTricks w formacie PDF**, sprawd藕 [**PLAN SUBSKRYPCJI**](https://github.com/sponsors/carlospolop)!
* Zdobd藕 [**oficjalne gad偶ety PEASS & HackTricks**](https://peass.creator-spring.com)
* Odkryj [**Rodzin PEASS**](https://opensea.io/collection/the-peass-family), nasz kolekcj ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* **Docz do**  [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **led藕** nas na **Twitterze**  [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Podziel si swoimi sztuczkami hakerskimi, przesyajc PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repozytori贸w github.

</details>
```text
PORT     STATE SERVICE    VERSION
3299/tcp open  saprouter?
```
To jest podsumowanie postu z [https://blog.rapid7.com/2014/01/09/piercing-saprouter-with-metasploit/](https://blog.rapid7.com/2014/01/09/piercing-saprouter-with-metasploit/)


## Zrozumienie penetracji SAProuter za pomoc Metasploit

SAProuter dziaa jako odwrotny proxy dla system贸w SAP, g贸wnie w celu kontrolowania dostpu midzy internetem a wewntrznymi sieciami SAP. Jest powszechnie wystawiany na dziaanie internetu poprzez umo偶liwienie portu TCP 3299 przez zapory organizacyjne. Taka konfiguracja sprawia, 偶e SAProuter staje si atrakcyjnym celem test贸w penetracyjnych, poniewa偶 mo偶e su偶y jako brama do wewntrznych sieci o wysokiej wartoci.

**Skanowanie i zbieranie informacji**

Pocztkowo przeprowadza si skanowanie w celu identyfikacji, czy na danym adresie IP dziaa router SAP przy u偶yciu moduu **sap_service_discovery**. Ten krok jest kluczowy dla ustalenia obecnoci routera SAP i otwartego portu.
```text
msf> use auxiliary/scanner/sap/sap_service_discovery
msf auxiliary(sap_service_discovery) > set RHOSTS 1.2.3.101
msf auxiliary(sap_service_discovery) > run
```
Po odkryciu, przeprowadza si dalsze dochodzenie w celu zbadania konfiguracji routera SAP przy u偶yciu moduu **sap_router_info_request**, aby potencjalnie ujawni szczeg贸y wewntrznej sieci.
```text
msf auxiliary(sap_router_info_request) > use auxiliary/scanner/sap/sap_router_info_request
msf auxiliary(sap_router_info_request) > set RHOSTS 1.2.3.101
msf auxiliary(sap_router_info_request) > run
```
**Wyliczanie wewntrznych usug**

Dziki uzyskanym wgldom w wewntrzn sie, modu **sap_router_portscanner** jest u偶ywany do sondowania wewntrznych host贸w i usug za porednictwem SAProutera, co umo偶liwia lepsze zrozumienie wewntrznych sieci i konfiguracji usug.
```text
msf auxiliary(sap_router_portscanner) > set INSTANCES 00-50
msf auxiliary(sap_router_portscanner) > set PORTS 32NN
```
Ten modu jest elastyczny w celowaniu konkretnych instancji SAP i port贸w, co czyni go skutecznym narzdziem do szczeg贸owego badania wewntrznej sieci.

**Zaawansowane wyliczanie i mapowanie ACL**

Dalsze skanowanie mo偶e ujawni, jak s skonfigurowane listy kontroli dostpu (ACL) na SAProuterze, szczeg贸owo opisujc, kt贸re poczenia s dozwolone lub zablokowane. Te informacje s kluczowe do zrozumienia polityk bezpieczestwa i potencjalnych podatnoci.
```text
msf auxiliary(sap_router_portscanner) > set MODE TCP
msf auxiliary(sap_router_portscanner) > set PORTS 80,32NN
```
**lepe wyliczanie wewntrznych host贸w**

W sytuacjach, gdy bezporednie informacje z SAProuter s ograniczone, mo偶na zastosowa techniki takie jak lepe wyliczanie. Ta metoda polega na pr贸bie zgadywania i weryfikacji istnienia wewntrznych nazw host贸w, ujawniajc potencjalne cele bez bezporednich adres贸w IP.

**Wykorzystanie informacji do test贸w penetracyjnych**

Po zmapowaniu sieci i zidentyfikowaniu dostpnych usug, testerzy penetracyjni mog wykorzysta mo偶liwoci proxy w Metasploit do przekierowania przez SAProuter w celu dalszego badania i eksploatacji wewntrznych usug SAP.
```text
msf auxiliary(sap_hostctrl_getcomputersystem) > set Proxies sapni:1.2.3.101:3299
msf auxiliary(sap_hostctrl_getcomputersystem) > set RHOSTS 192.168.1.18
msf auxiliary(sap_hostctrl_getcomputersystem) > run
```
**Podsumowanie**

Ta metoda podkrela znaczenie bezpiecznej konfiguracji SAProutera i zwraca uwag na potencja dostpu do wewntrznych sieci poprzez ukierunkowane testowanie penetracyjne. Prawidowe zabezpieczenie SAProuter贸w i zrozumienie ich roli w architekturze bezpieczestwa sieciowego jest kluczowe dla ochrony przed nieautoryzowanym dostpem.

Aby uzyska bardziej szczeg贸owe informacje na temat modu贸w Metasploit i ich u偶ycia, odwied藕 [baz danych Rapid7](http://www.rapid7.com/db).


## **Odnoniki**

* [https://www.rapid7.com/blog/post/2014/01/09/piercing-saprouter-with-metasploit/](https://www.rapid7.com/blog/post/2014/01/09/piercing-saprouter-with-metasploit/)

## Shodan

* `port:3299 !HTTP Network packet too big`



<details>

<summary><strong>Naucz si hakowa AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Inne sposoby wsparcia HackTricks:

* Jeli chcesz zobaczy swoj **firm reklamowan w HackTricks** lub **pobra HackTricks w formacie PDF**, sprawd藕 [**PLAN SUBSKRYPCJI**](https://github.com/sponsors/carlospolop)!
* Zdobd藕 [**oficjalne gad偶ety PEASS & HackTricks**](https://peass.creator-spring.com)
* Odkryj [**Rodzin PEASS**](https://opensea.io/collection/the-peass-family), nasz kolekcj ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* **Docz do**  [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **led藕** nas na **Twitterze**  [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Podziel si swoimi sztuczkami hakerskimi, przesyajc PR do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
