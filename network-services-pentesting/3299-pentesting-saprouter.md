<details>

<summary><strong>Nau캜ite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Drugi na캜ini podr코ke HackTricks-u:

* Ako 쬰lite da vidite **va코u kompaniju reklamiranu na HackTricks-u** ili **preuzmete HackTricks u PDF formatu** proverite [**PLANOVE ZA PRETPLATU**](https://github.com/sponsors/carlospolop)!
* Nabavite [**zvani캜ni PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Otkrijte [**The PEASS Family**](https://opensea.io/collection/the-peass-family), na코u kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* **Pridru쬴te se** 游눫 [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili nas **pratite** na **Twitter-u** 游냕 [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Podelite svoje hakovanje trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>
```text
PORT     STATE SERVICE    VERSION
3299/tcp open  saprouter?
```
Ovo je sa쬰tak posta sa [https://blog.rapid7.com/2014/01/09/piercing-saprouter-with-metasploit/](https://blog.rapid7.com/2014/01/09/piercing-saprouter-with-metasploit/)


## Razumevanje prodiranja SAProuter-a pomo캖u Metasploita

SAProuter deluje kao reverzni proxy za SAP sisteme, uglavnom kako bi kontrolisao pristup izme캠u interneta i internih SAP mre쬬. 캛esto je izlo쬰n internetu omogu캖avanjem TCP porta 3299 kroz organizacione firewall-ove. Ova konfiguracija 캜ini SAProuter privla캜nom metom za testiranje prodiranja jer mo쬰 slu쬴ti kao ulaz u internu mre쬿 visoke vrednosti.

**Skeniranje i prikupljanje informacija**

Prvo se vr코i skeniranje kako bi se utvrdilo da li se na odre캠enoj IP adresi izvr코ava SAP router koriste캖i modul **sap_service_discovery**. Ovaj korak je klju캜an za utvr캠ivanje prisustva SAP routera i otvorenog porta.
```text
msf> use auxiliary/scanner/sap/sap_service_discovery
msf auxiliary(sap_service_discovery) > set RHOSTS 1.2.3.101
msf auxiliary(sap_service_discovery) > run
```
Nakon otkri캖a, vr코i se dalja istraga konfiguracije SAP rutera pomo캖u modula **sap_router_info_request** kako bi se potencijalno otkrili detalji interne mre쬰.
```text
msf auxiliary(sap_router_info_request) > use auxiliary/scanner/sap/sap_router_info_request
msf auxiliary(sap_router_info_request) > set RHOSTS 1.2.3.101
msf auxiliary(sap_router_info_request) > run
```
**Nabrajanje internih usluga**

Sa dobijenim uvidom u internu mre쬿, modul **sap_router_portscanner** se koristi za ispitivanje internih ra캜unara i usluga putem SAPrutera, omogu캖avaju캖i dublje razumevanje internih mre쬬 i konfiguracija usluga.
```text
msf auxiliary(sap_router_portscanner) > set INSTANCES 00-50
msf auxiliary(sap_router_portscanner) > set PORTS 32NN
```
Ova modulova fleksibilnost u ciljanju odre캠enih SAP instanci i portova 캜ini ga efikasnim alatom za detaljno istra쬴vanje interne mre쬰.

**Napredno nabrojavanje i mapiranje ACL-a**

Dalje skeniranje mo쬰 otkriti kako su konfigurisane Access Control List (ACL) na SAProuter-u, detaljno opisuju캖i koje veze su dozvoljene ili blokirane. Ove informacije su klju캜ne za razumevanje sigurnosnih politika i potencijalnih ranjivosti.
```text
msf auxiliary(sap_router_portscanner) > set MODE TCP
msf auxiliary(sap_router_portscanner) > set PORTS 80,32NN
```
**Slepo nabrojavanje unutra코njih ra캜unara**

U scenarijima gde je direktna informacija od SAPrutera ograni캜ena, mogu se primeniti tehnike slepog nabrojavanja. Ovaj pristup poku코ava da pogodi i potvrdi postojanje unutra코njih imena ra캜unara, otkrivaju캖i potencijalne mete bez direktnih IP adresa.

**Iskori코캖avanje informacija za testiranje prodiranja**

Nakon 코to je mre쬬 mapirana i identifikovane su dostupne usluge, testeri prodiranja mogu koristiti sposobnosti proxy-ja u Metasploit-u za prelazak preko SAPrutera radi daljeg istra쬴vanja i iskori코캖avanja internih SAP usluga.
```text
msf auxiliary(sap_hostctrl_getcomputersystem) > set Proxies sapni:1.2.3.101:3299
msf auxiliary(sap_hostctrl_getcomputersystem) > set RHOSTS 192.168.1.18
msf auxiliary(sap_hostctrl_getcomputersystem) > run
```
**Zaklju캜ak**

Ovaj pristup isti캜e va쬹ost sigurnih konfiguracija SAProuter-a i isti캜e mogu캖nost pristupa internim mre쬬ma putem ciljanog testiranja prodiranja. Pravilno osiguravanje SAP router-a i razumevanje njihove uloge u arhitekturi mre쬹e sigurnosti klju캜no je za za코titu od neovla코캖enog pristupa.

Za detaljnije informacije o Metasploit modulima i njihovoj upotrebi, posetite [Rapid7 bazu podataka](http://www.rapid7.com/db).


## **Reference**

* [https://www.rapid7.com/blog/post/2014/01/09/piercing-saprouter-with-metasploit/](https://www.rapid7.com/blog/post/2014/01/09/piercing-saprouter-with-metasploit/)

## Shodan

* `port:3299 !HTTP Network packet too big`



<details>

<summary><strong>Nau캜ite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Drugi na캜ini podr코ke HackTricks-u:

* Ako 쬰lite da vidite **va코u kompaniju ogla코enu na HackTricks-u** ili **preuzmete HackTricks u PDF formatu**, proverite [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Nabavite [**zvani캜ni PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Otkrijte [**The PEASS Family**](https://opensea.io/collection/the-peass-family), na코u kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* **Pridru쬴te se** 游눫 [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili nas **pratite** na **Twitter-u** 游냕 [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Podelite svoje trikove hakovanja slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>
