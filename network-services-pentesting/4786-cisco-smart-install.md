# 4786 - Cisco Smart Install

<details>

<summary><strong>Naucz siÄ™ hakowaÄ‡ AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

* Pracujesz w **firmie zajmujÄ…cej siÄ™ cyberbezpieczeÅ„stwem**? Chcesz zobaczyÄ‡ swojÄ… **firmÄ™ reklamowanÄ… w HackTricks**? A moÅ¼e chcesz mieÄ‡ dostÄ™p do **najnowszej wersji PEASS lub pobraÄ‡ HackTricks w formacie PDF**? SprawdÅº [**PLAN SUBSKRYPCJI**](https://github.com/sponsors/carlospolop)!
* Odkryj [**RodzinÄ™ PEASS**](https://opensea.io/collection/the-peass-family), naszÄ… kolekcjÄ™ ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* ZdobÄ…dÅº [**oficjalne gadÅ¼ety PEASS & HackTricks**](https://peass.creator-spring.com)
* **DoÅ‚Ä…cz do** [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **Å›ledÅº** mnie na **Twitterze** ğŸ¦[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Podziel siÄ™ swoimi sztuczkami hakerskimi, przesyÅ‚ajÄ…c PR-y do repozytorium [hacktricks](https://github.com/carlospolop/hacktricks) i [hacktricks-cloud](https://github.com/carlospolop/hacktricks-cloud)**.

</details>

## Podstawowe informacje

**Cisco Smart Install** to Cisco zaprojektowany do automatyzacji poczÄ…tkowej konfiguracji i Å‚adowania obrazu systemu operacyjnego dla nowego sprzÄ™tu Cisco. **DomyÅ›lnie Cisco Smart Install jest aktywny na sprzÄ™cie Cisco i uÅ¼ywa protokoÅ‚u warstwy transportowej, TCP, z numerem portu 4786.**

**DomyÅ›lny port:** 4786
```
PORT      STATE  SERVICE
4786/tcp  open   smart-install
```
## **NarzÄ™dzie do wykorzystania Smart Install**

**W 2018 roku odkryto krytycznÄ… podatnoÅ›Ä‡, CVE-2018â€“0171, w tym protokole. Poziom zagroÅ¼enia wynosi 9.8 na skali CVSS.**

**Specjalnie spreparowany pakiet wysÅ‚any do portu TCP/4786, gdzie dziaÅ‚a Cisco Smart Install, wywoÅ‚uje przepeÅ‚nienie bufora, umoÅ¼liwiajÄ…c atakujÄ…cemu:**

* wymuszenie ponownego uruchomienia urzÄ…dzenia
* wywoÅ‚anie RCE
* kradzieÅ¼ konfiguracji sprzÄ™tu sieciowego.

**[SIET](https://github.com/frostbits-security/SIET) (Smart Install Exploitation Tool)** zostaÅ‚ opracowany w celu wykorzystania tej podatnoÅ›ci, umoÅ¼liwia naduÅ¼ycie Cisco Smart Install. W tym artykule pokaÅ¼Ä™ Ci, jak moÅ¼esz odczytaÄ‡ prawidÅ‚owy plik konfiguracyjny sprzÄ™tu sieciowego. Skonfigurowanie eksfiltracji moÅ¼e byÄ‡ wartoÅ›ciowe dla pentestera, poniewaÅ¼ pozwoli na poznanie unikalnych cech sieci. To uÅ‚atwi Å¼ycie i umoÅ¼liwi znalezienie nowych wektorÃ³w ataku.

**Docelowym urzÄ…dzeniem bÄ™dzie "Å¼ywy" przeÅ‚Ä…cznik Cisco Catalyst 2960. Wirtualne obrazy nie majÄ… Cisco Smart Install, wiÄ™c moÅ¼na Ä‡wiczyÄ‡ tylko na rzeczywistym sprzÄ™cie.**

Adres docelowego przeÅ‚Ä…cznika to **10.10.100.10 i CSI jest aktywne**. ZaÅ‚aduj SIET i rozpocznij atak. **Argument -g** oznacza eksfiltracjÄ™ konfiguracji z urzÄ…dzenia, **argument -i** pozwala ustawiÄ‡ adres IP podatnego celu.
```
~/opt/tools/SIET$ sudo python2 siet.py -g -i 10.10.100.10
```
<figure><img src="../.gitbook/assets/image (302).png" alt=""><figcaption></figcaption></figure>

Konfiguracja przeÅ‚Ä…cznika **10.10.100.10** znajduje siÄ™ w folderze **tftp/**.

<figure><img src="../.gitbook/assets/image (73).png" alt=""><figcaption></figcaption></figure>

<details>

<summary><strong>Naucz siÄ™ hakowaÄ‡ AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

* Pracujesz w **firmie zajmujÄ…cej siÄ™ cyberbezpieczeÅ„stwem**? Chcesz zobaczyÄ‡, jak Twoja **firma jest reklamowana w HackTricks**? A moÅ¼e chcesz mieÄ‡ dostÄ™p do **najnowszej wersji PEASS lub pobraÄ‡ HackTricks w formacie PDF**? SprawdÅº [**PLAN SUBSKRYPCJI**](https://github.com/sponsors/carlospolop)!
* Odkryj [**RodzinÄ™ PEASS**](https://opensea.io/collection/the-peass-family), naszÄ… kolekcjÄ™ ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* ZdobÄ…dÅº [**oficjalne gadÅ¼ety PEASS & HackTricks**](https://peass.creator-spring.com)
* **DoÅ‚Ä…cz do** [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **Å›ledÅº** mnie na **Twitterze** ğŸ¦[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Podziel siÄ™ swoimi sztuczkami hakerskimi, przesyÅ‚ajÄ…c PR-y do repozytorium [hacktricks](https://github.com/carlospolop/hacktricks) i [hacktricks-cloud](https://github.com/carlospolop/hacktricks-cloud)**.

</details>
