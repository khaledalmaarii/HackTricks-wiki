# 4786 - Cisco Smart Install

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>â˜ï¸ HackTricks Cloud â˜ï¸</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ğŸ¦ Twitter ğŸ¦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ğŸ™ï¸ Twitch ğŸ™ï¸</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ğŸ¥ Youtube ğŸ¥</strong></a></summary>

* Travaillez-vous dans une **entreprise de cybersÃ©curitÃ©**? Vous voulez voir votre **entreprise annoncÃ©e dans HackTricks**? ou voulez-vous avoir accÃ¨s Ã  la **derniÃ¨re version du PEASS ou tÃ©lÃ©charger HackTricks en PDF**? Consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop)!
* DÃ©couvrez [**La famille PEASS**](https://opensea.io/collection/the-peass-family), notre collection exclusive de [**NFTs**](https://opensea.io/collection/the-peass-family)
* Obtenez le [**swag officiel PEASS & HackTricks**](https://peass.creator-spring.com)
* **Rejoignez le** [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe Telegram**](https://t.me/peass) ou **suivez** moi sur **Twitter** **ğŸ¦**[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Partagez vos astuces de piratage en soumettant des PR au [dÃ©pÃ´t hacktricks](https://github.com/carlospolop/hacktricks) et [dÃ©pÃ´t hacktricks-cloud](https://github.com/carlospolop/hacktricks-cloud)**.

</details>

## Informations de base

**Cisco Smart Install** est un service conÃ§u par Cisco pour automatiser la configuration initiale et le chargement d'une image de systÃ¨me d'exploitation pour du nouveau matÃ©riel Cisco. **Par dÃ©faut, Cisco Smart Install est actif sur le matÃ©riel Cisco et utilise le protocole de couche de transport, TCP, avec le numÃ©ro de port 4786.**

**Port par dÃ©faut:** 4786
```
PORT      STATE  SERVICE
4786/tcp  open   smart-install
```
## **Outil d'exploitation de Smart Install**

**En 2018, une vulnÃ©rabilitÃ© critique, CVE-2018-0171, a Ã©tÃ© dÃ©couverte dans ce protocole. Le niveau de menace est de 9,8 sur l'Ã©chelle CVSS.**

**Un paquet spÃ©cialement conÃ§u envoyÃ© au port TCP/4786, oÃ¹ Cisco Smart Install est actif, dÃ©clenche un dÃ©passement de tampon, permettant Ã  un attaquant de:**

* redÃ©marrer de force le pÃ©riphÃ©rique
* appeler RCE
* voler des configurations d'Ã©quipements rÃ©seau.

**Le** [**SIET**](https://github.com/frostbits-security/SIET) **(Smart Install Exploitation Tool)** a Ã©tÃ© dÃ©veloppÃ© pour exploiter cette vulnÃ©rabilitÃ©, il vous permet d'abuser de Cisco Smart Install. Dans cet article, je vous montrerai comment vous pouvez lire un fichier de configuration matÃ©riel rÃ©seau lÃ©gitime. La configuration de l'exfiltration peut Ãªtre prÃ©cieuse pour un testeur d'intrusion car il apprendra les caractÃ©ristiques uniques du rÃ©seau. Et cela facilitera la vie et permettra de trouver de nouveaux vecteurs pour une attaque.

**Le pÃ©riphÃ©rique cible sera un commutateur Cisco Catalyst 2960 "en direct". Les images virtuelles n'ont pas Cisco Smart Install, donc vous ne pouvez vous entraÃ®ner que sur le matÃ©riel rÃ©el.**

L'adresse du commutateur cible est **10.10.100.10 et CSI est actif.** Chargez SIET et lancez l'attaque. **L'argument -g** signifie l'exfiltration de la configuration du pÃ©riphÃ©rique, **l'argument -i** vous permet de dÃ©finir l'adresse IP de la cible vulnÃ©rable.
```
~/opt/tools/SIET$ sudo python2 siet.py -g -i 10.10.100.10
```
<figure><img src="../.gitbook/assets/image (302).png" alt=""><figcaption></figcaption></figure>

La configuration du commutateur **10.10.100.10** sera dans le dossier **tftp/**

\

<figure><img src="../.gitbook/assets/image (73).png" alt=""><figcaption></figcaption></figure>

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>â˜ï¸ HackTricks Cloud â˜ï¸</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ğŸ¦ Twitter ğŸ¦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ğŸ™ï¸ Twitch ğŸ™ï¸</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ğŸ¥ Youtube ğŸ¥</strong></a></summary>

* Travaillez-vous dans une **entreprise de cybersÃ©curitÃ©**? Voulez-vous voir votre **entreprise annoncÃ©e dans HackTricks**? ou voulez-vous avoir accÃ¨s Ã  la **derniÃ¨re version du PEASS ou tÃ©lÃ©charger HackTricks en PDF**? Consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop)!
* DÃ©couvrez [**La famille PEASS**](https://opensea.io/collection/the-peass-family), notre collection exclusive de [**NFTs**](https://opensea.io/collection/the-peass-family)
* Obtenez le [**swag officiel PEASS & HackTricks**](https://peass.creator-spring.com)
* **Rejoignez le** [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe Telegram**](https://t.me/peass) ou **suivez** moi sur **Twitter** **ğŸ¦**[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Partagez vos astuces de piratage en soumettant des PR aux dÃ©pÃ´ts [hacktricks](https://github.com/carlospolop/hacktricks) et [hacktricks-cloud](https://github.com/carlospolop/hacktricks-cloud)**.

</details>
