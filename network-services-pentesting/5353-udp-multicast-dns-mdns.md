# 5353/UDP Multicast DNS (mDNS) å’Œ DNS-SD

{% hint style="success" %}
å­¦ä¹ ä¸å®è·µ AWS é»‘å®¢æŠ€æœ¯ï¼š<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks åŸ¹è®­ AWS çº¢é˜Ÿä¸“å®¶ (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
å­¦ä¹ ä¸å®è·µ GCP é»‘å®¢æŠ€æœ¯ï¼š<img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks åŸ¹è®­ GCP çº¢é˜Ÿä¸“å®¶ (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>æ”¯æŒ HackTricks</summary>

* æŸ¥çœ‹ [**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**telegram ç¾¤ç»„**](https://t.me/peass) æˆ– **å…³æ³¨** æˆ‘ä»¬çš„ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github ä»“åº“æäº¤ PR æ¥åˆ†äº«é»‘å®¢æŠ€å·§ã€‚

</details>
{% endhint %}

## **åŸºæœ¬ä¿¡æ¯**

**Multicast DNS (mDNS)** ä½¿å¾—åœ¨æœ¬åœ°ç½‘ç»œä¸­è¿›è¡Œ **ç±»ä¼¼ DNS çš„æ“ä½œ**ï¼Œè€Œæ— éœ€ä¼ ç»Ÿçš„ DNS æœåŠ¡å™¨ã€‚å®ƒåœ¨ **UDP ç«¯å£ 5353** ä¸Šè¿è¡Œï¼Œå…è®¸è®¾å¤‡ç›¸äº’å‘ç°åŠå…¶æœåŠ¡ï¼Œé€šå¸¸è§äºå„ç§ IoT è®¾å¤‡ã€‚**DNS æœåŠ¡å‘ç° (DNS-SD)** é€šå¸¸ä¸ mDNS ä¸€èµ·ä½¿ç”¨ï¼Œå¸®åŠ©è¯†åˆ«ç½‘ç»œä¸Šå¯ç”¨çš„æœåŠ¡ï¼Œé€šè¿‡æ ‡å‡†çš„ DNS æŸ¥è¯¢è¿›è¡Œã€‚
```
PORT     STATE SERVICE
5353/udp open  zeroconf
```
### **mDNSçš„æ“ä½œ**

åœ¨æ²¡æœ‰æ ‡å‡†DNSæœåŠ¡å™¨çš„ç¯å¢ƒä¸­ï¼ŒmDNSå…è®¸è®¾å¤‡é€šè¿‡æŸ¥è¯¢å¤šæ’­åœ°å€**224.0.0.251**ï¼ˆIPv4ï¼‰æˆ–**FF02::FB**ï¼ˆIPv6ï¼‰æ¥è§£æä»¥**.local**ç»“å°¾çš„åŸŸåã€‚mDNSçš„é‡è¦æ–¹é¢åŒ…æ‹¬ä¸€ä¸ª**ç”Ÿå­˜æ—¶é—´ï¼ˆTTLï¼‰**å€¼ï¼ŒæŒ‡ç¤ºè®°å½•çš„æœ‰æ•ˆæ€§ï¼Œä»¥åŠä¸€ä¸ª**QUä½**ï¼Œç”¨äºåŒºåˆ†å•æ’­å’Œå¤šæ’­æŸ¥è¯¢ã€‚åœ¨å®‰å…¨æ–¹é¢ï¼ŒmDNSå®ç°å¿…é¡»éªŒè¯æ•°æ®åŒ…çš„æºåœ°å€æ˜¯å¦ä¸æœ¬åœ°å­ç½‘ä¸€è‡´ã€‚

### **DNS-SDçš„åŠŸèƒ½**

DNS-SDé€šè¿‡æŸ¥è¯¢æŒ‡é’ˆè®°å½•ï¼ˆPTRï¼‰æ¥ä¿ƒè¿›ç½‘ç»œæœåŠ¡çš„å‘ç°ï¼Œè¿™äº›è®°å½•å°†æœåŠ¡ç±»å‹æ˜ å°„åˆ°å…¶å®ä¾‹ã€‚æœåŠ¡ä½¿ç”¨**_\<Service>.\_tcpæˆ–\_\<Service>.\_udp**æ¨¡å¼åœ¨**.local**åŸŸä¸­è¿›è¡Œæ ‡è¯†ï¼Œä»è€Œå‘ç°ç›¸åº”çš„**SRV**å’Œ**TXTè®°å½•**ï¼Œæä¾›è¯¦ç»†çš„æœåŠ¡ä¿¡æ¯ã€‚

### **ç½‘ç»œæ¢ç´¢**

#### **nmapä½¿ç”¨**

ä¸€ä¸ªç”¨äºæ‰«ææœ¬åœ°ç½‘ç»œä¸­mDNSæœåŠ¡çš„æœ‰ç”¨å‘½ä»¤æ˜¯ï¼š
```bash
nmap -Pn -sUC -p5353 [target IP address]
```
æ­¤å‘½ä»¤æœ‰åŠ©äºè¯†åˆ«å¼€æ”¾çš„ mDNS ç«¯å£åŠå…¶ä¸Šå¹¿å‘Šçš„æœåŠ¡ã€‚

#### **ä½¿ç”¨ Pholus è¿›è¡Œç½‘ç»œæšä¸¾**

è¦ä¸»åŠ¨å‘é€ mDNS è¯·æ±‚å¹¶æ•è·æµé‡ï¼Œå¯ä»¥æŒ‰å¦‚ä¸‹æ–¹å¼ä½¿ç”¨ **Pholus** å·¥å…·ï¼š
```bash
sudo python3 pholus3.py [network interface] -rq -stimeout 10
```
## æ”»å‡»

### **åˆ©ç”¨ mDNS æ¢æµ‹**

ä¸€ç§æ”»å‡»å‘é‡æ¶‰åŠå‘ mDNS æ¢æµ‹å‘é€ä¼ªé€ çš„å“åº”ï¼Œæš—ç¤ºæ‰€æœ‰æ½œåœ¨åç§°å·²ç»è¢«ä½¿ç”¨ï¼Œä»è€Œé˜»ç¢æ–°è®¾å¤‡é€‰æ‹©å”¯ä¸€åç§°ã€‚è¿™å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼æ‰§è¡Œï¼š
```bash
sudo python pholus.py [network interface] -afre -stimeout 1000
```
è¿™ç§æŠ€æœ¯æœ‰æ•ˆåœ°é˜»æ­¢æ–°è®¾å¤‡åœ¨ç½‘ç»œä¸Šæ³¨å†Œå…¶æœåŠ¡ã€‚

**æ€»ç»“**ï¼Œç†è§£ mDNS å’Œ DNS-SD çš„å·¥ä½œåŸç†å¯¹äºç½‘ç»œç®¡ç†å’Œå®‰å…¨è‡³å…³é‡è¦ã€‚åƒ **nmap** å’Œ **Pholus** è¿™æ ·çš„å·¥å…·æä¾›äº†å¯¹æœ¬åœ°ç½‘ç»œæœåŠ¡çš„æœ‰ä»·å€¼çš„æ´å¯Ÿï¼Œè€Œå¯¹æ½œåœ¨æ¼æ´çš„æ„è¯†æœ‰åŠ©äºé˜²èŒƒæ”»å‡»ã€‚

### æ¬ºéª—/ä¸­é—´äººæ”»å‡»

æ‚¨å¯ä»¥åœ¨æ­¤æœåŠ¡ä¸Šæ‰§è¡Œçš„æœ€æœ‰è¶£çš„æ”»å‡»æ˜¯æ‰§è¡Œ **MitM** åœ¨ **å®¢æˆ·ç«¯ä¸çœŸå®æœåŠ¡å™¨ä¹‹é—´çš„é€šä¿¡**ã€‚æ‚¨å¯èƒ½èƒ½å¤Ÿè·å–æ•æ„Ÿæ–‡ä»¶ï¼ˆä¸æ‰“å°æœºçš„é€šä¿¡è¿›è¡Œ MitMï¼‰ç”šè‡³å‡­æ®ï¼ˆWindows èº«ä»½éªŒè¯ï¼‰ã€‚\
æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹ï¼š

{% content-ref url="../generic-methodologies-and-resources/pentesting-network/spoofing-llmnr-nbt-ns-mdns-dns-and-wpad-and-relay-attacks.md" %}
[spoofing-llmnr-nbt-ns-mdns-dns-and-wpad-and-relay-attacks.md](../generic-methodologies-and-resources/pentesting-network/spoofing-llmnr-nbt-ns-mdns-dns-and-wpad-and-relay-attacks.md)
{% endcontent-ref %}

## å‚è€ƒæ–‡çŒ®

* [å®ç”¨ç‰©è”ç½‘é»‘å®¢ï¼šæ”»å‡»ç‰©è”ç½‘çš„æƒå¨æŒ‡å—](https://books.google.co.uk/books/about/Practical\_IoT\_Hacking.html?id=GbYEEAAAQBAJ\&redir\_esc=y)

{% hint style="success" %}
å­¦ä¹ å’Œå®è·µ AWS é»‘å®¢æ”»å‡»ï¼š<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks åŸ¹è®­ AWS çº¢é˜Ÿä¸“å®¶ (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
å­¦ä¹ å’Œå®è·µ GCP é»‘å®¢æ”»å‡»ï¼š <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks åŸ¹è®­ GCP çº¢é˜Ÿä¸“å®¶ (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>æ”¯æŒ HackTricks</summary>

* æŸ¥çœ‹ [**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**ç”µæŠ¥ç¾¤ç»„**](https://t.me/peass) æˆ– **åœ¨ Twitter ä¸Šå…³æ³¨** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github ä»“åº“æäº¤ PR æ¥åˆ†äº«é»‘å®¢æŠ€å·§ã€‚

</details>
{% endhint %}
