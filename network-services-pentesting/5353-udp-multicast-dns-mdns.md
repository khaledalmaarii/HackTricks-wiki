# 5353/UDP Multicast DNS (mDNS) and DNS-SD

<details>

<summary><strong>ä»é›¶å¼€å§‹å­¦ä¹  AWS é»‘å®¢æŠ€æœ¯ï¼Œæˆä¸ºä¸“å®¶</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTEï¼ˆHackTricks AWS çº¢é˜Ÿä¸“å®¶ï¼‰</strong></a><strong>ï¼</strong></summary>

æ”¯æŒ HackTricks çš„å…¶ä»–æ–¹å¼ï¼š

* å¦‚æœæ‚¨æƒ³çœ‹åˆ°æ‚¨çš„ **å…¬å¸åœ¨ HackTricks ä¸­è¢«å¹¿å‘Š** æˆ– **ä¸‹è½½ HackTricks çš„ PDF**ï¼Œè¯·æŸ¥çœ‹ [**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* è·å– [**å®˜æ–¹ PEASS & HackTricks å•†å“**](https://peass.creator-spring.com)
* æ¢ç´¢ [**PEASS å®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬çš„ç‹¬å®¶ [**NFTs**](https://opensea.io/collection/the-peass-family)
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**ç”µæŠ¥ç¾¤ç»„**](https://t.me/peass) æˆ– **å…³æ³¨** æˆ‘ä»¬çš„ **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks\_live)**ã€‚**
* é€šè¿‡å‘ [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github ä»“åº“æäº¤ PR æ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚

</details>

## **åŸºæœ¬ä¿¡æ¯**

**å¤šæ’­ DNS (mDNS)** åœ¨æœ¬åœ°ç½‘ç»œä¸­å®ç°äº†ç±»ä¼¼ **DNS æ“ä½œ**ï¼Œæ— éœ€ä¼ ç»Ÿ DNS æœåŠ¡å™¨ã€‚å®ƒåœ¨ **UDP ç«¯å£ 5353** ä¸Šè¿è¡Œï¼Œå…è®¸è®¾å¤‡å‘ç°å½¼æ­¤åŠå…¶æœåŠ¡ï¼Œé€šå¸¸åœ¨å„ç§ç‰©è”ç½‘è®¾å¤‡ä¸­çœ‹åˆ°ã€‚**DNS æœåŠ¡å‘ç° (DNS-SD)** ç»å¸¸ä¸ mDNS ä¸€èµ·ä½¿ç”¨ï¼Œé€šè¿‡æ ‡å‡† DNS æŸ¥è¯¢å¸®åŠ©è¯†åˆ«ç½‘ç»œä¸Šå¯ç”¨çš„æœåŠ¡ã€‚

```
PORT     STATE SERVICE
5353/udp open  zeroconf
```

### **mDNSæ“ä½œ**

åœ¨æ²¡æœ‰æ ‡å‡†DNSæœåŠ¡å™¨çš„ç¯å¢ƒä¸­ï¼ŒmDNSå…è®¸è®¾å¤‡é€šè¿‡æŸ¥è¯¢å¤šæ’­åœ°å€**224.0.0.251**ï¼ˆIPv4ï¼‰æˆ–**FF02::FB**ï¼ˆIPv6ï¼‰æ¥è§£æä»¥\*\*.local**ç»“å°¾çš„åŸŸåã€‚mDNSçš„é‡è¦æ–¹é¢åŒ…æ‹¬**ç”Ÿå­˜æ—¶é—´ï¼ˆTTLï¼‰**å€¼è¡¨ç¤ºè®°å½•çš„æœ‰æ•ˆæ€§ï¼Œä»¥åŠ**QUä½\*\*åŒºåˆ†å•æ’­å’Œå¤šæ’­æŸ¥è¯¢ã€‚ä»å®‰å…¨è§’åº¦æ¥çœ‹ï¼ŒmDNSå®ç°å¿…é¡»éªŒè¯æ•°æ®åŒ…çš„æºåœ°å€ä¸æœ¬åœ°å­ç½‘å¯¹é½ã€‚

### **DNS-SDåŠŸèƒ½**

DNS-SDé€šè¿‡æŸ¥è¯¢æŒ‡é’ˆè®°å½•ï¼ˆPTRï¼‰æ¥ä¿ƒè¿›ç½‘ç»œæœåŠ¡çš„å‘ç°ï¼Œè¿™äº›è®°å½•å°†æœåŠ¡ç±»å‹æ˜ å°„åˆ°å®ƒä»¬çš„å®ä¾‹ã€‚æœåŠ¡ä½¿ç”¨**\_\<Service>.\_tcpæˆ–\_\<Service>.\_udp**æ¨¡å¼åœ¨\*\*.local**åŸŸå†…è¿›è¡Œæ ‡è¯†ï¼Œä»è€Œå‘ç°ç›¸åº”çš„**SRV**å’Œ**TXTè®°å½•\*\*ï¼Œæä¾›è¯¦ç»†çš„æœåŠ¡ä¿¡æ¯ã€‚

### **ç½‘ç»œæ¢ç´¢**

#### **nmapç”¨æ³•**

ç”¨äºæ‰«ææœ¬åœ°ç½‘ç»œä¸­mDNSæœåŠ¡çš„æœ‰ç”¨å‘½ä»¤æ˜¯ï¼š

```bash
nmap -Pn -sUC -p5353 [target IP address]
```

è¿™ä¸ªå‘½ä»¤æœ‰åŠ©äºè¯†åˆ«å¼€æ”¾çš„mDNSç«¯å£ä»¥åŠå®ƒä»¬ä¸Šé¢å¹¿å‘Šçš„æœåŠ¡ã€‚

#### **ä½¿ç”¨Pholusè¿›è¡Œç½‘ç»œæšä¸¾**

è¦ç§¯æåœ°å‘é€mDNSè¯·æ±‚å¹¶æ•è·æµé‡ï¼Œå¯ä»¥å¦‚ä¸‹ä½¿ç”¨**Pholus**å·¥å…·ï¼š

```bash
sudo python3 pholus3.py [network interface] -rq -stimeout 10
```

## æ”»å‡»

### **åˆ©ç”¨mDNSæ¢æµ‹**

ä¸€ç§æ”»å‡»å‘é‡æ¶‰åŠå‘mDNSæ¢æµ‹å‘é€ä¼ªé€ å“åº”ï¼Œæš—ç¤ºæ‰€æœ‰æ½œåœ¨åç§°å·²è¢«ä½¿ç”¨ï¼Œä»è€Œé˜»ç¢æ–°è®¾å¤‡é€‰æ‹©å”¯ä¸€åç§°ã€‚è¿™å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼æ‰§è¡Œï¼š

```bash
sudo python pholus.py [network interface] -afre -stimeout 1000
```

è¿™ç§æŠ€æœ¯æœ‰æ•ˆåœ°é˜»æ­¢æ–°è®¾å¤‡åœ¨ç½‘ç»œä¸Šæ³¨å†Œå…¶æœåŠ¡ã€‚

**æ€»ç»“**ï¼Œäº†è§£mDNSå’ŒDNS-SDçš„å·¥ä½œåŸç†å¯¹äºç½‘ç»œç®¡ç†å’Œå®‰å…¨è‡³å…³é‡è¦ã€‚åƒ**nmap**å’Œ**Pholus**è¿™æ ·çš„å·¥å…·æä¾›äº†æœ‰å…³æœ¬åœ°ç½‘ç»œæœåŠ¡çš„å®è´µè§è§£ï¼ŒåŒæ—¶æ„è¯†åˆ°æ½œåœ¨çš„æ¼æ´æœ‰åŠ©äºé˜²èŒƒæ”»å‡»ã€‚

### æ¬ºéª—/ä¸­é—´äººæ”»å‡»

æ‚¨å¯ä»¥åœ¨æ­¤æœåŠ¡ä¸Šæ‰§è¡Œçš„æœ€æœ‰è¶£çš„æ”»å‡»æ˜¯åœ¨**å®¢æˆ·ç«¯å’ŒçœŸå®æœåŠ¡å™¨ä¹‹é—´çš„é€šä¿¡**ä¸­æ‰§è¡Œ**ä¸­é—´äººæ”»å‡»**ã€‚æ‚¨å¯èƒ½èƒ½å¤Ÿè·å–æ•æ„Ÿæ–‡ä»¶ï¼ˆä¸­é—´äººæ”»å‡»æ‰“å°æœºé€šä¿¡ï¼‰ç”šè‡³å‡­æ®ï¼ˆWindowsèº«ä»½éªŒè¯ï¼‰ã€‚\
æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹ï¼š

{% content-ref url="../generic-methodologies-and-resources/pentesting-network/spoofing-llmnr-nbt-ns-mdns-dns-and-wpad-and-relay-attacks.md" %}
[spoofing-llmnr-nbt-ns-mdns-dns-and-wpad-and-relay-attacks.md](../generic-methodologies-and-resources/pentesting-network/spoofing-llmnr-nbt-ns-mdns-dns-and-wpad-and-relay-attacks.md)
{% endcontent-ref %}

## å‚è€ƒèµ„æ–™

* [Practical IoT Hacking: The Definitive Guide to Attacking the Internet of Things](https://books.google.co.uk/books/about/Practical\_IoT\_Hacking.html?id=GbYEEAAAQBAJ\&redir\_esc=y)

<details>

<summary><strong>ä»é›¶å¼€å§‹å­¦ä¹ AWSé»‘å®¢æŠ€æœ¯ï¼Œæˆä¸ºä¸“å®¶</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTEï¼ˆHackTricks AWS Red Team Expertï¼‰</strong></a><strong>ï¼</strong></summary>

æ”¯æŒHackTricksçš„å…¶ä»–æ–¹å¼ï¼š

* å¦‚æœæ‚¨æƒ³åœ¨HackTricksä¸­çœ‹åˆ°æ‚¨çš„**å…¬å¸å¹¿å‘Š**æˆ–**ä¸‹è½½PDFæ ¼å¼çš„HackTricks**ï¼Œè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* è·å–[**å®˜æ–¹PEASS & HackTrickså‘¨è¾¹äº§å“**](https://peass.creator-spring.com)
* å‘ç°[**PEASSå®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬çš„ç‹¬å®¶[**NFTs**](https://opensea.io/collection/the-peass-family)
* **åŠ å…¥** ğŸ’¬ [**Discordç¾¤**](https://discord.gg/hRep4RUj7f) æˆ– [**ç”µæŠ¥ç¾¤**](https://t.me/peass) æˆ– **å…³æ³¨**æˆ‘ä»¬çš„**Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks\_live)**ã€‚**
* é€šè¿‡å‘[**HackTricks**](https://github.com/carlospolop/hacktricks)å’Œ[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) githubä»“åº“æäº¤PRæ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚

</details>
