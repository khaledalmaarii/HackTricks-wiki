# 554,8554 - Testowanie penetracyjne RTSP

<details>

<summary><strong>Nauka hakowania AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Inne sposoby wsparcia HackTricks:

* JeÅ›li chcesz zobaczyÄ‡ swojÄ… **firmÄ™ reklamowanÄ… w HackTricks** lub **pobraÄ‡ HackTricks w formacie PDF**, sprawdÅº [**PLANY SUBSKRYPCYJNE**](https://github.com/sponsors/carlospolop)!
* ZdobÄ…dÅº [**oficjalne gadÅ¼ety PEASS & HackTricks**](https://peass.creator-spring.com)
* Odkryj [**RodzinÄ™ PEASS**](https://opensea.io/collection/the-peass-family), naszÄ… kolekcjÄ™ ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* **DoÅ‚Ä…cz do** ğŸ’¬ [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **Å›ledÅº** nas na **Twitterze** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **Podziel siÄ™ swoimi sztuczkami hakowania, przesyÅ‚ajÄ…c PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) na githubie.

</details>

## Podstawowe informacje

Z [wikipedia](https://en.wikipedia.org/wiki/Real\_Time\_Streaming\_Protocol):

> **ProtokÃ³Å‚ transmisji strumieniowej w czasie rzeczywistym** (**RTSP**) to protokÃ³Å‚ sterowania sieciowego zaprojektowany do uÅ¼ytku w systemach rozrywkowych i komunikacyjnych do sterowania serwerami strumieniowymi. ProtokÃ³Å‚ jest uÅ¼ywany do ustanawiania i kontrolowania sesji multimedialnych miÄ™dzy punktami koÅ„cowymi. Klienci serwerÃ³w multimedialnych wydajÄ… polecenia w stylu VHS, takie jak odtwarzanie, nagrywanie i pauza, aby uÅ‚atwiÄ‡ kontrolÄ™ w czasie rzeczywistym nad strumieniem multimedialnym z serwera do klienta (wideo na Å¼Ä…danie) lub od klienta do serwera (nagrywanie gÅ‚osu).
>
> Same przesyÅ‚anie danych strumieniowych nie jest zadaniem RTSP. WiÄ™kszoÅ›Ä‡ serwerÃ³w RTSP uÅ¼ywa ProtokoÅ‚u Transportu w Czasie Rzeczywistym (RTP) w poÅ‚Ä…czeniu z ProtokoÅ‚em Kontroli w Czasie Rzeczywistym (RTCP) do dostarczania strumieni multimedialnych. Jednak niektÃ³rzy dostawcy implementujÄ… wÅ‚asne protokoÅ‚y transportowe. Na przykÅ‚ad oprogramowanie serwera RTSP od RealNetworks uÅ¼ywaÅ‚o rÃ³wnieÅ¼ wÅ‚asnego wÅ‚asnego protokoÅ‚u transportu danych (RDT).

**DomyÅ›lne porty:** 554,8554
```
PORT    STATE SERVICE
554/tcp open  rtsp
```
## Kluczowe szczegÃ³Å‚y

**RTSP** jest podobny do HTTP, ale zaprojektowany specjalnie do strumieniowania mediÃ³w. Jest zdefiniowany w prostym specyfikacji, ktÃ³rÄ… moÅ¼na znaleÅºÄ‡ tutaj:

[RTSP â€“ RFC2326](https://tools.ietf.org/html/rfc2326)

UrzÄ…dzenia mogÄ… zezwalaÄ‡ na dostÄ™p **nieuwierzytelniony** lub **uwierzytelniony**. Aby to sprawdziÄ‡, wysyÅ‚any jest Å¼Ä…danie "DESCRIBE". PoniÅ¼ej przedstawiono podstawowy przykÅ‚ad:

`DESCRIBE rtsp://<ip>:<port> RTSP/1.0\r\nCSeq: 2\r`

PamiÄ™taj, Å¼e poprawne formatowanie obejmuje podwÃ³jne "\r\n" dla spÃ³jnej odpowiedzi. OdpowiedÅº "200 OK" oznacza **dostÄ™p nieuwierzytelniony**, podczas gdy "401 Unauthorized" sygnalizuje koniecznoÅ›Ä‡ uwierzytelnienia, ujawniajÄ…c, czy wymagane jest uwierzytelnienie **Basic** lub **Digest**.

Dla uwierzytelnienia **Basic**, kodujesz nazwÄ™ uÅ¼ytkownika i hasÅ‚o w base64 i doÅ‚Ä…czasz je do Å¼Ä…dania w ten sposÃ³b:

`DESCRIBE rtsp://<ip>:<port> RTSP/1.0\r\nCSeq: 2\r\nAuthorization: Basic YWRtaW46MTIzNA==\r`

Ten przykÅ‚ad uÅ¼ywa "admin" i "1234" jako poÅ›wiadczeÅ„. Oto **skrypt Pythona** do wysÅ‚ania takiego Å¼Ä…dania:
```python
import socket
req = "DESCRIBE rtsp://<ip>:<port> RTSP/1.0\r\nCSeq: 2\r\nAuthorization: Basic YWRtaW46MTIzNA==\r\n\r\n"
s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.connect(("192.168.1.1", 554))
s.sendall(req)
data = s.recv(1024)
print(data)
```
**Podstawowa autoryzacja** jest prostsza i preferowana. **Autoryzacja digest** wymaga ostroÅ¼nego obchodzenia siÄ™ z danymi uwierzytelniajÄ…cymi podanymi w odpowiedzi "401 Unauthorized".

To przeglÄ…d upraszcza proces dostÄ™pu do strumieni RTSP, skupiajÄ…c siÄ™ na **podstawowej autoryzacji** ze wzglÄ™du na jej prostotÄ™ i praktycznoÅ›Ä‡ podczas pierwszych prÃ³b.

## Wyliczanie

Pobierzmy informacje na temat obsÅ‚ugiwanych metod i adresÃ³w URL oraz sprÃ³bujmy siÅ‚owo uzyskaÄ‡ dostÄ™p (jeÅ›li konieczne) do treÅ›ci.
```bash
nmap -sV --script "rtsp-*" -p <PORT> <IP>
```
### [Atak Brute Force](../generic-methodologies-and-resources/brute-force.md#rtsp)

### **Inne przydatne programy**

Do ataku brute force: [https://github.com/Tek-Security-Group/rtsp\_authgrinder](https://github.com/Tek-Security-Group/rtsp\_authgrinder)

[**Cameradar**](https://github.com/Ullaakut/cameradar)

* Wykrywa otwarte hosty RTSP na dowolnym dostÄ™pnym celu
* Pobiera ich publiczne informacje (nazwÄ™ hosta, port, model kamery, itp.)
* Uruchamia zautomatyzowane ataki sÅ‚ownikowe, aby uzyskaÄ‡ Å›cieÅ¼kÄ™ strumienia (na przykÅ‚ad /live.sdp)
* Uruchamia zautomatyzowane ataki sÅ‚ownikowe, aby uzyskaÄ‡ nazwÄ™ uÅ¼ytkownika i hasÅ‚o do kamer
* Generuje miniatury, aby sprawdziÄ‡, czy strumienie sÄ… waÅ¼ne i szybko podejrzeÄ‡ ich zawartoÅ›Ä‡
* PrÃ³buje utworzyÄ‡ potok Gstreamer, aby sprawdziÄ‡, czy sÄ… poprawnie zakodowane
* WyÅ›wietla podsumowanie wszystkich informacji, ktÃ³re Cameradar mÃ³gÅ‚ uzyskaÄ‡

## Referencje

* [https://en.wikipedia.org/wiki/Real\_Time\_Streaming\_Protocol](https://en.wikipedia.org/wiki/Real\_Time\_Streaming\_Protocol)
* [http://badguyfu.net/rtsp-brute-forcing-for-fun-and-naked-pictures/](http://badguyfu.net/rtsp-brute-forcing-for-fun-and-naked-pictures/)
* [https://github.com/Ullaakut/cameradar](https://github.com/Ullaakut/cameradar)

<details>

<summary><strong>Nauka hakowania AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Inne sposoby wsparcia HackTricks:

* JeÅ›li chcesz zobaczyÄ‡ swojÄ… **firmÄ™ reklamowanÄ… w HackTricks** lub **pobraÄ‡ HackTricks w formacie PDF**, sprawdÅº [**PLANY SUBSKRYPCYJNE**](https://github.com/sponsors/carlospolop)!
* Kup [**oficjalne gadÅ¼ety PEASS & HackTricks**](https://peass.creator-spring.com)
* Odkryj [**RodzinÄ™ PEASS**](https://opensea.io/collection/the-peass-family), naszÄ… kolekcjÄ™ ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* **DoÅ‚Ä…cz do** ğŸ’¬ [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **Å›ledÅº** nas na **Twitterze** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **Podziel siÄ™ swoimi sztuczkami hakerskimi, przesyÅ‚ajÄ…c PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
