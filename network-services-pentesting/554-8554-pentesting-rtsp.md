# 554,8554 - RTSP Pentesting

<details>

<summary><strong>AWS hacklemeyi sÄ±fÄ±rdan kahraman olmak iÃ§in</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ±)</strong></a><strong>!</strong></summary>

HackTricks'Ä± desteklemenin diÄŸer yollarÄ±:

* **Åirketinizi HackTricks'te reklamÄ±nÄ±zÄ± gÃ¶rmek** veya **HackTricks'i PDF olarak indirmek** iÃ§in [**ABONELÄ°K PLANLARI'na**](https://github.com/sponsors/carlospolop) gÃ¶z atÄ±n!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* [**The PEASS Ailesi'ni**](https://opensea.io/collection/the-peass-family) keÅŸfedin, Ã¶zel [**NFT'lerimiz**](https://opensea.io/collection/the-peass-family) koleksiyonumuz
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katÄ±lÄ±n** veya **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)**'u takip edin**.
* **Hacking hilelerinizi** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna **PR gÃ¶ndererek paylaÅŸÄ±n**.

</details>

## Temel Bilgiler

[wikipedia](https://en.wikipedia.org/wiki/Real\_Time\_Streaming\_Protocol)'dan alÄ±nan bilgilere gÃ¶re:

> **Real Time Streaming Protocol** (**RTSP**), akÄ±ÅŸ medya sunucularÄ±nÄ± kontrol etmek iÃ§in eÄŸlence ve iletiÅŸim sistemlerinde kullanÄ±lan bir aÄŸ kontrol protokolÃ¼dÃ¼r. Protokol, uÃ§ noktalar arasÄ±nda medya oturumlarÄ±nÄ± kurmak ve kontrol etmek iÃ§in kullanÄ±lÄ±r. Medya sunucularÄ±nÄ±n istemcileri, gerÃ§ek zamanlÄ± kontrolÃ¼ kolaylaÅŸtÄ±rmak iÃ§in oynat, kaydet ve duraklat gibi VHS tarzÄ± komutlar verir (Video On Demand) veya bir istemciden sunucuya (Ses KaydÄ±) medya akÄ±ÅŸÄ±nÄ± kontrol eder.
>
> AkÄ±ÅŸ verilerinin iletimi, RTSP'nin bir gÃ¶revidir. Ã‡oÄŸu RTSP sunucusu, medya akÄ±ÅŸÄ± teslimi iÃ§in GerÃ§ek ZamanlÄ± TaÅŸÄ±ma ProtokolÃ¼ (RTP) ile GerÃ§ek ZamanlÄ± Kontrol ProtokolÃ¼ (RTCP) kullanÄ±r. Bununla birlikte, bazÄ± satÄ±cÄ±lar Ã¶zel taÅŸÄ±ma protokolleri uygular. Ã–rneÄŸin, RealNetworks'in RTSP sunucu yazÄ±lÄ±mÄ± ayrÄ±ca RealNetworks'Ã¼n Ã¶zel Real Data Transport (RDT) protokolÃ¼nÃ¼ kullanÄ±r.

**VarsayÄ±lan portlar:** 554,8554
```
PORT    STATE SERVICE
554/tcp open  rtsp
```
## Ana Detaylar

**RTSP**, medya yayÄ±nÄ± iÃ§in Ã¶zel olarak tasarlanmÄ±ÅŸ olan HTTP'ye benzer bir protokoldÃ¼r. Basit bir spesifikasyonla tanÄ±mlanmÄ±ÅŸtÄ±r ve burada bulunabilir:

[RTSP - RFC2326](https://tools.ietf.org/html/rfc2326)

Cihazlar, **kimlik doÄŸrulama yapÄ±lmamÄ±ÅŸ** veya **kimlik doÄŸrulamasÄ± yapÄ±lmÄ±ÅŸ** eriÅŸime izin verebilir. Kontrol etmek iÃ§in "DESCRIBE" isteÄŸi gÃ¶nderilir. Temel bir Ã¶rnek aÅŸaÄŸÄ±da gÃ¶sterilmiÅŸtir:

`DESCRIBE rtsp://<ip>:<port> RTSP/1.0\r\nCSeq: 2\r\n`

DoÄŸru biÃ§imlendirme iÃ§in tutarlÄ± bir yanÄ±t iÃ§in Ã§ift "\r\n" iÃ§ermesi gerektiÄŸini unutmayÄ±n. "200 OK" yanÄ±tÄ±, **kimlik doÄŸrulamasÄ± yapÄ±lmamÄ±ÅŸ eriÅŸimi** gÃ¶sterirken, "401 Unauthorized" kimlik doÄŸrulamasÄ±nÄ±n gerekliliÄŸini ve **Temel** veya **Digest kimlik doÄŸrulamasÄ±** gerektiÄŸini ortaya koyar.

**Temel kimlik doÄŸrulamasÄ±** iÃ§in, kullanÄ±cÄ± adÄ± ve ÅŸifreyi base64 ile kodlarsÄ±nÄ±z ve isteÄŸe ÅŸu ÅŸekilde dahil edersiniz:

`DESCRIBE rtsp://<ip>:<port> RTSP/1.0\r\nCSeq: 2\r\nAuthorization: Basic YWRtaW46MTIzNA==\r\n`

Bu Ã¶rnekte kimlik bilgileri olarak "admin" ve "1234" kullanÄ±lmÄ±ÅŸtÄ±r. Ä°ÅŸte bÃ¶yle bir isteÄŸi gÃ¶ndermek iÃ§in bir **Python betiÄŸi**:
```python
import socket
req = "DESCRIBE rtsp://<ip>:<port> RTSP/1.0\r\nCSeq: 2\r\nAuthorization: Basic YWRtaW46MTIzNA==\r\n\r\n"
s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.connect(("192.168.1.1", 554))
s.sendall(req)
data = s.recv(1024)
print(data)
```
**Temel kimlik doÄŸrulama** daha basit ve tercih edilir. **Ã–zet kimlik doÄŸrulama** ise "401 Yetkisiz" yanÄ±tÄ±nda saÄŸlanan kimlik doÄŸrulama ayrÄ±ntÄ±larÄ±nÄ±n dikkatli bir ÅŸekilde ele alÄ±nmasÄ±nÄ± gerektirir.

Bu genel bakÄ±ÅŸ, baÅŸlangÄ±Ã§ denemelerinde basitlik ve pratiklik aÃ§Ä±sÄ±ndan **Temel kimlik doÄŸrulama** Ã¼zerinde odaklanarak RTSP akÄ±ÅŸlarÄ±na eriÅŸim sÃ¼recini basitleÅŸtirir.


## NumaralandÄ±rma

GeÃ§erli yÃ¶ntemler ve URL'ler hakkÄ±nda bilgi edinelim ve iÃ§eriÄŸe eriÅŸmek iÃ§in gerekirse eriÅŸimi kaba kuvvet uygulayalÄ±m.
```bash
nmap -sV --script "rtsp-*" -p <PORT> <IP>
```
### [Brute Force](../generic-methodologies-and-resources/brute-force.md#rtsp)

### **DiÄŸer kullanÄ±ÅŸlÄ± programlar**

Brute force iÃ§in: [https://github.com/Tek-Security-Group/rtsp\_authgrinder](https://github.com/Tek-Security-Group/rtsp\_authgrinder)

[**Cameradar**](https://github.com/Ullaakut/cameradar)

* EriÅŸilebilir hedefteki aÃ§Ä±k RTSP sunucularÄ±nÄ± tespit eder
* Genel bilgilerini alÄ±r (ana bilgisayar adÄ±, port, kamera modeli, vb.)
* AkÄ±ÅŸ rotasÄ±nÄ± (Ã¶rneÄŸin /live.sdp) elde etmek iÃ§in otomatik sÃ¶zlÃ¼k saldÄ±rÄ±larÄ± baÅŸlatÄ±r
* KameralarÄ±n kullanÄ±cÄ± adÄ± ve ÅŸifresini elde etmek iÃ§in otomatik sÃ¶zlÃ¼k saldÄ±rÄ±larÄ± baÅŸlatÄ±r
* AkÄ±ÅŸlarÄ±n geÃ§erli olup olmadÄ±ÄŸÄ±nÄ± kontrol etmek ve iÃ§eriÄŸinin hÄ±zlÄ± bir Ã¶nizlemesini yapmak iÃ§in kÃ¼Ã§Ã¼k resimler oluÅŸturur
* DoÄŸru bir ÅŸekilde kodlanÄ±p kodlanmadÄ±ÄŸÄ±nÄ± kontrol etmek iÃ§in bir Gstreamer pipeline oluÅŸturmaya Ã§alÄ±ÅŸÄ±r
* Cameradar'Ä±n elde edebileceÄŸi tÃ¼m bilgilerin bir Ã¶zetini yazdÄ±rÄ±r

## Referanslar
* [https://en.wikipedia.org/wiki/Real\_Time\_Streaming\_Protocol](https://en.wikipedia.org/wiki/Real\_Time\_Streaming\_Protocol)
* [http://badguyfu.net/rtsp-brute-forcing-for-fun-and-naked-pictures/](http://badguyfu.net/rtsp-brute-forcing-for-fun-and-naked-pictures/)
* [https://github.com/Ullaakut/cameradar](https://github.com/Ullaakut/cameradar)

<details>

<summary><strong>AWS hackleme konusunda sÄ±fÄ±rdan kahramana dÃ¶nÃ¼ÅŸmek iÃ§in</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>'Ä± Ã¶ÄŸrenin!</strong></summary>

HackTricks'i desteklemenin diÄŸer yollarÄ±:

* Åirketinizi HackTricks'te **reklamÄ±nÄ±zÄ± gÃ¶rmek** veya **HackTricks'i PDF olarak indirmek** iÃ§in [**ABONELÄ°K PLANLARINI**](https://github.com/sponsors/carlospolop) kontrol edin!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* Ã–zel [**NFT'lerden**](https://opensea.io/collection/the-peass-family) oluÅŸan koleksiyonumuz olan [**The PEASS Family**](https://opensea.io/collection/the-peass-family)'yi keÅŸfedin
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katÄ±lÄ±n** veya **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)'u **takip edin**.
* **Hacking hilelerinizi** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna PR gÃ¶ndererek paylaÅŸÄ±n.

</details>
