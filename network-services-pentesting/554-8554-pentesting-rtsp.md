# 554,8554 - Pentesting RTSP

<details>

<summary><strong>NauÄite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Drugi naÄini podrÅ¡ke HackTricks-u:

* Ako Å¾elite da vidite **vaÅ¡u kompaniju reklamiranu na HackTricks-u** ili **preuzmete HackTricks u PDF formatu** proverite [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Nabavite [**zvaniÄni PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Otkrijte [**The PEASS Family**](https://opensea.io/collection/the-peass-family), naÅ¡u kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* **PridruÅ¾ite se** ğŸ’¬ [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili nas **pratite** na **Twitter-u** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Podelite svoje hakovanje trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>

## Osnovne informacije

Sa [wikipedia](https://en.wikipedia.org/wiki/Real\_Time\_Streaming\_Protocol):

> **Real Time Streaming Protocol** (**RTSP**) je kontrolni mreÅ¾ni protokol dizajniran za upotrebu u sistemima zabave i komunikacije kako bi se kontrolisali serveri za strujanje medija. Protokol se koristi za uspostavljanje i kontrolu medijskih sesija izmeÄ‘u krajnjih taÄaka. Klijenti medijskih servera izdaju komande sliÄne VHS-u, kao Å¡to su reprodukcija, snimanje i pauza, kako bi omoguÄ‡ili realno vreme kontrole strujanja medija sa servera do klijenta (Video na zahtev) ili od klijenta do servera (Snimanje glasa).
>
> Samo slanje strujnih podataka nije zadatak RTSP-a. VeÄ‡ina RTSP servera koristi Real-time Transport Protocol (RTP) u kombinaciji sa Real-time Control Protocol (RTCP) za isporuku medijskog strujanja. MeÄ‘utim, neki proizvoÄ‘aÄi implementiraju vlasite transportne protokole. Na primer, RTSP server softver od RealNetworks-a takoÄ‘e koristi RealNetworks-ov vlasiti Real Data Transport (RDT).

**Podrazumevani portovi:** 554,8554
```
PORT    STATE SERVICE
554/tcp open  rtsp
```
## KljuÄni detalji

**RTSP** je sliÄan HTTP-u, ali je posebno dizajniran za strujanje medija. Definisan je u jednostavnoj specifikaciji koja se moÅ¾e pronaÄ‡i ovde:

[RTSP - RFC2326](https://tools.ietf.org/html/rfc2326)

UreÄ‘aji mogu dozvoliti **neautentifikovan** ili **autentifikovan** pristup. Da biste proverili, Å¡alje se zahtev "DESCRIBE". Osnovni primer je prikazan ispod:

`DESCRIBE rtsp://<ip>:<port> RTSP/1.0\r\nCSeq: 2\r\n`

Zapamtite, ispravno formatiranje ukljuÄuje dvostruki "\r\n" za dosledan odgovor. Odgovor "200 OK" ukazuje na **neautentifikovan pristup**, dok "401 Unauthorized" signalizira potrebu za autentifikacijom, otkrivajuÄ‡i da li je potrebna **osnovna autentifikacija** ili **digest autentifikacija**.

Za **osnovnu autentifikaciju**, kodirate korisniÄko ime i lozinku u base64 i ukljuÄujete ih u zahtev na sledeÄ‡i naÄin:

`DESCRIBE rtsp://<ip>:<port> RTSP/1.0\r\nCSeq: 2\r\nAuthorization: Basic YWRtaW46MTIzNA==\r\n`

Ovaj primer koristi "admin" i "1234" za pristupne podatke. Evo **Python skripta** za slanje takvog zahteva:
```python
import socket
req = "DESCRIBE rtsp://<ip>:<port> RTSP/1.0\r\nCSeq: 2\r\nAuthorization: Basic YWRtaW46MTIzNA==\r\n\r\n"
s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.connect(("192.168.1.1", 554))
s.sendall(req)
data = s.recv(1024)
print(data)
```
**Osnovna autentifikacija** je jednostavnija i preferirana. **Digest autentifikacija** zahteva paÅ¾ljivo rukovanje detaljima autentifikacije koji se pruÅ¾aju u odgovoru "401 Unauthorized".

Ovaj pregled pojednostavljuje proces pristupa RTSP tokovima, fokusirajuÄ‡i se na **Osnovnu autentifikaciju** zbog njene jednostavnosti i praktiÄnosti pri prvom pokuÅ¡aju.

## Nabrojavanje

PokuÅ¡ajmo da dobijemo informacije o podrÅ¾anim metodama i URL-ovima i pokuÅ¡ajmo da brute-force pristup (ako je potrebno) kako bismo dobili pristup sadrÅ¾aju.
```bash
nmap -sV --script "rtsp-*" -p <PORT> <IP>
```
### [Brute Force](../generic-methodologies-and-resources/brute-force.md#rtsp)

### **Drugi korisni programi**

Za brute force: [https://github.com/Tek-Security-Group/rtsp\_authgrinder](https://github.com/Tek-Security-Group/rtsp\_authgrinder)

[**Cameradar**](https://github.com/Ullaakut/cameradar)

* Otkrivanje otvorenih RTSP hostova na bilo kojoj dostupnoj meti
* Dobijanje njihovih javnih informacija (ime hosta, port, model kamere, itd.)
* Pokretanje automatskih napada rjeÄnikom kako bi se dobila putanja njihovog streama (na primjer /live.sdp)
* Pokretanje automatskih napada rjeÄnikom kako bi se dobili korisniÄko ime i lozinka kamere
* Generisanje sliÄica da bi se provjerilo da li su streamovi ispravni i da bi se brzo pregledao njihov sadrÅ¾aj
* PokuÅ¡aj kreiranja Gstreamer pipeline-a da bi se provjerilo da li su pravilno kodirani
* Ispis saÅ¾etka svih informacija koje je Cameradar mogao dobiti

## Reference
* [https://en.wikipedia.org/wiki/Real\_Time\_Streaming\_Protocol](https://en.wikipedia.org/wiki/Real\_Time\_Streaming\_Protocol)
* [http://badguyfu.net/rtsp-brute-forcing-for-fun-and-naked-pictures/](http://badguyfu.net/rtsp-brute-forcing-for-fun-and-naked-pictures/)
* [https://github.com/Ullaakut/cameradar](https://github.com/Ullaakut/cameradar)

<details>

<summary><strong>NauÄite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Drugi naÄini podrÅ¡ke HackTricks-u:

* Ako Å¾elite vidjeti **oglaÅ¡avanje vaÅ¡e kompanije na HackTricks-u** ili **preuzeti HackTricks u PDF formatu** Provjerite [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Nabavite [**zvaniÄni PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Otkrijte [**The PEASS Family**](https://opensea.io/collection/the-peass-family), naÅ¡u kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* **PridruÅ¾ite se** ğŸ’¬ [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili nas **pratite** na **Twitter-u** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Podijelite svoje hakovanje trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>
