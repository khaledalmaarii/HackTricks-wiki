# 554,8554 - æ¸—é€æµ‹è¯• RTSP

<details>

<summary><strong>ä»é›¶å¼€å§‹å­¦ä¹  AWS é»‘å®¢æŠ€æœ¯ï¼Œæˆä¸ºä¸“å®¶</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTEï¼ˆHackTricks AWS çº¢é˜Ÿä¸“å®¶ï¼‰</strong></a><strong>ï¼</strong></summary>

æ”¯æŒ HackTricks çš„å…¶ä»–æ–¹å¼ï¼š

* å¦‚æœæ‚¨æƒ³çœ‹åˆ°æ‚¨çš„**å…¬å¸åœ¨ HackTricks ä¸­åšå¹¿å‘Š**æˆ–**ä¸‹è½½ PDF ç‰ˆæœ¬çš„ HackTricks**ï¼Œè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* è·å–[**å®˜æ–¹ PEASS & HackTricks å•†å“**](https://peass.creator-spring.com)
* æ¢ç´¢[**PEASS å®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬çš„ç‹¬å®¶[**NFTs**](https://opensea.io/collection/the-peass-family)
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**ç”µæŠ¥ç¾¤ç»„**](https://t.me/peass) æˆ–åœ¨ **Twitter** ä¸Šå…³æ³¨æˆ‘ä»¬ ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks\_live)**ã€‚**
* é€šè¿‡å‘ [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github ä»“åº“æäº¤ PR æ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚

</details>

## åŸºæœ¬ä¿¡æ¯

æ¥è‡ª [ç»´åŸºç™¾ç§‘](https://en.wikipedia.org/wiki/Real\_Time\_Streaming\_Protocol)ï¼š

> **å®æ—¶æµåª’ä½“ä¼ è¾“åè®®**ï¼ˆ**RTSP**ï¼‰æ˜¯ä¸€ç§ç½‘ç»œæ§åˆ¶åè®®ï¼Œæ—¨åœ¨ç”¨äºå¨±ä¹å’Œé€šä¿¡ç³»ç»Ÿä¸­æ§åˆ¶æµåª’ä½“æœåŠ¡å™¨ã€‚è¯¥åè®®ç”¨äºåœ¨ç«¯ç‚¹ä¹‹é—´å»ºç«‹å’Œæ§åˆ¶åª’ä½“ä¼šè¯ã€‚åª’ä½“æœåŠ¡å™¨çš„å®¢æˆ·ç«¯å‘å‡ºç±»ä¼¼ VHS é£æ ¼çš„å‘½ä»¤ï¼Œå¦‚æ’­æ”¾ã€å½•åˆ¶å’Œæš‚åœï¼Œä»¥ä¾¿å®æ—¶æ§åˆ¶ä»æœåŠ¡å™¨æµå¼ä¼ è¾“åˆ°å®¢æˆ·ç«¯ï¼ˆè§†é¢‘ç‚¹æ’­ï¼‰æˆ–ä»å®¢æˆ·ç«¯åˆ°æœåŠ¡å™¨ï¼ˆè¯­éŸ³å½•åˆ¶ï¼‰çš„åª’ä½“æµã€‚
>
> æµåª’ä½“æ•°æ®çš„ä¼ è¾“æœ¬èº«ä¸æ˜¯ RTSP çš„ä»»åŠ¡ã€‚å¤§å¤šæ•° RTSP æœåŠ¡å™¨ä¸å®æ—¶ä¼ è¾“åè®®ï¼ˆRTPï¼‰ç»“åˆä½¿ç”¨å®æ—¶æ§åˆ¶åè®®ï¼ˆRTCPï¼‰è¿›è¡Œåª’ä½“æµä¼ é€’ã€‚ä½†æ˜¯ï¼Œä¸€äº›ä¾›åº”å•†å®ç°äº†ä¸“æœ‰çš„ä¼ è¾“åè®®ã€‚ä¾‹å¦‚ï¼ŒRealNetworks çš„ RTSP æœåŠ¡å™¨è½¯ä»¶è¿˜ä½¿ç”¨äº† RealNetworks çš„ä¸“æœ‰å®æ—¶æ•°æ®ä¼ è¾“ï¼ˆRDTï¼‰ã€‚

**é»˜è®¤ç«¯å£ï¼š** 554, 8554
```
PORT    STATE SERVICE
554/tcp open  rtsp
```
## å…³é”®ç»†èŠ‚

**RTSP** ç±»ä¼¼äº HTTPï¼Œä½†ä¸“é—¨è®¾è®¡ç”¨äºåª’ä½“æµã€‚å®ƒåœ¨ä¸€ä»½ç®€å•çš„è§„èŒƒä¸­å®šä¹‰ï¼Œå¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°ï¼š

[RTSP â€“ RFC2326](https://tools.ietf.org/html/rfc2326)

è®¾å¤‡å¯èƒ½å…è®¸**æœªç»èº«ä»½éªŒè¯**æˆ–**ç»è¿‡èº«ä»½éªŒè¯**çš„è®¿é—®ã€‚è¦æ£€æŸ¥ï¼Œä¼šå‘é€ä¸€ä¸ª "DESCRIBE" è¯·æ±‚ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªåŸºæœ¬ç¤ºä¾‹ï¼š

`DESCRIBE rtsp://<ip>:<port> RTSP/1.0\r\nCSeq: 2\r`

è¯·è®°ä½ï¼Œæ­£ç¡®çš„æ ¼å¼åŒ…æ‹¬ä¸€ä¸ªåŒ "\r\n" ä»¥è·å¾—ä¸€è‡´çš„å“åº”ã€‚"200 OK" å“åº”è¡¨ç¤º**æœªç»èº«ä»½éªŒè¯**çš„è®¿é—®ï¼Œè€Œ "401 Unauthorized" è¡¨ç¤ºéœ€è¦è¿›è¡Œèº«ä»½éªŒè¯ï¼Œæ­ç¤ºäº†æ˜¯å¦éœ€è¦**åŸºæœ¬èº«ä»½éªŒè¯**æˆ–**æ‘˜è¦èº«ä»½éªŒè¯**ã€‚

å¯¹äº**åŸºæœ¬èº«ä»½éªŒè¯**ï¼Œæ‚¨éœ€è¦å°†ç”¨æˆ·åå’Œå¯†ç è¿›è¡Œ base64 ç¼–ç ï¼Œå¹¶å°†å…¶åŒ…å«åœ¨è¯·æ±‚ä¸­ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

`DESCRIBE rtsp://<ip>:<port> RTSP/1.0\r\nCSeq: 2\r\nAuthorization: Basic YWRtaW46MTIzNA==\r`

æ­¤ç¤ºä¾‹ä½¿ç”¨ "admin" å’Œ "1234" ä½œä¸ºå‡­æ®ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç”¨äºå‘é€æ­¤ç±»è¯·æ±‚çš„**Python è„šæœ¬**ï¼š
```python
import socket
req = "DESCRIBE rtsp://<ip>:<port> RTSP/1.0\r\nCSeq: 2\r\nAuthorization: Basic YWRtaW46MTIzNA==\r\n\r\n"
s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.connect(("192.168.1.1", 554))
s.sendall(req)
data = s.recv(1024)
print(data)
```
**åŸºæœ¬èº«ä»½éªŒè¯**æ›´ç®€å•ä¸”æ›´å—é’çã€‚**æ‘˜è¦èº«ä»½éªŒè¯**éœ€è¦å°å¿ƒå¤„ç†â€œ401æœªç»æˆæƒâ€å“åº”ä¸­æä¾›çš„èº«ä»½éªŒè¯è¯¦ç»†ä¿¡æ¯ã€‚

æœ¬æ¦‚è¿°ç®€åŒ–äº†è®¿é—®RTSPæµçš„è¿‡ç¨‹ï¼Œé‡ç‚¹ä»‹ç»äº†**åŸºæœ¬èº«ä»½éªŒè¯**ï¼Œå› ä¸ºåœ¨æœ€åˆå°è¯•ä¸­ï¼Œå®ƒæ›´ç®€å•ä¸”å®ç”¨ã€‚

## æšä¸¾

è·å–æœ‰å…³æ”¯æŒçš„æœ‰æ•ˆæ–¹æ³•å’ŒURLçš„ä¿¡æ¯ï¼Œå¹¶å°è¯•æš´åŠ›ç ´è§£è®¿é—®ï¼ˆå¦‚æœéœ€è¦ï¼‰ä»¥è®¿é—®å†…å®¹ã€‚
```bash
nmap -sV --script "rtsp-*" -p <PORT> <IP>
```
### [æš´åŠ›ç ´è§£](../generic-methodologies-and-resources/brute-force.md#rtsp)

### **å…¶ä»–æœ‰ç”¨çš„ç¨‹åº**

ç”¨äºæš´åŠ›ç ´è§£ï¼š[https://github.com/Tek-Security-Group/rtsp\_authgrinder](https://github.com/Tek-Security-Group/rtsp\_authgrinder)

[**Cameradar**](https://github.com/Ullaakut/cameradar)

* æ£€æµ‹ä»»ä½•å¯è®¿é—®ç›®æ ‡ä¸Šçš„å¼€æ”¾RTSPä¸»æœº
* è·å–å®ƒä»¬çš„å…¬å…±ä¿¡æ¯ï¼ˆä¸»æœºåã€ç«¯å£ã€æ‘„åƒå¤´å‹å·ç­‰ï¼‰
* å¯åŠ¨è‡ªåŠ¨å­—å…¸æ”»å‡»ä»¥è·å–å®ƒä»¬çš„æµè·¯ç”±ï¼ˆä¾‹å¦‚/live.sdpï¼‰
* å¯åŠ¨è‡ªåŠ¨å­—å…¸æ”»å‡»ä»¥è·å–æ‘„åƒå¤´çš„ç”¨æˆ·åå’Œå¯†ç 
* ä»ä¸­ç”Ÿæˆç¼©ç•¥å›¾ï¼Œä»¥æ£€æŸ¥æµæ˜¯å¦æœ‰æ•ˆï¼Œå¹¶å¿«é€Ÿé¢„è§ˆå…¶å†…å®¹
* å°è¯•åˆ›å»ºä¸€ä¸ªGstreamerç®¡é“ï¼Œä»¥æ£€æŸ¥å®ƒä»¬æ˜¯å¦è¢«æ­£ç¡®ç¼–ç 
* æ‰“å°Cameradarèƒ½å¤Ÿè·å–çš„æ‰€æœ‰ä¿¡æ¯çš„æ‘˜è¦

## å‚è€ƒèµ„æ–™

* [https://en.wikipedia.org/wiki/Real\_Time\_Streaming\_Protocol](https://en.wikipedia.org/wiki/Real\_Time\_Streaming\_Protocol)
* [http://badguyfu.net/rtsp-brute-forcing-for-fun-and-naked-pictures/](http://badguyfu.net/rtsp-brute-forcing-for-fun-and-naked-pictures/)
* [https://github.com/Ullaakut/cameradar](https://github.com/Ullaakut/cameradar)

<details>

<summary><strong>ä»é›¶å¼€å§‹å­¦ä¹ AWSé»‘å®¢æŠ€æœ¯ï¼Œæˆä¸ºä¸“å®¶</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTEï¼ˆHackTricks AWS Red Team Expertï¼‰</strong></a><strong>ï¼</strong></summary>

æ”¯æŒHackTricksçš„å…¶ä»–æ–¹å¼ï¼š

* å¦‚æœæ‚¨æƒ³åœ¨HackTricksä¸­çœ‹åˆ°æ‚¨çš„**å…¬å¸å¹¿å‘Š**æˆ–**ä¸‹è½½PDFç‰ˆæœ¬çš„HackTricks**ï¼Œè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* è·å–[**å®˜æ–¹PEASS & HackTrickså‘¨è¾¹äº§å“**](https://peass.creator-spring.com)
* å‘ç°[**PEASSå®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬çš„ç‹¬å®¶[**NFTs**](https://opensea.io/collection/the-peass-family)æ”¶è—å“
* **åŠ å…¥** ğŸ’¬ [**Discordç¾¤**](https://discord.gg/hRep4RUj7f) æˆ– [**ç”µæŠ¥ç¾¤**](https://t.me/peass) æˆ–åœ¨**Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks\_live)**ä¸Šå…³æ³¨**æˆ‘ä»¬ã€‚
* é€šè¿‡å‘[**HackTricks**](https://github.com/carlospolop/hacktricks)å’Œ[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) githubä»“åº“æäº¤PRæ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚

</details>
