# 548 - æ¸—é€æµ‹è¯•è‹¹æœæ–‡ä»¶åè®®ï¼ˆAFPï¼‰

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>â˜ï¸ HackTricks Cloud â˜ï¸</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ğŸ¦ Twitter ğŸ¦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ğŸ™ï¸ Twitch ğŸ™ï¸</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ğŸ¥ Youtube ğŸ¥</strong></a></summary>

- ä½ åœ¨ä¸€å®¶**ç½‘ç»œå®‰å…¨å…¬å¸**å·¥ä½œå—ï¼Ÿæƒ³è¦åœ¨HackTricksä¸­**å®£ä¼ ä½ çš„å…¬å¸**å—ï¼Ÿæˆ–è€…ä½ æƒ³è¦**è·å–PEASSçš„æœ€æ–°ç‰ˆæœ¬æˆ–ä¸‹è½½PDFæ ¼å¼çš„HackTricks**å—ï¼Ÿè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼

- å‘ç°æˆ‘ä»¬çš„ç‹¬å®¶[**NFTs**](https://opensea.io/collection/the-peass-family)æ”¶è—å“â€”â€”[**The PEASS Family**](https://opensea.io/collection/the-peass-family)

- è·å–[**å®˜æ–¹PEASSå’ŒHackTrickså‘¨è¾¹äº§å“**](https://peass.creator-spring.com)

- **åŠ å…¥**[**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discordç¾¤ç»„**](https://discord.gg/hRep4RUj7f)æˆ–[**ç”µæŠ¥ç¾¤ç»„**](https://t.me/peass)ï¼Œæˆ–è€…**å…³æ³¨**æˆ‘åœ¨**Twitter**ä¸Šçš„[**ğŸ¦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks_live)**ã€‚**

- **é€šè¿‡å‘[hacktricksä»“åº“](https://github.com/carlospolop/hacktricks)å’Œ[hacktricks-cloudä»“åº“](https://github.com/carlospolop/hacktricks-cloud)æäº¤PRæ¥åˆ†äº«ä½ çš„é»‘å®¢æŠ€å·§**ã€‚

</details>

## åŸºæœ¬ä¿¡æ¯

**è‹¹æœæ–‡ä»¶åè®®**ï¼ˆ**AFP**ï¼‰ï¼Œå‰èº«ä¸ºAppleTalkæ–‡ä»¶åè®®ï¼Œæ˜¯ä¸€ç§ä¸“æœ‰çš„ç½‘ç»œåè®®ï¼Œæ˜¯**è‹¹æœæ–‡ä»¶æœåŠ¡**ï¼ˆ**AFS**ï¼‰çš„ä¸€éƒ¨åˆ†ï¼Œä¸ºmacOSå’Œç»å…¸Mac OSæä¾›æ–‡ä»¶æœåŠ¡ã€‚åœ¨macOSä¸­ï¼ŒAFPæ˜¯æ”¯æŒçš„å‡ ç§æ–‡ä»¶æœåŠ¡ä¹‹ä¸€ã€‚AFPç›®å‰æ”¯æŒUnicodeæ–‡ä»¶åã€POSIXå’Œè®¿é—®æ§åˆ¶åˆ—è¡¨æƒé™ã€èµ„æºåˆ†æ”¯ã€å‘½åæ‰©å±•å±æ€§å’Œé«˜çº§æ–‡ä»¶é”å®šã€‚åœ¨Mac OS 9åŠæ›´æ—©ç‰ˆæœ¬ä¸­ï¼ŒAFPæ˜¯æ–‡ä»¶æœåŠ¡çš„ä¸»è¦åè®®ã€‚

**é»˜è®¤ç«¯å£ï¼š**548
```
PORT    STATE SERVICE
548/tcp open  afp
```
## æšä¸¾

### AFP

The Apple Filing Protocol (AFP) is a network protocol used by Apple devices to share files and folders over a network. During a penetration test, enumerating AFP can provide valuable information about the target system and potential vulnerabilities.

### AFPæšä¸¾

è‹¹æœæ–‡ä»¶åè®®ï¼ˆAFPï¼‰æ˜¯è‹¹æœè®¾å¤‡ç”¨äºåœ¨ç½‘ç»œä¸Šå…±äº«æ–‡ä»¶å’Œæ–‡ä»¶å¤¹çš„ç½‘ç»œåè®®ã€‚åœ¨æ¸—é€æµ‹è¯•ä¸­ï¼Œæšä¸¾AFPå¯ä»¥æä¾›æœ‰å…³ç›®æ ‡ç³»ç»Ÿå’Œæ½œåœ¨æ¼æ´çš„å®è´µä¿¡æ¯ã€‚

#### AFP Enumeration Techniques

There are several techniques that can be used to enumerate AFP during a penetration test:

##### 1. Banner Grabbing

Banner grabbing involves connecting to the AFP service and capturing the banner message that is returned. This message often contains information about the AFP version and the operating system running on the target system.

##### 2. User Enumeration

User enumeration involves attempting to enumerate valid usernames on the target AFP service. This can be done by trying common usernames, such as "admin" or "guest," or by using a brute-force attack to guess valid usernames.

##### 3. Share Enumeration

Share enumeration involves identifying the shared folders on the target AFP service. This can be done by connecting to the AFP service and listing the available shares.

##### 4. File and Folder Enumeration

File and folder enumeration involves listing the files and folders within a shared folder on the target AFP service. This can be done by connecting to the AFP service and navigating through the directory structure.

#### AFPæšä¸¾æŠ€æœ¯

åœ¨æ¸—é€æµ‹è¯•ä¸­ï¼Œæœ‰å‡ ç§æŠ€æœ¯å¯ä»¥ç”¨æ¥æšä¸¾AFPï¼š

##### 1. æ¨ªå¹…æŠ“å–

æ¨ªå¹…æŠ“å–æ¶‰åŠè¿æ¥åˆ°AFPæœåŠ¡å¹¶æ•è·è¿”å›çš„æ¨ªå¹…æ¶ˆæ¯ã€‚è¯¥æ¶ˆæ¯é€šå¸¸åŒ…å«æœ‰å…³AFPç‰ˆæœ¬å’Œè¿è¡Œåœ¨ç›®æ ‡ç³»ç»Ÿä¸Šçš„æ“ä½œç³»ç»Ÿçš„ä¿¡æ¯ã€‚

##### 2. ç”¨æˆ·æšä¸¾

ç”¨æˆ·æšä¸¾æ¶‰åŠå°è¯•æšä¸¾ç›®æ ‡AFPæœåŠ¡ä¸Šçš„æœ‰æ•ˆç”¨æˆ·åã€‚å¯ä»¥é€šè¿‡å°è¯•å¸¸è§çš„ç”¨æˆ·åï¼ˆå¦‚â€œadminâ€æˆ–â€œguestâ€ï¼‰æˆ–ä½¿ç”¨æš´åŠ›æ”»å‡»æ¥çŒœæµ‹æœ‰æ•ˆçš„ç”¨æˆ·åæ¥å®Œæˆæ­¤æ“ä½œã€‚

##### 3. å…±äº«æšä¸¾

å…±äº«æšä¸¾æ¶‰åŠè¯†åˆ«ç›®æ ‡AFPæœåŠ¡ä¸Šçš„å…±äº«æ–‡ä»¶å¤¹ã€‚å¯ä»¥é€šè¿‡è¿æ¥åˆ°AFPæœåŠ¡å¹¶åˆ—å‡ºå¯ç”¨çš„å…±äº«æ¥å®Œæˆæ­¤æ“ä½œã€‚

##### 4. æ–‡ä»¶å’Œæ–‡ä»¶å¤¹æšä¸¾

æ–‡ä»¶å’Œæ–‡ä»¶å¤¹æšä¸¾æ¶‰åŠåˆ—å‡ºç›®æ ‡AFPæœåŠ¡ä¸Šå…±äº«æ–‡ä»¶å¤¹ä¸­çš„æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ã€‚å¯ä»¥é€šè¿‡è¿æ¥åˆ°AFPæœåŠ¡å¹¶æµè§ˆç›®å½•ç»“æ„æ¥å®Œæˆæ­¤æ“ä½œã€‚
```bash
msf> use auxiliary/scanner/afp/afp_server_info
nmap -sV --script "afp-* and not dos and not brute" -p <PORT> <IP>
```
| **åç§°**         | **æè¿°**                                                                                                                                      |
| -------------- | ------------------------------------------------------------------------------------------------------------------------------------------ |
| afp-ls         | åˆ—å‡ºå¯ç”¨çš„AFPå·å’Œæ–‡ä»¶                                                                                                                          |
| afp-path-vuln  | åˆ—å‡ºæ‰€æœ‰AFPå·å’Œæ–‡ä»¶[a](https://learning.oreilly.com/library/view/network-security-assessment/9781491911044/ch15.html#ch15fn48) |
| afp-serverinfo | æ˜¾ç¤ºAFPæœåŠ¡å™¨ä¿¡æ¯                                                                                                                              |
| afp-showmount  | åˆ—å‡ºå¯ç”¨çš„AFPå…±äº«å’Œç›¸åº”çš„ACL                                                                                                                     |

### [**æš´åŠ›ç ´è§£**](../generic-methodologies-and-resources/brute-force.md#afp)

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>â˜ï¸ HackTricksäº‘ â˜ï¸</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ğŸ¦ æ¨ç‰¹ ğŸ¦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ğŸ™ï¸ Twitch ğŸ™ï¸</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ğŸ¥ Youtube ğŸ¥</strong></a></summary>

- ä½ åœ¨ä¸€å®¶**ç½‘ç»œå®‰å…¨å…¬å¸**å·¥ä½œå—ï¼Ÿä½ æƒ³åœ¨HackTricksä¸­çœ‹åˆ°ä½ çš„**å…¬å¸å¹¿å‘Š**å—ï¼Ÿæˆ–è€…ä½ æƒ³è¦è®¿é—®**PEASSçš„æœ€æ–°ç‰ˆæœ¬æˆ–ä¸‹è½½HackTricksçš„PDF**å—ï¼Ÿè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼

- å‘ç°æˆ‘ä»¬çš„ç‹¬å®¶[**NFTs**](https://opensea.io/collection/the-peass-family)æ”¶è—å“[**The PEASS Family**](https://opensea.io/collection/the-peass-family)

- è·å–[**å®˜æ–¹PEASSå’ŒHackTrickså‘¨è¾¹äº§å“**](https://peass.creator-spring.com)

- **åŠ å…¥** [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discordç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**telegramç¾¤ç»„**](https://t.me/peass) æˆ– **å…³æ³¨**æˆ‘åœ¨**Twitter**ä¸Šçš„[**ğŸ¦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**

- **é€šè¿‡å‘[hacktricks repo](https://github.com/carlospolop/hacktricks)å’Œ[hacktricks-cloud repo](https://github.com/carlospolop/hacktricks-cloud)æäº¤PRæ¥åˆ†äº«ä½ çš„é»‘å®¢æŠ€å·§**ã€‚

</details>
