# 548 - Pentesting Apple Filing Protocol (AFP)

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}


## Basic Information

Î¤Î¿ **Apple Filing Protocol** (**AFP**), Î³Î½Ï‰ÏƒÏ„ÏŒ Ï€Î±Î»Î±Î¹ÏŒÏ„ÎµÏÎ± Ï‰Ï‚ AppleTalk Filing Protocol, ÎµÎ¯Î½Î±Î¹ Î­Î½Î± ÎµÎ¾ÎµÎ¹Î´Î¹ÎºÎµÏ…Î¼Î­Î½Î¿ Ï€ÏÏ‰Ï„ÏŒÎºÎ¿Î»Î»Î¿ Î´Î¹ÎºÏ„ÏÎ¿Ï… Ï€Î¿Ï… Ï€ÎµÏÎ¹Î»Î±Î¼Î²Î¬Î½ÎµÏ„Î±Î¹ ÏƒÏ„Î·Î½ **Apple File Service** (**AFS**). Î•Î¯Î½Î±Î¹ ÏƒÏ‡ÎµÎ´Î¹Î±ÏƒÎ¼Î­Î½Î¿ Î³Î¹Î± Î½Î± Ï€Î±ÏÎ­Ï‡ÎµÎ¹ Ï…Ï€Î·ÏÎµÏƒÎ¯ÎµÏ‚ Î±ÏÏ‡ÎµÎ¯Ï‰Î½ Î³Î¹Î± macOS ÎºÎ±Î¹ Ï„Î¿ ÎºÎ»Î±ÏƒÎ¹ÎºÏŒ Mac OS. Î¤Î¿ AFP Î¾ÎµÏ‡Ï‰ÏÎ¯Î¶ÎµÎ¹ Î³Î¹Î± Ï„Î·Î½ Ï…Ï€Î¿ÏƒÏ„Î®ÏÎ¹Î¾Î· Î¿Î½Î¿Î¼Î¬Ï„Ï‰Î½ Î±ÏÏ‡ÎµÎ¯Ï‰Î½ Unicode, Î´Î¹ÎºÎ±Î¹Ï‰Î¼Î¬Ï„Ï‰Î½ POSIX ÎºÎ±Î¹ Î»Î¹ÏƒÏ„ÏÎ½ ÎµÎ»Î­Î³Ï‡Î¿Ï… Ï€ÏÏŒÏƒÎ²Î±ÏƒÎ·Ï‚, Ï€ÏŒÏÏ‰Î½ forks, Î¿Î½Î¿Î¼Î±ÏƒÎ¼Î­Î½Ï‰Î½ ÎµÏ€ÎµÎºÏ„Î¬ÏƒÎµÏ‰Î½ Ï‡Î±ÏÎ±ÎºÏ„Î·ÏÎ¹ÏƒÏ„Î¹ÎºÏÎ½ ÎºÎ±Î¹ Ï€ÏÎ¿Î·Î³Î¼Î­Î½Ï‰Î½ Î¼Î·Ï‡Î±Î½Î¹ÏƒÎ¼ÏÎ½ ÎºÎ»ÎµÎ¹Î´ÏÎ¼Î±Ï„Î¿Ï‚ Î±ÏÏ‡ÎµÎ¯Ï‰Î½. Î‰Ï„Î±Î½ Ï„Î¿ ÎºÏÏÎ¹Î¿ Ï€ÏÏ‰Ï„ÏŒÎºÎ¿Î»Î»Î¿ Î³Î¹Î± Ï…Ï€Î·ÏÎµÏƒÎ¯ÎµÏ‚ Î±ÏÏ‡ÎµÎ¯Ï‰Î½ ÏƒÏ„Î¿ Mac OS 9 ÎºÎ±Î¹ ÏƒÎµ Ï€Î±Î»Î±Î¹ÏŒÏ„ÎµÏÎµÏ‚ ÎµÎºÎ´ÏŒÏƒÎµÎ¹Ï‚.

**Default Port:** 548
```bash
PORT    STATE SERVICE
548/tcp open  afp
```
### **Î‘Ï€Î±ÏÎ¯Î¸Î¼Î·ÏƒÎ·**

Î“Î¹Î± Ï„Î·Î½ Î±Ï€Î±ÏÎ¯Î¸Î¼Î·ÏƒÎ· Ï„Ï‰Î½ Ï…Ï€Î·ÏÎµÏƒÎ¹ÏÎ½ AFP, Î¿Î¹ Ï€Î±ÏÎ±ÎºÎ¬Ï„Ï‰ ÎµÎ½Ï„Î¿Î»Î­Ï‚ ÎºÎ±Î¹ ÏƒÎµÎ½Î¬ÏÎ¹Î± ÎµÎ¯Î½Î±Î¹ Ï‡ÏÎ®ÏƒÎ¹Î¼Î±:
```bash
msf> use auxiliary/scanner/afp/afp_server_info
nmap -sV --script "afp-* and not dos and not brute" -p <PORT> <IP>
```
**Scripts and Their Descriptions:**

- **afp-ls**: Î‘Ï…Ï„ÏŒ Ï„Î¿ ÏƒÎµÎ½Î¬ÏÎ¹Î¿ Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹ÎµÎ¯Ï„Î±Î¹ Î³Î¹Î± Î½Î± ÎºÎ±Ï„Î±Î³ÏÎ¬ÏˆÎµÎ¹ Ï„Î¿Ï…Ï‚ Î´Î¹Î±Î¸Î­ÏƒÎ¹Î¼Î¿Ï…Ï‚ ÏŒÎ³ÎºÎ¿Ï…Ï‚ ÎºÎ±Î¹ Î±ÏÏ‡ÎµÎ¯Î± AFP.
- **afp-path-vuln**: ÎšÎ±Ï„Î±Î³ÏÎ¬Ï†ÎµÎ¹ ÏŒÎ»Î¿Ï…Ï‚ Ï„Î¿Ï…Ï‚ ÏŒÎ³ÎºÎ¿Ï…Ï‚ ÎºÎ±Î¹ Ï„Î± Î±ÏÏ‡ÎµÎ¯Î± AFP, ÎµÏ€Î¹ÏƒÎ·Î¼Î±Î¯Î½Î¿Î½Ï„Î±Ï‚ Ï€Î¹Î¸Î±Î½Î­Ï‚ ÎµÏ…Ï€Î¬Î¸ÎµÎ¹ÎµÏ‚.
- **afp-serverinfo**: Î Î±ÏÎ­Ï‡ÎµÎ¹ Î»ÎµÏ€Ï„Î¿Î¼ÎµÏÎµÎ¯Ï‚ Ï€Î»Î·ÏÎ¿Ï†Î¿ÏÎ¯ÎµÏ‚ ÏƒÏ‡ÎµÏ„Î¹ÎºÎ¬ Î¼Îµ Ï„Î¿Î½ Î´Î¹Î±ÎºÎ¿Î¼Î¹ÏƒÏ„Î® AFP.
- **afp-showmount**: ÎšÎ±Ï„Î±Î³ÏÎ¬Ï†ÎµÎ¹ Ï„Î¹Ï‚ Î´Î¹Î±Î¸Î­ÏƒÎ¹Î¼ÎµÏ‚ ÎºÎ¿Î¹Î½Î­Ï‚ AFP Î¼Î±Î¶Î¯ Î¼Îµ Ï„Î± Î±Î½Ï„Î¯ÏƒÏ„Î¿Î¹Ï‡Î± ACL Ï„Î¿Ï…Ï‚.

### [**Brute Force**](../generic-methodologies-and-resources/brute-force.md#afp)

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
