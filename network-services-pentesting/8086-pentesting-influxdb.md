# 8086 - Pentesting InfluxDB

<figure><img src="../.gitbook/assets/image (48).png" alt=""><figcaption></figcaption></figure>

\
[**Trickest**](https://trickest.com/?utm_source=hacktricks&utm_medium=text&utm_campaign=ppc&utm_content=8086-pentesting-influxdb)ë¥¼ ì‚¬ìš©í•˜ì—¬ ì„¸ê³„ì—ì„œ **ê°€ì¥ ì§„ë³´ëœ** ì»¤ë®¤ë‹ˆí‹° ë„êµ¬ë¡œ êµ¬ë™ë˜ëŠ” **ì›Œí¬í”Œë¡œìš°**ë¥¼ ì‰½ê²Œ êµ¬ì¶•í•˜ê³  **ìë™í™”**í•˜ì„¸ìš”.\
ì˜¤ëŠ˜ ë°”ë¡œ ì ‘ê·¼í•˜ì„¸ìš”:

{% embed url="https://trickest.com/?utm_source=hacktricks&utm_medium=banner&utm_campaign=ppc&utm_content=8086-pentesting-influxdb" %}

{% hint style="success" %}
AWS í•´í‚¹ ë°°ìš°ê¸° ë° ì—°ìŠµí•˜ê¸°:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
GCP í•´í‚¹ ë°°ìš°ê¸° ë° ì—°ìŠµí•˜ê¸°: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks ì§€ì›í•˜ê¸°</summary>

* [**êµ¬ë… ê³„íš**](https://github.com/sponsors/carlospolop) í™•ì¸í•˜ê¸°!
* **ğŸ’¬ [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— ì°¸ì—¬í•˜ê±°ë‚˜ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**ë¥¼ íŒ”ë¡œìš°í•˜ì„¸ìš”.**
* **[**HackTricks**](https://github.com/carlospolop/hacktricks) ë° [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) ê¹ƒí—ˆë¸Œ ë¦¬í¬ì§€í† ë¦¬ì— PRì„ ì œì¶œí•˜ì—¬ í•´í‚¹ íŒì„ ê³µìœ í•˜ì„¸ìš”.**

</details>
{% endhint %}

## ê¸°ë³¸ ì •ë³´

**InfluxDB**ëŠ” InfluxDataì—ì„œ ê°œë°œí•œ ì˜¤í”ˆ ì†ŒìŠ¤ **ì‹œê³„ì—´ ë°ì´í„°ë² ì´ìŠ¤ (TSDB)**ì…ë‹ˆë‹¤. TSDBëŠ” íƒ€ì„ìŠ¤íƒ¬í”„-ê°’ ìŒìœ¼ë¡œ êµ¬ì„±ëœ ì‹œê³„ì—´ ë°ì´í„°ë¥¼ ì €ì¥í•˜ê³  ì œê³µí•˜ëŠ” ë° ìµœì í™”ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì¼ë°˜ ëª©ì ì˜ ë°ì´í„°ë² ì´ìŠ¤ì— ë¹„í•´ TSDBëŠ” ì‹œê³„ì—´ ë°ì´í„°ì…‹ì— ëŒ€í•œ **ì €ì¥ ê³µê°„**ê³¼ **ì„±ëŠ¥**ì—ì„œ ìƒë‹¹í•œ ê°œì„ ì„ ì œê³µí•©ë‹ˆë‹¤. ì´ë“¤ì€ íŠ¹ìˆ˜í•œ ì••ì¶• ì•Œê³ ë¦¬ì¦˜ì„ ì‚¬ìš©í•˜ë©°, ì˜¤ë˜ëœ ë°ì´í„°ë¥¼ ìë™ìœ¼ë¡œ ì œê±°í•˜ë„ë¡ êµ¬ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. íŠ¹ìˆ˜í•œ ë°ì´í„°ë² ì´ìŠ¤ ì¸ë±ìŠ¤ëŠ” ì¿¼ë¦¬ ì„±ëŠ¥ë„ í–¥ìƒì‹œí‚µë‹ˆë‹¤.

**ê¸°ë³¸ í¬íŠ¸**: 8086
```
PORT     STATE SERVICE VERSION
8086/tcp open  http    InfluxDB http admin 1.7.5
```
## Enumeration

íœí…ŒìŠ¤í„°ì˜ ê´€ì ì—ì„œ ë³¼ ë•Œ, ì´ê²ƒì€ ë¯¼ê°í•œ ì •ë³´ë¥¼ ì €ì¥í•  ìˆ˜ ìˆëŠ” ë˜ ë‹¤ë¥¸ ë°ì´í„°ë² ì´ìŠ¤ì´ë¯€ë¡œ ëª¨ë“  ì •ë³´ë¥¼ ë¤í”„í•˜ëŠ” ë°©ë²•ì„ ì•„ëŠ” ê²ƒì´ í¥ë¯¸ë¡­ìŠµë‹ˆë‹¤.

### Authentication

InfluxDBëŠ” ì¸ì¦ì´ í•„ìš”í•  ìˆ˜ë„ ìˆê³  í•„ìš”í•˜ì§€ ì•Šì„ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.
```bash
# Try unauthenticated
influx -host 'host name' -port 'port #'
> use _internal
```
ë§Œì•½ ë‹¤ìŒê³¼ ê°™ì€ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ë©´: `ERR: unable to parse authentication credentials` ì´ëŠ” **ìê²© ì¦ëª…ì„ ê¸°ëŒ€í•˜ê³  ìˆë‹¤ëŠ” ì˜ë¯¸**ì…ë‹ˆë‹¤.
```
influx â€“username influx â€“password influx_pass
```
There was a vulnerability influxdb that allowed to bypass the authentication: [**CVE-2019-20933**](https://github.com/LorenzoTullini/InfluxDB-Exploit-CVE-2019-20933)

### Manual Enumeration

ì´ ì˜ˆì œì˜ ì •ë³´ëŠ” [**ì—¬ê¸°**](https://oznetnerd.com/2017/06/11/getting-know-influxdb/)ì—ì„œ ê°€ì ¸ì™”ìŠµë‹ˆë‹¤.

#### Show databases

ë°œê²¬ëœ ë°ì´í„°ë² ì´ìŠ¤ëŠ” `telegraf`ì™€ `internal`ì…ë‹ˆë‹¤ (ì´ê²ƒì€ ì–´ë””ì—ì„œë‚˜ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤).
```bash
> show databases
name: databases
name
----
telegraf
_internal
```
#### Show tables/measurements

The [**InfluxDB documentation**](https://docs.influxdata.com/influxdb/v1.2/introduction/getting\_started/) ì„¤ëª…í•©ë‹ˆë‹¤ **measurements** InfluxDBì—ì„œ SQL í…Œì´ë¸”ê³¼ ë³‘ë ¬ì ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ **measurements**ì˜ ëª…ì¹­ì€ ê°ê°ì˜ ë‚´ìš©ê³¼ ê´€ë ¨ì´ ìˆìœ¼ë©°, ê°ê¸° íŠ¹ì • ì—”í‹°í‹°ì™€ ê´€ë ¨ëœ ë°ì´í„°ë¥¼ í¬í•¨í•˜ê³  ìˆìŠµë‹ˆë‹¤.
```bash
> show measurements
name: measurements
name
----
cpu
disk
diskio
kernel
mem
processes
swap
system
```
#### Show columns/field keys

í•„ë“œ í‚¤ëŠ” ë°ì´í„°ë² ì´ìŠ¤ì˜ **ì—´**ê³¼ ê°™ìŠµë‹ˆë‹¤.
```bash
> show field keys
name: cpu
fieldKey         fieldType
--------         ---------
usage_guest      float
usage_guest_nice float
usage_idle       float
usage_iowait     float

name: disk
fieldKey     fieldType
--------     ---------
free         integer
inodes_free  integer
inodes_total integer
inodes_used  integer

[ ... more keys ...]
```
#### Dump Table

ë§ˆì§€ë§‰ìœ¼ë¡œ **í…Œì´ë¸”ì„ ë¤í”„**í•˜ë ¤ë©´ ë‹¤ìŒê³¼ ê°™ì€ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
```bash
select * from cpu
name: cpu
time                cpu       host   usage_guest usage_guest_nice usage_idle        usage_iowait        usage_irq usage_nice usage_softirq        usage_steal usage_system        usage_user
----                ---       ----   ----------- ---------------- ----------        ------------        --------- ---------- -------------        ----------- ------------        ----------
1497018760000000000 cpu-total ubuntu 0           0                99.297893681046   0                   0         0          0                    0           0.35105315947842414 0.35105315947842414
1497018760000000000 cpu1      ubuntu 0           0                99.69909729188728 0                   0         0          0                    0           0.20060180541622202 0.10030090270811101
```
{% hint style="warning" %}
ì¸ì¦ ìš°íšŒë¥¼ í…ŒìŠ¤íŠ¸í•˜ëŠ” ê³¼ì •ì—ì„œ í…Œì´ë¸” ì´ë¦„ì´ ë‹¤ìŒê³¼ ê°™ì´ í°ë”°ì˜´í‘œë¡œ ë¬¶ì—¬ì•¼ í•œë‹¤ëŠ” ì ì´ ì£¼ëª©ë˜ì—ˆìŠµë‹ˆë‹¤: `select * from "cpu"`
{% endhint %}

### ìë™í™”ëœ ì¸ì¦
```bash
msf6 > use auxiliary/scanner/http/influxdb_enum
```
{% hint style="success" %}
AWS í•´í‚¹ ë°°ìš°ê¸° ë° ì—°ìŠµí•˜ê¸°:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
GCP í•´í‚¹ ë°°ìš°ê¸° ë° ì—°ìŠµí•˜ê¸°: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks ì§€ì›í•˜ê¸°</summary>

* [**êµ¬ë… ê³„íš**](https://github.com/sponsors/carlospolop) í™•ì¸í•˜ê¸°!
* **ğŸ’¬ [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— ì°¸ì—¬í•˜ê±°ë‚˜ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**ë¥¼ íŒ”ë¡œìš°í•˜ì„¸ìš”.**
* **[**HackTricks**](https://github.com/carlospolop/hacktricks) ë° [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) ê¹ƒí—ˆë¸Œ ë¦¬í¬ì§€í† ë¦¬ì— PRì„ ì œì¶œí•˜ì—¬ í•´í‚¹ íŠ¸ë¦­ì„ ê³µìœ í•˜ì„¸ìš”.**

</details>
{% endhint %}

<figure><img src="../.gitbook/assets/image (48).png" alt=""><figcaption></figcaption></figure>

\
[**Trickest**](https://trickest.com/?utm_source=hacktricks&utm_medium=text&utm_campaign=ppc&utm_content=8086-pentesting-influxdb)ë¥¼ ì‚¬ìš©í•˜ì—¬ ì„¸ê³„ì—ì„œ **ê°€ì¥ ì§„ë³´ëœ** ì»¤ë®¤ë‹ˆí‹° ë„êµ¬ë¡œ êµ¬ë™ë˜ëŠ” **ì›Œí¬í”Œë¡œìš°**ë¥¼ ì‰½ê²Œ êµ¬ì¶•í•˜ê³  **ìë™í™”**í•˜ì„¸ìš”.\
ì˜¤ëŠ˜ ë°”ë¡œ ì ‘ê·¼í•˜ì„¸ìš”:

{% embed url="https://trickest.com/?utm_source=hacktricks&utm_medium=banner&utm_campaign=ppc&utm_content=8086-pentesting-influxdb" %}
