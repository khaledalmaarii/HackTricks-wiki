# 8086 - Pentesting InfluxDB

<figure><img src="../.gitbook/assets/image (48).png" alt=""><figcaption></figcaption></figure>

\
[**Trickest**](https://trickest.com/?utm_source=hacktricks&utm_medium=text&utm_campaign=ppc&utm_content=8086-pentesting-influxdb)ã‚’ä½¿ç”¨ã—ã¦ã€ä¸–ç•Œã§æœ€ã‚‚é«˜åº¦ãªã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ãƒ„ãƒ¼ãƒ«ã«ã‚ˆã£ã¦é§†å‹•ã•ã‚Œã‚‹**ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼**ã‚’ç°¡å˜ã«æ§‹ç¯‰ã—ã€**è‡ªå‹•åŒ–**ã—ã¾ã™ã€‚\
ä»Šã™ãã‚¢ã‚¯ã‚»ã‚¹ã‚’å–å¾—ï¼š

{% embed url="https://trickest.com/?utm_source=hacktricks&utm_medium=banner&utm_campaign=ppc&utm_content=8086-pentesting-influxdb" %}

{% hint style="success" %}
AWSãƒãƒƒã‚­ãƒ³ã‚°ã‚’å­¦ã³ã€å®Ÿè·µã™ã‚‹ï¼š<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
GCPãƒãƒƒã‚­ãƒ³ã‚°ã‚’å­¦ã³ã€å®Ÿè·µã™ã‚‹ï¼š<img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricksã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹</summary>

* [**ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ãƒ—ãƒ©ãƒ³**](https://github.com/sponsors/carlospolop)ã‚’ç¢ºèªã—ã¦ãã ã•ã„ï¼
* **ğŸ’¬ [**Discordã‚°ãƒ«ãƒ¼ãƒ—**](https://discord.gg/hRep4RUj7f)ã¾ãŸã¯[**Telegramã‚°ãƒ«ãƒ¼ãƒ—**](https://t.me/peass)ã«å‚åŠ ã™ã‚‹ã‹ã€**Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**ã‚’ãƒ•ã‚©ãƒ­ãƒ¼ã—ã¦ãã ã•ã„ã€‚**
* **ãƒãƒƒã‚­ãƒ³ã‚°ã®ãƒˆãƒªãƒƒã‚¯ã‚’å…±æœ‰ã™ã‚‹ã«ã¯ã€[**HackTricks**](https://github.com/carlospolop/hacktricks)ãŠã‚ˆã³[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)ã®GitHubãƒªãƒã‚¸ãƒˆãƒªã«PRã‚’æå‡ºã—ã¦ãã ã•ã„ã€‚**

</details>
{% endhint %}

## åŸºæœ¬æƒ…å ±

**InfluxDB**ã¯ã€InfluxDataã«ã‚ˆã£ã¦é–‹ç™ºã•ã‚ŒãŸã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã®**æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼ˆTSDBï¼‰**ã§ã™ã€‚TSDBã¯ã€ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã¨å€¤ã®ãƒšã‚¢ã§æ§‹æˆã•ã‚Œã‚‹æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜ã¨æä¾›ã«æœ€é©åŒ–ã•ã‚Œã¦ã„ã¾ã™ã€‚ä¸€èˆ¬çš„ãªãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¨æ¯”è¼ƒã—ã¦ã€TSDBã¯æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã®**ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚¹ãƒšãƒ¼ã‚¹**ã¨**ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**ã«ãŠã„ã¦å¤§å¹…ãªæ”¹å–„ã‚’æä¾›ã—ã¾ã™ã€‚ç‰¹åŒ–ã—ãŸåœ§ç¸®ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚’ä½¿ç”¨ã—ã€å¤ã„ãƒ‡ãƒ¼ã‚¿ã‚’è‡ªå‹•çš„ã«å‰Šé™¤ã™ã‚‹ã‚ˆã†ã«æ§‹æˆã§ãã¾ã™ã€‚ç‰¹åŒ–ã—ãŸãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚‚ã‚¯ã‚¨ãƒªãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’å‘ä¸Šã•ã›ã¾ã™ã€‚

**ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒãƒ¼ãƒˆ**ï¼š8086
```
PORT     STATE SERVICE VERSION
8086/tcp open  http    InfluxDB http admin 1.7.5
```
## åˆ—æŒ™

ãƒšãƒ³ãƒ†ã‚¹ã‚¿ãƒ¼ã®è¦³ç‚¹ã‹ã‚‰è¦‹ã‚‹ã¨ã€ã“ã‚Œã¯æ©Ÿå¯†æƒ…å ±ã‚’ä¿å­˜ã—ã¦ã„ã‚‹å¯èƒ½æ€§ã®ã‚ã‚‹åˆ¥ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã§ã‚ã‚‹ãŸã‚ã€ã™ã¹ã¦ã®æƒ…å ±ã‚’ãƒ€ãƒ³ãƒ—ã™ã‚‹æ–¹æ³•ã‚’çŸ¥ã£ã¦ãŠãã“ã¨ã¯èˆˆå‘³æ·±ã„ã§ã™ã€‚

### èªè¨¼

InfluxDBã¯èªè¨¼ã‚’å¿…è¦ã¨ã™ã‚‹å ´åˆã¨ã—ãªã„å ´åˆãŒã‚ã‚Šã¾ã™ã€‚
```bash
# Try unauthenticated
influx -host 'host name' -port 'port #'
> use _internal
```
ã‚‚ã—ã“ã®ã‚ˆã†ãªã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸå ´åˆ: `ERR: unable to parse authentication credentials`ã€ãã‚Œã¯**èªè¨¼æƒ…å ±ã‚’æœŸå¾…ã—ã¦ã„ã‚‹**ã“ã¨ã‚’æ„å‘³ã—ã¾ã™ã€‚
```
influx â€“username influx â€“password influx_pass
```
InfluxDBã«ã¯èªè¨¼ã‚’ãƒã‚¤ãƒ‘ã‚¹ã™ã‚‹è„†å¼±æ€§ãŒã‚ã‚Šã¾ã—ãŸ: [**CVE-2019-20933**](https://github.com/LorenzoTullini/InfluxDB-Exploit-CVE-2019-20933)

### æ‰‹å‹•åˆ—æŒ™

ã“ã®ä¾‹ã®æƒ…å ±ã¯[**ã“ã¡ã‚‰**](https://oznetnerd.com/2017/06/11/getting-know-influxdb/)ã‹ã‚‰å–å¾—ã•ã‚Œã¾ã—ãŸã€‚

#### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®è¡¨ç¤º

è¦‹ã¤ã‹ã£ãŸãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¯`telegraf`ã¨`internal`ã§ã™ï¼ˆã“ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¯ã©ã“ã«ã§ã‚‚ã‚ã‚Šã¾ã™ï¼‰ã€‚
```bash
> show databases
name: databases
name
----
telegraf
_internal
```
#### ãƒ†ãƒ¼ãƒ–ãƒ«/æ¸¬å®šå€¤ã‚’è¡¨ç¤º

The [**InfluxDB documentation**](https://docs.influxdata.com/influxdb/v1.2/introduction/getting\_started/) ã¯ã€InfluxDBã®**æ¸¬å®šå€¤**ãŒSQLãƒ†ãƒ¼ãƒ–ãƒ«ã«ç›¸å½“ã™ã‚‹ã“ã¨ã‚’èª¬æ˜ã—ã¦ã„ã¾ã™ã€‚ã“ã‚Œã‚‰ã®**æ¸¬å®šå€¤**ã®åç§°ã¯ã€ãã‚Œãã‚Œã®å†…å®¹ã‚’ç¤ºã—ã¦ãŠã‚Šã€ç‰¹å®šã®ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã«é–¢é€£ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ã‚’æ ¼ç´ã—ã¦ã„ã¾ã™ã€‚
```bash
> show measurements
name: measurements
name
----
cpu
disk
diskio
kernel
mem
processes
swap
system
```
#### Show columns/field keys

ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚­ãƒ¼ã¯ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®**åˆ—**ã®ã‚ˆã†ãªã‚‚ã®ã§ã™
```bash
> show field keys
name: cpu
fieldKey         fieldType
--------         ---------
usage_guest      float
usage_guest_nice float
usage_idle       float
usage_iowait     float

name: disk
fieldKey     fieldType
--------     ---------
free         integer
inodes_free  integer
inodes_total integer
inodes_used  integer

[ ... more keys ...]
```
#### Dump Table

ãã—ã¦æœ€å¾Œã«ã€æ¬¡ã®ã‚ˆã†ã«ã—ã¦**ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ãƒ€ãƒ³ãƒ—**ã§ãã¾ã™ã€‚
```bash
select * from cpu
name: cpu
time                cpu       host   usage_guest usage_guest_nice usage_idle        usage_iowait        usage_irq usage_nice usage_softirq        usage_steal usage_system        usage_user
----                ---       ----   ----------- ---------------- ----------        ------------        --------- ---------- -------------        ----------- ------------        ----------
1497018760000000000 cpu-total ubuntu 0           0                99.297893681046   0                   0         0          0                    0           0.35105315947842414 0.35105315947842414
1497018760000000000 cpu1      ubuntu 0           0                99.69909729188728 0                   0         0          0                    0           0.20060180541622202 0.10030090270811101
```
{% hint style="warning" %}
èªè¨¼ãƒã‚¤ãƒ‘ã‚¹ã®ãƒ†ã‚¹ãƒˆã§ã¯ã€ãƒ†ãƒ¼ãƒ–ãƒ«åã¯ãƒ€ãƒ–ãƒ«ã‚¯ã‚©ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã§å›²ã‚€å¿…è¦ãŒã‚ã‚‹ã“ã¨ãŒç¢ºèªã•ã‚Œã¾ã—ãŸã€‚ä¾‹: `select * from "cpu"`
{% endhint %}

### è‡ªå‹•èªè¨¼
```bash
msf6 > use auxiliary/scanner/http/influxdb_enum
```
{% hint style="success" %}
AWSãƒãƒƒã‚­ãƒ³ã‚°ã‚’å­¦ã³ã€å®Ÿè·µã™ã‚‹:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
GCPãƒãƒƒã‚­ãƒ³ã‚°ã‚’å­¦ã³ã€å®Ÿè·µã™ã‚‹: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricksã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹</summary>

* [**ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ãƒ—ãƒ©ãƒ³**](https://github.com/sponsors/carlospolop)ã‚’ç¢ºèªã—ã¦ãã ã•ã„!
* **ğŸ’¬ [**Discordã‚°ãƒ«ãƒ¼ãƒ—**](https://discord.gg/hRep4RUj7f)ã¾ãŸã¯[**ãƒ†ãƒ¬ã‚°ãƒ©ãƒ ã‚°ãƒ«ãƒ¼ãƒ—**](https://t.me/peass)ã«å‚åŠ ã™ã‚‹ã‹ã€**Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**ã‚’ãƒ•ã‚©ãƒ­ãƒ¼ã—ã¦ãã ã•ã„ã€‚**
* **[**HackTricks**](https://github.com/carlospolop/hacktricks)ãŠã‚ˆã³[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)ã®githubãƒªãƒã‚¸ãƒˆãƒªã«PRã‚’æå‡ºã—ã¦ãƒãƒƒã‚­ãƒ³ã‚°ãƒˆãƒªãƒƒã‚¯ã‚’å…±æœ‰ã—ã¦ãã ã•ã„ã€‚**

</details>
{% endhint %}

<figure><img src="../.gitbook/assets/image (48).png" alt=""><figcaption></figcaption></figure>

\
[**Trickest**](https://trickest.com/?utm_source=hacktricks&utm_medium=text&utm_campaign=ppc&utm_content=8086-pentesting-influxdb)ã‚’ä½¿ç”¨ã—ã¦ã€ä¸–ç•Œã§æœ€ã‚‚å…ˆé€²çš„ãªã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ãƒ„ãƒ¼ãƒ«ã«ã‚ˆã£ã¦é§†å‹•ã•ã‚Œã‚‹**ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’ç°¡å˜ã«æ§‹ç¯‰ã—ã€è‡ªå‹•åŒ–**ã—ã¾ã™ã€‚\
ä»Šã™ãã‚¢ã‚¯ã‚»ã‚¹ã‚’å–å¾—:

{% embed url="https://trickest.com/?utm_source=hacktricks&utm_medium=banner&utm_campaign=ppc&utm_content=8086-pentesting-influxdb" %}
