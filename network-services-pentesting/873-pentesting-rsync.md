# 873 - Pentesting Rsync

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## **Temel Bilgiler**

From [wikipedia](https://en.wikipedia.org/wiki/Rsync):

> **rsync**, bir bilgisayar ile harici bir sabit disk arasÄ±nda ve [aÄŸ](https://en.wikipedia.org/wiki/Computer\_network) [bilgisayarlarÄ±](https://en.wikipedia.org/wiki/Computer) arasÄ±nda [dosyalarÄ±](https://en.wikipedia.org/wiki/Computer\_file) [verimli bir ÅŸekilde](https://en.wikipedia.org/wiki/File\_transfer) [aktarmak](https://en.wikipedia.org/wiki/File\_transfer) ve [senkronize etmek](https://en.wikipedia.org/wiki/File\_synchronization) iÃ§in bir yardÄ±mcÄ± programdÄ±r; dosyalarÄ±n [deÄŸiÅŸtirilme zamanlarÄ±nÄ±](https://en.wikipedia.org/wiki/Timestamping\_\(computing\)) ve boyutlarÄ±nÄ± karÅŸÄ±laÅŸtÄ±rarak Ã§alÄ±ÅŸÄ±r.[\[3\]](https://en.wikipedia.org/wiki/Rsync#cite\_note-man\_page-3) Genellikle [Unix benzeri](https://en.wikipedia.org/wiki/Unix-like) [iÅŸletim sistemlerinde](https://en.wikipedia.org/wiki/Operating\_system) bulunur. Rsync algoritmasÄ±, [delta kodlama](https://en.wikipedia.org/wiki/Delta\_encoding) tÃ¼rÃ¼dÃ¼r ve aÄŸ kullanÄ±mÄ±nÄ± minimize etmek iÃ§in kullanÄ±lÄ±r. [Zlib](https://en.wikipedia.org/wiki/Zlib) ek [veri sÄ±kÄ±ÅŸtÄ±rmasÄ±](https://en.wikipedia.org/wiki/Data\_compression) iÃ§in kullanÄ±labilir,[\[3\]](https://en.wikipedia.org/wiki/Rsync#cite\_note-man\_page-3) ve [SSH](https://en.wikipedia.org/wiki/Secure\_Shell) veya [stunnel](https://en.wikipedia.org/wiki/Stunnel) gÃ¼venlik iÃ§in kullanÄ±labilir.

**VarsayÄ±lan port:** 873
```
PORT    STATE SERVICE REASON
873/tcp open  rsync   syn-ack
```
## Enumeration

### Banner & Manuel iletiÅŸim
```bash
nc -vn 127.0.0.1 873
(UNKNOWN) [127.0.0.1] 873 (rsync) open
@RSYNCD: 31.0        <--- You receive this banner with the version from the server
@RSYNCD: 31.0        <--- Then you send the same info
#list                <--- Then you ask the sever to list
raidroot             <--- The server starts enumerating
USBCopy
NAS_Public
_NAS_Recycle_TOSRAID	<--- Enumeration finished
@RSYNCD: EXIT         <--- Sever closes the connection


#Now lets try to enumerate "raidroot"
nc -vn 127.0.0.1 873
(UNKNOWN) [127.0.0.1] 873 (rsync) open
@RSYNCD: 31.0
@RSYNCD: 31.0
raidroot
@RSYNCD: AUTHREQD 7H6CqsHCPG06kRiFkKwD8g    <--- This means you need the password
```
### **PaylaÅŸÄ±lan KlasÃ¶rleri Sayma**

**Rsync modÃ¼lleri**, **ÅŸifrelerle korunabilecek** **dizin paylaÅŸÄ±mlarÄ±** olarak tanÄ±nÄ±r. Mevcut modÃ¼lleri belirlemek ve ÅŸifre gerektirip gerektirmediÄŸini kontrol etmek iÃ§in aÅŸaÄŸÄ±daki komutlar kullanÄ±lÄ±r:
```bash
nmap -sV --script "rsync-list-modules" -p <PORT> <IP>
msf> use auxiliary/scanner/rsync/modules_list

# Example with IPv6 and alternate port
rsync -av --list-only rsync://[dead:beef::250:56ff:feb9:e90a]:8730
```
Dikkat edin ki bazÄ± paylaÅŸÄ±mlar listede gÃ¶rÃ¼nmeyebilir, bu da onlarÄ± gizleyebilir. AyrÄ±ca, bazÄ± paylaÅŸÄ±mlara eriÅŸim belirli **kimlik bilgileri** ile kÄ±sÄ±tlanmÄ±ÅŸ olabilir, bu da **"EriÅŸim Reddedildi"** mesajÄ± ile belirtilir.

### [**Brute Force**](../generic-methodologies-and-resources/brute-force.md#rsync)

### Manuel Rsync KullanÄ±mÄ±

Bir **modÃ¼l listesi** elde edildikten sonra, eylemler kimlik doÄŸrulamanÄ±n gerekip gerekmediÄŸine baÄŸlÄ±dÄ±r. Kimlik doÄŸrulama olmadan, bir paylaÅŸÄ±lan klasÃ¶rden yerel bir dizine **listeleme** ve **kopyalama** iÅŸlemi ÅŸu ÅŸekilde gerÃ§ekleÅŸtirilir:
```bash
# Listing a shared folder
rsync -av --list-only rsync://192.168.0.123/shared_name

# Copying files from a shared folder
rsync -av rsync://192.168.0.123:8730/shared_name ./rsyn_shared
```
Bu iÅŸlem **dosyalarÄ± Ã¶zyinelemeli olarak aktarÄ±r**, niteliklerini ve izinlerini korur.

**Kimlik bilgileri** ile, paylaÅŸÄ±lan bir klasÃ¶rden listeleme ve indirme aÅŸaÄŸÄ±daki gibi yapÄ±labilir; burada bir ÅŸifre istemi gÃ¶rÃ¼necektir:
```bash
rsync -av --list-only rsync://username@192.168.0.123/shared_name
rsync -av rsync://username@192.168.0.123:8730/shared_name ./rsyn_shared
```
To **upload content**, such as an _**authorized_keys**_ file for access, use:  
Ä°Ã§erik **yÃ¼klemek** iÃ§in, eriÅŸim iÃ§in bir _**authorized_keys**_ dosyasÄ± gibi, ÅŸunu kullanÄ±n:
```bash
rsync -av home_user/.ssh/ rsync://username@192.168.0.123/home_user/.ssh
```
## POST

rsyncd yapÄ±landÄ±rma dosyasÄ±nÄ± bulmak iÃ§in ÅŸunu Ã§alÄ±ÅŸtÄ±rÄ±n:
```bash
find /etc \( -name rsyncd.conf -o -name rsyncd.secrets \)
```
Bu dosya iÃ§inde, bir _secrets file_ parametresi **rsyncd kimlik doÄŸrulamasÄ±** iÃ§in **kullanÄ±cÄ± adlarÄ± ve ÅŸifreler** iÃ§eren bir dosyaya iÅŸaret edebilir.


## Referanslar
* [https://www.smeegesec.com/2016/12/pentesting-rsync.html](https://www.smeegesec.com/2016/12/pentesting-rsync.html)

{% hint style="success" %}
AWS Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
GCP Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* **ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n ya da **Twitter'da** bizi **takip edin** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Hacking ipuÃ§larÄ±nÄ± paylaÅŸmak iÃ§in** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna PR gÃ¶nderin.

</details>
{% endhint %}
