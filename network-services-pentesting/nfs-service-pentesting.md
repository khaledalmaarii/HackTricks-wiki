# 2049 - Pentesting NFS Service

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ЁЯТм [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ЁЯРж [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## **Basic Information**

**NFS** рдПрдХ рдРрд╕рд╛ рд╕рд┐рд╕реНрдЯрдо рд╣реИ рдЬреЛ **рдХреНрд▓рд╛рдЗрдВрдЯ/рд╕рд░реНрд╡рд░** рдХреЗ рд▓рд┐рдП рдбрд┐рдЬрд╝рд╛рдЗрди рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рдЬреЛ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ рдиреЗрдЯрд╡рд░реНрдХ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдлрд╝рд╛рдЗрд▓реЛрдВ рддрдХ рд╕рд╣рдЬрддрд╛ рд╕реЗ рдкрд╣реБрдБрдЪрдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ рдЬреИрд╕реЗ рдХрд┐ рдпреЗ рдлрд╝рд╛рдЗрд▓реЗрдВ рд╕реНрдерд╛рдиреАрдп рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдореЗрдВ рд╕реНрдерд┐рдд рд╣реИрдВред

рдЗрд╕ рдкреНрд░реЛрдЯреЛрдХреЙрд▓ рдХрд╛ рдПрдХ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдкрд╣рд▓реВ рдЗрд╕рдХреА рдЕрдВрддрд░реНрдирд┐рд╣рд┐рдд **рдкреНрд░рдорд╛рдгреАрдХрд░рдг** рдпрд╛ **рдЕрдзрд┐рдХрд╛рд░ рдкреНрд░рдмрдВрдзрди рддрдВрддреНрд░** рдХреА рдХрдореА рд╣реИред рдЗрд╕рдХреЗ рдмрдЬрд╛рдп, рдЕрдзрд┐рдХрд╛рд░ **рдлрд╝рд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рдЬрд╛рдирдХрд╛рд░реА** рдкрд░ рдирд┐рд░реНрднрд░ рдХрд░рддрд╛ рд╣реИ, рдЬрд┐рд╕рдореЗрдВ рд╕рд░реНрд╡рд░ рдХреЛ **рдХреНрд▓рд╛рдЗрдВрдЯ-рдкреНрд░рджрд╛рдирд┐рдд рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЬрд╛рдирдХрд╛рд░реА** рдХреЛ рдлрд╝рд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рдХреЗ рдЖрд╡рд╢реНрдпрдХ **рдЕрдзрд┐рдХрд╛рд░ рдкреНрд░рд╛рд░реВрдк** рдореЗрдВ рд╕рдЯреАрдХ рд░реВрдк рд╕реЗ рдЕрдиреБрд╡рд╛рджрд┐рдд рдХрд░рдиреЗ рдХрд╛ рдХрд╛рд░реНрдп рд╕реМрдВрдкрд╛ рдЧрдпрд╛ рд╣реИ, рдЬреЛ рдореБрдЦреНрдп рд░реВрдк рд╕реЗ **UNIX рд╕рд┐рдВрдЯреИрдХреНрд╕** рдХрд╛ рдкрд╛рд▓рди рдХрд░рддрд╛ рд╣реИред

рдкреНрд░рдорд╛рдгреАрдХрд░рдг рдЖрдорддреМрд░ рдкрд░ **UNIX `UID`/`GID` рдкрд╣рдЪрд╛рдирдХрд░реНрддрд╛рдУрдВ рдФрд░ рд╕рдореВрд╣ рд╕рджрд╕реНрдпрддрд╛рдУрдВ** рдкрд░ рдирд┐рд░реНрднрд░ рдХрд░рддрд╛ рд╣реИред рд╣рд╛рд▓рд╛рдБрдХрд┐, рдПрдХ рдЪреБрдиреМрддреА рддрдм рдЙрддреНрдкрдиреНрди рд╣реЛрддреА рд╣реИ рдЬрдм **рдХреНрд▓рд╛рдЗрдВрдЯ рдФрд░ рд╕рд░реНрд╡рд░ рдХреЗ рдмреАрдЪ `UID`/`GID` рдореИрдкрд┐рдВрдЧ** рдореЗрдВ рд╕рдВрднрд╛рд╡рд┐рдд рдЕрд╕рдВрдЧрддрд┐ рд╣реЛрддреА рд╣реИ, рдЬрд┐рд╕рд╕реЗ рд╕рд░реНрд╡рд░ рджреНрд╡рд╛рд░рд╛ рдЕрддрд┐рд░рд┐рдХреНрдд рд╕рддреНрдпрд╛рдкрди рдХреЗ рд▓рд┐рдП рдХреЛрдИ рд╕реНрдерд╛рди рдирд╣реАрдВ рдмрдЪрддрд╛ред рдЗрд╕рд▓рд┐рдП, рдпрд╣ рдкреНрд░реЛрдЯреЛрдХреЙрд▓ **рд╡рд┐рд╢реНрд╡рд╕рдиреАрдп рдиреЗрдЯрд╡рд░реНрдХреЛрдВ** рдХреЗ рднреАрддрд░ рдЙрдкрдпреЛрдЧ рдХреЗ рд▓рд┐рдП рд╕рдмрд╕реЗ рдЙрдкрдпреБрдХреНрдд рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ рдЗрд╕ рдкреНрд░рдорд╛рдгреАрдХрд░рдг рд╡рд┐рдзрд┐ рдкрд░ рдирд┐рд░реНрднрд░ рдХрд░рддрд╛ рд╣реИред

**рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдкреЛрд░реНрдЯ**: 2049/TCP/UDP (рд╕рдВрд╕реНрдХрд░рдг 4 рдХреЛ рдЫреЛрдбрд╝рдХрд░, рдЗрд╕реЗ рдХреЗрд╡рд▓ TCP рдпрд╛ UDP рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ)ред&#x20;
```
2049/tcp open  nfs     2-3 (RPC #100003
```
### Versions

- **NFSv2**: рдпрд╣ рд╕рдВрд╕реНрдХрд░рдг рд╡рд┐рднрд┐рдиреНрди рдкреНрд░рдгрд╛рд▓рд┐рдпреЛрдВ рдХреЗ рд╕рд╛рде рдЗрд╕рдХреА рд╡реНрдпрд╛рдкрдХ рд╕рдВрдЧрддрддрд╛ рдХреЗ рд▓рд┐рдП рдкрд╣рдЪрд╛рдирд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬреЛ рдЗрд╕рдХреЗ рдорд╣рддреНрд╡ рдХреЛ UDP рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдкреНрд░рд╛рд░рдВрднрд┐рдХ рд╕рдВрдЪрд╛рд▓рди рдХреЗ рд╕рд╛рде рдЪрд┐рд╣реНрдирд┐рдд рдХрд░рддрд╛ рд╣реИред рд╢реНрд░реГрдВрдЦрд▓рд╛ рдореЗрдВ **рд╕рдмрд╕реЗ рдкреБрд░рд╛рдирд╛** рд╣реЛрдиреЗ рдХреЗ рдирд╛рддреЗ, рдЗрд╕рдиреЗ рднрд╡рд┐рд╖реНрдп рдХреЗ рд╡рд┐рдХрд╛рд╕ рдХреЗ рд▓рд┐рдП рдЖрдзрд╛рд░ рддреИрдпрд╛рд░ рдХрд┐рдпрд╛ред

- **NFSv3**: рдХрдИ рд╕реБрдзрд╛рд░реЛрдВ рдХреЗ рд╕рд╛рде рдкреЗрд╢ рдХрд┐рдпрд╛ рдЧрдпрд╛, NFSv3 рдиреЗ рдЕрдкрдиреЗ рдкреВрд░реНрд╡рд╡рд░реНрддреА рдкрд░ рд╡рд┐рд╕реНрддрд╛рд░ рдХрд┐рдпрд╛, рдЬрд┐рд╕рдореЗрдВ рдкрд░рд┐рд╡рд░реНрддрдирд╢реАрд▓ рдлрд╝рд╛рдЗрд▓ рдЖрдХрд╛рд░реЛрдВ рдХрд╛ рд╕рдорд░реНрдерди рдФрд░ рдмреЗрд╣рддрд░ рддреНрд░реБрдЯрд┐ рд░рд┐рдкреЛрд░реНрдЯрд┐рдВрдЧ рддрдВрддреНрд░ рдкреНрд░рджрд╛рди рдХрд┐рдпрд╛ рдЧрдпрд╛ред рдЗрд╕рдХреЗ рд╡рд┐рдХрд╛рд╕ рдХреЗ рдмрд╛рд╡рдЬреВрдж, рдЗрд╕реЗ NFSv2 рдХреНрд▓рд╛рдЗрдВрдЯ рдХреЗ рд╕рд╛рде рдкреВрд░реНрдг рдкреВрд░реНрд╡рд╡рд░реНрддреА рд╕рдВрдЧрддрддрд╛ рдореЗрдВ рд╕реАрдорд╛рдУрдВ рдХрд╛ рд╕рд╛рдордирд╛ рдХрд░рдирд╛ рдкрдбрд╝рд╛ред

- **NFSv4**: NFS рд╢реНрд░реГрдВрдЦрд▓рд╛ рдореЗрдВ рдПрдХ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╕рдВрд╕реНрдХрд░рдг, NFSv4 рдиреЗ рдиреЗрдЯрд╡рд░реНрдХ рдХреЗ рдмреАрдЪ рдлрд╝рд╛рдЗрд▓ рд╕рд╛рдЭрд╛ рдХрд░рдиреЗ рдХреЛ рдЖрдзреБрдирд┐рдХ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдбрд┐рдЬрд╝рд╛рдЗрди рдХреА рдЧрдИ рд╕реБрд╡рд┐рдзрд╛рдУрдВ рдХрд╛ рдПрдХ рд╕реЗрдЯ рдкреЗрд╢ рдХрд┐рдпрд╛ред рдЙрд▓реНрд▓реЗрдЦрдиреАрдп рд╕реБрдзрд╛рд░реЛрдВ рдореЗрдВ **рдЙрдЪреНрдЪ рд╕реБрд░рдХреНрд╖рд╛** рдХреЗ рд▓рд┐рдП Kerberos рдХрд╛ рдПрдХреАрдХрд░рдг, рдлрд╝рд╛рдпрд░рд╡реЙрд▓ рдХреЛ рдкрд╛рд░ рдХрд░рдиреЗ рдФрд░ рдкреЛрд░реНрдЯрдореИрдкрд░реНрд╕ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдХреЗ рдмрд┐рдирд╛ рдЗрдВрдЯрд░рдиреЗрдЯ рдкрд░ рд╕рдВрдЪрд╛рд▓рди рдХрд░рдиреЗ рдХреА рдХреНрд╖рдорддрд╛, рдПрдХреНрд╕реЗрд╕ рдХрдВрдЯреНрд░реЛрд▓ рд╕реВрдЪрд┐рдпреЛрдВ (ACLs) рдХрд╛ рд╕рдорд░реНрдерди, рдФрд░ рд╕реНрдерд┐рддрд┐-рдЖрдзрд╛рд░рд┐рдд рд╕рдВрдЪрд╛рд▓рди рдХрд╛ рдкрд░рд┐рдЪрдп рд╢рд╛рдорд┐рд▓ рд╣реИред рдЗрд╕рдХреЗ рдкреНрд░рджрд░реНрд╢рди рдореЗрдВ рд╕реБрдзрд╛рд░ рдФрд░ рд╕реНрдерд┐рддрд┐-рдЖрдзрд╛рд░рд┐рдд рдкреНрд░реЛрдЯреЛрдХреЙрд▓ рдХреЛ рдЕрдкрдирд╛рдиреЗ рдиреЗ NFSv4 рдХреЛ рдиреЗрдЯрд╡рд░реНрдХ рдлрд╝рд╛рдЗрд▓ рд╕рд╛рдЭрд╛ рдХрд░рдиреЗ рдХреА рддрдХрдиреАрдХреЛрдВ рдореЗрдВ рдПрдХ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдкреНрд░рдЧрддрд┐ рдХреЗ рд░реВрдк рдореЗрдВ рдЕрд▓рдЧ рдХрд┐рдпрд╛ рд╣реИред

NFS рдХреЗ рдкреНрд░рддреНрдпреЗрдХ рд╕рдВрд╕реНрдХрд░рдг рдХреЛ рдиреЗрдЯрд╡рд░реНрдХ рд╡рд╛рддрд╛рд╡рд░рдг рдХреА рд╡рд┐рдХрд╕рд┐рдд рдЖрд╡рд╢реНрдпрдХрддрд╛рдУрдВ рдХреЛ рд╕рдВрдмреЛрдзрд┐рдд рдХрд░рдиреЗ рдХреЗ рдЗрд░рд╛рджреЗ рд╕реЗ рд╡рд┐рдХрд╕рд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рд╕реБрд░рдХреНрд╖рд╛, рд╕рдВрдЧрддрддрд╛ рдФрд░ рдкреНрд░рджрд░реНрд╢рди рдХреЛ рдХреНрд░рдорд┐рдХ рд░реВрдк рд╕реЗ рдмрдврд╝рд╛рддреЗ рд╣реБрдПред

## Enumeration

### Useful nmap scripts
```bash
nfs-ls #List NFS exports and check permissions
nfs-showmount #Like showmount -e
nfs-statfs #Disk statistics and info from NFS share
```
### рдЙрдкрдпреЛрдЧреА рдореЗрдЯрд╛рд╕реНрдкреНрд▓реЙрдЗрдЯ рдореЙрдбреНрдпреВрд▓
```bash
scanner/nfs/nfsmount #Scan NFS mounts and list permissions
```
### Mounting

рдпрд╣ рдЬрд╛рдирдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐ **рдХреМрди рд╕рд╛ рдлрд╝реЛрд▓реНрдбрд░** рд╕рд░реНрд╡рд░ рдкрд░ **рдЙрдкрд▓рдмреНрдз** рд╣реИ, рдЖрдк рдЗрд╕реЗ рдкреВрдЫ рд╕рдХрддреЗ рд╣реИрдВ:
```bash
showmount -e <IP>
```
рдлрд┐рд░ рдЗрд╕реЗ рдорд╛рдЙрдВрдЯ рдХрд░реЗрдВ:
```bash
mount -t nfs [-o vers=2] <ip>:<remote_folder> <local_folder> -o nolock
```
рдЖрдкрдХреЛ **рд╕рдВрд╕реНрдХрд░рдг 2** рдХрд╛ **рдЙрдкрдпреЛрдЧ** рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП **рдирд┐рд░реНрдзрд╛рд░рд┐рдд** рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП рдХреНрдпреЛрдВрдХрд┐ рдЗрд╕рдореЗрдВ **рдХреЛрдИ** **рдкреНрд░рдорд╛рдгреАрдХрд░рдг** рдпрд╛ **рдЕрдзрд┐рдХрд╛рд░** рдирд╣реАрдВ рд╣реИред

**рдЙрджрд╛рд╣рд░рдг:**
```bash
mkdir /mnt/new_back
mount -t nfs [-o vers=2] 10.12.0.150:/backup /mnt/new_back -o nolock
```
## Permissions

рдпрджрд┐ рдЖрдк рдПрдХ рдлрд╝реЛрд▓реНрдбрд░ рдХреЛ рдорд╛рдЙрдВрдЯ рдХрд░рддреЗ рд╣реИрдВ рдЬрд┐рд╕рдореЗрдВ **рдлрд╛рдЗрд▓реЗрдВ рдпрд╛ рдлрд╝реЛрд▓реНрдбрд░ рдХреЗрд╡рд▓ рдХреБрдЫ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рджреНрд╡рд╛рд░рд╛ рдПрдХреНрд╕реЗрд╕ рдХрд┐рдП рдЬрд╛ рд╕рдХрддреЗ рд╣реИрдВ** (рджреНрд╡рд╛рд░рд╛ **UID**)ред рдЖрдк **рд╕реНрдерд╛рдиреАрдп рд░реВрдк рд╕реЗ** рдЙрд╕ **UID** рдХреЗ рд╕рд╛рде рдПрдХ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдЙрд╕ **рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛** рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЖрдк рдлрд╝рд╛рдЗрд▓/рдлрд╝реЛрд▓реНрдбрд░ рдХреЛ **рдПрдХреНрд╕реЗрд╕** рдХрд░ рд╕рдХреЗрдВрдЧреЗред

## NSFShell

рдлрд╛рдЗрд▓реЛрдВ рддрдХ рдкрд╣реБрдБрдЪ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП UID рдФрд░ GID рдХреЛ рдЖрд╕рд╛рдиреА рд╕реЗ рд╕реВрдЪреАрдмрджреНрдз, рдорд╛рдЙрдВрдЯ рдФрд░ рдмрджрд▓рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдк [nfsshell](https://github.com/NetDirect/nfsshell) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред

[рдЕрдЪреНрдЫрд╛ NFSShell рдЯреНрдпреВрдЯреЛрд░рд┐рдпрд▓ред](https://www.pentestpartners.com/security-blog/using-nfsshell-to-compromise-older-environments/)

## Config files
```
/etc/exports
/etc/lib/nfs/etab
```
### Dangerous settings

- **Read and Write Permissions (`rw`):** рдпрд╣ рд╕реЗрдЯрд┐рдВрдЧ рдлрд╝рд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рд╕реЗ рдкрдврд╝рдиреЗ рдФрд░ рд▓рд┐рдЦрдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреА рд╣реИред рдЗрддрдиреА рд╡реНрдпрд╛рдкрдХ рдкрд╣реБрдБрдЪ рджреЗрдиреЗ рдХреЗ рдкрд░рд┐рдгрд╛рдореЛрдВ рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░рдирд╛ рдЖрд╡рд╢реНрдпрдХ рд╣реИред

- **Use of Insecure Ports (`insecure`):** рдЬрдм рд╕рдХреНрд╖рдо рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рдпрд╣ рд╕рд┐рд╕реНрдЯрдо рдХреЛ 1024 рд╕реЗ рдКрдкрд░ рдХреЗ рдкреЛрд░реНрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред рдЗрд╕ рд░реЗрдВрдЬ рдХреЗ рдКрдкрд░ рдХреЗ рдкреЛрд░реНрдЯ рдХреА рд╕реБрд░рдХреНрд╖рд╛ рдХрдо рд╕рдЦреНрдд рд╣реЛ рд╕рдХрддреА рд╣реИ, рдЬрд┐рд╕рд╕реЗ рдЬреЛрдЦрд┐рдо рдмрдврд╝рддрд╛ рд╣реИред

- **Visibility of Nested File Systems (`nohide`):** рдпрд╣ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛рдУрдВ рдХреЛ рджреГрд╢реНрдпрдорд╛рди рдмрдирд╛рддрд╛ рд╣реИ, рднрд▓реЗ рд╣реА рдПрдХ рдЕрдиреНрдп рдлрд╝рд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рдПрдХ рдирд┐рд░реНрдпрд╛рддрд┐рдд рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдХреЗ рдиреАрдЪреЗ рдорд╛рдЙрдВрдЯ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реЛред рдкреНрд░рддреНрдпреЗрдХ рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдХреЗ рд▓рд┐рдП рдЙрдЪрд┐рдд рдкреНрд░рдмрдВрдзрди рдХреЗ рд▓рд┐рдП рдЕрдкрдиреА рдирд┐рд░реНрдпрд╛рдд рдкреНрд░рд╡рд┐рд╖реНрдЯрд┐ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред

- **Root Files Ownership (`no_root_squash`):** рдЗрд╕ рд╕реЗрдЯрд┐рдВрдЧ рдХреЗ рд╕рд╛рде, рд░реВрдЯ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рджреНрд╡рд╛рд░рд╛ рдмрдирд╛рдП рдЧрдП рдлрд╝рд╛рдЗрд▓реЗрдВ рдЕрдкрдиреА рдореВрд▓ UID/GID 0 рдмрдирд╛рдП рд░рдЦрддреА рд╣реИрдВ, рдиреНрдпреВрдирддрдо рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░ рдХреЗ рд╕рд┐рджреНрдзрд╛рдВрдд рдХреА рдЕрдирджреЗрдЦреА рдХрд░рддреЗ рд╣реБрдП рдФрд░ рд╕рдВрднрд╛рд╡рд┐рдд рд░реВрдк рд╕реЗ рдЕрддреНрдпрдзрд┐рдХ рдЕрдиреБрдорддрд┐рдпрд╛рдБ рдкреНрд░рджрд╛рди рдХрд░рддреА рд╣реИрдВред

- **Non-Squashing of All Users (`no_all_squash`):** рдпрд╣ рд╡рд┐рдХрд▓реНрдк рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рддрд╛ рд╣реИ рдХрд┐ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдкрд╣рдЪрд╛рди рдкреНрд░рдгрд╛рд▓реА рдореЗрдВ рд╕рдВрд░рдХреНрд╖рд┐рдд рд░рд╣рддреА рд╣реИ, рдЬреЛ рдпрджрд┐ рд╕рд╣реА рддрд░реАрдХреЗ рд╕реЗ рдкреНрд░рдмрдВрдзрд┐рдд рдирд╣реАрдВ рдХреА рдЧрдИ рддреЛ рдЕрдиреБрдорддрд┐ рдФрд░ рдкрд╣реБрдБрдЪ рдирд┐рдпрдВрддреНрд░рдг рд╕рдорд╕реНрдпрд╛рдУрдВ рдХрд╛ рдХрд╛рд░рдг рдмрди рд╕рдХрддреА рд╣реИред

## Privilege Escalation using NFS misconfigurations

[NFS no\_root\_squash and no\_all\_squash privilege escalation](../linux-hardening/privilege-escalation/nfs-no\_root\_squash-misconfiguration-pe.md)

## HackTricks Automatic Commands
```
Protocol_Name: NFS    #Protocol Abbreviation if there is one.
Port_Number:  2049     #Comma separated if there is more than one.
Protocol_Description: Network File System         #Protocol Abbreviation Spelled out

Entry_1:
Name: Notes
Description: Notes for NFS
Note: |
NFS is a system designed for client/server that enables users to seamlessly access files over a network as though these files were located within a local directory.

#apt install nfs-common
showmount 10.10.10.180      ~or~showmount -e 10.10.10.180
should show you available shares (example /home)

mount -t nfs -o ver=2 10.10.10.180:/home /mnt/
cd /mnt
nano into /etc/passwd and change the uid (probably 1000 or 1001) to match the owner of the files if you are not able to get in

https://book.hacktricks.xyz/pentesting/nfs-service-pentesting

Entry_2:
Name: Nmap
Description: Nmap with NFS Scripts
Command: nmap --script=nfs-ls.nse,nfs-showmount.nse,nfs-statfs.nse -p 2049 {IP}
```
{% hint style="success" %}
AWS рд╣реИрдХрд┐рдВрдЧ рд╕реАрдЦреЗрдВ рдФрд░ рдЕрднреНрдпрд╛рд╕ рдХрд░реЗрдВ:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
GCP рд╣реИрдХрд┐рдВрдЧ рд╕реАрдЦреЗрдВ рдФрд░ рдЕрднреНрдпрд╛рд╕ рдХрд░реЗрдВ: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░реЗрдВ</summary>

* [**рд╕рджрд╕реНрдпрддрд╛ рдпреЛрдЬрдирд╛рдПрдБ**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* **рд╣рдорд╛рд░реЗ** ЁЯТм [**Discord рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ рдпрд╛ **рд╣рдореЗрдВ** **Twitter** ЁЯРж [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)** рдкрд░ рдлреЙрд▓реЛ рдХрд░реЗрдВред**
* **рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ рдФрд░** [**HackTricks**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) рдЧрд┐рдЯрд╣рдм рд░рд┐рдкреЛрдЬрд┐рдЯрд░реА рдореЗрдВ PR рд╕рдмрдорд┐рдЯ рдХрд░реЗрдВред

</details>
{% endhint %}
