# 21 - Pentesting FTP

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## ê¸°ë³¸ ì •ë³´

**íŒŒì¼ ì „ì†¡ í”„ë¡œí† ì½œ (FTP)**ëŠ” ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ ê°„ì˜ ì»´í“¨í„° ë„¤íŠ¸ì›Œí¬ì—ì„œ íŒŒì¼ ì „ì†¡ì„ ìœ„í•œ í‘œì¤€ í”„ë¡œí† ì½œë¡œ ì‚¬ìš©ë©ë‹ˆë‹¤.\
ì´ëŠ” **ì¼ë°˜ í…ìŠ¤íŠ¸** í”„ë¡œí† ì½œë¡œ, **ìƒˆ ì¤„ ë¬¸ì `0x0d 0x0a`**ë¥¼ ì‚¬ìš©í•˜ë¯€ë¡œ ë•Œë•Œë¡œ **`telnet`** ë˜ëŠ” **`nc -C`**ë¥¼ ì‚¬ìš©í•˜ì—¬ **ì—°ê²°í•´ì•¼ í• ** í•„ìš”ê°€ ìˆìŠµë‹ˆë‹¤.

**ê¸°ë³¸ í¬íŠ¸:** 21
```
PORT   STATE SERVICE
21/tcp open  ftp
```
### Connections Active & Passive

In **Active FTP** the FTP **client** first **initiates** the control **connection** from its port N to FTP Servers command port â€“ port 21. The **client** then **listens** to port **N+1** and sends the port N+1 to FTP Server. FTP **Server** then **initiates** the data **connection**, from **its port M to the port N+1** of the FTP Client.

í•˜ì§€ë§Œ, ë§Œì•½ FTP í´ë¼ì´ì–¸íŠ¸ê°€ ì™¸ë¶€ì—ì„œ ë“¤ì–´ì˜¤ëŠ” ë°ì´í„° ì—°ê²°ì„ ì œì–´í•˜ëŠ” ë°©í™”ë²½ì„ ì„¤ì •í–ˆë‹¤ë©´, ì•¡í‹°ë¸Œ FTPëŠ” ë¬¸ì œê°€ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ì— ëŒ€í•œ ì‹¤í–‰ ê°€ëŠ¥í•œ í•´ê²°ì±…ì€ íŒ¨ì‹œë¸Œ FTPì…ë‹ˆë‹¤.

In **Passive FTP**, the client initiates the control connection from its port N to the port 21 of FTP Server. After this, the client issues a **passv comand**. The server then sends the client one of its port number M. And the **client** **initiates** the data **connection** from **its port P to port M** of the FTP Server.

Source: [https://www.thesecuritybuddy.com/vulnerabilities/what-is-ftp-bounce-attack/](https://www.thesecuritybuddy.com/vulnerabilities/what-is-ftp-bounce-attack/)

### Connection debugging

The **FTP** commands **`debug`** and **`trace`** can be used to see **how is the communication occurring**.

## Enumeration

### Banner Grabbing
```bash
nc -vn <IP> 21
openssl s_client -connect crossfit.htb:21 -starttls ftp #Get certificate if any
```
### STARTTLSë¥¼ ì‚¬ìš©í•˜ì—¬ FTPì— ì—°ê²°í•˜ê¸°
```
lftp
lftp :~> set ftp:ssl-force true
lftp :~> set ssl:verify-certificate no
lftp :~> connect 10.10.10.208
lftp 10.10.10.208:~> login
Usage: login <user|URL> [<pass>]
lftp 10.10.10.208:~> login username Password
```
### Unauth enum

**nmap**ì™€ í•¨ê»˜
```bash
sudo nmap -sV -p21 -sC -A 10.10.10.10
```
You can us the commands `HELP` and `FEAT` to obtain some information of the FTP server:  
`HELP` ë° `FEAT` ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ FTP ì„œë²„ì— ëŒ€í•œ ì •ë³´ë¥¼ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤:
```
HELP
214-The following commands are recognized (* =>'s unimplemented):
214-CWD     XCWD    CDUP    XCUP    SMNT*   QUIT    PORT    PASV
214-EPRT    EPSV    ALLO*   RNFR    RNTO    DELE    MDTM    RMD
214-XRMD    MKD     XMKD    PWD     XPWD    SIZE    SYST    HELP
214-NOOP    FEAT    OPTS    AUTH    CCC*    CONF*   ENC*    MIC*
214-PBSZ    PROT    TYPE    STRU    MODE    RETR    STOR    STOU
214-APPE    REST    ABOR    USER    PASS    ACCT*   REIN*   LIST
214-NLST    STAT    SITE    MLSD    MLST
214 Direct comments to root@drei.work

FEAT
211-Features:
PROT
CCC
PBSZ
AUTH TLS
MFF modify;UNIX.group;UNIX.mode;
REST STREAM
MLST modify*;perm*;size*;type*;unique*;UNIX.group*;UNIX.mode*;UNIX.owner*;
UTF8
EPRT
EPSV
LANG en-US
MDTM
SSCN
TVFS
MFMT
SIZE
211 End

STAT
#Info about the FTP server (version, configs, status...)
```
### ìµëª… ë¡œê·¸ì¸

_anonymous : anonymous_\
_anonymous :_\
_ftp : ftp_
```bash
ftp <IP>
>anonymous
>anonymous
>ls -a # List all files (even hidden) (yes, they could be hidden)
>binary #Set transmission to binary instead of ascii
>ascii #Set transmission to ascii instead of binary
>bye #exit
```
### [Brute force](../../generic-methodologies-and-resources/brute-force.md#ftp)

ì—¬ê¸° ê¸°ë³¸ ftp ìê²© ì¦ëª…ì˜ ë©‹ì§„ ëª©ë¡ì„ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤: [https://github.com/danielmiessler/SecLists/blob/master/Passwords/Default-Credentials/ftp-betterdefaultpasslist.txt](https://github.com/danielmiessler/SecLists/blob/master/Passwords/Default-Credentials/ftp-betterdefaultpasslist.txt)

### Automated

ìµëª… ë¡œê·¸ì¸ ë° ë°”ìš´ìŠ¤ FTP ê²€ì‚¬ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ nmapì˜ **-sC** ì˜µì…˜ìœ¼ë¡œ ìˆ˜í–‰ë©ë‹ˆë‹¤:
```bash
nmap --script ftp-* -p 21 <ip>
```
## Browser connection

ë¸Œë¼ìš°ì €(ì˜ˆ: Firefox)ë¥¼ ì‚¬ìš©í•˜ì—¬ ë‹¤ìŒê³¼ ê°™ì€ URLë¡œ FTP ì„œë²„ì— ì—°ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:
```bash
ftp://anonymous:anonymous@10.10.10.98
```
ì‚¬ìš©ìì— ì˜í•´ ì œì–´ë˜ëŠ” ë°ì´í„°ë¥¼ **FTP ì„œë²„**ì— **ì§ì ‘ ì „ì†¡í•˜ëŠ” ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜**ì´ ìˆëŠ” ê²½ìš°, ì´ì¤‘ URL ì¸ì½”ë”©ëœ `%0d%0a` (ì´ì¤‘ URL ì¸ì½”ë”©ì—ì„œëŠ” `%250d%250a`) ë°”ì´íŠ¸ë¥¼ ì „ì†¡í•˜ì—¬ **FTP ì„œë²„ê°€ ì„ì˜ì˜ ì‘ì—…ì„ ìˆ˜í–‰**í•˜ê²Œ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ê°€ëŠ¥í•œ ì„ì˜ì˜ ì‘ì—… ì¤‘ í•˜ë‚˜ëŠ” ì‚¬ìš©ìê°€ ì œì–´í•˜ëŠ” ì„œë²„ì—ì„œ ì½˜í…ì¸ ë¥¼ ë‹¤ìš´ë¡œë“œí•˜ê±°ë‚˜ í¬íŠ¸ ìŠ¤ìºë‹ì„ ìˆ˜í–‰í•˜ê±°ë‚˜ ë‹¤ë¥¸ í‰ë¬¸ ê¸°ë°˜ ì„œë¹„ìŠ¤(ì˜ˆ: http)ì™€ í†µì‹ ì„ ì‹œë„í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.

## FTPì—ì„œ ëª¨ë“  íŒŒì¼ ë‹¤ìš´ë¡œë“œ
```bash
wget -m ftp://anonymous:anonymous@10.10.10.98 #Donwload all
wget -m --no-passive ftp://anonymous:anonymous@10.10.10.98 #Download all
```
ì‚¬ìš©ì ì´ë¦„/ë¹„ë°€ë²ˆí˜¸ì— íŠ¹ìˆ˜ ë¬¸ìê°€ í¬í•¨ëœ ê²½ìš°, [ë‹¤ìŒ ëª…ë ¹ì–´](https://stackoverflow.com/a/113900/13647948)ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:
```bash
wget -r --user="USERNAME" --password="PASSWORD" ftp://server.com/
```
## Some FTP commands

* **`USER username`**
* **`PASS password`**
* **`HELP`** ì„œë²„ê°€ ì§€ì›í•˜ëŠ” ëª…ë ¹ì–´ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.
* \*\*`PORT 127,0,0,1,0,80`\*\* ì´ëŠ” FTP ì„œë²„ì— IP 127.0.0.1ì˜ í¬íŠ¸ 80ê³¼ ì—°ê²°ì„ ì„¤ì •í•˜ë„ë¡ ì§€ì‹œí•©ë‹ˆë‹¤ (_5ë²ˆì§¸ ë¬¸ìëŠ” "0"ìœ¼ë¡œ, 6ë²ˆì§¸ëŠ” 10ì§„ìˆ˜ë¡œ í¬íŠ¸ë¥¼ ì…ë ¥í•´ì•¼ í•˜ê±°ë‚˜ 5ë²ˆì§¸ì™€ 6ë²ˆì§¸ë¥¼ ì‚¬ìš©í•˜ì—¬ í¬íŠ¸ë¥¼ 16ì§„ìˆ˜ë¡œ í‘œí˜„í•´ì•¼ í•©ë‹ˆë‹¤_).
* \*\*`EPRT |2|127.0.0.1|80|`\*\* ì´ëŠ” FTP ì„œë²„ì— IP 127.0.0.1ì˜ í¬íŠ¸ 80ê³¼ TCP ì—°ê²°ì„ ì„¤ì •í•˜ë„ë¡ ì§€ì‹œí•©ë‹ˆë‹¤ (_"2"ë¡œ í‘œì‹œë¨_). ì´ ëª…ë ¹ì€ **IPv6ì„ ì§€ì›í•©ë‹ˆë‹¤**.
* **`LIST`** í˜„ì¬ í´ë”ì˜ íŒŒì¼ ëª©ë¡ì„ ì „ì†¡í•©ë‹ˆë‹¤.
* **`LIST -R`** ì¬ê·€ì ìœ¼ë¡œ ëª©ë¡ì„ ë‚˜ì—´í•©ë‹ˆë‹¤ (ì„œë²„ì—ì„œ í—ˆìš©í•˜ëŠ” ê²½ìš°).
* **`APPE /path/something.txt`** ì´ëŠ” FTPì— **ìˆ˜ë™** ì—°ê²° ë˜ëŠ” **PORT/EPRT** ì—°ê²°ì—ì„œ ìˆ˜ì‹ í•œ ë°ì´í„°ë¥¼ íŒŒì¼ì— ì €ì¥í•˜ë„ë¡ ì§€ì‹œí•©ë‹ˆë‹¤. íŒŒì¼ ì´ë¦„ì´ ì¡´ì¬í•˜ë©´ ë°ì´í„°ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.
* **`STOR /path/something.txt`** `APPE`ì™€ ê°™ì§€ë§Œ íŒŒì¼ì„ ë®ì–´ì”ë‹ˆë‹¤.
* **`STOU /path/something.txt`** `APPE`ì™€ ê°™ì§€ë§Œ ì¡´ì¬í•  ê²½ìš° ì•„ë¬´ ì‘ì—…ë„ í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
* **`RETR /path/to/file`** ìˆ˜ë™ ë˜ëŠ” í¬íŠ¸ ì—°ê²°ì´ ì„¤ì •ë˜ì–´ì•¼ í•©ë‹ˆë‹¤. ê·¸ëŸ° ë‹¤ìŒ FTP ì„œë²„ëŠ” í•´ë‹¹ ì—°ê²°ì„ í†µí•´ ì§€ì •ëœ íŒŒì¼ì„ ì „ì†¡í•©ë‹ˆë‹¤.
* **`REST 6`** ì´ëŠ” ì„œë²„ì— ë‹¤ìŒ ë²ˆì— `RETR`ì„ ì‚¬ìš©í•˜ì—¬ ë¬´ì–¸ê°€ë¥¼ ì „ì†¡í•  ë•Œ 6ë²ˆì§¸ ë°”ì´íŠ¸ì—ì„œ ì‹œì‘í•´ì•¼ í•¨ì„ ì§€ì‹œí•©ë‹ˆë‹¤.
* **`TYPE i`** ì „ì†¡ì„ ì´ì§„ìœ¼ë¡œ ì„¤ì •í•©ë‹ˆë‹¤.
* **`PASV`** ì´ëŠ” ìˆ˜ë™ ì—°ê²°ì„ ì—´ê³  ì‚¬ìš©ìê°€ ì—°ê²°í•  ìˆ˜ ìˆëŠ” ìœ„ì¹˜ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.
* **`PUT /tmp/file.txt`** ì§€ì •ëœ íŒŒì¼ì„ FTPì— ì—…ë¡œë“œí•©ë‹ˆë‹¤.

![](<../../.gitbook/assets/image (386).png>)

## FTPBounce attack

ì¼ë¶€ FTP ì„œë²„ëŠ” PORT ëª…ë ¹ì„ í—ˆìš©í•©ë‹ˆë‹¤. ì´ ëª…ë ¹ì€ ì„œë²„ì— ë‹¤ë¥¸ FTP ì„œë²„ì˜ íŠ¹ì • í¬íŠ¸ì— ì—°ê²°í•˜ê³  ì‹¶ë‹¤ëŠ” ê²ƒì„ ë‚˜íƒ€ë‚´ëŠ” ë° ì‚¬ìš©ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ° ë‹¤ìŒ ì´ë¥¼ ì‚¬ìš©í•˜ì—¬ FTP ì„œë²„ë¥¼ í†µí•´ í˜¸ìŠ¤íŠ¸ì˜ ì–´ë–¤ í¬íŠ¸ê°€ ì—´ë ¤ ìˆëŠ”ì§€ ìŠ¤ìº”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

[**ì—¬ê¸°ì—ì„œ FTP ì„œë²„ë¥¼ ì•…ìš©í•˜ì—¬ í¬íŠ¸ë¥¼ ìŠ¤ìº”í•˜ëŠ” ë°©ë²•ì„ ë°°ìš°ì„¸ìš”.**](ftp-bounce-attack.md)

ì´ ë™ì‘ì„ ì•…ìš©í•˜ì—¬ FTP ì„œë²„ê°€ ë‹¤ë¥¸ í”„ë¡œí† ì½œê³¼ ìƒí˜¸ì‘ìš©í•˜ë„ë¡ ë§Œë“¤ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. **HTTP ìš”ì²­ì„ í¬í•¨í•˜ëŠ” íŒŒì¼ì„ ì—…ë¡œë“œ**í•˜ê³  ì·¨ì•½í•œ FTP ì„œë²„ê°€ **ì„ì˜ì˜ HTTP ì„œë²„ë¡œ ì „ì†¡í•˜ë„ë¡** í•˜ê±°ë‚˜, ì‹¬ì§€ì–´ FTP ìš”ì²­ì„ ì—…ë¡œë“œí•˜ê³  ì·¨ì•½í•œ FTP ì„œë²„ê°€ ë‹¤ë¥¸ FTP ì„œë²„ì—ì„œ íŒŒì¼ì„ ë‹¤ìš´ë¡œë“œí•˜ë„ë¡ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\
ì´ë¡ ì€ ê°„ë‹¨í•©ë‹ˆë‹¤:

1. **ì·¨ì•½í•œ ì„œë²„ì— ìš”ì²­(í…ìŠ¤íŠ¸ íŒŒì¼ ë‚´)ì„ ì—…ë¡œë“œí•©ë‹ˆë‹¤.** ë‹¤ë¥¸ HTTP ë˜ëŠ” FTP ì„œë²„ì™€ í†µì‹ í•˜ë ¤ë©´ `0x0d 0x0a`ë¡œ ì¤„ì„ ë³€ê²½í•´ì•¼ í•©ë‹ˆë‹¤.
2. **ì›í•˜ì§€ ì•ŠëŠ” ë¬¸ìë¥¼ ì „ì†¡í•˜ì§€ ì•Šë„ë¡ `REST X`ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤** (ì•„ë§ˆë„ ìš”ì²­ì„ íŒŒì¼ ë‚´ì— ì—…ë¡œë“œí•˜ê¸° ìœ„í•´ íŒŒì¼ì˜ ì‹œì‘ ë¶€ë¶„ì— ì´ë¯¸ì§€ í—¤ë”ë¥¼ ë„£ì–´ì•¼ í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤).
3. **ì„ì˜ì˜ ì„œë²„ ë° ì„œë¹„ìŠ¤ì— ì—°ê²°í•˜ê¸° ìœ„í•´ `PORT`ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.**
4. **ì €ì¥ëœ ìš”ì²­ì„ ì„œë²„ì— ì „ì†¡í•˜ê¸° ìœ„í•´ `RETR`ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.**

ì´ê²ƒì´ **_**ì†Œì¼“ì´ ì“°ê¸° ë¶ˆê°€ëŠ¥í•˜ë‹¤ëŠ”**_ **ì˜¤ë¥˜ë¥¼ ë°œìƒì‹œí‚¬ ê°€ëŠ¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤** **ì™œëƒí•˜ë©´ ì—°ê²°ì´ `RETR`ë¡œ ë°ì´í„°ë¥¼ ì „ì†¡í•˜ê¸°ì— ì¶©ë¶„íˆ ì˜¤ë˜ ì§€ì†ë˜ì§€ ì•Šê¸° ë•Œë¬¸ì…ë‹ˆë‹¤**. ì´ë¥¼ í”¼í•˜ê¸° ìœ„í•œ ì œì•ˆì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:

* HTTP ìš”ì²­ì„ ì „ì†¡í•˜ëŠ” ê²½ìš°, **ê°™ì€ ìš”ì²­ì„ ì—°ì†ìœ¼ë¡œ ì „ì†¡í•©ë‹ˆë‹¤** **\~0.5MB** ì´ìƒê¹Œì§€. ì´ë ‡ê²Œ:

{% file src="../../.gitbook/assets/posts.txt" %}
posts.txt
{% endfile %}

* ìš”ì²­ì„ **í”„ë¡œí† ì½œê³¼ ê´€ë ¨ëœ "ì¡ë™ì‚¬ë‹ˆ" ë°ì´í„°ë¡œ ì±„ìš°ë ¤ê³  ì‹œë„í•©ë‹ˆë‹¤** (FTPì™€ ëŒ€í™”í•  ë•ŒëŠ” ì•„ë§ˆë„ ì¡ë™ì‚¬ë‹ˆ ëª…ë ¹ì–´ ë˜ëŠ” íŒŒì¼ì„ ì–»ê¸° ìœ„í•´ `RETR` ëª…ë ¹ì„ ë°˜ë³µí•˜ëŠ” ê²ƒ).
* ìš”ì²­ì„ **ë§ì€ ë„ ë¬¸ì ë˜ëŠ” ê¸°íƒ€ë¡œ ì±„ì›ë‹ˆë‹¤** (ì¤„ë¡œ ë‚˜ëˆ„ê±°ë‚˜ ë‚˜ëˆ„ì§€ ì•Šê±°ë‚˜).

ì–´ì¨Œë“ , ì—¬ê¸° [ë‹¤ë¥¸ FTP ì„œë²„ì—ì„œ íŒŒì¼ì„ ë‹¤ìš´ë¡œë“œí•˜ë„ë¡ FTP ì„œë²„ë¥¼ ì•…ìš©í•˜ëŠ” ë°©ë²•ì— ëŒ€í•œ ì˜¤ë˜ëœ ì˜ˆì œê°€ ìˆìŠµë‹ˆë‹¤.](ftp-bounce-download-2oftp-file.md)

## Filezilla Server Vulnerability

**FileZilla**ëŠ” ì¼ë°˜ì ìœ¼ë¡œ **ë¡œì»¬**ì— **FileZilla-Server**(í¬íŠ¸ 14147)ë¥¼ ìœ„í•œ **ê´€ë¦¬ ì„œë¹„ìŠ¤**ë¥¼ **ë°”ì¸ë”©**í•©ë‹ˆë‹¤. ì´ í¬íŠ¸ì— ì ‘ê·¼í•˜ê¸° ìœ„í•´ **ë‹¹ì‹ ì˜ ë¨¸ì‹ **ì—ì„œ **í„°ë„**ì„ ìƒì„±í•  ìˆ˜ ìˆë‹¤ë©´, **ë¹ˆ ë¹„ë°€ë²ˆí˜¸**ë¥¼ ì‚¬ìš©í•˜ì—¬ **ì—°ê²°**í•˜ê³  FTP ì„œë¹„ìŠ¤ì— ëŒ€í•œ **ìƒˆ ì‚¬ìš©ì**ë¥¼ **ìƒì„±**í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## Config files
```
ftpusers
ftp.conf
proftpd.conf
vsftpd.conf
```
### Post-Exploitation

vsFTPdì˜ ê¸°ë³¸ êµ¬ì„±ì€ `/etc/vsftpd.conf`ì—ì„œ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì—¬ê¸°ì—ì„œ ëª‡ ê°€ì§€ ìœ„í—˜í•œ ì„¤ì •ì„ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤:

* `anonymous_enable=YES`
* `anon_upload_enable=YES`
* `anon_mkdir_write_enable=YES`
* `anon_root=/home/username/ftp` - ìµëª… ì‚¬ìš©ìë¥¼ ìœ„í•œ ë””ë ‰í† ë¦¬.
* `chown_uploads=YES` - ìµëª…ìœ¼ë¡œ ì—…ë¡œë“œëœ íŒŒì¼ì˜ ì†Œìœ ê¶Œ ë³€ê²½
* `chown_username=username` - ìµëª…ìœ¼ë¡œ ì—…ë¡œë“œëœ íŒŒì¼ì˜ ì†Œìœ ê¶Œì„ ë¶€ì—¬ë°›ëŠ” ì‚¬ìš©ì
* `local_enable=YES` - ë¡œì»¬ ì‚¬ìš©ìê°€ ë¡œê·¸ì¸í•  ìˆ˜ ìˆë„ë¡ í™œì„±í™”
* `no_anon_password=YES` - ìµëª… ì‚¬ìš©ìì—ê²Œ ë¹„ë°€ë²ˆí˜¸ë¥¼ ë¬»ì§€ ì•ŠìŒ
* `write_enable=YES` - ëª…ë ¹ í—ˆìš©: STOR, DELE, RNFR, RNTO, MKD, RMD, APPE, ë° SITE

### Shodan

* `ftp`
* `port:21`


## HackTricks Automatic Commands
```
Protocol_Name: FTP    #Protocol Abbreviation if there is one.
Port_Number:  21     #Comma separated if there is more than one.
Protocol_Description: File Transfer Protocol          #Protocol Abbreviation Spelled out

Entry_1:
Name: Notes
Description: Notes for FTP
Note: |
Anonymous Login
-bi     <<< so that your put is done via binary

wget --mirror 'ftp://ftp_user:UTDRSCH53c"$6hys@10.10.10.59'
^^to download all dirs and files

wget --no-passive-ftp --mirror 'ftp://anonymous:anonymous@10.10.10.98'
if PASV transfer is disabled

https://book.hacktricks.xyz/pentesting/pentesting-ftp

Entry_2:
Name: Banner Grab
Description: Grab FTP Banner via telnet
Command: telnet -n {IP} 21

Entry_3:
Name: Cert Grab
Description: Grab FTP Certificate if existing
Command: openssl s_client -connect {IP}:21 -starttls ftp

Entry_4:
Name: nmap ftp
Description: Anon login and bounce FTP checks are performed
Command: nmap --script ftp-* -p 21 {IP}

Entry_5:
Name: Browser Connection
Description: Connect with Browser
Note: ftp://anonymous:anonymous@{IP}

Entry_6:
Name: Hydra Brute Force
Description: Need Username
Command: hydra -t 1 -l {Username} -P {Big_Passwordlist} -vV {IP} ftp

Entry_7:
Name: consolesless mfs enumeration ftp
Description: FTP enumeration without the need to run msfconsole
Note: sourced from https://github.com/carlospolop/legion
Command: msfconsole -q -x 'use auxiliary/scanner/ftp/anonymous; set RHOSTS {IP}; set RPORT 21; run; exit' && msfconsole -q -x 'use auxiliary/scanner/ftp/ftp_version; set RHOSTS {IP}; set RPORT 21; run; exit' && msfconsole -q -x 'use auxiliary/scanner/ftp/bison_ftp_traversal; set RHOSTS {IP}; set RPORT 21; run; exit' && msfconsole -q -x 'use auxiliary/scanner/ftp/colorado_ftp_traversal; set RHOSTS {IP}; set RPORT 21; run; exit' &&  msfconsole -q -x 'use auxiliary/scanner/ftp/titanftp_xcrc_traversal; set RHOSTS {IP}; set RPORT 21; run; exit'
```
{% hint style="success" %}
AWS í•´í‚¹ ë°°ìš°ê¸° ë° ì—°ìŠµí•˜ê¸°:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
GCP í•´í‚¹ ë°°ìš°ê¸° ë° ì—°ìŠµí•˜ê¸°: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks ì§€ì›í•˜ê¸°</summary>

* [**êµ¬ë… ê³„íš**](https://github.com/sponsors/carlospolop) í™•ì¸í•˜ê¸°!
* **ğŸ’¬ [**ë””ìŠ¤ì½”ë“œ ê·¸ë£¹**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— ì°¸ì—¬í•˜ê±°ë‚˜ **íŠ¸ìœ„í„°** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**ë¥¼ íŒ”ë¡œìš°í•˜ì„¸ìš”.**
* **[**HackTricks**](https://github.com/carlospolop/hacktricks) ë° [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) ê¹ƒí—ˆë¸Œ ë¦¬í¬ì§€í† ë¦¬ì— PRì„ ì œì¶œí•˜ì—¬ í•´í‚¹ íŒì„ ê³µìœ í•˜ì„¸ìš”.**

</details>
{% endhint %}
