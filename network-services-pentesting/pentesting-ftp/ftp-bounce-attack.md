# FTP Bounce attack - Scan

{% hint style="success" %}
å­¦ä¹ ä¸å®è·µ AWS é»‘å®¢æŠ€æœ¯ï¼š<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks åŸ¹è®­ AWS çº¢é˜Ÿä¸“å®¶ (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
å­¦ä¹ ä¸å®è·µ GCP é»‘å®¢æŠ€æœ¯ï¼š<img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks åŸ¹è®­ GCP çº¢é˜Ÿä¸“å®¶ (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>æ”¯æŒ HackTricks</summary>

* æŸ¥çœ‹ [**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**Telegram ç¾¤ç»„**](https://t.me/peass) æˆ– **å…³æ³¨** æˆ‘ä»¬çš„ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub ä»“åº“æäº¤ PR æ¥åˆ†äº«é»‘å®¢æŠ€å·§ã€‚

</details>
{% endhint %}

## FTP Bounce - Scanning

### Manual

1. è¿æ¥åˆ°æ˜“å—æ”»å‡»çš„ FTP
2. ä½¿ç”¨ **`PORT`** æˆ– **`EPRT`**ï¼ˆä½†åªèƒ½ä½¿ç”¨å…¶ä¸­ä¸€ä¸ªï¼‰æ¥ä¸æ‚¨æƒ³è¦æ‰«æçš„ _\<IP:Port>_ å»ºç«‹è¿æ¥ï¼š

`PORT 172,32,80,80,0,8080`\
`EPRT |2|172.32.80.80|8080|`
3. ä½¿ç”¨ **`LIST`**ï¼ˆè¿™å°†ä»…å‘è¿æ¥çš„ _\<IP:Port>_ å‘é€ FTP æ–‡ä»¶å¤¹ä¸­å½“å‰æ–‡ä»¶çš„åˆ—è¡¨ï¼‰å¹¶æ£€æŸ¥å¯èƒ½çš„å“åº”ï¼š`150 File status okay`ï¼ˆè¿™æ„å‘³ç€ç«¯å£æ˜¯å¼€æ”¾çš„ï¼‰æˆ– `425 No connection established`ï¼ˆè¿™æ„å‘³ç€ç«¯å£æ˜¯å…³é—­çš„ï¼‰
4. é™¤äº† `LIST`ï¼Œæ‚¨è¿˜å¯ä»¥ä½¿ç”¨ **`RETR /file/in/ftp`** å¹¶å¯»æ‰¾ç±»ä¼¼çš„ `Open/Close` å“åº”ã€‚

ä½¿ç”¨ **PORT** çš„ç¤ºä¾‹ï¼ˆ172.32.80.80 çš„ 8080 ç«¯å£æ˜¯å¼€æ”¾çš„ï¼Œ7777 ç«¯å£æ˜¯å…³é—­çš„ï¼‰ï¼š

![](<../../.gitbook/assets/image (241).png>)

ä½¿ç”¨ **`EPRT`** çš„ç›¸åŒç¤ºä¾‹ï¼ˆå›¾ä¸­çœç•¥äº†èº«ä»½éªŒè¯ï¼‰ï¼š

![](<../../.gitbook/assets/image (539).png>)

ä½¿ç”¨ `EPRT` è€Œä¸æ˜¯ `LIST` æ‰“å¼€çš„ç«¯å£ï¼ˆä¸åŒç¯å¢ƒï¼‰

![](<../../.gitbook/assets/image (875).png>)

### **nmap**
```bash
nmap -b <name>:<pass>@<ftp_server> <victim>
nmap -Pn -v -p 21,80 -b ftp:ftp@10.2.1.5 127.0.0.1 #Scan ports 21,80 of the FTP
nmap -v -p 21,22,445,80,443 -b ftp:ftp@10.2.1.5 192.168.0.1/24 #Scan the internal network (of the FTP) ports 21,22,445,80,443
```
{% hint style="success" %}
å­¦ä¹ ä¸å®è·µ AWS é»‘å®¢æŠ€æœ¯ï¼š<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks åŸ¹è®­ AWS çº¢é˜Ÿä¸“å®¶ (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
å­¦ä¹ ä¸å®è·µ GCP é»‘å®¢æŠ€æœ¯ï¼š<img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks åŸ¹è®­ GCP çº¢é˜Ÿä¸“å®¶ (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>æ”¯æŒ HackTricks</summary>

* æŸ¥çœ‹ [**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**Telegram ç¾¤ç»„**](https://t.me/peass) æˆ– **å…³æ³¨** æˆ‘ä»¬çš„ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub ä»“åº“æäº¤ PR æ¥åˆ†äº«é»‘å®¢æŠ€å·§ã€‚

</details>
{% endhint %}
