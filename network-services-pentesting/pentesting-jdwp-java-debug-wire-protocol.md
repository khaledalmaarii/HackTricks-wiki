# æ¸—é€ JDWP - Java Debug Wire Protocol

<details>

<summary><strong>ä»é›¶å¼€å§‹å­¦ä¹  AWS é»‘å®¢æŠ€æœ¯ï¼Œæˆä¸ºä¸“å®¶</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTEï¼ˆHackTricks AWS çº¢é˜Ÿä¸“å®¶ï¼‰</strong></a><strong>ï¼</strong></summary>

æ”¯æŒ HackTricks çš„å…¶ä»–æ–¹å¼ï¼š

* å¦‚æœæ‚¨æƒ³åœ¨ HackTricks ä¸­çœ‹åˆ°æ‚¨çš„**å…¬å¸å¹¿å‘Š**æˆ–**ä¸‹è½½ PDF ç‰ˆçš„ HackTricks**ï¼Œè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* è·å–[**å®˜æ–¹ PEASS & HackTricks å•†å“**](https://peass.creator-spring.com)
* æ¢ç´¢[**PEASS å®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬çš„ç‹¬å®¶[**NFTs**](https://opensea.io/collection/the-peass-family)
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**ç”µæŠ¥ç¾¤ç»„**](https://t.me/peass) æˆ–åœ¨ **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live) ä¸Š **å…³æ³¨**æˆ‘ä»¬ã€‚
* é€šè¿‡å‘ [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github ä»“åº“æäº¤ PR æ¥**åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§**ã€‚

</details>

## åˆ©ç”¨

JDWP åˆ©ç”¨å–å†³äº**åè®®ç¼ºä¹èº«ä»½éªŒè¯å’ŒåŠ å¯†**ã€‚é€šå¸¸åœ¨**ç«¯å£ 8000**ä¸Šæ‰¾åˆ°ï¼Œä½†ä¹Ÿå¯èƒ½åœ¨å…¶ä»–ç«¯å£ä¸Šã€‚é€šè¿‡å‘ç›®æ ‡ç«¯å£å‘é€â€œJDWP-Handshakeâ€è¿›è¡Œåˆå§‹è¿æ¥ã€‚å¦‚æœå­˜åœ¨ JDWP æœåŠ¡ï¼Œå®ƒä¼šä»¥ç›¸åŒçš„å­—ç¬¦ä¸²å›å¤ï¼Œç¡®è®¤å…¶å­˜åœ¨ã€‚è¿™ä¸ªæ¡æ‰‹ä½œä¸ºä¸€ç§æŒ‡çº¹è¯†åˆ«æ–¹æ³•ï¼Œç”¨äºè¯†åˆ«ç½‘ç»œä¸Šçš„ JDWP æœåŠ¡ã€‚

åœ¨è¿›ç¨‹è¯†åˆ«æ–¹é¢ï¼Œæœç´¢ Java è¿›ç¨‹ä¸­çš„å­—ç¬¦ä¸²â€œjdwkâ€å¯èƒ½è¡¨æ˜å­˜åœ¨æ´»åŠ¨çš„ JDWP ä¼šè¯ã€‚

é¦–é€‰å·¥å…·æ˜¯ [jdwp-shellifier](https://github.com/hugsy/jdwp-shellifier)ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ä¸åŒçš„å‚æ•°ï¼š
```bash
./jdwp-shellifier.py -t 192.168.2.9 -p 8000 #Obtain internal data
./jdwp-shellifier.py -t 192.168.2.9 -p 8000 --cmd 'ncat -l -p 1337 -e /bin/bash' #Exec something
./jdwp-shellifier.py -t 192.168.2.9 -p 8000 --break-on 'java.lang.String.indexOf' --cmd 'ncat -l -p 1337 -e /bin/bash' #Uses java.lang.String.indexOf as breakpoint instead of java.net.ServerSocket.accept
```
æˆ‘å‘ç°ä½¿ç”¨`--break-on 'java.lang.String.indexOf'`ä½¿å¾—åˆ©ç”¨æ›´åŠ **ç¨³å®š**ã€‚å¦‚æœä½ æœ‰æœºä¼šä¸Šä¼ ä¸€ä¸ªåé—¨åˆ°ä¸»æœºå¹¶æ‰§è¡Œå®ƒè€Œä¸æ˜¯æ‰§è¡Œä¸€ä¸ªå‘½ä»¤ï¼Œé‚£ä¹ˆåˆ©ç”¨å°†ä¼šæ›´åŠ ç¨³å®šã€‚

## æ›´å¤šç»†èŠ‚

**è¿™æ˜¯[https://ioactive.com/hacking-java-debug-wire-protocol-or-how/](https://ioactive.com/hacking-java-debug-wire-protocol-or-how/)çš„æ‘˜è¦**ã€‚æŸ¥çœ‹ä»¥è·å–æ›´å¤šç»†èŠ‚ã€‚

1. **JDWP æ¦‚è¿°**:
- è¿™æ˜¯ä¸€ä¸ªåŸºäºæ•°æ®åŒ…çš„ç½‘ç»œäºŒè¿›åˆ¶åè®®ï¼Œä¸»è¦æ˜¯åŒæ­¥çš„ã€‚
- ç¼ºä¹èº«ä»½éªŒè¯å’ŒåŠ å¯†ï¼Œä½¿å…¶åœ¨æš´éœ²äºæ•Œå¯¹ç½‘ç»œæ—¶å®¹æ˜“å—åˆ°æ”»å‡»ã€‚

2. **JDWP æ¡æ‰‹**:
- ä½¿ç”¨ç®€å•çš„æ¡æ‰‹è¿‡ç¨‹æ¥å¯åŠ¨é€šä¿¡ã€‚è°ƒè¯•å™¨ï¼ˆå®¢æˆ·ç«¯ï¼‰å’Œè¢«è°ƒè¯•è€…ï¼ˆæœåŠ¡å™¨ï¼‰ä¹‹é—´äº¤æ¢ä¸€ä¸ª14ä¸ªå­—ç¬¦çš„ASCIIå­—ç¬¦ä¸²â€œJDWP-Handshakeâ€ã€‚

3. **JDWP é€šä¿¡**:
- æ¶ˆæ¯å…·æœ‰ç®€å•çš„ç»“æ„ï¼ŒåŒ…å«é•¿åº¦ã€IDã€æ ‡å¿—å’Œå‘½ä»¤é›†ç­‰å­—æ®µã€‚
- å‘½ä»¤é›†çš„å€¼èŒƒå›´ä»0x40åˆ°0x80ï¼Œä»£è¡¨ä¸åŒçš„æ“ä½œå’Œäº‹ä»¶ã€‚

4. **åˆ©ç”¨**:
- JDWPå…è®¸åŠ è½½å’Œè°ƒç”¨ä»»æ„ç±»å’Œå­—èŠ‚ç ï¼Œå­˜åœ¨å®‰å…¨é£é™©ã€‚
- è¯¥æ–‡ç« è¯¦ç»†ä»‹ç»äº†ä¸€ä¸ªåˆ©ç”¨è¿‡ç¨‹ï¼ŒåŒ…æ‹¬è·å–Javaè¿è¡Œæ—¶å¼•ç”¨ã€è®¾ç½®æ–­ç‚¹å’Œè°ƒç”¨æ–¹æ³•ç­‰äº”ä¸ªæ­¥éª¤ã€‚

5. **å®é™…åˆ©ç”¨**:
- å°½ç®¡å­˜åœ¨æ½œåœ¨çš„é˜²ç«å¢™ä¿æŠ¤ï¼ŒJDWPæœåŠ¡åœ¨ç°å®ä¸–ç•Œçš„åœºæ™¯ä¸­æ˜¯å¯å‘ç°å’Œå¯åˆ©ç”¨çš„ï¼Œå¦‚åœ¨ShodanHQå’ŒGitHubç­‰å¹³å°ä¸Šçš„æœç´¢æ‰€ç¤ºã€‚
- è¯¥åˆ©ç”¨è„šæœ¬å·²é’ˆå¯¹å„ç§JDKç‰ˆæœ¬è¿›è¡Œæµ‹è¯•ï¼Œä¸”ä¸å¹³å°æ— å…³ï¼Œæä¾›å¯é çš„è¿œç¨‹ä»£ç æ‰§è¡Œï¼ˆRCEï¼‰ã€‚

6. **å®‰å…¨å½±å“**:
- äº’è”ç½‘ä¸Šå­˜åœ¨å¼€æ”¾çš„JDWPæœåŠ¡ï¼Œå¼ºè°ƒäº†éœ€è¦å®šæœŸè¿›è¡Œå®‰å…¨å®¡æŸ¥ã€åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ç¦ç”¨è°ƒè¯•åŠŸèƒ½ä»¥åŠæ­£ç¡®é…ç½®é˜²ç«å¢™çš„å¿…è¦æ€§ã€‚

### **å‚è€ƒèµ„æ–™:**

* [[https://ioactive.com/hacking-java-debug-wire-protocol-or-how/](https://ioactive.com/hacking-java-debug-wire-protocol-or-how/)]
* [https://github.com/IOActive/jdwp-shellifier](https://github.com/IOActive/jdwp-shellifier)
* [http://docs.oracle.com/javase/7/docs/technotes/guides/jpda/architecture.html](http://docs.oracle.com/javase/7/docs/technotes/guides/jpda/architecture.html)
* http://www.secdev.org/projects/scapyï¼ˆå·²ä¸å†æ´»è·ƒï¼‰
* [http://www.shodanhq.com/search?q=JDWP-HANDSHAKE](http://www.shodanhq.com/search?q=JDWP-HANDSHAKE)
* http://www.hsc-news.com/archives/2013/000109.htmlï¼ˆå·²ä¸å†æ´»è·ƒï¼‰
* [http://packetstormsecurity.com/files/download/122525/JDWP-exploitation.txt](http://packetstormsecurity.com/files/download/122525/JDWP-exploitation.txt)
* https://github.com/search?q=-Xdebug+-Xrunjdwp\&type=Code\&ref=searchresults
* [http://docs.oracle.com/javase/6/docs/api/java/lang/Runtime.html](http://docs.oracle.com/javase/6/docs/api/java/lang/Runtime.html)
* [http://docs.oracle.com/javase/1.5.0/docs/guide/jpda/jdwp-spec.html](http://docs.oracle.com)
* [http://docs.oracle.com/javase/1.5.0/docs/guide/jpda/jdwp/jdwp-protocol.html](http://docs.oracle.com/javase/1.5.0/docs/guide/jpda/jdwp/jdwp-protocol.html)
* [http://nmap.org/nsedoc/scripts/jdwp-exec.html](http://nmap.org/nsedoc/scripts/jdwp-exec.html)

<details>

<summary><strong>ä»é›¶å¼€å§‹å­¦ä¹ AWSé»‘å®¢æŠ€æœ¯ï¼Œæˆä¸ºä¸“å®¶</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTEï¼ˆHackTricks AWS Red Team Expertï¼‰</strong></a><strong>ï¼</strong></summary>

æ”¯æŒHackTricksçš„å…¶ä»–æ–¹å¼:

* å¦‚æœæ‚¨æƒ³çœ‹åˆ°æ‚¨çš„**å…¬å¸åœ¨HackTricksä¸­åšå¹¿å‘Š**æˆ–**ä¸‹è½½PDFæ ¼å¼çš„HackTricks**ï¼Œè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* è·å–[**å®˜æ–¹PEASS & HackTrickså‘¨è¾¹äº§å“**](https://peass.creator-spring.com)
* æ¢ç´¢[**PEASS Family**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬çš„ç‹¬å®¶[NFTs](https://opensea.io/collection/the-peass-family)ç³»åˆ—
* **åŠ å…¥** ğŸ’¬ [**Discordç¾¤**](https://discord.gg/hRep4RUj7f) æˆ– [**ç”µæŠ¥ç¾¤**](https://t.me/peass) æˆ–åœ¨**Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)**ä¸Šå…³æ³¨**æˆ‘ä»¬ã€‚
* é€šè¿‡å‘[**HackTricks**](https://github.com/carlospolop/hacktricks)å’Œ[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) githubä»“åº“æäº¤PRæ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚

</details>
