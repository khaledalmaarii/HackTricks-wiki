# 88tcp/udp - Test d'intrusion Kerberos

<details>

<summary><strong>Apprenez le piratage AWS de z√©ro √† h√©ros avec</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (Expert en √©quipe rouge AWS de HackTricks)</strong></a><strong>!</strong></summary>

Autres fa√ßons de soutenir HackTricks :

* Si vous souhaitez voir votre **entreprise annonc√©e dans HackTricks** ou **t√©l√©charger HackTricks en PDF**, consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop) !
* Obtenez le [**swag officiel PEASS & HackTricks**](https://peass.creator-spring.com)
* D√©couvrez [**La famille PEASS**](https://opensea.io/collection/the-peass-family), notre collection exclusive de [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Rejoignez le** üí¨ [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe Telegram**](https://t.me/peass) ou **suivez-nous** sur **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Partagez vos astuces de piratage en soumettant des PR aux** [**HackTricks**](https://github.com/carlospolop/hacktricks) et [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) d√©p√¥ts GitHub.

</details>

## Informations de base

**Kerberos** fonctionne sur un principe o√π il authentifie les utilisateurs sans g√©rer directement leur acc√®s aux ressources. C'est une distinction importante car elle souligne le r√¥le du protocole dans les cadres de s√©curit√©.

Dans des environnements tels que **Active Directory**, **Kerberos** est essentiel pour √©tablir l'identit√© des utilisateurs en validant leurs mots de passe secrets. Ce processus garantit que l'identit√© de chaque utilisateur est confirm√©e avant qu'ils n'interagissent avec les ressources du r√©seau. Cependant, **Kerberos** n'√©tend pas sa fonctionnalit√© pour √©valuer ou imposer les autorisations qu'un utilisateur a sur des ressources ou des services sp√©cifiques. Au lieu de cela, il fournit un moyen s√©curis√© d'authentifier les utilisateurs, ce qui est une premi√®re √©tape critique dans le processus de s√©curit√©.

Apr√®s l'authentification par **Kerberos**, le processus de prise de d√©cision concernant l'acc√®s aux ressources est d√©l√©gu√© aux services individuels au sein du r√©seau. Ces services sont alors responsables d'√©valuer les droits et autorisations de l'utilisateur authentifi√©, en fonction des informations fournies par **Kerberos** sur les privil√®ges de l'utilisateur. Cette conception permet une s√©paration des pr√©occupations entre l'authentification de l'identit√© des utilisateurs et la gestion de leurs droits d'acc√®s, permettant une approche plus flexible et s√©curis√©e de la gestion des ressources dans les r√©seaux distribu√©s.

**Port par d√©faut :** 88/tcp/udp
```
PORT   STATE SERVICE
88/tcp open  kerberos-sec
```
### **Pour apprendre comment abuser de Kerberos, vous devriez lire l'article sur** [**Active Directory**](../../windows-hardening/active-directory-methodology/)**.**

## Plus

### Shodan

* `port:88 kerberos`

### MS14-068

La faille MS14-068 permet √† un attaquant de manipuler le jeton d'authentification Kerberos d'un utilisateur l√©gitime pour revendiquer faussement des privil√®ges √©lev√©s, tels que ceux d'un administrateur de domaine. Cette revendication contrefaite est erron√©ment valid√©e par le contr√¥leur de domaine, permettant un acc√®s non autoris√© aux ressources r√©seau √† travers la for√™t Active Directory.

{% embed url="https://adsecurity.org/?p=541" %}

Autres exploits : [https://github.com/SecWiki/windows-kernel-exploits/tree/master/MS14-068/pykek](https://github.com/SecWiki/windows-kernel-exploits/tree/master/MS14-068/pykek)

## Commandes Automatiques HackTricks
```
Protocol_Name: Kerberos    #Protocol Abbreviation if there is one.
Port_Number:  88   #Comma separated if there is more than one.
Protocol_Description: AD Domain Authentication         #Protocol Abbreviation Spelled out

Entry_1:
Name: Notes
Description: Notes for Kerberos
Note: |
Kerberos operates on a principle where it authenticates users without directly managing their access to resources. This is an important distinction because it underlines the protocol's role in security frameworks.
In environments like **Active Directory**, Kerberos is instrumental in establishing the identity of users by validating their secret passwords. This process ensures that each user's identity is confirmed before they interact with network resources. However, Kerberos does not extend its functionality to evaluate or enforce the permissions a user has over specific resources or services. Instead, it provides a secure way of authenticating users, which is a critical first step in the security process.

https://book.hacktricks.xyz/pentesting/pentesting-kerberos-88

Entry_2:
Name: Pre-Creds
Description: Brute Force to get Usernames
Command: nmap -p 88 --script=krb5-enum-users --script-args krb5-enum-users.realm="{Domain_Name}",userdb={Big_Userlist} {IP}

Entry_3:
Name: With Usernames
Description: Brute Force with Usernames and Passwords
Note: consider git clone https://github.com/ropnop/kerbrute.git ./kerbrute -h

Entry_4:
Name: With Creds
Description: Attempt to get a list of user service principal names
Command: GetUserSPNs.py -request -dc-ip {IP} active.htb/svc_tgs
```
<details>

<summary><strong>Apprenez le piratage AWS de z√©ro √† h√©ros avec</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (Expert de l'√©quipe rouge AWS de HackTricks)</strong></a><strong>!</strong></summary>

Autres fa√ßons de soutenir HackTricks:

* Si vous souhaitez voir votre **entreprise annonc√©e dans HackTricks** ou **t√©l√©charger HackTricks en PDF**, consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop)!
* Obtenez le [**swag officiel PEASS & HackTricks**](https://peass.creator-spring.com)
* D√©couvrez [**La famille PEASS**](https://opensea.io/collection/the-peass-family), notre collection exclusive de [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Rejoignez le** üí¨ [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe Telegram**](https://t.me/peass) ou **suivez-nous** sur **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Partagez vos astuces de piratage en soumettant des PR aux** [**HackTricks**](https://github.com/carlospolop/hacktricks) et [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) d√©p√¥ts GitHub.

</details>
