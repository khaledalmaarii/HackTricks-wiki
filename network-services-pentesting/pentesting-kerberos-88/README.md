# 88tcp/udp - å¯¹ Kerberos çš„æ¸—é€æµ‹è¯•

<details>

<summary><strong>ä»é›¶å¼€å§‹å­¦ä¹  AWS é»‘å®¢æ”»å‡»ç›´åˆ°æˆä¸ºä¸“å®¶</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS çº¢é˜Ÿä¸“å®¶)</strong></a><strong>ï¼</strong></summary>

æ”¯æŒ HackTricks çš„å…¶ä»–æ–¹å¼ï¼š

* å¦‚æœæ‚¨å¸Œæœ›åœ¨ **HackTricks ä¸­çœ‹åˆ°æ‚¨çš„å…¬å¸å¹¿å‘Š** æˆ– **ä¸‹è½½ HackTricks çš„ PDF ç‰ˆæœ¬**ï¼Œè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼
* è·å– [**å®˜æ–¹çš„ PEASS & HackTricks å•†å“**](https://peass.creator-spring.com)
* å‘ç° [**PEASS å®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬ç‹¬å®¶çš„ [**NFT é›†åˆ**](https://opensea.io/collection/the-peass-family)
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**telegram ç¾¤ç»„**](https://t.me/peass) æˆ–åœ¨ **Twitter** ğŸ¦ ä¸Š**å…³æ³¨**æˆ‘ [**@carlospolopm**](https://twitter.com/carlospolopm)**ã€‚**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github ä»“åº“æäº¤ PR æ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚

</details>

## åŸºæœ¬ä¿¡æ¯

é¦–å…ˆï¼ŒKerberos æ˜¯ä¸€ç§è®¤è¯åè®®ï¼Œè€Œä¸æ˜¯æˆæƒåè®®ã€‚æ¢å¥è¯è¯´ï¼Œå®ƒå…è®¸è¯†åˆ«æ¯ä¸ªç”¨æˆ·ï¼Œç”¨æˆ·æä¾›ä¸€ä¸ªç§˜å¯†å¯†ç ï¼Œä½†å®ƒä¸éªŒè¯ç”¨æˆ·å¯ä»¥è®¿é—®å“ªäº›èµ„æºæˆ–æœåŠ¡ã€‚\
Kerberos åœ¨ Active Directory ä¸­ä½¿ç”¨ã€‚åœ¨è¿™ä¸ªå¹³å°ä¸­ï¼ŒKerberos æä¾›æœ‰å…³æ¯ä¸ªç”¨æˆ·æƒé™çš„ä¿¡æ¯ï¼Œä½†æ¯ä¸ªæœåŠ¡æœ‰è´£ä»»ç¡®å®šç”¨æˆ·æ˜¯å¦å¯ä»¥è®¿é—®å…¶èµ„æºã€‚

**é»˜è®¤ç«¯å£ï¼š** 88/tcp/udp
```
PORT   STATE SERVICE
88/tcp open  kerberos-sec
```
### **è¦äº†è§£å¦‚ä½•æ»¥ç”¨Kerberosï¼Œæ‚¨åº”è¯¥é˜…è¯»æœ‰å…³** [**Active Directory**](../../windows-hardening/active-directory-methodology/)**çš„æ–‡ç« ã€‚**

## æ›´å¤šä¿¡æ¯

### Shodan

* `port:88 kerberos`

### MS14-068

ç®€å•æ¥è¯´ï¼Œè¿™ä¸ªæ¼æ´å…è®¸æ”»å‡»è€…ä¿®æ”¹ä¸€ä¸ªç°æœ‰çš„ã€æœ‰æ•ˆçš„ã€åŸŸç”¨æˆ·ç™»å½•ä»¤ç‰Œï¼ˆKerberos Ticket Granting Ticketï¼ŒTGTï¼Œç¥¨æ®ï¼‰ï¼Œé€šè¿‡æ·»åŠ è™šå‡å£°æ˜ï¼Œå³ç”¨æˆ·æ˜¯Domain Adminsï¼ˆæˆ–å…¶ä»–æ•æ„Ÿç»„ï¼‰çš„æˆå‘˜ï¼ŒåŸŸæ§åˆ¶å™¨ï¼ˆDCï¼‰å°†éªŒè¯é‚£ä¸ªï¼ˆè™šå‡çš„ï¼‰å£°æ˜ï¼Œä½¿æ”»å‡»è€…èƒ½å¤Ÿä¸å½“åœ°è®¿é—®ç½‘ç»œä¸Šä»»ä½•åŸŸï¼ˆåœ¨ADæ£®æ—ä¸­ï¼‰çš„èµ„æºã€‚

{% embed url="https://adsecurity.org/?p=541" %}

å…¶ä»–æ¼æ´åˆ©ç”¨å·¥å…·: [https://github.com/SecWiki/windows-kernel-exploits/tree/master/MS14-068/pykek](https://github.com/SecWiki/windows-kernel-exploits/tree/master/MS14-068/pykek)

## HackTricks è‡ªåŠ¨å‘½ä»¤
```
Protocol_Name: Kerberos    #Protocol Abbreviation if there is one.
Port_Number:  88   #Comma separated if there is more than one.
Protocol_Description: AD Domain Authentication         #Protocol Abbreviation Spelled out

Entry_1:
Name: Notes
Description: Notes for Kerberos
Note: |
Firstly, Kerberos is an authentication protocol, not authorization. In other words, it allows to identify each user, who provides a secret password, however, it does not validates to which resources or services can this user access.
Kerberos is used in Active Directory. In this platform, Kerberos provides information about the privileges of each user, but it is the responsability of each service to determine if the user has access to its resources.

https://book.hacktricks.xyz/pentesting/pentesting-kerberos-88

Entry_2:
Name: Pre-Creds
Description: Brute Force to get Usernames
Command: nmap -p 88 --script=krb5-enum-users --script-args krb5-enum-users.realm="{Domain_Name}",userdb={Big_Userlist} {IP}

Entry_3:
Name: With Usernames
Description: Brute Force with Usernames and Passwords
Note: consider git clonehttps://github.com/ropnop/kerbrute.git ./kerbrute -h

Entry_4:
Name: With Creds
Description: Attempt to get a list of user service principal names
Command: GetUserSPNs.py -request -dc-ip {IP} active.htb/svc_tgs
```
<details>

<summary><strong>ä»é›¶å¼€å§‹å­¦ä¹ AWSé»‘å®¢æ”»å‡»ç›´è‡³æˆä¸ºä¸“å®¶ï¼Œé€šè¿‡</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

æ”¯æŒHackTricksçš„å…¶ä»–æ–¹å¼:

* å¦‚æœæ‚¨æƒ³åœ¨**HackTricksä¸­çœ‹åˆ°æ‚¨çš„å…¬å¸å¹¿å‘Š**æˆ–**ä»¥PDFæ ¼å¼ä¸‹è½½HackTricks**ï¼Œè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* è·å–[**å®˜æ–¹PEASS & HackTrickså•†å“**](https://peass.creator-spring.com)
* å‘ç°[**PEASSå®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬ç‹¬å®¶çš„[**NFTsç³»åˆ—**](https://opensea.io/collection/the-peass-family)
* **åŠ å…¥** ğŸ’¬ [**Discordç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**telegramç¾¤ç»„**](https://t.me/peass) æˆ–åœ¨**Twitter** ğŸ¦ ä¸Š**å…³æ³¨**æˆ‘ [**@carlospolopm**](https://twitter.com/carlospolopm)**ã€‚**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) githubä»“åº“æäº¤PRæ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚

</details>
