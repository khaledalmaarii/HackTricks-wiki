# 88tcp/udp - Kerberos Pentest

<details>

<summary><strong>AWS hacklemeyi sÄ±fÄ±rdan kahraman olmak iÃ§in</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ±)</strong></a><strong>!</strong></summary>

HackTricks'Ä± desteklemenin diÄŸer yollarÄ±:

* **Åirketinizi HackTricks'te reklamÄ±nÄ±zÄ± gÃ¶rmek** veya **HackTricks'i PDF olarak indirmek** iÃ§in [**ABONELÄ°K PLANLARI**](https://github.com/sponsors/carlospolop)'na gÃ¶z atÄ±n!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* [**The PEASS Ailesi'ni**](https://opensea.io/collection/the-peass-family) keÅŸfedin, Ã¶zel [**NFT'lerimiz**](https://opensea.io/collection/the-peass-family) koleksiyonumuz
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katÄ±lÄ±n** veya **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)'u **takip edin**.
* **Hacking hilelerinizi** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarÄ±na **PR gÃ¶ndererek paylaÅŸÄ±n**.

</details>

## Temel Bilgiler

**Kerberos**, kullanÄ±cÄ±larÄ±n eriÅŸimlerini doÄŸrudan yÃ¶netmeden kimlik doÄŸrulamasÄ±nÄ± gerÃ§ekleÅŸtiren bir prensip Ã¼zerinde Ã§alÄ±ÅŸÄ±r. Bu, protokolÃ¼n gÃ¼venlik Ã§erÃ§evelerindeki rolÃ¼nÃ¼ vurgulayan Ã¶nemli bir ayrÄ±mdÄ±r.

**Active Directory** gibi ortamlarda, **Kerberos**, gizli parolalarÄ±nÄ± doÄŸrulayarak kullanÄ±cÄ±larÄ±n kimliklerini belirlemekte Ã¶nemli bir rol oynar. Bu sÃ¼reÃ§, her kullanÄ±cÄ±nÄ±n kimliÄŸinin aÄŸ kaynaklarÄ±yla etkileÅŸime geÃ§meden Ã¶nce doÄŸrulandÄ±ÄŸÄ±ndan emin olur. Ancak, **Kerberos**, kullanÄ±cÄ±nÄ±n belirli kaynaklar veya hizmetler Ã¼zerindeki izinlerini deÄŸerlendirmek veya uygulamak iÃ§in iÅŸlevselliÄŸini geniÅŸletmez. Bunun yerine, kullanÄ±cÄ±larÄ±n kimliklerini doÄŸrulamanÄ±n gÃ¼venli bir yolunu saÄŸlayarak, gÃ¼venlik sÃ¼recindeki kritik bir ilk adÄ±mÄ± gerÃ§ekleÅŸtirir.

**Kerberos** tarafÄ±ndan kimlik doÄŸrulamasÄ± yapÄ±ldÄ±ktan sonra, kaynaklara eriÅŸimle ilgili karar verme sÃ¼reci aÄŸdaki bireysel hizmetlere devredilir. Bu hizmetler, **Kerberos** tarafÄ±ndan kullanÄ±cÄ±nÄ±n ayrÄ±calÄ±klarÄ± hakkÄ±nda saÄŸlanan bilgilere dayanarak, kimlik doÄŸrulanmÄ±ÅŸ kullanÄ±cÄ±nÄ±n haklarÄ±nÄ± ve izinlerini deÄŸerlendirmekten sorumludur. Bu tasarÄ±m, kullanÄ±cÄ±larÄ±n kimliklerini doÄŸrulamak ve eriÅŸim haklarÄ±nÄ± yÃ¶netmek arasÄ±nda bir sorumluluk ayrÄ±mÄ± yapÄ±lmasÄ±nÄ± saÄŸlar, daÄŸÄ±tÄ±lmÄ±ÅŸ aÄŸlarda kaynak yÃ¶netimine daha esnek ve gÃ¼venli bir yaklaÅŸÄ±m sunar.

**VarsayÄ±lan Port:** 88/tcp/udp
```
PORT   STATE SERVICE
88/tcp open  kerberos-sec
```
### **Kerberos'i kÃ¶tÃ¼ye kullanmayÄ± Ã¶ÄŸrenmek iÃ§in** [**Active Directory**](../../windows-hardening/active-directory-methodology/)** hakkÄ±ndaki yazÄ±yÄ± okumalÄ±sÄ±nÄ±z.**

## Daha Fazla

### Shodan

* `port:88 kerberos`

### MS14-068

MS14-068 aÃ§Ä±ÄŸÄ±, bir saldÄ±rganÄ±n meÅŸru bir kullanÄ±cÄ±nÄ±n Kerberos giriÅŸ belgesini deÄŸiÅŸtirmesine izin verir ve bÃ¶ylece bir Etki AlanÄ± YÃ¶neticisi gibi yÃ¼kseltilmiÅŸ ayrÄ±calÄ±klar iddia edebilir. Bu sahte iddia, Etki AlanÄ± Denetleyicisi tarafÄ±ndan yanlÄ±ÅŸlÄ±kla doÄŸrulanÄ±r ve Active Directory ormanÄ± boyunca aÄŸ kaynaklarÄ±na izinsiz eriÅŸime olanak tanÄ±r.

{% embed url="https://adsecurity.org/?p=541" %}

DiÄŸer saldÄ±rÄ±lar: [https://github.com/SecWiki/windows-kernel-exploits/tree/master/MS14-068/pykek](https://github.com/SecWiki/windows-kernel-exploits/tree/master/MS14-068/pykek)

## HackTricks Otomatik KomutlarÄ±
```
Protocol_Name: Kerberos    #Protocol Abbreviation if there is one.
Port_Number:  88   #Comma separated if there is more than one.
Protocol_Description: AD Domain Authentication         #Protocol Abbreviation Spelled out

Entry_1:
Name: Notes
Description: Notes for Kerberos
Note: |
Kerberos operates on a principle where it authenticates users without directly managing their access to resources. This is an important distinction because it underlines the protocol's role in security frameworks.
In environments like **Active Directory**, Kerberos is instrumental in establishing the identity of users by validating their secret passwords. This process ensures that each user's identity is confirmed before they interact with network resources. However, Kerberos does not extend its functionality to evaluate or enforce the permissions a user has over specific resources or services. Instead, it provides a secure way of authenticating users, which is a critical first step in the security process.

https://book.hacktricks.xyz/pentesting/pentesting-kerberos-88

Entry_2:
Name: Pre-Creds
Description: Brute Force to get Usernames
Command: nmap -p 88 --script=krb5-enum-users --script-args krb5-enum-users.realm="{Domain_Name}",userdb={Big_Userlist} {IP}

Entry_3:
Name: With Usernames
Description: Brute Force with Usernames and Passwords
Note: consider git clonehttps://github.com/ropnop/kerbrute.git ./kerbrute -h

Entry_4:
Name: With Creds
Description: Attempt to get a list of user service principal names
Command: GetUserSPNs.py -request -dc-ip {IP} active.htb/svc_tgs
```
<details>

<summary><strong>AWS hackleme becerilerini sÄ±fÄ±rdan kahraman seviyesine Ã¶ÄŸrenmek iÃ§in</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ±)</strong></a><strong>'Ä± Ã¶ÄŸrenin!</strong></summary>

HackTricks'Ä± desteklemenin diÄŸer yollarÄ±:

* **Åirketinizi HackTricks'te reklamÄ±nÄ± gÃ¶rmek** veya **HackTricks'i PDF olarak indirmek** iÃ§in [**ABONELÄ°K PLANLARINI**](https://github.com/sponsors/carlospolop) kontrol edin!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* [**The PEASS Ailesi'ni**](https://opensea.io/collection/the-peass-family) keÅŸfedin, Ã¶zel [**NFT'lerimiz**](https://opensea.io/collection/the-peass-family) koleksiyonumuz
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katÄ±lÄ±n** veya **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)'u **takip edin**.
* **Hacking hilelerinizi HackTricks** ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarÄ±na **PR gÃ¶ndererek paylaÅŸÄ±n**.

</details>
