# 88tcp/udp - Testiranje Kerberosa

<details>

<summary><strong>NauÄite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Drugi naÄini podrÅ¡ke HackTricks-u:

* Ako Å¾elite da vidite **vaÅ¡u kompaniju reklamiranu na HackTricks-u** ili da **preuzmete HackTricks u PDF formatu** proverite [**PLANOVE ZA PRIJAVU**](https://github.com/sponsors/carlospolop)!
* Nabavite [**zvaniÄni PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Otkrijte [**Porodicu PEASS**](https://opensea.io/collection/the-peass-family), naÅ¡u kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* **PridruÅ¾ite se** ğŸ’¬ [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili nas **pratite** na **Twitteru** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Podelite svoje hakovanje trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>

## Osnovne informacije

**Kerberos** funkcioniÅ¡e na principu gde autentifikuje korisnike bez direktnog upravljanja njihovim pristupom resursima. Ovo je vaÅ¾na razlika jer istiÄe ulogu protokola u okvirima bezbednosnih struktura.

U okruÅ¾enjima poput **Active Directory**, **Kerberos** je instrumentalan u utvrÄ‘ivanju identiteta korisnika validacijom njihovih tajnih lozinki. Ovaj proces osigurava da se identitet svakog korisnika potvrdi pre nego Å¡to interaguju sa mreÅ¾nim resursima. MeÄ‘utim, **Kerberos** ne proÅ¡iruje svoju funkcionalnost na procenu ili sprovoÄ‘enje dozvola koje korisnik ima nad odreÄ‘enim resursima ili uslugama. Umesto toga, pruÅ¾a siguran naÄin autentifikacije korisnika, Å¡to je kljuÄni prvi korak u procesu bezbednosti.

Nakon autentifikacije od strane **Kerberosa**, proces donoÅ¡enja odluka u vezi sa pristupom resursima je delegiran pojedinaÄnim uslugama unutar mreÅ¾e. Te usluge su zatim odgovorne za procenu prava i dozvola autentifikovanog korisnika, na osnovu informacija koje je **Kerberos** pruÅ¾io o privilegijama korisnika. Ovaj dizajn omoguÄ‡ava razdvajanje brige izmeÄ‘u autentifikacije identiteta korisnika i upravljanja njihovim pravima pristupa, omoguÄ‡avajuÄ‡i fleksibilniji i sigurniji pristup upravljanju resursima u distribuiranim mreÅ¾ama.

**Podrazumevani port:** 88/tcp/udp
```
PORT   STATE SERVICE
88/tcp open  kerberos-sec
```
### **Da biste nauÄili kako zloupotrebiti Kerberos, trebalo bi da proÄitate post o** [**Active Directory**](../../windows-hardening/active-directory-methodology/)**.**

## ViÅ¡e

### Shodan

* `port:88 kerberos`

### MS14-068

MS14-068 propust omoguÄ‡ava napadaÄu da manipuliÅ¡e legitimnim Korberovim login tokenom korisnika kako bi laÅ¾no tvrdio poviÅ¡ene privilegije, poput bivanja Domain Admin. Ovaj laÅ¾ni zahtev greÅ¡kom se validira od strane Domain Controller-a, omoguÄ‡avajuÄ‡i neovlaÅ¡Ä‡en pristup mreÅ¾nim resursima Å¡irom Active Directory Å¡ume.

{% embed url="https://adsecurity.org/?p=541" %}

Drugi eksploiti: [https://github.com/SecWiki/windows-kernel-exploits/tree/master/MS14-068/pykek](https://github.com/SecWiki/windows-kernel-exploits/tree/master/MS14-068/pykek)

## HackTricks Automatske Komande
```
Protocol_Name: Kerberos    #Protocol Abbreviation if there is one.
Port_Number:  88   #Comma separated if there is more than one.
Protocol_Description: AD Domain Authentication         #Protocol Abbreviation Spelled out

Entry_1:
Name: Notes
Description: Notes for Kerberos
Note: |
Kerberos operates on a principle where it authenticates users without directly managing their access to resources. This is an important distinction because it underlines the protocol's role in security frameworks.
In environments like **Active Directory**, Kerberos is instrumental in establishing the identity of users by validating their secret passwords. This process ensures that each user's identity is confirmed before they interact with network resources. However, Kerberos does not extend its functionality to evaluate or enforce the permissions a user has over specific resources or services. Instead, it provides a secure way of authenticating users, which is a critical first step in the security process.

https://book.hacktricks.xyz/pentesting/pentesting-kerberos-88

Entry_2:
Name: Pre-Creds
Description: Brute Force to get Usernames
Command: nmap -p 88 --script=krb5-enum-users --script-args krb5-enum-users.realm="{Domain_Name}",userdb={Big_Userlist} {IP}

Entry_3:
Name: With Usernames
Description: Brute Force with Usernames and Passwords
Note: consider git clone https://github.com/ropnop/kerbrute.git ./kerbrute -h

Entry_4:
Name: With Creds
Description: Attempt to get a list of user service principal names
Command: GetUserSPNs.py -request -dc-ip {IP} active.htb/svc_tgs
```
<details>

<summary><strong>NauÄite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Drugi naÄini podrÅ¡ke HackTricks-u:

* Ako Å¾elite da vidite svoju **kompaniju reklamiranu na HackTricks-u** ili da **preuzmete HackTricks u PDF formatu** proverite [**PLANOVE ZA PRIJEM**](https://github.com/sponsors/carlospolop)!
* Nabavite [**zvaniÄni PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Otkrijte [**Porodicu PEASS**](https://opensea.io/collection/the-peass-family), naÅ¡u kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* **PridruÅ¾ite se** ğŸ’¬ [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili nas **pratite** na **Twitteru** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Podelite svoje hakovanje trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>
