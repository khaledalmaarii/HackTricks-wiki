# 123/udp - Pentesting NTP

<details>

<summary><strong>NauÄite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Drugi naÄini podrÅ¡ke HackTricks-u:

* Ako Å¾elite da vidite **vaÅ¡u kompaniju reklamiranu na HackTricks-u** ili **preuzmete HackTricks u PDF formatu** proverite [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Nabavite [**zvaniÄni PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Otkrijte [**The PEASS Family**](https://opensea.io/collection/the-peass-family), naÅ¡u kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* **PridruÅ¾ite se** ğŸ’¬ [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili nas **pratite** na **Twitter-u** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Podelite svoje hakovanje trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>

<figure><img src="../../.gitbook/assets/image (1) (3) (1).png" alt=""><figcaption></figcaption></figure>

PridruÅ¾ite se [**HackenProof Discord**](https://discord.com/invite/N3FrSbmwdy) serveru kako biste komunicirali sa iskusnim hakerima i lovcima na bagove!

**Hakerski uvidi**\
UkljuÄite se u sadrÅ¾aj koji istraÅ¾uje uzbuÄ‘enje i izazove hakovanja

**Hakerske vesti u realnom vremenu**\
Budite u toku sa brzim svetom hakovanja kroz vesti i uvide u realnom vremenu

**Najnovije objave**\
Budite informisani o najnovijim pokretanjima nagrada za pronalaÅ¾enje bagova i vaÅ¾nim aÅ¾uriranjima platforme

**PridruÅ¾ite nam se na** [**Discord-u**](https://discord.com/invite/N3FrSbmwdy) i poÄnite da saraÄ‘ujete sa vrhunskim hakerima danas!

## Osnovne informacije

**Network Time Protocol (NTP)** obezbeÄ‘uje sinhronizaciju taÄnih vremena raÄunara i mreÅ¾nih ureÄ‘aja preko mreÅ¾a sa promenljivom latencijom. To je od vitalnog znaÄaja za odrÅ¾avanje preciznog vremena u IT operacijama, bezbednosti i beleÅ¾enju dogaÄ‘aja. TaÄnost NTP-a je kljuÄna, ali istovremeno predstavlja i sigurnosne rizike ako se ne upravlja pravilno.

### Rezime i saveti za bezbednost:
- **Svrha**: Sinhronizacija vremena ureÄ‘aja preko mreÅ¾a.
- **VaÅ¾nost**: KritiÄno za bezbednost, beleÅ¾enje dogaÄ‘aja i operacije.
- **Mere bezbednosti**:
- Koristite pouzdane izvore NTP-a sa autentifikacijom.
- OgraniÄite pristup mreÅ¾i NTP servera.
- Pratite sinhronizaciju radi otkrivanja znakova manipulacije.

**Podrazumevani port:** 123/udp
```
PORT    STATE SERVICE REASON
123/udp open  ntp     udp-response
```
## Enumeracija

### NTP (Network Time Protocol)

NTP (Network Time Protocol) je protokol koji se koristi za sinhronizaciju vremena na raÄunarskim mreÅ¾ama. Kao pentester, moÅ¾ete iskoristiti NTP za prikupljanje informacija o ciljnom sistemu.

#### Nmap skeniranje

Nmap moÅ¾e skenirati NTP servis koristeÄ‡i sledeÄ‡u komandu:

```plaintext
nmap -p 123 --script ntp-info <cilj>
```

Ova komanda Ä‡e vam pruÅ¾iti informacije o NTP servisu na ciljnom sistemu, kao Å¡to su verzija NTP servera i dostupne opcije.

#### NTP monlist napad

NTP monlist napad je poznati DDoS napad koji iskoriÅ¡Ä‡ava NTP servere koji podrÅ¾avaju MONLIST komandu. MONLIST komanda omoguÄ‡ava napadaÄu da dobije listu poslednjih 600 IP adresa koje su se povezivale sa NTP serverom.

Da biste izvrÅ¡ili NTP monlist napad, moÅ¾ete koristiti alat poput `ntpdc` ili `ntp-monlist`:

```plaintext
ntpdc -n -c monlist <cilj>
```

```plaintext
ntp-monlist <cilj>
```

Ovi alati Ä‡e vam pruÅ¾iti listu IP adresa koje su se povezivale sa NTP serverom, Å¡to moÅ¾e biti korisno za dalje istraÅ¾ivanje i napade.

#### NTP amplifikacioni napad

NTP amplifikacioni napad je vrsta DDoS napada koji koristi NTP servere za generisanje velike koliÄine saobraÄ‡aja prema ciljnom sistemu. NapadaÄ Å¡alje malu zahtevnu poruku na NTP server, a server odgovara sa velikom koliÄinom podataka prema cilju.

Da biste izvrÅ¡ili NTP amplifikacioni napad, moÅ¾ete koristiti alat poput `ntp-amplification`:

```plaintext
ntp-amplification <cilj>
```

Ovaj alat Ä‡e generisati veliku koliÄinu saobraÄ‡aja prema ciljnom sistemu, Å¡to moÅ¾e dovesti do preoptereÄ‡enja i ometanja normalnog rada.
```bash
ntpq -c readlist <IP_ADDRESS>
ntpq -c readvar <IP_ADDRESS>
ntpq -c peers <IP_ADDRESS>
ntpq -c associations <IP_ADDRESS>
ntpdc -c monlist <IP_ADDRESS>
ntpdc -c listpeers <IP_ADDRESS>
ntpdc -c sysinfo <IP_ADDRESS>
```

```bash
nmap -sU -sV --script "ntp* and (discovery or vuln) and not (dos or brute)" -p 123 <IP>
```
## Pregledajte konfiguracione fajlove

* ntp.conf

## Napad NTP Amplifikacijom

[**Kako funkcioniÅ¡e NTP DDoS napad**](https://resources.infosecinstitute.com/network-time-protocol-ntp-threats-countermeasures/#gref)

**NTP protokol**, koristeÄ‡i UDP, omoguÄ‡ava rad bez potrebe za postupcima rukovanja, za razliku od TCP-a. Ova karakteristika se iskoriÅ¡Ä‡ava u **NTP DDoS napadima amplifikacijom**. Ovde, napadaÄi kreiraju pakete sa laÅ¾nom izvornom IP adresom, Äime se Äini da zahtevi za napad dolaze od Å¾rtve. Ovi paketi, koji su prvobitno mali, podstiÄu NTP server da odgovori sa mnogo veÄ‡im obimom podataka, Äime se pojaÄava napad.

Komanda **_MONLIST_**, uprkos retkoj upotrebi, moÅ¾e prijaviti poslednjih 600 klijenata koji su se povezali na NTP servis. Iako je sama komanda jednostavna, njen zloupotreba u ovakvim napadima istiÄe kritiÄne bezbednosne ranjivosti.
```bash
ntpdc -n -c monlist <IP>
```
## Shodan

* `ntp`

## HackTricks Automatske Komande
```
Protocol_Name: NTP    #Protocol Abbreviation if there is one.
Port_Number:  123     #Comma separated if there is more than one.
Protocol_Description: Network Time Protocol         #Protocol Abbreviation Spelled out

Entry_1:
Name: Notes
Description: Notes for NTP
Note: |
The Network Time Protocol (NTP) ensures computers and network devices across variable-latency networks sync their clocks accurately. It's vital for maintaining precise timekeeping in IT operations, security, and logging. NTP's accuracy is essential, but it also poses security risks if not properly managed.

https://book.hacktricks.xyz/pentesting/pentesting-ntp

Entry_2:
Name: Nmap
Description: Enumerate NTP
Command: nmap -sU -sV --script "ntp* and (discovery or vuln) and not (dos or brute)" -p 123 {IP}
```
â€‹

<figure><img src="../../.gitbook/assets/image (1) (3) (1).png" alt=""><figcaption></figcaption></figure>

PridruÅ¾ite se [**HackenProof Discord**](https://discord.com/invite/N3FrSbmwdy) serveru kako biste komunicirali sa iskusnim hakerima i lovcima na bagove!

**Hakerski uvidi**\
UkljuÄite se u sadrÅ¾aj koji istraÅ¾uje uzbuÄ‘enje i izazove hakovanja

**Vesti o hakovanju u realnom vremenu**\
Budite u toku sa brzim svetom hakovanja kroz vesti i uvide u realnom vremenu

**Najnovije objave**\
Budite informisani o najnovijim pokretanjima nagrada za pronalaÅ¾enje bagova i vaÅ¾nim aÅ¾uriranjima platforme

**PridruÅ¾ite nam se na** [**Discord-u**](https://discord.com/invite/N3FrSbmwdy) i poÄnite da saraÄ‘ujete sa vrhunskim hakerima danas!

<details>

<summary><strong>NauÄite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Drugi naÄini podrÅ¡ke HackTricks-u:

* Ako Å¾elite da vidite **vaÅ¡u kompaniju oglaÅ¡enu na HackTricks-u** ili **preuzmete HackTricks u PDF formatu** Proverite [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Nabavite [**zvaniÄni PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Otkrijte [**The PEASS Family**](https://opensea.io/collection/the-peass-family), naÅ¡u kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* **PridruÅ¾ite se** ğŸ’¬ [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili nas **pratite** na **Twitter-u** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Podelite svoje trikove hakovanja slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>
