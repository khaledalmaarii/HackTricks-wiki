# 123/udp - Testowanie penetracyjne NTP

<details>

<summary><strong>Nauka hakowania AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Inne sposoby wsparcia HackTricks:

* JeÅ›li chcesz zobaczyÄ‡ swojÄ… **firmÄ™ reklamowanÄ… w HackTricks** lub **pobraÄ‡ HackTricks w formacie PDF**, sprawdÅº [**PLANY SUBSKRYPCYJNE**](https://github.com/sponsors/carlospolop)!
* ZdobÄ…dÅº [**oficjalne gadÅ¼ety PEASS & HackTricks**](https://peass.creator-spring.com)
* Odkryj [**RodzinÄ™ PEASS**](https://opensea.io/collection/the-peass-family), naszÄ… kolekcjÄ™ ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* **DoÅ‚Ä…cz do** ğŸ’¬ [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **Å›ledÅº** nas na **Twitterze** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **Podziel siÄ™ swoimi sztuczkami hakowania, przesyÅ‚ajÄ…c PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>

<figure><img src="../.gitbook/assets/image (380).png" alt=""><figcaption></figcaption></figure>

DoÅ‚Ä…cz do serwera [**HackenProof Discord**](https://discord.com/invite/N3FrSbmwdy), aby komunikowaÄ‡ siÄ™ z doÅ›wiadczonymi hakerami i Å‚owcami bÅ‚Ä™dÃ³w!

**SpostrzeÅ¼enia z Hakerstwa**\
Zajmij siÄ™ treÅ›ciami, ktÃ³re zagÅ‚Ä™biajÄ… siÄ™ w emocje i wyzwania hakerstwa

**AktualnoÅ›ci z Hakerstwa na Å»ywo**\
BÄ…dÅº na bieÅ¼Ä…co z szybkim tempem Å›wiata hakerstwa dziÄ™ki aktualnoÅ›ciom i spostrzeÅ¼eniom na Å¼ywo

**Najnowsze OgÅ‚oszenia**\
BÄ…dÅº informowany o najnowszych programach bug bounty i istotnych aktualizacjach platformy

**DoÅ‚Ä…cz do nas na** [**Discordzie**](https://discord.com/invite/N3FrSbmwdy) i zacznij wspÃ³Å‚pracowaÄ‡ z najlepszymi hakerami juÅ¼ dziÅ›!

## Podstawowe informacje

**ProtokÃ³Å‚ czasu sieciowego (NTP)** zapewnia dokÅ‚adnÄ… synchronizacjÄ™ zegarÃ³w komputerÃ³w i urzÄ…dzeÅ„ sieciowych w zmiennych sieciach opÃ³ÅºnieÅ„. Jest to istotne dla utrzymania precyzyjnego prowadzenia czasu w operacjach IT, bezpieczeÅ„stwie i logowaniu. DokÅ‚adnoÅ›Ä‡ NTP jest istotna, ale moÅ¼e rÃ³wnieÅ¼ stanowiÄ‡ ryzyko dla bezpieczeÅ„stwa, jeÅ›li nie jest odpowiednio zarzÄ…dzana.

### Podsumowanie i wskazÃ³wki dotyczÄ…ce bezpieczeÅ„stwa:

* **Cel**: Synchronizacja zegarÃ³w urzÄ…dzeÅ„ w sieciach.
* **Znaczenie**: Krytyczne dla bezpieczeÅ„stwa, logowania i operacji.
* **Åšrodki bezpieczeÅ„stwa**:
* UÅ¼ywaj zaufanych ÅºrÃ³deÅ‚ NTP z uwierzytelnieniem.
* Ogranicz dostÄ™p sieciowy do serwera NTP.
* Monitoruj synchronizacjÄ™ w poszukiwaniu oznak manipulacji.

**DomyÅ›lny port:** 123/udp
```
PORT    STATE SERVICE REASON
123/udp open  ntp     udp-response
```
## Wyliczanie
```bash
ntpq -c readlist <IP_ADDRESS>
ntpq -c readvar <IP_ADDRESS>
ntpq -c peers <IP_ADDRESS>
ntpq -c associations <IP_ADDRESS>
ntpdc -c monlist <IP_ADDRESS>
ntpdc -c listpeers <IP_ADDRESS>
ntpdc -c sysinfo <IP_ADDRESS>
```

```bash
nmap -sU -sV --script "ntp* and (discovery or vuln) and not (dos or brute)" -p 123 <IP>
```
## SprawdÅº pliki konfiguracyjne

* ntp.conf

## Atak wzmacniania NTP

[**Jak dziaÅ‚a atak DDoS NTP**](https://resources.infosecinstitute.com/network-time-protocol-ntp-threats-countermeasures/#gref)

ProtokÃ³Å‚ **NTP**, korzystajÄ…c z UDP, pozwala na dziaÅ‚anie bez koniecznoÅ›ci procedur uÅ›cisku dÅ‚oni, w przeciwieÅ„stwie do TCP. Ta cecha jest wykorzystywana w **atakach wzmacniania DDoS NTP**. AtakujÄ…cy tworzÄ… pakiety z faÅ‚szywym adresem ÅºrÃ³dÅ‚owym, sprawiajÄ…c, Å¼e Å¼Ä…dania ataku wydajÄ… siÄ™ pochodziÄ‡ od ofiary. Te poczÄ…tkowo maÅ‚e pakiety skÅ‚aniajÄ… serwer NTP do odpowiedzi znacznie wiÄ™kszymi woluminami danych, wzmacniajÄ…c atak.

Polecenie _**MONLIST**_, pomimo rzadkiego uÅ¼ycia, moÅ¼e raportowaÄ‡ ostatnie 600 klientÃ³w podÅ‚Ä…czonych do usÅ‚ugi NTP. ChociaÅ¼ samo polecenie jest proste, jego naduÅ¼ycie w takich atakach podkreÅ›la istotne podatnoÅ›ci na ataki.
```bash
ntpdc -n -c monlist <IP>
```
## Shodan

* `ntp`

## Automatyczne polecenia HackTricks
```
Protocol_Name: NTP    #Protocol Abbreviation if there is one.
Port_Number:  123     #Comma separated if there is more than one.
Protocol_Description: Network Time Protocol         #Protocol Abbreviation Spelled out

Entry_1:
Name: Notes
Description: Notes for NTP
Note: |
The Network Time Protocol (NTP) ensures computers and network devices across variable-latency networks sync their clocks accurately. It's vital for maintaining precise timekeeping in IT operations, security, and logging. NTP's accuracy is essential, but it also poses security risks if not properly managed.

https://book.hacktricks.xyz/pentesting/pentesting-ntp

Entry_2:
Name: Nmap
Description: Enumerate NTP
Command: nmap -sU -sV --script "ntp* and (discovery or vuln) and not (dos or brute)" -p 123 {IP}
```
â€‹

<figure><img src="../.gitbook/assets/image (380).png" alt=""><figcaption></figcaption></figure>

DoÅ‚Ä…cz do serwera [**HackenProof Discord**](https://discord.com/invite/N3FrSbmwdy), aby komunikowaÄ‡ siÄ™ z doÅ›wiadczonymi hakerami i Å‚owcami luk za nagrody!

**WglÄ…d w Hacking**\
Zajmij siÄ™ treÅ›ciami, ktÃ³re zagÅ‚Ä™biajÄ… siÄ™ w emocje i wyzwania hackowania

**AktualnoÅ›ci Hakerskie na Å»ywo**\
BÄ…dÅº na bieÅ¼Ä…co z szybkim Å›wiatem hackowania dziÄ™ki aktualnoÅ›ciom i wglÄ…dom na Å¼ywo

**Najnowsze OgÅ‚oszenia**\
BÄ…dÅº na bieÅ¼Ä…co z najnowszymi nagrodami za znalezienie luk i istotnymi aktualizacjami platformy

**DoÅ‚Ä…cz do nas na** [**Discordzie**](https://discord.com/invite/N3FrSbmwdy) i zacznij wspÃ³Å‚pracowaÄ‡ z najlepszymi hakerami juÅ¼ dziÅ›!

<details>

<summary><strong>Nauka hakowania AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Inne sposoby wsparcia HackTricks:

* JeÅ›li chcesz zobaczyÄ‡ swojÄ… **firmÄ™ reklamowanÄ… w HackTricks** lub **pobraÄ‡ HackTricks w formacie PDF**, sprawdÅº [**PLANY SUBSKRYPCYJNE**](https://github.com/sponsors/carlospolop)!
* ZdobÄ…dÅº [**oficjalne gadÅ¼ety PEASS & HackTricks**](https://peass.creator-spring.com)
* Odkryj [**RodzinÄ™ PEASS**](https://opensea.io/collection/the-peass-family), naszÄ… kolekcjÄ™ ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* **DoÅ‚Ä…cz do** ğŸ’¬ [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **Å›ledÅº** nas na **Twitterze** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **Podziel siÄ™ swoimi sztuczkami hakerskimi, przesyÅ‚ajÄ…c PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) na githubie.

</details>
