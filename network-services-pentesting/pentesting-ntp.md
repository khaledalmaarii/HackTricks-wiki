# 123/udp - Testowanie penetracyjne NTP

<details>

<summary><strong>Nauka hakowania AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Inne sposoby wsparcia HackTricks:

* Jeli chcesz zobaczy swoj **firm reklamowan w HackTricks** lub **pobra HackTricks w formacie PDF**, sprawd藕 [**PLANY SUBSKRYPCYJNE**](https://github.com/sponsors/carlospolop)!
* Zdobd藕 [**oficjalne gad偶ety PEASS & HackTricks**](https://peass.creator-spring.com)
* Odkryj [**Rodzin PEASS**](https://opensea.io/collection/the-peass-family), nasz kolekcj ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* **Docz do**  [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **led藕** nas na **Twitterze**  [**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **Podziel si swoimi sztuczkami hakowania, przesyajc PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>

<figure><img src="../.gitbook/assets/image (377).png" alt=""><figcaption></figcaption></figure>

Docz do serwera [**HackenProof Discord**](https://discord.com/invite/N3FrSbmwdy), aby komunikowa si z dowiadczonymi hakerami i owcami bd贸w!

**Spostrze偶enia z Hakerstwa**\
Zajmij si treciami, kt贸re zagbiaj si w emocje i wyzwania hakerstwa

**Aktualnoci z Hakerstwa na 呕ywo**\
Bd藕 na bie偶co z szybkim tempem wiata hakerstwa dziki aktualnociom i spostrze偶eniom na 偶ywo

**Najnowsze Ogoszenia**\
Bd藕 informowany o najnowszych programach bug bounty i istotnych aktualizacjach platformy

**Docz do nas na** [**Discordzie**](https://discord.com/invite/N3FrSbmwdy) i zacznij wsp贸pracowa z najlepszymi hakerami ju偶 dzi!

## Podstawowe informacje

**Protok贸 czasu sieciowego (NTP)** zapewnia dokadn synchronizacj zegar贸w komputer贸w i urzdze sieciowych w zmiennych sieciach op贸藕nie. Jest to istotne dla utrzymania precyzyjnego prowadzenia czasu w operacjach IT, bezpieczestwie i logowaniu. Dokadno NTP jest istotna, ale mo偶e r贸wnie偶 stanowi ryzyko dla bezpieczestwa, jeli nie jest odpowiednio zarzdzana.

### Podsumowanie i Wskaz贸wki dotyczce Bezpieczestwa:

* **Cel**: Synchronizacja zegar贸w urzdze w sieciach.
* **Znaczenie**: Krytyczne dla bezpieczestwa, logowania i operacji.
* **rodki Bezpieczestwa**:
* U偶ywaj zaufanych 藕r贸de NTP z uwierzytelnieniem.
* Ogranicz dostp sieciowy do serwera NTP.
* Monitoruj synchronizacj w poszukiwaniu oznak manipulacji.

**Domylny port:** 123/udp
```
PORT    STATE SERVICE REASON
123/udp open  ntp     udp-response
```
## Wyliczanie
```bash
ntpq -c readlist <IP_ADDRESS>
ntpq -c readvar <IP_ADDRESS>
ntpq -c peers <IP_ADDRESS>
ntpq -c associations <IP_ADDRESS>
ntpdc -c monlist <IP_ADDRESS>
ntpdc -c listpeers <IP_ADDRESS>
ntpdc -c sysinfo <IP_ADDRESS>
```

```bash
nmap -sU -sV --script "ntp* and (discovery or vuln) and not (dos or brute)" -p 123 <IP>
```
## Sprawd藕 pliki konfiguracyjne

* ntp.conf

## Atak z wykorzystaniem wzmacniania NTP

[**Jak dziaa atak DDoS za pomoc NTP**](https://resources.infosecinstitute.com/network-time-protocol-ntp-threats-countermeasures/#gref)

Protok贸 **NTP**, korzystajc z UDP, pozwala na dziaanie bez koniecznoci procedur ucisku doni, w przeciwiestwie do TCP. Ta cecha jest wykorzystywana w **atakach z wykorzystaniem wzmacniania NTP DDoS**. W nich atakujcy tworz pakiety z faszywym adresem 藕r贸dowym, sprawiajc, 偶e 偶dania ataku wydaj si pochodzi od ofiary. Te pocztkowo mae pakiety skaniaj serwer NTP do odpowiedzi znacznie wikszymi woluminami danych, wzmacniajc atak.

Polecenie _**MONLIST**_, pomimo rzadkiego u偶ycia, mo偶e raportowa ostatnie 600 klient贸w podczonych do usugi NTP. Chocia偶 samo polecenie jest proste, jego nadu偶ycie w takich atakach podkrela istotne podatnoci na ataki.
```bash
ntpdc -n -c monlist <IP>
```
## Shodan

* `ntp`

## Automatyczne polecenia HackTricks
```
Protocol_Name: NTP    #Protocol Abbreviation if there is one.
Port_Number:  123     #Comma separated if there is more than one.
Protocol_Description: Network Time Protocol         #Protocol Abbreviation Spelled out

Entry_1:
Name: Notes
Description: Notes for NTP
Note: |
The Network Time Protocol (NTP) ensures computers and network devices across variable-latency networks sync their clocks accurately. It's vital for maintaining precise timekeeping in IT operations, security, and logging. NTP's accuracy is essential, but it also poses security risks if not properly managed.

https://book.hacktricks.xyz/pentesting/pentesting-ntp

Entry_2:
Name: Nmap
Description: Enumerate NTP
Command: nmap -sU -sV --script "ntp* and (discovery or vuln) and not (dos or brute)" -p 123 {IP}
```
<figure><img src="../.gitbook/assets/image (377).png" alt=""><figcaption></figcaption></figure>

Docz do serwera [**HackenProof Discord**](https://discord.com/invite/N3FrSbmwdy), aby komunikowa si z dowiadczonymi hakerami i owcami luk!

**Wgld w Hacking**\
Zanurz si w treci, kt贸re zgbiaj emocje i wyzwania zwizane z hakowaniem

**Aktualnoci Hakerskie na 呕ywo**\
Bd藕 na bie偶co z szybkim tempem wiata hakerskiego dziki aktualnociom i wgldom na 偶ywo

**Najnowsze Ogoszenia**\
Bd藕 na bie偶co z najnowszymi programami bug bounty i istotnymi aktualizacjami platform

**Docz do nas na** [**Discordzie**](https://discord.com/invite/N3FrSbmwdy) i zacznij wsp贸pracowa z najlepszymi hakerami ju偶 dzi!

<details>

<summary><strong>Dowiedz si, jak hakowa AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Inne sposoby wsparcia HackTricks:

* Jeli chcesz zobaczy swoj **firm reklamowan w HackTricks** lub **pobra HackTricks w formacie PDF**, sprawd藕 [**PLANY SUBSKRYPCYJNE**](https://github.com/sponsors/carlospolop)!
* Zdobd藕 [**oficjalne gad偶ety PEASS & HackTricks**](https://peass.creator-spring.com)
* Odkryj [**Rodzin PEASS**](https://opensea.io/collection/the-peass-family), nasz kolekcj ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* **Docz do**  [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **led藕** nas na **Twitterze**  [**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **Podziel si swoimi sztuczkami hakerskimi, przesyajc PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) na githubie.

</details>
