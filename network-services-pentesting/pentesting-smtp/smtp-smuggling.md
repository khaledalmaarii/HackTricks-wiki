# SMTP Smuggling

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Basic Information

ì´ëŸ¬í•œ ìœ í˜•ì˜ ì·¨ì•½ì ì€ [**ì´ ê²Œì‹œë¬¼ì—ì„œ ì›ë˜ ë°œê²¬ë˜ì—ˆìŠµë‹ˆë‹¤**](https://sec-consult.com/blog/detail/smtp-smuggling-spoofing-e-mails-worldwide/) ì—¬ê¸°ì„œ ì´ë©”ì¼ì„ ìµœì¢…í™”í•  ë•Œ SMTP í”„ë¡œí† ì½œì´ í•´ì„ë˜ëŠ” ë°©ì‹ì˜ ë¶ˆì¼ì¹˜ë¥¼ **ì•…ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤**. ì´ë¥¼ í†µí•´ ê³µê²©ìëŠ” í•©ë²•ì ì¸ ì´ë©”ì¼ ë³¸ë¬¸ì— ë” ë§ì€ ì´ë©”ì¼ì„ ë°€ì–´ë„£ì„ ìˆ˜ ìˆìœ¼ë©°, ì´ëŠ” ì˜í–¥ì„ ë°›ëŠ” ë„ë©”ì¸ì˜ ë‹¤ë¥¸ ì‚¬ìš©ì(ì˜ˆ: admin@outlook.com)ë¡œ ê°€ì¥í•  ìˆ˜ ìˆê²Œ í•´ì£¼ë©° SPFì™€ ê°™ì€ ë°©ì–´ë¥¼ ìš°íšŒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### Why

ì´ëŠ” SMTP í”„ë¡œí† ì½œì—ì„œ ì´ë©”ì¼ë¡œ ì „ì†¡ë  **ë©”ì‹œì§€ì˜ ë°ì´í„°**ê°€ ì‚¬ìš©ì(ê³µê²©ì)ì— ì˜í•´ ì œì–´ë˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ì´ ì‚¬ìš©ìëŠ” íŒŒì„œì˜ ì°¨ì´ë¥¼ ì•…ìš©í•˜ì—¬ ìˆ˜ì‹ ìì—ê²Œ ì¶”ê°€ ì´ë©”ì¼ì„ ë°€ì–´ë„£ëŠ” íŠ¹ë³„íˆ ì¡°ì‘ëœ ë°ì´í„°ë¥¼ ë³´ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì›ë˜ ê²Œì‹œë¬¼ì˜ ì´ ê·¸ë¦¼ ì˜ˆì œë¥¼ ì‚´í´ë³´ì„¸ìš”:

<figure><img src="../../.gitbook/assets/image (8) (1).png" alt=""><figcaption><p><a href="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-Overview__09_.png">https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-Overview__09_.png</a></p></figcaption></figure>

### How

ì´ ì·¨ì•½ì ì„ ì•…ìš©í•˜ê¸° ìœ„í•´ ê³µê²©ìëŠ” **ì•„ì›ƒë°”ìš´ë“œ SMTP ì„œë²„ê°€ ë‹¨ì§€ 1ê°œì˜ ì´ë©”ì¼ë¡œ ìƒê°í•˜ëŠ” ë°ì´í„°ë¥¼ ë³´ë‚´ì•¼ í•˜ì§€ë§Œ ì¸ë°”ìš´ë“œ SMTP ì„œë²„ëŠ” ì—¬ëŸ¬ ì´ë©”ì¼ì´ ìˆë‹¤ê³  ìƒê°í•´ì•¼ í•©ë‹ˆë‹¤**.

ì—°êµ¬ìë“¤ì€ ì„œë¡œ ë‹¤ë¥¸ **ì¸ë°”ìš´ë“œ ì„œë²„ê°€ ì´ë©”ì¼ ë©”ì‹œì§€ì˜ ë°ì´í„° ëì„ ë‚˜íƒ€ë‚´ëŠ” ì„œë¡œ ë‹¤ë¥¸ ë¬¸ìë¥¼ ê³ ë ¤í•œë‹¤ëŠ” ê²ƒì„ ë°œê²¬í–ˆìŠµë‹ˆë‹¤**. ì•„ì›ƒë°”ìš´ë“œ ì„œë²„ëŠ” ê·¸ë ‡ì§€ ì•ŠìŠµë‹ˆë‹¤.\
ì˜ˆë¥¼ ë“¤ì–´, ë°ì´í„°ì˜ ì¼ë°˜ì ì¸ ëì€ `\r\n.\r`ì…ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ì¸ë°”ìš´ë“œ SMTP ì„œë²„ê°€ `\n.`ë„ ì§€ì›í•˜ëŠ” ê²½ìš°, ê³µê²©ìëŠ” **ì´ ë°ì´í„°ë¥¼ ì´ë©”ì¼ì— ì¶”ê°€í•˜ê³  ìƒˆë¡œìš´ ì´ë©”ì¼ì„ ë°€ì–´ë„£ê¸° ìœ„í•œ SMTP ëª…ë ¹ì„ ì‹œì‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤**. ì´ì „ ì´ë¯¸ì§€ì™€ ê°™ì´.

ë¬¼ë¡ , ì´ëŠ” **ì•„ì›ƒë°”ìš´ë“œ SMTP ì„œë²„ê°€ ì´ ë°ì´í„°ë¥¼ ë©”ì‹œì§€ ë°ì´í„°ì˜ ëìœ¼ë¡œ ì²˜ë¦¬í•˜ì§€ ì•Šì„ ê²½ìš°ì—ë§Œ ì‘ë™í•©ë‹ˆë‹¤**. ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ 1ê°œì˜ ì´ë©”ì¼ ëŒ€ì‹  2ê°œì˜ ì´ë©”ì¼ë¡œ ë³´ê²Œ ë˜ë¯€ë¡œ, ê²°êµ­ ì´ê²ƒì´ ì´ ì·¨ì•½ì ì—ì„œ ì•…ìš©ë˜ëŠ” ë¹„ë™ê¸°í™”ì…ë‹ˆë‹¤.

ì ì¬ì ì¸ ë¹„ë™ê¸°í™” ë°ì´í„°:

* `\n.`
* `\n.\r`

ë˜í•œ SPFê°€ ìš°íšŒë˜ëŠ” ì´ìœ ëŠ” `user@outlook.com`ì˜ ì´ë©”ì¼ì—ì„œ `admin@outlook.com`ì˜ ì´ë©”ì¼ì„ ë°€ì–´ë„£ìœ¼ë©´ **ë°œì‹ ìëŠ” ì—¬ì „íˆ `outlook.com`ì´ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.**

## **References**

* [https://sec-consult.com/blog/detail/smtp-smuggling-spoofing-e-mails-worldwide/](https://sec-consult.com/blog/detail/smtp-smuggling-spoofing-e-mails-worldwide/)

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
