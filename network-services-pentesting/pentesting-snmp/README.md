# 161,162,10161,10162/udp - SNMPæ¸—é€æµ‹è¯•

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>â˜ï¸ HackTricks Cloud â˜ï¸</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ğŸ¦ Twitter ğŸ¦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ğŸ™ï¸ Twitch ğŸ™ï¸</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ğŸ¥ Youtube ğŸ¥</strong></a></summary>

* å¦‚æœæ‚¨åœ¨**ç½‘ç»œå®‰å…¨å…¬å¸**å·¥ä½œï¼Œæƒ³åœ¨**HackTricks**ä¸Šçœ‹åˆ°æ‚¨çš„**å…¬å¸å¹¿å‘Š**ï¼Œæˆ–è€…æƒ³è¦è·å–**PEASSæœ€æ–°ç‰ˆæœ¬æˆ–ä¸‹è½½HackTricksçš„PDF**ï¼Ÿè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼
* å‘ç°[**PEASSå®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬ç‹¬å®¶çš„[**NFTs**](https://opensea.io/collection/the-peass-family)ç³»åˆ—ã€‚
* è·å–[**å®˜æ–¹PEASS & HackTrickså‘¨è¾¹å•†å“**](https://peass.creator-spring.com)
* **åŠ å…¥**[**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discordç¾¤ç»„**](https://discord.gg/hRep4RUj7f)æˆ–[**telegramç¾¤ç»„**](https://t.me/peass)æˆ–åœ¨**Twitter**ä¸Š**å…³æ³¨**æˆ‘[**ğŸ¦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks\_live)**ã€‚**
* **é€šè¿‡å‘**[**hacktricksä»“åº“**](https://github.com/carlospolop/hacktricks) **å’Œ** [**hacktricks-cloudä»“åº“**](https://github.com/carlospolop/hacktricks-cloud) **æäº¤PRæ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚**

</details>

<img src="../../.gitbook/assets/i3.png" alt="" data-size="original">\
**Bug bountyå°è´´å£«**ï¼š**æ³¨å†Œ** **Intigriti**ï¼Œä¸€ä¸ªç”±é»‘å®¢åˆ›å»ºçš„é«˜çº§**bug bountyå¹³å°**ï¼ä»Šå¤©å°±åŠ å…¥[**https://go.intigriti.com/hacktricks**](https://go.intigriti.com/hacktricks)ï¼Œå¼€å§‹èµšå–é«˜è¾¾**$100,000**çš„èµé‡‘ï¼

{% embed url="https://go.intigriti.com/hacktricks" %}

## åŸºæœ¬ä¿¡æ¯

**SNMP - ç®€å•ç½‘ç»œç®¡ç†åè®®** æ˜¯ä¸€ç§ç”¨äºç›‘æ§ç½‘ç»œä¸­ä¸åŒè®¾å¤‡ï¼ˆå¦‚è·¯ç”±å™¨ã€äº¤æ¢æœºã€æ‰“å°æœºã€ç‰©è”ç½‘è®¾å¤‡ç­‰ï¼‰çš„åè®®ã€‚
```
PORT    STATE SERVICE REASON                 VERSION
161/udp open  snmp    udp-response ttl 244   ciscoSystems SNMPv3 server (public)
```
{% hint style="info" %}
SNMP è¿˜ä½¿ç”¨ç«¯å£ **162/UDP** å‘é€ **traps**ã€‚è¿™äº›æ˜¯ **SNMP æœåŠ¡å™¨å‘é€åˆ°å®¢æˆ·ç«¯çš„æ•°æ®åŒ…ï¼Œè€Œæ— éœ€æ˜ç¡®è¯·æ±‚**ã€‚
{% endhint %}

### MIB

ä¸ºäº†ç¡®ä¿ SNMP è®¿é—®èƒ½å¤Ÿè·¨åˆ¶é€ å•†ä»¥åŠä¸åŒçš„å®¢æˆ·ç«¯-æœåŠ¡å™¨ç»„åˆå·¥ä½œï¼Œåˆ›å»ºäº† **ç®¡ç†ä¿¡æ¯åº“ï¼ˆMIBï¼‰**ã€‚MIB æ˜¯ä¸€ç§ **ç‹¬ç«‹çš„æ ¼å¼ï¼Œç”¨äºå­˜å‚¨è®¾å¤‡ä¿¡æ¯**ã€‚MIB æ˜¯ä¸€ä¸ª **æ–‡æœ¬** æ–‡ä»¶ï¼Œå…¶ä¸­åˆ—å‡ºäº†è®¾å¤‡çš„æ‰€æœ‰å¯æŸ¥è¯¢çš„ **SNMP å¯¹è±¡**ï¼Œå¹¶ä»¥ **æ ‡å‡†åŒ–** çš„æ ‘çŠ¶å±‚æ¬¡ç»“æ„æ’åˆ—ã€‚å®ƒè‡³å°‘åŒ…å«ä¸€ä¸ª `å¯¹è±¡æ ‡è¯†ç¬¦`ï¼ˆ`OID`ï¼‰ï¼Œé™¤äº†å¿…è¦çš„ **å”¯ä¸€åœ°å€** å’Œ **åç§°** å¤–ï¼Œè¿˜æä¾›æœ‰å…³å„ä¸ªå¯¹è±¡çš„ç±»å‹ã€è®¿é—®æƒé™å’Œæè¿°çš„ä¿¡æ¯ã€‚
MIB æ–‡ä»¶é‡‡ç”¨åŸºäº `æŠ½è±¡è¯­æ³•è¡¨ç¤ºæ³•ä¸€`ï¼ˆ`ASN.1`ï¼‰çš„ ASCII æ–‡æœ¬æ ¼å¼ç¼–å†™ã€‚**MIB ä¸åŒ…å«æ•°æ®**ï¼Œä½†å®ƒä»¬è§£é‡Šäº† **åœ¨å“ªé‡Œæ‰¾åˆ°å“ªäº›ä¿¡æ¯** ä»¥åŠå®ƒçœ‹èµ·æ¥å¦‚ä½•ï¼Œè¿”å›ç‰¹å®š OID çš„å€¼ï¼Œæˆ–ä½¿ç”¨çš„æ•°æ®ç±»å‹ã€‚

### OIDs

**OIDs** ä»£è¡¨ **å¯¹è±¡æ ‡è¯†ç¬¦**ã€‚**OIDs åœ¨ MIB å±‚æ¬¡ç»“æ„ä¸­å”¯ä¸€æ ‡è¯†ç®¡ç†å¯¹è±¡**ã€‚è¿™å¯ä»¥è¢«æè¿°ä¸ºä¸€æ£µæ ‘ï¼Œå…¶å„ä¸ªå±‚æ¬¡ç”±ä¸åŒçš„ç»„ç»‡åˆ†é…ã€‚é¡¶çº§ MIB å¯¹è±¡ IDï¼ˆOIDsï¼‰å±äºä¸åŒçš„æ ‡å‡†ç»„ç»‡ã€‚
**ä¾›åº”å•†å®šä¹‰ç§æœ‰åˆ†æ”¯ï¼ŒåŒ…æ‹¬å…¶è‡ªå·±äº§å“çš„ç®¡ç†å¯¹è±¡ã€‚**

![](../../.gitbook/assets/snmp\_oid\_mib\_tree.png)

æ‚¨å¯ä»¥é€šè¿‡è¿™ä¸ªç½‘å€ **å¯¼èˆª** OID æ ‘ï¼š[http://www.oid-info.com/cgi-bin/display?tree=#focus](http://www.oid-info.com/cgi-bin/display?tree=#focus) æˆ–è€… **æŸ¥çœ‹ OID çš„å«ä¹‰**ï¼ˆå¦‚ `1.3.6.1.2.1.1`ï¼‰è®¿é—® [http://oid-info.com/get/1.3.6.1.2.1.1](http://oid-info.com/get/1.3.6.1.2.1.1)ã€‚
æœ‰ä¸€äº› **ä¼—æ‰€å‘¨çŸ¥çš„ OIDs**ï¼Œå¦‚ [1.3.6.1.2.1](http://oid-info.com/get/1.3.6.1.2.1) ä¸­çš„é‚£äº›ï¼Œå®ƒä»¬å¼•ç”¨äº†å®šä¹‰äº†ç®€å•ç½‘ç»œç®¡ç†åè®®ï¼ˆSNMPï¼‰å˜é‡çš„ MIB-2ã€‚è€Œä» **è¿™ä¸ª OID æ´¾ç”Ÿçš„ OIDs** å¯ä»¥è·å–ä¸€äº›æœ‰è¶£çš„ä¸»æœºæ•°æ®ï¼ˆç³»ç»Ÿæ•°æ®ã€ç½‘ç»œæ•°æ®ã€è¿›ç¨‹æ•°æ®...ï¼‰

### **OID ç¤ºä¾‹**

**`1 . 3 . 6 . 1 . 4 . 1 . 1452 . 1 . 2 . 5 . 1 . 3 . 21 . 1 . 4 . 7`**

è¿™æ˜¯è¿™ä¸ªåœ°å€çš„åˆ†è§£ã€‚

* 1 â€“ è¿™è¢«ç§°ä¸º ISOï¼Œå®ƒè¡¨æ˜è¿™æ˜¯ä¸€ä¸ª OIDã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæ‰€æœ‰ OID éƒ½ä»¥ â€œ1â€ å¼€å¤´
* 3 â€“ è¿™è¢«ç§°ä¸º ORGï¼Œç”¨äºæŒ‡å®šæ„å»ºè®¾å¤‡çš„ç»„ç»‡ã€‚
* 6 â€“ è¿™æ˜¯ dod æˆ–å›½é˜²éƒ¨ï¼Œå®ƒæ˜¯æœ€å…ˆå»ºç«‹äº’è”ç½‘çš„ç»„ç»‡ã€‚
* 1 â€“ è¿™æ˜¯äº’è”ç½‘çš„å€¼ï¼Œè¡¨ç¤ºæ‰€æœ‰é€šä¿¡éƒ½å°†é€šè¿‡äº’è”ç½‘è¿›è¡Œã€‚
* 4 â€“ è¿™ä¸ªå€¼ç¡®å®šè¿™ä¸ªè®¾å¤‡æ˜¯ç”±ç§äººç»„ç»‡è€Œä¸æ˜¯æ”¿åºœç»„ç»‡åˆ¶é€ çš„ã€‚
* 1 â€“ è¿™ä¸ªå€¼è¡¨ç¤ºè®¾å¤‡æ˜¯ç”±ä¼ä¸šæˆ–å•†ä¸šå®ä½“åˆ¶é€ çš„ã€‚

è¿™å‰å…­ä¸ªå€¼å¯¹äºæ‰€æœ‰è®¾å¤‡æ¥è¯´å¾€å¾€æ˜¯ç›¸åŒçš„ï¼Œå®ƒä»¬ä¸ºæ‚¨æä¾›äº†æœ‰å…³å®ƒä»¬çš„åŸºæœ¬ä¿¡æ¯ã€‚è¿™ä¸€ç³»åˆ—æ•°å­—å¯¹äºæ‰€æœ‰ OID éƒ½æ˜¯ç›¸åŒçš„ï¼Œé™¤éè®¾å¤‡æ˜¯ç”±æ”¿åºœåˆ¶é€ çš„ã€‚

æ¥ä¸‹æ¥æ˜¯ä¸‹ä¸€ç»„æ•°å­—ã€‚

* 1452 â€“ ç»™å‡ºäº†åˆ¶é€ æ­¤è®¾å¤‡çš„ç»„ç»‡çš„åç§°ã€‚
* 1 â€“ è§£é‡Šäº†è®¾å¤‡çš„ç±»å‹ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå®ƒæ˜¯ä¸€ä¸ªé—¹é’Ÿã€‚
* 2 â€“ ç¡®å®šè¿™ä¸ªè®¾å¤‡æ˜¯ä¸€ä¸ªè¿œç¨‹ç»ˆç«¯å•å…ƒã€‚

å…¶ä½™çš„å€¼æä¾›äº†æœ‰å…³è®¾å¤‡çš„å…·ä½“ä¿¡æ¯ã€‚

* 5 â€“ è¡¨ç¤ºä¸€ä¸ªç¦»æ•£çš„æŠ¥è­¦ç‚¹ã€‚
* 1 â€“ è®¾å¤‡ä¸­çš„ç‰¹å®šç‚¹
* 3 â€“ ç«¯å£
* 21 â€“ ç«¯å£çš„åœ°å€
* 1 â€“ ç«¯å£çš„æ˜¾ç¤º
* 4 â€“ ç‚¹å·
* 7 â€“ ç‚¹çš„çŠ¶æ€

_**ï¼ˆç¤ºä¾‹å–è‡ª**_ [_**è¿™é‡Œ**_](https://www.netadmintools.com/snmp-mib-and-oids)_**ï¼‰**_

### SNMP ç‰ˆæœ¬

æœ‰ä¸¤ä¸ªé‡è¦çš„ SNMP ç‰ˆæœ¬ï¼š

* **SNMPv1**ï¼šä¸»è¦ç‰ˆæœ¬ï¼Œå®ƒä»ç„¶æ˜¯æœ€å¸¸è§çš„ï¼Œ**è®¤è¯åŸºäºå­—ç¬¦ä¸²**ï¼ˆç¤¾åŒºå­—ç¬¦ä¸²ï¼‰ï¼Œè¯¥å­—ç¬¦ä¸²ä»¥ **æ˜æ–‡** å½¢å¼ä¼ è¾“ï¼ˆæ‰€æœ‰ä¿¡æ¯éƒ½ä»¥æ˜æ–‡ä¼ è¾“ï¼‰ã€‚**ç‰ˆæœ¬ 2 å’Œ 2c** ä¹Ÿä»¥ **æ˜æ–‡** å‘é€ **æµé‡**ï¼Œå¹¶ä½¿ç”¨ **ç¤¾åŒºå­—ç¬¦ä¸²ä½œä¸ºè®¤è¯**ã€‚
* **SNMPv3**ï¼šä½¿ç”¨æ›´å¥½çš„ **è®¤è¯** å½¢å¼ï¼Œä¿¡æ¯é€šè¿‡ **åŠ å¯†** ä¼ è¾“ï¼ˆå¯ä»¥æ‰§è¡Œ **å­—å…¸æ”»å‡»**ï¼Œä½†æ‰¾åˆ°æ­£ç¡®çš„å‡­æ®è¦æ¯”åœ¨ SNMPv1 å’Œ v2 ä¸­éš¾å¾—å¤šï¼‰ã€‚

### ç¤¾åŒºå­—ç¬¦ä¸²

å¦‚å‰æ‰€è¿°ï¼Œ**ä¸ºäº†è®¿é—®ä¿å­˜åœ¨ MIB ä¸Šçš„ä¿¡æ¯ï¼Œæ‚¨éœ€è¦çŸ¥é“ç‰ˆæœ¬ 1 å’Œ 2/2c çš„ç¤¾åŒºå­—ç¬¦ä¸²ä»¥åŠç‰ˆæœ¬ 3 çš„å‡­æ®ã€‚**\
æœ‰ **ä¸¤ç§ç±»å‹çš„ç¤¾åŒºå­—ç¬¦ä¸²**ï¼š

* **`public`** ä¸»è¦æ˜¯ **åªè¯»** åŠŸèƒ½
* **`private`** é€šå¸¸æ˜¯ **è¯»/å†™**

è¯·æ³¨æ„ï¼Œ**OID çš„å¯å†™æ€§å–å†³äºä½¿ç”¨çš„ç¤¾åŒºå­—ç¬¦ä¸²**ï¼Œå› æ­¤ï¼Œ**å³ä½¿** å‘ç°ä½¿ç”¨äº† "**public**"ï¼Œæ‚¨ä¹Ÿå¯èƒ½èƒ½å¤Ÿ **å†™å…¥ä¸€äº›å€¼**ã€‚æ­¤å¤–ï¼Œ**å¯èƒ½** å­˜åœ¨ä¸€äº› **å§‹ç»ˆæ˜¯ 'åªè¯»' çš„å¯¹è±¡**ã€‚\
å¦‚æœæ‚¨å°è¯• **å†™å…¥** ä¸€ä¸ªå¯¹è±¡ï¼Œä¼šæ”¶åˆ° **`noSuchName` æˆ– `readOnly` é”™è¯¯**ã€‚

åœ¨ç‰ˆæœ¬ 1 å’Œ 2/2c ä¸­ï¼Œå¦‚æœæ‚¨ä½¿ç”¨äº†ä¸€ä¸ª **é”™è¯¯** çš„ç¤¾åŒºå­—ç¬¦ä¸²ï¼ŒæœåŠ¡å™¨ä¸ä¼š **å“åº”**ã€‚æ‰€ä»¥ï¼Œå¦‚æœå®ƒå“åº”äº†ï¼Œå°±æ˜¯ä½¿ç”¨äº† **æœ‰æ•ˆçš„ç¤¾åŒºå­—ç¬¦ä¸²**ã€‚

## ç«¯å£

* SNMP ä»£ç†åœ¨ UDP ç«¯å£ **161** ä¸Šæ¥æ”¶è¯·æ±‚ã€‚
* ç®¡ç†å™¨åœ¨ç«¯å£ **162** ä¸Šæ¥æ”¶é€šçŸ¥ï¼ˆ[Traps](https://en.wikipedia.org/wiki/Simple\_Network\_Management\_Protocol#Trap) å’Œ [InformRequests](https://en.wikipedia.org/wiki/Simple\_Network\_Management\_Protocol#InformRequest)ï¼‰ã€‚
* å½“ä¸ [ä¼ è¾“å±‚å®‰å…¨](https://en.wikipedia.org/wiki/Transport\_Layer\_Security) æˆ– [æ•°æ®æŠ¥ä¼ è¾“å±‚å®‰å…¨](https://en.wikipedia.org/wiki/Datagram\_Transport\_Layer\_Security) ä¸€èµ·ä½¿ç”¨æ—¶ï¼Œè¯·æ±‚åœ¨ç«¯å£ **10161** ä¸Šæ¥æ”¶ï¼Œé€šçŸ¥å‘é€åˆ°ç«¯å£ **10162**ã€‚
## ç©·ä¸¾ç¤¾åŒºå­—ç¬¦ä¸² (v1 å’Œ v2c)

è¦**çŒœæµ‹ç¤¾åŒºå­—ç¬¦ä¸²**ï¼Œä½ å¯ä»¥æ‰§è¡Œå­—å…¸æ”»å‡»ã€‚æŸ¥çœ‹[è¿™é‡Œä¸åŒçš„å¯¹SNMPæ‰§è¡Œç©·ä¸¾æ”»å‡»çš„æ–¹æ³•](../../generic-methodologies-and-resources/brute-force.md#snmp)ã€‚ä¸€ä¸ªå¸¸ç”¨çš„ç¤¾åŒºå­—ç¬¦ä¸²æ˜¯`public`ã€‚

## æšä¸¾ SNMP

å»ºè®®å®‰è£…ä»¥ä¸‹å†…å®¹ä»¥æŸ¥çœ‹ä»è®¾å¤‡æ”¶é›†çš„**æ¯ä¸ªOIDçš„å«ä¹‰**ï¼š
```bash
apt-get install snmp-mibs-downloader
download-mibs
# Finally comment the line saying "mibs :" in /etc/snmp/snmp.conf
sudo vi /etc/snmp/snmp.conf
```
å¦‚æœæ‚¨çŸ¥é“ä¸€ä¸ªæœ‰æ•ˆçš„ç¤¾åŒºå­—ç¬¦ä¸²ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ **SNMPWalk** æˆ– **SNMP-Check** è®¿é—®æ•°æ®ï¼š
```bash
snmpbulkwalk -c [COMM_STRING] -v [VERSION] [IP] . #Don't forget the final dot
snmpbulkwalk -c public -v2c 10.10.11.136 .

snmpwalk -v [VERSION_SNMP] -c [COMM_STRING] [DIR_IP]
snmpwalk -v [VERSION_SNMP] -c [COMM_STRING] [DIR_IP] 1.3.6.1.2.1.4.34.1.3 #Get IPv6, needed dec2hex
snmpwalk -v [VERSION_SNMP] -c [COMM_STRING] [DIR_IP] NET-SNMP-EXTEND-MIB::nsExtendObjects #get extended
snmpwalk -v [VERSION_SNMP] -c [COMM_STRING] [DIR_IP] .1 #Enum all

snmp-check [DIR_IP] -p [PORT] -c [COMM_STRING]

nmap --script "snmp* and not snmp-brute" <target>

braa <community string>@<IP>:.1.3.6.* #Bruteforce specific OID
```
æ„Ÿè°¢æ‰©å±•æŸ¥è¯¢ï¼ˆdownload-mibsï¼‰ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¿›ä¸€æ­¥æšä¸¾ç³»ç»Ÿä¿¡æ¯ï¼š
```bash
snmpwalk -v X -c public <IP> NET-SNMP-EXTEND-MIB::nsExtendOutputFull
```
**SNMP** åŒ…å«äº†è®¸å¤šå…³äºä¸»æœºçš„ä¿¡æ¯ï¼Œä½ å¯èƒ½ä¼šæ„Ÿå…´è¶£çš„æœ‰ï¼š**ç½‘ç»œæ¥å£**ï¼ˆIPv4 å’Œ **IPv6** åœ°å€ï¼‰ã€ç”¨æˆ·åã€è¿è¡Œæ—¶é—´ã€æœåŠ¡å™¨/æ“ä½œç³»ç»Ÿç‰ˆæœ¬ä»¥åŠ**æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹**ï¼ˆå¯èƒ½åŒ…å«å¯†ç ï¼‰....

### **å±é™©è®¾ç½®**

**æ¥è‡ª** [**https://academy.hackthebox.com/module/112/section/1075**](https://academy.hackthebox.com/module/112/section/1075)\*\*\*\*

| **è®¾ç½®**                                         | **æè¿°**                                                                               |
| ------------------------------------------------ | ------------------------------------------------------------------------------------- |
| `rwuser noauth`                                  | æä¾›å®Œæ•´ OID æ ‘çš„è®¿é—®æƒé™ï¼Œæ— éœ€è®¤è¯ã€‚                                                  |
| `rwcommunity <community string> <IPv4 address>`  | æä¾›å®Œæ•´ OID æ ‘çš„è®¿é—®æƒé™ï¼Œä¸ç®¡è¯·æ±‚ä»å“ªé‡Œå‘é€ã€‚                                        |
| `rwcommunity6 <community string> <IPv6 address>` | ä¸ `rwcommunity` æä¾›ç›¸åŒçš„è®¿é—®æƒé™ï¼Œä¸åŒä¹‹å¤„åœ¨äºä½¿ç”¨ IPv6ã€‚                           |

### å¾®è½¯ Windows SNMP å‚æ•°

| **MIB å€¼**                                       | **æè¿°**                                                                               |
| ------------------------------------------------ | ------------------------------------------------------------------------------------- |
| `1.3.6.1.2.1.25.1.6.0`                           | ç³»ç»Ÿè¿›ç¨‹ã€‚                                                                             |
| `1.3.6.1.2.1.25.4.2.1.2`                         | æ­£åœ¨è¿è¡Œçš„ç¨‹åºã€‚                                                                       |
| `1.3.6.1.2.1.25.4.2.1.4`                         | è¿›ç¨‹è·¯å¾„ã€‚                                                                             |
| `1.3.6.1.2.1.25.2.3.1.4`                         | å­˜å‚¨å•å…ƒã€‚                                                                             |
| `1.3.6.1.2.1.25.6.3.1.2`                         | è½¯ä»¶åç§°ã€‚                                                                             |
| `1.3.6.1.4.1.77.1.2.25`                          | ç”¨æˆ·è´¦æˆ·ã€‚                                                                             |
| `1.3.6.1.2.1.6.13.1.3`                           | TCP æœ¬åœ°ç«¯å£ã€‚                                                                         |

### æ€ç§‘

å¦‚æœä½ ä½¿ç”¨çš„æ˜¯æ€ç§‘è®¾å¤‡ï¼Œè¯·æŸ¥çœ‹æ­¤é¡µé¢ï¼š

{% content-ref url="cisco-snmp.md" %}
[cisco-snmp.md](cisco-snmp.md)
{% endcontent-ref %}

## ä» SNMP åˆ° RCE

å¦‚æœä½ æ‹¥æœ‰å…è®¸ä½ åœ¨ SNMP æœåŠ¡ä¸­**å†™å…¥å€¼**çš„**å­—ç¬¦ä¸²**ï¼Œä½ å¯èƒ½å¯ä»¥æ»¥ç”¨å®ƒæ¥**æ‰§è¡Œå‘½ä»¤**ï¼š

{% content-ref url="snmp-rce.md" %}
[snmp-rce.md](snmp-rce.md)
{% endcontent-ref %}

## **å¤§è§„æ¨¡ SNMP**

[Braa ](https://github.com/mteg/braa)æ˜¯ä¸€ä¸ªå¤§è§„æ¨¡ SNMP æ‰«æå™¨ã€‚è¿™ç§å·¥å…·çš„é¢„æœŸç”¨é€”å½“ç„¶æ˜¯è¿›è¡Œ SNMP æŸ¥è¯¢ - ä½†ä¸ net-snmp çš„ snmpwalk ä¸åŒï¼Œå®ƒèƒ½å¤ŸåŒæ—¶æŸ¥è¯¢æ•°åä¸ªæˆ–æ•°ç™¾ä¸ªä¸»æœºï¼Œå¹¶ä¸”åœ¨å•ä¸€è¿›ç¨‹ä¸­å®Œæˆã€‚å› æ­¤ï¼Œå®ƒæ¶ˆè€—çš„ç³»ç»Ÿèµ„æºéå¸¸å°‘ï¼Œå¹¶ä¸”æ‰«æé€Ÿåº¦éå¸¸å¿«ã€‚

Braa å®ç°äº†å®ƒè‡ªå·±çš„ SNMP æ ˆï¼Œæ‰€ä»¥å®ƒä¸éœ€è¦ä»»ä½• SNMP åº“ï¼Œå¦‚ net-snmpã€‚

**è¯­æ³•ï¼š** braa \[Community-string]@\[SNMP æœåŠ¡å™¨çš„ IP]:\[iso id]
```
braa ignite123@192.168.1.125:.1.3.6.*
```
è¿™å¯ä»¥æå–å¤§é‡æ‚¨æ— æ³•æ‰‹åŠ¨å¤„ç†çš„ä¿¡æ¯ã€‚

å› æ­¤ï¼Œè®©æˆ‘ä»¬å¯»æ‰¾æœ€æœ‰è¶£çš„ä¿¡æ¯ï¼ˆæ¥è‡ª[https://blog.rapid7.com/2016/05/05/snmp-data-harvesting-during-penetration-testing/](https://blog.rapid7.com/2016/05/05/snmp-data-harvesting-during-penetration-testing/))ï¼š

### è®¾å¤‡

æˆ‘åšçš„ç¬¬ä¸€ä»¶äº‹æ˜¯ä»æ¯ä¸ªæ–‡ä»¶ä¸­æå–sysDesc .1.3.6.1.2.1.1.1.0 MIBæ•°æ®ï¼Œä»¥ç¡®å®šæˆ‘ä»å“ªäº›è®¾å¤‡æ”¶é›†äº†ä¿¡æ¯ã€‚è¿™å¯ä»¥ä½¿ç”¨ä»¥ä¸‹grepå‘½ä»¤è½»æ¾å®Œæˆï¼š
```
grep ".1.3.6.1.2.1.1.1.0" *.snmp
```
### è¯†åˆ«ç§æœ‰å­—ç¬¦ä¸²

ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘èƒ½è¯†åˆ«å‡ºæŸç»„ç»‡åœ¨å…¶Cisco IOSè·¯ç”±å™¨ä¸Šä½¿ç”¨çš„ç§æœ‰ç¤¾åŒºå­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆæˆ‘å¯èƒ½å°±èƒ½ä½¿ç”¨è¯¥ç¤¾åŒºå­—ç¬¦ä¸²ä»è¿™äº›è·¯ç”±å™¨ä¸­æå–è¿è¡Œé…ç½®ã€‚å¯»æ‰¾æ­¤ç±»æ•°æ®çš„æœ€ä½³æ–¹æ³•é€šå¸¸ä¸SNMP Trapæ•°æ®æœ‰å…³ã€‚å› æ­¤ï¼Œå†æ¬¡ä½¿ç”¨ä»¥ä¸‹grepï¼Œæˆ‘ä»¬å¯ä»¥å¿«é€Ÿåœ°é€šè¿‡å¤§é‡çš„MIBæ•°æ®è¿›è¡Œè§£æï¼Œæœç´¢å…³é”®è¯â€œtrapâ€ï¼š
```bash
grep -i "trap" *.snmp
```
### ç”¨æˆ·å/å¯†ç 

å¦ä¸€ä¸ªæ„Ÿå…´è¶£çš„é¢†åŸŸæ˜¯æ—¥å¿—ï¼Œæˆ‘å‘ç°æœ‰äº›è®¾å¤‡åœ¨MIBè¡¨ä¸­ä¿å­˜æ—¥å¿—ã€‚è¿™äº›æ—¥å¿—ä¹Ÿå¯èƒ½åŒ…å«ç™»å½•å°è¯•å¤±è´¥çš„è®°å½•ã€‚æƒ³æƒ³ä½ ä¸Šæ¬¡é€šè¿‡Telnetæˆ–SSHç™»å½•è®¾å¤‡æ—¶ä¸å°å¿ƒå°†å¯†ç è¾“å…¥ä¸ºç”¨æˆ·åçš„æƒ…å†µã€‚æˆ‘é€šå¸¸ä¼šæœç´¢å…³é”®è¯ï¼Œå¦‚ _fail_ã€_failed_ æˆ– _login_ï¼Œå¹¶æ£€æŸ¥é‚£äº›æ•°æ®ï¼Œçœ‹çœ‹æ˜¯å¦æœ‰ä»·å€¼çš„ä¿¡æ¯ã€‚
```bash
grep -i "login\|fail" *.snmp
```
### ç”µå­é‚®ä»¶
```bash
grep -E -o "\b[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,6}\b" *.snmp
```
## ä¿®æ”¹ SNMP å€¼

æ‚¨å¯ä»¥ä½¿ç”¨ _**NetScanTools**_ æ¥**ä¿®æ”¹å€¼**ã€‚æ‚¨éœ€è¦çŸ¥é“**ç§æœ‰å­—ç¬¦ä¸²**æ‰èƒ½è¿™æ ·åšã€‚

## ä¼ªé€ 

å¦‚æœå­˜åœ¨ ACLï¼Œä»…å…è®¸æŸäº› IP æŸ¥è¯¢ SMNP æœåŠ¡ï¼Œæ‚¨å¯ä»¥åœ¨ UDP æ•°æ®åŒ…ä¸­ä¼ªé€ å…¶ä¸­ä¸€ä¸ªåœ°å€å¹¶å—…æ¢æµé‡ã€‚

## æ£€æŸ¥ SNMP é…ç½®æ–‡ä»¶

* snmp.conf
* snmpd.conf
* snmp-config.xml

## HackTricks è‡ªåŠ¨å‘½ä»¤
```
Protocol_Name: SNMP    #Protocol Abbreviation if there is one.
Port_Number:  161     #Comma separated if there is more than one.
Protocol_Description: Simple Network Managment Protocol         #Protocol Abbreviation Spelled out

Entry_1:
Name: Notes
Description: Notes for SNMP
Note: |
SNMP - Simple Network Management Protocol is a protocol used to monitor different devices in the network (like routers, switches, printers, IoTs...).

https://book.hacktricks.xyz/pentesting/pentesting-snmp

Entry_2:
Name: SNMP Check
Description: Enumerate SNMP
Command: snmp-check {IP}

Entry_3:
Name: OneSixtyOne
Description: Crack SNMP passwords
Command: onesixtyone -c /usr/share/seclists/Discovery/SNMP/common-snmp-community-strings-onesixtyone.txt {IP} -w 100

Entry_4:
Name: Nmap
Description: Nmap snmp (no brute)
Command: nmap --script "snmp* and not snmp-brute" {IP}

Entry_5:
Name: Hydra Brute Force
Description: Need Nothing
Command: hydra -P {Big_Passwordlist} -v {IP} snmp
```
<img src="../../.gitbook/assets/i3.png" alt="" data-size="original">\
**Bug bounty tip**: **æ³¨å†Œ** **Intigriti**ï¼Œä¸€ä¸ªç”±é»‘å®¢åˆ›å»ºï¼Œä¸ºé»‘å®¢æœåŠ¡çš„ä¼˜è´¨**bug bounty å¹³å°**ï¼ç«‹å³åŠ å…¥æˆ‘ä»¬ [**https://go.intigriti.com/hacktricks**](https://go.intigriti.com/hacktricks)ï¼Œå¼€å§‹èµšå–é«˜è¾¾ **$100,000** çš„å¥–é‡‘ï¼

{% embed url="https://go.intigriti.com/hacktricks" %}

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>â˜ï¸ HackTricks Cloud â˜ï¸</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ğŸ¦ Twitter ğŸ¦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ğŸ™ï¸ Twitch ğŸ™ï¸</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ğŸ¥ Youtube ğŸ¥</strong></a></summary>

* æ‚¨åœ¨**ç½‘ç»œå®‰å…¨å…¬å¸**å·¥ä½œå—ï¼Ÿæƒ³åœ¨ **HackTricks** ä¸­çœ‹åˆ°æ‚¨çš„**å…¬å¸å¹¿å‘Š**å—ï¼Ÿæˆ–è€…æƒ³è¦è·å–**PEASS æœ€æ–°ç‰ˆæœ¬æˆ–ä¸‹è½½ HackTricks çš„ PDF**å—ï¼ŸæŸ¥çœ‹ [**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼
* å‘ç° [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬ç‹¬å®¶çš„ [**NFTs**](https://opensea.io/collection/the-peass-family) æ”¶è—
* è·å– [**å®˜æ–¹çš„ PEASS & HackTricks å•†å“**](https://peass.creator-spring.com)
* **åŠ å…¥** [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**telegram ç¾¤ç»„**](https://t.me/peass) æˆ–åœ¨ **Twitter** ä¸Š**å…³æ³¨**æˆ‘ [**ğŸ¦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks\_live)**ã€‚**
* **é€šè¿‡å‘** [**hacktricks ä»“åº“**](https://github.com/carlospolop/hacktricks) **å’Œ** [**hacktricks-cloud ä»“åº“**](https://github.com/carlospolop/hacktricks-cloud) **æäº¤ PR æ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚**

</details>
