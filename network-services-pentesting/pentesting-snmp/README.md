# 161,162,10161,10162/udp - æ¸—é€æµ‹è¯•SNMP

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>â˜ï¸ HackTricks Cloud â˜ï¸</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ğŸ¦ Twitter ğŸ¦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ğŸ™ï¸ Twitch ğŸ™ï¸</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ğŸ¥ Youtube ğŸ¥</strong></a></summary>

* ä½ åœ¨ä¸€ä¸ª**ç½‘ç»œå®‰å…¨å…¬å¸**å·¥ä½œå—ï¼Ÿä½ æƒ³åœ¨HackTricksä¸­çœ‹åˆ°ä½ çš„**å…¬å¸å¹¿å‘Š**å—ï¼Ÿæˆ–è€…ä½ æƒ³è·å¾—**PEASSçš„æœ€æ–°ç‰ˆæœ¬æˆ–ä¸‹è½½HackTricksçš„PDF**å—ï¼Ÿè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼
* å‘ç°æˆ‘ä»¬çš„ç‹¬å®¶[**NFTs**](https://opensea.io/collection/the-peass-family)æ”¶è—å“[**The PEASS Family**](https://opensea.io/collection/the-peass-family)
* è·å–[**å®˜æ–¹PEASSå’ŒHackTricksçš„è¡£ç‰©**](https://peass.creator-spring.com)
* **åŠ å…¥**[**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discordç¾¤ç»„**](https://discord.gg/hRep4RUj7f)æˆ–[**ç”µæŠ¥ç¾¤ç»„**](https://t.me/peass)æˆ–**å…³æ³¨**æˆ‘åœ¨**Twitter**ä¸Šçš„[**ğŸ¦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks\_live)**ã€‚**
* **é€šè¿‡å‘**[**hacktricks repo**](https://github.com/carlospolop/hacktricks) **å’Œ**[**hacktricks-cloud repo**](https://github.com/carlospolop/hacktricks-cloud) **æäº¤PRæ¥åˆ†äº«ä½ çš„é»‘å®¢æŠ€å·§ã€‚**

</details>

<img src="../../.gitbook/assets/i3.png" alt="" data-size="original">\
**Bugèµé‡‘æç¤º**ï¼š**æ³¨å†Œ**Intigritiï¼Œä¸€ä¸ªç”±é»‘å®¢åˆ›å»ºçš„é«˜çº§**Bugèµé‡‘å¹³å°**ï¼ç«‹å³åŠ å…¥æˆ‘ä»¬çš„[**https://go.intigriti.com/hacktricks**](https://go.intigriti.com/hacktricks)ï¼Œå¼€å§‹èµšå–é«˜è¾¾**$100,000**çš„èµé‡‘ï¼

{% embed url="https://go.intigriti.com/hacktricks" %}

## åŸºæœ¬ä¿¡æ¯

**SNMP - ç®€å•ç½‘ç»œç®¡ç†åè®®**æ˜¯ä¸€ç§ç”¨äºç›‘æ§ç½‘ç»œä¸­ä¸åŒè®¾å¤‡ï¼ˆå¦‚è·¯ç”±å™¨ã€äº¤æ¢æœºã€æ‰“å°æœºã€ç‰©è”ç½‘è®¾å¤‡ç­‰ï¼‰çš„åè®®ã€‚
```
PORT    STATE SERVICE REASON                 VERSION
161/udp open  snmp    udp-response ttl 244   ciscoSystems SNMPv3 server (public)
```
{% hint style="info" %}
SNMPè¿˜ä½¿ç”¨**162/UDPç«¯å£**è¿›è¡Œ**é™·é˜±**ã€‚è¿™äº›æ˜¯ä»SNMPæœåŠ¡å™¨å‘é€åˆ°å®¢æˆ·ç«¯çš„æ•°æ®**åŒ…ï¼Œè€Œæ— éœ€æ˜¾å¼è¯·æ±‚**ã€‚
{% endhint %}

### MIB

ä¸ºäº†ç¡®ä¿SNMPè®¿é—®åœ¨ä¸åŒåˆ¶é€ å•†å’Œä¸åŒå®¢æˆ·ç«¯-æœåŠ¡å™¨ç»„åˆä¹‹é—´æ­£å¸¸å·¥ä½œï¼Œåˆ›å»ºäº†**ç®¡ç†ä¿¡æ¯åº“ï¼ˆMIBï¼‰**ã€‚MIBæ˜¯ä¸€ç§**ç‹¬ç«‹çš„å­˜å‚¨è®¾å¤‡ä¿¡æ¯çš„æ ¼å¼**ã€‚MIBæ˜¯ä¸€ä¸ª**æ–‡æœ¬**æ–‡ä»¶ï¼Œå…¶ä¸­åˆ—å‡ºäº†è®¾å¤‡çš„æ‰€æœ‰å¯æŸ¥è¯¢çš„**SNMPå¯¹è±¡**ï¼Œå¹¶ä»¥**æ ‡å‡†åŒ–**çš„æ ‘å½¢å±‚æ¬¡ç»“æ„è¿›è¡Œç»„ç»‡ã€‚å®ƒè‡³å°‘åŒ…å«ä¸€ä¸ª`å¯¹è±¡æ ‡è¯†ç¬¦ï¼ˆOIDï¼‰`ï¼Œé™¤äº†å¿…è¦çš„**å”¯ä¸€åœ°å€**å’Œ**åç§°**å¤–ï¼Œè¿˜æä¾›æœ‰å…³å„ä¸ªå¯¹è±¡çš„ç±»å‹ã€è®¿é—®æƒé™å’Œæè¿°çš„ä¿¡æ¯ã€‚\
MIBæ–‡ä»¶ä»¥åŸºäº`æŠ½è±¡è¯­æ³•ç¬¦å·ä¸€ï¼ˆASN.1ï¼‰`çš„ASCIIæ–‡æœ¬æ ¼å¼ç¼–å†™ã€‚**MIBä¸åŒ…å«æ•°æ®**ï¼Œä½†å®ƒä»¬è§£é‡Šäº†**åœ¨å“ªé‡Œæ‰¾åˆ°å“ªäº›ä¿¡æ¯**ä»¥åŠå…¶å¤–è§‚ï¼Œè¿”å›ç‰¹å®šOIDçš„å€¼ï¼Œæˆ–ä½¿ç”¨äº†å“ªç§æ•°æ®ç±»å‹ã€‚

### OID

**OID**ä»£è¡¨**å¯¹è±¡æ ‡è¯†ç¬¦**ã€‚**OIDåœ¨MIBå±‚æ¬¡ç»“æ„ä¸­å”¯ä¸€æ ‡è¯†å—ç®¡å¯¹è±¡**ã€‚è¿™å¯ä»¥è¡¨ç¤ºä¸ºæ ‘ï¼Œå…¶çº§åˆ«ç”±ä¸åŒç»„ç»‡åˆ†é…ã€‚é¡¶çº§MIBå¯¹è±¡IDï¼ˆOIDï¼‰å±äºä¸åŒçš„æ ‡å‡†ç»„ç»‡ã€‚\
**ä¾›åº”å•†å®šä¹‰äº†åŒ…æ‹¬å…¶è‡ªå·±äº§å“çš„å—ç®¡å¯¹è±¡çš„ç§æœ‰åˆ†æ”¯**ã€‚

![](../../.gitbook/assets/snmp_oid_mib_tree.png)

æ‚¨å¯ä»¥ä»è¿™é‡Œé€šè¿‡**OIDæ ‘**è¿›è¡Œ**å¯¼èˆª**ï¼š[http://www.oid-info.com/cgi-bin/display?tree=#focus](http://www.oid-info.com/cgi-bin/display?tree=#focus)ï¼Œæˆ–è€…é€šè¿‡è®¿é—®[http://oid-info.com/get/1.3.6.1.2.1.1](http://oid-info.com/get/1.3.6.1.2.1.1)æ¥**æŸ¥çœ‹OIDçš„å«ä¹‰**ï¼ˆä¾‹å¦‚`1.3.6.1.2.1.1`ï¼‰ã€‚\
æœ‰ä¸€äº›**ä¼—æ‰€å‘¨çŸ¥çš„OID**ï¼Œä¾‹å¦‚[1.3.6.1.2.1](http://oid-info.com/get/1.3.6.1.2.1)ä¸­çš„OIDï¼Œå¼•ç”¨äº†MIB-2å®šä¹‰çš„ç®€å•ç½‘ç»œç®¡ç†åè®®ï¼ˆSNMPï¼‰å˜é‡ã€‚ä»**æ­¤OIDçš„å¾…å®šOID**ä¸­ï¼Œæ‚¨å¯ä»¥è·å–ä¸€äº›æœ‰è¶£çš„ä¸»æœºæ•°æ®ï¼ˆç³»ç»Ÿæ•°æ®ã€ç½‘ç»œæ•°æ®ã€è¿›ç¨‹æ•°æ®...ï¼‰

### **OIDç¤ºä¾‹**

**`1 . 3 . 6 . 1 . 4 . 1 . 1452 . 1 . 2 . 5 . 1 . 3. 21 . 1 . 4 . 7`**

ä»¥ä¸‹æ˜¯æ­¤åœ°å€çš„åˆ†è§£ã€‚

* 1 - è¿™è¢«ç§°ä¸ºISOï¼Œå®ƒç¡®å®šè¿™æ˜¯ä¸€ä¸ªOIDã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæ‰€æœ‰OIDéƒ½ä»¥â€œ1â€å¼€å¤´çš„åŸå› ã€‚
* 3 - è¿™è¢«ç§°ä¸ºORGï¼Œç”¨äºæŒ‡å®šæ„å»ºè®¾å¤‡çš„ç»„ç»‡ã€‚
* 6 - è¿™æ˜¯dodæˆ–å›½é˜²éƒ¨ï¼Œæ˜¯é¦–å…ˆå»ºç«‹äº’è”ç½‘çš„ç»„ç»‡ã€‚
* 1 - è¿™æ˜¯äº’è”ç½‘çš„å€¼ï¼Œè¡¨ç¤ºæ‰€æœ‰é€šä¿¡å°†é€šè¿‡äº’è”ç½‘è¿›è¡Œã€‚
* 4 - æ­¤å€¼ç¡®å®šæ­¤è®¾å¤‡æ˜¯ç”±ç§äººç»„ç»‡è€Œä¸æ˜¯æ”¿åºœç»„ç»‡åˆ¶é€ çš„ã€‚
* 1 - æ­¤å€¼è¡¨ç¤ºè¯¥è®¾å¤‡ç”±ä¼ä¸šæˆ–å•†ä¸šå®ä½“åˆ¶é€ ã€‚

è¿™å‰å…­ä¸ªå€¼å¯¹äºæ‰€æœ‰è®¾å¤‡æ¥è¯´å¾€å¾€æ˜¯ç›¸åŒçš„ï¼Œå¹¶ä¸”å®ƒä»¬ä¸ºæ‚¨æä¾›äº†æœ‰å…³è®¾å¤‡çš„åŸºæœ¬ä¿¡æ¯ã€‚é™¤éè®¾å¤‡ç”±æ”¿åºœåˆ¶é€ ï¼Œå¦åˆ™è¿™äº›æ•°å­—åºåˆ—å°†å¯¹æ‰€æœ‰OIDéƒ½æ˜¯ç›¸åŒçš„ã€‚

æ¥ä¸‹æ¥æ˜¯ä¸‹ä¸€ç»„æ•°å­—ã€‚

* 1452 - ç»™å‡ºäº†åˆ¶é€ æ­¤è®¾å¤‡çš„ç»„ç»‡çš„åç§°ã€‚
* 1 - è§£é‡Šäº†è®¾å¤‡çš„ç±»å‹ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå®ƒæ˜¯ä¸€ä¸ªé—¹é’Ÿã€‚
* 2 - ç¡®å®šæ­¤è®¾å¤‡æ˜¯è¿œç¨‹ç»ˆç«¯å•å…ƒã€‚

å…¶ä½™çš„å€¼æä¾›æœ‰å…³è®¾å¤‡çš„å…·ä½“ä¿¡æ¯ã€‚

* 5 - è¡¨ç¤ºç¦»æ•£æŠ¥è­¦ç‚¹ã€‚
* 1 - è®¾å¤‡ä¸­çš„ç‰¹å®šç‚¹
* 3 - ç«¯å£
* 21 - ç«¯å£çš„åœ°å€
* 1 - ç«¯å£çš„æ˜¾ç¤º
* 4 - ç‚¹å·
* 7 - ç‚¹çš„çŠ¶æ€

_**ï¼ˆç¤ºä¾‹æ¥è‡ª**_ [_**æ­¤å¤„**_](https://www.netadmintools.com/snmp-mib-and-oids)_**ï¼‰**_

### SNMPç‰ˆæœ¬

SNMPæœ‰ä¸¤ä¸ªé‡è¦çš„ç‰ˆæœ¬ï¼š

* **SNMPv1**ï¼šä¸»è¦ç‰ˆæœ¬ï¼Œä»ç„¶æ˜¯æœ€å¸¸è§çš„ç‰ˆæœ¬ï¼Œ**èº«ä»½éªŒè¯åŸºäºå­—ç¬¦ä¸²**ï¼ˆç¤¾åŒºå­—ç¬¦ä¸²ï¼‰ï¼Œä»¥**æ˜æ–‡**å½¢å¼ä¼ è¾“ï¼ˆæ‰€æœ‰ä¿¡æ¯éƒ½ä»¥æ˜æ–‡å½¢å¼ä¼ è¾“ï¼‰ã€‚**ç‰ˆæœ¬2å’Œ2c**ä¹Ÿä»¥**æ˜æ–‡**å½¢å¼å‘é€æµé‡ï¼Œå¹¶ä½¿ç”¨ç¤¾åŒºå­—ç¬¦ä¸²è¿›è¡Œèº«ä»½éªŒè¯ã€‚
* **SNMPv3**ï¼šä½¿ç”¨æ›´å¥½çš„**èº«ä»½éªŒè¯**å½¢å¼ï¼Œå¹¶ä½¿ç”¨**åŠ å¯†**ä¼ è¾“ä¿¡æ¯ï¼ˆå¯ä»¥æ‰§è¡Œ**å­—å…¸æ”»å‡»**ï¼Œä½†è¦æ‰¾åˆ°æ­£ç¡®çš„å‡­æ®æ¯”åœ¨SNMPv1å’Œv2ä¸­å›°éš¾å¾—å¤šï¼‰ã€‚

### ç¤¾åŒºå­—ç¬¦ä¸²

å¦‚å‰æ‰€è¿°ï¼Œåœ¨ç‰ˆæœ¬1å’Œ2/2cä¸Šè®¿é—®MIBä¸Šä¿å­˜çš„ä¿¡æ¯æ—¶ï¼Œéœ€è¦çŸ¥é“ç¤¾åŒºå­—ç¬¦ä¸²ï¼Œè€Œåœ¨ç‰ˆæœ¬3ä¸Šéœ€è¦å‡­æ®ã€‚\
æœ‰**2ç§ç±»å‹çš„ç¤¾åŒºå­—ç¬¦ä¸²**ï¼š

* **`public`** ä¸»è¦ç”¨äº**åªè¯»**åŠŸèƒ½
* **`private`** é€šå¸¸ç”¨äº**è¯»/å†™**

è¯·æ³¨æ„ï¼Œ**OIDçš„å¯å†™æ€§å–å†³äºä½¿ç”¨çš„ç¤¾åŒºå­—ç¬¦ä¸²**ï¼Œå› æ­¤ï¼Œå³ä½¿å‘ç°ä½¿ç”¨äº†â€œpublicâ€ï¼Œæ‚¨ä¹Ÿå¯èƒ½èƒ½å¤Ÿ**å†™å…¥æŸäº›å€¼**ã€‚æ­¤å¤–ï¼Œ**å¯èƒ½**å­˜åœ¨å§‹ç»ˆä¸ºâ€œåªè¯»â€çš„å¯¹è±¡ã€‚\
å¦‚æœå°è¯•**å†™å…¥**å¯¹è±¡ï¼Œåˆ™ä¼šæ”¶åˆ°**`noSuchName`æˆ–`readOnly`é”™è¯¯**ã€‚

åœ¨ç‰ˆæœ¬1å’Œ2/2cä¸­ï¼Œå¦‚æœä½¿ç”¨**é”™è¯¯çš„**ç¤¾åŒºå­—ç¬¦ä¸²ï¼ŒæœåŠ¡å™¨å°†ä¸ä¼š**å“åº”**ã€‚å› æ­¤ï¼Œå¦‚æœå®ƒæœ‰å“åº”ï¼Œåˆ™ä½¿ç”¨äº†**æœ‰æ•ˆçš„ç¤¾åŒºå­—ç¬¦ä¸²**ã€‚

## ç«¯å£

* SNMPä»£ç†åœ¨UDPç«¯å£**161**ä¸Šæ¥æ”¶è¯·æ±‚ã€‚
* ç®¡ç†å™¨åœ¨ç«¯å£**162**ä¸Šæ¥æ”¶é€šçŸ¥ï¼ˆ[é™·é˜±](https://en.wikipedia.org/wiki/Simple\_Network\_Management\_Protocol#Trap)å’Œ[InformRequests](https://en.wikipedia.org/wiki/Simple\_Network\_Management\_Protocol#InformRequest)ï¼‰ã€‚
* å½“ä¸[ä¼ è¾“å±‚å®‰å…¨æ€§](https://en.wikipedia.org/wiki/Transport\_Layer\_Security)æˆ–[æ•°æ®æŠ¥ä¼ è¾“å±‚å®‰å…¨æ€§](https://en.wikipedia.org/wiki/Datagram\_Transport\_Layer\_Security)ä¸€èµ·ä½¿ç”¨æ—¶ï¼Œè¯·æ±‚åœ¨ç«¯å£**10161**ä¸Šæ¥æ”¶ï¼Œé€šçŸ¥å‘é€åˆ°ç«¯å£**10162**ã€‚
## æš´åŠ›ç ´è§£ç¤¾åŒºå­—ç¬¦ä¸²ï¼ˆv1å’Œv2cï¼‰

ä¸ºäº†çŒœæµ‹ç¤¾åŒºå­—ç¬¦ä¸²ï¼Œæ‚¨å¯ä»¥è¿›è¡Œå­—å…¸æ”»å‡»ã€‚è¯·æŸ¥çœ‹[è¿™é‡Œä¸åŒçš„æ–¹æ³•æ¥å¯¹SNMPè¿›è¡Œæš´åŠ›ç ´è§£æ”»å‡»](../../generic-methodologies-and-resources/brute-force.md#snmp)ã€‚ä¸€ä¸ªç»å¸¸ä½¿ç”¨çš„ç¤¾åŒºå­—ç¬¦ä¸²æ˜¯`public`ã€‚

## æšä¸¾SNMP

å»ºè®®å®‰è£…ä»¥ä¸‹å·¥å…·ï¼Œä»¥æŸ¥çœ‹ä»è®¾å¤‡ä¸­æ”¶é›†åˆ°çš„æ¯ä¸ªOIDçš„å«ä¹‰ï¼š
```bash
apt-get install snmp-mibs-downloader
download-mibs
# Finally comment the line saying "mibs :" in /etc/snmp/snmp.conf
sudo vi /etc/snmp/snmp.conf
```
å¦‚æœä½ çŸ¥é“ä¸€ä¸ªæœ‰æ•ˆçš„ç¤¾åŒºå­—ç¬¦ä¸²ï¼Œä½ å¯ä»¥ä½¿ç”¨**SNMPWalk**æˆ–**SNMP-Check**æ¥è®¿é—®æ•°æ®ï¼š
```bash
snmpbulkwalk -c [COMM_STRING] -v [VERSION] [IP] . #Don't forget the final dot
snmpbulkwalk -c public -v2c 10.10.11.136 .

snmpwalk -v [VERSION_SNMP] -c [COMM_STRING] [DIR_IP]
snmpwalk -v [VERSION_SNMP] -c [COMM_STRING] [DIR_IP] 1.3.6.1.2.1.4.34.1.3 #Get IPv6, needed dec2hex
snmpwalk -v [VERSION_SNMP] -c [COMM_STRING] [DIR_IP] NET-SNMP-EXTEND-MIB::nsExtendObjects #get extended
snmpwalk -v [VERSION_SNMP] -c [COMM_STRING] [DIR_IP] .1 #Enum all

snmp-check [DIR_IP] -p [PORT] -c [COMM_STRING]

nmap --script "snmp* and not snmp-brute" <target>

braa <community string>@<IP>:.1.3.6.* #Bruteforce specific OID
```
æ„Ÿè°¢æ‰©å±•æŸ¥è¯¢ï¼ˆdownload-mibsï¼‰ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¿›ä¸€æ­¥æšä¸¾ç³»ç»Ÿçš„ä¿¡æ¯ï¼š
```bash
snmpwalk -v X -c public <IP> NET-SNMP-EXTEND-MIB::nsExtendOutputFull
```
**SNMP**æœ‰å…³ä¸»æœºçš„è®¸å¤šä¿¡æ¯ï¼Œæ‚¨å¯èƒ½ä¼šå‘ç°æœ‰è¶£çš„æ˜¯ï¼š**ç½‘ç»œæ¥å£**ï¼ˆIPv4å’Œ**IPv6**åœ°å€ï¼‰ã€ç”¨æˆ·åã€è¿è¡Œæ—¶é—´ã€æœåŠ¡å™¨/æ“ä½œç³»ç»Ÿç‰ˆæœ¬å’Œ**æ­£åœ¨è¿è¡Œçš„**è¿›ç¨‹ï¼ˆå¯èƒ½åŒ…å«å¯†ç ï¼‰....

### **å±é™©çš„è®¾ç½®**

æ¥è‡ª[https://academy.hackthebox.com/module/112/section/1075](https://academy.hackthebox.com/module/112/section/1075)çš„è®¾ç½®ï¼š

| **è®¾ç½®**                                     | **æè¿°**                                                                                   |
| -------------------------------------------- | ----------------------------------------------------------------------------------------- |
| `rwuser noauth`                              | æä¾›å¯¹å®Œæ•´OIDæ ‘çš„æ— éœ€èº«ä»½éªŒè¯çš„è®¿é—®æƒé™ã€‚                                                |
| `rwcommunity <community string> <IPv4 address>`  | æä¾›å¯¹å®Œæ•´OIDæ ‘çš„è®¿é—®æƒé™ï¼Œæ— è®ºè¯·æ±‚æ¥è‡ªä½•å¤„ã€‚                                             |
| `rwcommunity6 <community string> <IPv6 address>` | ä¸`rwcommunity`ç›¸åŒçš„è®¿é—®æƒé™ï¼ŒåŒºåˆ«åœ¨äºä½¿ç”¨IPv6ã€‚                                          |

### Cisco

å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯Ciscoè®¾å¤‡ï¼Œè¯·æŸ¥çœ‹æ­¤é¡µé¢ï¼š

{% content-ref url="cisco-snmp.md" %}
[cisco-snmp.md](cisco-snmp.md)
{% endcontent-ref %}

## ä»SNMPåˆ°RCE

å¦‚æœæ‚¨æ‹¥æœ‰å…è®¸æ‚¨åœ¨SNMPæœåŠ¡ä¸­**å†™å…¥å€¼**çš„**å­—ç¬¦ä¸²**ï¼Œåˆ™å¯ä»¥æ»¥ç”¨å®ƒæ¥**æ‰§è¡Œå‘½ä»¤**ï¼š

{% content-ref url="snmp-rce.md" %}
[snmp-rce.md](snmp-rce.md)
{% endcontent-ref %}

## **å¤§è§„æ¨¡SNMP**

[Braa](https://github.com/mteg/braa)æ˜¯ä¸€ä¸ªå¤§è§„æ¨¡SNMPæ‰«æå™¨ã€‚è¿™ä¸ªå·¥å…·çš„é¢„æœŸç”¨é€”å½“ç„¶æ˜¯è¿›è¡ŒSNMPæŸ¥è¯¢ï¼Œä½†ä¸net-snmpçš„snmpwalkä¸åŒï¼Œå®ƒèƒ½å¤ŸåŒæ—¶æŸ¥è¯¢å‡ åä¸ªæˆ–å‡ ç™¾ä¸ªä¸»æœºï¼Œå¹¶åœ¨å•ä¸ªè¿›ç¨‹ä¸­æ‰§è¡Œã€‚å› æ­¤ï¼Œå®ƒæ¶ˆè€—éå¸¸å°‘çš„ç³»ç»Ÿèµ„æºï¼Œå¹¶ä¸”æ‰«æéå¸¸å¿«é€Ÿã€‚

Braaå®ç°äº†è‡ªå·±çš„SNMPå †æ ˆï¼Œå› æ­¤ä¸éœ€è¦åƒnet-snmpé‚£æ ·çš„ä»»ä½•SNMPåº“ã€‚

**è¯­æ³•ï¼š** braa \[Community-string]@\[IP of SNMP server]:\[iso id]
```
braa ignite123@192.168.1.125:.1.3.6.*
```
è¿™å¯ä»¥æå–å¤§é‡çš„ä¿¡æ¯ï¼Œä½ æ— æ³•æ‰‹åŠ¨å¤„ç†ã€‚

å› æ­¤ï¼Œè®©æˆ‘ä»¬å¯»æ‰¾æœ€æœ‰è¶£çš„ä¿¡æ¯ï¼ˆæ¥è‡ª[https://blog.rapid7.com/2016/05/05/snmp-data-harvesting-during-penetration-testing/](https://blog.rapid7.com/2016/05/05/snmp-data-harvesting-during-penetration-testing/)ï¼‰ï¼š

### è®¾å¤‡

æˆ‘é¦–å…ˆè¦åšçš„äº‹æƒ…ä¹‹ä¸€æ˜¯ä»æ¯ä¸ªæ–‡ä»¶ä¸­æå–sysDesc .1.3.6.1.2.1.1.1.0 MIBæ•°æ®ï¼Œä»¥ç¡®å®šæˆ‘ä»å“ªäº›è®¾å¤‡ä¸­æ”¶é›†åˆ°äº†ä¿¡æ¯ã€‚å¯ä»¥ä½¿ç”¨ä»¥ä¸‹grepå‘½ä»¤è½»æ¾å®Œæˆï¼š
```
grep ".1.3.6.1.2.1.1.1.0" *.snmp
```
### è¯†åˆ«ç§æœ‰å­—ç¬¦ä¸²

ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘èƒ½å¤Ÿè¯†åˆ«å‡ºç»„ç»‡åœ¨å…¶Cisco IOSè·¯ç”±å™¨ä¸Šä½¿ç”¨çš„ç§æœ‰ç¤¾åŒºå­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆæˆ‘å¯èƒ½å¯ä»¥ä½¿ç”¨è¯¥ç¤¾åŒºå­—ç¬¦ä¸²ä»è¿™äº›è·¯ç”±å™¨ä¸­æå–è¿è¡Œé…ç½®ã€‚å¯»æ‰¾è¿™æ ·çš„æ•°æ®çš„æœ€ä½³æ–¹æ³•é€šå¸¸ä¸SNMP Trapæ•°æ®ç›¸å…³ã€‚å› æ­¤ï¼Œå†æ¬¡ä½¿ç”¨ä»¥ä¸‹grepå‘½ä»¤ï¼Œæˆ‘ä»¬å¯ä»¥å¿«é€Ÿåœ°è§£æå¤§é‡çš„MIBæ•°æ®ï¼Œæœç´¢å…³é”®è¯â€œtrapâ€ï¼š
```bash
grep -i "trap" *.snmp
```
### ç”¨æˆ·å/å¯†ç 

å¦ä¸€ä¸ªæ„Ÿå…´è¶£çš„é¢†åŸŸæ˜¯æ—¥å¿—ï¼Œæˆ‘å‘ç°æœ‰ä¸€äº›è®¾å¤‡åœ¨MIBè¡¨ä¸­ä¿å­˜äº†æ—¥å¿—ã€‚è¿™äº›æ—¥å¿—ä¹Ÿå¯èƒ½åŒ…å«ç™»å½•å¤±è´¥çš„å°è¯•ã€‚æƒ³æƒ³ä½ ä¸Šæ¬¡é€šè¿‡Telnetæˆ–SSHç™»å½•è®¾å¤‡æ—¶ï¼Œæ˜¯å¦ä¸å°å¿ƒå°†å¯†ç è¾“å…¥ä¸ºç”¨æˆ·åã€‚æˆ‘é€šå¸¸æœç´¢å…³é”®è¯ï¼Œå¦‚_fail_ï¼Œ_failed_æˆ–_login_ï¼Œå¹¶æ£€æŸ¥è¿™äº›æ•°æ®ï¼Œçœ‹æ˜¯å¦æœ‰ä»»ä½•æœ‰ä»·å€¼çš„ä¿¡æ¯ã€‚
```bash
grep -i "login\|fail" *.snmp
```
### ç”µå­é‚®ä»¶

SNMP can be used to gather information about email services running on a target system. This can include details such as the email server's IP address, port number, and other configuration settings.

SNMPå¯ä»¥ç”¨äºæ”¶é›†æœ‰å…³ç›®æ ‡ç³»ç»Ÿä¸Šè¿è¡Œçš„ç”µå­é‚®ä»¶æœåŠ¡çš„ä¿¡æ¯ã€‚è¿™äº›ä¿¡æ¯å¯ä»¥åŒ…æ‹¬ç”µå­é‚®ä»¶æœåŠ¡å™¨çš„IPåœ°å€ã€ç«¯å£å·å’Œå…¶ä»–é…ç½®è®¾ç½®ã€‚

#### Enumerating Email Addresses

#### æšä¸¾ç”µå­é‚®ä»¶åœ°å€

SNMP can also be used to enumerate email addresses on a target system. By querying the SNMP MIB (Management Information Base) for the email service, it is possible to retrieve a list of email addresses associated with that service.

SNMPè¿˜å¯ä»¥ç”¨äºæšä¸¾ç›®æ ‡ç³»ç»Ÿä¸Šçš„ç”µå­é‚®ä»¶åœ°å€ã€‚é€šè¿‡æŸ¥è¯¢ç”µå­é‚®ä»¶æœåŠ¡çš„SNMP MIBï¼ˆç®¡ç†ä¿¡æ¯åº“ï¼‰ï¼Œå¯ä»¥æ£€ç´¢ä¸è¯¥æœåŠ¡å…³è”çš„ç”µå­é‚®ä»¶åœ°å€åˆ—è¡¨ã€‚

#### Sending Emails via SNMP

#### é€šè¿‡SNMPå‘é€ç”µå­é‚®ä»¶

In some cases, it may be possible to send emails using SNMP. This can be achieved by leveraging the SNMP MIBs that allow for email functionality. By configuring the necessary SNMP settings and using the appropriate SNMP commands, it is possible to send emails through the target system's email service.

åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå¯ä»¥é€šè¿‡SNMPå‘é€ç”µå­é‚®ä»¶ã€‚è¿™å¯ä»¥é€šè¿‡åˆ©ç”¨å…è®¸è¿›è¡Œç”µå­é‚®ä»¶åŠŸèƒ½çš„SNMP MIBæ¥å®ç°ã€‚é€šè¿‡é…ç½®å¿…è¦çš„SNMPè®¾ç½®å¹¶ä½¿ç”¨é€‚å½“çš„SNMPå‘½ä»¤ï¼Œå¯ä»¥é€šè¿‡ç›®æ ‡ç³»ç»Ÿçš„ç”µå­é‚®ä»¶æœåŠ¡å‘é€ç”µå­é‚®ä»¶ã€‚

#### SNMP Email Traps

#### SNMPç”µå­é‚®ä»¶é™·é˜±

SNMP can also be used to send email traps, which are notifications sent to a specified email address when certain events occur. These traps can be configured to alert administrators of critical events, such as system failures or security breaches.

SNMPè¿˜å¯ä»¥ç”¨äºå‘é€ç”µå­é‚®ä»¶é™·é˜±ï¼Œå³åœ¨å‘ç”ŸæŸäº›äº‹ä»¶æ—¶å‘æŒ‡å®šçš„ç”µå­é‚®ä»¶åœ°å€å‘é€é€šçŸ¥ã€‚å¯ä»¥é…ç½®è¿™äº›é™·é˜±ä»¥é€šçŸ¥ç®¡ç†å‘˜å…³é”®äº‹ä»¶ï¼Œä¾‹å¦‚ç³»ç»Ÿæ•…éšœæˆ–å®‰å…¨æ¼æ´ã€‚

#### SNMP Email Authentication

#### SNMPç”µå­é‚®ä»¶èº«ä»½éªŒè¯

When using SNMP to send emails, it is important to ensure proper authentication to prevent unauthorized access. This can be achieved by configuring SNMPv3 with strong authentication mechanisms, such as HMAC-SHA or AES encryption.

åœ¨ä½¿ç”¨SNMPå‘é€ç”µå­é‚®ä»¶æ—¶ï¼Œç¡®ä¿é€‚å½“çš„èº«ä»½éªŒè¯ä»¥é˜²æ­¢æœªç»æˆæƒçš„è®¿é—®éå¸¸é‡è¦ã€‚å¯ä»¥é€šè¿‡é…ç½®å…·æœ‰å¼ºèº«ä»½éªŒè¯æœºåˆ¶çš„SNMPv3ï¼Œä¾‹å¦‚HMAC-SHAæˆ–AESåŠ å¯†ï¼Œæ¥å®ç°è¿™ä¸€ç‚¹ã€‚
```bash
grep -E -o "\b[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,6}\b" *.snmp
```
## ä¿®æ”¹SNMPå€¼

æ‚¨å¯ä»¥ä½¿ç”¨ _**NetScanTools**_ æ¥**ä¿®æ”¹å€¼**ã€‚ä¸ºäº†è¿™æ ·åšï¼Œæ‚¨éœ€è¦çŸ¥é“**ç§æœ‰å­—ç¬¦ä¸²**ã€‚

## æ¬ºéª—

å¦‚æœæœ‰ä¸€ä¸ªACLåªå…è®¸ä¸€äº›IPæŸ¥è¯¢SMNPæœåŠ¡ï¼Œæ‚¨å¯ä»¥åœ¨UDPæ•°æ®åŒ…ä¸­ä¼ªé€ å…¶ä¸­ä¸€ä¸ªåœ°å€å¹¶å—…æ¢æµé‡ã€‚

## æ£€æŸ¥SNMPé…ç½®æ–‡ä»¶

* snmp.conf
* snmpd.conf
* snmp-config.xml

## HackTricksè‡ªåŠ¨å‘½ä»¤
```
Protocol_Name: SNMP    #Protocol Abbreviation if there is one.
Port_Number:  161     #Comma separated if there is more than one.
Protocol_Description: Simple Network Managment Protocol         #Protocol Abbreviation Spelled out

Entry_1:
Name: Notes
Description: Notes for SNMP
Note: |
SNMP - Simple Network Management Protocol is a protocol used to monitor different devices in the network (like routers, switches, printers, IoTs...).

https://book.hacktricks.xyz/pentesting/pentesting-snmp

Entry_2:
Name: SNMP Check
Description: Enumerate SNMP
Command: snmp-check {IP}

Entry_3:
Name: OneSixtyOne
Description: Crack SNMP passwords
Command: onesixtyone -c /usr/share/seclists/Discovery/SNMP/common-snmp-community-strings-onesixtyone.txt {IP} -w 100

Entry_4:
Name: Nmap
Description: Nmap snmp (no brute)
Command: nmap --script "snmp* and not snmp-brute" {IP}

Entry_5:
Name: Hydra Brute Force
Description: Need Nothing
Command: hydra -P {Big_Passwordlist} -v {IP} snmp
```
<img src="../../.gitbook/assets/i3.png" alt="" data-size="original">\
**Bugèµé‡‘æç¤º**ï¼š**æ³¨å†Œ**Intigritiï¼Œä¸€ä¸ªç”±é»‘å®¢åˆ›å»ºçš„é«˜çº§**Bugèµé‡‘å¹³å°**ï¼ç«‹å³åŠ å…¥æˆ‘ä»¬ï¼Œå¼€å§‹èµšå–é«˜è¾¾**$100,000**çš„èµé‡‘ï¼

{% embed url="https://go.intigriti.com/hacktricks" %}

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>â˜ï¸ HackTricksäº‘ â˜ï¸</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ğŸ¦ æ¨ç‰¹ ğŸ¦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ğŸ™ï¸ Twitch ğŸ™ï¸</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ğŸ¥ Youtube ğŸ¥</strong></a></summary>

* ä½ åœ¨ä¸€å®¶**ç½‘ç»œå®‰å…¨å…¬å¸**å·¥ä½œå—ï¼Ÿæƒ³è¦åœ¨HackTricksä¸­**å®£ä¼ ä½ çš„å…¬å¸**å—ï¼Ÿæˆ–è€…ä½ æƒ³è¦**è·å–PEASSçš„æœ€æ–°ç‰ˆæœ¬æˆ–ä¸‹è½½HackTricksçš„PDF**å—ï¼Ÿè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼
* å‘ç°æˆ‘ä»¬çš„ç‹¬å®¶[**NFTs**](https://opensea.io/collection/the-peass-family)æ”¶è—å“ï¼š[**The PEASS Family**](https://opensea.io/collection/the-peass-family)
* è·å–[**å®˜æ–¹PEASSå’ŒHackTrickså‘¨è¾¹äº§å“**](https://peass.creator-spring.com)
* **åŠ å…¥**[**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discordç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**Telegramç¾¤ç»„**](https://t.me/peass)ï¼Œæˆ–è€…**å…³æ³¨**æˆ‘åœ¨**Twitter**ä¸Šçš„[**ğŸ¦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks\_live)**ã€‚**
* **é€šè¿‡å‘**[**hacktricks repo**](https://github.com/carlospolop/hacktricks) **å’Œ**[**hacktricks-cloud repo**](https://github.com/carlospolop/hacktricks-cloud) **æäº¤PRæ¥åˆ†äº«ä½ çš„é»‘å®¢æŠ€å·§ã€‚**

</details>
