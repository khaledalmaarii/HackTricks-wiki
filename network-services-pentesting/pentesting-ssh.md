# 22 - Pentesting SSH/SFTP

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

<figure><img src="../.gitbook/assets/i3.png" alt=""><figcaption></figcaption></figure>

**Bug bounty tip**: **sign up** for **Intigriti**, a premium **bug bounty platform created by hackers, for hackers**! Join us at [**https://go.intigriti.com/hacktricks**](https://go.intigriti.com/hacktricks) today, and start earning bounties up to **$100,000**!

{% embed url="https://go.intigriti.com/hacktricks" %}

## Temel Bilgiler

**SSH (Secure Shell veya Secure Socket Shell)**, gÃ¼vensiz bir aÄŸ Ã¼zerinden bir bilgisayara gÃ¼venli bir baÄŸlantÄ± saÄŸlayan bir aÄŸ protokolÃ¼dÃ¼r. Uzak sistemlere eriÅŸirken verilerin gizliliÄŸini ve bÃ¼tÃ¼nlÃ¼ÄŸÃ¼nÃ¼ korumak iÃ§in gereklidir.

**VarsayÄ±lan port:** 22
```
22/tcp open  ssh     syn-ack
```
**SSH sunucularÄ±:**

* [openSSH](http://www.openssh.org) â€“ OpenBSD SSH, BSD, Linux daÄŸÄ±tÄ±mlarÄ± ve Windows 10'dan itibaren Windows'ta yerleÅŸik
* [Dropbear](https://matt.ucc.asn.au/dropbear/dropbear.html) â€“ DÃ¼ÅŸÃ¼k bellek ve iÅŸlemci kaynaklarÄ±na sahip ortamlar iÃ§in SSH uygulamasÄ±, OpenWrt'de yerleÅŸik
* [PuTTY](https://www.chiark.greenend.org.uk/\~sgtatham/putty/) â€“ Windows iÃ§in SSH uygulamasÄ±, istemcisi yaygÄ±n olarak kullanÄ±lÄ±r ancak sunucu kullanÄ±mÄ± daha nadirdir
* [CopSSH](https://www.itefix.net/copssh) â€“ Windows iÃ§in OpenSSH uygulamasÄ±

**SSH kÃ¼tÃ¼phaneleri (sunucu tarafÄ±nÄ± uygulayan):**

* [libssh](https://www.libssh.org) â€“ SSHv2 protokolÃ¼nÃ¼ uygulayan Ã§ok platformlu C kÃ¼tÃ¼phanesi, [Python](https://github.com/ParallelSSH/ssh-python), [Perl](https://github.com/garnier-quentin/perl-libssh/) ve [R](https://github.com/ropensci/ssh) ile baÄŸlamalarÄ± vardÄ±r; KDE tarafÄ±ndan sftp iÃ§in ve GitHub tarafÄ±ndan git SSH altyapÄ±sÄ± iÃ§in kullanÄ±lÄ±r
* [wolfSSH](https://www.wolfssl.com/products/wolfssh/) â€“ ANSI C ile yazÄ±lmÄ±ÅŸ ve gÃ¶mÃ¼lÃ¼, RTOS ve kaynak kÄ±sÄ±tlÄ± ortamlar iÃ§in hedeflenmiÅŸ SSHv2 sunucu kÃ¼tÃ¼phanesi
* [Apache MINA SSHD](https://mina.apache.org/sshd-project/index.html) â€“ Apache SSHD java kÃ¼tÃ¼phanesi Apache MINA'ya dayanmaktadÄ±r
* [paramiko](https://github.com/paramiko/paramiko) â€“ Python SSHv2 protokol kÃ¼tÃ¼phanesi

## SayÄ±m

### Banner Yakalama
```bash
nc -vn <IP> 22
```
### Automated ssh-audit

ssh-audit, ssh sunucu ve istemci yapÄ±landÄ±rma denetimi iÃ§in bir araÃ§tÄ±r.

[https://github.com/jtesta/ssh-audit](https://github.com/jtesta/ssh-audit) gÃ¼ncellenmiÅŸ bir fork'tur [https://github.com/arthepsy/ssh-audit/](https://github.com/arthepsy/ssh-audit/)

**Ã–zellikler:**

* SSH1 ve SSH2 protokol sunucu desteÄŸi;
* SSH istemci yapÄ±landÄ±rmasÄ±nÄ± analiz etme;
* banner alma, cihaz veya yazÄ±lÄ±m ve iÅŸletim sistemini tanÄ±ma, sÄ±kÄ±ÅŸtÄ±rmayÄ± tespit etme;
* anahtar deÄŸiÅŸimi, anahtar, ÅŸifreleme ve mesaj kimlik doÄŸrulama kodu algoritmalarÄ±nÄ± toplama;
* algoritma bilgilerini Ã§Ä±ktÄ± olarak verme (mevcut olduÄŸu tarih, kaldÄ±rÄ±lmÄ±ÅŸ/devre dÄ±ÅŸÄ±, gÃ¼vensiz/zayÄ±f/eski, vb.);
* algoritma Ã¶nerilerini Ã§Ä±ktÄ± olarak verme (tanÄ±nan yazÄ±lÄ±m sÃ¼rÃ¼mÃ¼ne gÃ¶re ekleme veya kaldÄ±rma);
* gÃ¼venlik bilgilerini Ã§Ä±ktÄ± olarak verme (ilgili sorunlar, atanan CVE listesi, vb.);
* algoritma bilgisine dayalÄ± SSH sÃ¼rÃ¼m uyumluluÄŸunu analiz etme;
* OpenSSH, Dropbear SSH ve libssh'den tarihsel bilgiler;
* Linux ve Windows'ta Ã§alÄ±ÅŸÄ±r;
* baÄŸÄ±mlÄ±lÄ±k yok
```bash
usage: ssh-audit.py [-1246pbcnjvlt] <host>

-1,  --ssh1             force ssh version 1 only
-2,  --ssh2             force ssh version 2 only
-4,  --ipv4             enable IPv4 (order of precedence)
-6,  --ipv6             enable IPv6 (order of precedence)
-p,  --port=<port>      port to connect
-b,  --batch            batch output
-c,  --client-audit     starts a server on port 2222 to audit client
software config (use -p to change port;
use -t to change timeout)
-n,  --no-colors        disable colors
-j,  --json             JSON output
-v,  --verbose          verbose output
-l,  --level=<level>    minimum output level (info|warn|fail)
-t,  --timeout=<secs>   timeout (in seconds) for connection and reading
(default: 5)
$ python3 ssh-audit <IP>
```
[See it in action (Asciinema)](https://asciinema.org/a/96ejZKxpbuupTK9j7h8BdClzp)

### Sunucunun Genel SSH AnahtarÄ±
```bash
ssh-keyscan -t rsa <IP> -p <PORT>
```
### ZayÄ±f Åifreleme AlgoritmalarÄ±

Bu, varsayÄ±lan olarak **nmap** tarafÄ±ndan keÅŸfedilir. Ancak **sslcan** veya **sslyze** de kullanabilirsiniz.

### Nmap betikleri
```bash
nmap -p22 <ip> -sC # Send default nmap scripts for SSH
nmap -p22 <ip> -sV # Retrieve version
nmap -p22 <ip> --script ssh2-enum-algos # Retrieve supported algorythms
nmap -p22 <ip> --script ssh-hostkey --script-args ssh_hostkey=full # Retrieve weak keys
nmap -p22 <ip> --script ssh-auth-methods --script-args="ssh.user=root" # Check authentication methods
```
### Shodan

* `ssh`

## KullanÄ±cÄ± adlarÄ±, ÅŸifreler ve Ã¶zel anahtarlar iÃ§in brute force

### KullanÄ±cÄ± AdÄ± SayÄ±mÄ±

OpenSSH'nin bazÄ± sÃ¼rÃ¼mlerinde kullanÄ±cÄ±larÄ± saymak iÃ§in bir zamanlama saldÄ±rÄ±sÄ± yapabilirsiniz. Bunu istismar etmek iÃ§in bir metasploit modÃ¼lÃ¼ kullanabilirsiniz:
```
msf> use scanner/ssh/ssh_enumusers
```
### [Brute force](../generic-methodologies-and-resources/brute-force.md#ssh)

BazÄ± yaygÄ±n ssh kimlik bilgileri [burada](https://github.com/danielmiessler/SecLists/blob/master/Passwords/Default-Credentials/ssh-betterdefaultpasslist.txt) ve [burada](https://github.com/danielmiessler/SecLists/blob/master/Passwords/Common-Credentials/top-20-common-SSH-passwords.txt) ve aÅŸaÄŸÄ±da.

### Ã–zel Anahtar Brute Force

KullanÄ±labilecek bazÄ± ssh Ã¶zel anahtarlarÄ±nÄ± biliyorsanÄ±z... deneyelim. nmap betiÄŸini kullanabilirsiniz:
```
https://nmap.org/nsedoc/scripts/ssh-publickey-acceptance.html
```
Ya da MSF yardÄ±mcÄ± modÃ¼lÃ¼:
```
msf> use scanner/ssh/ssh_identify_pubkeys
```
Or use `ssh-keybrute.py` (native python3, lightweight and has legacy algorithms enabled): [snowdroppe/ssh-keybrute](https://github.com/snowdroppe/ssh-keybrute).

#### Bilinen kÃ¶tÃ¼ anahtarlar burada bulunabilir:

{% embed url="https://github.com/rapid7/ssh-badkeys/tree/master/authorized" %}

#### ZayÄ±f SSH anahtarlarÄ± / Debian tahmin edilebilir PRNG

BazÄ± sistemler, kriptografik materyal oluÅŸturmak iÃ§in kullanÄ±lan rastgele tohumda bilinen hatalara sahiptir. Bu, bruteforce edilebilecek Ã¶nemli Ã¶lÃ§Ã¼de azaltÄ±lmÄ±ÅŸ bir anahtar alanÄ±na yol aÃ§abilir. ZayÄ±f PRNG'den etkilenen Debian sistemlerinde Ã¶nceden oluÅŸturulmuÅŸ anahtar setleri burada mevcuttur: [g0tmi1k/debian-ssh](https://github.com/g0tmi1k/debian-ssh).

Kurban makinesi iÃ§in geÃ§erli anahtarlarÄ± aramak amacÄ±yla buraya bakmalÄ±sÄ±nÄ±z.

### Kerberos

**crackmapexec** `ssh` protokolÃ¼nÃ¼ kullanarak **kerberos ile kimlik doÄŸrulama** yapmak iÃ§in `--kerberos` seÃ§eneÄŸini kullanabilir.\
Daha fazla bilgi iÃ§in `crackmapexec ssh --help` komutunu Ã§alÄ±ÅŸtÄ±rÄ±n.

## VarsayÄ±lan Kimlik Bilgileri

| **SatÄ±cÄ±** | **KullanÄ±cÄ± AdlarÄ±**                                                                                               | **Åifreler**                                                                                                                                                                                              |
| ---------- | ----------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| APC        | apc, cihaz                                                                                                 | apc                                                                                                                                                                                                        |
| Brocade    | admin                                                                                                       | admin123, password, brocade, fibranne                                                                                                                                                                      |
| Cisco      | admin, cisco, enable, hsa, pix, pnadmin, ripeop, root, shelladmin                                           | admin, Admin123, default, password, secur4u, cisco, Cisco, \_Cisco, cisco123, C1sco!23, Cisco123, Cisco1234, TANDBERG, change\_it, 12345, ipics, pnadmin, diamond, hsadb, c, cc, attack, blender, changeme |
| Citrix     | root, nsroot, nsmaint, vdiadmin, kvm, cli, admin                                                            | C1trix321, nsroot, nsmaint, kaviza, kaviza123, freebsd, public, rootadmin, wanscaler                                                                                                                       |
| D-Link     | admin, user                                                                                                 | private, admin, user                                                                                                                                                                                       |
| Dell       | root, user1, admin, vkernel, cli                                                                            | calvin, 123456, password, vkernel, Stor@ge!, admin                                                                                                                                                         |
| EMC        | admin, root, sysadmin                                                                                       | EMCPMAdm7n, Password#1, Password123#, sysadmin, changeme, emc                                                                                                                                              |
| HP/3Com    | admin, root, vcx, app, spvar, manage, hpsupport, opc\_op                                                    | admin, password, hpinvent, iMC123, pvadmin, passw0rd, besgroup, vcx, nice, access, config, 3V@rpar, 3V#rpar, procurve, badg3r5, OpC\_op, !manage, !admin                                                   |
| Huawei     | admin, root                                                                                                 | 123456, admin, root, Admin123, Admin@storage, Huawei12#$, HwDec@01, hwosta2.0, HuaWei123, fsp200@HW, huawei123                                                                                             |
| IBM        | USERID, admin, manager, mqm, db2inst1, db2fenc1, dausr1, db2admin, iadmin, system, device, ufmcli, customer | PASSW0RD, passw0rd, admin, password, Passw8rd, iadmin, apc, 123456, cust0mer                                                                                                                               |
| Juniper    | netscreen                                                                                                   | netscreen                                                                                                                                                                                                  |
| NetApp     | admin                                                                                                       | netapp123                                                                                                                                                                                                  |
| Oracle     | root, oracle, oravis, applvis, ilom-admin, ilom-operator, nm2user                                           | changeme, ilom-admin, ilom-operator, welcome1, oracle                                                                                                                                                      |
| VMware     | vi-admin, root, hqadmin, vmware, admin                                                                      | vmware, vmw@re, hqadmin, default                                                                                                                                                                           |

## SSH-MitM

EÄŸer kurban olarak yerel aÄŸda iseniz ve kullanÄ±cÄ± adÄ± ve ÅŸifre ile SSH sunucusuna baÄŸlanmaya Ã§alÄ±ÅŸÄ±yorsanÄ±z, bu kimlik bilgilerini Ã§almak iÃ§in **MitM saldÄ±rÄ±sÄ± gerÃ§ekleÅŸtirmeyi deneyebilirsiniz:**

**SaldÄ±rÄ± yolu:**

* **Trafik YÃ¶nlendirme:** SaldÄ±rgan, kurbanÄ±n trafiÄŸini kendi makinesine **saptar**, bÃ¶ylece SSH sunucusuna baÄŸlantÄ± giriÅŸimini **yakalar**.
* **Yakalama ve GÃ¼nlÃ¼kleme:** SaldÄ±rganÄ±n makinesi, meÅŸru SSH sunucusu gibi davranarak kullanÄ±cÄ±nÄ±n giriÅŸ bilgilerini **yakalar**.
* **Komut YÃ¼rÃ¼tme ve Ä°letme:** Son olarak, saldÄ±rganÄ±n sunucusu **kullanÄ±cÄ±nÄ±n kimlik bilgilerini kaydeder**, **komutlarÄ±** gerÃ§ek SSH sunucusuna **ilerletir**, **yÃ¼rÃ¼tÃ¼r** ve **sonuÃ§larÄ± geri gÃ¶nderir**, bÃ¶ylece iÅŸlem kesintisiz ve meÅŸru gÃ¶rÃ¼nÃ¼r.

[**SSH MITM**](https://github.com/jtesta/ssh-mitm) yukarÄ±da tarif edilenleri tam olarak yapar.

GerÃ§ek MitM'yi gerÃ§ekleÅŸtirmek iÃ§in ARP sahtekarlÄ±ÄŸÄ±, DNS sahtekarlÄ±ÄŸÄ± veya [**AÄŸ SahtekarlÄ±ÄŸÄ± saldÄ±rÄ±larÄ±**](../generic-methodologies-and-resources/pentesting-network/#spoofing) gibi teknikleri kullanabilirsiniz.

## SSH-Snake

EÄŸer keÅŸfedilen SSH Ã¶zel anahtarlarÄ±nÄ± kullanarak bir aÄŸÄ± geÃ§mek istiyorsanÄ±z ve her sistemdeki her Ã¶zel anahtarÄ± yeni ana bilgisayarlar iÃ§in kullanmak istiyorsanÄ±z, [**SSH-Snake**](https://github.com/MegaManSec/SSH-Snake) ihtiyacÄ±nÄ±z olan ÅŸeydir.

SSH-Snake aÅŸaÄŸÄ±daki gÃ¶revleri otomatik ve yinelemeli olarak gerÃ§ekleÅŸtirir:

1. Mevcut sistemde herhangi bir SSH Ã¶zel anahtarÄ±nÄ± bulun,
2. Mevcut sistemde Ã¶zel anahtarlarÄ±n kabul edilebileceÄŸi herhangi bir ana bilgisayar veya hedef (kullanÄ±cÄ±@ana bilgisayar) bulun,
3. KeÅŸfedilen tÃ¼m Ã¶zel anahtarlarÄ± kullanarak tÃ¼m hedeflere SSH baÄŸlantÄ±sÄ± kurmaya Ã§alÄ±ÅŸÄ±n,
4. EÄŸer bir hedefe baÅŸarÄ±yla baÄŸlanÄ±lÄ±rsa, baÄŸlÄ± olunan sistemde #1 - #4 adÄ±mlarÄ±nÄ± tekrar edin.

Tamamen kendini Ã§oÄŸaltan ve kendini yayabilen - ve tamamen dosyasÄ±zdÄ±r.

## YapÄ±landÄ±rma HatalarÄ±

### Root giriÅŸi

SSH sunucularÄ±nÄ±n varsayÄ±lan olarak root kullanÄ±cÄ± giriÅŸine izin vermesi yaygÄ±ndÄ±r, bu da Ã¶nemli bir gÃ¼venlik riski oluÅŸturur. **Root giriÅŸini devre dÄ±ÅŸÄ± bÄ±rakmak**, sunucuyu gÃ¼vence altÄ±na almanÄ±n kritik bir adÄ±mÄ±dÄ±r. Bu deÄŸiÅŸikliÄŸi yaparak yetkisiz eriÅŸim ve brute force saldÄ±rÄ±larÄ±nÄ± azaltabilirsiniz.

**OpenSSH'de Root GiriÅŸini Devre DÄ±ÅŸÄ± BÄ±rakmak Ä°Ã§in:**

1. **SSH yapÄ±landÄ±rma dosyasÄ±nÄ± dÃ¼zenleyin:** `sudoedit /etc/ssh/sshd_config`
2. **AyarÄ± deÄŸiÅŸtirin:** `#PermitRootLogin yes`'i **`PermitRootLogin no`** olarak deÄŸiÅŸtirin.
3. **YapÄ±landÄ±rmayÄ± yeniden yÃ¼kleyin:** `sudo systemctl daemon-reload`
4. **DeÄŸiÅŸiklikleri uygulamak iÃ§in SSH sunucusunu yeniden baÅŸlatÄ±n:** `sudo systemctl restart sshd`

### SFTP Brute Force

* [**SFTP Brute Force**](../generic-methodologies-and-resources/brute-force.md#sftp)

### SFTP komut yÃ¼rÃ¼tme

SFTP kurulumlarÄ±nda, yÃ¶neticilerin kullanÄ±cÄ±larÄ±n dosya alÄ±ÅŸveriÅŸi yapmasÄ±nÄ± saÄŸlamak iÃ§in uzaktan shell eriÅŸimini etkinleÅŸtirmemesiyle ilgili yaygÄ±n bir gÃ¶zden kaÃ§Ä±rma vardÄ±r. KullanÄ±cÄ±larÄ± etkileÅŸimli olmayan shell'lerle (Ã¶rneÄŸin, `/usr/bin/nologin`) ayarlayÄ±p belirli bir dizine sÄ±nÄ±rlamalarÄ±na raÄŸmen, bir gÃ¼venlik aÃ§Ä±ÄŸÄ± kalÄ±r. **KullanÄ±cÄ±lar, giriÅŸ yaptÄ±ktan hemen sonra bir komutun (Ã¶rneÄŸin `/bin/bash`) yÃ¼rÃ¼tÃ¼lmesini talep ederek bu kÄ±sÄ±tlamalarÄ± aÅŸabilirler**, bu da yetkisiz komut yÃ¼rÃ¼tmeye olanak tanÄ±r ve amaÃ§lanan gÃ¼venlik Ã¶nlemlerini zayÄ±flatÄ±r.

[Buradan Ã¶rnek](https://community.turgensec.com/ssh-hacking-guide/):
```bash
ssh -v noraj@192.168.1.94 id
...
Password:
debug1: Authentication succeeded (keyboard-interactive).
Authenticated to 192.168.1.94 ([192.168.1.94]:22).
debug1: channel 0: new [client-session]
debug1: Requesting no-more-sessions@openssh.com
debug1: Entering interactive session.
debug1: pledge: network
debug1: client_input_global_request: rtype hostkeys-00@openssh.com want_reply 0
debug1: Sending command: id
debug1: client_input_channel_req: channel 0 rtype exit-status reply 0
debug1: client_input_channel_req: channel 0 rtype eow@openssh.com reply 0
uid=1000(noraj) gid=100(users) groups=100(users)
debug1: channel 0: free: client-session, nchannels 1
Transferred: sent 2412, received 2480 bytes, in 0.1 seconds
Bytes per second: sent 43133.4, received 44349.5
debug1: Exit status 0

$ ssh noraj@192.168.1.94 /bin/bash
```
AÅŸaÄŸÄ±da kullanÄ±cÄ± `noraj` iÃ§in gÃ¼venli SFTP yapÄ±landÄ±rmasÄ±nÄ±n bir Ã¶rneÄŸi verilmiÅŸtir (`/etc/ssh/sshd_config` â€“ openSSH):
```
Match User noraj
ChrootDirectory %h
ForceCommand internal-sftp
AllowTcpForwarding no
PermitTunnel no
X11Forwarding no
PermitTTY no
```
Bu yapÄ±landÄ±rma yalnÄ±zca SFTP'ye izin verecektir: baÅŸlangÄ±Ã§ komutunu zorlayarak shell eriÅŸimini devre dÄ±ÅŸÄ± bÄ±rakmak ve TTY eriÅŸimini devre dÄ±ÅŸÄ± bÄ±rakmakla birlikte, her tÃ¼rlÃ¼ port yÃ¶nlendirmeyi veya tÃ¼nellemeyi de devre dÄ±ÅŸÄ± bÄ±rakmaktadÄ±r.

### SFTP TÃ¼nelleme

EÄŸer bir SFTP sunucusuna eriÅŸiminiz varsa, trafiÄŸinizi bunun Ã¼zerinden tÃ¼nelleme yapabilirsiniz, Ã¶rneÄŸin yaygÄ±n port yÃ¶nlendirmesini kullanarak:
```bash
sudo ssh -L <local_port>:<remote_host>:<remote_port> -N -f <username>@<ip_compromised>
```
### SFTP Symlink

The **sftp** have the command "**symlink**". Therefor, if you have **yazma haklarÄ±** in some folder, you can create **symlinks** of **diÄŸer klasÃ¶rler/dosyalar**. As you are probably **tuzaÄŸa dÃ¼ÅŸmÃ¼ÅŸ** inside a chroot this **Ã¶zellikle faydalÄ± olmayacak** for you, but, if you can **eriÅŸim saÄŸlamak** the created **symlink** from a **no-chroot** **service** (for example, if you can access the symlink from the web), you could **web Ã¼zerinden symlinkli dosyalarÄ± aÃ§abilirsiniz**.

For example, to create a **symlink** from a new file **"**_**froot**_**" to "**_**/**_**"**:
```bash
sftp> symlink / froot
```
EÄŸer "_froot_" dosyasÄ±na web Ã¼zerinden eriÅŸebiliyorsanÄ±z, sistemin kÃ¶k ("/") klasÃ¶rÃ¼nÃ¼ listeleyebilirsiniz.

### Kimlik DoÄŸrulama YÃ¶ntemleri

YÃ¼ksek gÃ¼venlikli ortamlarda, basit faktÃ¶r ÅŸifre tabanlÄ± kimlik doÄŸrulama yerine yalnÄ±zca anahtar tabanlÄ± veya iki faktÃ¶rlÃ¼ kimlik doÄŸrulamanÄ±n etkinleÅŸtirilmesi yaygÄ±n bir uygulamadÄ±r. Ancak genellikle daha gÃ¼Ã§lÃ¼ kimlik doÄŸrulama yÃ¶ntemleri, daha zayÄ±f olanlarÄ±n devre dÄ±ÅŸÄ± bÄ±rakÄ±lmadan etkinleÅŸtirilir. SÄ±k karÅŸÄ±laÅŸÄ±lan bir durum, openSSH yapÄ±landÄ±rmasÄ±nda `publickey`'nin etkinleÅŸtirilmesi ve varsayÄ±lan yÃ¶ntem olarak ayarlanmasÄ±, ancak `password`'un devre dÄ±ÅŸÄ± bÄ±rakÄ±lmamasÄ±dÄ±r. Bu nedenle, SSH istemcisinin ayrÄ±ntÄ±lÄ± modunu kullanarak bir saldÄ±rgan, daha zayÄ±f bir yÃ¶ntemin etkin olduÄŸunu gÃ¶rebilir:
```bash
ssh -v 192.168.1.94
OpenSSH_8.1p1, OpenSSL 1.1.1d  10 Sep 2019
...
debug1: Authentications that can continue: publickey,password,keyboard-interactive
```
Ã–rneÄŸin, bir kimlik doÄŸrulama hatasÄ± limiti ayarlandÄ±ysa ve ÅŸifre yÃ¶ntemine ulaÅŸma ÅŸansÄ±nÄ±z yoksa, bu yÃ¶ntemi kullanmaya zorlamak iÃ§in `PreferredAuthentications` seÃ§eneÄŸini kullanabilirsiniz.
```bash
ssh -v 192.168.1.94 -o PreferredAuthentications=password
...
debug1: Next authentication method: password
```
SSH sunucu yapÄ±landÄ±rmasÄ±nÄ± gÃ¶zden geÃ§irmek, yalnÄ±zca beklenen yÃ¶ntemlerin yetkilendirildiÄŸinden emin olmak iÃ§in gereklidir. Ä°stemcide ayrÄ±ntÄ±lÄ± mod kullanmak, yapÄ±landÄ±rmanÄ±n etkinliÄŸini gÃ¶rmekte yardÄ±mcÄ± olabilir.

### Config dosyalarÄ±
```bash
ssh_config
sshd_config
authorized_keys
ssh_known_hosts
known_hosts
id_rsa
```
## Fuzzing

* [https://packetstormsecurity.com/files/download/71252/sshfuzz.txt](https://packetstormsecurity.com/files/download/71252/sshfuzz.txt)
* [https://www.rapid7.com/db/modules/auxiliary/fuzzers/ssh/ssh\_version\_2](https://www.rapid7.com/db/modules/auxiliary/fuzzers/ssh/ssh\_version\_2)

## References

* SSH'yi gÃ¼Ã§lendirmek iÃ§in ilginÃ§ kÄ±lavuzlar bulabilirsiniz [https://www.ssh-audit.com/hardening\_guides.html](https://www.ssh-audit.com/hardening\_guides.html)
* [https://community.turgensec.com/ssh-hacking-guide](https://community.turgensec.com/ssh-hacking-guide)

<figure><img src="../.gitbook/assets/i3.png" alt=""><figcaption></figcaption></figure>

**Bug bounty ipucu**: **Intigriti** iÃ§in **kayÄ±t olun**, **hackers tarafÄ±ndan, hackers iÃ§in oluÅŸturulmuÅŸ premium bir bug bounty platformu**! BugÃ¼n [**https://go.intigriti.com/hacktricks**](https://go.intigriti.com/hacktricks) adresine katÄ±lÄ±n ve **$100,000**'a kadar Ã¶dÃ¼ller kazanmaya baÅŸlayÄ±n!

{% embed url="https://go.intigriti.com/hacktricks" %}

## HackTricks Automatic Commands
```
Protocol_Name: SSH
Port_Number: 22
Protocol_Description: Secure Shell Hardening

Entry_1:
Name: Hydra Brute Force
Description: Need Username
Command: hydra -v -V -u -l {Username} -P {Big_Passwordlist} -t 1 {IP} ssh

Entry_2:
Name: consolesless mfs enumeration
Description: SSH enumeration without the need to run msfconsole
Note: sourced from https://github.com/carlospolop/legion
Command: msfconsole -q -x 'use auxiliary/scanner/ssh/ssh_version; set RHOSTS {IP}; set RPORT 22; run; exit' && msfconsole -q -x 'use scanner/ssh/ssh_enumusers; set RHOSTS {IP}; set RPORT 22; run; exit' && msfconsole -q -x 'use auxiliary/scanner/ssh/juniper_backdoor; set RHOSTS {IP}; set RPORT 22; run; exit'

```
{% hint style="success" %}
AWS Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks EÄŸitim AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ± (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
GCP Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks EÄŸitim GCP KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ± (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* **ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n ya da **Twitter'da** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**'i takip edin.**
* **Hacking ipuÃ§larÄ±nÄ± paylaÅŸmak iÃ§in** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna PR gÃ¶nderin.

</details>
{% endhint %}
