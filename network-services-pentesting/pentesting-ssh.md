# 22 - SSH/SFTP Pentesting

<details>

<summary><strong>AWS hackleme konusunu sÄ±fÄ±rdan ileri seviyeye Ã¶ÄŸrenin</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong> ile!</strong></summary>

HackTricks'Ä± desteklemenin diÄŸer yollarÄ±:

* **Åirketinizi HackTricks'te reklamÄ±nÄ± gÃ¶rmek istiyorsanÄ±z** veya **HackTricks'i PDF olarak indirmek istiyorsanÄ±z** [**ABONELÄ°K PLANLARI**]'na(https://github.com/sponsors/carlospolop) gÃ¶z atÄ±n!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)'yi keÅŸfedin, Ã¶zel [**NFT'lerimiz**](https://opensea.io/collection/the-peass-family) koleksiyonumuz
* **KatÄ±lÄ±n** ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) veya bizi **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks\_live)'da **takip edin**.
* **Hacking pÃ¼f noktalarÄ±nÄ±zÄ± paylaÅŸarak PR'lar gÃ¶ndererek** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarÄ±na katkÄ±da bulunun.

</details>

<figure><img src="../.gitbook/assets/i3.png" alt=""><figcaption></figcaption></figure>

**Ã–dÃ¼l avÄ± ipucu**: **Intigriti'ye kaydolun**, hackerlar tarafÄ±ndan oluÅŸturulan bir premium **Ã¶dÃ¼l avÄ± platformu**! BugÃ¼n [**https://go.intigriti.com/hacktricks**](https://go.intigriti.com/hacktricks) adresinde bize katÄ±lÄ±n ve **$100,000**'a kadar Ã¶dÃ¼ller kazanmaya baÅŸlayÄ±n!

{% embed url="https://go.intigriti.com/hacktricks" %}

## Temel Bilgiler

**SSH (GÃ¼venli Kabuk veya GÃ¼venli Soket KabuÄŸu)**, gÃ¼vensiz bir aÄŸ Ã¼zerinden bir bilgisayara gÃ¼venli bir baÄŸlantÄ± saÄŸlayan bir aÄŸ protokolÃ¼dÃ¼r. Uzak sistemlere eriÅŸirken verilerin gizliliÄŸini ve bÃ¼tÃ¼nlÃ¼ÄŸÃ¼nÃ¼ korumak iÃ§in Ã¶nemlidir.

**VarsayÄ±lan baÄŸlantÄ± noktasÄ±:** 22
```
22/tcp open  ssh     syn-ack
```
**SSH sunucularÄ±:**

* [openSSH](http://www.openssh.org) â€“ OpenBSD SSH, BSD, Linux daÄŸÄ±tÄ±mlarÄ±nda ve Windows'ta Windows 10'dan beri bulunmaktadÄ±r
* [Dropbear](https://matt.ucc.asn.au/dropbear/dropbear.html) â€“ DÃ¼ÅŸÃ¼k bellek ve iÅŸlemci kaynaklarÄ±na sahip ortamlar iÃ§in SSH uygulamasÄ±, OpenWrt'te bulunmaktadÄ±r
* [PuTTY](https://www.chiark.greenend.org.uk/\~sgtatham/putty/) â€“ Windows iÃ§in SSH uygulamasÄ±, istemci genellikle kullanÄ±lsa da sunucunun kullanÄ±mÄ± daha nadirdir
* [CopSSH](https://www.itefix.net/copssh) â€“ Windows iÃ§in OpenSSH uygulamasÄ±

**SSH kÃ¼tÃ¼phaneleri (sunucu tarafÄ±nÄ± uygulayan):**

* [libssh](https://www.libssh.org) â€“ SSHv2 protokolÃ¼nÃ¼ uygulayan Ã§ok platformlu C kÃ¼tÃ¼phanesi, [Python](https://github.com/ParallelSSH/ssh-python), [Perl](https://github.com/garnier-quentin/perl-libssh/) ve [R](https://github.com/ropensci/ssh) ile baÄŸlantÄ±larÄ± bulunmaktadÄ±r; KDE tarafÄ±ndan sftp iÃ§in ve GitHub tarafÄ±ndan git SSH altyapÄ±sÄ± iÃ§in kullanÄ±lmaktadÄ±r
* [wolfSSH](https://www.wolfssl.com/products/wolfssh/) â€“ ANSI C'de yazÄ±lmÄ±ÅŸ SSHv2 sunucu kÃ¼tÃ¼phanesi ve gÃ¶mÃ¼lÃ¼, RTOS ve kaynak kÄ±sÄ±tlÄ± ortamlar iÃ§in hedeflenmiÅŸtir
* [Apache MINA SSHD](https://mina.apache.org/sshd-project/index.html) â€“ Apache SSHD java kÃ¼tÃ¼phanesi Apache MINA'ya dayanmaktadÄ±r
* [paramiko](https://github.com/paramiko/paramiko) â€“ Python SSHv2 protokol kÃ¼tÃ¼phanesi

## NumaralandÄ±rma

### Banner Yakalama
```bash
nc -vn <IP> 22
```
### Otomatik ssh denetimi

ssh-audit, ssh sunucusu ve istemci yapÄ±landÄ±rmasÄ±nÄ±n denetlenmesi iÃ§in bir araÃ§tÄ±r.

[https://github.com/jtesta/ssh-audit](https://github.com/jtesta/ssh-audit), [https://github.com/arthepsy/ssh-audit/](https://github.com/arthepsy/ssh-audit/) adresinden gÃ¼ncellenmiÅŸ bir Ã§atallanmadÄ±r.

**Ã–zellikler:**

* SSH1 ve SSH2 protokolÃ¼ sunucu desteÄŸi;
* SSH istemci yapÄ±landÄ±rmasÄ±nÄ± analiz etme;
* banner'Ä± al, cihazÄ± veya yazÄ±lÄ±mÄ± tanÄ± ve iÅŸletim sistemini algÄ±la, sÄ±kÄ±ÅŸtÄ±rmayÄ± tespit et;
* anahtar deÄŸiÅŸimini, anahtar anahtarÄ±nÄ±, ÅŸifreleme ve mesaj doÄŸrulama kodu algoritmalarÄ±nÄ± topla;
* algoritma bilgilerini Ã§Ä±ktÄ±la (mevcut olan, kaldÄ±rÄ±lan/devre dÄ±ÅŸÄ± bÄ±rakÄ±lan, gÃ¼vensiz/zayÄ±f/eski vb.);
* algoritma Ã¶nerilerini Ã§Ä±ktÄ±la (tanÄ±nan yazÄ±lÄ±m sÃ¼rÃ¼mÃ¼ne gÃ¶re ekle veya kaldÄ±r);
* gÃ¼venlik bilgilerini Ã§Ä±ktÄ±la (ilgili sorunlar, atanan CVE listesi vb.);
* algoritma bilgilerine dayalÄ± SSH sÃ¼rÃ¼mÃ¼ uyumluluÄŸunu analiz et;
* OpenSSH, Dropbear SSH ve libssh'den tarihsel bilgiler;
* Linux ve Windows Ã¼zerinde Ã§alÄ±ÅŸÄ±r;
* baÄŸÄ±mlÄ±lÄ±klarÄ± yoktur
```bash
usage: ssh-audit.py [-1246pbcnjvlt] <host>

-1,  --ssh1             force ssh version 1 only
-2,  --ssh2             force ssh version 2 only
-4,  --ipv4             enable IPv4 (order of precedence)
-6,  --ipv6             enable IPv6 (order of precedence)
-p,  --port=<port>      port to connect
-b,  --batch            batch output
-c,  --client-audit     starts a server on port 2222 to audit client
software config (use -p to change port;
use -t to change timeout)
-n,  --no-colors        disable colors
-j,  --json             JSON output
-v,  --verbose          verbose output
-l,  --level=<level>    minimum output level (info|warn|fail)
-t,  --timeout=<secs>   timeout (in seconds) for connection and reading
(default: 5)
$ python3 ssh-audit <IP>
```
### Sunucunun Genel SSH AnahtarÄ±

[Asciinema'da nasÄ±l yapÄ±ldÄ±ÄŸÄ±nÄ± izleyin](https://asciinema.org/a/96ejZKxpbuupTK9j7h8BdClzp)
```bash
ssh-keyscan -t rsa <IP> -p <PORT>
```
### ZayÄ±f Åifre AlgoritmalarÄ±

Bu varsayÄ±lan olarak **nmap** tarafÄ±ndan keÅŸfedilir. Ancak ayrÄ±ca **sslcan** veya **sslyze** kullanabilirsiniz.

### Nmap betikleri
```bash
nmap -p22 <ip> -sC # Send default nmap scripts for SSH
nmap -p22 <ip> -sV # Retrieve version
nmap -p22 <ip> --script ssh2-enum-algos # Retrieve supported algorythms
nmap -p22 <ip> --script ssh-hostkey --script-args ssh_hostkey=full # Retrieve weak keys
nmap -p22 <ip> --script ssh-auth-methods --script-args="ssh.user=root" # Check authentication methods
```
### Shodan

* `ssh`

## Kaba kuvvetle kullanÄ±cÄ± adlarÄ±, ÅŸifreler ve Ã¶zel anahtarlar

### KullanÄ±cÄ± AdÄ± SÄ±ralamasÄ±

BazÄ± OpenSSH sÃ¼rÃ¼mlerinde zamanlama saldÄ±rÄ±sÄ± yaparak kullanÄ±cÄ±larÄ± sÄ±ralayabilirsiniz. Bunu sÃ¶mÃ¼rmek iÃ§in bir metasploit modÃ¼lÃ¼ kullanabilirsiniz:
```
msf> use scanner/ssh/ssh_enumusers
```
### [Kaba kuvvet](../generic-methodologies-and-resources/brute-force.md#ssh)

BazÄ± yaygÄ±n ssh kimlik bilgileri [burada](https://github.com/danielmiessler/SecLists/blob/master/Passwords/Default-Credentials/ssh-betterdefaultpasslist.txt) ve [burada](https://github.com/danielmiessler/SecLists/blob/master/Passwords/Common-Credentials/top-20-common-SSH-passwords.txt) ve aÅŸaÄŸÄ±da.

### Ã–zel Anahtar Kaba Kuvvet

EÄŸer kullanÄ±labilecek bazÄ± ssh Ã¶zel anahtarlarÄ±nÄ± biliyorsanÄ±z... deneyelim. Nmap betiÄŸini kullanabilirsiniz:
```
https://nmap.org/nsedoc/scripts/ssh-publickey-acceptance.html
```
Veya MSF yardÄ±mcÄ± modÃ¼lÃ¼:
```
msf> use scanner/ssh/ssh_identify_pubkeys
```
#### Bilinen kÃ¶tÃ¼ anahtarlar burada bulunabilir:

{% embed url="https://github.com/rapid7/ssh-badkeys/tree/master/authorized" %}

#### ZayÄ±f SSH anahtarlarÄ± / Debian tahmin edilebilir PRNG

BazÄ± sistemler, kriptografik materyal oluÅŸturmak iÃ§in kullanÄ±lan rastgele tohumda bilinen hatalara sahiptir. Bu, kaba kuvvet saldÄ±rÄ±sÄ±na maruz kalan dramatik bir anahtar alanÄ± oluÅŸturabilir. ZayÄ±f PRNG etkilenen Debian sistemlerinde oluÅŸturulan Ã¶nceden oluÅŸturulmuÅŸ anahtar setleri burada mevcuttur: [g0tmi1k/debian-ssh](https://github.com/g0tmi1k/debian-ssh).

Kurban makine iÃ§in geÃ§erli anahtarlarÄ± aramak iÃ§in buraya bakmalÄ±sÄ±nÄ±z.

### Kerberos

**crackmapexec** `ssh` protokolÃ¼nÃ¼ kullanarak `--kerberos` seÃ§eneÄŸini kullanarak **kerberos Ã¼zerinden kimlik doÄŸrulamasÄ± yapabilir**.\
Daha fazla bilgi iÃ§in `crackmapexec ssh --help` komutunu Ã§alÄ±ÅŸtÄ±rÄ±n.

## VarsayÄ±lan Kimlik Bilgileri

| **SatÄ±cÄ±** | **KullanÄ±cÄ± AdlarÄ±**                                                                                         | **Åifreler**                                                                                                                                                                                               |
| ---------- | ----------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| APC        | apc, device                                                                                                 | apc                                                                                                                                                                                                        |
| Brocade    | admin                                                                                                       | admin123, password, brocade, fibranne                                                                                                                                                                      |
| Cisco      | admin, cisco, enable, hsa, pix, pnadmin, ripeop, root, shelladmin                                           | admin, Admin123, default, password, secur4u, cisco, Cisco, \_Cisco, cisco123, C1sco!23, Cisco123, Cisco1234, TANDBERG, change\_it, 12345, ipics, pnadmin, diamond, hsadb, c, cc, attack, blender, changeme |
| Citrix     | root, nsroot, nsmaint, vdiadmin, kvm, cli, admin                                                            | C1trix321, nsroot, nsmaint, kaviza, kaviza123, freebsd, public, rootadmin, wanscaler                                                                                                                       |
| D-Link     | admin, user                                                                                                 | private, admin, user                                                                                                                                                                                       |
| Dell       | root, user1, admin, vkernel, cli                                                                            | calvin, 123456, password, vkernel, Stor@ge!, admin                                                                                                                                                         |
| EMC        | admin, root, sysadmin                                                                                       | EMCPMAdm7n, Password#1, Password123#, sysadmin, changeme, emc                                                                                                                                              |
| HP/3Com    | admin, root, vcx, app, spvar, manage, hpsupport, opc\_op                                                    | admin, password, hpinvent, iMC123, pvadmin, passw0rd, besgroup, vcx, nice, access, config, 3V@rpar, 3V#rpar, procurve, badg3r5, OpC\_op, !manage, !admin                                                   |
| Huawei     | admin, root                                                                                                 | 123456, admin, root, Admin123, Admin@storage, Huawei12#$, HwDec@01, hwosta2.0, HuaWei123, fsp200@HW, huawei123                                                                                             |
| IBM        | USERID, admin, manager, mqm, db2inst1, db2fenc1, dausr1, db2admin, iadmin, system, device, ufmcli, customer | PASSW0RD, passw0rd, admin, password, Passw8rd, iadmin, apc, 123456, cust0mer                                                                                                                               |
| Juniper    | netscreen                                                                                                   | netscreen                                                                                                                                                                                                  |
| NetApp     | admin                                                                                                       | netapp123                                                                                                                                                                                                  |
| Oracle     | root, oracle, oravis, applvis, ilom-admin, ilom-operator, nm2user                                           | changeme, ilom-admin, ilom-operator, welcome1, oracle                                                                                                                                                      |
| VMware     | vi-admin, root, hqadmin, vmware, admin                                                                      | vmware, vmw@re, hqadmin, default                                                                                                                                                                           |

## SSH-MitM

EÄŸer kurban olan kullanÄ±cÄ± ile SSH sunucusuna kullanÄ±cÄ± adÄ± ve ÅŸifre ile baÄŸlanacak olan kurban aynÄ± yerel aÄŸda ise, bu kimlik bilgilerini Ã§almak iÃ§in **MitM saldÄ±rÄ±sÄ± gerÃ§ekleÅŸtirmeyi deneyebilirsiniz:**

**SaldÄ±rÄ± yolu:**

* **Trafik YÃ¶nlendirme:** SaldÄ±rgan, kurbanÄ±n trafiÄŸini kendi makinesine yÃ¶nlendirir, bÃ¶ylece SSH sunucusuna baÄŸlantÄ± denemesini **engeller**.
* **Yakalama ve KayÄ±t:** SaldÄ±rganÄ±n makinesi, kullanÄ±cÄ±nÄ±n giriÅŸ bilgilerini yakalayan bir **proxy** olarak hareket eder ve meÅŸru SSH sunucusu gibi davranÄ±r.
* **Komut YÃ¼rÃ¼tme ve AktarÄ±mÄ±:** Son olarak, saldÄ±rganÄ±n sunucusu kullanÄ±cÄ±nÄ±n kimlik bilgilerini **kaydeder**, komutlarÄ± gerÃ§ek SSH sunucusuna **iletir**, bunlarÄ± **yÃ¼rÃ¼tÃ¼r** ve sonuÃ§larÄ± kullanÄ±cÄ±ya geri gÃ¶nderir, bu sÃ¼reci sorunsuz ve meÅŸru gÃ¶sterir.

[**SSH MITM**](https://github.com/jtesta/ssh-mitm) yukarÄ±da aÃ§Ä±klananÄ± tam olarak yapar.

GerÃ§ek MitM'yi gerÃ§ekleÅŸtirmek iÃ§in ARP zehirlemesi, DNS zehirlemesi veya [**AÄŸ Zehirleme saldÄ±rÄ±larÄ±**](../generic-methodologies-and-resources/pentesting-network/#spoofing) bÃ¶lÃ¼mÃ¼nde aÃ§Ä±klanan diÄŸer teknikleri kullanabilirsiniz.

## SSH-Snake

Sistemlerde keÅŸfedilen SSH Ã¶zel anahtarlarÄ±nÄ± kullanarak aÄŸda gezinmek istiyorsanÄ±z, her Ã¶zel anahtarÄ± yeni ana bilgisayarlar iÃ§in her sistemde kullanarak [**SSH-Snake**](https://github.com/MegaManSec/SSH-Snake) ihtiyacÄ±nÄ±z olan ÅŸeydir.

SSH-Snake aÅŸaÄŸÄ±daki gÃ¶revleri otomatik olarak ve tekrarlayarak gerÃ§ekleÅŸtirir:

1. Mevcut sistemdeki tÃ¼m SSH Ã¶zel anahtarlarÄ±nÄ± bulur,
2. Mevcut sistemde, Ã¶zel anahtarlarÄ±n kabul edilebileceÄŸi tÃ¼m ana bilgisayarlarÄ± veya hedefleri (kullanÄ±cÄ±@ana bilgisayar) bulur,
3. KeÅŸfedilen tÃ¼m Ã¶zel anahtarlarÄ± kullanarak tÃ¼m hedeflere SSH denemesi yapar,
4. Bir hedefe baÅŸarÄ±lÄ± bir ÅŸekilde baÄŸlanÄ±ldÄ±ÄŸÄ±nda, baÄŸlanÄ±lan sisteme adÄ±mlarÄ± tekrarlar: #1 - #4.

Tamamen kendi kendini Ã§oÄŸaltan ve kendi kendini yayabilen - ve tamamen dosyasÄ±zdÄ±r.

## YapÄ±landÄ±rma YanlÄ±ÅŸlÄ±klarÄ±

### Root giriÅŸi

SSH sunucularÄ±nÄ±n genellikle varsayÄ±lan olarak kÃ¶k kullanÄ±cÄ± giriÅŸine izin vermesi yaygÄ±ndÄ±r, bu da ciddi bir gÃ¼venlik riski oluÅŸturur. **KÃ¶k giriÅŸini devre dÄ±ÅŸÄ± bÄ±rakmak**, sunucuyu gÃ¼vence altÄ±na almanÄ±n kritik bir adÄ±mÄ±dÄ±r. Bu deÄŸiÅŸikliÄŸi yaparak yetkisiz yÃ¶netici ayrÄ±calÄ±klarÄ±yla eriÅŸim ve kaba kuvvet saldÄ±rÄ±larÄ± engellenebilir.

**OpenSSH'de KÃ¶k GiriÅŸini Devre DÄ±ÅŸÄ± BÄ±rakmak Ä°Ã§in:**

1. **SSH yapÄ±landÄ±rma dosyasÄ±nÄ± dÃ¼zenleyin**:`sudoedit /etc/ssh/sshd_config`
2. **AyarÄ± deÄŸiÅŸtirin** `#PermitRootLogin yes` den **`PermitRootLogin no`**'ya.
3. **YapÄ±landÄ±rmayÄ± yeniden yÃ¼kleyin**:`sudo systemctl daemon-reload`
4. DeÄŸiÅŸiklikleri uygulamak iÃ§in SSH sunucusunu **yeniden baÅŸlatÄ±n**: `sudo systemctl restart sshd`

### SFTP Kaba Kuvvet

* [**SFTP Kaba Kuvvet**](../generic-methodologies-and-resources/brute-force.md#sftp)

### SFTP komut yÃ¼rÃ¼tme

SFTP kurulumlarÄ±nda yaygÄ±n bir hata, yÃ¶neticilerin kullanÄ±cÄ±larÄ±n uzak kabuk eriÅŸimini etkinleÅŸtirmeden dosya deÄŸiÅŸ tokuÅŸu yapmasÄ±nÄ± amaÃ§ladÄ±ÄŸÄ± yerlerde meydana gelir. KullanÄ±cÄ±larÄ± etkileÅŸimsiz kabuklarla (Ã¶rneÄŸin, `/usr/bin/nologin`) ayarlamalarÄ±na raÄŸmen ve onlarÄ± belirli bir dizine sÄ±nÄ±rlamalarÄ±na raÄŸmen, bir gÃ¼venlik aÃ§Ä±ÄŸÄ± kalÄ±r. **KullanÄ±cÄ±lar**, belirlenen etkileÅŸimsiz kabuklarÄ± devralmadan hemen sonra bir komutun (Ã¶rneÄŸin, `/bin/bash`) yÃ¼rÃ¼tÃ¼lmesini isteyerek bu kÄ±sÄ±tlamalarÄ± atlayabilir. Bu, yetkisiz komut yÃ¼rÃ¼tme iÃ§in izin verir ve amaÃ§lanan gÃ¼venlik Ã¶nlemlerini zayÄ±flatÄ±r.

[Ã–rnek buradan](https://community.turgensec.com/ssh-hacking-guide/):
```bash
ssh -v noraj@192.168.1.94 id
...
Password:
debug1: Authentication succeeded (keyboard-interactive).
Authenticated to 192.168.1.94 ([192.168.1.94]:22).
debug1: channel 0: new [client-session]
debug1: Requesting no-more-sessions@openssh.com
debug1: Entering interactive session.
debug1: pledge: network
debug1: client_input_global_request: rtype hostkeys-00@openssh.com want_reply 0
debug1: Sending command: id
debug1: client_input_channel_req: channel 0 rtype exit-status reply 0
debug1: client_input_channel_req: channel 0 rtype eow@openssh.com reply 0
uid=1000(noraj) gid=100(users) groups=100(users)
debug1: channel 0: free: client-session, nchannels 1
Transferred: sent 2412, received 2480 bytes, in 0.1 seconds
Bytes per second: sent 43133.4, received 44349.5
debug1: Exit status 0

$ ssh noraj@192.168.1.94 /bin/bash
```
AÅŸaÄŸÄ±da, kullanÄ±cÄ± `noraj` iÃ§in gÃ¼venli SFTP yapÄ±landÄ±rmasÄ±nÄ±n bir Ã¶rneÄŸi bulunmaktadÄ±r (`/etc/ssh/sshd_config` - openSSH):

```plaintext
Match User noraj
    ChrootDirectory /home/noraj
    ForceCommand internal-sftp
    AllowTcpForwarding no
    X11Forwarding no
```
```
Match User noraj
ChrootDirectory %h
ForceCommand internal-sftp
AllowTcpForwarding no
PermitTunnel no
X11Forwarding no
PermitTTY no
```
Bu yapÄ±landÄ±rma yalnÄ±zca SFTP'yi izin verecek ÅŸekilde ayarlanmÄ±ÅŸtÄ±r: baÅŸlangÄ±Ã§ komutunu zorlayarak kabuk eriÅŸimini devre dÄ±ÅŸÄ± bÄ±rakma ve TTY eriÅŸimini devre dÄ±ÅŸÄ± bÄ±rakma, ayrÄ±ca tÃ¼m tÃ¼rde port yÃ¶nlendirmeyi veya tÃ¼nelleme iÅŸlemlerini devre dÄ±ÅŸÄ± bÄ±rakma.

### SFTP TÃ¼nellemesi

Bir SFTP sunucusuna eriÅŸiminiz varsa, Ã¶rneÄŸin yaygÄ±n port yÃ¶nlendirmeyi kullanarak trafiÄŸinizi bu sunucu Ã¼zerinden tÃ¼nelleyebilirsiniz:
```bash
sudo ssh -L <local_port>:<remote_host>:<remote_port> -N -f <username>@<ip_compromised>
```
### SFTP Symlink

**SFTP**'nin "**symlink**" komutu bulunmaktadÄ±r. Bu nedenle, bir klasÃ¶rde **yazma izinleriniz** varsa, **baÅŸka klasÃ¶rler/dosyalarÄ±n symlink'lerini oluÅŸturabilirsiniz**. Muhtemelen bir chroot iÃ§inde **sÄ±kÄ±ÅŸmÄ±ÅŸ** durumdasÄ±nÄ±z, bu nedenle bu sizin iÃ§in **Ã¶zellikle faydalÄ± olmayacaktÄ±r**, ancak oluÅŸturulan **symlink**'e bir **no-chroot hizmetinden** eriÅŸebiliyorsanÄ±z (Ã¶rneÄŸin, web Ã¼zerinden symlink'e eriÅŸebiliyorsanÄ±z), **symlink'ler aracÄ±lÄ±ÄŸÄ±yla dosyalarÄ± web Ã¼zerinden aÃ§abilirsiniz**.

Ã–rneÄŸin, yeni bir dosyadan "**_**froot**_**" adÄ±nda bir **symlink** oluÅŸturmak iÃ§in:
```bash
sftp> symlink / froot
```
### Kimlik doÄŸrulama yÃ¶ntemleri

YÃ¼ksek gÃ¼venlik ortamlarÄ±nda, genellikle basit faktÃ¶r ÅŸifre tabanlÄ± kimlik doÄŸrulamasÄ± yerine yalnÄ±zca anahtar tabanlÄ± veya iki faktÃ¶rlÃ¼ kimlik doÄŸrulamasÄ±nÄ± etkinleÅŸtirmek yaygÄ±n bir uygulamadÄ±r. Ancak genellikle daha gÃ¼Ã§lÃ¼ kimlik doÄŸrulama yÃ¶ntemleri etkinleÅŸtirilirken daha zayÄ±f olanlarÄ±n devre dÄ±ÅŸÄ± bÄ±rakÄ±lmadÄ±ÄŸÄ± gÃ¶rÃ¼lÃ¼r. SÄ±k rastlanan bir durum, openSSH yapÄ±landÄ±rmasÄ±nda `publickey`'i etkinleÅŸtirmek ve varsayÄ±lan yÃ¶ntem olarak ayarlamak ancak `password`'Ã¼ devre dÄ±ÅŸÄ± bÄ±rakmamaktÄ±r. Bu nedenle, bir saldÄ±rgan, SSH istemcisinin ayrÄ±ntÄ±lÄ± modunu kullanarak daha zayÄ±f bir yÃ¶ntemin etkinleÅŸtirildiÄŸini gÃ¶rebilir:
```bash
ssh -v 192.168.1.94
OpenSSH_8.1p1, OpenSSL 1.1.1d  10 Sep 2019
...
debug1: Authentications that can continue: publickey,password,keyboard-interactive
```
Ã–rneÄŸin, bir kimlik doÄŸrulama baÅŸarÄ±sÄ±zlÄ±k sÄ±nÄ±rÄ± belirlenmiÅŸse ve ÅŸifre yÃ¶ntemine ulaÅŸma ÅŸansÄ±nÄ±z hiÃ§ olmazsa, `PreferredAuthentications` seÃ§eneÄŸini kullanarak bu yÃ¶ntemi kullanmaya zorlayabilirsiniz.
```bash
ssh -v 192.168.1.94 -o PreferredAuthentications=password
...
debug1: Next authentication method: password
```
### YapÄ±landÄ±rma dosyalarÄ±

SSH sunucusu yapÄ±landÄ±rmasÄ±nÄ± incelemek, yalnÄ±zca beklenen yÃ¶ntemlerin yetkilendirildiÄŸini kontrol etmek iÃ§in gereklidir. Ä°stemci Ã¼zerinde ayrÄ±ntÄ±lÄ± modun kullanÄ±lmasÄ±, yapÄ±landÄ±rmanÄ±n etkinliÄŸini gÃ¶rmeye yardÄ±mcÄ± olabilir.
```bash
ssh_config
sshd_config
authorized_keys
ssh_known_hosts
known_hosts
id_rsa
```
## Fuzzing

* [https://packetstormsecurity.com/files/download/71252/sshfuzz.txt](https://packetstormsecurity.com/files/download/71252/sshfuzz.txt)
* [https://www.rapid7.com/db/modules/auxiliary/fuzzers/ssh/ssh\_version\_2](https://www.rapid7.com/db/modules/auxiliary/fuzzers/ssh/ssh\_version\_2)

## Referanslar

* SSH'yi nasÄ±l gÃ¼Ã§lendireceÄŸinize dair ilginÃ§ kÄ±lavuzlar [https://www.ssh-audit.com/hardening\_guides.html](https://www.ssh-audit.com/hardening\_guides.html) adresinde bulunabilir.
* [https://community.turgensec.com/ssh-hacking-guide](https://community.turgensec.com/ssh-hacking-guide)

<figure><img src="../.gitbook/assets/i3.png" alt=""><figcaption></figcaption></figure>

**Hata Ã¶dÃ¼lÃ¼ ipucu**: **Intigriti'ye kaydolun**, hackerlar tarafÄ±ndan oluÅŸturulan bir premium **hata Ã¶dÃ¼lÃ¼ platformuna**! BugÃ¼n bize [**https://go.intigriti.com/hacktricks**](https://go.intigriti.com/hacktricks) adresinden katÄ±lÄ±n ve **100.000 $'a kadar** Ã¶dÃ¼ller kazanmaya baÅŸlayÄ±n!

{% embed url="https://go.intigriti.com/hacktricks" %}

## HackTricks Otomatik KomutlarÄ±
```
Protocol_Name: SSH
Port_Number: 22
Protocol_Description: Secure Shell Hardening

Entry_1:
Name: Hydra Brute Force
Description: Need Username
Command: hydra -v -V -u -l {Username} -P {Big_Passwordlist} -t 1 {IP} ssh

Entry_2:
Name: consolesless mfs enumeration
Description: SSH enumeration without the need to run msfconsole
Note: sourced from https://github.com/carlospolop/legion
Command: msfconsole -q -x 'use auxiliary/scanner/ssh/ssh_version; set RHOSTS {IP}; set RPORT 22; run; exit' && msfconsole -q -x 'use scanner/ssh/ssh_enumusers; set RHOSTS {IP}; set RPORT 22; run; exit' && msfconsole -q -x 'use auxiliary/scanner/ssh/juniper_backdoor; set RHOSTS {IP}; set RPORT 22; run; exit'

```
<details>

<summary><strong>AWS hacklemeyi sÄ±fÄ±rdan kahramana Ã¶ÄŸrenin</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

HackTricks'Ä± desteklemenin diÄŸer yollarÄ±:

* **Åirketinizi HackTricks'te reklamÄ±nÄ± gÃ¶rmek istiyorsanÄ±z** veya **HackTricks'i PDF olarak indirmek istiyorsanÄ±z** [**ABONELÄ°K PLANLARI**](https://github.com/sponsors/carlospolop)'na gÃ¶z atÄ±n!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* [**The PEASS Family'yi**](https://opensea.io/collection/the-peass-family) keÅŸfedin, Ã¶zel [**NFT'lerimiz**](https://opensea.io/collection/the-peass-family) koleksiyonumuz
* **ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n veya bizi **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks\_live)'da **takip edin**.**
* **Hacking pÃ¼f noktalarÄ±nÄ±zÄ± paylaÅŸarak PR'ler gÃ¶ndererek** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarÄ±na katkÄ±da bulunun.

</details>
