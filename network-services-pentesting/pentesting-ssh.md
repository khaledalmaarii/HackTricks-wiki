# 22 - Pentesting SSH/SFTP

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

<figure><img src="../.gitbook/assets/i3.png" alt=""><figcaption></figcaption></figure>

**Bug bounty tip**: **sign up** for **Intigriti**, a premium **bug bounty platform created by hackers, for hackers**! Join us at [**https://go.intigriti.com/hacktricks**](https://go.intigriti.com/hacktricks) today, and start earning bounties up to **$100,000**!

{% embed url="https://go.intigriti.com/hacktricks" %}

## Basic Information

**SSH (Secure Shell Î® Secure Socket Shell)** ÎµÎ¯Î½Î±Î¹ Î­Î½Î± Ï€ÏÏ‰Ï„ÏŒÎºÎ¿Î»Î»Î¿ Î´Î¹ÎºÏ„ÏÎ¿Ï… Ï€Î¿Ï… ÎµÏ€Î¹Ï„ÏÎ­Ï€ÎµÎ¹ Î¼Î¹Î± Î±ÏƒÏ†Î±Î»Î® ÏƒÏÎ½Î´ÎµÏƒÎ· ÏƒÎµ Î­Î½Î±Î½ Ï…Ï€Î¿Î»Î¿Î³Î¹ÏƒÏ„Î® Î¼Î­ÏƒÏ‰ ÎµÎ½ÏŒÏ‚ Î¼Î· Î±ÏƒÏ†Î±Î»Î¿ÏÏ‚ Î´Î¹ÎºÏ„ÏÎ¿Ï…. Î•Î¯Î½Î±Î¹ Î±Ï€Î±ÏÎ±Î¯Ï„Î·Ï„Î¿ Î³Î¹Î± Ï„Î· Î´Î¹Î±Ï„Î®ÏÎ·ÏƒÎ· Ï„Î·Ï‚ ÎµÎ¼Ï€Î¹ÏƒÏ„ÎµÏ…Ï„Î¹ÎºÏŒÏ„Î·Ï„Î±Ï‚ ÎºÎ±Î¹ Ï„Î·Ï‚ Î±ÎºÎµÏÎ±Î¹ÏŒÏ„Î·Ï„Î±Ï‚ Ï„Ï‰Î½ Î´ÎµÎ´Î¿Î¼Î­Î½Ï‰Î½ ÎºÎ±Ï„Î¬ Ï„Î·Î½ Ï€ÏÏŒÏƒÎ²Î±ÏƒÎ· ÏƒÎµ Î±Ï€Î¿Î¼Î±ÎºÏÏ…ÏƒÎ¼Î­Î½Î± ÏƒÏ…ÏƒÏ„Î®Î¼Î±Ï„Î±.

**Default port:** 22
```
22/tcp open  ssh     syn-ack
```
**SSH servers:**

* [openSSH](http://www.openssh.org) â€“ OpenBSD SSH, Ï€Î¿Ï… Ï€ÎµÏÎ¹Î»Î±Î¼Î²Î¬Î½ÎµÏ„Î±Î¹ ÏƒÎµ Î´Î¹Î±Î½Î¿Î¼Î­Ï‚ BSD, Linux ÎºÎ±Î¹ Windows Î±Ï€ÏŒ Ï„Î± Windows 10
* [Dropbear](https://matt.ucc.asn.au/dropbear/dropbear.html) â€“ Î¥Î»Î¿Ï€Î¿Î¯Î·ÏƒÎ· SSH Î³Î¹Î± Ï€ÎµÏÎ¹Î²Î¬Î»Î»Î¿Î½Ï„Î± Î¼Îµ Ï‡Î±Î¼Î·Î»Î® Î¼Î½Î®Î¼Î· ÎºÎ±Î¹ Ï€ÏŒÏÎ¿Ï…Ï‚ ÎµÏ€ÎµÎ¾ÎµÏÎ³Î±ÏƒÏ„Î®, Ï€Î¿Ï… Ï€ÎµÏÎ¹Î»Î±Î¼Î²Î¬Î½ÎµÏ„Î±Î¹ ÏƒÏ„Î¿ OpenWrt
* [PuTTY](https://www.chiark.greenend.org.uk/\~sgtatham/putty/) â€“ Î¥Î»Î¿Ï€Î¿Î¯Î·ÏƒÎ· SSH Î³Î¹Î± Windows, Î¿ Ï€ÎµÎ»Î¬Ï„Î·Ï‚ Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹ÎµÎ¯Ï„Î±Î¹ ÏƒÏ…Î½Î®Î¸Ï‰Ï‚ Î±Î»Î»Î¬ Î· Ï‡ÏÎ®ÏƒÎ· Ï„Î¿Ï… Î´Î¹Î±ÎºÎ¿Î¼Î¹ÏƒÏ„Î® ÎµÎ¯Î½Î±Î¹ ÏƒÏ€Î±Î½Î¹ÏŒÏ„ÎµÏÎ·
* [CopSSH](https://www.itefix.net/copssh) â€“ Î¥Î»Î¿Ï€Î¿Î¯Î·ÏƒÎ· Ï„Î¿Ï… OpenSSH Î³Î¹Î± Windows

**SSH libraries (implementing server-side):**

* [libssh](https://www.libssh.org) â€“ Î Î¿Î»Ï…Ï€Î»Î±Ï„Ï†Î¿ÏÎ¼Î¹ÎºÎ® Î²Î¹Î²Î»Î¹Î¿Î¸Î®ÎºÎ· C Ï€Î¿Ï… Ï…Î»Î¿Ï€Î¿Î¹ÎµÎ¯ Ï„Î¿ Ï€ÏÏ‰Ï„ÏŒÎºÎ¿Î»Î»Î¿ SSHv2 Î¼Îµ bindings ÏƒÎµ [Python](https://github.com/ParallelSSH/ssh-python), [Perl](https://github.com/garnier-quentin/perl-libssh/) ÎºÎ±Î¹ [R](https://github.com/ropensci/ssh); Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹ÎµÎ¯Ï„Î±Î¹ Î±Ï€ÏŒ Ï„Î¿ KDE Î³Î¹Î± sftp ÎºÎ±Î¹ Î±Ï€ÏŒ Ï„Î¿ GitHub Î³Î¹Î± Ï„Î·Î½ Ï…Ï€Î¿Î´Î¿Î¼Î® git SSH
* [wolfSSH](https://www.wolfssl.com/products/wolfssh/) â€“ Î’Î¹Î²Î»Î¹Î¿Î¸Î®ÎºÎ· Î´Î¹Î±ÎºÎ¿Î¼Î¹ÏƒÏ„Î® SSHv2 Î³ÏÎ±Î¼Î¼Î­Î½Î· ÏƒÎµ ANSI C ÎºÎ±Î¹ ÏƒÏ„Î¿Ï‡ÎµÏ…Î¼Î­Î½Î· Î³Î¹Î± ÎµÎ½ÏƒÏ‰Î¼Î±Ï„Ï‰Î¼Î­Î½Î±, RTOS ÎºÎ±Î¹ Ï€ÎµÏÎ¹Î¿ÏÎ¹ÏƒÎ¼Î­Î½Î± Ï€ÎµÏÎ¹Î²Î¬Î»Î»Î¿Î½Ï„Î± Ï€ÏŒÏÏ‰Î½
* [Apache MINA SSHD](https://mina.apache.org/sshd-project/index.html) â€“ Î— Î²Î¹Î²Î»Î¹Î¿Î¸Î®ÎºÎ· Apache SSHD java Î²Î±ÏƒÎ¯Î¶ÎµÏ„Î±Î¹ ÏƒÏ„Î¿ Apache MINA
* [paramiko](https://github.com/paramiko/paramiko) â€“ Î’Î¹Î²Î»Î¹Î¿Î¸Î®ÎºÎ· Ï€ÏÏ‰Ï„Î¿ÎºÏŒÎ»Î»Î¿Ï… Python SSHv2

## Enumeration

### Banner Grabbing
```bash
nc -vn <IP> 22
```
### Automated ssh-audit

ssh-audit ÎµÎ¯Î½Î±Î¹ Î­Î½Î± ÎµÏÎ³Î±Î»ÎµÎ¯Î¿ Î³Î¹Î± Ï„Î·Î½ ÎµÏ€Î¹Î¸ÎµÏÏÎ·ÏƒÎ· Ï„Î·Ï‚ Î´Î¹Î±Î¼ÏŒÏÏ†Ï‰ÏƒÎ·Ï‚ Ï„Î¿Ï… ssh server & client.

[https://github.com/jtesta/ssh-audit](https://github.com/jtesta/ssh-audit) ÎµÎ¯Î½Î±Î¹ Î­Î½Î± ÎµÎ½Î·Î¼ÎµÏÏ‰Î¼Î­Î½Î¿ fork Î±Ï€ÏŒ [https://github.com/arthepsy/ssh-audit/](https://github.com/arthepsy/ssh-audit/)

**Î§Î±ÏÎ±ÎºÏ„Î·ÏÎ¹ÏƒÏ„Î¹ÎºÎ¬:**

* Î¥Ï€Î¿ÏƒÏ„Î®ÏÎ¹Î¾Î· Ï€ÏÏ‰Ï„Î¿ÎºÏŒÎ»Î»Î¿Ï… SSH1 ÎºÎ±Î¹ SSH2;
* Î±Î½Î¬Î»Ï…ÏƒÎ· Ï„Î·Ï‚ Î´Î¹Î±Î¼ÏŒÏÏ†Ï‰ÏƒÎ·Ï‚ Ï„Î¿Ï… SSH client;
* Î»Î®ÏˆÎ· banner, Î±Î½Î±Î³Î½ÏÏÎ¹ÏƒÎ· ÏƒÏ…ÏƒÎºÎµÏ…Î®Ï‚ Î® Î»Î¿Î³Î¹ÏƒÎ¼Î¹ÎºÎ¿Ï ÎºÎ±Î¹ Î»ÎµÎ¹Ï„Î¿Ï…ÏÎ³Î¹ÎºÎ¿Ï ÏƒÏ…ÏƒÏ„Î®Î¼Î±Ï„Î¿Ï‚, Î±Î½Î¯Ï‡Î½ÎµÏ…ÏƒÎ· ÏƒÏ…Î¼Ï€Î¯ÎµÏƒÎ·Ï‚;
* ÏƒÏ…Î»Î»Î¿Î³Î® Î±Î»Î³Î¿ÏÎ¯Î¸Î¼Ï‰Î½ Î±Î½Ï„Î±Î»Î»Î±Î³Î®Ï‚ ÎºÎ»ÎµÎ¹Î´Î¹ÏÎ½, host-key, ÎºÏÏ…Ï€Ï„Î¿Î³ÏÎ¬Ï†Î·ÏƒÎ·Ï‚ ÎºÎ±Î¹ ÎºÏ‰Î´Î¹ÎºÏÎ½ Î±Ï…Î¸ÎµÎ½Ï„Î¹ÎºÎ¿Ï€Î¿Î¯Î·ÏƒÎ·Ï‚ Î¼Î·Î½Ï…Î¼Î¬Ï„Ï‰Î½;
* Î­Î¾Î¿Î´Î¿Ï‚ Ï€Î»Î·ÏÎ¿Ï†Î¿ÏÎ¹ÏÎ½ Î±Î»Î³Î¿ÏÎ¯Î¸Î¼Î¿Ï… (Î´Î¹Î±Î¸Î­ÏƒÎ¹Î¼Î¿ Î±Ï€ÏŒ, Î±Ï†Î±Î¹ÏÎ­Î¸Î·ÎºÎµ/Î±Ï€ÎµÎ½ÎµÏÎ³Î¿Ï€Î¿Î¹Î®Î¸Î·ÎºÎµ, Î¼Î· Î±ÏƒÏ†Î±Î»Î­Ï‚/Î±Î´ÏÎ½Î±Î¼Î¿/Ï€Î±Î»Î±Î¹ÏŒ, Îº.Î»Ï€.);
* Î­Î¾Î¿Î´Î¿Ï‚ ÏƒÏ…ÏƒÏ„Î¬ÏƒÎµÏ‰Î½ Î±Î»Î³Î¿ÏÎ¯Î¸Î¼Î¿Ï… (Ï€ÏÎ¿ÏƒÎ¸Î®ÎºÎ· Î® Î±Ï†Î±Î¯ÏÎµÏƒÎ· Î¼Îµ Î²Î¬ÏƒÎ· Ï„Î·Î½ Î±Î½Î±Î³Î½Ï‰ÏÎ¹ÏƒÎ¼Î­Î½Î· Î­ÎºÎ´Î¿ÏƒÎ· Î»Î¿Î³Î¹ÏƒÎ¼Î¹ÎºÎ¿Ï);
* Î­Î¾Î¿Î´Î¿Ï‚ Ï€Î»Î·ÏÎ¿Ï†Î¿ÏÎ¹ÏÎ½ Î±ÏƒÏ†Î±Î»ÎµÎ¯Î±Ï‚ (ÏƒÏ‡ÎµÏ„Î¹ÎºÎ¬ Î¶Î·Ï„Î®Î¼Î±Ï„Î±, Î±Î½Î±Ï„ÎµÎ¸ÎµÎ¯ÏƒÎ± Î»Î¯ÏƒÏ„Î± CVE, Îº.Î»Ï€.);
* Î±Î½Î¬Î»Ï…ÏƒÎ· ÏƒÏ…Î¼Î²Î±Ï„ÏŒÏ„Î·Ï„Î±Ï‚ Î­ÎºÎ´Î¿ÏƒÎ·Ï‚ SSH Î¼Îµ Î²Î¬ÏƒÎ· Ï„Î¹Ï‚ Ï€Î»Î·ÏÎ¿Ï†Î¿ÏÎ¯ÎµÏ‚ Î±Î»Î³Î¿ÏÎ¯Î¸Î¼Î¿Ï…;
* Î¹ÏƒÏ„Î¿ÏÎ¹ÎºÎ­Ï‚ Ï€Î»Î·ÏÎ¿Ï†Î¿ÏÎ¯ÎµÏ‚ Î±Ï€ÏŒ OpenSSH, Dropbear SSH ÎºÎ±Î¹ libssh;
* Î»ÎµÎ¹Ï„Î¿Ï…ÏÎ³ÎµÎ¯ ÏƒÎµ Linux ÎºÎ±Î¹ Windows;
* Ï‡Ï‰ÏÎ¯Ï‚ ÎµÎ¾Î±ÏÏ„Î®ÏƒÎµÎ¹Ï‚
```bash
usage: ssh-audit.py [-1246pbcnjvlt] <host>

-1,  --ssh1             force ssh version 1 only
-2,  --ssh2             force ssh version 2 only
-4,  --ipv4             enable IPv4 (order of precedence)
-6,  --ipv6             enable IPv6 (order of precedence)
-p,  --port=<port>      port to connect
-b,  --batch            batch output
-c,  --client-audit     starts a server on port 2222 to audit client
software config (use -p to change port;
use -t to change timeout)
-n,  --no-colors        disable colors
-j,  --json             JSON output
-v,  --verbose          verbose output
-l,  --level=<level>    minimum output level (info|warn|fail)
-t,  --timeout=<secs>   timeout (in seconds) for connection and reading
(default: 5)
$ python3 ssh-audit <IP>
```
[Î”ÎµÎ¯Ï„Îµ Ï„Î¿ ÏƒÎµ Î´ÏÎ¬ÏƒÎ· (Asciinema)](https://asciinema.org/a/96ejZKxpbuupTK9j7h8BdClzp)

### Î”Î·Î¼ÏŒÏƒÎ¹Î¿ SSH ÎºÎ»ÎµÎ¹Î´Î¯ Ï„Î¿Ï… Î´Î¹Î±ÎºÎ¿Î¼Î¹ÏƒÏ„Î®
```bash
ssh-keyscan -t rsa <IP> -p <PORT>
```
### Î‘Î´ÏÎ½Î±Ï„Î¿Î¹ ÎšÏÏ…Ï€Ï„Î¿Î³ÏÎ±Ï†Î¹ÎºÎ¿Î¯ Î‘Î»Î³ÏŒÏÎ¹Î¸Î¼Î¿Î¹

Î‘Ï…Ï„ÏŒ Î±Î½Î±ÎºÎ±Î»ÏÏ€Ï„ÎµÏ„Î±Î¹ Î±Ï€ÏŒ Ï€ÏÎ¿ÎµÏ€Î¹Î»Î¿Î³Î® Î±Ï€ÏŒ Ï„Î¿ **nmap**. Î‘Î»Î»Î¬ Î¼Ï€Î¿ÏÎµÎ¯Ï„Îµ ÎµÏ€Î¯ÏƒÎ·Ï‚ Î½Î± Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹Î®ÏƒÎµÏ„Îµ Ï„Î¿ **sslcan** Î® Ï„Î¿ **sslyze**.

### Scripts Nmap
```bash
nmap -p22 <ip> -sC # Send default nmap scripts for SSH
nmap -p22 <ip> -sV # Retrieve version
nmap -p22 <ip> --script ssh2-enum-algos # Retrieve supported algorythms
nmap -p22 <ip> --script ssh-hostkey --script-args ssh_hostkey=full # Retrieve weak keys
nmap -p22 <ip> --script ssh-auth-methods --script-args="ssh.user=root" # Check authentication methods
```
### Shodan

* `ssh`

## Brute force usernames, passwords and private keys

### Username Enumeration

Î£Îµ Î¿ÏÎ¹ÏƒÎ¼Î­Î½ÎµÏ‚ ÎµÎºÎ´ÏŒÏƒÎµÎ¹Ï‚ Ï„Î¿Ï… OpenSSH Î¼Ï€Î¿ÏÎµÎ¯Ï„Îµ Î½Î± ÎºÎ¬Î½ÎµÏ„Îµ Î¼Î¹Î± ÎµÏ€Î¯Î¸ÎµÏƒÎ· Ï‡ÏÎ¿Î½Î¹ÏƒÎ¼Î¿Ï Î³Î¹Î± Î½Î± ÎºÎ±Ï„Î±Î¼ÎµÏ„ÏÎ®ÏƒÎµÏ„Îµ Ï„Î¿Ï…Ï‚ Ï‡ÏÎ®ÏƒÏ„ÎµÏ‚. ÎœÏ€Î¿ÏÎµÎ¯Ï„Îµ Î½Î± Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹Î®ÏƒÎµÏ„Îµ Î­Î½Î± module Ï„Î¿Ï… metasploit Î³Î¹Î± Î½Î± ÎµÎºÎ¼ÎµÏ„Î±Î»Î»ÎµÏ…Ï„ÎµÎ¯Ï„Îµ Î±Ï…Ï„ÏŒ:
```
msf> use scanner/ssh/ssh_enumusers
```
### [Brute force](../generic-methodologies-and-resources/brute-force.md#ssh)

ÎŸÏÎ¹ÏƒÎ¼Î­Î½Î± ÎºÎ¿Î¹Î½Î¬ ssh Î´Î¹Î±Ï€Î¹ÏƒÏ„ÎµÏ…Ï„Î®ÏÎ¹Î± [ÎµÎ´Ï](https://github.com/danielmiessler/SecLists/blob/master/Passwords/Default-Credentials/ssh-betterdefaultpasslist.txt) ÎºÎ±Î¹ [ÎµÎ´Ï](https://github.com/danielmiessler/SecLists/blob/master/Passwords/Common-Credentials/top-20-common-SSH-passwords.txt) ÎºÎ±Î¹ Ï€Î±ÏÎ±ÎºÎ¬Ï„Ï‰.

### Î™Î´Î¹Ï‰Ï„Î¹ÎºÏŒ ÎšÎ»ÎµÎ¹Î´Î¯ Brute Force

Î‘Î½ Î³Î½Ï‰ÏÎ¯Î¶ÎµÏ„Îµ Î¼ÎµÏÎ¹ÎºÎ¬ ssh Î¹Î´Î¹Ï‰Ï„Î¹ÎºÎ¬ ÎºÎ»ÎµÎ¹Î´Î¹Î¬ Ï€Î¿Ï… Î¸Î± Î¼Ï€Î¿ÏÎ¿ÏÏƒÎ±Î½ Î½Î± Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹Î·Î¸Î¿ÏÎ½... Î±Ï‚ Ï„Î¿ Î´Î¿ÎºÎ¹Î¼Î¬ÏƒÎ¿Ï…Î¼Îµ. ÎœÏ€Î¿ÏÎµÎ¯Ï„Îµ Î½Î± Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹Î®ÏƒÎµÏ„Îµ Ï„Î¿ ÏƒÎµÎ½Î¬ÏÎ¹Î¿ nmap:
```
https://nmap.org/nsedoc/scripts/ssh-publickey-acceptance.html
```
Î‰ Ï„Î¿ MSF auxiliary module:
```
msf> use scanner/ssh/ssh_identify_pubkeys
```
Or use `ssh-keybrute.py` (native python3, lightweight and has legacy algorithms enabled): [snowdroppe/ssh-keybrute](https://github.com/snowdroppe/ssh-keybrute).

#### Known badkeys can be found here:

{% embed url="https://github.com/rapid7/ssh-badkeys/tree/master/authorized" %}

#### Weak SSH keys / Debian predictable PRNG

ÎŸÏÎ¹ÏƒÎ¼Î­Î½Î± ÏƒÏ…ÏƒÏ„Î®Î¼Î±Ï„Î± Î­Ï‡Î¿Ï…Î½ Î³Î½Ï‰ÏƒÏ„Î¬ ÎµÎ»Î±Ï„Ï„ÏÎ¼Î±Ï„Î± ÏƒÏ„Î¿Î½ Ï„Ï…Ï‡Î±Î¯Î¿ ÏƒÏ€ÏŒÏÎ¿ Ï€Î¿Ï… Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹ÎµÎ¯Ï„Î±Î¹ Î³Î¹Î± Ï„Î· Î´Î·Î¼Î¹Î¿Ï…ÏÎ³Î¯Î± ÎºÏÏ…Ï€Ï„Î¿Î³ÏÎ±Ï†Î¹ÎºÎ¿Ï Ï…Î»Î¹ÎºÎ¿Ï. Î‘Ï…Ï„ÏŒ Î¼Ï€Î¿ÏÎµÎ¯ Î½Î± Î­Ï‡ÎµÎ¹ Ï‰Ï‚ Î±Ï€Î¿Ï„Î­Î»ÎµÏƒÎ¼Î± Î¼Î¹Î± Î´ÏÎ±Î¼Î±Ï„Î¹ÎºÎ¬ Î¼ÎµÎ¹Ï‰Î¼Î­Î½Î· Ï€ÎµÏÎ¹Î¿Ï‡Î® ÎºÎ»ÎµÎ¹Î´Î¹ÏÎ½ Ï€Î¿Ï… Î¼Ï€Î¿ÏÎµÎ¯ Î½Î± Ï€Î±ÏÎ±Î²Î¹Î±ÏƒÏ„ÎµÎ¯. Î ÏÎ¿Î³ÎµÎ½Î½Î·Î¼Î­Î½Î± ÏƒÏÎ½Î¿Î»Î± ÎºÎ»ÎµÎ¹Î´Î¹ÏÎ½ Ï€Î¿Ï… Î´Î·Î¼Î¹Î¿Ï…ÏÎ³Î®Î¸Î·ÎºÎ±Î½ ÏƒÎµ ÏƒÏ…ÏƒÏ„Î®Î¼Î±Ï„Î± Debian Ï€Î¿Ï… ÎµÏ€Î·ÏÎµÎ¬Î¶Î¿Î½Ï„Î±Î¹ Î±Ï€ÏŒ Î±Î´ÏÎ½Î±Ï„Î¿ PRNG ÎµÎ¯Î½Î±Î¹ Î´Î¹Î±Î¸Î­ÏƒÎ¹Î¼Î± ÎµÎ´Ï: [g0tmi1k/debian-ssh](https://github.com/g0tmi1k/debian-ssh).

You should look here in order to search for valid keys for the victim machine.

### Kerberos

**crackmapexec** using the `ssh` protocol can use the option `--kerberos` to **authenticate via kerberos**.\
For more info run `crackmapexec ssh --help`.

## Default Credentials

| **Vendor** | **Usernames**                                                                                               | **Passwords**                                                                                                                                                                                              |
| ---------- | ----------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| APC        | apc, device                                                                                                 | apc                                                                                                                                                                                                        |
| Brocade    | admin                                                                                                       | admin123, password, brocade, fibranne                                                                                                                                                                      |
| Cisco      | admin, cisco, enable, hsa, pix, pnadmin, ripeop, root, shelladmin                                           | admin, Admin123, default, password, secur4u, cisco, Cisco, \_Cisco, cisco123, C1sco!23, Cisco123, Cisco1234, TANDBERG, change\_it, 12345, ipics, pnadmin, diamond, hsadb, c, cc, attack, blender, changeme |
| Citrix     | root, nsroot, nsmaint, vdiadmin, kvm, cli, admin                                                            | C1trix321, nsroot, nsmaint, kaviza, kaviza123, freebsd, public, rootadmin, wanscaler                                                                                                                       |
| D-Link     | admin, user                                                                                                 | private, admin, user                                                                                                                                                                                       |
| Dell       | root, user1, admin, vkernel, cli                                                                            | calvin, 123456, password, vkernel, Stor@ge!, admin                                                                                                                                                         |
| EMC        | admin, root, sysadmin                                                                                       | EMCPMAdm7n, Password#1, Password123#, sysadmin, changeme, emc                                                                                                                                              |
| HP/3Com    | admin, root, vcx, app, spvar, manage, hpsupport, opc\_op                                                    | admin, password, hpinvent, iMC123, pvadmin, passw0rd, besgroup, vcx, nice, access, config, 3V@rpar, 3V#rpar, procurve, badg3r5, OpC\_op, !manage, !admin                                                   |
| Huawei     | admin, root                                                                                                 | 123456, admin, root, Admin123, Admin@storage, Huawei12#$, HwDec@01, hwosta2.0, HuaWei123, fsp200@HW, huawei123                                                                                             |
| IBM        | USERID, admin, manager, mqm, db2inst1, db2fenc1, dausr1, db2admin, iadmin, system, device, ufmcli, customer | PASSW0RD, passw0rd, admin, password, Passw8rd, iadmin, apc, 123456, cust0mer                                                                                                                               |
| Juniper    | netscreen                                                                                                   | netscreen                                                                                                                                                                                                  |
| NetApp     | admin                                                                                                       | netapp123                                                                                                                                                                                                  |
| Oracle     | root, oracle, oravis, applvis, ilom-admin, ilom-operator, nm2user                                           | changeme, ilom-admin, ilom-operator, welcome1, oracle                                                                                                                                                      |
| VMware     | vi-admin, root, hqadmin, vmware, admin                                                                      | vmware, vmw@re, hqadmin, default                                                                                                                                                                           |

## SSH-MitM

If you are in the local network as the victim which is going to connect to the SSH server using username and password you could try to **perform a MitM attack to steal those credentials:**

**Attack path:**

* **Traffic Redirection:** The attacker **diverts** the victim's traffic to their machine, effectively **intercepting** the connection attempt to the SSH server.
* **Interception and Logging:** The attacker's machine acts as a **proxy**, **capturing** the user's login details by pretending to be the legitimate SSH server.
* **Command Execution and Relay:** Finally, the attacker's server **logs the user's credentials**, **forwards the commands** to the real SSH server, **executes** them, and **sends the results back** to the user, making the process appear seamless and legitimate.

[**SSH MITM**](https://github.com/jtesta/ssh-mitm) does exactly what is described above.

In order to capture perform the actual MitM you could use techniques like ARP spoofing, DNS spoofin or others described in the [**Network Spoofing attacks**](../generic-methodologies-and-resources/pentesting-network/#spoofing).

## SSH-Snake

If you want to traverse a network using discovered SSH private keys on systems, utilizing each private key on each system for new hosts, then [**SSH-Snake**](https://github.com/MegaManSec/SSH-Snake) is what you need.

SSH-Snake performs the following tasks automatically and recursively:

1. On the current system, find any SSH private keys,
2. On the current system, find any hosts or destinations (user@host) that the private keys may be accepted,
3. Attempt to SSH into all of the destinations using all of the private keys discovered,
4. If a destination is successfully connected to, repeats steps #1 - #4 on the connected-to system.

It's completely self-replicating and self-propagating -- and completely fileless.

## Config Misconfigurations

### Root login

Î•Î¯Î½Î±Î¹ ÎºÎ¿Î¹Î½ÏŒ Î³Î¹Î± Ï„Î¿Ï…Ï‚ Î´Î¹Î±ÎºÎ¿Î¼Î¹ÏƒÏ„Î­Ï‚ SSH Î½Î± ÎµÏ€Î¹Ï„ÏÎ­Ï€Î¿Ï…Î½ Ï„Î·Î½ ÎµÎ¯ÏƒÎ¿Î´Î¿ Ï„Î¿Ï… Ï‡ÏÎ®ÏƒÏ„Î· root Î±Ï€ÏŒ Ï€ÏÎ¿ÎµÏ€Î¹Î»Î¿Î³Î®, Î³ÎµÎ³Î¿Î½ÏŒÏ‚ Ï€Î¿Ï… Î¸Î­Ï„ÎµÎ¹ ÏƒÎ·Î¼Î±Î½Ï„Î¹ÎºÏŒ ÎºÎ¯Î½Î´Ï…Î½Î¿ Î±ÏƒÏ†Î±Î»ÎµÎ¯Î±Ï‚. **Î— Î±Ï€ÎµÎ½ÎµÏÎ³Î¿Ï€Î¿Î¯Î·ÏƒÎ· Ï„Î·Ï‚ ÏƒÏÎ½Î´ÎµÏƒÎ·Ï‚ root** ÎµÎ¯Î½Î±Î¹ Î­Î½Î± ÎºÏÎ¯ÏƒÎ¹Î¼Î¿ Î²Î®Î¼Î± Î³Î¹Î± Ï„Î·Î½ Î±ÏƒÏ†Î¬Î»Î¹ÏƒÎ· Ï„Î¿Ï… Î´Î¹Î±ÎºÎ¿Î¼Î¹ÏƒÏ„Î®. Î— Î¼Î· ÎµÎ¾Î¿Ï…ÏƒÎ¹Î¿Î´Î¿Ï„Î·Î¼Î­Î½Î· Ï€ÏÏŒÏƒÎ²Î±ÏƒÎ· Î¼Îµ Î´Î¹Î±Ï‡ÎµÎ¹ÏÎ¹ÏƒÏ„Î¹ÎºÎ¬ Î´Î¹ÎºÎ±Î¹ÏÎ¼Î±Ï„Î± ÎºÎ±Î¹ Î¿Î¹ ÎµÏ€Î¹Î¸Î­ÏƒÎµÎ¹Ï‚ brute force Î¼Ï€Î¿ÏÎ¿ÏÎ½ Î½Î± Î¼ÎµÏ„ÏÎ¹Î±ÏƒÏ„Î¿ÏÎ½ ÎºÎ¬Î½Î¿Î½Ï„Î±Ï‚ Î±Ï…Ï„Î® Ï„Î·Î½ Î±Î»Î»Î±Î³Î®.

**Î“Î¹Î± Î½Î± Î±Ï€ÎµÎ½ÎµÏÎ³Î¿Ï€Î¿Î¹Î®ÏƒÎµÏ„Îµ Ï„Î·Î½ ÎµÎ¯ÏƒÎ¿Î´Î¿ root ÏƒÏ„Î¿ OpenSSH:**

1. **Î•Ï€ÎµÎ¾ÎµÏÎ³Î±ÏƒÏ„ÎµÎ¯Ï„Îµ Ï„Î¿ Î±ÏÏ‡ÎµÎ¯Î¿ ÏÏ…Î¸Î¼Î¯ÏƒÎµÏ‰Î½ SSH** Î¼Îµ: `sudoedit /etc/ssh/sshd_config`
2. **Î‘Î»Î»Î¬Î¾Ï„Îµ Ï„Î·Î½ ÏÏÎ¸Î¼Î¹ÏƒÎ·** Î±Ï€ÏŒ `#PermitRootLogin yes` ÏƒÎµ **`PermitRootLogin no`**.
3. **Î•Ï€Î±Î½Î±Ï†Î¿ÏÏ„ÏÏƒÏ„Îµ Ï„Î·Î½ ÏÏÎ¸Î¼Î¹ÏƒÎ·** Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹ÏÎ½Ï„Î±Ï‚: `sudo systemctl daemon-reload`
4. **Î•Ï€Î±Î½ÎµÎºÎºÎ¹Î½Î®ÏƒÏ„Îµ Ï„Î¿Î½ Î´Î¹Î±ÎºÎ¿Î¼Î¹ÏƒÏ„Î® SSH** Î³Î¹Î± Î½Î± ÎµÏ†Î±ÏÎ¼Î¿ÏƒÏ„Î¿ÏÎ½ Î¿Î¹ Î±Î»Î»Î±Î³Î­Ï‚: `sudo systemctl restart sshd`

### SFTP Brute Force

* [**SFTP Brute Force**](../generic-methodologies-and-resources/brute-force.md#sftp)

### SFTP command execution

Î¥Ï€Î¬ÏÏ‡ÎµÎ¹ Î¼Î¹Î± ÎºÎ¿Î¹Î½Î® Ï€Î±ÏÎ¬Î»ÎµÎ¹ÏˆÎ· Ï€Î¿Ï… ÏƒÏ…Î¼Î²Î±Î¯Î½ÎµÎ¹ Î¼Îµ Ï„Î¹Ï‚ ÏÏ…Î¸Î¼Î¯ÏƒÎµÎ¹Ï‚ SFTP, ÏŒÏ€Î¿Ï… Î¿Î¹ Î´Î¹Î±Ï‡ÎµÎ¹ÏÎ¹ÏƒÏ„Î­Ï‚ ÏƒÎºÎ¿Ï€ÎµÏÎ¿Ï…Î½ Î¿Î¹ Ï‡ÏÎ®ÏƒÏ„ÎµÏ‚ Î½Î± Î±Î½Ï„Î±Î»Î»Î¬ÏƒÏƒÎ¿Ï…Î½ Î±ÏÏ‡ÎµÎ¯Î± Ï‡Ï‰ÏÎ¯Ï‚ Î½Î± ÎµÏ€Î¹Ï„ÏÎ­Ï€Î¿Ï…Î½ Ï„Î·Î½ Î±Ï€Î¿Î¼Î±ÎºÏÏ…ÏƒÎ¼Î­Î½Î· Ï€ÏÏŒÏƒÎ²Î±ÏƒÎ· ÏƒÏ„Î¿ shell. Î Î±ÏÎ¬ Ï„Î·Î½ ÏÏÎ¸Î¼Î¹ÏƒÎ· Ï„Ï‰Î½ Ï‡ÏÎ·ÏƒÏ„ÏÎ½ Î¼Îµ Î¼Î· Î´Î¹Î±Î´ÏÎ±ÏƒÏ„Î¹ÎºÎ¬ shell (Ï€.Ï‡., `/usr/bin/nologin`) ÎºÎ±Î¹ Ï„Î·Î½ Ï€ÎµÏÎ¹Î¿ÏÎ¹ÏƒÎ¼Î­Î½Î· Ï€ÏÏŒÏƒÎ²Î±ÏƒÎ· ÏƒÎµ Î¼Î¹Î± ÏƒÏ…Î³ÎºÎµÎºÏÎ¹Î¼Î­Î½Î· Î´Î¹Î±Î´ÏÎ¿Î¼Î®, Ï€Î±ÏÎ±Î¼Î­Î½ÎµÎ¹ Î­Î½Î± ÎºÎµÎ½ÏŒ Î±ÏƒÏ†Î±Î»ÎµÎ¯Î±Ï‚. **ÎŸÎ¹ Ï‡ÏÎ®ÏƒÏ„ÎµÏ‚ Î¼Ï€Î¿ÏÎ¿ÏÎ½ Î½Î± Ï€Î±ÏÎ±ÎºÎ¬Î¼ÏˆÎ¿Ï…Î½ Î±Ï…Ï„Î¿ÏÏ‚ Ï„Î¿Ï…Ï‚ Ï€ÎµÏÎ¹Î¿ÏÎ¹ÏƒÎ¼Î¿ÏÏ‚** Î¶Î·Ï„ÏÎ½Ï„Î±Ï‚ Ï„Î·Î½ ÎµÎºÏ„Î­Î»ÎµÏƒÎ· Î¼Î¹Î±Ï‚ ÎµÎ½Ï„Î¿Î»Î®Ï‚ (ÏŒÏ€Ï‰Ï‚ `/bin/bash`) Î±Î¼Î­ÏƒÏ‰Ï‚ Î¼ÎµÏ„Î¬ Ï„Î·Î½ ÎµÎ¯ÏƒÎ¿Î´ÏŒ Ï„Î¿Ï…Ï‚, Ï€ÏÎ¹Î½ Î±Î½Î±Î»Î¬Î²ÎµÎ¹ Ï„Î¿ ÎºÎ±Î¸Î¿ÏÎ¹ÏƒÎ¼Î­Î½Î¿ Î¼Î· Î´Î¹Î±Î´ÏÎ±ÏƒÏ„Î¹ÎºÏŒ shell Ï„Î¿Ï…Ï‚. Î‘Ï…Ï„ÏŒ ÎµÏ€Î¹Ï„ÏÎ­Ï€ÎµÎ¹ Ï„Î·Î½ Î¼Î· ÎµÎ¾Î¿Ï…ÏƒÎ¹Î¿Î´Î¿Ï„Î·Î¼Î­Î½Î· ÎµÎºÏ„Î­Î»ÎµÏƒÎ· ÎµÎ½Ï„Î¿Î»ÏÎ½, Ï…Ï€Î¿Î½Î¿Î¼ÎµÏÎ¿Î½Ï„Î±Ï‚ Ï„Î± Ï€ÏÎ¿Î³ÏÎ±Î¼Î¼Î±Ï„Î¹ÏƒÎ¼Î­Î½Î± Î¼Î­Ï„ÏÎ± Î±ÏƒÏ†Î±Î»ÎµÎ¯Î±Ï‚.

[Example from here](https://community.turgensec.com/ssh-hacking-guide/):
```bash
ssh -v noraj@192.168.1.94 id
...
Password:
debug1: Authentication succeeded (keyboard-interactive).
Authenticated to 192.168.1.94 ([192.168.1.94]:22).
debug1: channel 0: new [client-session]
debug1: Requesting no-more-sessions@openssh.com
debug1: Entering interactive session.
debug1: pledge: network
debug1: client_input_global_request: rtype hostkeys-00@openssh.com want_reply 0
debug1: Sending command: id
debug1: client_input_channel_req: channel 0 rtype exit-status reply 0
debug1: client_input_channel_req: channel 0 rtype eow@openssh.com reply 0
uid=1000(noraj) gid=100(users) groups=100(users)
debug1: channel 0: free: client-session, nchannels 1
Transferred: sent 2412, received 2480 bytes, in 0.1 seconds
Bytes per second: sent 43133.4, received 44349.5
debug1: Exit status 0

$ ssh noraj@192.168.1.94 /bin/bash
```
Î•Î´Ï ÎµÎ¯Î½Î±Î¹ Î­Î½Î± Ï€Î±ÏÎ¬Î´ÎµÎ¹Î³Î¼Î± Î±ÏƒÏ†Î±Î»Î¿ÏÏ‚ Î´Î¹Î±Î¼ÏŒÏÏ†Ï‰ÏƒÎ·Ï‚ SFTP (`/etc/ssh/sshd_config` â€“ openSSH) Î³Î¹Î± Ï„Î¿Î½ Ï‡ÏÎ®ÏƒÏ„Î· `noraj`:
```
Match User noraj
ChrootDirectory %h
ForceCommand internal-sftp
AllowTcpForwarding no
PermitTunnel no
X11Forwarding no
PermitTTY no
```
Î‘Ï…Ï„Î® Î· ÏÏÎ¸Î¼Î¹ÏƒÎ· Î¸Î± ÎµÏ€Î¹Ï„ÏÎ­Ï€ÎµÎ¹ Î¼ÏŒÎ½Î¿ SFTP: Î±Ï€ÎµÎ½ÎµÏÎ³Î¿Ï€Î¿Î¹ÏÎ½Ï„Î±Ï‚ Ï„Î·Î½ Ï€ÏÏŒÏƒÎ²Î±ÏƒÎ· ÏƒÏ„Î¿ shell Î¼Îµ Ï„Î·Î½ ÎµÏ€Î¹Î²Î¿Î»Î® Ï„Î·Ï‚ ÎµÎ½Ï„Î¿Î»Î®Ï‚ ÎµÎºÎºÎ¯Î½Î·ÏƒÎ·Ï‚ ÎºÎ±Î¹ Î±Ï€ÎµÎ½ÎµÏÎ³Î¿Ï€Î¿Î¹ÏÎ½Ï„Î±Ï‚ Ï„Î·Î½ Ï€ÏÏŒÏƒÎ²Î±ÏƒÎ· TTY, Î±Î»Î»Î¬ ÎºÎ±Î¹ Î±Ï€ÎµÎ½ÎµÏÎ³Î¿Ï€Î¿Î¹ÏÎ½Ï„Î±Ï‚ ÎºÎ¬Î¸Îµ ÎµÎ¯Î´Î¿Ï…Ï‚ Ï€ÏÎ¿ÏÎ¸Î·ÏƒÎ· Î¸Ï…ÏÏÎ½ Î® ÏƒÎ®ÏÎ±Î³Î³ÎµÏ‚.

### SFTP Tunneling

Î•Î¬Î½ Î­Ï‡ÎµÏ„Îµ Ï€ÏÏŒÏƒÎ²Î±ÏƒÎ· ÏƒÎµ Î­Î½Î±Î½ SFTP server, Î¼Ï€Î¿ÏÎµÎ¯Ï„Îµ ÎµÏ€Î¯ÏƒÎ·Ï‚ Î½Î± ÏƒÎ®ÏÎ±Î³Î³ÎµÏ‚ Ï„Î·Î½ ÎºÎ¯Î½Î·ÏƒÎ® ÏƒÎ±Ï‚ Î¼Î­ÏƒÏ‰ Î±Ï…Ï„Î¿Ï, Î³Î¹Î± Ï€Î±ÏÎ¬Î´ÎµÎ¹Î³Î¼Î± Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹ÏÎ½Ï„Î±Ï‚ Ï„Î·Î½ ÎºÎ¿Î¹Î½Î® Ï€ÏÎ¿ÏÎ¸Î·ÏƒÎ· Î¸Ï…ÏÏÎ½:
```bash
sudo ssh -L <local_port>:<remote_host>:<remote_port> -N -f <username>@<ip_compromised>
```
### SFTP Symlink

Î¤Î¿ **sftp** Î­Ï‡ÎµÎ¹ Ï„Î·Î½ ÎµÎ½Ï„Î¿Î»Î® "**symlink**". Î•Ï€Î¿Î¼Î­Î½Ï‰Ï‚, Î±Î½ Î­Ï‡ÎµÏ„Îµ **Î´Î¹ÎºÎ±Î¹ÏÎ¼Î±Ï„Î± ÎµÎ³Î³ÏÎ±Ï†Î®Ï‚** ÏƒÎµ ÎºÎ¬Ï€Î¿Î¹Î¿ Ï†Î¬ÎºÎµÎ»Î¿, Î¼Ï€Î¿ÏÎµÎ¯Ï„Îµ Î½Î± Î´Î·Î¼Î¹Î¿Ï…ÏÎ³Î®ÏƒÎµÏ„Îµ **symlinks** Î±Ï€ÏŒ **Î¬Î»Î»Î¿Ï…Ï‚ Ï†Î±ÎºÎ­Î»Î¿Ï…Ï‚/Î±ÏÏ‡ÎµÎ¯Î±**. ÎšÎ±Î¸ÏÏ‚ Ï€Î¹Î¸Î±Î½ÏŒÏ„Î±Ï„Î± ÎµÎ¯ÏƒÏ„Îµ **Ï€Î±Î³Î¹Î´ÎµÏ…Î¼Î­Î½Î¿Î¹** Î¼Î­ÏƒÎ± ÏƒÎµ Î­Î½Î± chroot, Î±Ï…Ï„ÏŒ **Î´ÎµÎ½ Î¸Î± ÎµÎ¯Î½Î±Î¹ Î¹Î´Î¹Î±Î¯Ï„ÎµÏÎ± Ï‡ÏÎ®ÏƒÎ¹Î¼Î¿** Î³Î¹Î± ÎµÏƒÎ¬Ï‚, Î±Î»Î»Î¬, Î±Î½ Î¼Ï€Î¿ÏÎµÎ¯Ï„Îµ Î½Î± **Ï€ÏÏŒÏƒÎ²Î±ÏƒÎ·** ÏƒÏ„Î¿ Î´Î·Î¼Î¹Î¿Ï…ÏÎ³Î·Î¼Î­Î½Î¿ **symlink** Î±Ï€ÏŒ Î¼Î¹Î± **Ï…Ï€Î·ÏÎµÏƒÎ¯Î± Ï‡Ï‰ÏÎ¯Ï‚ chroot** (Î³Î¹Î± Ï€Î±ÏÎ¬Î´ÎµÎ¹Î³Î¼Î±, Î±Î½ Î¼Ï€Î¿ÏÎµÎ¯Ï„Îµ Î½Î± Î±Ï€Î¿ÎºÏ„Î®ÏƒÎµÏ„Îµ Ï€ÏÏŒÏƒÎ²Î±ÏƒÎ· ÏƒÏ„Î¿ symlink Î±Ï€ÏŒ Ï„Î¿ Î´Î¹Î±Î´Î¯ÎºÏ„Ï…Î¿), Î¸Î± Î¼Ï€Î¿ÏÎ¿ÏÏƒÎ±Ï„Îµ Î½Î± **Î±Î½Î¿Î¯Î¾ÎµÏ„Îµ Ï„Î± symlinked Î±ÏÏ‡ÎµÎ¯Î± Î¼Î­ÏƒÏ‰ Ï„Î¿Ï… Î´Î¹Î±Î´Î¹ÎºÏ„ÏÎ¿Ï…**.

Î“Î¹Î± Ï€Î±ÏÎ¬Î´ÎµÎ¹Î³Î¼Î±, Î³Î¹Î± Î½Î± Î´Î·Î¼Î¹Î¿Ï…ÏÎ³Î®ÏƒÎµÏ„Îµ Î­Î½Î± **symlink** Î±Ï€ÏŒ Î­Î½Î± Î½Î­Î¿ Î±ÏÏ‡ÎµÎ¯Î¿ **"**_**froot**_**" ÏƒÎµ "**_**/**_**"**:
```bash
sftp> symlink / froot
```
Î‘Î½ Î¼Ï€Î¿ÏÎµÎ¯Ï„Îµ Î½Î± Î±Ï€Î¿ÎºÏ„Î®ÏƒÎµÏ„Îµ Ï€ÏÏŒÏƒÎ²Î±ÏƒÎ· ÏƒÏ„Î¿ Î±ÏÏ‡ÎµÎ¯Î¿ "_froot_" Î¼Î­ÏƒÏ‰ Ï„Î¿Ï… Î´Î¹Î±Î´Î¹ÎºÏ„ÏÎ¿Ï…, Î¸Î± Î¼Ï€Î¿ÏÎµÎ¯Ï„Îµ Î½Î± ÎºÎ±Ï„Î±Î³ÏÎ¬ÏˆÎµÏ„Îµ Ï„Î¿Î½ Ï†Î¬ÎºÎµÎ»Î¿ root ("/") Ï„Î¿Ï… ÏƒÏ…ÏƒÏ„Î®Î¼Î±Ï„Î¿Ï‚.

### ÎœÎ­Î¸Î¿Î´Î¿Î¹ Î±Ï…Î¸ÎµÎ½Ï„Î¹ÎºÎ¿Ï€Î¿Î¯Î·ÏƒÎ·Ï‚

Î£Îµ Ï€ÎµÏÎ¹Î²Î¬Î»Î»Î¿Î½ Ï…ÏˆÎ·Î»Î®Ï‚ Î±ÏƒÏ†Î¬Î»ÎµÎ¹Î±Ï‚, ÎµÎ¯Î½Î±Î¹ ÎºÎ¿Î¹Î½Î® Ï€ÏÎ±ÎºÏ„Î¹ÎºÎ® Î½Î± ÎµÏ€Î¹Ï„ÏÎ­Ï€ÎµÏ„Î±Î¹ Î¼ÏŒÎ½Î¿ Î· Î±Ï…Î¸ÎµÎ½Ï„Î¹ÎºÎ¿Ï€Î¿Î¯Î·ÏƒÎ· Î¼Îµ Î²Î¬ÏƒÎ· ÎºÎ»ÎµÎ¹Î´Î¹Î¬ Î® Î· Î±Ï…Î¸ÎµÎ½Ï„Î¹ÎºÎ¿Ï€Î¿Î¯Î·ÏƒÎ· Î´ÏÎ¿ Ï€Î±ÏÎ±Î³ÏŒÎ½Ï„Ï‰Î½ Î±Î½Ï„Î¯ Î³Î¹Î± Ï„Î·Î½ Î±Ï€Î»Î® Î±Ï…Î¸ÎµÎ½Ï„Î¹ÎºÎ¿Ï€Î¿Î¯Î·ÏƒÎ· Î¼Îµ Î²Î¬ÏƒÎ· Ï„Î¿Î½ ÎºÏ‰Î´Î¹ÎºÏŒ Ï€ÏÏŒÏƒÎ²Î±ÏƒÎ·Ï‚. Î‘Î»Î»Î¬ ÏƒÏ…Ï‡Î½Î¬ Î¿Î¹ Î¹ÏƒÏ‡Ï…ÏÏŒÏ„ÎµÏÎµÏ‚ Î¼Î­Î¸Î¿Î´Î¿Î¹ Î±Ï…Î¸ÎµÎ½Ï„Î¹ÎºÎ¿Ï€Î¿Î¯Î·ÏƒÎ·Ï‚ ÎµÎ½ÎµÏÎ³Î¿Ï€Î¿Î¹Î¿ÏÎ½Ï„Î±Î¹ Ï‡Ï‰ÏÎ¯Ï‚ Î½Î± Î±Ï€ÎµÎ½ÎµÏÎ³Î¿Ï€Î¿Î¹Î¿ÏÎ½Ï„Î±Î¹ Î¿Î¹ Î±ÏƒÎ¸ÎµÎ½Î­ÏƒÏ„ÎµÏÎµÏ‚. ÎœÎ¹Î± ÏƒÏ…Ï‡Î½Î® Ï€ÎµÏÎ¯Ï€Ï„Ï‰ÏƒÎ· ÎµÎ¯Î½Î±Î¹ Î· ÎµÎ½ÎµÏÎ³Î¿Ï€Î¿Î¯Î·ÏƒÎ· Ï„Î¿Ï… `publickey` ÏƒÏ„Î· Î´Î¹Î±Î¼ÏŒÏÏ†Ï‰ÏƒÎ· Ï„Î¿Ï… openSSH ÎºÎ±Î¹ Î· ÏÏÎ¸Î¼Î¹ÏƒÎ® Ï„Î¿Ï… Ï‰Ï‚ Î· Ï€ÏÎ¿ÎµÏ€Î¹Î»ÎµÎ³Î¼Î­Î½Î· Î¼Î­Î¸Î¿Î´Î¿Ï‚, Î±Î»Î»Î¬ Ï‡Ï‰ÏÎ¯Ï‚ Î½Î± Î±Ï€ÎµÎ½ÎµÏÎ³Î¿Ï€Î¿Î¹Î·Î¸ÎµÎ¯ Ï„Î¿ `password`. ÎˆÏ„ÏƒÎ¹, Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹ÏÎ½Ï„Î±Ï‚ Ï„Î· Î»ÎµÎ¹Ï„Î¿Ï…ÏÎ³Î¯Î± verbose Ï„Î¿Ï… Ï€ÎµÎ»Î¬Ï„Î· SSH, Î­Î½Î±Ï‚ ÎµÏ€Î¹Ï„Î¹Î¸Î­Î¼ÎµÎ½Î¿Ï‚ Î¼Ï€Î¿ÏÎµÎ¯ Î½Î± Î´ÎµÎ¹ ÏŒÏ„Î¹ Î­Ï‡ÎµÎ¹ ÎµÎ½ÎµÏÎ³Î¿Ï€Î¿Î¹Î·Î¸ÎµÎ¯ Î¼Î¹Î± Î±ÏƒÎ¸ÎµÎ½Î­ÏƒÏ„ÎµÏÎ· Î¼Î­Î¸Î¿Î´Î¿Ï‚:
```bash
ssh -v 192.168.1.94
OpenSSH_8.1p1, OpenSSL 1.1.1d  10 Sep 2019
...
debug1: Authentications that can continue: publickey,password,keyboard-interactive
```
Î“Î¹Î± Ï€Î±ÏÎ¬Î´ÎµÎ¹Î³Î¼Î±, Î±Î½ Î­Ï‡ÎµÎ¹ Î¿ÏÎ¹ÏƒÏ„ÎµÎ¯ Î­Î½Î± ÏŒÏÎ¹Î¿ Î±Ï€Î¿Ï„Ï…Ï‡Î¯Î±Ï‚ Î±Ï…Î¸ÎµÎ½Ï„Î¹ÎºÎ¿Ï€Î¿Î¯Î·ÏƒÎ·Ï‚ ÎºÎ±Î¹ Î´ÎµÎ½ Î­Ï‡ÎµÏ„Îµ Ï€Î¿Ï„Î­ Ï„Î·Î½ ÎµÏ…ÎºÎ±Î¹ÏÎ¯Î± Î½Î± Ï†Ï„Î¬ÏƒÎµÏ„Îµ ÏƒÏ„Î· Î¼Î­Î¸Î¿Î´Î¿ ÎºÏ‰Î´Î¹ÎºÎ¿Ï Ï€ÏÏŒÏƒÎ²Î±ÏƒÎ·Ï‚, Î¼Ï€Î¿ÏÎµÎ¯Ï„Îµ Î½Î± Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹Î®ÏƒÎµÏ„Îµ Ï„Î·Î½ ÎµÏ€Î¹Î»Î¿Î³Î® `PreferredAuthentications` Î³Î¹Î± Î½Î± Î±Î½Î±Î³ÎºÎ¬ÏƒÎµÏ„Îµ Ï„Î· Ï‡ÏÎ®ÏƒÎ· Î±Ï…Ï„Î®Ï‚ Ï„Î·Ï‚ Î¼ÎµÎ¸ÏŒÎ´Î¿Ï….
```bash
ssh -v 192.168.1.94 -o PreferredAuthentications=password
...
debug1: Next authentication method: password
```
Î•Ï€Î±Î½ÎµÎ¾Î­Ï„Î±ÏƒÎ· Ï„Î·Ï‚ Î´Î¹Î±Î¼ÏŒÏÏ†Ï‰ÏƒÎ·Ï‚ Ï„Î¿Ï… Î´Î¹Î±ÎºÎ¿Î¼Î¹ÏƒÏ„Î® SSH ÎµÎ¯Î½Î±Î¹ Î±Ï€Î±ÏÎ±Î¯Ï„Î·Ï„Î· Î³Î¹Î± Î½Î± ÎµÎ»Î­Î³Î¾ÎµÏ„Îµ ÏŒÏ„Î¹ Î¼ÏŒÎ½Î¿ Î¿Î¹ Î±Î½Î±Î¼ÎµÎ½ÏŒÎ¼ÎµÎ½ÎµÏ‚ Î¼Î­Î¸Î¿Î´Î¿Î¹ ÎµÎ¯Î½Î±Î¹ ÎµÎ¾Î¿Ï…ÏƒÎ¹Î¿Î´Î¿Ï„Î·Î¼Î­Î½ÎµÏ‚. Î— Ï‡ÏÎ®ÏƒÎ· Ï„Î·Ï‚ Î±Î½Î±Î»Ï…Ï„Î¹ÎºÎ®Ï‚ Î»ÎµÎ¹Ï„Î¿Ï…ÏÎ³Î¯Î±Ï‚ ÏƒÏ„Î¿Î½ Ï€ÎµÎ»Î¬Ï„Î· Î¼Ï€Î¿ÏÎµÎ¯ Î½Î± Î²Î¿Î·Î¸Î®ÏƒÎµÎ¹ Î½Î± Î´ÎµÎ¯Ï„Îµ Ï„Î·Î½ Î±Ï€Î¿Ï„ÎµÎ»ÎµÏƒÎ¼Î±Ï„Î¹ÎºÏŒÏ„Î·Ï„Î± Ï„Î·Ï‚ Î´Î¹Î±Î¼ÏŒÏÏ†Ï‰ÏƒÎ·Ï‚.

### Config files
```bash
ssh_config
sshd_config
authorized_keys
ssh_known_hosts
known_hosts
id_rsa
```
## Fuzzing

* [https://packetstormsecurity.com/files/download/71252/sshfuzz.txt](https://packetstormsecurity.com/files/download/71252/sshfuzz.txt)
* [https://www.rapid7.com/db/modules/auxiliary/fuzzers/ssh/ssh\_version\_2](https://www.rapid7.com/db/modules/auxiliary/fuzzers/ssh/ssh\_version\_2)

## Î‘Î½Î±Ï†Î¿ÏÎ­Ï‚

* ÎœÏ€Î¿ÏÎµÎ¯Ï„Îµ Î½Î± Î²ÏÎµÎ¯Ï„Îµ ÎµÎ½Î´Î¹Î±Ï†Î­ÏÎ¿Î½Ï„ÎµÏ‚ Î¿Î´Î·Î³Î¿ÏÏ‚ Î³Î¹Î± Ï„Î¿ Ï€ÏÏ‚ Î½Î± ÏƒÎºÎ»Î·ÏÏÎ½ÎµÏ„Îµ Ï„Î¿ SSH ÏƒÏ„Î¿ [https://www.ssh-audit.com/hardening\_guides.html](https://www.ssh-audit.com/hardening\_guides.html)
* [https://community.turgensec.com/ssh-hacking-guide](https://community.turgensec.com/ssh-hacking-guide)

<figure><img src="../.gitbook/assets/i3.png" alt=""><figcaption></figcaption></figure>

**Î£Ï…Î¼Î²Î¿Ï…Î»Î® Î³Î¹Î± bug bounty**: **ÎµÎ³Î³ÏÎ±Ï†ÎµÎ¯Ï„Îµ** ÏƒÏ„Î¿ **Intigriti**, Î¼Î¹Î± premium **Ï€Î»Î±Ï„Ï†ÏŒÏÎ¼Î± bug bounty Ï€Î¿Ï… Î´Î·Î¼Î¹Î¿Ï…ÏÎ³Î®Î¸Î·ÎºÎµ Î±Ï€ÏŒ hackers, Î³Î¹Î± hackers**! Î•Î»Î¬Ï„Îµ Î¼Î±Î¶Î¯ Î¼Î±Ï‚ ÏƒÏ„Î¿ [**https://go.intigriti.com/hacktricks**](https://go.intigriti.com/hacktricks) ÏƒÎ®Î¼ÎµÏÎ±, ÎºÎ±Î¹ Î±ÏÏ‡Î¯ÏƒÏ„Îµ Î½Î± ÎºÎµÏÎ´Î¯Î¶ÎµÏ„Îµ Î²ÏÎ±Î²ÎµÎ¯Î± Î­Ï‰Ï‚ **$100,000**!

{% embed url="https://go.intigriti.com/hacktricks" %}

## HackTricks Î‘Ï…Ï„ÏŒÎ¼Î±Ï„ÎµÏ‚ Î•Î½Ï„Î¿Î»Î­Ï‚
```
Protocol_Name: SSH
Port_Number: 22
Protocol_Description: Secure Shell Hardening

Entry_1:
Name: Hydra Brute Force
Description: Need Username
Command: hydra -v -V -u -l {Username} -P {Big_Passwordlist} -t 1 {IP} ssh

Entry_2:
Name: consolesless mfs enumeration
Description: SSH enumeration without the need to run msfconsole
Note: sourced from https://github.com/carlospolop/legion
Command: msfconsole -q -x 'use auxiliary/scanner/ssh/ssh_version; set RHOSTS {IP}; set RPORT 22; run; exit' && msfconsole -q -x 'use scanner/ssh/ssh_enumusers; set RHOSTS {IP}; set RPORT 22; run; exit' && msfconsole -q -x 'use auxiliary/scanner/ssh/juniper_backdoor; set RHOSTS {IP}; set RPORT 22; run; exit'

```
{% hint style="success" %}
ÎœÎ¬Î¸ÎµÏ„Îµ & ÎµÎ¾Î±ÏƒÎºÎ·Î¸ÎµÎ¯Ï„Îµ ÏƒÏ„Î¿ AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
ÎœÎ¬Î¸ÎµÏ„Îµ & ÎµÎ¾Î±ÏƒÎºÎ·Î¸ÎµÎ¯Ï„Îµ ÏƒÏ„Î¿ GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Î¥Ï€Î¿ÏƒÏ„Î®ÏÎ¹Î¾Î· HackTricks</summary>

* Î•Î»Î­Î³Î¾Ï„Îµ Ï„Î± [**ÏƒÏ‡Î­Î´Î¹Î± ÏƒÏ…Î½Î´ÏÎ¿Î¼Î®Ï‚**](https://github.com/sponsors/carlospolop)!
* **Î•Î³Î³ÏÎ±Ï†ÎµÎ¯Ï„Îµ ÏƒÏ„Î·Î½** ğŸ’¬ [**Î¿Î¼Î¬Î´Î± Discord**](https://discord.gg/hRep4RUj7f) Î® ÏƒÏ„Î·Î½ [**Î¿Î¼Î¬Î´Î± telegram**](https://t.me/peass) Î® **Î±ÎºÎ¿Î»Î¿Ï…Î¸Î®ÏƒÏ„Îµ** Î¼Î±Ï‚ ÏƒÏ„Î¿ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **ÎœÎ¿Î¹ÏÎ±ÏƒÏ„ÎµÎ¯Ï„Îµ ÎºÏŒÎ»Ï€Î± hacking Ï…Ï€Î¿Î²Î¬Î»Î»Î¿Î½Ï„Î±Ï‚ PRs ÏƒÏ„Î±** [**HackTricks**](https://github.com/carlospolop/hacktricks) ÎºÎ±Î¹ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
