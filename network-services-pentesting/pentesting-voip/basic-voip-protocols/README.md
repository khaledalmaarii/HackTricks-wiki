# Osnovni VoIP protokoli

<details>

<summary><strong>NauÄite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Drugi naÄini podrÅ¡ke HackTricks-u:

* Ako Å¾elite da vidite svoju **kompaniju reklamiranu na HackTricks-u** ili da **preuzmete HackTricks u PDF formatu** proverite [**PLANOVE ZA PRIJAVU**](https://github.com/sponsors/carlospolop)!
* Nabavite [**zvaniÄni PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Otkrijte [**Porodicu PEASS**](https://opensea.io/collection/the-peass-family), naÅ¡u kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* **PridruÅ¾ite se** ğŸ’¬ [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili nas **pratite** na **Twitteru** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **Podelite svoje hakovanje trikova slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>

### [WhiteIntel](https://whiteintel.io)

<figure><img src="../../../.gitbook/assets/image (1227).png" alt=""><figcaption></figcaption></figure>

[**WhiteIntel**](https://whiteintel.io) je **dark-web** pretraÅ¾ivaÄ koji nudi **besplatne** funkcionalnosti za proveru da li je kompanija ili njeni korisnici **kompromitovani** od strane **malvera za kraÄ‘u podataka**.

Primarni cilj WhiteIntel-a je borba protiv preuzimanja naloga i napada ransomvera koji proizilaze iz malvera za kraÄ‘u informacija.

MoÅ¾ete posetiti njihovu veb lokaciju i isprobati njihovu maÅ¡inu za **besplatno** na:

{% embed url="https://whiteintel.io" %}

***

## Signalni protokoli

### SIP (Session Initiation Protocol)

Ovo je industrijski standard, za viÅ¡e informacija pogledajte:

{% content-ref url="sip-session-initiation-protocol.md" %}
[sip-session-initiation-protocol.md](sip-session-initiation-protocol.md)
{% endcontent-ref %}

### MGCP (Media Gateway Control Protocol)

MGCP (Media Gateway Control Protocol) je **signalni** i **kontrolni protokol poziva** opisan u RFC 3435. Radi u centralizovanoj arhitekturi, koja se sastoji od tri glavne komponente:

1. **Pozivni agent ili kontroler medija (MGC)**: Glavni gateway u MGCP arhitekturi odgovoran je za **upravljanje i kontrolu medijskih gateway-a**. Obavlja procese postavljanja poziva, modifikacije i zavrÅ¡etka. MGC komunicira sa medijskim gateway-ima koristeÄ‡i MGCP protokol.
2. **Medijski gateway-i (MGs) ili robovi gateway-a**: Ovi ureÄ‘aji **konvertuju digitalne medijske tokove izmeÄ‘u razliÄitih mreÅ¾a**, kao Å¡to su tradicionalna prekidaÄka telefonska mreÅ¾a i paketski prekidaÄki IP mreÅ¾a. Upravljaju ih MGC i izvrÅ¡avaju komande koje dobijaju od njega. Medijski gateway-i mogu ukljuÄivati funkcije poput transkodiranja, paketizacije i otklanjanja eha.
3. **Signalni gateway-i (SGs)**: Ovi gateway-i su odgovorni za **konvertovanje signalnih poruka izmeÄ‘u razliÄitih mreÅ¾a**, omoguÄ‡avajuÄ‡i besprekornu komunikaciju izmeÄ‘u tradicionalnih telefonskih sistema (npr. SS7) i IP baziranih mreÅ¾a (npr. SIP ili H.323). Signalni gateway-i su kljuÄni za interoperabilnost i osiguravanje da se informacije o kontroli poziva pravilno komuniciraju izmeÄ‘u razliÄitih mreÅ¾a.

U suÅ¡tini, MGCP centralizuje logiku kontrole poziva u pozivnom agentu, Å¡to pojednostavljuje upravljanje medijskim i signalnim gateway-ima, pruÅ¾ajuÄ‡i bolju skalabilnost, pouzdanost i efikasnost u telekomunikacionim mreÅ¾ama.

### SCCP (Skinny Client Control Protocol)

Skinny Client Control Protocol (SCCP) je **vlasniÄki signalni i kontrolni protokol poziva** u vlasniÅ¡tvu kompanije Cisco Systems. Koristi se preteÅ¾no za komunikaciju izmeÄ‘u **Cisco Unified Communications Manager** (ranije poznat kao CallManager) i Cisco IP telefona ili drugih Cisco glasovnih i video ureÄ‘aja.

SCCP je lak protokol koji pojednostavljuje komunikaciju izmeÄ‘u servera kontrole poziva i ureÄ‘aja na kraju. Naziva se "Skinny" zbog svog minimalistiÄkog dizajna i smanjenih zahteva za propusni opseg u poreÄ‘enju sa drugim VoIP protokolima poput H.323 ili SIP.

Glavne komponente sistema zasnovanog na SCCP-u su:

1. **Server kontrole poziva**: Ovaj server, obiÄno Cisco Unified Communications Manager, upravlja procesima postavljanja poziva, modifikacije i zavrÅ¡etka, kao i drugim telefonskim funkcijama poput preusmeravanja poziva, transfera poziva i zadrÅ¾avanja poziva.
2. **SCCP ureÄ‘aji na kraju**: To su ureÄ‘aji poput IP telefona, video konferencijskih jedinica ili drugih Cisco glasovnih i video ureÄ‘aja koji koriste SCCP za komunikaciju sa serverom kontrole poziva. Oni se registruju kod servera, Å¡alju i primaju signalne poruke i prate instrukcije koje pruÅ¾a server kontrole poziva za upravljanje pozivima.
3. **Gateway-i**: Ovi ureÄ‘aji, poput glasovnih gateway-a ili medijskih gateway-a, odgovorni su za konvertovanje medijskih tokova izmeÄ‘u razliÄitih mreÅ¾a, poput tradicionalne prekidaÄke telefonske mreÅ¾e i paketski prekidaÄkih IP mreÅ¾a. Mogu takoÄ‘e ukljuÄivati dodatne funkcionalnosti, poput transkodiranja ili otklanjanja eha.

SCCP nudi jednostavan i efikasan naÄin komunikacije izmeÄ‘u Cisco servera kontrole poziva i ureÄ‘aja na kraju. MeÄ‘utim, vredi napomenuti da je **SCCP vlasniÄki protokol**, Å¡to moÅ¾e ograniÄiti interoperabilnost sa ne-Cisco sistemima. U takvim sluÄajevima, drugi standardni VoIP protokoli poput SIP-a mogu biti pogodniji.

### H.323

H.323 je **skup protokola** za multimedijalnu komunikaciju, ukljuÄujuÄ‡i glas, video i podatkovne konferencije preko paketskih mreÅ¾a, poput IP baziranih mreÅ¾a. Razvijen je od strane **MeÄ‘unarodne telekomunikacione unije** (ITU-T) i pruÅ¾a sveobuhvatan okvir za upravljanje multimedijalnim komunikacionim sesijama.

Neke kljuÄne komponente H.323 skupa ukljuÄuju:

1. **Terminali**: To su ureÄ‘aji na kraju, poput IP telefona, video konferencijskih sistema ili softverskih aplikacija, koji podrÅ¾avaju H.323 i mogu uÄestvovati u multimedijalnim komunikacionim sesijama.
2. **Gateway-i**: Ovi ureÄ‘aji konvertuju medijske tokove izmeÄ‘u razliÄitih mreÅ¾a, poput tradicionalne prekidaÄke telefonske mreÅ¾e i paketskih IP mreÅ¾a, omoguÄ‡avajuÄ‡i interoperabilnost izmeÄ‘u H.323 i drugih komunikacionih sistema. Mogu takoÄ‘e ukljuÄivati dodatne funkcionalnosti, poput transkodiranja ili otklanjanja eha.
3. **Gatekeeper-i**: To su opcione komponente koje pruÅ¾aju usluge kontrole poziva i upravljanja u H.323 mreÅ¾i. Obavljaju funkcije poput prevoÄ‘enja adresa, upravljanja propusnim opsegom i kontrolu prijema, pomaÅ¾uÄ‡i u upravljanju i optimizaciji resursa mreÅ¾e.
4. **Multipoint Control Units (MCU)**: Ovi ureÄ‘aji olakÅ¡avaju viÅ¡epoÄetne konferencije upravljajuÄ‡i i meÅ¡ajuÄ‡i medijske tokove sa viÅ¡e ureÄ‘aja na kraju. MCU-ovi omoguÄ‡avaju funkcije poput kontrole rasporeda videa, prebacivanja aktivirano glasom i kontinuirane prisutnosti, omoguÄ‡avajuÄ‡i odrÅ¾avanje konferencija velikog obima sa viÅ¡e uÄesnika.

H.323 podrÅ¾ava niz audio i video kodeka, kao i druge dodatne usluge poput preusmeravanja poziva, transfera poziva, zadrÅ¾avanja poziva i Äekanja poziva. Uprkos Å¡irokoj upotrebi u ranim danima VoIP-a, H.323 je postepeno zamenjen modernijim i fleksibilnijim protokolima poput **Session Initiation Protocol (SIP)**, koji nudi bolju interoperabilnost i lakÅ¡u implementaciju. MeÄ‘utim, H.323 i dalje se koristi u mnogim zastarelim sistemima i podrÅ¾ava se od strane razliÄitih proizvoÄ‘aÄa opreme.

### IAX (Inter Asterisk eXchange)

IAX (Inter-Asterisk eXchange) je **signalni i kontrolni protokol poziva** koji se preteÅ¾no koristi za komunikaciju izmeÄ‘u Asterisk PBX (Private Branch Exchange) servera i drugih VoIP ureÄ‘aja. Razvio ga je Mark Spencer, tvorac otvorenog PBX softvera Asterisk, kao alternativu drugim VoIP protokolima poput SIP-a i H.323.

IAX je poznat po svojoj **jednostavnosti, efikasnosti i lakoÄ‡i implementacije**. Neke kljuÄne karakteristike IAX-a ukljuÄuju:

1. **Jedan UDP port**: IAX koristi jedan UDP port (4569) za signalizaciju i medijski saobraÄ‡aj, Å¡to pojednostavljuje prolazak kroz firewall i NAT, olakÅ¡avajuÄ‡i implementaciju u razliÄitim mreÅ¾nim okruÅ¾enjima.
2. **Binarni protokol**: Za razliku od tekstualnih protokola poput SIP-a, IAX je binarni protokol, Å¡to smanjuje potroÅ¡nju propusnog opsega i Äini ga efikasnijim za prenos signalnih i medijskih podataka.
3. **Trunking**: IAX podrÅ¾ava trunking, Å¡to omoguÄ‡ava kombinovanje viÅ¡e poziva u jednu mreÅ¾nu vezu, smanjujuÄ‡i optereÄ‡enje i poboljÅ¡avajuÄ‡i iskoriÅ¡Ä‡enje propusnog opsega.
4. **Nativna enkripcija**: IAX ima ugraÄ‘enu podrÅ¡ku za enkripciju, koristeÄ‡i metode poput RSA za razmenu kljuÄeva i AES za enkripciju medija, pruÅ¾ajuÄ‡i sigurnu komunikaciju izmeÄ‘u krajnjih taÄaka.
5. **Peer-to-Peer komunikacija**: IAX se moÅ¾e koristiti za direktnu komunikaciju izmeÄ‘u krajnjih taÄaka bez potrebe za centralnim serverom, omoguÄ‡avajuÄ‡i jednostavnije i efikasnije usmeravanje poziva.

Iako ima svoje prednosti, IAX ima neka ograniÄenja, kao Å¡to je primarni fokus na Asterisk ekosistemu i manja rasprostranjenost u poreÄ‘enju sa etabliranim protokolima poput SIP-a. Kao rezultat toga, IAX moÅ¾da nije najbolji izbor za interoperabilnost sa ne-Asterisk sistemima ili ureÄ‘ajima. MeÄ‘utim, za one koji rade unutar Asterisk okruÅ¾enja, IAX nudi robustno i efikasno reÅ¡enje za VoIP komunikaciju.
## Protokoli za prenos i transport

### SDP (Protokol za opis sesije)

SDP (Session Description Protocol) je **format zasnovan na tekstu** koji se koristi za opisivanje karakteristika multimedijalnih sesija, poput glasa, videa ili konferencija podataka, preko IP mreÅ¾a. Razvijen je od strane **Internet Engineering Task Force (IETF)** i definisan je u **RFC 4566**. SDP ne upravlja stvarnom medijskom transmisijom ili uspostavom sesije, veÄ‡ se koristi u kombinaciji sa drugim signalizacijskim protokolima, poput **SIP (Session Initiation Protocol)**, radi pregovaranja i razmene informacija o medijskim tokovima i njihovim atributima.

Neke kljuÄne elemente SDP-a Äine:

1. **Informacije o sesiji**: SDP opisuje detalje multimedijalne sesije, ukljuÄujuÄ‡i naziv sesije, opis sesije, vreme poÄetka i zavrÅ¡etka.
2. **Medijski tokovi**: SDP definiÅ¡e karakteristike medijskih tokova, poput vrste medija (audio, video ili tekst), transportnog protokola (npr. RTP ili SRTP) i formata medija (npr. informacije o kodeku).
3. **Informacije o vezi**: SDP pruÅ¾a informacije o mreÅ¾noj adresi (IP adresa) i broju porta na kojem bi medij trebalo da bude poslat ili primljen.
4. **Atributi**: SDP podrÅ¾ava upotrebu atributa radi pruÅ¾anja dodatnih, opcionalnih informacija o sesiji ili medijskom toku. Atributi se mogu koristiti za specificiranje razliÄitih funkcionalnosti poput kljuÄeva za enkripciju, zahteva za propusnost ili mehanizama za kontrolu medija.

SDP se obiÄno koristi u sledeÄ‡em procesu:

1. InicirajuÄ‡a strana kreira SDP opis predloÅ¾ene multimedijalne sesije, ukljuÄujuÄ‡i detalje medijskih tokova i njihove atribute.
2. SDP opis se Å¡alje primajuÄ‡oj strani, obiÄno ugraÄ‘en unutar signalizacijske poruke poput SIP-a ili RTSP-a.
3. PrimajuÄ‡a strana obraÄ‘uje SDP opis i na osnovu svojih moguÄ‡nosti moÅ¾e prihvatiti, odbiti ili modifikovati predloÅ¾enu sesiju.
4. KonaÄan SDP opis se Å¡alje nazad inicirajuÄ‡oj strani kao deo signalizacijske poruke, zavrÅ¡avajuÄ‡i proces pregovaranja.

Jednostavnost i fleksibilnost SDP-a Äine ga Å¡iroko prihvaÄ‡enim standardom za opisivanje multimedijalnih sesija u razliÄitim komunikacionim sistemima, igrajuÄ‡i kljuÄnu ulogu u uspostavljanju i upravljanju realnim multimedijalnim sesijama preko IP mreÅ¾a.

### RTP / RTCP / SRTP / ZRTP

1. **RTP (Real-time Transport Protocol)**: RTP je mreÅ¾ni protokol dizajniran za dostavu audio i video podataka, ili drugih realno-vremenskih medija, preko IP mreÅ¾a. Razvijen od strane **IETF** i definisan u **RFC 3550**, RTP se Äesto koristi sa signalizacijskim protokolima poput SIP-a i H.323 radi omoguÄ‡avanja multimedijalne komunikacije. RTP pruÅ¾a mehanizme za **sinhronizaciju**, **sekvenciranje** i **vremensko oznaÄavanje** medijskih tokova, pomaÅ¾uÄ‡i u osiguravanju glatke i pravovremene reprodukcije medija.
2. **RTCP (Real-time Transport Control Protocol)**: RTCP je prateÄ‡i protokol za RTP, koriÅ¡Ä‡en za praÄ‡enje kvaliteta usluge (QoS) i pruÅ¾anje povratnih informacija o transmisiji medijskih tokova. Definisan u istom **RFC 3550** kao RTP, RTCP **periodiÄno razmenjuje kontrolne pakete izmeÄ‘u uÄesnika u RTP sesiji**. Deli informacije poput gubitka paketa, dÅ¾itera i vremena kaÅ¡njenja u oba pravca, Å¡to pomaÅ¾e u dijagnostikovanju i prilagoÄ‘avanju mreÅ¾nim uslovima, poboljÅ¡avajuÄ‡i ukupan kvalitet medija.
3. **SRTP (Secure Real-time Transport Protocol)**: SRTP je proÅ¡irenje RTP-a koje pruÅ¾a **enkripciju**, **autentikaciju poruka** i **zaÅ¡titu od reprodukcije** za medijske tokove, osiguravajuÄ‡i sigurnu transmisiju osetljivih audio i video podataka. Definisan u **RFC 3711**, SRTP koristi kriptografske algoritme poput AES za enkripciju i HMAC-SHA1 za autentikaciju poruka. SRTP se Äesto koristi u kombinaciji sa sigurnim signalizacijskim protokolima poput SIP-a preko TLS-a radi obezbeÄ‘ivanja sigurnosti od kraja do kraja u multimedijalnoj komunikaciji.
4. **ZRTP (Zimmermann Real-time Transport Protocol)**: ZRTP je kriptografski protokol za dogovor o kljuÄu koji pruÅ¾a **enkripciju od kraja do kraja** za RTP medijske tokove. Razvijen od strane Phil Zimmermanna, tvorca PGP-a, ZRTP je opisan u **RFC 6189**. Za razliku od SRTP-a, koji se oslanja na signalizacijske protokole za razmenu kljuÄeva, ZRTP je dizajniran da radi nezavisno od signalizacijskog protokola. Koristi **Diffie-Hellman razmenu kljuÄeva** radi uspostavljanja zajedniÄke tajne izmeÄ‘u komunicirajuÄ‡ih strana, bez potrebe za prethodnim poverenjem ili infrastrukturom javnih kljuÄeva (PKI). ZRTP takoÄ‘e ukljuÄuje funkcionalnosti poput **Short Authentication Strings (SAS)** radi zaÅ¡tite od napada Äovek-u-sredini.

Ovi protokoli igraju kljuÄne uloge u **dostavljanju i obezbeÄ‘ivanju realno-vremenske multimedijalne komunikacije preko IP mreÅ¾a**. Dok RTP i RTCP upravljaju stvarnom transmisijom medija i praÄ‡enjem kvaliteta, SRTP i ZRTP osiguravaju da preneti medij bude zaÅ¡tiÄ‡en od prisluÅ¡kivanja, manipulacije i napada reprodukcije.

### [WhiteIntel](https://whiteintel.io)

<figure><img src="../../../.gitbook/assets/image (1227).png" alt=""><figcaption></figcaption></figure>

[**WhiteIntel**](https://whiteintel.io) je pretraÅ¾ivaÄ pokretan **dark webom** koji nudi **besplatne** funkcionalnosti za proveru da li je kompanija ili njeni korisnici bili **ugroÅ¾eni** od strane **malvera za kraÄ‘u**.

Primarni cilj WhiteIntela je borba protiv preuzimanja naloga i napada ransomware-a koji proizilaze iz malvera za kraÄ‘u informacija.

MoÅ¾ete posetiti njihovu veb lokaciju i isprobati njihovu maÅ¡inu za **besplatno** na:

{% embed url="https://whiteintel.io" %}

<details>

<summary><strong>NauÄite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Drugi naÄini podrÅ¡ke HackTricks-u:

* Ako Å¾elite da vidite svoju **kompaniju reklamiranu na HackTricks-u** ili da **preuzmete HackTricks u PDF formatu** proverite [**PLANOVE ZA PRIJAVU**](https://github.com/sponsors/carlospolop)!
* Nabavite [**zvaniÄni PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Otkrijte [**The PEASS Family**](https://opensea.io/collection/the-peass-family), naÅ¡u kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* **PridruÅ¾ite se** ğŸ’¬ [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili nas **pratite** na **Twitteru** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **Podelite svoje hakovanje trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>
