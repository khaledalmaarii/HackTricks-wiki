# Osnovni VoIP protokoli

<details>

<summary><strong>NauÄite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Drugi naÄini podrÅ¡ke HackTricks-u:

* Ako Å¾elite da vidite **vaÅ¡u kompaniju reklamiranu na HackTricks-u** ili **preuzmete HackTricks u PDF formatu** proverite [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Nabavite [**zvaniÄni PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Otkrijte [**The PEASS Family**](https://opensea.io/collection/the-peass-family), naÅ¡u kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* **PridruÅ¾ite se** ğŸ’¬ [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili nas **pratite** na **Twitter-u** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Podelite svoje hakovanje trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>

## Signalni protokoli

### SIP (Session Initiation Protocol)

Ovo je industrijski standard, za viÅ¡e informacija proverite:

{% content-ref url="sip-session-initiation-protocol.md" %}
[sip-session-initiation-protocol.md](sip-session-initiation-protocol.md)
{% endcontent-ref %}

### MGCP (Media Gateway Control Protocol)

MGCP (Media Gateway Control Protocol) je **signalni** i **kontrolni protokol poziva** opisan u RFC 3435. Radi u centralizovanoj arhitekturi koja se sastoji od tri glavne komponente:

1. **Call Agent ili Media Gateway Controller (MGC)**: Glavna kapija u MGCP arhitekturi je odgovorna za **upravljanje i kontrolu medijskih kapija**. Ona se bavi procesima postavljanja, izmena i prekida poziva. MGC komunicira sa medijskim kapijama koristeÄ‡i MGCP protokol.
2. **Medijske kapije (MGs) ili Slave kapije**: Ovi ureÄ‘aji **konvertuju digitalne medijske tokove izmeÄ‘u razliÄitih mreÅ¾a**, kao Å¡to su tradicionalna prekidaÄka telefonska mreÅ¾a i paketski prekidaÄke IP mreÅ¾e. Upravlja ih MGC i izvrÅ¡avaju naredbe koje dobijaju od njega. Medijske kapije mogu sadrÅ¾ati funkcije kao Å¡to su transcoding, paketizacija i otklanjanje eha.
3. **Signalne kapije (SGs)**: Ove kapije su odgovorne za **konvertovanje signalnih poruka izmeÄ‘u razliÄitih mreÅ¾a**, omoguÄ‡avajuÄ‡i besprekornu komunikaciju izmeÄ‘u tradicionalnih telefonskih sistema (npr. SS7) i IP baziranih mreÅ¾a (npr. SIP ili H.323). Signalne kapije su kljuÄne za interoperabilnost i obezbeÄ‘ivanje pravilne komunikacije informacija o kontroli poziva izmeÄ‘u razliÄitih mreÅ¾a.

Ukratko, MGCP centralizuje logiku kontrole poziva u call agentu, Å¡to olakÅ¡ava upravljanje medijskim i signalnim kapijama, pruÅ¾ajuÄ‡i bolju skalabilnost, pouzdanost i efikasnost u telekomunikacionim mreÅ¾ama.

### SCCP (Skinny Client Control Protocol)

Skinny Client Control Protocol (SCCP) je **vlasniÄki signalni i kontrolni protokol poziva** u vlasniÅ¡tvu kompanije Cisco Systems. Koristi se preteÅ¾no za komunikaciju izmeÄ‘u Cisco Unified Communications Manager (ranije poznat kao CallManager) i Cisco IP telefona ili drugih Cisco glasovnih i video ureÄ‘aja.

SCCP je lak protokol koji pojednostavljuje komunikaciju izmeÄ‘u servera za kontrolu poziva i ureÄ‘aja. Naziva se "Skinny" zbog svog minimalistiÄkog dizajna i smanjenih zahteva za propusnost u odnosu na druge VoIP protokole poput H.323 ili SIP.

Glavne komponente sistema zasnovanog na SCCP-u su:

1. **Server za kontrolu poziva**: Ovaj server, obiÄno Cisco Unified Communications Manager, upravlja procesima postavljanja, izmena i prekida poziva, kao i drugim telefonskim funkcijama kao Å¡to su preusmeravanje poziva, prenos poziva i zadrÅ¾avanje poziva.
2. **SCCP ureÄ‘aji**: To su ureÄ‘aji poput IP telefona, video konferencijskih jedinica ili drugih Cisco glasovnih i video ureÄ‘aja koji koriste SCCP za komunikaciju sa serverom za kontrolu poziva. Oni se registruju kod servera, Å¡alju i primaju signalne poruke i prate instrukcije koje pruÅ¾a server za kontrolu poziva za upravljanje pozivima.
3. **Kapije**: Ovi ureÄ‘aji, poput glasovnih kapija ili medijskih kapija, odgovorni su za konvertovanje medijskih tokova izmeÄ‘u razliÄitih mreÅ¾a, poput tradicionalne prekidaÄke telefonske mreÅ¾e i paketski prekidaÄke IP mreÅ¾e. Mogu takoÄ‘e sadrÅ¾ati dodatne funkcionalnosti kao Å¡to su transcoding ili otklanjanje eha.

SCCP nudi jednostavan i efikasan naÄin komunikacije izmeÄ‘u Cisco servera za kontrolu poziva i ureÄ‘aja. MeÄ‘utim, vredi napomenuti da je SCCP vlasniÄki protokol, Å¡to moÅ¾e ograniÄiti interoperabilnost sa ne-Cisco sistemima. U takvim sluÄajevima, drugi standardni VoIP protokoli poput SIP-a mogu biti pogodniji.

### H.323

H.323 je **skup protokola** za multimedijalnu komunikaciju, ukljuÄujuÄ‡i glas, video i konferencije podataka preko paketski prekidaÄkih mreÅ¾a, kao Å¡to su IP bazirane mreÅ¾e. Razvijen je od strane MeÄ‘unarodnog telekomunikacionog saveza (ITU-T) i pruÅ¾a sveobuhvatan okvir za upravljanje sesijama multimedijalne komunikacije.

Neki kljuÄni elementi H.323 skupa ukljuÄuju:

1. **Terminali**: To su ureÄ‘aji na kraju, poput IP telefona, sistema za video konferencije ili softverskih aplikacija, koji podrÅ¾avaju H.323 i mogu uÄestvovati u sesijama multimedijalne komunikacije.
2. **Kapije**: Ovi ureÄ‘aji konvertuju medijske tokove izmeÄ‘u razliÄitih mreÅ¾a, poput tradicionalne prekidaÄke telefonske mreÅ¾e i paketski prekidaÄke IP mreÅ¾e, omoguÄ‡avajuÄ‡i interoperabilnost izmeÄ‘u H.323 i drugih komunikacionih sistema. Mogu takoÄ‘e sadrÅ¾ati dodatne funkcionalnosti kao Å¡to su transcoding ili otklanjanje eha.
3. **Kapije za signalizaciju**: Ove kapije su odgovorne za konvertovanje signalnih poruka izmeÄ‘u razliÄitih mreÅ¾a, omoguÄ‡avajuÄ‡i besprekornu komunikaciju izmeÄ‘u tradicionalnih telefonskih sistema (npr. SS7) i IP baziranih mreÅ¾a (npr. SIP ili H.323). Kapije za signalizaciju su kljuÄne za interoperabilnost i obezbeÄ‘ivanje pravilne komunikacije informacija o kontroli poziva izmeÄ‘u razliÄitih mreÅ¾a.
4. **Multip
## Protokoli za prenos i transport

### SDP (Protokol za opis sesije)

SDP (Session Description Protocol) je **tekstualni format** koji se koristi za opisivanje karakteristika multimedijalnih sesija, kao Å¡to su glas, video ili konferencije podataka, preko IP mreÅ¾a. Razvijen je od strane **Internet Engineering Task Force (IETF)** i definisan je u **RFC 4566**. SDP ne upravlja samim prenosom medija ili uspostavom sesije, veÄ‡ se koristi u kombinaciji sa drugim signalizacijskim protokolima, poput **SIP (Session Initiation Protocol)**, za pregovaranje i razmenu informacija o medija tokovima i njihovim atributima.

Neki kljuÄni elementi SDP-a ukljuÄuju:

1. **Informacije o sesiji**: SDP opisuje detalje multimedijalne sesije, ukljuÄujuÄ‡i naziv sesije, opis sesije, vreme poÄetka i vreme zavrÅ¡etka.
2. **Medijski tokovi**: SDP definiÅ¡e karakteristike medijskih tokova, kao Å¡to su vrsta medija (audio, video ili tekst), transportni protokol (npr. RTP ili SRTP) i format medija (npr. informacije o kodeku).
3. **Informacije o vezi**: SDP pruÅ¾a informacije o mreÅ¾noj adresi (IP adresa) i broju porta na kojem bi medij trebao biti poslat ili primljen.
4. **Atributi**: SDP podrÅ¾ava upotrebu atributa radi pruÅ¾anja dodatnih, opcionih informacija o sesiji ili medijskom toku. Atributi se mogu koristiti za specificiranje razliÄitih funkcionalnosti kao Å¡to su kljuÄevi za enkripciju, zahtevi za propusnost ili mehanizmi za kontrolu medija.

SDP se obiÄno koristi u sledeÄ‡em procesu:

1. InicirajuÄ‡a strana kreira SDP opis predloÅ¾ene multimedijalne sesije, ukljuÄujuÄ‡i detalje medijskih tokova i njihove atribute.
2. SDP opis se Å¡alje primajuÄ‡oj strani, obiÄno ugraÄ‘en unutar signalizacijske poruke kao Å¡to je SIP ili RTSP.
3. PrimajuÄ‡a strana obraÄ‘uje SDP opis i, na osnovu svojih moguÄ‡nosti, moÅ¾e prihvatiti, odbiti ili izmeniti predloÅ¾enu sesiju.
4. KonaÄan SDP opis se Å¡alje nazad inicirajuÄ‡oj strani kao deo signalizacijske poruke, Äime se zavrÅ¡ava proces pregovaranja.

Jednostavnost i fleksibilnost SDP-a Äine ga Å¡iroko prihvaÄ‡enim standardom za opisivanje multimedijalnih sesija u razliÄitim komunikacionim sistemima, igrajuÄ‡i kljuÄnu ulogu u uspostavljanju i upravljanju realnom vremenskom multimedijalnom sesijom preko IP mreÅ¾a.

### RTP / RTCP / SRTP / ZRTP

1. **RTP (Real-time Transport Protocol)**: RTP je mreÅ¾ni protokol dizajniran za prenos audio i video podataka, ili drugih medija u realnom vremenu, preko IP mreÅ¾a. Razvijen od strane **IETF** i definisan u **RFC 3550**, RTP se Äesto koristi sa signalizacijskim protokolima poput SIP-a i H.323 radi omoguÄ‡avanja multimedijalne komunikacije. RTP pruÅ¾a mehanizme za **sinhronizaciju**, **sekvenciranje** i **vremensko oznaÄavanje** medijskih tokova, pomaÅ¾uÄ‡i u osiguravanju glatkog i pravovremenog reprodukovanja medija.
2. **RTCP (Real-time Transport Control Protocol)**: RTCP je prateÄ‡i protokol za RTP, koji se koristi za praÄ‡enje kvaliteta usluge (QoS) i pruÅ¾anje povratnih informacija o prenosu medijskih tokova. Definisan u istom **RFC 3550** kao RTP, RTCP **periodiÄno razmenjuje kontrolne pakete izmeÄ‘u uÄesnika u RTP sesiji**. Deli informacije kao Å¡to su gubitak paketa, varijacija kaÅ¡njenja i vreme povratnog puta, Å¡to pomaÅ¾e u dijagnostikovanju i prilagoÄ‘avanju mreÅ¾nim uslovima, poboljÅ¡avajuÄ‡i ukupan kvalitet medija.
3. **SRTP (Secure Real-time Transport Protocol)**: SRTP je proÅ¡irenje RTP-a koje pruÅ¾a **enkripciju**, **autentifikaciju poruka** i **zaÅ¡titu od reprodukcije** za medijske tokove, osiguravajuÄ‡i siguran prenos osetljivih audio i video podataka. Definisan u **RFC 3711**, SRTP koristi kriptografske algoritme poput AES za enkripciju i HMAC-SHA1 za autentifikaciju poruka. SRTP se Äesto koristi u kombinaciji sa sigurnim signalizacijskim protokolima poput SIP-a preko TLS-a radi obezbeÄ‘ivanja sigurnosti od kraja do kraja u multimedijalnoj komunikaciji.
4. **ZRTP (Zimmermann Real-time Transport Protocol)**: ZRTP je kriptografski protokol za dogovor o kljuÄevima koji pruÅ¾a **enkripciju od kraja do kraja** za RTP medijske tokove. Razvijen od strane Phil Zimmermanna, tvorca PGP-a, ZRTP je opisan u **RFC 6189**. Za razliku od SRTP-a, koji se oslanja na signalizacijske protokole za razmenu kljuÄeva, ZRTP je dizajniran da radi nezavisno od signalizacijskog protokola. Koristi **Diffie-Hellman razmenu kljuÄeva** radi uspostavljanja zajedniÄke tajne izmeÄ‘u komunicirajuÄ‡ih strana, bez potrebe za prethodnim poverenjem ili infrastrukturom javnih kljuÄeva (PKI). ZRTP takoÄ‘e ukljuÄuje funkcionalnosti poput **Short Authentication Strings (SAS)** radi zaÅ¡tite od napada Äovek-u-sredini.

Ovi protokoli igraju kljuÄne uloge u **isporuci i obezbeÄ‘ivanju sigurne komunikacije u realnom vremenu preko IP mreÅ¾a**. Dok RTP i RTCP upravljaju samim prenosom medija i praÄ‡enjem kvaliteta, SRTP i ZRTP osiguravaju da se preneti medij zaÅ¡titi od prisluÅ¡kivanja, manipulacije i napada reprodukcijom.
