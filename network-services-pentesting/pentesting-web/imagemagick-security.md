# ImageMagick ë³´ì•ˆ

{% hint style="success" %}
AWS í•´í‚¹ ë°°ìš°ê¸° ë° ì—°ìŠµí•˜ê¸°:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
GCP í•´í‚¹ ë°°ìš°ê¸° ë° ì—°ìŠµí•˜ê¸°: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks ì§€ì›í•˜ê¸°</summary>

* [**êµ¬ë… ê³„íš**](https://github.com/sponsors/carlospolop) í™•ì¸í•˜ê¸°!
* **ğŸ’¬ [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— ì°¸ì—¬í•˜ê±°ë‚˜ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**ë¥¼ íŒ”ë¡œìš°í•˜ì„¸ìš”.**
* **[**HackTricks**](https://github.com/carlospolop/hacktricks) ë° [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) ê¹ƒí—ˆë¸Œ ë¦¬í¬ì§€í† ë¦¬ì— PRì„ ì œì¶œí•˜ì—¬ í•´í‚¹ íŠ¸ë¦­ì„ ê³µìœ í•˜ì„¸ìš”.**

</details>
{% endhint %}

ìì„¸í•œ ë‚´ìš©ì€ [**https://blog.doyensec.com/2023/01/10/imagemagick-security-policy-evaluator.html**](https://blog.doyensec.com/2023/01/10/imagemagick-security-policy-evaluator.html)ì—ì„œ í™•ì¸í•˜ì„¸ìš”.

ë‹¤ì¬ë‹¤ëŠ¥í•œ ì´ë¯¸ì§€ ì²˜ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ì¸ ImageMagickì€ ë°©ëŒ€í•œ ì˜µì…˜ê³¼ ìƒì„¸í•œ ì˜¨ë¼ì¸ ë¬¸ì„œì˜ ë¶€ì¡±ìœ¼ë¡œ ì¸í•´ ë³´ì•ˆ ì •ì±… êµ¬ì„±ì— ì–´ë ¤ì›€ì„ ê²ªê³  ìˆìŠµë‹ˆë‹¤. ì‚¬ìš©ìë“¤ì€ ì¢…ì¢… ë‹¨í¸ì ì¸ ì¸í„°ë„· ì†ŒìŠ¤ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì •ì±…ì„ ìƒì„±í•˜ì—¬ ì ì¬ì ì¸ ì˜ëª»ëœ êµ¬ì„±ì„ ì´ˆë˜í•©ë‹ˆë‹¤. ì´ ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” 100ê°œ ì´ìƒì˜ ì´ë¯¸ì§€ í˜•ì‹ì„ ì§€ì›í•˜ë©°, ê° í˜•ì‹ì€ ë³µì¡ì„±ê³¼ ì·¨ì•½ì„± í”„ë¡œí•„ì— ê¸°ì—¬í•˜ë©°, ì´ëŠ” ì—­ì‚¬ì ì¸ ë³´ì•ˆ ì‚¬ê±´ì— ì˜í•´ ì…ì¦ë˜ì—ˆìŠµë‹ˆë‹¤.

## ë” ì•ˆì „í•œ ì •ì±…ì„ í–¥í•˜ì—¬
ì´ëŸ¬í•œ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ [ë„êµ¬ê°€ ê°œë°œë˜ì—ˆìŠµë‹ˆë‹¤](https://imagemagick-secevaluator.doyensec.com/) ImageMagickì˜ ë³´ì•ˆ ì •ì±… ì„¤ê³„ ë° ê°ì‚¬ì— ë„ì›€ì„ ì£¼ê¸° ìœ„í•´. ì´ ë„êµ¬ëŠ” ê´‘ë²”ìœ„í•œ ì—°êµ¬ì— ê¸°ë°˜í•˜ê³  ìˆìœ¼ë©°, ì •ì±…ì´ ê°•ë ¥í•  ë¿ë§Œ ì•„ë‹ˆë¼ ì•…ìš©ë  ìˆ˜ ìˆëŠ” í—ˆì ì´ ì—†ë„ë¡ í•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ í•©ë‹ˆë‹¤.

## í—ˆìš© ëª©ë¡ ëŒ€ ê±°ë¶€ ëª©ë¡ ì ‘ê·¼ ë°©ì‹
ì—­ì‚¬ì ìœ¼ë¡œ ImageMagick ì •ì±…ì€ íŠ¹ì • ì½”ë”ì˜ ì ‘ê·¼ì„ ê±°ë¶€í•˜ëŠ” ê±°ë¶€ ëª©ë¡ ì ‘ê·¼ ë°©ì‹ì— ì˜ì¡´í–ˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ImageMagick 6.9.7-7ì—ì„œì˜ ë³€í™”ëŠ” ì´ íŒ¨ëŸ¬ë‹¤ì„ì„ ì „í™˜í•˜ì—¬ í—ˆìš© ëª©ë¡ ì ‘ê·¼ ë°©ì‹ì„ ê°€ëŠ¥í•˜ê²Œ í–ˆìŠµë‹ˆë‹¤. ì´ ì ‘ê·¼ ë°©ì‹ì€ ë¨¼ì € ëª¨ë“  ì½”ë”ì˜ ì ‘ê·¼ì„ ê±°ë¶€í•œ ë‹¤ìŒ ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ì½”ë”ì—ê²Œ ì„ íƒì ìœ¼ë¡œ ì ‘ê·¼ì„ í—ˆìš©í•˜ì—¬ ë³´ì•ˆ íƒœì„¸ë¥¼ ê°•í™”í•©ë‹ˆë‹¤.
```xml
...
<policy domain="coder" rights="none" pattern="*" />
<policy domain="coder" rights="read | write" pattern="{GIF,JPEG,PNG,WEBP}" />
...
```
## ì •ì±…ì˜ ëŒ€ì†Œë¬¸ì êµ¬ë¶„
ImageMagickì˜ ì •ì±… íŒ¨í„´ì€ ëŒ€ì†Œë¬¸ìë¥¼ êµ¬ë¶„í•œë‹¤ëŠ” ì ì„ ì£¼ì˜í•´ì•¼ í•œë‹¤. ë”°ë¼ì„œ, ì •ì±…ì—ì„œ ì½”ë”ì™€ ëª¨ë“ˆì´ ì˜¬ë°”ë¥´ê²Œ ëŒ€ë¬¸ìë¡œ ì„¤ì •ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•˜ëŠ” ê²ƒì´ ì˜ë„í•˜ì§€ ì•Šì€ ê¶Œí•œì„ ë°©ì§€í•˜ëŠ” ë° ì¤‘ìš”í•˜ë‹¤.

## ë¦¬ì†ŒìŠ¤ ì œí•œ
ImageMagickì€ ì ì ˆí•˜ê²Œ êµ¬ì„±ë˜ì§€ ì•Šìœ¼ë©´ ì„œë¹„ìŠ¤ ê±°ë¶€ ê³µê²©ì— ì·¨ì•½í•˜ë‹¤. ì´ëŸ¬í•œ ì·¨ì•½ì ì„ ë°©ì§€í•˜ê¸° ìœ„í•´ ì •ì±…ì—ì„œ ëª…ì‹œì ì¸ ë¦¬ì†ŒìŠ¤ ì œí•œì„ ì„¤ì •í•˜ëŠ” ê²ƒì´ í•„ìˆ˜ì ì´ë‹¤.

## ì •ì±… ë‹¨í¸í™”
ì •ì±…ì´ ì„œë¡œ ë‹¤ë¥¸ ImageMagick ì„¤ì¹˜ ê°„ì— ë‹¨í¸í™”ë  ìˆ˜ ìˆì–´ ì ì¬ì ì¸ ì¶©ëŒì´ë‚˜ ë®ì–´ì“°ê¸°ê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤. ë‹¤ìŒê³¼ ê°™ì€ ëª…ë ¹ì„ ì‚¬ìš©í•˜ì—¬ í™œì„± ì •ì±… íŒŒì¼ì„ ì°¾ê³  í™•ì¸í•˜ëŠ” ê²ƒì´ ê¶Œì¥ëœë‹¤:
```shell
$ find / -iname policy.xml
```
## ì‹œì‘, ì œí•œì ì¸ ì •ì±…
ì œí•œì ì¸ ì •ì±… í…œí”Œë¦¿ì´ ì œì•ˆë˜ì—ˆìœ¼ë©°, ì´ëŠ” ì—„ê²©í•œ ìì› ì œí•œ ë° ì ‘ê·¼ ì œì–´ì— ì¤‘ì ì„ ë‘ê³  ìˆìŠµë‹ˆë‹¤. ì´ í…œí”Œë¦¿ì€ íŠ¹ì • ì• í”Œë¦¬ì¼€ì´ì…˜ ìš”êµ¬ ì‚¬í•­ì— ë§ì¶˜ ë§ì¶¤í˜• ì •ì±… ê°œë°œì„ ìœ„í•œ ê¸°ì¤€ì„  ì—­í• ì„ í•©ë‹ˆë‹¤.

ë³´ì•ˆ ì •ì±…ì˜ íš¨ê³¼ëŠ” ImageMagickì—ì„œ `identify -list policy` ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ, ì•ì„œ ì–¸ê¸‰í•œ [evaluator tool](https://imagemagick-secevaluator.doyensec.com/)ì„ ì‚¬ìš©í•˜ì—¬ ê°œë³„ ìš”êµ¬ ì‚¬í•­ì— ë”°ë¼ ì •ì±…ì„ ê°œì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## ì°¸ê³  ë¬¸í—Œ
* [https://blog.doyensec.com/2023/01/10/imagemagick-security-policy-evaluator.html**](https://blog.doyensec.com/2023/01/10/imagemagick-security-policy-evaluator.html)



{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
