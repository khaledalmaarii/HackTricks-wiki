# ImageMagick Bezbednost

<details>

<summary><strong>Nau캜ite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Drugi na캜ini podr코ke HackTricks-u:

* Ako 쬰lite da vidite **va코u kompaniju reklamiranu na HackTricks-u** ili **preuzmete HackTricks u PDF formatu** Proverite [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Nabavite [**zvani캜ni PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Otkrijte [**The PEASS Family**](https://opensea.io/collection/the-peass-family), na코u kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* **Pridru쬴te se** 游눫 [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili nas **pratite** na **Twitter-u** 游냕 [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Podelite svoje hakovanje trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>

Proverite dodatne detalje na [**https://blog.doyensec.com/2023/01/10/imagemagick-security-policy-evaluator.html**](https://blog.doyensec.com/2023/01/10/imagemagick-security-policy-evaluator.html)

ImageMagick, svestrana biblioteka za obradu slika, predstavlja izazov u konfigurisanju svoje bezbednosne politike zbog svojih brojnih opcija i nedostatka detaljne online dokumentacije. Korisnici 캜esto kreiraju politike na osnovu fragmentiranih internet izvora, 코to mo쬰 dovesti do potencijalnih gre코aka u konfiguraciji. Biblioteka podr쬬va veliki broj od preko 100 formata slika, 코to doprinosi njenoj kompleksnosti i profilu ranjivosti, kao 코to su pokazali istorijski bezbednosni incidenti.

## Ka bezbednijim politikama
Da bi se re코ili ovi izazovi, [razvijen je alat](https://imagemagick-secevaluator.doyensec.com/) koji poma쬰 u dizajniranju i proveri bezbednosnih politika ImageMagick-a. Ovaj alat se temelji na obimnom istra쬴vanju i ima za cilj da osigura da politike budu ne samo robusne, ve캖 i bez propusta koji bi mogli biti iskori코캖eni.

## Pristup dozvoljenih i zabranjenih stavki
Istoriski, ImageMagick politike su se oslanjale na pristup zabranjenih stavki, gde su odre캠eni kodovi bili zabranjeni. Me캠utim, promene u ImageMagick 6.9.7-7 su promenile ovaj paradigmu, omogu캖avaju캖i pristup dozvoljenih stavki. Ovaj pristup prvo zabranjuje sve kodere, a zatim selektivno omogu캖ava pristup pouzdanim, pobolj코avaju캖i bezbednost.
```xml
...
<policy domain="coder" rights="none" pattern="*" />
<policy domain="coder" rights="read | write" pattern="{GIF,JPEG,PNG,WEBP}" />
...
```
## Case Sensitivity in Policies
Va쬹o je napomenuti da su obrasci politika u ImageMagicku osetljivi na velika i mala slova. Stoga je od vitalnog zna캜aja da se kodovi i moduli pravilno koriste velikim slovima u politikama kako bi se spre캜ile ne쬰ljene dozvole.

## Ograni캜enja resursa
ImageMagick je podlo쬬n napadima uskra캖ivanja usluge ako nije pravilno konfigurisan. Postavljanje eksplicitnih ograni캜enja resursa u politici je klju캜no kako bi se spre캜ile takve ranjivosti.

## Fragmentacija politika
Politike mogu biti fragmentirane na razli캜itim instalacijama ImageMagicka, 코to mo쬰 dovesti do potencijalnih konflikata ili prebrisavanja. Preporu캜uje se pronala쬰nje i provera aktivnih datoteka politika kori코캖enjem komandi poput:
```shell
$ find / -iname policy.xml
```
## Po캜etna, restriktivna politika
Predlo쬰n je 코ablon restriktivne politike koji se fokusira na stroge ograni캜enja resursa i kontrolu pristupa. Ovaj 코ablon slu쬴 kao osnova za razvoj prilago캠enih politika koje se uskla캠uju sa specifi캜nim zahtevima aplikacije.

Efektivnost sigurnosne politike mo쬰 se potvrditi kori코캖enjem komande `identify -list policy` u ImageMagick-u. Dodatno, alat [evaluator](https://imagemagick-secevaluator.doyensec.com/) koji je ranije pomenut mo쬰 se koristiti za usavr코avanje politike na osnovu individualnih potreba.

## Reference
* [https://blog.doyensec.com/2023/01/10/imagemagick-security-policy-evaluator.html**](https://blog.doyensec.com/2023/01/10/imagemagick-security-policy-evaluator.html)



<details>

<summary><strong>Nau캜ite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Drugi na캜ini podr코ke HackTricks-u:

* Ako 쬰lite da vidite **va코u kompaniju ogla코enu na HackTricks-u** ili **preuzmete HackTricks u PDF formatu**, proverite [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Nabavite [**zvani캜ni PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Otkrijte [**The PEASS Family**](https://opensea.io/collection/the-peass-family), na코u kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* **Pridru쬴te se** 游눫 [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili nas **pratite** na **Twitter-u** 游냕 [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Podelite svoje hakovanje trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>
