# Jira & Confluence

{% hint style="success" %}
å­¦ä¹ ä¸å®è·µ AWS é»‘å®¢æŠ€æœ¯ï¼š<img src="../../.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks åŸ¹è®­ AWS çº¢é˜Ÿä¸“å®¶ (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/arte.png" alt="" data-size="line">\
å­¦ä¹ ä¸å®è·µ GCP é»‘å®¢æŠ€æœ¯ï¼š<img src="../../.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks åŸ¹è®­ GCP çº¢é˜Ÿä¸“å®¶ (GRTE)**<img src="../../.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>æ”¯æŒ HackTricks</summary>

* æŸ¥çœ‹ [**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**Telegram ç¾¤ç»„**](https://t.me/peass) æˆ– **åœ¨ Twitter ä¸Šå…³æ³¨** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub ä»“åº“æäº¤ PR åˆ†äº«é»‘å®¢æŠ€å·§ã€‚

</details>
{% endhint %}

<figure><img src="../../.gitbook/assets/image (1) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

å¦‚æœä½ å¯¹ **é»‘å®¢èŒä¸š** æ„Ÿå…´è¶£å¹¶æƒ³è¦æ”»å…‹ä¸å¯æ”»å…‹çš„ç›®æ ‡ - **æˆ‘ä»¬æ­£åœ¨æ‹›è˜ï¼** (_éœ€è¦æµåˆ©çš„æ³¢å…°è¯­ä¹¦å†™å’Œå£è¯­èƒ½åŠ›_).

{% embed url="https://www.stmcyber.com/careers" %}

## æ£€æŸ¥æƒé™

åœ¨ Jira ä¸­ï¼Œ**ä»»ä½•ç”¨æˆ·éƒ½å¯ä»¥æ£€æŸ¥æƒé™**ï¼Œæ— è®ºæ˜¯å¦ç»è¿‡èº«ä»½éªŒè¯ï¼Œé€šè¿‡ç«¯ç‚¹ `/rest/api/2/mypermissions` æˆ– `/rest/api/3/mypermissions`ã€‚è¿™äº›ç«¯ç‚¹æ­ç¤ºäº†ç”¨æˆ·å½“å‰çš„æƒé™ã€‚å½“ **æœªç»è¿‡èº«ä»½éªŒè¯çš„ç”¨æˆ·æ‹¥æœ‰æƒé™** æ—¶ï¼Œå‡ºç°äº†ä¸€ä¸ªæ˜¾è‘—çš„æ‹…å¿§ï¼Œè¿™è¡¨æ˜å­˜åœ¨ **å®‰å…¨æ¼æ´**ï¼Œå¯èƒ½æœ‰èµ„æ ¼è·å¾— **èµé‡‘**ã€‚åŒæ ·ï¼Œ**ç»è¿‡èº«ä»½éªŒè¯çš„ç”¨æˆ·çš„æ„å¤–æƒé™** ä¹Ÿçªæ˜¾äº†ä¸€ä¸ª **æ¼æ´**ã€‚

åœ¨ **2019å¹´2æœˆ1æ—¥** è¿›è¡Œäº†é‡è¦çš„ **æ›´æ–°**ï¼Œè¦æ±‚ 'mypermissions' ç«¯ç‚¹åŒ…å« **'permission' å‚æ•°**ã€‚æ­¤è¦æ±‚æ—¨åœ¨é€šè¿‡æŒ‡å®šæŸ¥è¯¢çš„æƒé™æ¥ **å¢å¼ºå®‰å…¨æ€§**ï¼š [åœ¨è¿™é‡ŒæŸ¥çœ‹](https://developer.atlassian.com/cloud/jira/platform/change-notice-get-my-permissions-requires-permissions-query-parameter/#change-notice---get-my-permissions-resource-will-require-a-permissions-query-parameter)

* ADD\_COMMENTS
* ADMINISTER
* ADMINISTER\_PROJECTS
* ASSIGNABLE\_USER
* ASSIGN\_ISSUES
* BROWSE\_PROJECTS
* BULK\_CHANGE
* CLOSE\_ISSUES
* CREATE\_ATTACHMENTS
* CREATE\_ISSUES
* CREATE\_PROJECT
* CREATE\_SHARED\_OBJECTS
* DELETE\_ALL\_ATTACHMENTS
* DELETE\_ALL\_COMMENTS
* DELETE\_ALL\_WORKLOGS
* DELETE\_ISSUES
* DELETE\_OWN\_ATTACHMENTS
* DELETE\_OWN\_COMMENTS
* DELETE\_OWN\_WORKLOGS
* EDIT\_ALL\_COMMENTS
* EDIT\_ALL\_WORKLOGS
* EDIT\_ISSUES
* EDIT\_OWN\_COMMENTS
* EDIT\_OWN\_WORKLOGS
* LINK\_ISSUES
* MANAGE\_GROUP\_FILTER\_SUBSCRIPTIONS
* MANAGE\_SPRINTS\_PERMISSION
* MANAGE\_WATCHERS
* MODIFY\_REPORTER
* MOVE\_ISSUES
* RESOLVE\_ISSUES
* SCHEDULE\_ISSUES
* SET\_ISSUE\_SECURITY
* SYSTEM\_ADMIN
* TRANSITION\_ISSUES
* USER\_PICKER
* VIEW\_AGGREGATED\_DATA
* VIEW\_DEV\_TOOLS
* VIEW\_READONLY\_WORKFLOW
* VIEW\_VOTERS\_AND\_WATCHERS
* WORK\_ON\_ISSUES

ç¤ºä¾‹ï¼š `https://your-domain.atlassian.net/rest/api/2/mypermissions?permissions=BROWSE_PROJECTS,CREATE_ISSUES,ADMINISTER_PROJECTS`
```bash
#Check non-authenticated privileges
curl https://jira.some.example.com/rest/api/2/mypermissions | jq | grep -iB6 '"havePermission": true'
```
## è‡ªåŠ¨æšä¸¾

* [https://github.com/0x48piraj/Jiraffe](https://github.com/0x48piraj/Jiraffe)
* [https://github.com/bcoles/jira\_scan](https://github.com/bcoles/jira\_scan)

## Atlasian æ’ä»¶

å¦‚åœ¨æ­¤ [**åšå®¢**](https://cyllective.com/blog/posts/atlassian-audit-plugins) ä¸­æ‰€ç¤ºï¼Œåœ¨å…³äº [æ’ä»¶æ¨¡å— â†—](https://developer.atlassian.com/server/framework/atlassian-sdk/plugin-modules/) çš„æ–‡æ¡£ä¸­ï¼Œå¯ä»¥æ£€æŸ¥ä¸åŒç±»å‹çš„æ’ä»¶ï¼Œä¾‹å¦‚ï¼š

* [REST æ’ä»¶æ¨¡å— â†—](https://developer.atlassian.com/server/framework/atlassian-sdk/rest-plugin-module): æš´éœ² RESTful API ç«¯ç‚¹
* [Servlet æ’ä»¶æ¨¡å— â†—](https://developer.atlassian.com/server/framework/atlassian-sdk/servlet-plugin-module/): å°† Java servlets éƒ¨ç½²ä¸ºæ’ä»¶çš„ä¸€éƒ¨åˆ†
* [å®æ’ä»¶æ¨¡å— â†—](https://developer.atlassian.com/server/confluence/macro-module/): å®ç° Confluence å®ï¼Œå³å‚æ•°åŒ–çš„ HTML æ¨¡æ¿

è¿™æ˜¯å®æ’ä»¶ç±»å‹çš„ä¸€ä¸ªç¤ºä¾‹ï¼š
```java
package com.atlassian.tutorial.macro;

import com.atlassian.confluence.content.render.xhtml.ConversionContext;
import com.atlassian.confluence.macro.Macro;
import com.atlassian.confluence.macro.MacroExecutionException;

import java.util.Map;

public class helloworld implements Macro {

public String execute(Map<String, String> map, String body, ConversionContext conversionContext) throws MacroExecutionException {
if (map.get("Name") != null) {
return ("<h1>Hello " + map.get("Name") + "!</h1>");
} else {
return "<h1>Hello World!<h1>";
}
}

public BodyType getBodyType() { return BodyType.NONE; }

public OutputType getOutputType() { return OutputType.BLOCK; }
}
```
å¯ä»¥è§‚å¯Ÿåˆ°ï¼Œè¿™äº›æ’ä»¶å¯èƒ½å®¹æ˜“å—åˆ°å¸¸è§çš„ç½‘ç»œæ¼æ´ï¼Œå¦‚XSSã€‚ä¾‹å¦‚ï¼Œå‰é¢çš„ä¾‹å­æ˜¯è„†å¼±çš„ï¼Œå› ä¸ºå®ƒåå°„äº†ç”¨æˆ·æä¾›çš„æ•°æ®ã€‚&#x20;

ä¸€æ—¦å‘ç°XSSï¼Œåœ¨[**è¿™ä¸ªgithubä»“åº“**](https://github.com/cyllective/XSS-Payloads/tree/main/Confluence)ä¸­å¯ä»¥æ‰¾åˆ°ä¸€äº›æœ‰æ•ˆè½½è·ï¼Œä»¥å¢åŠ XSSçš„å½±å“ã€‚

## åé—¨æ’ä»¶

[**è¿™ç¯‡æ–‡ç« **](https://cyllective.com/blog/posts/atlassian-malicious-plugin)æè¿°äº†æ¶æ„Jiraæ’ä»¶å¯èƒ½æ‰§è¡Œçš„ä¸åŒï¼ˆæ¶æ„ï¼‰æ“ä½œã€‚ä½ å¯ä»¥åœ¨[**è¿™ä¸ªä»“åº“ä¸­æ‰¾åˆ°ä»£ç ç¤ºä¾‹**](https://github.com/cyllective/malfluence)ã€‚

ä»¥ä¸‹æ˜¯æ¶æ„æ’ä»¶å¯èƒ½æ‰§è¡Œçš„ä¸€äº›æ“ä½œï¼š

* **éšè—ç®¡ç†å‘˜çš„æ’ä»¶**ï¼šå¯ä»¥é€šè¿‡æ³¨å…¥ä¸€äº›å‰ç«¯JavaScriptæ¥éšè—æ¶æ„æ’ä»¶ã€‚
* **æå–é™„ä»¶å’Œé¡µé¢**ï¼šå…è®¸è®¿é—®å’Œæå–æ‰€æœ‰æ•°æ®ã€‚
* **çªƒå–ä¼šè¯ä»¤ç‰Œ**ï¼šæ·»åŠ ä¸€ä¸ªç«¯ç‚¹ï¼Œå°†åœ¨å“åº”ä¸­å›æ˜¾å¤´éƒ¨ï¼ˆåŒ…æ‹¬cookieï¼‰ï¼Œå¹¶æ·»åŠ ä¸€äº›JavaScriptæ¥è”ç³»å®ƒå¹¶æ³„éœ²cookieã€‚
* **å‘½ä»¤æ‰§è¡Œ**ï¼šå½“ç„¶å¯ä»¥åˆ›å»ºä¸€ä¸ªæ‰§è¡Œä»£ç çš„æ’ä»¶ã€‚
* **åå‘Shell**ï¼šæˆ–è€…è·å–ä¸€ä¸ªåå‘Shellã€‚
* **DOMä»£ç†**ï¼šå¦‚æœConfluenceåœ¨ç§æœ‰ç½‘ç»œå†…ï¼Œå¯ä»¥é€šè¿‡æŸä¸ªæœ‰è®¿é—®æƒé™çš„ç”¨æˆ·çš„æµè§ˆå™¨å»ºç«‹è¿æ¥ï¼Œä¾‹å¦‚é€šè¿‡å®ƒè”ç³»æœåŠ¡å™¨æ‰§è¡Œå‘½ä»¤ã€‚

<figure><img src="../../.gitbook/assets/image (1) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

å¦‚æœä½ å¯¹**é»‘å®¢èŒä¸š**æ„Ÿå…´è¶£å¹¶æƒ³è¦æ”»å…‹ä¸å¯æ”»å…‹çš„ç›®æ ‡ - **æˆ‘ä»¬æ­£åœ¨æ‹›è˜ï¼**ï¼ˆ_éœ€è¦æµåˆ©çš„æ³¢å…°è¯­ä¹¦å†™å’Œå£è¯­èƒ½åŠ›_ï¼‰ã€‚

{% embed url="https://www.stmcyber.com/careers" %}

{% hint style="success" %}
å­¦ä¹ å’Œå®è·µAWSé»‘å®¢æŠ€æœ¯ï¼š<img src="../../.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricksåŸ¹è®­AWSçº¢é˜Ÿä¸“å®¶ï¼ˆARTEï¼‰**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/arte.png" alt="" data-size="line">\
å­¦ä¹ å’Œå®è·µGCPé»‘å®¢æŠ€æœ¯ï¼š<img src="../../.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricksåŸ¹è®­GCPçº¢é˜Ÿä¸“å®¶ï¼ˆGRTEï¼‰**<img src="../../.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>æ”¯æŒHackTricks</summary>

* æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* **åŠ å…¥** ğŸ’¬ [**Discordç¾¤ç»„**](https://discord.gg/hRep4RUj7f)æˆ–[**ç”µæŠ¥ç¾¤ç»„**](https://t.me/peass)æˆ–**åœ¨** **Twitter** ğŸ¦ **ä¸Šå…³æ³¨æˆ‘ä»¬** [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks)å’Œ[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHubä»“åº“æäº¤PRæ¥åˆ†äº«é»‘å®¢æŠ€å·§ã€‚

</details>
{% endhint %}
