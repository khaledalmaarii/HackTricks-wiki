# WebDav

<figure><img src="../../.gitbook/assets/image (3) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

\
Koristite [**Trickest**](https://trickest.com/?utm\_campaign=hacktrics\&utm\_medium=banner\&utm\_source=hacktricks) da biste lako izgradili i **automatizovali radne tokove** podr쬬ne najnaprednijim alatima zajednice.\
Dobijte pristup danas:

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

<details>

<summary><strong>Nau캜ite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Drugi na캜ini podr코ke HackTricks:

* Ako 쬰lite da vidite **ogla코avanje va코e kompanije u HackTricks-u** ili **preuzmete HackTricks u PDF formatu** proverite [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Nabavite [**zvani캜ni PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Otkrijte [**The PEASS Family**](https://opensea.io/collection/the-peass-family), na코u kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* **Pridru쬴te se** 游눫 [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili nas **pratite** na **Twitter-u** 游냕 [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Podelite svoje hakovanje trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>

Kada se bavite **HTTP serverom sa omogu캖enim WebDav-om**, mogu캖e je **manipulisati fajlovima** ako imate **odgovaraju캖e akreditive**, obi캜no proverene putem **HTTP Basic Authentication**-a. Dobijanje kontrole nad takvim serverom 캜esto uklju캜uje **upload i izvr코avanje webshell-a**.

Pristup WebDav serveru obi캜no zahteva **validne akreditive**, pri 캜emu je [**WebDav bruteforce**](../../generic-methodologies-and-resources/brute-force.md#http-basic-auth) 캜est metod za njihovo dobijanje.

Da biste prevazi코li ograni캜enja u vezi sa upload-om fajlova, posebno ona koja spre캜avaju izvr코avanje server-side skripti, mo쬰te:

- **Upload-ovati** fajlove sa **izvr코nim ekstenzijama** direktno ako nisu ograni캜eni.
- **Preimenovati** upload-ovane neizvr코ne fajlove (kao 코to su .txt) u izvr코nu ekstenziju.
- **Kopirati** upload-ovane neizvr코ne fajlove, menjaju캖i njihovu ekstenziju u izvr코nu.

## DavTest

**Davtest** poku코ava **upload-ovati nekoliko fajlova sa razli캜itim ekstenzijama** i **proverava** da li se ekstenzija **izvr코ava**:
```bash
davtest [-auth user:password] -move -sendbd auto -url http://<IP> #Uplaod .txt files and try to move it to other extensions
davtest [-auth user:password] -sendbd auto -url http://<IP> #Try to upload every extension
```
Isto to ne zna캜i da se **.txt** i **.html ekstenzije izvr코avaju**. To zna캜i da mo쬰te **pristupiti ovim datotekama** putem weba.

## Cadaver

Mo쬰te koristiti ovaj alat da se **pove쬰te na WebDav** server i izvr코ite radnje (poput **upload-a**, **premje코tanja** ili **brisanja**) **ru캜no**.
```
cadaver <IP>
```
## PUT zahtev

---

## Description

---

## Opis

The PUT method is used to update or create a resource on the server. It sends the data in the request body to the specified URI. If the resource already exists, it will be updated with the new data. If the resource does not exist, a new resource will be created with the provided data.

---

PUT metoda se koristi za a쬿riranje ili kreiranje resursa na serveru. Ona 코alje podatke u telu zahteva na odre캠eni URI. Ako resurs ve캖 postoji, bi캖e a쬿riran novim podacima. Ako resurs ne postoji, bi캖e kreiran novi resurs sa pru쬰nim podacima.

---

## Syntax

---

## Sintaksa

```http
PUT /path/to/resource HTTP/1.1
Host: example.com
Content-Type: application/json

{
  "key": "value"
}
```

---

```http
PUT /putanja/do/resursa HTTP/1.1
Host: primer.com
Content-Type: application/json

{
  "klju캜": "vrednost"
}
```

---

## Example

---

## Primer

```http
PUT /api/users/1 HTTP/1.1
Host: example.com
Content-Type: application/json

{
  "name": "John Doe",
  "email": "johndoe@example.com"
}
```

---

```http
PUT /api/korisnici/1 HTTP/1.1
Host: primer.com
Content-Type: application/json

{
  "ime": "John Doe",
  "email": "johndoe@primer.com"
}
```

---

In this example, a PUT request is made to update the user with ID 1. The request body contains the updated name and email of the user.

---

U ovom primeru, PUT zahtev je poslat da a쬿rira korisnika sa ID-jem 1. Telo zahteva sadr쬴 a쬿rirano ime i email korisnika.
```
curl -T 'shell.txt' 'http://$ip'
```
## MOVE zahtev

The MOVE method is used in WebDAV to move a resource from one location to another. It is similar to the HTTP PUT method, but instead of creating a new resource, it moves an existing resource to a new location.

MOVE zahtev se koristi u WebDAV-u da bi se premestio resurs sa jedne lokacije na drugu. Sli캜an je HTTP PUT metodi, ali umesto da kreira novi resurs, premesta postoje캖i resurs na novu lokaciju.
```
curl -X MOVE --header 'Destination:http://$ip/shell.php' 'http://$ip/shell.txt'
```
<figure><img src="../../.gitbook/assets/image (3) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

\
Koristite [**Trickest**](https://trickest.com/?utm\_campaign=hacktrics\&utm\_medium=banner\&utm\_source=hacktricks) da biste lako izgradili i **automatizovali radne tokove** koji se pokre캖u najnaprednijim alatima zajednice.\
Dobijte pristup danas:

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

## IIS5/6 WebDav ranjivost

Ova ranjivost je veoma interesantna. **WebDav** ne dozvoljava **upload** ili **preimenovanje** fajlova sa ekstenzijom **.asp**. Ali mo쬰te to **zaobi캖i** dodavanjem na kraju imena **";.txt"** i fajl 캖e biti **izvr코en** kao da je .asp fajl (tako캠e mo쬰te **koristiti ".html" umesto ".txt"** ali **NE zaboravite ";"**).

Zatim mo쬰te **uploadovati** svoj shell kao ".**txt" fajl** i **kopirati/pomeriti ga u ".asp;.txt"** fajl. Pristupaju캖i tom fajlu preko web servera, on 캖e biti **izvr코en** (cadaver 캖e re캖i da akcija pomeranja nije uspela, ali jeste).

![](<../../.gitbook/assets/image (18) (1) (1).png>)

## Post credentials

Ako je Webdav koristio Apache server, trebali biste pogledati konfigurisane sajtove u Apache-u. Obi캜no:\
_**/etc/apache2/sites-enabled/000-default**_

Unutar toga mo쬰te prona캖i ne코to sli캜no:
```
ServerAdmin webmaster@localhost
Alias /webdav /var/www/webdav
<Directory /var/www/webdav>
DAV On
AuthType Digest
AuthName "webdav"
AuthUserFile /etc/apache2/users.password
Require valid-user
```
Kao 코to mo쬰te videti, postoje datoteke sa validnim **poverljivim podacima** za **webdav** server:
```
/etc/apache2/users.password
```
Unutar ovog tipa datoteka 캖ete prona캖i **korisni캜ko ime** i **hash** lozinke. Ovo su podaci za prijavu koje webdav server koristi za autentifikaciju korisnika.

Mo쬰te poku코ati ih **provaliti**, ili **dodati vi코e** ako iz nekog razloga 쬰lite **pristupiti** webdav serveru:
```bash
htpasswd /etc/apache2/users.password <USERNAME> #You will be prompted for the password
```
Da biste proverili da li novi pristupni podaci funkcioni코u, mo쬰te uraditi slede캖e:
```bash
wget --user <USERNAME> --ask-password http://domain/path/to/webdav/ -O - -q
```
## Reference
* [https://vk9-sec.com/exploiting-webdav/](https://vk9-sec.com/exploiting-webdav/)

<details>

<summary><strong>Nau캜ite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Drugi na캜ini podr코ke HackTricks-u:

* Ako 쬰lite da vidite **va코u kompaniju reklamiranu na HackTricks-u** ili **preuzmete HackTricks u PDF formatu** proverite [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Nabavite [**zvani캜ni PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Otkrijte [**The PEASS Family**](https://opensea.io/collection/the-peass-family), na코u kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* **Pridru쬴te se** 游눫 [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili nas **pratite** na **Twitter-u** 游냕 [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Podelite svoje hakovanje trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>

<figure><img src="../../.gitbook/assets/image (3) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

\
Koristite [**Trickest**](https://trickest.com/?utm\_campaign=hacktrics\&utm\_medium=banner\&utm\_source=hacktricks) da lako izgradite i **automatizujete radne tokove** pokretane najnaprednijim alatima zajednice.\
Dobijte pristup danas:

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}
