# WebDav

<figure><img src="../../.gitbook/assets/image (3) (1) (1).png" alt=""><figcaption></figcaption></figure>

\
ä½¿ç”¨[**Trickest**](https://trickest.com/?utm\_campaign=hacktrics\&utm\_medium=banner\&utm\_source=hacktricks)å¯ä»¥è½»æ¾æ„å»ºå’Œè‡ªåŠ¨åŒ–ç”±å…¨çƒæœ€å…ˆè¿›çš„ç¤¾åŒºå·¥å…·æä¾›æ”¯æŒçš„å·¥ä½œæµç¨‹ã€‚\
ç«‹å³è·å–è®¿é—®æƒé™ï¼š

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>â˜ï¸ HackTricks Cloud â˜ï¸</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ğŸ¦ Twitter ğŸ¦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ğŸ™ï¸ Twitch ğŸ™ï¸</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ğŸ¥ Youtube ğŸ¥</strong></a></summary>

* ä½ åœ¨ä¸€å®¶**ç½‘ç»œå®‰å…¨å…¬å¸**å·¥ä½œå—ï¼Ÿä½ æƒ³åœ¨HackTricksä¸­çœ‹åˆ°ä½ çš„**å…¬å¸å¹¿å‘Š**å—ï¼Ÿæˆ–è€…ä½ æƒ³è¦**è·å–PEASSçš„æœ€æ–°ç‰ˆæœ¬æˆ–ä¸‹è½½PDFæ ¼å¼çš„HackTricks**å—ï¼Ÿè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼
* å‘ç°æˆ‘ä»¬çš„ç‹¬å®¶[**NFTs**](https://opensea.io/collection/the-peass-family)æ”¶è—å“[**The PEASS Family**](https://opensea.io/collection/the-peass-family)
* è·å–[**å®˜æ–¹PEASSå’ŒHackTrickså‘¨è¾¹äº§å“**](https://peass.creator-spring.com)
* **åŠ å…¥**[**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discordç¾¤ç»„**](https://discord.gg/hRep4RUj7f)æˆ–[**ç”µæŠ¥ç¾¤ç»„**](https://t.me/peass)ï¼Œæˆ–è€…**å…³æ³¨**æˆ‘åœ¨**Twitter**ä¸Šçš„[**ğŸ¦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks\_live)**ã€‚**
* **é€šè¿‡å‘**[**hacktricks repo**](https://github.com/carlospolop/hacktricks) **å’Œ**[**hacktricks-cloud repo**](https://github.com/carlospolop/hacktricks-cloud) **æäº¤PRæ¥åˆ†äº«ä½ çš„é»‘å®¢æŠ€å·§ã€‚**

</details>

ä¸€ä¸ªå¯ç”¨äº†WebDavçš„HTTPæœåŠ¡å™¨å¯èƒ½å…è®¸ä½ **æ›´æ–°ã€åˆ é™¤ã€ç§»åŠ¨ã€å¤åˆ¶**æ–‡ä»¶ã€‚æœ‰æ—¶å€™ä½ éœ€è¦æœ‰**æœ‰æ•ˆçš„å‡­è¯**ï¼ˆé€šå¸¸ä½¿ç”¨HTTPåŸºæœ¬èº«ä»½éªŒè¯è¿›è¡Œæ£€æŸ¥ï¼‰ã€‚

ä½ åº”è¯¥å°è¯•**ä¸Šä¼ **ä¸€äº›**webshell**å¹¶ä»WebæœåŠ¡å™¨ä¸Š**æ‰§è¡Œ**å®ƒï¼Œä»¥æ§åˆ¶æœåŠ¡å™¨ã€‚\
é€šå¸¸ï¼Œè¦**è¿æ¥**åˆ°WebDavæœåŠ¡å™¨ï¼Œä½ éœ€è¦æœ‰æ•ˆçš„**å‡­è¯**ï¼š[**WebDavæš´åŠ›ç ´è§£**](../../generic-methodologies-and-resources/brute-force.md#http-basic-auth) _(åŸºæœ¬èº«ä»½éªŒè¯)_ã€‚

å¦ä¸€ç§å¸¸è§çš„é…ç½®æ˜¯**ç¦æ­¢ä¸Šä¼ **ç”±WebæœåŠ¡å™¨**æ‰§è¡Œ**çš„æ–‡ä»¶æ‰©å±•åï¼Œä½ åº”è¯¥æ£€æŸ¥å¦‚ä½•**ç»•è¿‡æ­¤é™åˆ¶**ï¼š

* **ä¸Šä¼ **å…·æœ‰**å¯æ‰§è¡Œæ‰©å±•å**çš„æ–‡ä»¶ï¼ˆä¹Ÿè®¸ä¸è¢«ç¦æ­¢ï¼‰ã€‚
* **ä¸Šä¼ **æ²¡æœ‰**å¯æ‰§è¡Œæ‰©å±•å**çš„æ–‡ä»¶ï¼ˆå¦‚.txtï¼‰ï¼Œå¹¶å°è¯•ä½¿ç”¨**å¯æ‰§è¡Œæ‰©å±•å**é‡å‘½åï¼ˆç§»åŠ¨ï¼‰æ–‡ä»¶ã€‚
* **ä¸Šä¼ **æ²¡æœ‰**å¯æ‰§è¡Œæ‰©å±•å**çš„æ–‡ä»¶ï¼ˆå¦‚.txtï¼‰ï¼Œå¹¶å°è¯•ä½¿ç”¨**å¯æ‰§è¡Œæ‰©å±•å**å¤åˆ¶æ–‡ä»¶ã€‚

## DavTest

**Davtest**å°è¯•ä½¿ç”¨ä¸åŒçš„æ‰©å±•å**ä¸Šä¼ å¤šä¸ªæ–‡ä»¶**å¹¶**æ£€æŸ¥**æ‰©å±•åæ˜¯å¦è¢«**æ‰§è¡Œ**ï¼š
```bash
davtest [-auth user:password] -move -sendbd auto -url http://<IP> #Uplaod .txt files and try to move it to other extensions
davtest [-auth user:password] -sendbd auto -url http://<IP> #Try to upload every extension
```
è¾“å‡ºç¤ºä¾‹ï¼š

![](<../../.gitbook/assets/image (19) (1).png>)

è¿™å¹¶ä¸æ„å‘³ç€ **.txt** å’Œ **.html æ‰©å±•åè¢«æ‰§è¡Œ**ã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥é€šè¿‡ç½‘ç»œ **è®¿é—®è¿™äº›æ–‡ä»¶**ã€‚

## Cadaver

ä½ å¯ä»¥ä½¿ç”¨è¿™ä¸ªå·¥å…·æ¥ **è¿æ¥åˆ° WebDav** æœåŠ¡å™¨å¹¶ **æ‰‹åŠ¨æ‰§è¡Œ** æ“ä½œï¼ˆå¦‚ **ä¸Šä¼ **ã€**ç§»åŠ¨** æˆ– **åˆ é™¤**ï¼‰ã€‚
```
cadaver <IP>
```
## PUTè¯·æ±‚

The PUT method is used to update or create a resource on a server. It is commonly used in web development to upload files or modify existing resources. When performing a PUT request, the client sends the entire representation of the resource to the server, replacing the existing resource if it already exists.

PUTè¯·æ±‚ç”¨äºåœ¨æœåŠ¡å™¨ä¸Šæ›´æ–°æˆ–åˆ›å»ºèµ„æºã€‚å®ƒé€šå¸¸ç”¨äºWebå¼€å‘ä¸­ä¸Šä¼ æ–‡ä»¶æˆ–ä¿®æ”¹ç°æœ‰èµ„æºã€‚åœ¨æ‰§è¡ŒPUTè¯·æ±‚æ—¶ï¼Œå®¢æˆ·ç«¯å°†æ•´ä¸ªèµ„æºçš„è¡¨ç¤ºå‘é€åˆ°æœåŠ¡å™¨ï¼Œå¦‚æœèµ„æºå·²ç»å­˜åœ¨ï¼Œåˆ™æ›¿æ¢ç°æœ‰èµ„æºã€‚

### WebDAV and PUT

WebDAV (Web Distributed Authoring and Versioning) is an extension of the HTTP protocol that allows for more advanced file management operations. It includes support for the PUT method, among others.

WebDAVï¼ˆWebåˆ†å¸ƒå¼ä½œè€…å’Œç‰ˆæœ¬æ§åˆ¶ï¼‰æ˜¯HTTPåè®®çš„æ‰©å±•ï¼Œå…è®¸è¿›è¡Œæ›´é«˜çº§çš„æ–‡ä»¶ç®¡ç†æ“ä½œã€‚å®ƒåŒ…æ‹¬å¯¹PUTæ–¹æ³•çš„æ”¯æŒï¼Œä»¥åŠå…¶ä»–æ–¹æ³•ã€‚

### PUT Method and Web Application Security

From a security perspective, the PUT method can introduce vulnerabilities if not properly implemented. For example, if the server does not validate the input or restrict the file types that can be uploaded, it may be possible for an attacker to upload malicious files or overwrite existing files.

ä»å®‰å…¨è§’åº¦æ¥çœ‹ï¼Œå¦‚æœæ²¡æœ‰æ­£ç¡®å®ç°ï¼ŒPUTæ–¹æ³•å¯èƒ½ä¼šå¼•å…¥æ¼æ´ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæœåŠ¡å™¨ä¸éªŒè¯è¾“å…¥æˆ–é™åˆ¶å¯ä»¥ä¸Šä¼ çš„æ–‡ä»¶ç±»å‹ï¼Œæ”»å‡»è€…å¯èƒ½ä¼šä¸Šä¼ æ¶æ„æ–‡ä»¶æˆ–è¦†ç›–ç°æœ‰æ–‡ä»¶ã€‚

### Testing for PUT Method Vulnerabilities

During a web application penetration test, it is important to test for vulnerabilities related to the PUT method. This can include checking for unrestricted file uploads, improper input validation, and insecure file permissions.

åœ¨Webåº”ç”¨ç¨‹åºæ¸—é€æµ‹è¯•æœŸé—´ï¼Œé‡è¦çš„æ˜¯æµ‹è¯•ä¸PUTæ–¹æ³•ç›¸å…³çš„æ¼æ´ã€‚è¿™å¯ä»¥åŒ…æ‹¬æ£€æŸ¥æ— é™åˆ¶çš„æ–‡ä»¶ä¸Šä¼ ã€ä¸æ­£ç¡®çš„è¾“å…¥éªŒè¯å’Œä¸å®‰å…¨çš„æ–‡ä»¶æƒé™ã€‚

### Conclusion

The PUT method is a powerful tool for updating or creating resources on a server. However, it can also introduce security vulnerabilities if not implemented correctly. It is important to thoroughly test for vulnerabilities related to the PUT method during a web application penetration test.
```
curl -T 'shell.txt' 'http://$ip'
```
## MOVE è¯·æ±‚

The MOVE request is used in WebDAV to move a resource from one location to another. It is similar to the HTTP PUT method, but instead of creating a new resource, it moves an existing resource to a new location.

MOVE è¯·æ±‚åœ¨ WebDAV ä¸­ç”¨äºå°†èµ„æºä»ä¸€ä¸ªä½ç½®ç§»åŠ¨åˆ°å¦ä¸€ä¸ªä½ç½®ã€‚å®ƒç±»ä¼¼äº HTTP PUT æ–¹æ³•ï¼Œä½†ä¸æ˜¯åˆ›å»ºæ–°èµ„æºï¼Œè€Œæ˜¯å°†ç°æœ‰èµ„æºç§»åŠ¨åˆ°æ–°ä½ç½®ã€‚

### Syntax

The syntax of the MOVE request is as follows:

```
MOVE /source-resource HTTP/1.1
Host: example.com
Destination: /destination-resource
```

### Example

Here is an example of a MOVE request:

```
MOVE /file.txt HTTP/1.1
Host: example.com
Destination: /new-folder/file.txt
```

In this example, the file.txt resource is moved from the root directory to the new-folder directory.

### Response

The server responds to the MOVE request with a status code indicating the success or failure of the operation. If the move is successful, the server will return a 201 Created status code. If the move fails, the server will return an appropriate error status code, such as 403 Forbidden or 404 Not Found.

### Security Considerations

When performing a MOVE request, it is important to consider the security implications. Moving a resource can have unintended consequences, such as breaking links or causing data loss. It is recommended to thoroughly test the MOVE operation in a controlled environment before performing it on a production system.

### Conclusion

The MOVE request is a powerful method in WebDAV that allows for the movement of resources within a server. It is important to use this method with caution and thoroughly test it to avoid any unintended consequences.
```
curl -X MOVE --header 'Destination:http://$ip/shell.php' 'http://$ip/shell.txt'
```
<figure><img src="../../.gitbook/assets/image (3) (1) (1).png" alt=""><figcaption></figcaption></figure>

\
ä½¿ç”¨[**Trickest**](https://trickest.com/?utm\_campaign=hacktrics\&utm\_medium=banner\&utm\_source=hacktricks)å¯ä»¥è½»æ¾æ„å»ºå’Œè‡ªåŠ¨åŒ–ç”±å…¨çƒæœ€å…ˆè¿›çš„ç¤¾åŒºå·¥å…·æä¾›æ”¯æŒçš„å·¥ä½œæµç¨‹ã€‚\
ç«‹å³è·å–è®¿é—®æƒé™ï¼š

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

## IIS5/6 WebDavæ¼æ´

è¿™ä¸ªæ¼æ´éå¸¸æœ‰è¶£ã€‚**WebDav**ä¸å…è®¸ä¸Šä¼ æˆ–é‡å‘½åæ‰©å±•åä¸º**.asp**çš„æ–‡ä»¶ã€‚ä½†æ˜¯ï¼Œæ‚¨å¯ä»¥é€šè¿‡åœ¨åç§°æœ«å°¾æ·»åŠ **";.txt"**æ¥ç»•è¿‡æ­¤é™åˆ¶ï¼Œæ–‡ä»¶å°†è¢«æ‰§è¡Œï¼Œå°±åƒå®ƒæ˜¯ä¸€ä¸ª.aspæ–‡ä»¶ä¸€æ ·ï¼ˆæ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨".html"ä»£æ›¿".txt"ï¼Œä½†**ä¸è¦å¿˜è®°";"**ï¼‰ã€‚

ç„¶åï¼Œæ‚¨å¯ä»¥å°†æ‚¨çš„shellä¸Šä¼ ä¸º".**txtæ–‡ä»¶**ï¼Œå¹¶å°†å…¶å¤åˆ¶/ç§»åŠ¨åˆ°".asp;.txt"æ–‡ä»¶ä¸­ã€‚é€šè¿‡WebæœåŠ¡å™¨è®¿é—®è¯¥æ–‡ä»¶ï¼Œå®ƒå°†è¢«æ‰§è¡Œï¼ˆcadaverä¼šè¯´ç§»åŠ¨æ“ä½œå¤±è´¥ï¼Œä½†å®é™…ä¸Šæ˜¯æˆåŠŸçš„ï¼‰ã€‚

![](<../../.gitbook/assets/image (18) (1) (1).png>)

## æäº¤å‡­æ®

å¦‚æœWebdavä½¿ç”¨çš„æ˜¯ApacheæœåŠ¡å™¨ï¼Œåˆ™åº”æŸ¥çœ‹Apacheä¸­é…ç½®çš„ç«™ç‚¹ã€‚é€šå¸¸åœ¨ï¼š\
_**/etc/apache2/sites-enabled/000-default**_

åœ¨å…¶ä¸­ï¼Œæ‚¨å¯èƒ½ä¼šæ‰¾åˆ°ç±»ä¼¼ä»¥ä¸‹å†…å®¹çš„ä¸œè¥¿ï¼š
```
ServerAdmin webmaster@localhost
Alias /webdav /var/www/webdav
<Directory /var/www/webdav>
DAV On
AuthType Digest
AuthName "webdav"
AuthUserFile /etc/apache2/users.password
Require valid-user
```
æ­£å¦‚æ‚¨æ‰€çœ‹åˆ°çš„ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªåŒ…å«**WebDAV**æœåŠ¡å™¨çš„æœ‰æ•ˆ**å‡­æ®**çš„æ–‡ä»¶ï¼š
```
/etc/apache2/users.password
```
åœ¨è¿™ç±»æ–‡ä»¶ä¸­ï¼Œæ‚¨å°†æ‰¾åˆ°**ç”¨æˆ·å**å’Œ**å¯†ç çš„å“ˆå¸Œå€¼**ã€‚è¿™äº›æ˜¯WebDAVæœåŠ¡å™¨ç”¨äºéªŒè¯ç”¨æˆ·çš„å‡­æ®ã€‚

æ‚¨å¯ä»¥å°è¯•**ç ´è§£**å®ƒä»¬ï¼Œæˆ–è€…å¦‚æœå‡ºäºæŸç§åŸå› æ‚¨æƒ³è¦**è®¿é—®**WebDAVæœåŠ¡å™¨ï¼Œå¯ä»¥**æ·»åŠ æ›´å¤š**å‡­æ®ï¼š
```bash
htpasswd /etc/apache2/users.password <USERNAME> #You will be prompted for the password
```
è¦æ£€æŸ¥æ–°å‡­æ®æ˜¯å¦æœ‰æ•ˆï¼Œå¯ä»¥æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š
```bash
wget --user <USERNAME> --ask-password http://domain/path/to/webdav/ -O - -q
```
<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>â˜ï¸ HackTricksäº‘ â˜ï¸</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ğŸ¦ æ¨ç‰¹ ğŸ¦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ğŸ™ï¸ Twitch ğŸ™ï¸</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ğŸ¥ Youtube ğŸ¥</strong></a></summary>

* ä½ åœ¨ä¸€å®¶**ç½‘ç»œå®‰å…¨å…¬å¸**å·¥ä½œå—ï¼Ÿæƒ³è¦åœ¨HackTricksä¸­çœ‹åˆ°ä½ çš„**å…¬å¸å¹¿å‘Š**å—ï¼Ÿæˆ–è€…ä½ æƒ³è¦**è·å–PEASSçš„æœ€æ–°ç‰ˆæœ¬æˆ–ä¸‹è½½HackTricksçš„PDF**å—ï¼Ÿè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼
* å‘ç°æˆ‘ä»¬çš„ç‹¬å®¶[**NFTs**](https://opensea.io/collection/the-peass-family)æ”¶è—å“â€”â€”[**The PEASS Family**](https://opensea.io/collection/the-peass-family)
* è·å–[**å®˜æ–¹PEASSå’ŒHackTrickså‘¨è¾¹äº§å“**](https://peass.creator-spring.com)
* **åŠ å…¥**[**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discordç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ–è€… [**Telegramç¾¤ç»„**](https://t.me/peass)ï¼Œæˆ–è€…**å…³æ³¨**æˆ‘åœ¨**Twitter**ä¸Šçš„[**ğŸ¦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks\_live)**ã€‚**
* **é€šè¿‡å‘**[**hacktricks repo**](https://github.com/carlospolop/hacktricks) **å’Œ**[**hacktricks-cloud repo**](https://github.com/carlospolop/hacktricks-cloud) **æäº¤PRæ¥åˆ†äº«ä½ çš„é»‘å®¢æŠ€å·§ã€‚**

</details>

<figure><img src="../../.gitbook/assets/image (3) (1) (1).png" alt=""><figcaption></figcaption></figure>

\
ä½¿ç”¨[**Trickest**](https://trickest.com/?utm\_campaign=hacktrics\&utm\_medium=banner\&utm\_source=hacktricks)å¯ä»¥è½»æ¾æ„å»ºå’Œ**è‡ªåŠ¨åŒ–å·¥ä½œæµç¨‹**ï¼Œä½¿ç”¨å…¨çƒ**æœ€å…ˆè¿›çš„**ç¤¾åŒºå·¥å…·ã€‚\
ç«‹å³è·å–è®¿é—®æƒé™ï¼š

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}
