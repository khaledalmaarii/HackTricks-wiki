# Basic Tomcat Info

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

### ë£¨íŠ¸ë¡œ ì‹¤í–‰í•˜ì§€ ì•Šê¸°

Tomcatì„ ë£¨íŠ¸ë¡œ ì‹¤í–‰í•˜ì§€ ì•Šê¸° ìœ„í•´ ë§¤ìš° ì¼ë°˜ì ì¸ êµ¬ì„±ì€ í¬íŠ¸ 80/443ì—ì„œ Apache ì„œë²„ë¥¼ ì„¤ì •í•˜ê³ , ìš”ì²­ëœ ê²½ë¡œê°€ ì •ê·œ í‘œí˜„ì‹ê³¼ ì¼ì¹˜í•˜ëŠ” ê²½ìš° ìš”ì²­ì„ ë‹¤ë¥¸ í¬íŠ¸ì—ì„œ ì‹¤í–‰ ì¤‘ì¸ Tomcatìœ¼ë¡œ ì „ì†¡í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.

### ê¸°ë³¸ êµ¬ì¡°
```
â”œâ”€â”€ bin
â”œâ”€â”€ conf
â”‚   â”œâ”€â”€ catalina.policy
â”‚   â”œâ”€â”€ catalina.properties
â”‚   â”œâ”€â”€ context.xml
â”‚   â”œâ”€â”€ tomcat-users.xml
â”‚   â”œâ”€â”€ tomcat-users.xsd
â”‚   â””â”€â”€ web.xml
â”œâ”€â”€ lib
â”œâ”€â”€ logs
â”œâ”€â”€ temp
â”œâ”€â”€ webapps
â”‚   â”œâ”€â”€ manager
â”‚   â”‚   â”œâ”€â”€ images
â”‚   â”‚   â”œâ”€â”€ META-INF
â”‚   â”‚   â””â”€â”€ WEB-INF
|   |       â””â”€â”€ web.xml
â”‚   â””â”€â”€ ROOT
â”‚       â””â”€â”€ WEB-INF
â””â”€â”€ work
â””â”€â”€ Catalina
â””â”€â”€ localhost
```
* `bin` í´ë”ëŠ” Tomcat ì„œë²„ë¥¼ ì‹œì‘í•˜ê³  ì‹¤í–‰í•˜ëŠ” ë° í•„ìš”í•œ ìŠ¤í¬ë¦½íŠ¸ì™€ ë°”ì´ë„ˆë¦¬ë¥¼ ì €ì¥í•©ë‹ˆë‹¤.
* `conf` í´ë”ëŠ” Tomcatì—ì„œ ì‚¬ìš©í•˜ëŠ” ë‹¤ì–‘í•œ êµ¬ì„± íŒŒì¼ì„ ì €ì¥í•©ë‹ˆë‹¤.
* `tomcat-users.xml` íŒŒì¼ì€ ì‚¬ìš©ì ìê²© ì¦ëª…ê³¼ ê·¸ë“¤ì´ í• ë‹¹ëœ ì—­í• ì„ ì €ì¥í•©ë‹ˆë‹¤.
* `lib` í´ë”ëŠ” Tomcatì˜ ì˜¬ë°”ë¥¸ ê¸°ëŠ¥ì„ ìœ„í•´ í•„ìš”í•œ ë‹¤ì–‘í•œ JAR íŒŒì¼ì„ ë³´ê´€í•©ë‹ˆë‹¤.
* `logs` ë° `temp` í´ë”ëŠ” ì„ì‹œ ë¡œê·¸ íŒŒì¼ì„ ì €ì¥í•©ë‹ˆë‹¤.
* `webapps` í´ë”ëŠ” Tomcatì˜ ê¸°ë³¸ ì›¹ ë£¨íŠ¸ì´ë©° ëª¨ë“  ì• í”Œë¦¬ì¼€ì´ì…˜ì„ í˜¸ìŠ¤íŒ…í•©ë‹ˆë‹¤. `work` í´ë”ëŠ” ìºì‹œ ì—­í• ì„ í•˜ë©° ëŸ°íƒ€ì„ ë™ì•ˆ ë°ì´í„°ë¥¼ ì €ì¥í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤.

`webapps` ë‚´ì˜ ê° í´ë”ëŠ” ë‹¤ìŒ êµ¬ì¡°ë¥¼ ê°€ì§ˆ ê²ƒìœ¼ë¡œ ì˜ˆìƒë©ë‹ˆë‹¤.
```
webapps/customapp
â”œâ”€â”€ images
â”œâ”€â”€ index.jsp
â”œâ”€â”€ META-INF
â”‚   â””â”€â”€ context.xml
â”œâ”€â”€ status.xsd
â””â”€â”€ WEB-INF
â”œâ”€â”€ jsp
|   â””â”€â”€ admin.jsp
â””â”€â”€ web.xml
â””â”€â”€ lib
|    â””â”€â”€ jdbc_drivers.jar
â””â”€â”€ classes
â””â”€â”€ AdminServlet.class
```
ê°€ì¥ ì¤‘ìš”í•œ íŒŒì¼ì€ `WEB-INF/web.xml`ë¡œ, ë°°í¬ ì„¤ëª…ì„œë¡œ ì•Œë ¤ì ¸ ìˆìŠµë‹ˆë‹¤. ì´ íŒŒì¼ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì‚¬ìš©ë˜ëŠ” **ê²½ë¡œì— ëŒ€í•œ ì •ë³´**ì™€ ì´ëŸ¬í•œ ê²½ë¡œë¥¼ ì²˜ë¦¬í•˜ëŠ” í´ë˜ìŠ¤ë“¤ì„ ì €ì¥í•©ë‹ˆë‹¤.\
ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì‚¬ìš©ë˜ëŠ” ëª¨ë“  ì»´íŒŒì¼ëœ í´ë˜ìŠ¤ëŠ” `WEB-INF/classes` í´ë”ì— ì €ì¥ë˜ì–´ì•¼ í•©ë‹ˆë‹¤. ì´ í´ë˜ìŠ¤ë“¤ì€ ì¤‘ìš”í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ê³¼ ë¯¼ê°í•œ ì •ë³´ë¥¼ í¬í•¨í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ íŒŒì¼ì˜ ì·¨ì•½ì ì€ ì›¹ì‚¬ì´íŠ¸ì˜ ì™„ì „í•œ ì†ìƒìœ¼ë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. `lib` í´ë”ëŠ” í•´ë‹¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì— í•„ìš”í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì €ì¥í•©ë‹ˆë‹¤. `jsp` í´ë”ëŠ” [Jakarta Server Pages (JSP)](https://en.wikipedia.org/wiki/Jakarta\_Server\_Pages), ì´ì „ì— `JavaServer Pages`ë¡œ ì•Œë ¤ì¡Œë˜ íŒŒì¼ì„ ì €ì¥í•˜ë©°, ì´ëŠ” Apache ì„œë²„ì˜ PHP íŒŒì¼ê³¼ ë¹„êµí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì—¬ê¸° **web.xml** íŒŒì¼ì˜ ì˜ˆê°€ ìˆìŠµë‹ˆë‹¤.
```xml
<?xml version="1.0" encoding="ISO-8859-1"?>

<!DOCTYPE web-app PUBLIC "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN" "http://java.sun.com/dtd/web-app_2_3.dtd">

<web-app>
<servlet>
<servlet-name>AdminServlet</servlet-name>
<servlet-class>com.inlanefreight.api.AdminServlet</servlet-class>
</servlet>

<servlet-mapping>
<servlet-name>AdminServlet</servlet-name>
<url-pattern>/admin</url-pattern>
</servlet-mapping>
</web-app>
```
The `web.xml` êµ¬ì„±ì€ **`AdminServlet`**ì´ë¼ëŠ” **ìƒˆ ì„œë¸”ë¦¿**ì„ ì •ì˜í•˜ë©°, ì´ëŠ” **`com.inlanefreight.api.AdminServlet`** í´ë˜ìŠ¤ì— ë§¤í•‘ë©ë‹ˆë‹¤. JavaëŠ” ì  í‘œê¸°ë²•ì„ ì‚¬ìš©í•˜ì—¬ íŒ¨í‚¤ì§€ ì´ë¦„ì„ ìƒì„±í•˜ë¯€ë¡œ, ìœ„ì—ì„œ ì •ì˜ëœ í´ë˜ìŠ¤ì˜ ë””ìŠ¤í¬ ê²½ë¡œëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:

* **`classes/com/inlanefreight/api/AdminServlet.class`**

ë‹¤ìŒìœ¼ë¡œ, **`/admin`ì— ëŒ€í•œ ìš”ì²­ì„ `AdminServlet`**ìœ¼ë¡œ ë§¤í•‘í•˜ëŠ” ìƒˆë¡œìš´ ì„œë¸”ë¦¿ ë§¤í•‘ì´ ìƒì„±ë©ë‹ˆë‹¤. ì´ êµ¬ì„±ì€ **`/admin`**ì— ëŒ€í•´ ìˆ˜ì‹ ëœ ëª¨ë“  ìš”ì²­ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ **`AdminServlet.class`** í´ë˜ìŠ¤ì— ì „ì†¡í•©ë‹ˆë‹¤. **`web.xml`** ì„¤ëª…ìëŠ” ë§ì€ **ë¯¼ê°í•œ ì •ë³´**ë¥¼ í¬í•¨í•˜ê³  ìˆìœ¼ë©°, **Local File Inclusion (LFI) ì·¨ì•½ì **ì„ í™œìš©í•  ë•Œ í™•ì¸í•´ì•¼ í•  ì¤‘ìš”í•œ íŒŒì¼ì…ë‹ˆë‹¤.

### tomcat-users

**`tomcat-users.xml`** íŒŒì¼ì€ **`/manager` ë° `host-manager` ê´€ë¦¬ í˜ì´ì§€**ì— ëŒ€í•œ ì ‘ê·¼ì„ **í—ˆìš©**í•˜ê±°ë‚˜ í—ˆìš©í•˜ì§€ ì•Šê¸° ìœ„í•´ ì‚¬ìš©ë©ë‹ˆë‹¤.
```xml
<?xml version="1.0" encoding="UTF-8"?>

<SNIP>

<tomcat-users xmlns="http://tomcat.apache.org/xml"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://tomcat.apache.org/xml tomcat-users.xsd"
version="1.0">
<!--
By default, no user is included in the "manager-gui" role required
to operate the "/manager/html" web application.  If you wish to use this app,
you must define such a user - the username and password are arbitrary.

Built-in Tomcat manager roles:
- manager-gui    - allows access to the HTML GUI and the status pages
- manager-script - allows access to the HTTP API and the status pages
- manager-jmx    - allows access to the JMX proxy and the status pages
- manager-status - allows access to the status pages only

The users below are wrapped in a comment and are therefore ignored. If you
wish to configure one or more of these users for use with the manager web
application, do not forget to remove the <!.. ..> that surrounds them. You
will also need to set the passwords to something appropriate.
-->


<SNIP>

!-- user manager can access only manager section -->
<role rolename="manager-gui" />
<user username="tomcat" password="tomcat" roles="manager-gui" />

<!-- user admin can access manager and admin section both -->
<role rolename="admin-gui" />
<user username="admin" password="admin" roles="manager-gui,admin-gui" />


</tomcat-users>
```
íŒŒì¼ì€ `manager-gui`, `manager-script`, `manager-jmx`, ë° `manager-status` ê° ì—­í• ì´ ì œê³µí•˜ëŠ” ì ‘ê·¼ ê¶Œí•œì„ ë³´ì—¬ì¤ë‹ˆë‹¤. ì´ ì˜ˆì œì—ì„œëŠ” ë¹„ë°€ë²ˆí˜¸ `tomcat`ì„ ê°€ì§„ ì‚¬ìš©ì `tomcat`ì´ `manager-gui` ì—­í• ì„ ê°€ì§€ê³  ìˆìœ¼ë©°, ì‚¬ìš©ì ê³„ì • `admin`ì— ëŒ€í•´ ë‘ ë²ˆì§¸ ì•½í•œ ë¹„ë°€ë²ˆí˜¸ `admin`ì´ ì„¤ì •ë˜ì–´ ìˆìŒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## References

* [https://academy.hackthebox.com/module/113/section/1090](https://academy.hackthebox.com/module/113/section/1090)


{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
