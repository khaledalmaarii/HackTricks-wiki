# ê¸°ë³¸ Tomcat ì •ë³´

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong>ë¥¼ í†µí•´ ì œë¡œì—ì„œ ì˜ì›…ê¹Œì§€ AWS í•´í‚¹ì„ ë°°ì›Œë³´ì„¸ìš”<strong>!</strong></summary>

* **ì‚¬ì´ë²„ ë³´ì•ˆ íšŒì‚¬**ì—ì„œ ì¼í•˜ì‹œë‚˜ìš”? **íšŒì‚¬ë¥¼ HackTricksì—ì„œ ê´‘ê³ **í•˜ê±°ë‚˜ **PEASSì˜ ìµœì‹  ë²„ì „ì— ì•¡ì„¸ìŠ¤**í•˜ê±°ë‚˜ HackTricksë¥¼ **PDFë¡œ ë‹¤ìš´ë¡œë“œ**í•˜ê³  ì‹¶ìœ¼ì‹ ê°€ìš”? [**êµ¬ë… ìš”ê¸ˆì œ**](https://github.com/sponsors/carlospolop)ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”!
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ë¥¼ ë°œê²¬í•´ë³´ì„¸ìš”. ë…ì ì ì¸ [**NFT**](https://opensea.io/collection/the-peass-family) ì»¬ë ‰ì…˜ì…ë‹ˆë‹¤.
* [**ê³µì‹ PEASS & HackTricks ìŠ¤ì›¨ê·¸**](https://peass.creator-spring.com)ë¥¼ ì–»ìœ¼ì„¸ìš”.
* [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— **ì°¸ì—¬**í•˜ê±°ë‚˜ **Twitter**ì—ì„œ ì €ë¥¼ **íŒ”ë¡œìš°**í•˜ì„¸ìš” ğŸ¦[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **[hacktricks repo](https://github.com/carlospolop/hacktricks)ì™€ [hacktricks-cloud repo](https://github.com/carlospolop/hacktricks-cloud)**ì— PRì„ ì œì¶œí•˜ì—¬ ì—¬ëŸ¬ë¶„ì˜ í•´í‚¹ ê¸°êµë¥¼ ê³µìœ í•˜ì„¸ìš”.

</details>

<figure><img src="/.gitbook/assets/image (675).png" alt=""><figcaption></figcaption></figure>

ê°€ì¥ ì¤‘ìš”í•œ ì·¨ì•½ì ì„ ì°¾ì•„ì„œ ë” ë¹ ë¥´ê²Œ ìˆ˜ì •í•˜ì„¸ìš”. IntruderëŠ” ê³µê²© ëŒ€ìƒì„ ì¶”ì í•˜ê³  ì ê·¹ì ì¸ ìœ„í˜‘ ìŠ¤ìº”ì„ ì‹¤í–‰í•˜ì—¬ APIë¶€í„° ì›¹ ì•± ë° í´ë¼ìš°ë“œ ì‹œìŠ¤í…œê¹Œì§€ ì „ì²´ ê¸°ìˆ  ìŠ¤íƒì—ì„œ ë¬¸ì œë¥¼ ì°¾ìŠµë‹ˆë‹¤. [**ë¬´ë£Œë¡œ ì‹œë„í•´ë³´ì„¸ìš”**](https://www.intruder.io/?utm\_source=referral\&utm\_campaign=hacktricks) ì˜¤ëŠ˜ë¶€í„°.

{% embed url="https://www.intruder.io/?utm_campaign=hacktricks&utm_source=referral" %}

***

### rootë¡œ ì‹¤í–‰í•˜ì§€ ì•Šë„ë¡ ì£¼ì˜í•˜ì„¸ìš”

Tomcatì„ rootë¡œ ì‹¤í–‰í•˜ì§€ ì•Šê¸° ìœ„í•´ ë§¤ìš° ì¼ë°˜ì ì¸ êµ¬ì„±ì€ í¬íŠ¸ 80/443ì—ì„œ Apache ì„œë²„ë¥¼ ì„¤ì •í•˜ê³ , ìš”ì²­ëœ ê²½ë¡œê°€ ì •ê·œì‹ê³¼ ì¼ì¹˜í•˜ëŠ” ê²½ìš° ìš”ì²­ì„ ë‹¤ë¥¸ í¬íŠ¸ì—ì„œ ì‹¤í–‰ ì¤‘ì¸ Tomcatìœ¼ë¡œ ë³´ëƒ…ë‹ˆë‹¤.

### ê¸°ë³¸ êµ¬ì¡°
```
â”œâ”€â”€ bin
â”œâ”€â”€ conf
â”‚   â”œâ”€â”€ catalina.policy
â”‚   â”œâ”€â”€ catalina.properties
â”‚   â”œâ”€â”€ context.xml
â”‚   â”œâ”€â”€ tomcat-users.xml
â”‚   â”œâ”€â”€ tomcat-users.xsd
â”‚   â””â”€â”€ web.xml
â”œâ”€â”€ lib
â”œâ”€â”€ logs
â”œâ”€â”€ temp
â”œâ”€â”€ webapps
â”‚   â”œâ”€â”€ manager
â”‚   â”‚   â”œâ”€â”€ images
â”‚   â”‚   â”œâ”€â”€ META-INF
â”‚   â”‚   â””â”€â”€ WEB-INF
|   |       â””â”€â”€ web.xml
â”‚   â””â”€â”€ ROOT
â”‚       â””â”€â”€ WEB-INF
â””â”€â”€ work
â””â”€â”€ Catalina
â””â”€â”€ localhost
```
* `WEB-INF` folder: This folder contains the configuration files and classes specific to the web application.
* `META-INF` folder: This folder contains the metadata files for the web application.
* Other files and folders: These can include HTML, CSS, JavaScript, and other resources used by the web application.

To access the Tomcat server, you can use a web browser and navigate to `http://<ip_address>:<port>`. The default port for Tomcat is 8080.

To authenticate and access the Manager application, you need to have the appropriate credentials defined in the `tomcat-users.xml` file. The Manager application allows you to deploy, undeploy, and manage web applications.

It is important to secure the Tomcat server by changing default credentials, disabling unnecessary services, and keeping the server and its components up to date with the latest security patches.
```
webapps/customapp
â”œâ”€â”€ images
â”œâ”€â”€ index.jsp
â”œâ”€â”€ META-INF
â”‚   â””â”€â”€ context.xml
â”œâ”€â”€ status.xsd
â””â”€â”€ WEB-INF
â”œâ”€â”€ jsp
|   â””â”€â”€ admin.jsp
â””â”€â”€ web.xml
â””â”€â”€ lib
|    â””â”€â”€ jdbc_drivers.jar
â””â”€â”€ classes
â””â”€â”€ AdminServlet.class
```
ê°€ì¥ ì¤‘ìš”í•œ íŒŒì¼ ì¤‘ í•˜ë‚˜ëŠ” `WEB-INF/web.xml`ì…ë‹ˆë‹¤. ì´ íŒŒì¼ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì‚¬ìš©í•˜ëŠ” ê²½ë¡œì™€ í•´ë‹¹ ê²½ë¡œë¥¼ ì²˜ë¦¬í•˜ëŠ” í´ë˜ìŠ¤ì— ëŒ€í•œ ì •ë³´ë¥¼ ì €ì¥í•˜ëŠ” ë°°í¬ ê¸°ìˆ ìë¡œ ì•Œë ¤ì ¸ ìˆìŠµë‹ˆë‹¤.\
ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì‚¬ìš©í•˜ëŠ” ëª¨ë“  ì»´íŒŒì¼ëœ í´ë˜ìŠ¤ëŠ” `WEB-INF/classes` í´ë”ì— ì €ì¥ë˜ì–´ì•¼ í•©ë‹ˆë‹¤. ì´ëŸ¬í•œ í´ë˜ìŠ¤ì—ëŠ” ì¤‘ìš”í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ê³¼ ë¯¼ê°í•œ ì •ë³´ê°€ í¬í•¨ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ íŒŒì¼ë“¤ì˜ ì·¨ì•½ì ì€ ì›¹ì‚¬ì´íŠ¸ì˜ ì™„ì „í•œ ì¹¨í•´ë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. `lib` í´ë”ì—ëŠ” í•´ë‹¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì— í•„ìš”í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì €ì¥ë©ë‹ˆë‹¤. `jsp` í´ë”ì—ëŠ” [Jakarta Server Pages (JSP)](https://en.wikipedia.org/wiki/Jakarta\_Server\_Pages)ë¡œ ì•Œë ¤ì§„ ì´ì „ì˜ `JavaServer Pages`ì™€ ë¹„ìŠ·í•œ ê¸°ëŠ¥ì„ í•˜ëŠ” íŒŒì¼ì´ ì €ì¥ë©ë‹ˆë‹¤.

ë‹¤ìŒì€ **web.xml** íŒŒì¼ì˜ ì˜ˆì‹œì…ë‹ˆë‹¤.
```xml
<?xml version="1.0" encoding="ISO-8859-1"?>

<!DOCTYPE web-app PUBLIC "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN" "http://java.sun.com/dtd/web-app_2_3.dtd">

<web-app>
<servlet>
<servlet-name>AdminServlet</servlet-name>
<servlet-class>com.inlanefreight.api.AdminServlet</servlet-class>
</servlet>

<servlet-mapping>
<servlet-name>AdminServlet</servlet-name>
<url-pattern>/admin</url-pattern>
</servlet-mapping>
</web-app>
```
ìœ„ì˜ `web.xml` êµ¬ì„±ì€ **`AdminServlet`**ì´ë¼ëŠ” ìƒˆë¡œìš´ ì„œë¸”ë¦¿ì„ ì •ì˜í•˜ë©°, ì´ ì„œë¸”ë¦¿ì€ **`com.inlanefreight.api.AdminServlet`** í´ë˜ìŠ¤ì— ë§¤í•‘ë©ë‹ˆë‹¤. JavaëŠ” íŒ¨í‚¤ì§€ ì´ë¦„ì„ ë§Œë“¤ê¸° ìœ„í•´ ì  í‘œê¸°ë²•ì„ ì‚¬ìš©í•˜ë¯€ë¡œ, ìœ„ì—ì„œ ì •ì˜í•œ í´ë˜ìŠ¤ì˜ ë””ìŠ¤í¬ ê²½ë¡œëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:

* **`classes/com/inlanefreight/api/AdminServlet.class`**

ë‹¤ìŒìœ¼ë¡œ, `/admin`ì— ëŒ€í•œ ìš”ì²­ì„ `AdminServlet`ê³¼ ë§¤í•‘í•˜ëŠ” ìƒˆë¡œìš´ ì„œë¸”ë¦¿ ë§¤í•‘ì´ ìƒì„±ë©ë‹ˆë‹¤. ì´ êµ¬ì„±ì€ **`/admin`ì— ëŒ€í•œ ëª¨ë“  ìš”ì²­ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ `AdminServlet.class`** í´ë˜ìŠ¤ë¡œ ë³´ëƒ…ë‹ˆë‹¤. **`web.xml`** ê¸°ìˆ ìëŠ” ë§ì€ **ë¯¼ê°í•œ ì •ë³´**ë¥¼ í¬í•¨í•˜ê³  ìˆìœ¼ë©°, **ë¡œì»¬ íŒŒì¼ í¬í•¨ (LFI) ì·¨ì•½ì **ì„ í™œìš©í•  ë•Œ í™•ì¸í•´ì•¼ í•˜ëŠ” ì¤‘ìš”í•œ íŒŒì¼ì…ë‹ˆë‹¤.

### tomcat-users

**`tomcat-users.xml`** íŒŒì¼ì€ **`/manager` ë° `host-manager` ê´€ë¦¬ í˜ì´ì§€**ì— ëŒ€í•œ ì•¡ì„¸ìŠ¤ë¥¼ í—ˆìš©í•˜ê±°ë‚˜ ê±°ë¶€í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤.
```xml
<?xml version="1.0" encoding="UTF-8"?>

<SNIP>

<tomcat-users xmlns="http://tomcat.apache.org/xml"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://tomcat.apache.org/xml tomcat-users.xsd"
version="1.0">
<!--
By default, no user is included in the "manager-gui" role required
to operate the "/manager/html" web application.  If you wish to use this app,
you must define such a user - the username and password are arbitrary.

Built-in Tomcat manager roles:
- manager-gui    - allows access to the HTML GUI and the status pages
- manager-script - allows access to the HTTP API and the status pages
- manager-jmx    - allows access to the JMX proxy and the status pages
- manager-status - allows access to the status pages only

The users below are wrapped in a comment and are therefore ignored. If you
wish to configure one or more of these users for use with the manager web
application, do not forget to remove the <!.. ..> that surrounds them. You
will also need to set the passwords to something appropriate.
-->


<SNIP>

!-- user manager can access only manager section -->
<role rolename="manager-gui" />
<user username="tomcat" password="tomcat" roles="manager-gui" />

<!-- user admin can access manager and admin section both -->
<role rolename="admin-gui" />
<user username="admin" password="admin" roles="manager-gui,admin-gui" />


</tomcat-users>
```
íŒŒì¼ì€ `manager-gui`, `manager-script`, `manager-jmx` ë° `manager-status` ì—­í• ì´ ì œê³µí•˜ëŠ” ê°ê°ì˜ ì•¡ì„¸ìŠ¤ë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤. ì´ ì˜ˆì œì—ì„œëŠ” `tomcat` ì‚¬ìš©ìê°€ ì•”í˜¸ `tomcat`ìœ¼ë¡œ `manager-gui` ì—­í• ì„ ê°€ì§€ê³  ìˆìœ¼ë©°, ë‘ ë²ˆì§¸ë¡œ ì•½í•œ ì•”í˜¸ `admin`ì´ `admin` ì‚¬ìš©ì ê³„ì •ì— ì„¤ì •ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

## ì°¸ê³  ìë£Œ

* [https://academy.hackthebox.com/module/113/section/1090](https://academy.hackthebox.com/module/113/section/1090)

<figure><img src="/.gitbook/assets/image (675).png" alt=""><figcaption></figcaption></figure>

ê°€ì¥ ì¤‘ìš”í•œ ì·¨ì•½ì ì„ ì°¾ì•„ì„œ ë¹ ë¥´ê²Œ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. IntruderëŠ” ê³µê²© í‘œë©´ì„ ì¶”ì í•˜ê³  ì˜ˆë°©ì ì¸ ìœ„í˜‘ ìŠ¤ìº”ì„ ì‹¤í–‰í•˜ì—¬ APIë¶€í„° ì›¹ ì•± ë° í´ë¼ìš°ë“œ ì‹œìŠ¤í…œê¹Œì§€ ì „ì²´ ê¸°ìˆ  ìŠ¤íƒì—ì„œ ë¬¸ì œë¥¼ ì°¾ìŠµë‹ˆë‹¤. [**ë¬´ë£Œë¡œ ì‹œë„í•´ë³´ì„¸ìš”**](https://www.intruder.io/?utm\_source=referral\&utm\_campaign=hacktricks) ì˜¤ëŠ˜.

{% embed url="https://www.intruder.io/?utm_campaign=hacktricks&utm_source=referral" %}


<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong>ë¡œë¶€í„° AWS í•´í‚¹ì„ ì²˜ìŒë¶€í„° ì „ë¬¸ê°€ê¹Œì§€ ë°°ì›Œë³´ì„¸ìš”<strong>!</strong></summary>

* **ì‚¬ì´ë²„ ë³´ì•ˆ íšŒì‚¬**ì—ì„œ ì¼í•˜ì‹œë‚˜ìš”? **íšŒì‚¬ë¥¼ HackTricksì—ì„œ ê´‘ê³ **í•˜ê±°ë‚˜ **PEASSì˜ ìµœì‹  ë²„ì „ì— ì•¡ì„¸ìŠ¤**í•˜ê±°ë‚˜ HackTricksë¥¼ **PDFë¡œ ë‹¤ìš´ë¡œë“œ**í•˜ê³  ì‹¶ìœ¼ì‹ ê°€ìš”? [**êµ¬ë… ìš”ê¸ˆì œ**](https://github.com/sponsors/carlospolop)ë¥¼ í™•ì¸í•˜ì„¸ìš”!
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ë¥¼ ë°œê²¬í•˜ì„¸ìš”. ë…ì ì ì¸ [**NFT**](https://opensea.io/collection/the-peass-family) ì»¬ë ‰ì…˜ì…ë‹ˆë‹¤.
* [**ê³µì‹ PEASS & HackTricks ìŠ¤ì›¨ê·¸**](https://peass.creator-spring.com)ë¥¼ ì–»ìœ¼ì„¸ìš”.
* [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— **ì°¸ì—¬**í•˜ê±°ë‚˜ **Twitter**ì—ì„œ ì €ë¥¼ **íŒ”ë¡œìš°**í•˜ì„¸ìš” ğŸ¦[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **[hacktricks repo](https://github.com/carlospolop/hacktricks) ë° [hacktricks-cloud repo](https://github.com/carlospolop/hacktricks-cloud)**ì— PRì„ ì œì¶œí•˜ì—¬ ì—¬ëŸ¬ë¶„ì˜ í•´í‚¹ ê¸°ë²•ì„ ê³µìœ í•˜ì„¸ìš”.

</details>
