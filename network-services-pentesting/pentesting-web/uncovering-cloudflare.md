# CloudFlare'Ä± Ortaya Ã‡Ä±karma

<details>

<summary><strong>AWS hacklemeyi sÄ±fÄ±rdan kahramana Ã¶ÄŸrenin</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong> ile!</strong></summary>

HackTricks'Ä± desteklemenin diÄŸer yollarÄ±:

* **Åirketinizi HackTricks'te reklam gÃ¶rmek istiyorsanÄ±z** veya **HackTricks'i PDF olarak indirmek istiyorsanÄ±z** [**ABONELÄ°K PLANLARI**]'na gÃ¶z atÄ±n (https://github.com/sponsors/carlospolop)!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* [**PEASS Ailesi'ni**](https://opensea.io/collection/the-peass-family) keÅŸfedin, Ã¶zel [**NFT'lerimiz**](https://opensea.io/collection/the-peass-family) koleksiyonumuz
* **KatÄ±lÄ±n** ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) veya bizi **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks\_live)** takip edin.**
* **Hacking pÃ¼f noktalarÄ±nÄ±zÄ± paylaÅŸarak PR'lar gÃ¶ndererek** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarÄ±na katkÄ±da bulunun.

</details>

## Cloudflare'Ä± Ortaya Ã‡Ä±karmak Ä°Ã§in Ortak Teknikler

* Alan adÄ±nÄ±n **geÃ§miÅŸ DNS kayÄ±tlarÄ±nÄ± veren bir hizmet** kullanabilirsiniz. Belki web sayfasÄ± daha Ã¶nce kullanÄ±lan bir IP adresinde Ã§alÄ±ÅŸÄ±yor.
* AynÄ± ÅŸekilde, **geÃ§miÅŸ SSL sertifikalarÄ±nÄ± kontrol ederek** orijin IP adresine iÅŸaret edebilirsiniz.
* AyrÄ±ca, **IP'lere doÄŸrudan iÅŸaret eden diÄŸer alt alanlarÄ±n DNS kayÄ±tlarÄ±nÄ± kontrol edin**, Ã§Ã¼nkÃ¼ diÄŸer alt alanlar aynÄ± sunucuya iÅŸaret ediyor olabilir (belki FTP, posta veya baÅŸka bir hizmet sunmak iÃ§in).
* EÄŸer web uygulamasÄ±nda bir **SSRF bulursanÄ±z**, bunu kÃ¶tÃ¼ye kullanarak sunucunun IP adresini elde edebilirsiniz.
* Web sayfasÄ±ndaki benzersiz bir dizeyi shodan gibi tarayÄ±cÄ±larda arayÄ±n (ve belki google ve benzeri?). Belki bu iÃ§eriÄŸe sahip bir IP adresi bulabilirsiniz.
* Benzer bir ÅŸekilde, benzersiz bir dize aramak yerine favicon simgesini arayabilirsiniz: [https://github.com/karma9874/CloudFlare-IP](https://github.com/karma9874/CloudFlare-IP) veya [https://github.com/pielco11/fav-up](https://github.com/pielco11/fav-up) aracÄ± ile.
* Bu sÄ±k sÄ±k Ã§alÄ±ÅŸmayabilir Ã§Ã¼nkÃ¼ sunucu IP adresiyle eriÅŸildiÄŸinde aynÄ± yanÄ±tÄ± gÃ¶ndermelidir, ama asla bilemezsiniz.

## Cloudflare'Ä± Ortaya Ã‡Ä±karmak Ä°Ã§in AraÃ§lar

* Alan adÄ±nÄ± [http://www.crimeflare.org:82/cfs.html](http://www.crimeflare.org:82/cfs.html) veya [https://crimeflare.herokuapp.com](https://crimeflare.herokuapp.com) iÃ§inde arayÄ±n. Veya [CloudPeler](https://github.com/zidansec/CloudPeler) aracÄ±nÄ± kullanÄ±n (bu API'yi kullanÄ±r)
* Alan adÄ±nÄ± [https://leaked.site/index.php?resolver/cloudflare.0/](https://leaked.site/index.php?resolver/cloudflare.0/) iÃ§inde arayÄ±n
* [**CloudFlair**](https://github.com/christophetd/CloudFlair), alan adÄ±nÄ± iÃ§eren Censys sertifikalarÄ±nÄ± arayacak, ardÄ±ndan bu sertifikalardaki IPv4'leri arayacak ve son olarak bu IP'lerdeki web sayfasÄ±na eriÅŸmeyi deneyecektir.
* [**CloakQuest3r**](https://github.com/spyboy-productions/CloakQuest3r): CloakQuest3r, Cloudflare ve diÄŸer alternatifler tarafÄ±ndan korunan web sitelerinin gerÃ§ek IP adresini doÄŸru bir ÅŸekilde belirlemek Ã¼zere Ã¶zenle oluÅŸturulmuÅŸ gÃ¼Ã§lÃ¼ bir Python aracÄ±dÄ±r. Temel amacÄ±, Cloudflare'Ä±n koruyucu kalkanÄ± arkasÄ±nda gizlenen web sunucularÄ±nÄ±n gerÃ§ek IP adresini doÄŸru bir ÅŸekilde ayÄ±rt etmektir.
* [Censys](https://search.censys.io/)
* [Shodan](https://shodan.io/)
* [Bypass-firewalls-by-DNS-history](https://github.com/vincentcox/bypass-firewalls-by-DNS-history)
* Web sayfasÄ±nÄ±n bulunduÄŸu potansiyel IP'lerin bir kÃ¼mesine sahipseniz [https://github.com/hakluke/hakoriginfinder](https://github.com/hakluke/hakoriginfinder) kullanabilirsiniz
```bash
# You can check if the tool is working with
prips 1.0.0.0/30 | hakoriginfinder -h one.one.one.one

# If you know the company is using AWS you could use the previous tool to search the
## web page inside the EC2 IPs
DOMAIN=something.com
WIDE_REGION=us
for ir in `curl https://ip-ranges.amazonaws.com/ip-ranges.json | jq -r '.prefixes[] | select(.service=="EC2") | select(.region|test("^us")) | .ip_prefix'`; do
echo "Checking $ir"
prips $ir | hakoriginfinder -h "$DOMAIN"
done
```
## Bulut makinelerinden Cloudflare'Ä± ortaya Ã§Ä±karma

UnutmayÄ±n ki bu AWS makineleri iÃ§in yapÄ±lmÄ±ÅŸ olsa da, herhangi baÅŸka bir bulut saÄŸlayÄ±cÄ± iÃ§in de yapÄ±labilir.

Bu sÃ¼recin daha iyi bir aÃ§Ä±klamasÄ± iÃ§in ÅŸuraya bakÄ±n:

{% embed url="https://trickest.com/blog/cloudflare-bypass-discover-ip-addresses-aws/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}
```bash
# Find open ports
sudo masscan --max-rate 10000 -p80,443 $(curl -s https://ip-ranges.amazonaws.com/ip-ranges.json | jq -r '.prefixes[] | select(.service=="EC2") | .ip_prefix' | tr '\n' ' ') | grep "open"  > all_open.txt
# Format results
cat all_open.txt | sed 's,.*port \(.*\)/tcp on \(.*\),\2:\1,' | tr -d " " > all_open_formated.txt
# Search actual web pages
httpx -silent -threads 200 -l all_open_formated.txt -random-agent -follow-redirects -json -no-color -o webs.json
# Format web results and remove eternal redirects
cat webs.json | jq -r "select((.failed==false) and (.chain_status_codes | length) < 9) | .url" | sort -u > aws_webs.json

# Search via Host header
httpx -json -no-color -list aws_webs.json -header Host: cloudflare.malwareworld.com -threads 250 -random-agent -follow-redirects -o web_checks.json
```
## Cloudflare'Ä± Cloudflare Ãœzerinden Atlatma

### DoÄŸrulanmÄ±ÅŸ Kaynak Ã‡ekmeler

Bu mekanizma, **Cloudflare'Ä±n ters-proxy** sunucularÄ± ile **kaynak** sunucusu arasÄ±ndaki baÄŸlantÄ±larÄ± doÄŸrulamak iÃ§in **mÃ¼ÅŸteri** [**SSL sertifikalarÄ±na**](https://socradar.io/how-to-monitor-your-ssl-certificates-expiration-easily-and-why/) gÃ¼venir ve buna **mTLS** denir.

MÃ¼ÅŸterilerin kendi sertifikasÄ±nÄ± yapÄ±landÄ±rmak yerine, Cloudflare'Ä±n sertifikasÄ±nÄ± kullanarak Cloudflare'dan herhangi bir baÄŸlantÄ±ya izin verebilirler, **kiracÄ±dan baÄŸÄ±msÄ±z olarak**.

{% hint style="danger" %}
Bu nedenle, bir saldÄ±rgan sadece Cloudflare'da **Cloudflare'Ä±n sertifikasÄ±nÄ± kullanarak bir alan adÄ± ayarlayabilir ve** bunu **kurban** alan adÄ± **IP** adresine yÃ¶nlendirebilir. Bu ÅŸekilde, kendi alanÄ±nÄ± tamamen korumasÄ±z bÄ±rakarak, Cloudflare gÃ¶nderilen istekleri korumayacaktÄ±r.
{% endhint %}

Daha fazla bilgi [**burada**](https://socradar.io/cloudflare-protection-bypass-vulnerability-on-threat-actors-radar/).

### Cloudflare IP Adreslerini Beyaz Listeye Alma

Bu, **Cloudflare'dan kaynaklanmayan baÄŸlantÄ±larÄ± reddedecek** ve Ã¶nceki kurulumda bir saldÄ±rganÄ±n sadece **kendi alanÄ±nÄ± Cloudflare'da** **kurbanÄ±n IP** adresine yÃ¶nlendirmesine ve saldÄ±rmasÄ±na olanak tanÄ±yan bir durumdur.

Daha fazla bilgi [**burada**](https://socradar.io/cloudflare-protection-bypass-vulnerability-on-threat-actors-radar/).

## KazÄ±ma Ä°Ã§in Cloudflare'Ä± Atlatma

### Ã–nbellek

Bazen sadece web sayfasÄ±nÄ± kazÄ±mak iÃ§in Cloudflare'Ä± atlamak istersiniz. Bunun iÃ§in bazÄ± seÃ§enekler vardÄ±r:

* Google Ã¶nbelleÄŸini kullanÄ±n: `https://webcache.googleusercontent.com/search?q=cache:https://www.petsathome.com/shop/en/pets/dog`
* [https://archive.org/web/](https://archive.org/web/) gibi diÄŸer Ã¶nbellek hizmetlerini kullanÄ±n

### Cloudflare Ã‡Ã¶zÃ¼cÃ¼ler

BirÃ§ok Cloudflare Ã§Ã¶zÃ¼cÃ¼ geliÅŸtirilmiÅŸtir:

* [FlareSolverr](https://github.com/FlareSolverr/FlareSolverr)
* [cloudscraper](https://github.com/VeNoMouS/cloudscraper) [KÄ±lavuz burada](https://scrapeops.io/python-web-scraping-playbook/python-cloudscraper/)
* [cloudflare-scrape](https://github.com/Anorov/cloudflare-scrape)
* [CloudflareSolverRe](https://github.com/RyuzakiH/CloudflareSolverRe)
* [Cloudflare-IUAM-Solver](https://github.com/ninja-beans/cloudflare-iuam-solver)
* [cloudflare-bypass](https://github.com/devgianlu/cloudflare-bypass) \[ArÅŸivlenmiÅŸ]
* [CloudflareSolverRe](https://github.com/RyuzakiH/CloudflareSolverRe)

### GÃ¼Ã§lendirilmiÅŸ BaÅŸsÄ±z TarayÄ±cÄ±lar <a href="#option-4-scrape-with-fortified-headless-browsers" id="option-4-scrape-with-fortified-headless-browsers"></a>

Otomatik bir tarayÄ±cÄ± olarak algÄ±lanmayan baÅŸsÄ±z bir tarayÄ±cÄ± kullanÄ±n (bunu Ã¶zelleÅŸtirmeniz gerekebilir). BazÄ± seÃ§enekler ÅŸunlardÄ±r:

* **Puppeteer:** [Puppeteer](https://github.com/puppeteer/puppeteer) iÃ§in [gizlilik eklentisi](https://github.com/berstend/puppeteer-extra/tree/master/packages/puppeteer-extra-plugin-stealth).
* **Playwright:** [Gizlilik eklentisi](https://www.npmjs.com/package/playwright-stealth) yakÄ±nda Playwright'a gelecek. GeliÅŸmeleri [buradan](https://github.com/berstend/puppeteer-extra/issues/454) ve [buradan](https://github.com/berstend/puppeteer-extra/tree/master/packages/playwright-extra) takip edin.
* **Selenium:** [undetected-chromedriver](https://github.com/ultrafunkamsterdam/undetected-chromedriver) optimize edilmiÅŸ bir Selenium Chromedriver yamasÄ±.

### Cloudflare Dahili Atlatma ile AkÄ±llÄ± Proxy <a href="#option-5-smart-proxy-with-cloudflare-built-in-bypass" id="option-5-smart-proxy-with-cloudflare-built-in-bypass"></a>

**AkÄ±llÄ± proxy'ler**, Cloudflare'Ä±n gÃ¼venlik Ã¶nlemlerini atlatmayÄ± amaÃ§layan uzmanlaÅŸmÄ±ÅŸ ÅŸirketler tarafÄ±ndan sÃ¼rekli olarak gÃ¼ncellenir (Ã§Ã¼nkÃ¼ bu onlarÄ±n iÅŸidir).

Bunlardan bazÄ±larÄ± ÅŸunlardÄ±r:

* [ScraperAPI](https://www.scraperapi.com/?fp\_ref=scrapeops)
* [Scrapingbee](https://www.scrapingbee.com/?fpr=scrapeops)
* [Oxylabs](https://oxylabs.go2cloud.org/aff\_c?offer\_id=7\&aff\_id=379\&url\_id=32)
* [Smartproxy](https://prf.hn/click/camref:1100loxdG/\[p\_id:1100l442001]/destination:https%3A%2F%2Fsmartproxy.com%2Fscraping%2Fweb) Ã¶zel Cloudflare atlatma mekanizmalarÄ±yla bilinir.

Optimize edilmiÅŸ bir Ã§Ã¶zÃ¼m arayanlar iÃ§in [ScrapeOps Proxy Aggregator](https://scrapeops.io/proxy-aggregator/) Ã¶ne Ã§Ä±kar. Bu hizmet, 20'den fazla proxy saÄŸlayÄ±cÄ±sÄ±nÄ± tek bir API'ye entegre ederek, hedef alanlarÄ±nÄ±z iÃ§in en iyi ve en maliyet etkin proxy'yi otomatik olarak seÃ§er, bÃ¶ylece Cloudflare'Ä±n savunmalarÄ±nÄ± geÃ§mek iÃ§in Ã¼stÃ¼n bir seÃ§enek sunar.

### Cloudflare Anti-Bot KorumasÄ±nÄ± Tersine MÃ¼hendislik Yapma <a href="#option-6-reverse-engineer-cloudflare-anti-bot-protection" id="option-6-reverse-engineer-cloudflare-anti-bot-protection"></a>

Cloudflare'Ä±n anti-bot Ã¶nlemlerini tersine mÃ¼hendislik yapmak, birÃ§ok baÅŸsÄ±z tarayÄ±cÄ± Ã§alÄ±ÅŸtÄ±rmanÄ±n yÃ¼ksek maliyetinden kaÃ§Ä±nmak iÃ§in akÄ±llÄ± proxy saÄŸlayÄ±cÄ±larÄ± tarafÄ±ndan kullanÄ±lan bir taktiktir.

**Avantajlar:** Bu yÃ¶ntem, bÃ¼yÃ¼k Ã¶lÃ§ekli operasyonlar iÃ§in ideal olan, Cloudflare'Ä±n kontrollerine Ã¶zel olarak hedeflenen son derece verimli bir atlatma oluÅŸturmayÄ± saÄŸlar.

**Dezavantajlar:** DezavantajÄ±, Cloudflare'Ä±n kasÄ±tlÄ± olarak belirsiz anti-bot sistemini anlama ve aldatma konusundaki karmaÅŸÄ±klÄ±ktÄ±r; bu, farklÄ± stratejileri test etme ve Cloudflare korumalarÄ±nÄ± gÃ¼Ã§lendirdikÃ§e atlatmayÄ± gÃ¼ncelleme Ã§abasÄ±nÄ± gerektirir.

Bu konuda daha fazla bilgiyi [orijinal makalede](https://scrapeops.io/web-scraping-playbook/how-to-bypass-cloudflare/) bulabilirsiniz.

## Referanslar

* [https://scrapeops.io/web-scraping-playbook/how-to-bypass-cloudflare/](https://scrapeops.io/web-scraping-playbook/how-to-bypass-cloudflare/)

<details>

<summary><strong>AWS hacklemeyi sÄ±fÄ±rdan kahraman olmaya Ã¶ÄŸrenin</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong> ile!</strong></summary>

HackTricks'i desteklemenin diÄŸer yollarÄ±:

* **Åirketinizi HackTricks'te reklamÄ±nÄ± gÃ¶rmek istiyorsanÄ±z** veya **HackTricks'i PDF olarak indirmek istiyorsanÄ±z** [**ABONELÄ°K PLANLARI**](https://github.com/sponsors/carlospolop)'na gÃ¶z atÄ±n!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) keÅŸfedin, Ã¶zel [**NFT'lerimiz**](https://opensea.io/collection/the-peass-family) koleksiyonumuz
* **ğŸ’¬ [Discord grubuna](https://discord.gg/hRep4RUj7f) veya [telegram grubuna](https://t.me/peass) katÄ±lÄ±n veya** bizi **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks\_live)** takip edin.**
* **Hacking pÃ¼f noktalarÄ±nÄ±zÄ± gÃ¶ndererek HackTricks ve HackTricks Cloud github depolarÄ±na PR gÃ¶ndererek paylaÅŸÄ±n.**

</details>
