# CloudFlare'nin Ortaya Ã‡Ä±karÄ±lmasÄ±

<details>

<summary><strong>AWS hackleme konusunda sÄ±fÄ±rdan kahramana dÃ¶nÃ¼ÅŸmek iÃ§in</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ±)</strong></a><strong>'Ä± Ã¶ÄŸrenin!</strong></summary>

HackTricks'i desteklemenin diÄŸer yollarÄ±:

* Åirketinizi HackTricks'te **reklamÄ±nÄ±zÄ± gÃ¶rmek** veya **HackTricks'i PDF olarak indirmek** iÃ§in [**ABONELÄ°K PLANLARINI**](https://github.com/sponsors/carlospolop) kontrol edin!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* [**PEASS Ailesi'ni**](https://opensea.io/collection/the-peass-family) keÅŸfedin, Ã¶zel [**NFT'lerimiz**](https://opensea.io/collection/the-peass-family) koleksiyonumuz
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katÄ±lÄ±n** veya **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)'u **takip edin**.
* **Hacking hilelerinizi** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarÄ±na **PR gÃ¶ndererek paylaÅŸÄ±n**.

</details>


## Cloudflare'i Ortaya Ã‡Ä±karmak Ä°Ã§in YaygÄ±n Teknikler

* Alan adÄ±nÄ±n **geÃ§miÅŸ DNS kayÄ±tlarÄ±nÄ±** veren bir hizmet kullanabilirsiniz. Belki web sayfasÄ± daha Ã¶nce kullanÄ±lan bir IP adresinde Ã§alÄ±ÅŸÄ±yor.
* AynÄ± ÅŸekilde, **geÃ§miÅŸ SSL sertifikalarÄ±nÄ± kontrol ederek** orijin IP adresine iÅŸaret edebilirsiniz.
* AyrÄ±ca, doÄŸrudan IP adreslerine iÅŸaret eden **diÄŸer alt alanlarÄ±n DNS kayÄ±tlarÄ±nÄ± kontrol edin**, Ã§Ã¼nkÃ¼ diÄŸer alt alanlar aynÄ± sunucuya iÅŸaret ediyor olabilir (belki FTP, posta veya baÅŸka bir hizmet sunmak iÃ§in).
* Web uygulamasÄ± iÃ§inde bir **SSRF bulursanÄ±z**, bunu istismar ederek sunucunun IP adresini elde edebilirsiniz.
* Shodan gibi tarayÄ±cÄ±larda web sayfasÄ±nÄ±n benzersiz bir dizesini arayarak (ve belki de Google ve benzeri yerlerde) bir IP adresi bulabilirsiniz.
* Benzer bir ÅŸekilde, benzersiz bir dize yerine favicon simgesini [https://github.com/karma9874/CloudFlare-IP](https://github.com/karma9874/CloudFlare-IP) veya [https://github.com/pielco11/fav-up](https://github.com/pielco11/fav-up) aracÄ±yla arayabilirsiniz.
* Bu, sunucunun IP adresiyle eriÅŸildiÄŸinde aynÄ± yanÄ±tÄ± gÃ¶ndermesi gerektiÄŸi iÃ§in Ã§ok sÄ±k Ã§alÄ±ÅŸmayabilir, ancak asla bilemezsiniz.

## Cloudflare'i Ortaya Ã‡Ä±karmak Ä°Ã§in AraÃ§lar

* Alan adÄ±nÄ± [http://www.crimeflare.org:82/cfs.html](http://www.crimeflare.org:82/cfs.html) veya [https://crimeflare.herokuapp.com](https://crimeflare.herokuapp.com) adresinde arayÄ±n. Veya [CloudPeler](https://github.com/zidansec/CloudPeler) aracÄ±nÄ± kullanÄ±n (bu API'yi kullanÄ±r).
* Alan adÄ±nÄ± [https://leaked.site/index.php?resolver/cloudflare.0/](https://leaked.site/index.php?resolver/cloudflare.0/) adresinde arayÄ±n.
* [**CloudFlair**](https://github.com/christophetd/CloudFlair), alan adÄ±nÄ± iÃ§eren Censys sertifikalarÄ±nÄ± arayacak, ardÄ±ndan bu sertifikalardaki IPv4'leri arayacak ve son olarak bu IP'lerdeki web sayfasÄ±na eriÅŸmeye Ã§alÄ±ÅŸacaktÄ±r.
* [Censys](https://search.censys.io/)
* [Shodan](https://shodan.io/)
* [Bypass-firewalls-by-DNS-history](https://github.com/vincentcox/bypass-firewalls-by-DNS-history)
* Web sayfasÄ±nÄ±n bulunduÄŸu potansiyel IP setine sahipseniz [https://github.com/hakluke/hakoriginfinder](https://github.com/hakluke/hakoriginfinder) aracÄ±nÄ± kullanabilirsiniz.
```bash
# You can check if the tool is working with
prips 1.0.0.0/30 | hakoriginfinder -h one.one.one.one

# If you know the company is using AWS you could use the previous tool to search the
## web page inside the EC2 IPs
DOMAIN=something.com
WIDE_REGION=us
for ir in `curl https://ip-ranges.amazonaws.com/ip-ranges.json | jq -r '.prefixes[] | select(.service=="EC2") | select(.region|test("^us")) | .ip_prefix'`; do
echo "Checking $ir"
prips $ir | hakoriginfinder -h "$DOMAIN"
done
```
## Bulut makinelerinden Cloudflare'Ä± ortaya Ã§Ä±karma

Bu iÅŸlem AWS makineleri iÃ§in yapÄ±lmÄ±ÅŸ olsa da, herhangi bir diÄŸer bulut saÄŸlayÄ±cÄ± iÃ§in de yapÄ±labilir.

Bu sÃ¼recin daha iyi bir aÃ§Ä±klamasÄ± iÃ§in ÅŸuraya bakÄ±n:

{% embed url="https://trickest.com/blog/cloudflare-bypass-discover-ip-addresses-aws/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}
```bash
# Find open ports
sudo masscan --max-rate 10000 -p80,443 $(curl -s https://ip-ranges.amazonaws.com/ip-ranges.json | jq -r '.prefixes[] | select(.service=="EC2") | .ip_prefix' | tr '\n' ' ') | grep "open"  > all_open.txt
# Format results
cat all_open.txt | sed 's,.*port \(.*\)/tcp on \(.*\),\2:\1,' | tr -d " " > all_open_formated.txt
# Search actual web pages
httpx -silent -threads 200 -l all_open_formated.txt -random-agent -follow-redirects -json -no-color -o webs.json
# Format web results and remove eternal redirects
cat webs.json | jq -r "select((.failed==false) and (.chain_status_codes | length) < 9) | .url" | sort -u > aws_webs.json

# Search via Host header
httpx -json -no-color -list aws_webs.json -header Host: cloudflare.malwareworld.com -threads 250 -random-agent -follow-redirects -o web_checks.json
```
## Cloudflare'Ä± Cloudflare ile GeÃ§me

### Kimlik DoÄŸrulamalÄ± Kaynak Ä°steÄŸi

Bu mekanizma, **mTLS** olarak adlandÄ±rÄ±lan **Cloudflare'Ä±n ters proxy** sunucularÄ± ile **kaynak** sunucusu arasÄ±ndaki baÄŸlantÄ±larÄ± **mÃ¼ÅŸteri** [**SSL sertifikalarÄ±**](https://socradar.io/how-to-monitor-your-ssl-certificates-expiration-easily-and-why/) **ile doÄŸrulamaya** dayanÄ±r.

MÃ¼ÅŸteriler, kendi sertifikalarÄ±nÄ± yapÄ±landÄ±rmak yerine, Cloudflare'Ä±n sertifikasÄ±nÄ± kullanarak Cloudflare'dan gelen herhangi bir baÄŸlantÄ±ya izin verebilir, **kiracÄ±dan baÄŸÄ±msÄ±z olarak**.

{% hint style="danger" %}
Bu nedenle, bir saldÄ±rgan, Cloudflare'Ä±n sertifikasÄ±nÄ± kullanarak bir **alan adÄ±nÄ± Cloudflare'a ayarlayabilir ve** onu **kurban** alan adÄ±nÄ±n **IP** adresine yÃ¶nlendirebilir. Bu ÅŸekilde, kendi alan adÄ±nÄ± tamamen korumasÄ±z bir ÅŸekilde ayarlayarak, Cloudflare gÃ¶nderilen istekleri korumaz.
{% endhint %}

Daha fazla bilgi iÃ§in [**buraya**](https://socradar.io/cloudflare-protection-bypass-vulnerability-on-threat-actors-radar/) bakÄ±n.

### Cloudflare IP Adreslerini Beyaz Listeye Alma

Bu, **Cloudflare'dan kaynaklanmayan baÄŸlantÄ±larÄ± reddeder**. Bu, bir saldÄ±rganÄ±n kendi alan adÄ±nÄ± Cloudflare'a yÃ¶nlendirdiÄŸi ve kurbanÄ±n IP adresine saldÄ±rdÄ±ÄŸÄ± Ã¶nceki yapÄ±landÄ±rmaya da savunmasÄ±zdÄ±r.

Daha fazla bilgi iÃ§in [**buraya**](https://socradar.io/cloudflare-protection-bypass-vulnerability-on-threat-actors-radar/) bakÄ±n.

## KazÄ±ma iÃ§in Cloudflare'Ä± GeÃ§me

### Ã–nbellek

Bazen sadece web sayfasÄ±nÄ± kazÄ±mak iÃ§in Cloudflare'Ä± geÃ§mek istersiniz. Bunun iÃ§in bazÄ± seÃ§enekler vardÄ±r:

* Google Ã¶nbelleÄŸini kullanÄ±n: `https://webcache.googleusercontent.com/search?q=cache:https://www.petsathome.com/shop/en/pets/dog`
* [https://archive.org/web/](https://archive.org/web/) gibi diÄŸer Ã¶nbellek hizmetlerini kullanÄ±n

### Cloudflare Ã‡Ã¶zÃ¼cÃ¼leri

BirÃ§ok Cloudflare Ã§Ã¶zÃ¼cÃ¼sÃ¼ geliÅŸtirilmiÅŸtir:

* [FlareSolverr](https://github.com/FlareSolverr/FlareSolverr)
* [cloudscraper](https://github.com/VeNoMouS/cloudscraper) [KÄ±lavuz burada](https://scrapeops.io/python-web-scraping-playbook/python-cloudscraper/)
* [cloudflare-scrape](https://github.com/Anorov/cloudflare-scrape)
* [CloudflareSolverRe](https://github.com/RyuzakiH/CloudflareSolverRe)
* [Cloudflare-IUAM-Solver](https://github.com/ninja-beans/cloudflare-iuam-solver)
* [cloudflare-bypass](https://github.com/devgianlu/cloudflare-bypass) \[ArÅŸivlenmiÅŸ]
* [CloudflareSolverRe](https://github.com/RyuzakiH/CloudflareSolverRe)

### GÃ¼Ã§lendirilmiÅŸ BaÅŸsÄ±z TarayÄ±cÄ±lar <a href="#option-4-scrape-with-fortified-headless-browsers" id="option-4-scrape-with-fortified-headless-browsers"></a>

Otomatik bir tarayÄ±cÄ± olarak algÄ±lanmayan bir baÅŸsÄ±z tarayÄ±cÄ± kullanÄ±n (bunu Ã¶zelleÅŸtirmeniz gerekebilir). BazÄ± seÃ§enekler ÅŸunlardÄ±r:

* **Puppeteer:** [puppeteer](https://github.com/puppeteer/puppeteer) iÃ§in [gizlilik eklentisi](https://github.com/berstend/puppeteer-extra/tree/master/packages/puppeteer-extra-plugin-stealth).
* **Playwright:** [Playwright](https://github.com/microsoft/playwright) iÃ§in [gizlilik eklentisi](https://www.npmjs.com/package/playwright-stealth) yakÄ±nda gelecek. GeliÅŸmeleri [buradan](https://github.com/berstend/puppeteer-extra/issues/454) ve [buradan](https://github.com/berstend/puppeteer-extra/tree/master/packages/playwright-extra) takip edin.
* **Selenium:** [undetected-chromedriver](https://github.com/ultrafunkamsterdam/undetected-chromedriver) optimize edilmiÅŸ bir Selenium Chromedriver yamasÄ±.

### Cloudflare Ä°Ã§eren AkÄ±llÄ± Proxy <a href="#option-5-smart-proxy-with-cloudflare-built-in-bypass" id="option-5-smart-proxy-with-cloudflare-built-in-bypass"></a>

**AkÄ±llÄ± proxy'ler**, Cloudflare'Ä±n gÃ¼venlik Ã¶nlemlerini atlatmayÄ± hedefleyen Ã¶zel ÅŸirketler tarafÄ±ndan sÃ¼rekli gÃ¼ncellenen proxy'lerdir (Ã§Ã¼nkÃ¼ bu onlarÄ±n iÅŸidir).

Bunlardan bazÄ±larÄ± ÅŸunlardÄ±r:
* [ScraperAPI](https://www.scraperapi.com/?fp_ref=scrapeops)
* [Scrapingbee](https://www.scrapingbee.com/?fpr=scrapeops)
* [Oxylabs](https://oxylabs.go2cloud.org/aff_c?offer_id=7&aff_id=379&url_id=32)
* [Smartproxy](https://prf.hn/click/camref:1100loxdG/[p_id:1100l442001]/destination:https%3A%2F%2Fsmartproxy.com%2Fscraping%2Fweb) Ã¶zel Cloudflare atlatma mekanizmalarÄ±yla bilinir.

Optimize edilmiÅŸ bir Ã§Ã¶zÃ¼m arayanlar iÃ§in [ScrapeOps Proxy Aggregator](https://scrapeops.io/proxy-aggregator/) Ã¶ne Ã§Ä±kar. Bu hizmet, 20'den fazla proxy saÄŸlayÄ±cÄ±yÄ± tek bir API'ye entegre ederek, hedef alanlarÄ±nÄ±z iÃ§in en iyi ve maliyet etkin proxy'yi otomatik olarak seÃ§er ve bÃ¶ylece Cloudflare'Ä±n savunmalarÄ±nÄ± geÃ§mek iÃ§in Ã¼stÃ¼n bir seÃ§enek sunar.

### Cloudflare Anti-Bot KorumasÄ±nÄ± Tersine MÃ¼hendislik Yapma <a href="#option-6-reverse-engineer-cloudflare-anti-bot-protection" id="option-6-reverse-engineer-cloudflare-anti-bot-protection"></a>

Cloudflare'Ä±n anti-bot Ã¶nlemlerini tersine mÃ¼hendislik yapmak, birÃ§ok baÅŸsÄ±z tarayÄ±cÄ± Ã§alÄ±ÅŸtÄ±rmak iÃ§in yÃ¼ksek maliyetli olmadan geniÅŸ Ã§aplÄ± web kazÄ±ma iÃ§in kullanÄ±lan bir taktiktir.

**Avantajlar:** Bu yÃ¶ntem, bÃ¼yÃ¼k Ã¶lÃ§ekli operasyonlar iÃ§in ideal olan Cloudflare'Ä±n kontrollerine Ã¶zel olarak hedeflenen son derece verimli bir atlatma oluÅŸturmayÄ± saÄŸlar.

**Dezavantajlar:** DezavantajÄ±, Cloudflare'Ä±n kasÄ±tlÄ± olarak belirsiz olan anti-bot sistemini anlama ve aldatma karmaÅŸÄ±klÄ±ÄŸÄ±dÄ±r. FarklÄ± stratejileri test etmek ve Cloudflare korumalarÄ±nÄ± geliÅŸtirdikÃ§e atlatmayÄ± gÃ¼ncellemek iÃ§in sÃ¼rekli Ã§aba gerektirir.

Bunu nasÄ±l yapacaÄŸÄ±nÄ±za dair daha fazla bilgiyi [orijinal makalede](https://scrapeops.io/web-scraping-playbook/how-to-bypass-cloudflare/) bulabilirsiniz.



## Referanslar

* [https://scrapeops.io/web-scraping-playbook/how-to-bypass-cloudflare/](https://scrapeops.io/web-scraping-playbook/how-to-bypass-cloudflare/)

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong> ile sÄ±fÄ±rdan kahraman olmak iÃ§in AWS hackleme Ã¶ÄŸrenin</summary>

HackTricks'Ä± desteklemenin diÄŸer yollarÄ±:

* Åirketinizi HackTricks'te **reklam vermek veya HackTricks'Ä± PDF olarak indirmek** iÃ§in [**ABONELÄ°K PLANLARINA**](https://github.com/sponsors/carlospolop) gÃ¶z atÄ±n!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* Ã–zel [**NFT'lerden**](https://opensea.io/collection/the-peass-family) oluÅŸan koleksiyonumuz olan [**The PEASS Family**](https://opensea.io/collection/the-peass-family)'yi keÅŸfedin
* **ğŸ’¬ Discord grubuna** [**katÄ±lÄ±n**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) veya **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)'u **takip edin**.
* **Hacking hilelerinizi** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna **PR gÃ¶ndererek** paylaÅŸÄ±n.

</details>
