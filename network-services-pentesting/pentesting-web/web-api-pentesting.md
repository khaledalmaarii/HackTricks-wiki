# Web API Pentesting

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

<figure><img src="../../.gitbook/assets/image (48).png" alt=""><figcaption></figcaption></figure>

Use [**Trickest**](https://trickest.com/?utm\_source=hacktricks\&utm\_medium=text\&utm\_campaign=ppc\&utm\_term=trickest\&utm\_content=web-api-pentesting) to easily build and **automate workflows** powered by the world's **most advanced** community tools.\
Get Access Today:

{% embed url="https://trickest.com/?utm_source=hacktricks&utm_medium=banner&utm_campaign=ppc&utm_content=web-api-pentesting" %}

## API Pentesting Methodology Summary

Pentesting APIs involves a structured approach to uncovering vulnerabilities. This guide encapsulates a comprehensive methodology, emphasizing practical techniques and tools.

### **Understanding API Types**

* **SOAP/XML Web Services**: –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å —Ñ–æ—Ä–º–∞—Ç WSDL –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó, –∑–∞–∑–≤–∏—á–∞–π –∑–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –∑–∞ —à–ª—è—Ö–∞–º–∏ `?wsdl`. –Ü–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏, —Ç–∞–∫—ñ —è–∫ **SOAPUI** —Ç–∞ **WSDLer** (—Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è Burp Suite), —î –≤–∞–∂–ª–∏–≤–∏–º–∏ –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥—É —Ç–∞ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –∑–∞–ø–∏—Ç—ñ–≤. –ü—Ä–∏–∫–ª–∞–¥ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó –¥–æ—Å—Ç—É–ø–Ω–∏–π –Ω–∞ [DNE Online](http://www.dneonline.com/calculator.asmx).
* **REST APIs (JSON)**: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è —á–∞—Å—Ç–æ –Ω–∞–¥–∞—î—Ç—å—Å—è —É —Ñ–∞–π–ª–∞—Ö WADL, –∞–ª–µ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏, —Ç–∞–∫—ñ —è–∫ [Swagger UI](https://swagger.io/tools/swagger-ui/), –∑–∞–±–µ–∑–ø–µ—á—É—é—Ç—å –±—ñ–ª—å—à –∑—Ä—É—á–Ω–∏–π —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –≤–∑–∞—î–º–æ–¥—ñ—ó. **Postman** —î —Ü—ñ–Ω–Ω–∏–º —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–º –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–∞ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –ø—Ä–∏–∫–ª–∞–¥–∞–º–∏ –∑–∞–ø–∏—Ç—ñ–≤.
* **GraphQL**: –ú–æ–≤–∞ –∑–∞–ø–∏—Ç—ñ–≤ –¥–ª—è API, —â–æ –ø—Ä–æ–ø–æ–Ω—É—î –ø–æ–≤–Ω–∏–π —Ç–∞ –∑—Ä–æ–∑—É–º—ñ–ª–∏–π –æ–ø–∏—Å –¥–∞–Ω–∏—Ö —É –≤–∞—à–æ–º—É API.

### **Practice Labs**

* [**VAmPI**](https://github.com/erev0s/VAmPI): –ù–∞–≤–º–∏—Å–Ω–æ –≤—Ä–∞–∑–ª–∏–≤–∏–π API –¥–ª—è –ø—Ä–∞–∫—Ç–∏–∫–∏, —â–æ –æ—Ö–æ–ø–ª—é—î 10 –Ω–∞–π–ø–æ—à–∏—Ä–µ–Ω—ñ—à–∏—Ö –≤—Ä–∞–∑–ª–∏–≤–æ—Å—Ç–µ–π API –∑–∞ –≤–µ—Ä—Å—ñ—î—é OWASP.

### **Effective Tricks for API Pentesting**

* **SOAP/XML Vulnerabilities**: –î–æ—Å–ª—ñ–¥–∂—É–π—Ç–µ –≤—Ä–∞–∑–ª–∏–≤–æ—Å—Ç—ñ XXE, —Ö–æ—á–∞ –æ–≥–æ–ª–æ—à–µ–Ω–Ω—è DTD —á–∞—Å—Ç–æ –æ–±–º–µ–∂–µ–Ω—ñ. –¢–µ–≥–∏ CDATA –º–æ–∂—É—Ç—å –¥–æ–∑–≤–æ–ª–∏—Ç–∏ –≤—Å—Ç–∞–≤–∫—É –∫–æ—Ä–∏—Å–Ω–æ–≥–æ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è, —è–∫—â–æ XML –∑–∞–ª–∏—à–∞—î—Ç—å—Å—è –¥—ñ–π—Å–Ω–∏–º.
* **Privilege Escalation**: –¢–µ—Å—Ç—É–π—Ç–µ –∫—ñ–Ω—Ü–µ–≤—ñ —Ç–æ—á–∫–∏ –∑ —Ä—ñ–∑–Ω–∏–º–∏ —Ä—ñ–≤–Ω—è–º–∏ –ø—Ä–∏–≤—ñ–ª–µ—ó–≤, —â–æ–± –≤–∏—è–≤–∏—Ç–∏ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ –Ω–µ—Å–∞–Ω–∫—Ü—ñ–æ–Ω–æ–≤–∞–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø—É.
* **CORS Misconfigurations**: –î–æ—Å–ª—ñ–¥–∂—É–π—Ç–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è CORS –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç –ø–æ—Ç–µ–Ω—Ü—ñ–π–Ω–æ—ó –µ–∫—Å–ø–ª—É–∞—Ç–∞—Ü—ñ—ó —á–µ—Ä–µ–∑ CSRF-–∞—Ç–∞–∫–∏ –∑ –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–æ–≤–∞–Ω–∏—Ö —Å–µ—Å—ñ–π.
* **Endpoint Discovery**: –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ —à–∞–±–ª–æ–Ω–∏ API –¥–ª—è –≤–∏—è–≤–ª–µ–Ω–Ω—è –ø—Ä–∏—Ö–æ–≤–∞–Ω–∏—Ö –∫—ñ–Ω—Ü–µ–≤–∏—Ö —Ç–æ—á–æ–∫. –Ü–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏, —Ç–∞–∫—ñ —è–∫ —Ñ—É–∑–∑–µ—Ä–∏, –º–æ–∂—É—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏–∑—É–≤–∞—Ç–∏ —Ü–µ–π –ø—Ä–æ—Ü–µ—Å.
* **Parameter Tampering**: –ï–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—É–π—Ç–µ –∑ –¥–æ–¥–∞–≤–∞–Ω–Ω—è–º –∞–±–æ –∑–∞–º—ñ–Ω–æ—é –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤ —É –∑–∞–ø–∏—Ç–∞—Ö –¥–ª—è –¥–æ—Å—Ç—É–ø—É –¥–æ –Ω–µ—Å–∞–Ω–∫—Ü—ñ–æ–Ω–æ–≤–∞–Ω–∏—Ö –¥–∞–Ω–∏—Ö –∞–±–æ —Ñ—É–Ω–∫—Ü—ñ–π.
* **HTTP Method Testing**: –í–∞—Ä—ñ—é–π—Ç–µ –º–µ—Ç–æ–¥–∏ –∑–∞–ø–∏—Ç—ñ–≤ (GET, POST, PUT, DELETE, PATCH), —â–æ–± –≤–∏—è–≤–∏—Ç–∏ –Ω–µ—Å–ø–æ–¥—ñ–≤–∞–Ω—É –ø–æ–≤–µ–¥—ñ–Ω–∫—É –∞–±–æ —Ä–æ–∑–∫—Ä–∏—Ç—Ç—è —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó.
* **Content-Type Manipulation**: –ü–µ—Ä–µ–º–∏–∫–∞–π—Ç–µ—Å—è –º—ñ–∂ —Ä—ñ–∑–Ω–∏–º–∏ —Ç–∏–ø–∞–º–∏ –≤–º—ñ—Å—Ç—É (x-www-form-urlencoded, application/xml, application/json), —â–æ–± –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –Ω–∞—è–≤–Ω—ñ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º –∑ –ø–∞—Ä—Å–∏–Ω–≥–æ–º –∞–±–æ –≤—Ä–∞–∑–ª–∏–≤–æ—Å—Ç–µ–π.
* **Advanced Parameter Techniques**: –¢–µ—Å—Ç—É–π—Ç–µ –∑ –Ω–µ—Å–ø–æ–¥—ñ–≤–∞–Ω–∏–º–∏ —Ç–∏–ø–∞–º–∏ –¥–∞–Ω–∏—Ö —É JSON-–Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è—Ö –∞–±–æ –≥—Ä–∞–π—Ç–µ –∑ XML-–¥–∞–Ω–∏–º–∏ –¥–ª—è XXE-—ñ–Ω'—î–∫—Ü—ñ–π. –¢–∞–∫–æ–∂ —Å–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–±—Ä—É–¥–Ω–µ–Ω–Ω—è –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤ —ñ —Å–∏–º–≤–æ–ª–∏ –ø—ñ–¥—Å—Ç–∞–Ω–æ–≤–∫–∏ –¥–ª—è –±—ñ–ª—å—à —à–∏—Ä–æ–∫–æ–≥–æ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è.
* **Version Testing**: –°—Ç–∞—Ä—ñ –≤–µ—Ä—Å—ñ—ó API –º–æ–∂—É—Ç—å –±—É—Ç–∏ –±—ñ–ª—å—à –≤—Ä–∞–∑–ª–∏–≤–∏–º–∏ –¥–æ –∞—Ç–∞–∫. –ó–∞–≤–∂–¥–∏ –ø–µ—Ä–µ–≤—ñ—Ä—è–π—Ç–µ —Ç–∞ —Ç–µ—Å—Ç—É–π—Ç–µ –ø—Ä–æ—Ç–∏ –∫—ñ–ª—å–∫–æ—Ö –≤–µ—Ä—Å—ñ–π API.

### **Tools and Resources for API Pentesting**

* [**kiterunner**](https://github.com/assetnote/kiterunner): –ß—É–¥–æ–≤–æ –ø—ñ–¥—Ö–æ–¥–∏—Ç—å –¥–ª—è –≤–∏—è–≤–ª–µ–Ω–Ω—è –∫—ñ–Ω—Ü–µ–≤–∏—Ö —Ç–æ—á–æ–∫ API. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –π–æ–≥–æ –¥–ª—è —Å–∫–∞–Ω—É–≤–∞–Ω–Ω—è —Ç–∞ –±—Ä—É—Ç—Ñ–æ—Ä—Å–∏–Ω–≥—É —à–ª—è—Ö—ñ–≤ —ñ –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤ –ø—Ä–æ—Ç–∏ —Ü—ñ–ª—å–æ–≤–∏—Ö API.
```bash
kr scan https://domain.com/api/ -w routes-large.kite -x 20
kr scan https://domain.com/api/ -A=apiroutes-220828 -x 20
kr brute https://domain.com/api/ -A=raft-large-words -x 20 -d=0
kr brute https://domain.com/api/ -w /tmp/lang-english.txt -x 20 -d=0
```
* –î–æ–¥–∞—Ç–∫–æ–≤—ñ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏, —Ç–∞–∫—ñ —è–∫ **automatic-api-attack-tool**, **Astra** —Ç–∞ **restler-fuzzer**, –ø—Ä–æ–ø–æ–Ω—É—é—Ç—å —Å–ø–µ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –±–µ–∑–ø–µ–∫–∏ API, –ø–æ—á–∏–Ω–∞—é—á–∏ –≤—ñ–¥ —Å–∏–º—É–ª—è—Ü—ñ—ó –∞—Ç–∞–∫ –¥–æ —Ñ—É–∑–∑–∏–Ω–≥—É —Ç–∞ —Å–∫–∞–Ω—É–≤–∞–Ω–Ω—è –≤—Ä–∞–∑–ª–∏–≤–æ—Å—Ç–µ–π.
* [**Cherrybomb**](https://github.com/blst-security/cherrybomb): –¶–µ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –±–µ–∑–ø–µ–∫–∏ API, —è–∫–∏–π –ø–µ—Ä–µ–≤—ñ—Ä—è—î –≤–∞—à API –Ω–∞ –æ—Å–Ω–æ–≤—ñ —Ñ–∞–π–ª—É OAS (—ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –Ω–∞–ø–∏—Å–∞–Ω–∏–π –Ω–∞ Rust).

### **–†–µ—Å—É—Ä—Å–∏ –¥–ª—è –Ω–∞–≤—á–∞–Ω–Ω—è —Ç–∞ –ø—Ä–∞–∫—Ç–∏–∫–∏**

* **OWASP API Security Top 10**: –û—Å–Ω–æ–≤–Ω–µ —á–∏—Ç–∞–Ω–Ω—è –¥–ª—è —Ä–æ–∑—É–º—ñ–Ω–Ω—è –ø–æ—à–∏—Ä–µ–Ω–∏—Ö –≤—Ä–∞–∑–ª–∏–≤–æ—Å—Ç–µ–π API ([OWASP Top 10](https://github.com/OWASP/API-Security/blob/master/2019/en/dist/owasp-api-security-top-10.pdf)).
* **API Security Checklist**: –í—Å–µ–æ—Å—è–∂–Ω–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω–∏–π —Å–ø–∏—Å–æ–∫ –¥–ª—è –∑–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è –±–µ–∑–ø–µ–∫–∏ API ([GitHub link](https://github.com/shieldfy/API-Security-Checklist)).
* **Logger++ Filters**: –î–ª—è –ø–æ—à—É–∫—É –≤—Ä–∞–∑–ª–∏–≤–æ—Å—Ç–µ–π API, Logger++ –ø—Ä–æ–ø–æ–Ω—É—î –∫–æ—Ä–∏—Å–Ω—ñ —Ñ—ñ–ª—å—Ç—Ä–∏ ([GitHub link](https://github.com/bnematzadeh/LoggerPlusPlus-API-Filters)).
* **API Endpoints List**: –ö—É—Ä–∞—Ç–æ—Ä—Å—å–∫–∏–π —Å–ø–∏—Å–æ–∫ –ø–æ—Ç–µ–Ω—Ü—ñ–π–Ω–∏—Ö –∫—ñ–Ω—Ü–µ–≤–∏—Ö —Ç–æ—á–æ–∫ API –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è ([GitHub gist](https://gist.github.com/yassineaboukir/8e12adefbd505ef704674ad6ad48743d)).

## –ü–æ—Å–∏–ª–∞–Ω–Ω—è

* [https://github.com/Cyber-Guy1/API-SecurityEmpire](https://github.com/Cyber-Guy1/API-SecurityEmpire)

<figure><img src="../../.gitbook/assets/image (48).png" alt=""><figcaption></figcaption></figure>

–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ [**Trickest**](https://trickest.com/?utm\_source=hacktricks\&utm\_medium=text\&utm\_campaign=ppc\&utm\_term=trickest\&utm\_content=web-api-pentesting) –¥–ª—è –ª–µ–≥–∫–æ–≥–æ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–∞ **–∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—ó —Ä–æ–±–æ—á–∏—Ö –ø—Ä–æ—Ü–µ—Å—ñ–≤**, –ø—ñ–¥—Ç—Ä–∏–º—É–≤–∞–Ω–∏—Ö **–Ω–∞–π—Å—É—á–∞—Å–Ω—ñ—à–∏–º–∏** —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏ —Å–ø—ñ–ª—å–Ω–æ—Ç–∏.\
–û—Ç—Ä–∏–º–∞–π—Ç–µ –¥–æ—Å—Ç—É–ø —Å—å–æ–≥–æ–¥–Ω—ñ:

{% embed url="https://trickest.com/?utm_source=hacktricks&utm_medium=banner&utm_campaign=ppc&utm_content=web-api-pentesting" %}

{% hint style="success" %}
–ù–∞–≤—á–∞–π—Ç–µ—Å—è —Ç–∞ –ø—Ä–∞–∫—Ç–∏–∫—É–π—Ç–µ Hacking AWS:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
–ù–∞–≤—á–∞–π—Ç–µ—Å—è —Ç–∞ –ø—Ä–∞–∫—Ç–∏–∫—É–π—Ç–µ Hacking GCP: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>–ü—ñ–¥—Ç—Ä–∏–º–∞—Ç–∏ HackTricks</summary>

* –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ [**–ø–ª–∞–Ω–∏ –ø—ñ–¥–ø–∏—Å–∫–∏**](https://github.com/sponsors/carlospolop)!
* **–ü—Ä–∏—î–¥–Ω—É–π—Ç–µ—Å—å –¥–æ** üí¨ [**–≥—Ä—É–ø–∏ Discord**](https://discord.gg/hRep4RUj7f) –∞–±–æ [**–≥—Ä—É–ø–∏ Telegram**](https://t.me/peass) –∞–±–æ **—Å–ª—ñ–¥–∫—É–π—Ç–µ** –∑–∞ –Ω–∞–º–∏ –≤ **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **–î—ñ–ª—ñ—Ç—å—Å—è —Ö–∞–∫–µ—Ä—Å—å–∫–∏–º–∏ —Ç—Ä—é–∫–∞–º–∏, –Ω–∞–¥—Å–∏–ª–∞—é—á–∏ PR –¥–æ** [**HackTricks**](https://github.com/carlospolop/hacktricks) —Ç–∞ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó–≤ –Ω–∞ GitHub.

</details>
{% endhint %}
