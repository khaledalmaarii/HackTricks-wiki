# Web API Pentesting

{% hint style="success" %}
å­¦ä¹ å’Œå®è·µ AWS é»‘å®¢æŠ€æœ¯ï¼š<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks åŸ¹è®­ AWS çº¢é˜Ÿä¸“å®¶ (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
å­¦ä¹ å’Œå®è·µ GCP é»‘å®¢æŠ€æœ¯ï¼š<img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks åŸ¹è®­ GCP çº¢é˜Ÿä¸“å®¶ (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>æ”¯æŒ HackTricks</summary>

* æŸ¥çœ‹ [**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**Telegram ç¾¤ç»„**](https://t.me/peass) æˆ– **å…³æ³¨** æˆ‘ä»¬çš„ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub ä»“åº“æäº¤ PR åˆ†äº«é»‘å®¢æŠ€å·§ã€‚

</details>
{% endhint %}

<figure><img src="../../.gitbook/assets/image (48).png" alt=""><figcaption></figcaption></figure>

ä½¿ç”¨ [**Trickest**](https://trickest.com/?utm\_source=hacktricks\&utm\_medium=text\&utm\_campaign=ppc\&utm\_term=trickest\&utm\_content=web-api-pentesting) è½»æ¾æ„å»ºå’Œ **è‡ªåŠ¨åŒ–å·¥ä½œæµ**ï¼Œç”±ä¸–ç•Œä¸Š **æœ€å…ˆè¿›** çš„ç¤¾åŒºå·¥å…·æä¾›æ”¯æŒã€‚\
ä»Šå¤©å°±è·å–è®¿é—®æƒé™ï¼š

{% embed url="https://trickest.com/?utm_source=hacktricks&utm_medium=banner&utm_campaign=ppc&utm_content=web-api-pentesting" %}

## API æ¸—é€æµ‹è¯•æ–¹æ³•æ¦‚è¿°

æ¸—é€æµ‹è¯• API æ¶‰åŠä¸€ç§ç»“æ„åŒ–çš„æ–¹æ³•æ¥å‘ç°æ¼æ´ã€‚æœ¬æŒ‡å—æ¦‚æ‹¬äº†ä¸€ç§å…¨é¢çš„æ–¹æ³•è®ºï¼Œå¼ºè°ƒå®ç”¨çš„æŠ€æœ¯å’Œå·¥å…·ã€‚

### **ç†è§£ API ç±»å‹**

* **SOAP/XML Web æœåŠ¡**ï¼šä½¿ç”¨ WSDL æ ¼å¼è¿›è¡Œæ–‡æ¡£è®°å½•ï¼Œé€šå¸¸ä½äº `?wsdl` è·¯å¾„ã€‚åƒ **SOAPUI** å’Œ **WSDLer**ï¼ˆBurp Suite æ‰©å±•ï¼‰è¿™æ ·çš„å·¥å…·å¯¹äºè§£æå’Œç”Ÿæˆè¯·æ±‚è‡³å…³é‡è¦ã€‚ç¤ºä¾‹æ–‡æ¡£å¯åœ¨ [DNE Online](http://www.dneonline.com/calculator.asmx) è·å–ã€‚
* **REST APIs (JSON)**ï¼šæ–‡æ¡£é€šå¸¸ä»¥ WADL æ–‡ä»¶å½¢å¼æä¾›ï¼Œä½†åƒ [Swagger UI](https://swagger.io/tools/swagger-ui/) è¿™æ ·çš„å·¥å…·æä¾›äº†æ›´å‹å¥½çš„äº¤äº’ç•Œé¢ã€‚**Postman** æ˜¯åˆ›å»ºå’Œç®¡ç†ç¤ºä¾‹è¯·æ±‚çš„æœ‰ä»·å€¼å·¥å…·ã€‚
* **GraphQL**ï¼šä¸€ç§ç”¨äº API çš„æŸ¥è¯¢è¯­è¨€ï¼Œæä¾›å¯¹ API ä¸­æ•°æ®çš„å®Œæ•´å’Œå¯ç†è§£çš„æè¿°ã€‚

### **å®è·µå®éªŒå®¤**

* [**VAmPI**](https://github.com/erev0s/VAmPI)ï¼šä¸€ä¸ªæ•…æ„å­˜åœ¨æ¼æ´çš„ APIï¼Œä¾›å®è·µä½¿ç”¨ï¼Œæ¶µç›– OWASP å‰ 10 å¤§ API æ¼æ´ã€‚

### **API æ¸—é€æµ‹è¯•çš„æœ‰æ•ˆæŠ€å·§**

* **SOAP/XML æ¼æ´**ï¼šæ¢ç´¢ XXE æ¼æ´ï¼Œå°½ç®¡ DTD å£°æ˜é€šå¸¸å—åˆ°é™åˆ¶ã€‚å¦‚æœ XML ä¿æŒæœ‰æ•ˆï¼ŒCDATA æ ‡ç­¾å¯èƒ½å…è®¸æœ‰æ•ˆè´Ÿè½½æ’å…¥ã€‚
* **æƒé™æå‡**ï¼šæµ‹è¯•å…·æœ‰ä¸åŒæƒé™çº§åˆ«çš„ç«¯ç‚¹ï¼Œä»¥è¯†åˆ«æœªæˆæƒè®¿é—®çš„å¯èƒ½æ€§ã€‚
* **CORS é…ç½®é”™è¯¯**ï¼šæ£€æŸ¥ CORS è®¾ç½®ï¼Œä»¥å¯»æ‰¾é€šè¿‡å·²è®¤è¯ä¼šè¯çš„ CSRF æ”»å‡»çš„æ½œåœ¨åˆ©ç”¨ç‚¹ã€‚
* **ç«¯ç‚¹å‘ç°**ï¼šåˆ©ç”¨ API æ¨¡å¼å‘ç°éšè—çš„ç«¯ç‚¹ã€‚åƒæ¨¡ç³Šæµ‹è¯•å·¥å…·å¯ä»¥è‡ªåŠ¨åŒ–æ­¤è¿‡ç¨‹ã€‚
* **å‚æ•°ç¯¡æ”¹**ï¼šå°è¯•åœ¨è¯·æ±‚ä¸­æ·»åŠ æˆ–æ›¿æ¢å‚æ•°ï¼Œä»¥è®¿é—®æœªæˆæƒçš„æ•°æ®æˆ–åŠŸèƒ½ã€‚
* **HTTP æ–¹æ³•æµ‹è¯•**ï¼šæ›´æ”¹è¯·æ±‚æ–¹æ³•ï¼ˆGETã€POSTã€PUTã€DELETEã€PATCHï¼‰ï¼Œä»¥å‘ç°æ„å¤–è¡Œä¸ºæˆ–ä¿¡æ¯æ³„éœ²ã€‚
* **å†…å®¹ç±»å‹æ“æ§**ï¼šåœ¨ä¸åŒå†…å®¹ç±»å‹ï¼ˆx-www-form-urlencodedã€application/xmlã€application/jsonï¼‰ä¹‹é—´åˆ‡æ¢ï¼Œä»¥æµ‹è¯•è§£æé—®é¢˜æˆ–æ¼æ´ã€‚
* **é«˜çº§å‚æ•°æŠ€æœ¯**ï¼šåœ¨ JSON æœ‰æ•ˆè´Ÿè½½ä¸­æµ‹è¯•æ„å¤–æ•°æ®ç±»å‹ï¼Œæˆ–ç©å¼„ XML æ•°æ®ä»¥è¿›è¡Œ XXE æ³¨å…¥ã€‚åŒæ—¶ï¼Œå°è¯•å‚æ•°æ±¡æŸ“å’Œé€šé…ç¬¦å­—ç¬¦ä»¥è¿›è¡Œæ›´å¹¿æ³›çš„æµ‹è¯•ã€‚
* **ç‰ˆæœ¬æµ‹è¯•**ï¼šè¾ƒæ—§çš„ API ç‰ˆæœ¬å¯èƒ½æ›´å®¹æ˜“å—åˆ°æ”»å‡»ã€‚å§‹ç»ˆæ£€æŸ¥å¹¶æµ‹è¯•å¤šä¸ª API ç‰ˆæœ¬ã€‚

### **API æ¸—é€æµ‹è¯•çš„å·¥å…·å’Œèµ„æº**

* [**kiterunner**](https://github.com/assetnote/kiterunner)ï¼šéå¸¸é€‚åˆå‘ç° API ç«¯ç‚¹ã€‚ä½¿ç”¨å®ƒæ‰«æå’Œæš´åŠ›ç ´è§£è·¯å¾„å’Œå‚æ•°ï¼Œä»¥é’ˆå¯¹ç›®æ ‡ APIã€‚
```bash
kr scan https://domain.com/api/ -w routes-large.kite -x 20
kr scan https://domain.com/api/ -A=apiroutes-220828 -x 20
kr brute https://domain.com/api/ -A=raft-large-words -x 20 -d=0
kr brute https://domain.com/api/ -w /tmp/lang-english.txt -x 20 -d=0
```
* å…¶ä»–å·¥å…·å¦‚ **automatic-api-attack-tool**ã€**Astra** å’Œ **restler-fuzzer** æä¾›é’ˆå¯¹ API å®‰å…¨æµ‹è¯•çš„å®šåˆ¶åŠŸèƒ½ï¼Œä»æ”»å‡»æ¨¡æ‹Ÿåˆ°æ¨¡ç³Šæµ‹è¯•å’Œæ¼æ´æ‰«æã€‚
* [**Cherrybomb**](https://github.com/blst-security/cherrybomb)ï¼šè¿™æ˜¯ä¸€ä¸ªåŸºäº OAS æ–‡ä»¶å®¡è®¡æ‚¨çš„ API çš„ API å®‰å…¨å·¥å…·ï¼ˆè¯¥å·¥å…·ç”¨ Rust ç¼–å†™ï¼‰ã€‚

### **å­¦ä¹ å’Œå®è·µèµ„æº**

* **OWASP API å®‰å…¨å‰ 10**ï¼šäº†è§£å¸¸è§ API æ¼æ´çš„å¿…è¯»ææ–™ ([OWASP Top 10](https://github.com/OWASP/API-Security/blob/master/2019/en/dist/owasp-api-security-top-10.pdf))ã€‚
* **API å®‰å…¨æ£€æŸ¥æ¸…å•**ï¼šä¸€ä¸ªå…¨é¢çš„ API å®‰å…¨æ£€æŸ¥æ¸…å• ([GitHub link](https://github.com/shieldfy/API-Security-Checklist))ã€‚
* **Logger++ è¿‡æ»¤å™¨**ï¼šç”¨äºå¯»æ‰¾ API æ¼æ´ï¼ŒLogger++ æä¾›æœ‰ç”¨çš„è¿‡æ»¤å™¨ ([GitHub link](https://github.com/bnematzadeh/LoggerPlusPlus-API-Filters))ã€‚
* **API ç«¯ç‚¹åˆ—è¡¨**ï¼šä¸€ä¸ªä¸ºæµ‹è¯•ç›®çš„æ•´ç†çš„æ½œåœ¨ API ç«¯ç‚¹åˆ—è¡¨ ([GitHub gist](https://gist.github.com/yassineaboukir/8e12adefbd505ef704674ad6ad48743d))ã€‚

## å‚è€ƒèµ„æ–™

* [https://github.com/Cyber-Guy1/API-SecurityEmpire](https://github.com/Cyber-Guy1/API-SecurityEmpire)

<figure><img src="../../.gitbook/assets/image (48).png" alt=""><figcaption></figcaption></figure>

ä½¿ç”¨ [**Trickest**](https://trickest.com/?utm\_source=hacktricks\&utm\_medium=text\&utm\_campaign=ppc\&utm\_term=trickest\&utm\_content=web-api-pentesting) è½»æ¾æ„å»ºå’Œ **è‡ªåŠ¨åŒ–å·¥ä½œæµ**ï¼Œç”±ä¸–ç•Œä¸Š **æœ€å…ˆè¿›** çš„ç¤¾åŒºå·¥å…·æä¾›æ”¯æŒã€‚\
ä»Šå¤©å°±è·å–è®¿é—®æƒé™ï¼š

{% embed url="https://trickest.com/?utm_source=hacktricks&utm_medium=banner&utm_campaign=ppc&utm_content=web-api-pentesting" %}

{% hint style="success" %}
å­¦ä¹ å’Œå®è·µ AWS é»‘å®¢æŠ€æœ¯ï¼š<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks åŸ¹è®­ AWS çº¢é˜Ÿä¸“å®¶ (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
å­¦ä¹ å’Œå®è·µ GCP é»‘å®¢æŠ€æœ¯ï¼š<img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks åŸ¹è®­ GCP çº¢é˜Ÿä¸“å®¶ (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>æ”¯æŒ HackTricks</summary>

* æŸ¥çœ‹ [**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**telegram ç¾¤ç»„**](https://t.me/peass) æˆ– **åœ¨** **Twitter** ğŸ¦ **ä¸Šå…³æ³¨æˆ‘ä»¬** [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github ä»“åº“æäº¤ PR åˆ†äº«é»‘å®¢æŠ€å·§ã€‚

</details>
{% endhint %}
