# Web API Pentesting

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

<figure><img src="../../.gitbook/assets/image (48).png" alt=""><figcaption></figcaption></figure>

Use [**Trickest**](https://trickest.com/?utm\_source=hacktricks\&utm\_medium=text\&utm\_campaign=ppc\&utm\_term=trickest\&utm\_content=web-api-pentesting) to easily build and **automate workflows** powered by the world's **most advanced** community tools.\
Get Access Today:

{% embed url="https://trickest.com/?utm_source=hacktricks&utm_medium=banner&utm_campaign=ppc&utm_content=web-api-pentesting" %}

## API Pentesting Methodology Summary

Pentesting APIs implique une approche structur√©e pour d√©couvrir des vuln√©rabilit√©s. Ce guide encapsule une m√©thodologie compl√®te, mettant l'accent sur des techniques et outils pratiques.

### **Understanding API Types**

* **SOAP/XML Web Services** : Utilisent le format WSDL pour la documentation, g√©n√©ralement trouv√© aux chemins `?wsdl`. Des outils comme **SOAPUI** et **WSDLer** (Burp Suite Extension) sont essentiels pour analyser et g√©n√©rer des requ√™tes. La documentation d'exemple est accessible sur [DNE Online](http://www.dneonline.com/calculator.asmx).
* **REST APIs (JSON)** : La documentation se pr√©sente souvent sous forme de fichiers WADL, mais des outils comme [Swagger UI](https://swagger.io/tools/swagger-ui/) offrent une interface plus conviviale pour l'interaction. **Postman** est un outil pr√©cieux pour cr√©er et g√©rer des requ√™tes d'exemple.
* **GraphQL** : Un langage de requ√™te pour les API offrant une description compl√®te et compr√©hensible des donn√©es dans votre API.

### **Practice Labs**

* [**VAmPI**](https://github.com/erev0s/VAmPI) : Une API d√©lib√©r√©ment vuln√©rable pour une pratique concr√®te, couvrant les 10 principales vuln√©rabilit√©s API de l'OWASP.

### **Effective Tricks for API Pentesting**

* **SOAP/XML Vulnerabilities** : Explorez les vuln√©rabilit√©s XXE, bien que les d√©clarations DTD soient souvent restreintes. Les balises CDATA peuvent permettre l'insertion de charges utiles si le XML reste valide.
* **Privilege Escalation** : Testez les points de terminaison avec diff√©rents niveaux de privil√®ges pour identifier les possibilit√©s d'acc√®s non autoris√©.
* **CORS Misconfigurations** : Examinez les param√®tres CORS pour une √©ventuelle exploitabilit√© via des attaques CSRF √† partir de sessions authentifi√©es.
* **Endpoint Discovery** : Exploitez les mod√®les d'API pour d√©couvrir des points de terminaison cach√©s. Des outils comme les fuzzers peuvent automatiser ce processus.
* **Parameter Tampering** : Exp√©rimentez en ajoutant ou en rempla√ßant des param√®tres dans les requ√™tes pour acc√©der √† des donn√©es ou fonctionnalit√©s non autoris√©es.
* **HTTP Method Testing** : Variez les m√©thodes de requ√™te (GET, POST, PUT, DELETE, PATCH) pour d√©couvrir des comportements inattendus ou des divulgations d'informations.
* **Content-Type Manipulation** : Alternez entre diff√©rents types de contenu (x-www-form-urlencoded, application/xml, application/json) pour tester des probl√®mes d'analyse ou des vuln√©rabilit√©s.
* **Advanced Parameter Techniques** : Testez avec des types de donn√©es inattendus dans les charges utiles JSON ou jouez avec des donn√©es XML pour des injections XXE. Essayez √©galement la pollution de param√®tres et les caract√®res g√©n√©riques pour des tests plus larges.
* **Version Testing** : Les anciennes versions d'API peuvent √™tre plus susceptibles aux attaques. V√©rifiez toujours et testez contre plusieurs versions d'API.

### **Tools and Resources for API Pentesting**

* [**kiterunner**](https://github.com/assetnote/kiterunner) : Excellent pour d√©couvrir des points de terminaison API. Utilisez-le pour scanner et forcer les chemins et param√®tres contre les API cibles.
```bash
kr scan https://domain.com/api/ -w routes-large.kite -x 20
kr scan https://domain.com/api/ -A=apiroutes-220828 -x 20
kr brute https://domain.com/api/ -A=raft-large-words -x 20 -d=0
kr brute https://domain.com/api/ -w /tmp/lang-english.txt -x 20 -d=0
```
* Des outils suppl√©mentaires comme **automatic-api-attack-tool**, **Astra** et **restler-fuzzer** offrent des fonctionnalit√©s adapt√©es pour les tests de s√©curit√© des API, allant de la simulation d'attaque au fuzzing et √† l'analyse de vuln√©rabilit√©s.
* [**Cherrybomb**](https://github.com/blst-security/cherrybomb) : C'est un outil de s√©curit√© API qui audite votre API bas√© sur un fichier OAS (l'outil est √©crit en rust).

### **Ressources d'apprentissage et de pratique**

* **OWASP API Security Top 10** : Lecture essentielle pour comprendre les vuln√©rabilit√©s API courantes ([OWASP Top 10](https://github.com/OWASP/API-Security/blob/master/2019/en/dist/owasp-api-security-top-10.pdf)).
* **API Security Checklist** : Une liste de contr√¥le compl√®te pour s√©curiser les API ([lien GitHub](https://github.com/shieldfy/API-Security-Checklist)).
* **Logger++ Filters** : Pour chasser les vuln√©rabilit√©s API, Logger++ offre des filtres utiles ([lien GitHub](https://github.com/bnematzadeh/LoggerPlusPlus-API-Filters)).
* **API Endpoints List** : Une liste soigneusement s√©lectionn√©e de points de terminaison API potentiels √† des fins de test ([gist GitHub](https://gist.github.com/yassineaboukir/8e12adefbd505ef704674ad6ad48743d)).

## R√©f√©rences

* [https://github.com/Cyber-Guy1/API-SecurityEmpire](https://github.com/Cyber-Guy1/API-SecurityEmpire)

<figure><img src="../../.gitbook/assets/image (48).png" alt=""><figcaption></figcaption></figure>

Utilisez [**Trickest**](https://trickest.com/?utm\_source=hacktricks\&utm\_medium=text\&utm\_campaign=ppc\&utm\_term=trickest\&utm\_content=web-api-pentesting) pour construire facilement et **automatiser des flux de travail** aliment√©s par les **outils communautaires les plus avanc√©s** au monde.\
Acc√©dez d√®s aujourd'hui :

{% embed url="https://trickest.com/?utm_source=hacktricks&utm_medium=banner&utm_campaign=ppc&utm_content=web-api-pentesting" %}

{% hint style="success" %}
Apprenez et pratiquez le Hacking AWS :<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Apprenez et pratiquez le Hacking GCP : <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Soutenir HackTricks</summary>

* Consultez les [**plans d'abonnement**](https://github.com/sponsors/carlospolop) !
* **Rejoignez le** üí¨ [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe telegram**](https://t.me/peass) ou **suivez-nous sur** **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Partagez des astuces de hacking en soumettant des PR aux** [**HackTricks**](https://github.com/carlospolop/hacktricks) et [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) d√©p√¥ts GitHub.

</details>
{% endhint %}
