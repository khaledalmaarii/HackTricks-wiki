# Web API Pentesting

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

<figure><img src="../../.gitbook/assets/image (48).png" alt=""><figcaption></figcaption></figure>

Use [**Trickest**](https://trickest.com/?utm\_source=hacktricks\&utm\_medium=text\&utm\_campaign=ppc\&utm\_term=trickest\&utm\_content=web-api-pentesting) to easily build and **automate workflows** powered by the world's **most advanced** community tools.\
Get Access Today:

{% embed url="https://trickest.com/?utm_source=hacktricks&utm_medium=banner&utm_campaign=ppc&utm_content=web-api-pentesting" %}

## API Pentesting Methodology Summary

Pentesting APIs involves a structured approach to uncovering vulnerabilities. This guide encapsulates a comprehensive methodology, emphasizing practical techniques and tools.

### **Understanding API Types**

* **SOAP/XML Web Services**: WSDL í˜•ì‹ì„ ë¬¸ì„œí™”ì— ì‚¬ìš©í•˜ë©°, ì¼ë°˜ì ìœ¼ë¡œ `?wsdl` ê²½ë¡œì—ì„œ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. **SOAPUI** ë° **WSDLer** (Burp Suite Extension)ì™€ ê°™ì€ ë„êµ¬ëŠ” ìš”ì²­ì„ íŒŒì‹±í•˜ê³  ìƒì„±í•˜ëŠ” ë° ìœ ìš©í•©ë‹ˆë‹¤. ì˜ˆì œ ë¬¸ì„œëŠ” [DNE Online](http://www.dneonline.com/calculator.asmx)ì—ì„œ ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* **REST APIs (JSON)**: ë¬¸ì„œëŠ” ì¢…ì¢… WADL íŒŒì¼ë¡œ ì œê³µë˜ì§€ë§Œ, [Swagger UI](https://swagger.io/tools/swagger-ui/)ì™€ ê°™ì€ ë„êµ¬ëŠ” ìƒí˜¸ì‘ìš©ì„ ìœ„í•œ ë” ì‚¬ìš©ì ì¹œí™”ì ì¸ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì œê³µí•©ë‹ˆë‹¤. **Postman**ì€ ì˜ˆì œ ìš”ì²­ì„ ìƒì„±í•˜ê³  ê´€ë¦¬í•˜ëŠ” ë° ìœ ìš©í•œ ë„êµ¬ì…ë‹ˆë‹¤.
* **GraphQL**: APIë¥¼ ìœ„í•œ ì¿¼ë¦¬ ì–¸ì–´ë¡œ, APIì˜ ë°ì´í„°ì— ëŒ€í•œ ì™„ì „í•˜ê³  ì´í•´ ê°€ëŠ¥í•œ ì„¤ëª…ì„ ì œê³µí•©ë‹ˆë‹¤.

### **Practice Labs**

* [**VAmPI**](https://github.com/erev0s/VAmPI): OWASP ìƒìœ„ 10 API ì·¨ì•½ì ì„ ë‹¤ë£¨ëŠ” ì‹¤ìŠµì„ ìœ„í•œ ì˜ë„ì ìœ¼ë¡œ ì·¨ì•½í•œ APIì…ë‹ˆë‹¤.

### **Effective Tricks for API Pentesting**

* **SOAP/XML Vulnerabilities**: XXE ì·¨ì•½ì ì„ íƒìƒ‰í•˜ë˜, DTD ì„ ì–¸ì€ ì¢…ì¢… ì œí•œë©ë‹ˆë‹¤. XMLì´ ìœ íš¨í•œ ê²½ìš° CDATA íƒœê·¸ë¥¼ í†µí•´ í˜ì´ë¡œë“œ ì‚½ì…ì´ ê°€ëŠ¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* **Privilege Escalation**: ë‹¤ì–‘í•œ ê¶Œí•œ ìˆ˜ì¤€ìœ¼ë¡œ ì—”ë“œí¬ì¸íŠ¸ë¥¼ í…ŒìŠ¤íŠ¸í•˜ì—¬ ë¬´ë‹¨ ì ‘ê·¼ ê°€ëŠ¥ì„±ì„ ì‹ë³„í•©ë‹ˆë‹¤.
* **CORS Misconfigurations**: ì¸ì¦ëœ ì„¸ì…˜ì—ì„œ CSRF ê³µê²©ì„ í†µí•´ ì ì¬ì ì¸ ì•…ìš© ê°€ëŠ¥ì„±ì„ ì¡°ì‚¬í•©ë‹ˆë‹¤.
* **Endpoint Discovery**: API íŒ¨í„´ì„ í™œìš©í•˜ì—¬ ìˆ¨ê²¨ì§„ ì—”ë“œí¬ì¸íŠ¸ë¥¼ ë°œê²¬í•©ë‹ˆë‹¤. í¼ì €ì™€ ê°™ì€ ë„êµ¬ëŠ” ì´ ê³¼ì •ì„ ìë™í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* **Parameter Tampering**: ìš”ì²­ì—ì„œ ë§¤ê°œë³€ìˆ˜ë¥¼ ì¶”ê°€í•˜ê±°ë‚˜ êµì²´í•˜ì—¬ ë¬´ë‹¨ ë°ì´í„° ë˜ëŠ” ê¸°ëŠ¥ì— ì ‘ê·¼ì„ ì‹œë„í•©ë‹ˆë‹¤.
* **HTTP Method Testing**: ìš”ì²­ ë°©ë²•(GET, POST, PUT, DELETE, PATCH)ì„ ë³€ê²½í•˜ì—¬ ì˜ˆìƒì¹˜ ëª»í•œ ë™ì‘ì´ë‚˜ ì •ë³´ ìœ ì¶œì„ ë°œê²¬í•©ë‹ˆë‹¤.
* **Content-Type Manipulation**: ì„œë¡œ ë‹¤ë¥¸ ì½˜í…ì¸  ìœ í˜•(x-www-form-urlencoded, application/xml, application/json) ê°„ì— ì „í™˜í•˜ì—¬ íŒŒì‹± ë¬¸ì œë‚˜ ì·¨ì•½ì ì„ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.
* **Advanced Parameter Techniques**: JSON í˜ì´ë¡œë“œì—ì„œ ì˜ˆìƒì¹˜ ëª»í•œ ë°ì´í„° ìœ í˜•ìœ¼ë¡œ í…ŒìŠ¤íŠ¸í•˜ê±°ë‚˜ XML ë°ì´í„°ë¡œ XXE ì£¼ì…ì„ ì‹œë„í•©ë‹ˆë‹¤. ë˜í•œ, ë§¤ê°œë³€ìˆ˜ ì˜¤ì—¼ ë° ì™€ì¼ë“œì¹´ë“œ ë¬¸ìë¥¼ ì‚¬ìš©í•˜ì—¬ ë” ë„“ì€ í…ŒìŠ¤íŠ¸ë¥¼ ì‹œë„í•©ë‹ˆë‹¤.
* **Version Testing**: ì´ì „ API ë²„ì „ì€ ê³µê²©ì— ë” ì·¨ì•½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•­ìƒ ì—¬ëŸ¬ API ë²„ì „ì„ í™•ì¸í•˜ê³  í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.

### **Tools and Resources for API Pentesting**

* [**kiterunner**](https://github.com/assetnote/kiterunner): API ì—”ë“œí¬ì¸íŠ¸ë¥¼ ë°œê²¬í•˜ëŠ” ë° íƒì›”í•©ë‹ˆë‹¤. ì´ë¥¼ ì‚¬ìš©í•˜ì—¬ ëŒ€ìƒ APIì— ëŒ€í•œ ê²½ë¡œ ë° ë§¤ê°œë³€ìˆ˜ë¥¼ ìŠ¤ìº”í•˜ê³  ë¬´ì°¨ë³„ ëŒ€ì…í•©ë‹ˆë‹¤.
```bash
kr scan https://domain.com/api/ -w routes-large.kite -x 20
kr scan https://domain.com/api/ -A=apiroutes-220828 -x 20
kr brute https://domain.com/api/ -A=raft-large-words -x 20 -d=0
kr brute https://domain.com/api/ -w /tmp/lang-english.txt -x 20 -d=0
```
* **automatic-api-attack-tool**, **Astra**, ë° **restler-fuzzer**ì™€ ê°™ì€ ì¶”ê°€ ë„êµ¬ëŠ” ê³µê²© ì‹œë®¬ë ˆì´ì…˜ì—ì„œ í¼ì§• ë° ì·¨ì•½ì  ìŠ¤ìºë‹ì— ì´ë¥´ê¸°ê¹Œì§€ API ë³´ì•ˆ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ ë§ì¶¤í˜• ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.
* [**Cherrybomb**](https://github.com/blst-security/cherrybomb): OAS íŒŒì¼ì„ ê¸°ë°˜ìœ¼ë¡œ APIë¥¼ ê°ì‚¬í•˜ëŠ” API ë³´ì•ˆ ë„êµ¬ì…ë‹ˆë‹¤(ì´ ë„êµ¬ëŠ” Rustë¡œ ì‘ì„±ë¨).

### **í•™ìŠµ ë° ì—°ìŠµ ìë£Œ**

* **OWASP API Security Top 10**: ì¼ë°˜ì ì¸ API ì·¨ì•½ì ì„ ì´í•´í•˜ê¸° ìœ„í•œ í•„ìˆ˜ ì½ê¸° ìë£Œ ([OWASP Top 10](https://github.com/OWASP/API-Security/blob/master/2019/en/dist/owasp-api-security-top-10.pdf)).
* **API Security Checklist**: API ë³´ì•ˆì„ ìœ„í•œ í¬ê´„ì ì¸ ì²´í¬ë¦¬ìŠ¤íŠ¸ ([GitHub link](https://github.com/shieldfy/API-Security-Checklist)).
* **Logger++ Filters**: API ì·¨ì•½ì ì„ íƒìƒ‰í•˜ê¸° ìœ„í•´ Logger++ëŠ” ìœ ìš©í•œ í•„í„°ë¥¼ ì œê³µí•©ë‹ˆë‹¤ ([GitHub link](https://github.com/bnematzadeh/LoggerPlusPlus-API-Filters)).
* **API Endpoints List**: í…ŒìŠ¤íŠ¸ ëª©ì ìœ¼ë¡œ ì ì¬ì ì¸ API ì—”ë“œí¬ì¸íŠ¸ì˜ ì„ ë³„ëœ ëª©ë¡ ([GitHub gist](https://gist.github.com/yassineaboukir/8e12adefbd505ef704674ad6ad48743d)).

## References

* [https://github.com/Cyber-Guy1/API-SecurityEmpire](https://github.com/Cyber-Guy1/API-SecurityEmpire)

<figure><img src="../../.gitbook/assets/image (48).png" alt=""><figcaption></figcaption></figure>

[**Trickest**](https://trickest.com/?utm\_source=hacktricks\&utm\_medium=text\&utm\_campaign=ppc\&utm\_term=trickest\&utm\_content=web-api-pentesting)ë¥¼ ì‚¬ìš©í•˜ì—¬ ì„¸ê³„ì—ì„œ **ê°€ì¥ ì§„ë³´ëœ** ì»¤ë®¤ë‹ˆí‹° ë„êµ¬ë¡œ êµ¬ë™ë˜ëŠ” **ì›Œí¬í”Œë¡œìš°**ë¥¼ ì‰½ê²Œ êµ¬ì¶•í•˜ê³  **ìë™í™”**í•˜ì„¸ìš”.\
ì˜¤ëŠ˜ ì•¡ì„¸ìŠ¤í•˜ì„¸ìš”:

{% embed url="https://trickest.com/?utm_source=hacktricks&utm_medium=banner&utm_campaign=ppc&utm_content=web-api-pentesting" %}

{% hint style="success" %}
AWS í•´í‚¹ í•™ìŠµ ë° ì—°ìŠµ:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
GCP í•´í‚¹ í•™ìŠµ ë° ì—°ìŠµ: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks ì§€ì›í•˜ê¸°</summary>

* [**êµ¬ë… ê³„íš**](https://github.com/sponsors/carlospolop) í™•ì¸í•˜ê¸°!
* **ğŸ’¬ [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— ì°¸ì—¬í•˜ê±°ë‚˜ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**ë¥¼ íŒ”ë¡œìš°í•˜ì„¸ìš”.**
* **[**HackTricks**](https://github.com/carlospolop/hacktricks) ë° [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub ë¦¬í¬ì§€í† ë¦¬ì— PRì„ ì œì¶œí•˜ì—¬ í•´í‚¹ íŒì„ ê³µìœ í•˜ì„¸ìš”.**

</details>
{% endhint %}
