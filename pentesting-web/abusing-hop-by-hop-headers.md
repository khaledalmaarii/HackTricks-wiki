# Hop-by-hop baÅŸlÄ±klarÄ±

<details>

<summary><strong>AWS hackleme konusunda sÄ±fÄ±rdan kahramana kadar Ã¶ÄŸrenin</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ±)</strong></a><strong>!</strong></summary>

* Bir **cybersecurity ÅŸirketinde** Ã§alÄ±ÅŸÄ±yor musunuz? **Åirketinizi HackTricks'te reklamÄ±nÄ± gÃ¶rmek** ister misiniz? veya **PEASS'Ä±n en son sÃ¼rÃ¼mÃ¼ne veya HackTricks'i PDF olarak indirmek** ister misiniz? [**ABONELÄ°K PLANLARINI**](https://github.com/sponsors/carlospolop) kontrol edin!
* [**The PEASS Ailesi'ni**](https://opensea.io/collection/the-peass-family) keÅŸfedin, Ã¶zel [**NFT'lerimiz**](https://opensea.io/collection/the-peass-family) koleksiyonunu
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katÄ±lÄ±n** veya **Twitter'da** ğŸ¦[**@carlospolopm**](https://twitter.com/hacktricks_live)**'u takip edin**.
* **Hacking hilelerinizi [hacktricks repo'ya](https://github.com/carlospolop/hacktricks) ve [hacktricks-cloud repo'ya](https://github.com/carlospolop/hacktricks-cloud) PR gÃ¶ndererek paylaÅŸÄ±n**.

</details>

**Bu, [https://nathandavison.com/blog/abusing-http-hop-by-hop-request-headers](https://nathandavison.com/blog/abusing-http-hop-by-hop-request-headers) adresindeki yazÄ±nÄ±n bir Ã¶zetidir.**

Hop-by-hop baÅŸlÄ±klarÄ±, Ã¶zellikle HTTP/1.1'de iki dÃ¼ÄŸÃ¼m arasÄ±nda (istemci-proxy veya proxy-proxy gibi) verileri yÃ¶netmek iÃ§in kullanÄ±lan, tek bir taÅŸÄ±ma dÃ¼zeyi baÄŸlantÄ±sÄ±na Ã¶zgÃ¼dÃ¼r ve iletilmemesi amaÃ§lanmÄ±ÅŸtÄ±r. Standart hop-by-hop baÅŸlÄ±klar arasÄ±nda `Keep-Alive`, `Transfer-Encoding`, `TE`, `Connection`, `Trailer`, `Upgrade`, `Proxy-Authorization` ve `Proxy-Authenticate` bulunur ve [RFC 2616](https://tools.ietf.org/html/rfc2616#section-13.5.1)'da tanÄ±mlanmÄ±ÅŸtÄ±r. Ek baÅŸlÄ±klar, `Connection` baÅŸlÄ±ÄŸÄ± aracÄ±lÄ±ÄŸÄ±yla hop-by-hop olarak belirlenebilir.

### Hop-by-Hop BaÅŸlÄ±klarÄ±nÄ±n KÃ¶tÃ¼ye KullanÄ±mÄ±
Proxy'ler tarafÄ±ndan hop-by-hop baÅŸlÄ±klarÄ±n yanlÄ±ÅŸ yÃ¶netimi gÃ¼venlik sorunlarÄ±na yol aÃ§abilir. Proxy'lerin bu baÅŸlÄ±klarÄ± kaldÄ±rmasÄ± beklenirken, tÃ¼m proxy'ler bunu yapmaz ve potansiyel gÃ¼venlik aÃ§Ä±klarÄ± oluÅŸturur.

### Hop-by-Hop BaÅŸlÄ±k Ä°ÅŸleme Testi
Hop-by-hop baÅŸlÄ±klarÄ±n iÅŸlenmesi, belirli baÅŸlÄ±klar hop-by-hop olarak iÅŸaretlendiÄŸinde sunucu yanÄ±tlarÄ±nda meydana gelen deÄŸiÅŸikliklerin gÃ¶zlemlenerek test edilebilir. AraÃ§lar ve komut dosyalarÄ± bu sÃ¼reci otomatikleÅŸtirebilir, proxy'lerin bu baÅŸlÄ±klarÄ± nasÄ±l yÃ¶nettiÄŸini belirleyebilir ve yanlÄ±ÅŸ yapÄ±landÄ±rmalarÄ± veya proxy davranÄ±ÅŸlarÄ±nÄ± ortaya Ã§Ä±karabilir.

Hop-by-hop baÅŸlÄ±klarÄ±nÄ±n kÃ¶tÃ¼ye kullanÄ±lmasÄ± Ã§eÅŸitli gÃ¼venlik sonuÃ§larÄ±na yol aÃ§abilir. AÅŸaÄŸÄ±da, bu baÅŸlÄ±klarÄ±n potansiyel saldÄ±rÄ±lar iÃ§in nasÄ±l manipÃ¼le edilebileceÄŸini gÃ¶steren birkaÃ§ Ã¶rnek bulunmaktadÄ±r:

### `X-Forwarded-For` ile GÃ¼venlik Kontrollerini Atlama
Bir saldÄ±rgan, IP tabanlÄ± eriÅŸim kontrollerini atlatabilmek iÃ§in `X-Forwarded-For` baÅŸlÄ±ÄŸÄ±nÄ± manipÃ¼le edebilir. Bu baÅŸlÄ±k, proxy'lerin istemcinin kaynak IP adresini takip etmek iÃ§in sÄ±klÄ±kla kullandÄ±ÄŸÄ± bir baÅŸlÄ±ktÄ±r. Ancak, bir proxy bu baÅŸlÄ±ÄŸÄ± hop-by-hop olarak iÅŸlemeyi ve doÄŸrulama yapmadan iletmeyi tercih ederse, bir saldÄ±rgan IP adresini sahteler.

**SaldÄ±rÄ± Senaryosu:**
1. SaldÄ±rgan, bir proxy'nin arkasÄ±ndaki bir web uygulamasÄ±na sahte bir IP adresini `X-Forwarded-For` baÅŸlÄ±ÄŸÄ±nda iÃ§eren bir HTTP isteÄŸi gÃ¶nderir.
2. SaldÄ±rgan ayrÄ±ca `Connection: close, X-Forwarded-For` baÅŸlÄ±ÄŸÄ±nÄ± da ekler, bu da proxy'nin `X-Forwarded-For`'u hop-by-hop olarak iÅŸlemesine neden olur.
3. YanlÄ±ÅŸ yapÄ±landÄ±rÄ±lmÄ±ÅŸ proxy, sahtelenmiÅŸ `X-Forwarded-For` baÅŸlÄ±ÄŸÄ± olmadan isteÄŸi web uygulamasÄ±na iletiyor.
4. Web uygulamasÄ±, orijinal `X-Forwarded-For` baÅŸlÄ±ÄŸÄ±nÄ± gÃ¶rmeyerek isteÄŸi doÄŸrudan gÃ¼venilir bir proxyden geliyormuÅŸ gibi deÄŸerlendirebilir ve yetkisiz eriÅŸime izin verebilir.

### Hop-by-Hop BaÅŸlÄ±k Enjeksiyonu ile Ã–nbellek Zehirlenmesi
Bir Ã¶nbellek sunucusu, hop-by-hop baÅŸlÄ±klara dayalÄ± olarak iÃ§eriÄŸi yanlÄ±ÅŸ bir ÅŸekilde Ã¶nbelleÄŸe alÄ±yorsa, bir saldÄ±rgan kÃ¶tÃ¼ amaÃ§lÄ± baÅŸlÄ±klar enjekte ederek Ã¶nbelleÄŸi zehirleyebilir. Bu, aynÄ± kaynaÄŸÄ± isteyen kullanÄ±cÄ±lara yanlÄ±ÅŸ veya kÃ¶tÃ¼ amaÃ§lÄ± iÃ§erik sunar.

**SaldÄ±rÄ± Senaryosu:**
1. Bir saldÄ±rgan, Ã¶nbelleÄŸe alÄ±nmamasÄ± gereken bir hop-by-hop baÅŸlÄ±kla bir web uygulamasÄ±na bir istek gÃ¶nderir (Ã¶rneÄŸin, `Connection: close, Cookie`).
2. KÃ¶tÃ¼ yapÄ±landÄ±rÄ±lmÄ±ÅŸ Ã¶nbellek sunucusu hop-by-hop baÅŸlÄ±ÄŸÄ± kaldÄ±rmaz ve saldÄ±rganÄ±n oturumuna Ã¶zgÃ¼ yanÄ±tÄ± Ã¶nbelleÄŸe alÄ±r.
3. AynÄ± kaynaÄŸÄ± isteyen gelecekteki kullanÄ±cÄ±lar, saldÄ±rgan iÃ§in Ã¶zelleÅŸtirilmiÅŸ Ã¶nbelleÄŸe alÄ±nmÄ±ÅŸ yanÄ±tÄ± alÄ±r, bu da oturum ele geÃ§irmeye veya hassas bilgilerin ortaya Ã§Ä±kmasÄ±na yol aÃ§abilir.

<details>

<summary><strong>AWS hackleme konusunda sÄ±fÄ±rdan kahramana kadar Ã¶ÄŸrenin</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ±)</strong></a><strong>!</strong></summary>

* Bir **cybersecurity ÅŸirketinde** Ã§alÄ±ÅŸÄ±yor musunuz? **Åirketinizi HackTricks'te reklamÄ±nÄ± gÃ¶rmek** ister misiniz? veya **PEASS'Ä±n en son sÃ¼rÃ¼mÃ¼ne veya HackTricks'i PDF olarak indirmek** ister misiniz? [**ABONELÄ°K PLANLARINI**](https://github.com/sponsors/carlospolop) kontrol edin!
* [**The PEASS Ailesi'ni**](https://opensea.io/collection/the-peass-family) keÅŸfedin, Ã¶zel [**NFT'lerimiz**](https://opensea.io/collection/the-peass-family) koleksiyonunu
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katÄ±lÄ±n** veya **Twitter'da** ğŸ¦[**@carlospolopm**](https://twitter.com/hacktricks_live)**'u takip edin**.
* **Hacking hilelerinizi [hacktricks repo'ya](https://github.com/carlospolop/hacktricks) ve [hacktricks-cloud repo'ya](https://github.com/carlospolop/hacktricks-cloud) PR gÃ¶ndererek paylaÅŸÄ±n**.

</details>
