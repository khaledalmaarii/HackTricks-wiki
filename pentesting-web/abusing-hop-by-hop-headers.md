# νΈν”„-λ°”μ΄-νΈν”„ ν—¤λ”

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong>λ¥Ό ν†µν•΄ AWS ν•΄ν‚Ήμ„ μ²μλ¶€ν„° μ „λ¬Έκ°€κΉμ§€ λ°°μ›λ³΄μ„Έμ”<strong>!</strong></summary>

* **μ‚¬μ΄λ²„ λ³΄μ• νμ‚¬**μ—μ„ μΌν•μ‹λ‚μ”? **νμ‚¬λ¥Ό HackTricksμ—μ„ κ΄‘κ³ ν•κ³  μ‹¶μΌμ‹ κ°€μ”**? μ•„λ‹λ©΄ **PEASSμ μµμ‹  λ²„μ „μ— μ•΅μ„Έμ¤ν•κ±°λ‚ HackTricksλ¥Ό PDFλ΅ λ‹¤μ΄λ΅λ“**ν•κ³  μ‹¶μΌμ‹ κ°€μ”? [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)λ¥Ό ν™•μΈν•΄λ³΄μ„Έμ”!
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)λ¥Ό λ°κ²¬ν•΄λ³΄μ„Έμ”. λ…μ μ μΈ [**NFT**](https://opensea.io/collection/the-peass-family) μ»¬λ ‰μ…μ…λ‹λ‹¤.
* [**κ³µμ‹ PEASS & HackTricks μ¤μ›¨κ·Έ**](https://peass.creator-spring.com)λ¥Ό μ–»μΌμ„Έμ”.
* [**π’¬**](https://emojipedia.org/speech-balloon/) [**Discord κ·Έλ£Ή**](https://discord.gg/hRep4RUj7f) λλ” [**ν…”λ κ·Έλ¨ κ·Έλ£Ή**](https://t.me/peass)μ— **μ°Έμ—¬**ν•κ±°λ‚ **Twitter**μ—μ„ μ €λ¥Ό **ν”λ΅μ°**ν•μ„Έμ” π¦[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **[hacktricks repo](https://github.com/carlospolop/hacktricks)μ™€ [hacktricks-cloud repo](https://github.com/carlospolop/hacktricks-cloud)**μ— PRμ„ μ μ¶ν•μ—¬ μ—¬λ¬λ¶„μ ν•΄ν‚Ή κΈ°λ²•μ„ κ³µμ ν•΄λ³΄μ„Έμ”.

</details>

**μ΄ κΈ€μ€ [https://nathandavison.com/blog/abusing-http-hop-by-hop-request-headers](https://nathandavison.com/blog/abusing-http-hop-by-hop-request-headers)μ μ”μ•½μ…λ‹λ‹¤.**

νΈν”„-λ°”μ΄-νΈν”„ ν—¤λ”λ” λ‹¨μΌ μ „μ†΅ μμ¤€ μ—°κ²°μ— νΉμ •ν• ν—¤λ”λ΅, μ£Όλ΅ HTTP/1.1μ—μ„ λ‘ λ…Έλ“ κ°„μ λ°μ΄ν„°λ¥Ό κ΄€λ¦¬ν•λ” λ° μ‚¬μ©λ©λ‹λ‹¤(μ: ν΄λΌμ΄μ–ΈνΈ-ν”„λ΅μ‹ λλ” ν”„λ΅μ‹-ν”„λ΅μ‹). μ΄λ¬ν• ν—¤λ”λ” μ „λ‹¬λμ§€ μ•λ„λ΅ μ„¤κ³„λμ—μµλ‹λ‹¤. ν‘μ¤€ νΈν”„-λ°”μ΄-νΈν”„ ν—¤λ”μ—λ” `Keep-Alive`, `Transfer-Encoding`, `TE`, `Connection`, `Trailer`, `Upgrade`, `Proxy-Authorization`, `Proxy-Authenticate`κ°€ ν¬ν•¨λμ–΄ μμΌλ©°, [RFC 2616](https://tools.ietf.org/html/rfc2616#section-13.5.1)μ—μ„ μ •μλμ–΄ μμµλ‹λ‹¤. μ¶”κ°€μ μΈ ν—¤λ”λ” `Connection` ν—¤λ”λ¥Ό ν†µν•΄ νΈν”„-λ°”μ΄-νΈν”„λ΅ μ§€μ •λ  μ μμµλ‹λ‹¤.

### νΈν”„-λ°”μ΄-νΈν”„ ν—¤λ” λ‚¨μ©

ν”„λ΅μ‹μ— μν• νΈν”„-λ°”μ΄-νΈν”„ ν—¤λ”μ λ¶€μ μ ν• κ΄€λ¦¬λ” λ³΄μ• λ¬Έμ λ¥Ό μ•ΌκΈ°ν•  μ μμµλ‹λ‹¤. ν”„λ΅μ‹λ” μ΄λ¬ν• ν—¤λ”λ¥Ό μ κ±°ν•΄μ•Ό ν•μ§€λ§, λ¨λ“  ν”„λ΅μ‹κ°€ κ·Έλ ‡μ§€λ” μ•μ•„ μ μ¬μ μΈ μ·¨μ•½μ μ΄ λ°μƒν•  μ μμµλ‹λ‹¤.

### νΈν”„-λ°”μ΄-νΈν”„ ν—¤λ” μ²λ¦¬ ν…μ¤νΈ

νΈν”„-λ°”μ΄-νΈν”„ ν—¤λ”μ μ²λ¦¬λ” νΉμ • ν—¤λ”κ°€ νΈν”„-λ°”μ΄-νΈν”„λ΅ ν‘μ‹λ  λ• μ„λ²„ μ‘λ‹µμ λ³€κ²½μ„ κ΄€μ°°ν•μ—¬ ν…μ¤νΈν•  μ μμµλ‹λ‹¤. λ„κµ¬μ™€ μ¤ν¬λ¦½νΈλ¥Ό μ‚¬μ©ν•μ—¬ μ΄ ν”„λ΅μ„Έμ¤λ¥Ό μλ™ν™”ν•λ©΄ ν”„λ΅μ‹κ°€ μ΄λ¬ν• ν—¤λ”λ¥Ό μ–΄λ–»κ² μ²λ¦¬ν•λ”μ§€ ν™•μΈν•κ³  μλ»λ κµ¬μ„± λλ” ν”„λ΅μ‹ λ™μ‘μ„ λ°κ²¬ν•  μ μμµλ‹λ‹¤.

νΈν”„-λ°”μ΄-νΈν”„ ν—¤λ”μ λ‚¨μ©μ€ λ‹¤μ–‘ν• λ³΄μ• λ¬Έμ λ΅ μ΄μ–΄μ§ μ μμµλ‹λ‹¤. μ•„λλ” μ΄λ¬ν• ν—¤λ”κ°€ μ μ¬μ μΈ κ³µκ²©μ„ μ„ν•΄ μ΅°μ‘λ  μ μλ” λ‡ κ°€μ§€ μμ‹μ…λ‹λ‹¤:

### `X-Forwarded-For`λ¥Ό μ‚¬μ©ν•μ—¬ λ³΄μ• μ μ–΄ μ°ν

κ³µκ²©μλ” `X-Forwarded-For` ν—¤λ”λ¥Ό μ΅°μ‘ν•μ—¬ IP κΈ°λ° μ•΅μ„Έμ¤ μ μ–΄λ¥Ό μ°νν•  μ μμµλ‹λ‹¤. μ΄ ν—¤λ”λ” ν”„λ΅μ‹κ°€ ν΄λΌμ΄μ–ΈνΈμ μ›λ IP μ£Όμ†λ¥Ό μ¶”μ ν•λ” λ° μμ£Ό μ‚¬μ©λ©λ‹λ‹¤. κ·Έλ¬λ‚ ν”„λ΅μ‹κ°€ μ΄ ν—¤λ”λ¥Ό νΈν”„-λ°”μ΄-νΈν”„λ΅ μ²λ¦¬ν•κ³  μ μ ν• μ ν¨μ„± κ²€μ‚¬ μ—†μ΄ μ „λ‹¬ν•λ” κ²½μ°, κ³µκ²©μλ” μμ‹ μ IP μ£Όμ†λ¥Ό μ„μ΅°ν•  μ μμµλ‹λ‹¤.

**κ³µκ²© μ‹λ‚λ¦¬μ¤:**
1. κ³µκ²©μλ” `X-Forwarded-For` ν—¤λ”μ— κ°€μ§ IP μ£Όμ†λ¥Ό ν¬ν•¨ν• HTTP μ”μ²­μ„ ν”„λ΅μ‹ λ’¤μ μ›Ή μ• ν”λ¦¬μΌ€μ΄μ…μ— λ³΄λƒ…λ‹λ‹¤.
2. κ³µκ²©μλ” `Connection: close, X-Forwarded-For` ν—¤λ”λ„ ν¬ν•¨ν•μ—¬ ν”„λ΅μ‹κ°€ `X-Forwarded-For`λ¥Ό νΈν”„-λ°”μ΄-νΈν”„λ΅ μ²λ¦¬ν•λ„λ΅ μ λ„ν•©λ‹λ‹¤.
3. μλ» κµ¬μ„±λ ν”„λ΅μ‹λ” μ„μ΅°λ `X-Forwarded-For` ν—¤λ” μ—†μ΄ μ”μ²­μ„ μ›Ή μ• ν”λ¦¬μΌ€μ΄μ…μΌλ΅ μ „λ‹¬ν•©λ‹λ‹¤.
4. μ›Ή μ• ν”λ¦¬μΌ€μ΄μ…μ€ μ›λμ `X-Forwarded-For` ν—¤λ”λ¥Ό λ³΄μ§€ λ»ν•λ―€λ΅ μ”μ²­μ„ μ‹ λΆ°ν•  μ μλ” ν”„λ΅μ‹μ—μ„ μ§μ ‘ μ¨ κ²ƒμΌλ΅ κ°„μ£Όν•μ—¬ λ¬΄λ‹¨ μ•΅μ„Έμ¤λ¥Ό ν—μ©ν•  μ μμµλ‹λ‹¤.

### νΈν”„-λ°”μ΄-νΈν”„ ν—¤λ” μ‚½μ…μ„ ν†µν• μΊμ‹ λ…μ 

μΊμ‹ μ„λ²„κ°€ νΈν”„-λ°”μ΄-νΈν”„ ν—¤λ”λ¥Ό κΈ°λ°μΌλ΅ μλ»λ μΊμ‹λ¥Ό μƒμ„±ν•λ” κ²½μ°, κ³µκ²©μλ” μ•…μ„± ν—¤λ”λ¥Ό μ‚½μ…ν•μ—¬ μΊμ‹λ¥Ό λ…μ ν•  μ μμµλ‹λ‹¤. μ΄λ΅ μΈν•΄ λ™μΌν• λ¦¬μ†μ¤λ¥Ό μ”μ²­ν•λ” μ‚¬μ©μμ—κ² μλ»λ λλ” μ•…μ„± μ½ν…μΈ κ°€ μ κ³µλ©λ‹λ‹¤.

**κ³µκ²© μ‹λ‚λ¦¬μ¤:**
1. κ³µκ²©μλ” μΊμ‹λμ§€ μ•μ•„μ•Ό ν•  νΈν”„-λ°”μ΄-νΈν”„ ν—¤λ”(`Connection: close, Cookie` λ“±)λ¥Ό ν¬ν•¨ν• μ›Ή μ• ν”λ¦¬μΌ€μ΄μ…μ— μ”μ²­μ„ λ³΄λƒ…λ‹λ‹¤.
2. μλ» κµ¬μ„±λ μΊμ‹ μ„λ²„λ” νΈν”„-λ°”μ΄-νΈν”„ ν—¤λ”λ¥Ό μ κ±°ν•μ§€ μ•κ³ , κ³µκ²©μμ μ„Έμ…μ— νΉμ •ν• μ‘λ‹µμ„ μΊμ‹ν•©λ‹λ‹¤.
3. λ™μΌν• λ¦¬μ†μ¤λ¥Ό μ”μ²­ν•λ” λ‹¤λ¥Έ μ‚¬μ©μλ” κ³µκ²©μλ¥Ό μ„ν•΄ μ΅°μ‘λ μΊμ‹ μ‘λ‹µμ„ λ°›κ² λλ©°, μ΄λ” μ„Έμ… ν•μ΄μ¬ν‚Ήμ΄λ‚ λ―Όκ°ν• μ •λ³΄ λ…Έμ¶λ΅ μ΄μ–΄μ§ μ μμµλ‹λ‹¤.

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong>λ¥Ό ν†µν•΄ AWS ν•΄ν‚Ήμ„ μ²μλ¶€ν„° μ „λ¬Έκ°€κΉμ§€ λ°°μ›λ³΄μ„Έμ”<strong>!</strong></summary>

* **μ‚¬μ΄λ²„ λ³΄μ• νμ‚¬**μ—μ„ μΌν•μ‹λ‚μ”? **νμ‚¬λ¥Ό HackTricksμ—μ„ κ΄‘κ³ ν•κ³  μ‹¶μΌμ‹ κ°€μ”**? μ•„λ‹λ©΄ **PEASSμ μµμ‹  λ²„μ „μ— μ•΅μ„Έμ¤ν•κ±°λ‚ HackTricksλ¥Ό PDFλ΅ λ‹¤μ΄λ΅λ“**ν•κ³  μ‹¶μΌμ‹ κ°€μ”? [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)λ¥Ό ν™•μΈν•΄λ³΄μ„Έμ”!
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)λ¥Ό λ°κ²¬ν•΄λ³΄μ„Έμ”. λ…μ μ μΈ [**NFT**](https://opensea.io/collection/the-peass-family) μ»¬λ ‰μ…μ…λ‹λ‹¤.
* [**κ³µμ‹ PEASS & HackTricks μ¤μ›¨κ·Έ**](https://peass.creator-spring.com)λ¥Ό μ–»μΌμ„Έμ”.
* [**π’¬**](https://emojipedia.org/speech-balloon/) [**Discord κ·Έλ£Ή**](https://discord.gg/hRep4RUj7f) λλ” [**ν…”λ κ·Έλ¨ κ·Έλ£Ή**](https://t.me/peass)μ— **μ°Έμ—¬**ν•κ±°λ‚ **Twitter**μ—μ„ μ €λ¥Ό **ν”λ΅μ°**ν•μ„Έμ” π¦[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **[hacktricks repo](https://github.com/carlospolop/hacktricks)μ™€ [hacktricks-cloud repo](https://github.com/carlospolop/hacktricks-cloud)**μ— PRμ„ μ μ¶ν•μ—¬ μ—¬λ¬λ¶„μ ν•΄ν‚Ή κΈ°λ²•μ„ κ³µμ ν•΄λ³΄μ„Έμ”.

</details>
