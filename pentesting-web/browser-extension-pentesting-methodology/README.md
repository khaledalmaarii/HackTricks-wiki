# TarayÄ±cÄ± UzantÄ±sÄ± Pentesting Metodolojisi

<details>

<summary><strong>AWS hacklemeyi sÄ±fÄ±rdan kahraman olacak ÅŸekilde Ã¶ÄŸrenin</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ±)</strong></a><strong>!</strong></summary>

HackTricks'i desteklemenin diÄŸer yollarÄ±:

* Åirketinizi HackTricks'te **reklamÄ±nÄ±zÄ± gÃ¶rmek** veya **HackTricks'i PDF olarak indirmek** iÃ§in [**ABONELÄ°K PLANLARI**](https://github.com/sponsors/carlospolop)'na gÃ¶z atÄ±n!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* [**The PEASS Ailesi'ni**](https://opensea.io/collection/the-peass-family) keÅŸfedin, Ã¶zel [**NFT'lerimiz**](https://opensea.io/collection/the-peass-family) koleksiyonumuz
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katÄ±lÄ±n** veya **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)'u **takip edin**.
* Hacking hilelerinizi [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna PR gÃ¶ndererek paylaÅŸÄ±n.

</details>

## Temel Bilgiler

TarayÄ±cÄ± uzantÄ±larÄ± JavaScript ile yazÄ±lÄ±r ve tarayÄ±cÄ± tarafÄ±ndan arka planda yÃ¼klenir. UzantÄ±nÄ±n kendi [DOM](https://www.w3schools.com/js/js\_htmldom.asp)'u vardÄ±r, ancak diÄŸer sitelerin DOM'larÄ±yla etkileÅŸimde bulunabilir. Bu, diÄŸer sitelerin gizlilik, bÃ¼tÃ¼nlÃ¼k ve eriÅŸilebilirlik (CIA) gÃ¼venliÄŸini tehlikeye atabilir.

## Ana BileÅŸenler

UzantÄ± dÃ¼zenleri en iyi ÅŸekilde gÃ¶rselleÅŸtirildiÄŸinde Ã¼Ã§ bileÅŸenden oluÅŸur. Her bir bileÅŸene daha detaylÄ± bir ÅŸekilde bakalÄ±m.

<figure><img src="../../.gitbook/assets/image (4).png" alt=""><figcaption><p><a href="http://webblaze.cs.berkeley.edu/papers/Extensions.pdf">http://webblaze.cs.berkeley.edu/papers/Extensions.pdf</a></p></figcaption></figure>

### **Ä°Ã§erik Betikleri (Content Scripts)**

Her iÃ§erik betiÄŸi, **tek bir web sayfasÄ±nÄ±n** DOM'una doÄŸrudan eriÅŸime sahiptir ve bu nedenle **potansiyel olarak zararlÄ± giriÅŸlere** maruz kalÄ±r. Bununla birlikte, iÃ§erik betiÄŸi, uzantÄ± Ã§ekirdeÄŸine mesaj gÃ¶nderme yeteneÄŸi dÄ±ÅŸÄ±nda hiÃ§bir izne sahip deÄŸildir.

### **UzantÄ± Ã‡ekirdeÄŸi (Extension Core)**

UzantÄ± Ã§ekirdeÄŸi, uzantÄ±nÄ±n Ã§oÄŸu ayrÄ±calÄ±k/eriÅŸime sahiptir, ancak uzantÄ± Ã§ekirdeÄŸi yalnÄ±zca [XMLHttpRequest](https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest) ve iÃ§erik betikleri aracÄ±lÄ±ÄŸÄ±yla web iÃ§eriÄŸiyle etkileÅŸimde bulunabilir. AyrÄ±ca, uzantÄ± Ã§ekirdeÄŸi, ana makineye doÄŸrudan eriÅŸime sahip deÄŸildir.

### **Yerel Ä°kili (Native Binary)**

UzantÄ±, kullanÄ±cÄ±nÄ±n tam ayrÄ±calÄ±klarÄ±yla ana makineye **eriÅŸebilen bir yerel ikiliye** izin verir. Yerel ikili, Flash ve diÄŸer tarayÄ±cÄ± eklentileri tarafÄ±ndan kullanÄ±lan standart Netscape Plugin Application Programming Interface ([NPAPI](https://en.wikipedia.org/wiki/NPAPI)) aracÄ±lÄ±ÄŸÄ±yla uzantÄ± Ã§ekirdeÄŸi ile etkileÅŸime geÃ§er.

### SÄ±nÄ±rlar

{% hint style="danger" %}
Bir saldÄ±rganÄ±n kullanÄ±cÄ±nÄ±n tam ayrÄ±calÄ±klarÄ±nÄ± elde etmesi iÃ§in, iÃ§erik betiÄŸinden uzantÄ±nÄ±n Ã§ekirdeÄŸine ve uzantÄ±nÄ±n Ã§ekirdeÄŸinden yerel ikiliye zararlÄ± giriÅŸ geÃ§irmesi gerekmektedir.
{% endhint %}

UzantÄ±nÄ±n her bileÅŸeni, **gÃ¼Ã§lÃ¼ koruyucu sÄ±nÄ±rlarla** birbirinden ayrÄ±lmÄ±ÅŸtÄ±r. Her bileÅŸen, **ayrÄ± bir iÅŸletim sistemi sÃ¼recinde** Ã§alÄ±ÅŸÄ±r. Ä°Ã§erik betikleri ve uzantÄ± Ã§ekirdekleri, Ã§oÄŸu iÅŸletim sistemi hizmetine eriÅŸilemeyen **kum havuzu sÃ¼reÃ§lerinde** Ã§alÄ±ÅŸÄ±r.

AyrÄ±ca, iÃ§erik betikleri, iliÅŸkili web sayfalarÄ±ndan **ayrÄ± bir JavaScript yÄ±ÄŸÄ±nda** Ã§alÄ±ÅŸÄ±r. Ä°Ã§erik betiÄŸi ve web sayfasÄ±, aynÄ± temel DOM'a **eriÅŸime sahip olsa da**, ikisi **hiÃ§bir zaman JavaScript iÅŸaretÃ§ilerini deÄŸiÅŸ tokuÅŸ etmez**, bÃ¶ylece JavaScript iÅŸlevselliÄŸinin sÄ±zmasÄ±nÄ± Ã¶nler.

## **`manifest.json`**

Bir Chrome uzantÄ±sÄ±, [.crx dosya uzantÄ±sÄ±na](https://www.lifewire.com/crx-file-2620391) sahip bir ZIP klasÃ¶rÃ¼dÃ¼r. UzantÄ±nÄ±n Ã§ekirdeÄŸi, klasÃ¶rÃ¼n kÃ¶kÃ¼nde bulunan **`manifest.json`** dosyasÄ±dÄ±r ve dÃ¼zen, izinler ve diÄŸer yapÄ±landÄ±rma seÃ§eneklerini belirtir.

Ã–rnek:
```json
{
"manifest_version": 2,
"name": "My extension",
"version": "1.0",
"permissions": [
"storage"
],
"content_scripts": [
{
"js": [
"script.js"
],
"matches": [
"https://example.com/*",
"https://www.example.com/*"
],
"exclude_matches": ["*://*/*business*"],
}
],
"background": {
"scripts": [
"background.js"
]
},
"options_ui": {
"page": "options.html"
}
}
```
### `content_scripts`

Ä°Ã§erik betikleri, kullanÄ±cÄ±nÄ±n eÅŸleÅŸen bir sayfaya gezindiÄŸinde yÃ¼klenir. Bizim durumumuzda, `https://example.com/*` ifadesine uyan herhangi bir sayfa ve `*://*/*/business*` regexine uymayan herhangi bir sayfa. Ä°Ã§erik betikleri, sayfanÄ±n kendi betikleri gibi Ã§alÄ±ÅŸÄ±r ve sayfanÄ±n [Belge Nesne Modeli (DOM)](https://developer.mozilla.org/en-US/docs/Web/API/Document_Object_Model) 'ne keyfi eriÅŸime sahiptir.
```json
"content_scripts": [
{
"js": [
"script.js"
],
"matches": [
"https://example.com/*",
"https://www.example.com/*"
],
"exclude_matches": ["*://*/*business*"],
}
],
```
Daha fazla URL eklemek veya hariÃ§ tutmak iÃ§in **`include_globs`** ve **`exclude_globs`** kullanmak da mÃ¼mkÃ¼ndÃ¼r.

Bu, bir aÃ§Ä±klama dÃ¼ÄŸmesi ekleyen bir Ã¶rnek iÃ§erik betiÄŸidir. Bu betik, [depolama API'si](https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/storage) kullanarak uzantÄ±nÄ±n depolamasÄ±ndan `message` deÄŸerini alÄ±r.
```js
chrome.storage.local.get("message", result =>
{
let div = document.createElement("div");
div.innerHTML = result.message + " <button>Explain</button>";
div.querySelector("button").addEventListener("click", () =>
{
chrome.runtime.sendMessage("explain");
});
document.body.appendChild(div);
});
```
<figure><img src="../../.gitbook/assets/image (7).png" alt=""><figcaption></figcaption></figure>

Bu dÃ¼ÄŸme tÄ±klandÄ±ÄŸÄ±nda iÃ§erik betiÄŸi tarafÄ±ndan uzantÄ± sayfalarÄ±na bir ileti gÃ¶nderilir, bunun iÃ§in [**runtime.sendMessage() API**](https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/runtime/sendMessage) kullanÄ±lÄ±r. Ä°Ã§erik betiÄŸinin API'lere doÄŸrudan eriÅŸimindeki sÄ±nÄ±rlamalar nedeniyle, `storage` bunlarÄ±n birkaÃ§ istisnasÄ±ndan biridir. Bu istisnalarÄ±n Ã¶tesindeki iÅŸlevler iÃ§in, iletiler iÃ§erik betiÄŸi tarafÄ±ndan uzantÄ± sayfalarÄ±na gÃ¶nderilir ve iÃ§erik betikleri ile iletiÅŸim kurabilir.

{% hint style="warning" %}
TarayÄ±cÄ±ya baÄŸlÄ± olarak, iÃ§erik betiÄŸinin yetenekleri biraz farklÄ±lÄ±k gÃ¶sterebilir. Chromium tabanlÄ± tarayÄ±cÄ±lar iÃ§in yetenekler listesi [Chrome GeliÅŸtiriciler belgelerinde](https://developer.chrome.com/docs/extensions/mv3/content_scripts/#capabilities) mevcuttur ve Firefox iÃ§in [MDN](https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Content_scripts#webextension_apis) birincil kaynak olarak hizmet verir.\
AyrÄ±ca, iÃ§erik betiklerinin arka plan betikleriyle iletiÅŸim kurma yeteneÄŸi olduÄŸu ve bÃ¶ylece eylemler gerÃ§ekleÅŸtirebileceÄŸi ve yanÄ±tlarÄ± iletebileceÄŸi unutulmamalÄ±dÄ±r.
{% endhint %}

Chrome'da iÃ§erik betiklerini gÃ¶rÃ¼ntÃ¼lemek ve hata ayÄ±klamak iÃ§in Chrome geliÅŸtirici araÃ§larÄ± menÃ¼sÃ¼ne Options > More tools > Developer tools veya Ctrl + Shift + I tuÅŸlarÄ±na basarak eriÅŸilebilir.

GeliÅŸtirici araÃ§larÄ± gÃ¶rÃ¼ntÃ¼lendikten sonra, **Source** sekmesine tÄ±klanmalÄ± ve ardÄ±ndan **Content Scripts** sekmesine geÃ§ilmelidir. Bu, Ã§eÅŸitli uzantÄ±lardan Ã§alÄ±ÅŸan iÃ§erik betiklerinin gÃ¶zlemlenmesine ve yÃ¼rÃ¼tme akÄ±ÅŸÄ±nÄ± takip etmek iÃ§in kesme noktalarÄ±nÄ±n ayarlanmasÄ±na olanak tanÄ±r.

### Enjekte edilen iÃ§erik betikleri

{% hint style="success" %}
**Ä°Ã§erik Betikleri zorunlu deÄŸildir**, Ã§Ã¼nkÃ¼ betiklerin web sayfalarÄ±na **dinamik olarak enjekte edilmesi** ve **programatik olarak enjekte edilmesi** de mÃ¼mkÃ¼ndÃ¼r. Bu aslÄ±nda daha **ayrÄ±ntÄ±lÄ± kontroller** saÄŸlar.
{% endhint %}

Bir iÃ§erik betiÄŸinin programatik olarak enjekte edilmesi iÃ§in, betiÄŸin enjekte edileceÄŸi sayfa iÃ§in uzantÄ±nÄ±n [host izinlerine](https://developer.chrome.com/docs/extensions/reference/permissions) sahip olmasÄ± gerekmektedir. Bu izinler, izinlerin uzantÄ±nÄ±n manifestinde **istendiÄŸi** veya geÃ§ici olarak [**activeTab**](https://developer.chrome.com/docs/extensions/reference/manifest/activeTab) aracÄ±lÄ±ÄŸÄ±yla saÄŸlanabilir.

#### Ã–rnek activeTab tabanlÄ± uzantÄ±

{% code title="manifest.json" %}
```json
{
"name": "My extension",
...
"permissions": [
"activeTab",
"scripting"
],
"background": {
"service_worker": "background.js"
},
"action": {
"default_title": "Action Button"
}
}
```
{% endcode %}

* **Bir JS dosyasÄ±nÄ± tÄ±klama ile enjekte etmek:**
```javascript
// content-script.js
document.body.style.backgroundColor = "orange";

//service-worker.js - Inject the JS file
chrome.action.onClicked.addListener((tab) => {
chrome.scripting.executeScript({
target: { tabId: tab.id },
files: ["content-script.js"]
});
});
```
* **TÄ±klama** olayÄ±nda bir fonksiyon **enjekte edin**:
```javascript
//service-worker.js - Inject a function
function injectedFunction() {
document.body.style.backgroundColor = "orange";
}

chrome.action.onClicked.addListener((tab) => {
chrome.scripting.executeScript({
target : {tabId : tab.id},
func : injectedFunction,
});
});
```
#### Betik Ä°zinleri ile Ã–rnek

Bu bÃ¶lÃ¼mde, bir tarayÄ±cÄ± uzantÄ±sÄ±nÄ±n betik izinlerini kullanarak nasÄ±l test edileceÄŸini gÃ¶stereceÄŸiz. Bu, uzantÄ±nÄ±n kullanÄ±cÄ± tarafÄ±ndan verilen izinlerle ne yapabileceÄŸini belirlemek iÃ§in Ã¶nemlidir.

1. Ä°lk adÄ±m olarak, hedef uzantÄ±nÄ±n manifest dosyasÄ±nÄ± inceleyin. Bu dosya, uzantÄ±nÄ±n hangi izinlere sahip olduÄŸunu belirler. Ã–rneÄŸin, bir uzantÄ±nÄ±n "tabs" iznine sahip olduÄŸunu gÃ¶rdÃ¼ÄŸÃ¼nÃ¼zde, bu uzantÄ±nÄ±n tarayÄ±cÄ± sekmesiyle etkileÅŸimde bulunabileceÄŸini anlarsÄ±nÄ±z.

2. Ä°kinci adÄ±mda, hedef uzantÄ±yÄ± yÃ¼kleyin ve kullanÄ±n. UzantÄ±nÄ±n sunduÄŸu Ã¶zellikleri ve iÅŸlevleri test edin. Ã–rneÄŸin, bir uzantÄ±nÄ±n web sayfalarÄ±nda iÃ§erik deÄŸiÅŸtirebildiÄŸini veya tarayÄ±cÄ± sekmesini kontrol edebildiÄŸini gÃ¶zlemleyebilirsiniz.

3. ÃœÃ§Ã¼ncÃ¼ adÄ±mda, hedef uzantÄ±nÄ±n betik izinlerini test edin. Bunun iÃ§in, uzantÄ±nÄ±n kullanÄ±cÄ± tarafÄ±ndan verilen izinleri nasÄ±l kullandÄ±ÄŸÄ±nÄ± anlamak iÃ§in bir test senaryosu oluÅŸturun. Ã–rneÄŸin, bir uzantÄ±nÄ±n "tabs" iznine sahip olduÄŸunu gÃ¶rdÃ¼ÄŸÃ¼nÃ¼zde, bu izni kullanarak tarayÄ±cÄ± sekmesini deÄŸiÅŸtirmeyi deneyebilirsiniz.

4. DÃ¶rdÃ¼ncÃ¼ adÄ±mda, hedef uzantÄ±nÄ±n izinlerini kÃ¶tÃ¼ye kullanma potansiyelini deÄŸerlendirin. UzantÄ±nÄ±n kullanÄ±cÄ± tarafÄ±ndan verilen izinleri kÃ¶tÃ¼ye kullanarak ne tÃ¼r saldÄ±rÄ±lar gerÃ§ekleÅŸtirebileceÄŸini dÃ¼ÅŸÃ¼nÃ¼n. Ã–rneÄŸin, bir uzantÄ±nÄ±n "storage" iznine sahip olduÄŸunu gÃ¶rdÃ¼ÄŸÃ¼nÃ¼zde, bu izni kullanarak kullanÄ±cÄ±nÄ±n yerel depolama verilerine eriÅŸebilirsiniz.

5. BeÅŸinci adÄ±mda, hedef uzantÄ±nÄ±n gÃ¼venlik Ã¶nlemlerini test edin. UzantÄ±nÄ±n kullanÄ±cÄ± tarafÄ±ndan verilen izinleri nasÄ±l koruduÄŸunu ve kÃ¶tÃ¼ niyetli kullanÄ±mlara karÅŸÄ± nasÄ±l savunduÄŸunu deÄŸerlendirin. Ã–rneÄŸin, bir uzantÄ±nÄ±n "tabs" iznine sahip olduÄŸunu gÃ¶rdÃ¼ÄŸÃ¼nÃ¼zde, bu iznin kÃ¶tÃ¼ niyetli bir saldÄ±rgan tarafÄ±ndan nasÄ±l kÃ¶tÃ¼ye kullanÄ±labileceÄŸini dÃ¼ÅŸÃ¼nÃ¼n ve bu tÃ¼r saldÄ±rÄ±lara karÅŸÄ± nasÄ±l korunduÄŸunu test edin.

Bu metodolojiyi kullanarak, hedef uzantÄ±nÄ±n betik izinlerini test edebilir ve potansiyel gÃ¼venlik aÃ§Ä±klarÄ±nÄ± tespit edebilirsiniz. Bu, uzantÄ±nÄ±n kullanÄ±cÄ± tarafÄ±ndan verilen izinleri nasÄ±l kullandÄ±ÄŸÄ±nÄ± ve kÃ¶tÃ¼ye kullanma potansiyelini deÄŸerlendirmenize yardÄ±mcÄ± olur.
```javascript
// service-workser.js
chrome.scripting.registerContentScripts([{
id : "test",
matches : [ "https://*.example.com/*" ],
excludeMatches : [ "*://*/*business*" ],
js : [ "contentScript.js" ],
}]);

// Another example
chrome.tabs.executeScript(tabId, { file: "content_script.js" });
```
Daha fazla URL eklemek veya hariÃ§ tutmak iÃ§in **`include_globs`** ve **`exclude_globs`** kullanmak da mÃ¼mkÃ¼ndÃ¼r.

### Ä°Ã§erik Betikleri `run_at`

`run_at` alanÄ±, **JavaScript dosyalarÄ±nÄ±n web sayfasÄ±na ne zaman enjekte edileceÄŸini kontrol eder**. Tercih edilen ve varsayÄ±lan deÄŸer `"document_idle"`'dÄ±r.

MÃ¼mkÃ¼n olan deÄŸerler ÅŸunlardÄ±r:

* **`document_idle`**: MÃ¼mkÃ¼n olduÄŸunda
* **`document_start`**: `css` dosyalarÄ±ndan sonra, ancak herhangi bir DOM oluÅŸturulmadan veya herhangi bir betik Ã§alÄ±ÅŸtÄ±rÄ±lmadan Ã¶nce.
* **`document_end`**: DOM tamamlandÄ±ktan hemen sonra, ancak resimler ve Ã§erÃ§eveler gibi alt kaynaklar yÃ¼klenmeden Ã¶nce.

#### `manifest.json` Ã¼zerinden
```json
{
"name": "My extension",
...
"content_scripts": [
{
"matches": ["https://*.example.com/*"],
"run_at": "document_idle",
"js": ["contentScript.js"]
}
],
...
}

```
**`service-worker.js`** Ã¼zerinden
```javascript
chrome.scripting.registerContentScripts([{
id : "test",
matches : [ "https://*.example.com/*" ],
runAt : "document_idle",
js : [ "contentScript.js" ],
}]);
```
### `arkaplan`

Ä°Ã§erik betikleri tarafÄ±ndan gÃ¶nderilen mesajlar, uzantÄ±nÄ±n bileÅŸenlerini koordine eden **arkaplan sayfasÄ±** tarafÄ±ndan alÄ±nÄ±r. Ã–zellikle, arkaplan sayfasÄ± doÄŸrudan kullanÄ±cÄ± etkileÅŸimi olmadan gizli bir ÅŸekilde Ã§alÄ±ÅŸarak uzantÄ±nÄ±n Ã¶mrÃ¼ boyunca devam eder. Kendi Document Object Model (DOM) 'a sahiptir ve karmaÅŸÄ±k etkileÅŸimler ve durum yÃ¶netimi saÄŸlar.

**Ana Noktalar**:

- **Arkaplan Sayfa RolÃ¼:** UzantÄ±nÄ±n farklÄ± parÃ§alarÄ± arasÄ±nda iletiÅŸimi ve koordinasyonu saÄŸlayarak uzantÄ±nÄ±n sinir merkezi olarak hareket eder.
- **KalÄ±cÄ±lÄ±k:** KullanÄ±cÄ±ya gÃ¶rÃ¼nmez ancak uzantÄ±nÄ±n iÅŸlevselliÄŸi iÃ§in Ã¶nemlidir ve sÃ¼rekli olarak mevcuttur.
- **Otomatik OluÅŸturma:** Belirtilmediyse, tarayÄ±cÄ± otomatik olarak bir arkaplan sayfasÄ± oluÅŸturur. Bu otomatik oluÅŸturulan sayfa, uzantÄ±nÄ±n manifestinde belirtilen tÃ¼m arkaplan betiklerini iÃ§erir ve uzantÄ±nÄ±n arkaplan gÃ¶revlerinin sorunsuz Ã§alÄ±ÅŸmasÄ±nÄ± saÄŸlar.

{% hint style="success" %}
TarayÄ±cÄ±nÄ±n otomatik olarak bir arkaplan sayfasÄ± oluÅŸturmasÄ± (aÃ§Ä±kÃ§a belirtilmediÄŸinde) saÄŸladÄ±ÄŸÄ± kolaylÄ±k, gerekli tÃ¼m arkaplan betiklerinin entegre edilerek ve operasyonel hale getirilerek uzantÄ±nÄ±n kurulum sÃ¼recini basitleÅŸtirir.
{% endhint %}

Ã–rnek arkaplan betiÄŸi:
```js
chrome.runtime.onMessage.addListener((request, sender, sendResponse) =>
{
if (request == "explain")
{
chrome.tabs.create({ url: "https://example.net/explanation" });
}
})
```
[runtime.onMessage API](https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/runtime/onMessage) kullanarak mesajlarÄ± dinler. Bir `"explain"` mesajÄ± alÄ±ndÄ±ÄŸÄ±nda, [tabs API](https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs) kullanÄ±larak yeni bir sekmede bir sayfa aÃ§ar.

Arka plan betiÄŸini hata ayÄ±klamak iÃ§in **uzantÄ± ayrÄ±ntÄ±larÄ±na gidip hizmet Ã§alÄ±ÅŸanÄ±nÄ± inceleyebilirsiniz,** bu arka plan betiÄŸi ile geliÅŸtirici araÃ§larÄ±nÄ± aÃ§acaktÄ±r:

<figure><img src="broken-reference" alt=""><figcaption></figcaption></figure>

### SeÃ§enek sayfalarÄ± ve diÄŸerleri

TarayÄ±cÄ± uzantÄ±larÄ± Ã§eÅŸitli tÃ¼rde sayfalar iÃ§erebilir:

* **Eylem sayfalarÄ±**, uzantÄ± simgesine tÄ±klandÄ±ÄŸÄ±nda bir **aÃ§Ä±lÄ±r menÃ¼de** gÃ¶rÃ¼ntÃ¼lenir.
* UzantÄ±nÄ±n **yeni bir sekmede yÃ¼kleyeceÄŸi** sayfalar.
* **SeÃ§enek SayfalarÄ±**: Bu sayfa, tÄ±klanÄ±ldÄ±ÄŸÄ±nda uzantÄ±nÄ±n Ã¼zerinde gÃ¶rÃ¼ntÃ¼lenir. Ã–nceki manifestoda bu sayfaya `chrome://extensions/?options=fadlhnelkbeojnebcbkacjilhnbjfjca` adresinden veya aÅŸaÄŸÄ±daki gibi tÄ±klayarak eriÅŸebildim:

<figure><img src="../../.gitbook/assets/image (8).png" alt="" width="375"><figcaption></figcaption></figure>

Bu sayfalar, arka plan sayfalarÄ± gibi kalÄ±cÄ± deÄŸildir, gerektiÄŸinde dinamik olarak iÃ§erik yÃ¼klerler. Bununla birlikte, arka plan sayfasÄ±yla belirli yetenekleri paylaÅŸÄ±rlar:

- **Ä°Ã§erik Betikleriyle Ä°letiÅŸim:** Arka plan sayfasÄ±na benzer ÅŸekilde, bu sayfalar iÃ§erik betiklerinden mesaj alabilir ve uzantÄ± iÃ§inde etkileÅŸimi kolaylaÅŸtÄ±rÄ±r.
- **UzantÄ±ya Ã–zgÃ¼ API'lere EriÅŸim:** Bu sayfalar, uzantÄ±ya Ã¶zgÃ¼ API'lere kapsamlÄ± eriÅŸime sahiptir ve uzantÄ± iÃ§in tanÄ±mlanan izinlere tabidir.

### `permissions` ve `host_permissions`

**`permissions`** ve **`host_permissions`**, tarayÄ±cÄ± uzantÄ±sÄ±nÄ±n hangi izinlere (depolama, konum...) sahip olduÄŸunu ve hangi web sayfalarÄ±nda Ã§alÄ±ÅŸacaÄŸÄ±nÄ± belirten `manifest.json` dosyasÄ±ndaki giriÅŸlerdir.

TarayÄ±cÄ± uzantÄ±larÄ± bu kadar **yetkilendirilebildiÄŸi** iÃ§in, kÃ¶tÃ¼ niyetli bir uzantÄ± veya birinin ele geÃ§irilmesi saldÄ±rganÄ±n **hassas bilgileri Ã§almak ve kullanÄ±cÄ±yÄ± izlemek iÃ§in farklÄ± yÃ¶ntemlere izin verebilir**.

Bu ayarlarÄ±n nasÄ±l Ã§alÄ±ÅŸtÄ±ÄŸÄ±nÄ± ve nasÄ±l kÃ¶tÃ¼ye kullanÄ±labileceÄŸini kontrol edin:

{% content-ref url="browext-permissions-and-host_permissions.md" %}
[browext-permissions-and-host\_permissions.md](browext-permissions-and-host\_permissions.md)
{% endcontent-ref %}

### `content_security_policy`

Bir **iÃ§erik gÃ¼venlik politikasÄ±** de `manifest.json` iÃ§inde belirtilebilir. TanÄ±mlanmÄ±ÅŸsa, **savunmasÄ±z** olabilir.

TarayÄ±cÄ± uzantÄ±sÄ± sayfalarÄ± iÃ§in varsayÄ±lan ayar oldukÃ§a kÄ±sÄ±tlayÄ±cÄ±dÄ±r:
```bash
script-src 'self'; object-src 'self';
```
Daha fazla bilgi iÃ§in CSP ve potansiyel bypasslar hakkÄ±nda kontrol edin:

{% content-ref url="../content-security-policy-csp-bypass/" %}
[content-security-policy-csp-bypass](../content-security-policy-csp-bypass/)
{% endcontent-ref %}

### `web_accessible_resources`

Bir web sayfasÄ±nÄ±n, Ã¶rneÄŸin bir `.html` sayfasÄ±nÄ±n, bir TarayÄ±cÄ± UzantÄ±sÄ±'nÄ±n bir sayfasÄ±na eriÅŸmesi iÃ§in bu sayfanÄ±n `manifest.json` dosyasÄ±nÄ±n **`web_accessible_resources`** alanÄ±nda belirtilmesi gerekmektedir.\
Ã–rneÄŸin:
```javascript
{
...
"web_accessible_resources": [
{
"resources": [ "images/*.png" ],
"matches": [ "https://example.com/*" ]
},
{
"resources": [ "fonts/*.woff" ],
"matches": [ "https://example.com/*" ]
}
],
...
}
```
Bu sayfalara ÅŸu ÅŸekilde eriÅŸilebilir:
```
chrome-extension://<extension-id>/message.html
```
Halka aÃ§Ä±k uzantÄ±larda **uzantÄ± kimliÄŸi eriÅŸilebilir**:

<figure><img src="../../.gitbook/assets/image (722).png" alt="" width="375"><figcaption></figcaption></figure>

Ancak, `manifest.json` parametresi olan **`use_dynamic_url`** kullanÄ±lÄ±yorsa, bu **kimlik dinamik olabilir**.

Bu sayfalara eriÅŸime izin vermek, bu sayfalarÄ±n **potansiyel olarak savunmasÄ±z ClickJacking** olmasÄ±na neden olur:

{% content-ref url="browext-clickjacking.md" %}
[browext-clickjacking.md](browext-clickjacking.md)
{% endcontent-ref %}

{% hint style="success" %}
Bu sayfalarÄ±n yalnÄ±zca uzantÄ± tarafÄ±ndan yÃ¼klenmesine ve rastgele URL'ler tarafÄ±ndan yÃ¼klenmemesine izin vermek, ClickJacking saldÄ±rÄ±larÄ±nÄ± Ã¶nleyebilir.
{% endhint %}

### `externally_connectable`

[**Belgelere**](https://developer.chrome.com/docs/extensions/reference/manifest/externally-connectable) gÃ¶re, `"externally_connectable"` manifest Ã¶zelliÄŸi, [runtime.connect](https://developer.chrome.com/docs/extensions/reference/runtime#method-connect) ve [runtime.sendMessage](https://developer.chrome.com/docs/extensions/reference/runtime#method-sendMessage) aracÄ±lÄ±ÄŸÄ±yla uzantÄ±nÄ±za kimlerin baÄŸlanabileceÄŸini belirtir.

* EÄŸer **`externally_connectable`** anahtarÄ± uzantÄ±nÄ±zÄ±n manifestinde **belirtilmezse veya `"ids": ["*"]`** olarak belirtilirse, **tÃ¼m uzantÄ±lar baÄŸlanabilir, ancak hiÃ§bir web sayfasÄ± baÄŸlanamaz**.
* Belirli kimlikler belirtilmiÅŸse, Ã¶rneÄŸin `"ids": ["aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa"]`, **yalnÄ±zca o uygulamalar** baÄŸlanabilir.
* EÅŸleÅŸmeler belirtilmiÅŸse, bu web uygulamalarÄ± baÄŸlanabilir:
```json
"matches": [
"https://*.google.com/*",
"*://*.chromium.org/*",
```
* EÄŸer boÅŸ olarak belirtilmiÅŸse: **`"externally_connectable": {}`**, hiÃ§bir uygulama veya web baÄŸlantÄ± kuramaz.

Burada belirtilen **daha az uzantÄ± ve URL** ile, saldÄ±rÄ± yÃ¼zeyi **daha kÃ¼Ã§Ã¼k** olacaktÄ±r.

{% hint style="danger" %}
EÄŸer **XSS veya ele geÃ§irme** aÃ§Ä±ÄŸÄ±na sahip bir web sayfasÄ± **`externally_connectable`** iÃ§inde belirtilmiÅŸse, saldÄ±rgan, Ä°Ã§erik BetiÄŸi ve CSP'sini tamamen atlayarak mesajlarÄ± doÄŸrudan arka plan betiÄŸine gÃ¶nderebilecektir.

Bu nedenle, bu **Ã§ok gÃ¼Ã§lÃ¼ bir atlatmadÄ±r**.
{% endhint %}

## Web **â†”ï¸** Ä°Ã§erik BetiÄŸi Ä°letiÅŸimi

**Ä°Ã§erik betiklerinin** Ã§alÄ±ÅŸtÄ±ÄŸÄ± ortamlar ve ana sayfalarÄ±n bulunduÄŸu ortamlar birbirinden **ayrÄ±lmÄ±ÅŸ** ve **izole** edilmiÅŸtir. Bu izolasyona raÄŸmen, her ikisi de sayfanÄ±n **Belge Nesne Modeli (DOM)** ile etkileÅŸimde bulunma yeteneÄŸine sahiptir. Ana sayfanÄ±n **iÃ§erik betiÄŸi** ile iletiÅŸim kurmasÄ± veya dolaylÄ± olarak iÃ§erik betiÄŸi aracÄ±lÄ±ÄŸÄ±yla uzantÄ± ile iletiÅŸim kurmasÄ± iÃ§in, her iki tarafÄ±n da eriÅŸebildiÄŸi **DOM**'u iletiÅŸim kanalÄ± olarak kullanmasÄ± gerekmektedir.

### Mesaj GÃ¶nderme

{% code title="iÃ§erik-betiÄŸi.js" %}
```javascript
var port = chrome.runtime.connect();

window.addEventListener("message", (event) => {
// We only accept messages from ourselves
if (event.source !== window) {
return;
}

if (event.data.type && (event.data.type === "FROM_PAGE")) {
console.log("Content script received: " + event.data.text);
port.postMessage(event.data.text);
}
}, false);
```
{% code title="ornek.js" %}
```javascript
document.getElementById("theButton").addEventListener("click", () => {
window.postMessage(
{type : "FROM_PAGE", text : "Hello from the webpage!"}, "*");
}, false);
```
{% endcode %}

GÃ¼venli bir Post Message iletiÅŸimi, alÄ±nan iletiÅŸimin doÄŸruluÄŸunu kontrol etmelidir, bunu kontrol etmek iÃ§in ÅŸunlar yapÄ±labilir:

* **`event.isTrusted`**: Bu, olayÄ±n bir kullanÄ±cÄ± eylemi tarafÄ±ndan tetiklendiÄŸi durumlarda yalnÄ±zca True'dur.
* Ä°Ã§erik betiÄŸi, kullanÄ±cÄ± belirli bir eylem gerÃ§ekleÅŸtirdiÄŸinde bir ileti bekleyebilir.
* **kÃ¶ken alanÄ±**: yalnÄ±zca belirli bir alan adÄ± beyaz listesindeki bir ileti bekleyebilir.
* EÄŸer bir regex kullanÄ±lÄ±yorsa, Ã§ok dikkatli olunmalÄ±dÄ±r.
* **Kaynak**: `received_message.source !== window`, Ä°Ã§erik BetiÄŸi'nin dinlediÄŸi pencereden **gelen ileti**nin kontrol edilmesi iÃ§in kullanÄ±labilir.

Ã–nceki kontroller, yapÄ±lsa bile, savunmasÄ±z olabilir, bu nedenle aÅŸaÄŸÄ±daki sayfada **potansiyel Post Message atlatmalarÄ±nÄ±** kontrol edin:

{% content-ref url="../postmessage-vulnerabilities/" %}
[postmessage-vulnerabilities](../postmessage-vulnerabilities/)
{% endcontent-ref %}

### Iframe

BaÅŸka bir iletiÅŸim yÃ¶ntemi, **Iframe URL'leri** aracÄ±lÄ±ÄŸÄ±yla olabilir, bir Ã¶rneÄŸini aÅŸaÄŸÄ±da bulabilirsiniz:

{% content-ref url="browext-xss-example.md" %}
[browext-xss-example.md](browext-xss-example.md)
{% endcontent-ref %}

### DOM

Bu tam olarak bir iletiÅŸim yÃ¶ntemi deÄŸildir, ancak **web ve iÃ§erik betiÄŸi web DOM'a eriÅŸebilir**. Bu nedenle, **iÃ§erik betiÄŸi** bunlardan bazÄ± bilgileri okuyorsa ve web DOM'a gÃ¼veniyorsa, web bu verileri **deÄŸiÅŸtirebilir** (Ã§Ã¼nkÃ¼ web gÃ¼venilir olmamalÄ±dÄ±r veya web XSS'e karÅŸÄ± savunmasÄ±z olabilir) ve **Ä°Ã§erik BetiÄŸi'ni tehlikeye atabilir**.

AyrÄ±ca, bir **DOM tabanlÄ± XSS ile bir tarayÄ±cÄ± uzantÄ±sÄ±nÄ± tehlikeye atma** Ã¶rneÄŸi bulabilirsiniz:

{% content-ref url="browext-xss-example.md" %}
[browext-xss-example.md](browext-xss-example.md)
{% endcontent-ref %}

## Bellekte/Koddaki Hassas Bilgiler

Bir TarayÄ±cÄ± UzantÄ±sÄ±, **hassas bilgileri belleÄŸinde** saklÄ±yorsa, bu bilgiler (Ã¶zellikle Windows makinelerinde) **dÃ¶kÃ¼lebilir** ve bu bilgiler iÃ§in **arama yapÄ±labilir**.

Bu nedenle, TarayÄ±cÄ± UzantÄ±sÄ±nÄ±n belleÄŸi **gÃ¼venli kabul edilmemeli** ve kimlik bilgileri veya anÄ± cÃ¼mleleri gibi **hassas bilgiler saklanmamalÄ±dÄ±r**.

Tabii ki, hassas bilgileri **koda koymayÄ±n**, Ã§Ã¼nkÃ¼ bu bilgiler **herkese aÃ§Ä±k** olacaktÄ±r.

## Ä°Ã§erik BetiÄŸi **â†”ï¸** Arka Plan BetiÄŸi Ä°letiÅŸimi

Bir Ä°Ã§erik BetiÄŸi, bir **kez JSON-uyarlanabilir** bir ileti gÃ¶ndermek iÃ§in [**runtime.sendMessage()**](https://developer.chrome.com/docs/extensions/reference/runtime#method-sendMessage) **veya** [**tabs.sendMessage()**](https://developer.chrome.com/docs/extensions/reference/tabs#method-sendMessage) fonksiyonlarÄ±nÄ± kullanabilir.

**YanÄ±tÄ±** iÅŸlemek iÃ§in dÃ¶nen **Promise**'Ä± kullanÄ±n. Bununla birlikte, geriye dÃ¶nÃ¼k uyumluluk iÃ§in, hala bir **geri Ã§aÄŸrÄ±**yÄ± son argÃ¼man olarak iletebilirsiniz.

Bir **iÃ§erik betiÄŸinden** bir istek gÃ¶ndermek aÅŸaÄŸÄ±daki gibi gÃ¶rÃ¼nÃ¼r:
```javascript
(async () => {
const response = await chrome.runtime.sendMessage({greeting: "hello"});
// do something with response here, not outside the function
console.log(response);
})();
```
**UzantÄ±dan** (genellikle bir **arkaplan betiÄŸi**) bir istek gÃ¶nderme Bir Ä°Ã§erik BetiÄŸi, fonksiyonlarÄ± kullanabilir, ancak hangi sekme gÃ¶nderileceÄŸini belirtmeniz gerekmektedir. SeÃ§ilen sekmedeki iÃ§erik betiÄŸine mesaj gÃ¶ndermek iÃ§in Ã¶rnek:
```javascript
// From https://stackoverflow.com/questions/36153999/how-to-send-a-message-between-chrome-extension-popup-and-content-script
(async () => {
const [tab] = await chrome.tabs.query({active: true, lastFocusedWindow: true});
const response = await chrome.tabs.sendMessage(tab.id, {greeting: "hello"});
// do something with response here, not outside the function
console.log(response);
})();
```
**AlÄ±cÄ± tarafÄ±nda**, mesajÄ± iÅŸlemek iÃ§in bir [**runtime.onMessage**](https://developer.chrome.com/docs/extensions/reference/runtime#event-onMessage) **olay dinleyicisi** kurmanÄ±z gerekmektedir. Bu, iÃ§erik betiÄŸi veya uzantÄ± sayfasÄ±ndan aynÄ± ÅŸekilde gÃ¶rÃ¼nmektedir.
```javascript
// From https://stackoverflow.com/questions/70406787/javascript-send-message-from-content-js-to-background-js
chrome.runtime.onMessage.addListener(
function(request, sender, sendResponse) {
console.log(sender.tab ?
"from a content script:" + sender.tab.url :
"from the extension");
if (request.greeting === "hello")
sendResponse({farewell: "goodbye"});
}
);
```
Ã–rnekte vurgulanan Ã¶rnekte, **`sendResponse()`** senkron bir ÅŸekilde Ã§alÄ±ÅŸtÄ±rÄ±ldÄ±. `onMessage` olay iÅŸleyicisini `sendResponse()`'un asenkron olarak Ã§alÄ±ÅŸmasÄ± iÃ§in deÄŸiÅŸtirmek iÃ§in `return true;` dahil etmek Ã¶nemlidir.

BirkaÃ§ sayfanÄ±n `onMessage` olaylarÄ±nÄ± almasÄ± durumunda, belirli bir olay iÃ§in **`sendResponse()`'un ilk sayfanÄ±n** yanÄ±tÄ± etkin bir ÅŸekilde iletebileceÄŸi tek sayfa olacaÄŸÄ± Ã¶nemli bir husustur. AynÄ± olaya yÃ¶nelik sonraki yanÄ±tlar dikkate alÄ±nmayacaktÄ±r.

Yeni uzantÄ±lar oluÅŸturulurken, tercih geriÃ§aÄŸÄ±rÄ±mlar yerine sÃ¶z verilere yÃ¶nelik olmalÄ±dÄ±r. GeriÃ§aÄŸÄ±rÄ±mlarÄ±n kullanÄ±mÄ±yla ilgili olarak, `sendResponse()` iÅŸlevi yalnÄ±zca senkron baÄŸlamda doÄŸrudan Ã§alÄ±ÅŸtÄ±rÄ±ldÄ±ÄŸÄ±nda veya olay iÅŸleyicisi asenkron bir iÅŸlemi belirtiyorsa geÃ§erli kabul edilir. HiÃ§bir iÅŸleyici `true` dÃ¶ndÃ¼rmezse veya `sendResponse()` iÅŸlevi bellekten kaldÄ±rÄ±lÄ±rsa (Ã§Ã¶p toplama), `sendMessage()` iÅŸleviyle iliÅŸkilendirilmiÅŸ geriÃ§aÄŸÄ±rÄ±cÄ± varsayÄ±lan olarak tetiklenecektir.


## TarayÄ±cÄ±da Bir UzantÄ± YÃ¼kleme

1. TarayÄ±cÄ± UzantÄ±sÄ±nÄ± **indirin** ve aÃ§Ä±n
2. **`chrome://extensions/`** adresine gidin ve `GeliÅŸtirici Modu`'nu **etkinleÅŸtirin**
3. **`PaketlenmemiÅŸ Ã¶ÄŸe yÃ¼kle`** dÃ¼ÄŸmesine tÄ±klayÄ±n

**Firefox** iÃ§in **`about:debugging#/runtime/this-firefox`** adresine gidin ve **`GeÃ§ici Eklenti YÃ¼kle`** dÃ¼ÄŸmesine tÄ±klayÄ±n.

## MaÄŸazadan kaynak kodunu alma

Bir Chrome uzantÄ±sÄ±nÄ±n kaynak kodu Ã§eÅŸitli yÃ¶ntemlerle elde edilebilir. AÅŸaÄŸÄ±da her seÃ§enek iÃ§in detaylÄ± aÃ§Ä±klamalar ve talimatlar bulunmaktadÄ±r.

### Komut SatÄ±rÄ± AracÄ±lÄ±ÄŸÄ±yla ZIP Olarak UzantÄ±yÄ± Ä°ndirme

Bir Chrome uzantÄ±sÄ±nÄ±n kaynak kodu, komut satÄ±rÄ± aracÄ±lÄ±ÄŸÄ±yla ZIP dosyasÄ± olarak indirilebilir. Bu, `curl` kullanarak belirli bir URL'den ZIP dosyasÄ±nÄ± almayÄ± ve ardÄ±ndan ZIP dosyasÄ±nÄ±n iÃ§eriÄŸini bir dizine Ã§Ä±karmayÄ± iÃ§erir. Ä°ÅŸte adÄ±mlar:

1. `"extension_id"` ifadesini uzantÄ±nÄ±n gerÃ§ek kimliÄŸiyle deÄŸiÅŸtirin.
2. AÅŸaÄŸÄ±daki komutlarÄ± Ã§alÄ±ÅŸtÄ±rÄ±n:
```bash
extension_id=your_extension_id   # Replace with the actual extension ID
curl -L -o "$extension_id.zip" "https://clients2.google.com/service/update2/crx?response=redirect&os=mac&arch=x86-64&nacl_arch=x86-64&prod=chromecrx&prodchannel=stable&prodversion=44.0.2403.130&x=id%3D$extension_id%26uc"
unzip -d "$extension_id-source" "$extension_id.zip"
```
### CRX Viewer websitesini kullanÄ±n

[https://robwu.nl/crxviewer/](https://robwu.nl/crxviewer/)

### CRX Viewer uzantÄ±sÄ±nÄ± kullanÄ±n

BaÅŸka bir pratik yÃ¶ntem, aÃ§Ä±k kaynaklÄ± bir proje olan Chrome Extension Source Viewer'Ä± kullanmaktÄ±r. Bu, [Chrome Web MaÄŸazasÄ±](https://chrome.google.com/webstore/detail/chrome-extension-source-v/jifpbeccnghkjeaalbbjmodiffmgedin?hl=en) Ã¼zerinden yÃ¼klenir. GÃ¶rÃ¼ntÃ¼leyicinin kaynak kodu, [GitHub deposunda](https://github.com/Rob--W/crxviewer) bulunmaktadÄ±r.

### Yerel olarak yÃ¼klenmiÅŸ uzantÄ±nÄ±n kaynaÄŸÄ±nÄ± gÃ¶rÃ¼ntÃ¼leyin

Yerel olarak yÃ¼klenen Chrome uzantÄ±larÄ± da incelenebilir. Ä°ÅŸte nasÄ±l yapÄ±lÄ±r:

1. "chrome://version/" adresine giderek Chrome yerel profil dizinine eriÅŸin ve "Profil Yolu" alanÄ±nÄ± bulun.
2. Profil dizini iÃ§indeki "Extensions/" alt klasÃ¶rÃ¼ne gidin.
3. Bu klasÃ¶r, genellikle okunabilir bir biÃ§imde kaynak kodunu iÃ§eren tÃ¼m yÃ¼klenmiÅŸ uzantÄ±larÄ± iÃ§erir.

UzantÄ±larÄ± tanÄ±mlamak iÃ§in ID'lerini isimlere eÅŸleyebilirsiniz:

- "about:extensions" sayfasÄ±nda GeliÅŸtirici Modunu etkinleÅŸtirerek her uzantÄ±nÄ±n ID'lerini gÃ¶rebilirsiniz.
- Her uzantÄ±nÄ±n klasÃ¶rÃ¼ iÃ§inde, "manifest.json" dosyasÄ±, uzantÄ±yÄ± tanÄ±mlamanÄ±za yardÄ±mcÄ± olan okunabilir bir "name" alanÄ± iÃ§erir.

### Bir Dosya ArÅŸivleyici veya Ã‡Ä±kartÄ±cÄ± KullanÄ±n
Chrome Web MaÄŸazasÄ±na gidin ve uzantÄ±yÄ± indirin. DosyanÄ±n uzantÄ±sÄ± ".crx" olacaktÄ±r.
Dosya uzantÄ±sÄ±nÄ± ".zip" olarak deÄŸiÅŸtirin.
ZIP dosyasÄ±nÄ±n iÃ§eriÄŸini Ã§Ä±karmak iÃ§in WinRAR, 7-Zip vb. herhangi bir dosya arÅŸivleyiciyi kullanÄ±n.

### Chrome'da GeliÅŸtirici Modunu KullanÄ±n
Chrome'u aÃ§Ä±n ve "chrome://extensions/" adresine gidin.
SaÄŸ Ã¼st kÃ¶ÅŸede "GeliÅŸtirici modunu" etkinleÅŸtirin.
"YÃ¼klenmemiÅŸ uzantÄ±yÄ± yÃ¼kle" Ã¼zerine tÄ±klayÄ±n.
UzantÄ±nÄ±n dizinine gidin.
Bu, kaynak kodunu indirmese de, zaten indirilmiÅŸ veya geliÅŸtirilmiÅŸ bir uzantÄ±nÄ±n kodunu gÃ¶rÃ¼ntÃ¼lemek ve deÄŸiÅŸtirmek iÃ§in kullanÄ±ÅŸlÄ±dÄ±r.

## GÃ¼venlik Denetim Listesi

TarayÄ±cÄ± UzantÄ±larÄ±nÄ±n **sÄ±nÄ±rlÄ± bir saldÄ±rÄ± yÃ¼zeyi** olsa da, bazÄ±larÄ± **zayÄ±flÄ±klar** veya **potansiyel sertleÅŸtirme iyileÅŸtirmeleri** iÃ§erebilir. AÅŸaÄŸÄ±dakiler en yaygÄ±n olanlardÄ±r:

* [ ] MÃ¼mkÃ¼n olduÄŸunca Ã§ok **`permissions`** isteÄŸini **sÄ±nÄ±rlayÄ±n**
* [ ] MÃ¼mkÃ¼n olduÄŸunca Ã§ok **`host_permissions`** isteÄŸini **sÄ±nÄ±rlayÄ±n**
* [ ] GÃ¼Ã§lÃ¼ bir **`content_security_policy`** kullanÄ±n
* [ ] **`externally_connectable`** isteklerini mÃ¼mkÃ¼n olduÄŸunca **sÄ±nÄ±rlayÄ±n**, gerekli deÄŸilse ve mÃ¼mkÃ¼nse, varsayÄ±lan olarak bÄ±rakmayÄ±n, **`{}`** belirtin
* [ ] XSS veya ele geÃ§irmeye karÅŸÄ± savunmasÄ±z bir URL burada belirtiliyorsa, bir saldÄ±rgan arka plan betiklerine doÄŸrudan mesaj gÃ¶nderebilecektir. Ã‡ok gÃ¼Ã§lÃ¼ bir bypass.
* [ ] MÃ¼mkÃ¼n olduÄŸunca **`web_accessible_resources`** isteklerini sÄ±nÄ±rlayÄ±n, mÃ¼mkÃ¼nse boÅŸ bÄ±rakÄ±n.
* [ ] **`web_accessible_resources`** yoksa, [**ClickJacking**](browext-clickjacking.md) iÃ§in kontrol edin
* [ ] UzantÄ±dan web sayfasÄ±na herhangi bir iletiÅŸim varsa, iletiÅŸimde oluÅŸan [**XSS zafiyetlerini kontrol edin**](browext-xss-example.md)
* [ ] Post MesajlarÄ± kullanÄ±lÄ±yorsa, [**Post Mesaj zafiyetlerini kontrol edin**](../postmessage-vulnerabilities/)**.**
* [ ] Ä°Ã§erik BetiÄŸi DOM ayrÄ±ntÄ±larÄ±na eriÅŸiyorsa, web tarafÄ±ndan **deÄŸiÅŸtirildiÄŸinde XSS** tanÄ±tmadÄ±klarÄ±nÄ± kontrol edin
* [ ] Bu iletiÅŸim aynÄ± zamanda **Ä°Ã§erik BetiÄŸi -> Arka plan betiÄŸi iletiÅŸiminde** yer alÄ±yorsa, Ã¶zel bir vurgu yapÄ±n
* [ ] Hassas bilgileri Browser UzantÄ±sÄ± **kodunun iÃ§ine saklamayÄ±n**
* [ ] Hassas bilgileri Browser UzantÄ±sÄ± **belleÄŸine saklamayÄ±n**

## AraÃ§lar

### [**Tarnish**](https://thehackerblog.com/tarnish/)

* SaÄŸlanan bir Chrome web maÄŸazasÄ± baÄŸlantÄ±sÄ±ndan herhangi bir Chrome uzantÄ±sÄ±nÄ± alÄ±r.
* [**manifest.json**](https://developer.chrome.com/extensions/manifest) **gÃ¶rÃ¼ntÃ¼leyici**: uzantÄ±nÄ±n manifest dosyasÄ±nÄ±n JSON dÃ¼zgÃ¼nleÅŸtirilmiÅŸ bir sÃ¼rÃ¼mÃ¼nÃ¼ basitÃ§e gÃ¶rÃ¼ntÃ¼ler.
* **Parmak izi Analizi**: [web\_accessible\_resources](https://developer.chrome.com/extensions/manifest/web\_accessible\_resources) tespiti ve Chrome uzantÄ±sÄ± parmak izi oluÅŸturma JavaScript'inin otomatik olarak oluÅŸturulmasÄ±.
* **Potansiyel Clickjacking Analizi**: [web\_accessible\_resources](https://developer.chrome.com/extensions/manifest/web\_accessible\_resources) yÃ¶nergesiyle uzantÄ± HTML sayfalarÄ±nÄ±n tespiti. Bu sayfalarÄ±n amacÄ±na baÄŸlÄ± olarak clickjacking'e karÅŸÄ± potansiyel olarak savunmasÄ±z olabilirler.
* **Ä°zin UyarÄ±larÄ± gÃ¶rÃ¼ntÃ¼leyici**: kullanÄ±cÄ±nÄ±n uzantÄ±yÄ± yÃ¼klemeye Ã§alÄ±ÅŸtÄ±ÄŸÄ±nda gÃ¶rÃ¼ntÃ¼lenecek tÃ¼m Chrome izin uyarÄ±larÄ±nÄ±n bir listesini gÃ¶sterir.
* **Tehlikeli Fonksiyon(lar)**: saldÄ±rgan tarafÄ±ndan kÃ¶tÃ¼ye kullanÄ±labilecek tehlikeli fonksiyonlarÄ±n konumunu gÃ¶sterir (Ã¶rneÄŸin, innerHTML, chrome.tabs.executeScript gibi fonksiyonlar).
* **GiriÅŸ NoktasÄ±(lar)**: uzantÄ±nÄ±n kullanÄ±cÄ±/dÄ±ÅŸ giriÅŸ alacaÄŸÄ± yerleri gÃ¶sterir. Bu, bir uzantÄ±nÄ±n yÃ¼zey alanÄ±nÄ± anlamak ve uzanta kÃ¶tÃ¼ niyetli olarak oluÅŸturulmuÅŸ verileri gÃ¶ndermek iÃ§in potansiyel noktalarÄ± aramak iÃ§in kullanÄ±ÅŸlÄ±dÄ±r.
* Tehlikeli Fonksiyon(lar) ve GiriÅŸ NoktasÄ±(lar) tarayÄ±cÄ±larÄ± aÅŸaÄŸÄ±daki Ã¶zelliklere sahiptir:
* UyarÄ±ya neden olan ilgili kod parÃ§acÄ±ÄŸÄ± ve satÄ±r.
* Sorunun aÃ§Ä±klamasÄ±.
* Kodu iÃ§eren tam kaynak dosyasÄ±nÄ± gÃ¶rÃ¼ntÃ¼lemek iÃ§in "DosyayÄ± GÃ¶rÃ¼ntÃ¼le" dÃ¼ÄŸmesi.
* UyarÄ± verilen dosyanÄ±n yolu.
* UyarÄ± verilen dosyanÄ±n tam Chrome uzantÄ±sÄ± URI'si.
* DosyanÄ±n tÃ¼rÃ¼, Ã–rneÄŸin Arka Plan SayfasÄ± betiÄŸi, Ä°Ã§erik BetiÄŸi, TarayÄ±cÄ± Eylemi vb.
* EÄŸer zayÄ±f satÄ±r bir JavaScript dosyasÄ±nda ise, dahil edildiÄŸi tÃ¼m sayfalarÄ±n yollarÄ± ve bu sayfalarÄ±n tÃ¼rleri, [web\_accessible\_resource](https://developer.chrome.com/extensions/manifest/web\_accessible\_resources) durumu.
* **Ä°Ã§erik GÃ¼venlik PolitikasÄ± (CSP) analizcisi ve bypass kontrolcÃ¼sÃ¼
* EÄŸer **ÅŸirketinizin HackTricks'te reklamÄ±nÄ± gÃ¶rmek** veya **HackTricks'i PDF olarak indirmek** isterseniz, [**ABONELÄ°K PLANLARINA**](https://github.com/sponsors/carlospolop) gÃ¶z atÄ±n!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin.
* [**PEASS Ailesi'ni**](https://opensea.io/collection/the-peass-family) keÅŸfedin, Ã¶zel [**NFT'lerimiz**](https://opensea.io/collection/the-peass-family) koleksiyonunu.
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katÄ±lÄ±n** veya bizi **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)**'da takip edin**.
* **Hacking hilelerinizi** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarÄ±na **pull request gÃ¶ndererek paylaÅŸÄ±n**.

</details>
