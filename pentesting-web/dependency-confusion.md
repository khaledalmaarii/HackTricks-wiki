# ä¾èµ–æ··æ·†

{% hint style="success" %}
å­¦ä¹ å’Œå®è·µ AWS é»‘å®¢æŠ€æœ¯ï¼š<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks åŸ¹è®­ AWS çº¢é˜Ÿä¸“å®¶ (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
å­¦ä¹ å’Œå®è·µ GCP é»‘å®¢æŠ€æœ¯ï¼š<img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks åŸ¹è®­ GCP çº¢é˜Ÿä¸“å®¶ (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>æ”¯æŒ HackTricks</summary>

* æŸ¥çœ‹ [**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**Telegram ç¾¤ç»„**](https://t.me/peass) æˆ– **å…³æ³¨** æˆ‘ä»¬çš„ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub ä»“åº“æäº¤ PR æ¥åˆ†äº«é»‘å®¢æŠ€å·§ã€‚

</details>
{% endhint %}

<figure><img src="https://pentest.eu/RENDER_WebSec_10fps_21sec_9MB_29042024.gif" alt=""><figcaption></figcaption></figure>

{% embed url="https://websec.nl/" %}

## åŸºæœ¬ä¿¡æ¯

æ€»ä¹‹ï¼Œä¾èµ–æ··æ·†æ¼æ´å‘ç”Ÿåœ¨é¡¹ç›®ä½¿ç”¨ä¸€ä¸ª **æ‹¼å†™é”™è¯¯**ã€**ä¸å­˜åœ¨**æˆ– **æœªæŒ‡å®šç‰ˆæœ¬** çš„åº“æ—¶ï¼Œè€Œæ‰€ä½¿ç”¨çš„ä¾èµ–åº“ä»“åº“å…è®¸ä» **å…¬å…±** ä»“åº“ **è·å–æ›´æ–°ç‰ˆæœ¬**ã€‚

* **æ‹¼å†™é”™è¯¯**ï¼šå¯¼å…¥ **`reqests`** è€Œä¸æ˜¯ `requests`
* **ä¸å­˜åœ¨**ï¼šå¯¼å…¥ `company-logging`ï¼Œä¸€ä¸ª **ä¸å†å­˜åœ¨** çš„å†…éƒ¨åº“
* **æœªæŒ‡å®šç‰ˆæœ¬**ï¼šå¯¼å…¥ä¸€ä¸ª **å†…éƒ¨** **å­˜åœ¨çš„** `company-requests` åº“ï¼Œä½†ä»“åº“æ£€æŸ¥ **å…¬å…±ä»“åº“** ä»¥æŸ¥çœ‹æ˜¯å¦æœ‰ **æ›´é«˜ç‰ˆæœ¬**ã€‚

## åˆ©ç”¨

{% hint style="warning" %}
åœ¨æ‰€æœ‰æƒ…å†µä¸‹ï¼Œæ”»å‡»è€…åªéœ€å‘å¸ƒä¸€ä¸ª **æ¶æ„åŒ…ï¼Œåç§°ä¸** å—å®³å…¬å¸ä½¿ç”¨çš„åº“ç›¸åŒã€‚
{% endhint %}

### æ‹¼å†™é”™è¯¯ä¸ä¸å­˜åœ¨

å¦‚æœæ‚¨çš„å…¬å¸è¯•å›¾ **å¯¼å…¥ä¸€ä¸ªä¸æ˜¯å†…éƒ¨çš„åº“**ï¼Œé‚£ä¹ˆåº“çš„ä»“åº“å¾ˆå¯èƒ½ä¼šåœ¨ **å…¬å…±ä»“åº“** ä¸­æœç´¢å®ƒã€‚å¦‚æœæ”»å‡»è€…åˆ›å»ºäº†å®ƒï¼Œæ‚¨çš„ä»£ç å’Œè¿è¡Œçš„æœºå™¨å¾ˆå¯èƒ½ä¼šè¢«æ”»é™·ã€‚

### æœªæŒ‡å®šç‰ˆæœ¬

å¼€å‘è€… **ä¸æŒ‡å®šä»»ä½•ç‰ˆæœ¬** çš„åº“ï¼Œæˆ–ä»…æŒ‡å®šä¸€ä¸ª **ä¸»è¦ç‰ˆæœ¬** æ˜¯éå¸¸å¸¸è§çš„ã€‚ç„¶åï¼Œè§£é‡Šå™¨å°†å°è¯•ä¸‹è½½ç¬¦åˆè¿™äº›è¦æ±‚çš„ **æœ€æ–°ç‰ˆæœ¬**ã€‚\
å¦‚æœåº“æ˜¯ä¸€ä¸ª **å·²çŸ¥çš„å¤–éƒ¨åº“**ï¼ˆå¦‚ Python çš„ `requests`ï¼‰ï¼Œæ”»å‡»è€… **æ— æ³•åšå¤ªå¤š**ï¼Œå› ä¸ºä»–æ— æ³•åˆ›å»ºä¸€ä¸ªåä¸º `requests` çš„åº“ï¼ˆé™¤éä»–æ˜¯åŸä½œè€…ï¼‰ã€‚\
ç„¶è€Œï¼Œå¦‚æœåº“æ˜¯ **å†…éƒ¨çš„**ï¼Œå¦‚æœ¬ä¾‹ä¸­çš„ `requests-company`ï¼Œå¦‚æœ **åº“ä»“åº“** å…è®¸ **æ£€æŸ¥æ–°ç‰ˆæœ¬ä¹Ÿåœ¨å¤–éƒ¨**ï¼Œå®ƒå°†æœç´¢ä¸€ä¸ªå…¬å¼€å¯ç”¨çš„æ›´æ–°ç‰ˆæœ¬ã€‚\
å› æ­¤ï¼Œå¦‚æœä¸€ä¸ª **æ”»å‡»è€…çŸ¥é“** å…¬å¸æ­£åœ¨ä½¿ç”¨ `requests-company` åº“ **ç‰ˆæœ¬ 1.0.1**ï¼ˆå…è®¸å°ç‰ˆæœ¬æ›´æ–°ï¼‰ã€‚ä»–å¯ä»¥ **å‘å¸ƒ** åº“ `requests-company` **ç‰ˆæœ¬ 1.0.2**ï¼Œè€Œå…¬å¸å°† **ä½¿ç”¨è¯¥åº“è€Œä¸æ˜¯å†…éƒ¨åº“**ã€‚

## AWS ä¿®å¤

æ­¤æ¼æ´åœ¨ AWS **CodeArtifact** ä¸­è¢«å‘ç°ï¼ˆé˜…è¯» [**æ­¤åšå®¢æ–‡ç« ä¸­çš„è¯¦ç»†ä¿¡æ¯**](https://zego.engineering/dependency-confusion-in-aws-codeartifact-86b9ff68963d)ï¼‰ã€‚\
AWS é€šè¿‡å…è®¸æŒ‡å®šåº“æ˜¯å†…éƒ¨è¿˜æ˜¯å¤–éƒ¨æ¥ä¿®å¤æ­¤é—®é¢˜ï¼Œä»¥é¿å…ä»å¤–éƒ¨ä»“åº“ä¸‹è½½å†…éƒ¨ä¾èµ–ã€‚

## æŸ¥æ‰¾æ˜“å—æ”»å‡»çš„åº“

åœ¨ [**å…³äºä¾èµ–æ··æ·†çš„åŸå§‹æ–‡ç« **](https://medium.com/@alex.birsan/dependency-confusion-4a5d60fec610) ä¸­ï¼Œä½œè€…æœç´¢äº†æ•°åƒä¸ªæš´éœ²çš„ package.json æ–‡ä»¶ï¼ŒåŒ…å« JavaScript é¡¹ç›®çš„ä¾èµ–ã€‚

## å‚è€ƒæ–‡çŒ®

* [https://medium.com/@alex.birsan/dependency-confusion-4a5d60fec610](https://medium.com/@alex.birsan/dependency-confusion-4a5d60fec610)
* [https://zego.engineering/dependency-confusion-in-aws-codeartifact-86b9ff68963d](https://zego.engineering/dependency-confusion-in-aws-codeartifact-86b9ff68963d)

<figure><img src="https://pentest.eu/RENDER_WebSec_10fps_21sec_9MB_29042024.gif" alt=""><figcaption></figcaption></figure>

{% embed url="https://websec.nl/" %}

{% hint style="success" %}
å­¦ä¹ å’Œå®è·µ AWS é»‘å®¢æŠ€æœ¯ï¼š<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks åŸ¹è®­ AWS çº¢é˜Ÿä¸“å®¶ (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
å­¦ä¹ å’Œå®è·µ GCP é»‘å®¢æŠ€æœ¯ï¼š<img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks åŸ¹è®­ GCP çº¢é˜Ÿä¸“å®¶ (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>æ”¯æŒ HackTricks</summary>

* æŸ¥çœ‹ [**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**Telegram ç¾¤ç»„**](https://t.me/peass) æˆ– **å…³æ³¨** æˆ‘ä»¬çš„ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub ä»“åº“æäº¤ PR æ¥åˆ†äº«é»‘å®¢æŠ€å·§ã€‚

</details>
{% endhint %}
