# Dependency Confusion

<details>

<summary><strong>Nau캜ite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

* Da li radite u **cybersecurity kompaniji**? 콯elite li da vidite svoju **kompaniju reklamiranu na HackTricks-u**? Ili 쬰lite da imate pristup **najnovijoj verziji PEASS-a ili preuzmete HackTricks u PDF formatu**? Proverite [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Otkrijte [**The PEASS Family**](https://opensea.io/collection/the-peass-family), na코u kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* Nabavite [**zvani캜ni PEASS & HackTricks swag**](https://peass.creator-spring.com)
* **Pridru쬴te se** [**游눫**](https://emojipedia.org/speech-balloon/) [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili me **pratite** na **Twitter-u** 游냕[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Podelite svoje hakovanje trikove slanjem PR-ova na [hacktricks repo](https://github.com/carlospolop/hacktricks) i [hacktricks-cloud repo](https://github.com/carlospolop/hacktricks-cloud)**.

</details>

## Osnovne informacije

Ukratko, ranjivost dependency confusion se javlja kada projekat koristi biblioteku sa **pogre코no napisanim** imenom, **ne-postoje캖om** ili sa **nedefinisanom verzijom**, a kori코캖eni repozitorijum dozvoljava **preuzimanje a쬿riranih verzija iz javnih** repozitorijuma.

* **Pogre코no napisano**: Uvozite **`reqests`** umesto `requests`
* **Ne-postoje캖e**: Uvozite `company-logging`, internu biblioteku koja **vi코e ne postoji**
* **Nedefinisana verzija**: Uvozite **internu** **postoje캖u** biblioteku `company-requests`, ali repozitorijum proverava **javne repozitorijume** da vidi da li postoje **novije verzije**.

## Eksploatacija

{% hint style="warning" %}
U svim slu캜ajevima, napada캜u je dovoljno da objavi **zlonamerni paket sa imenom** biblioteka koje koristi kompanija rtva.
{% endhint %}

### Pogre코no napisano & Ne-postoje캖e

Ako va코a kompanija poku코ava da **uvozi biblioteku koja nije interna**, veoma je verovatno da 캖e repozitorijum biblioteka tra쬴ti tu biblioteku u **javnom repozitorijumu**. Ako je napada캜 kreirao tu biblioteku, va코 kod i ma코ine koje je pokre캖u 캖e verovatno biti kompromitovane.

### Nedefinisana verzija

Veoma je 캜esto da programeri **ne defini코u verziju** biblioteke koju koriste, ili defini코u samo **glavnu verziju**. Tada 캖e interpreter poku코ati da preuzme **poslednju verziju** koja odgovara tim zahtevima.\
Ako je biblioteka **poznata spoljna biblioteka** (kao 코to je python `requests`), **napada캜 ne mo쬰 mnogo da uradi**, jer ne캖e mo캖i da kreira biblioteku sa nazivom `requests` (osim ako je originalni autor).\
Me캠utim, ako je biblioteka **interna**, kao 코to je `requests-company` u ovom primeru, ako **repozitorijum biblioteke** dozvoljava **proveru novih verzija i spolja**, tra쬴캖e noviju verziju koja je javno dostupna.\
Dakle, ako **napada캜 zna** da kompanija koristi biblioteku `requests-company` **verzije 1.0.1** (dozvoljava manje a쬿riranja), mo쬰 **objaviti** biblioteku `requests-company` **verzije 1.0.2** i kompanija 캖e **koristiti tu biblioteku umesto interne**.

## AWS Popravka

Ova ranjivost je prona캠ena u AWS **CodeArtifact-u** (pro캜itajte [**detalje u ovom blog postu**](https://zego.engineering/dependency-confusion-in-aws-codeartifact-86b9ff68963d)).\
AWS je ovo popravio tako 코to je omogu캖io da se specificira da li je biblioteka interna ili spoljna, kako bi se izbeglo preuzimanje internih zavisnosti iz spoljnih repozitorijuma.

## Pronala쬰nje Ranjivih Biblioteka

U [**originalnom postu o dependency confusion-u**](https://medium.com/@alex.birsan/dependency-confusion-4a5d60fec610) autor je pretra쬴vao hiljade izlo쬰nih package.json fajlova koji sadr쬰 zavisnosti projekata u JavaScript-u.

## Reference

* [https://medium.com/@alex.birsan/dependency-confusion-4a5d60fec610](https://medium.com/@alex.birsan/dependency-confusion-4a5d60fec610)
* [https://zego.engineering/dependency-confusion-in-aws-codeartifact-86b9ff68963d](https://zego.engineering/dependency-confusion-in-aws-codeartifact-86b9ff68963d)

<details>

<summary><strong>Nau캜ite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

* Da li radite u **cybersecurity kompaniji**? 콯elite li da vidite svoju **kompaniju reklamiranu na HackTricks-u**? Ili 쬰lite da imate pristup **najnovijoj verziji PEASS-a ili preuzmete HackTricks u PDF formatu**? Proverite [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Otkrijte [**The PEASS Family**](https://opensea.io/collection/the-peass-family), na코u kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* Nabavite [**zvani캜ni PEASS & HackTricks swag**](https://peass.creator-spring.com)
* **Pridru쬴te se** [**游눫**](https://emojipedia.org/speech-balloon/) [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili me **pratite** na **Twitter-u** 游냕[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Podelite svoje hakovanje trikove slanjem PR-ova na [hacktricks repo](https://github.com/carlospolop/hacktricks) i [hacktricks-cloud repo](https://github.com/carlospolop/hacktricks-cloud)**.

</details>
