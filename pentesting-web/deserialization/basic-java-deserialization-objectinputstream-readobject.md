<details>

<summary><strong>ä»é›¶å¼€å§‹å­¦ä¹ AWSé»‘å®¢æŠ€æœ¯ï¼Œæˆä¸º</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTEï¼ˆHackTricks AWSçº¢é˜Ÿä¸“å®¶ï¼‰</strong></a><strong>ï¼</strong></summary>

æ”¯æŒHackTricksçš„å…¶ä»–æ–¹å¼ï¼š

* å¦‚æœæ‚¨æƒ³åœ¨HackTricksä¸­çœ‹åˆ°æ‚¨çš„**å…¬å¸å¹¿å‘Š**æˆ–**ä¸‹è½½PDFæ ¼å¼çš„HackTricks**ï¼Œè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* è·å–[**å®˜æ–¹PEASS & HackTrickså‘¨è¾¹äº§å“**](https://peass.creator-spring.com)
* æ¢ç´¢[**PEASSå®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬çš„ç‹¬å®¶[**NFTs**](https://opensea.io/collection/the-peass-family)
* **åŠ å…¥** ğŸ’¬ [**Discordç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**ç”µæŠ¥ç¾¤ç»„**](https://t.me/peass) æˆ–åœ¨**Twitter**ä¸Šå…³æ³¨æˆ‘ä»¬ ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)**ã€‚**
* é€šè¿‡å‘[**HackTricks**](https://github.com/carlospolop/hacktricks)å’Œ[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) githubä»“åº“æäº¤PRæ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚

</details>


åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œå°†é€šè¿‡ä½¿ç”¨`java.io.Serializable`æ¥è§£é‡Šä¸€ä¸ªç¤ºä¾‹ã€‚

# Serializable

Java `Serializable`æ¥å£ï¼ˆ`java.io.Serializable`æ˜¯ä¸€ä¸ªæ ‡è®°æ¥å£ï¼Œå¦‚æœè¦å¯¹ç±»è¿›è¡Œ**åºåˆ—åŒ–**å’Œ**ååºåˆ—åŒ–**ï¼Œåˆ™å¿…é¡»å®ç°è¯¥æ¥å£ã€‚Javaå¯¹è±¡åºåˆ—åŒ–ï¼ˆå†™å…¥ï¼‰ä½¿ç”¨[ObjectOutputStream](http://tutorials.jenkov.com/java-io/objectoutputstream.html)ï¼Œååºåˆ—åŒ–ï¼ˆè¯»å–ï¼‰ä½¿ç”¨[ObjectInputStream](http://tutorials.jenkov.com/java-io/objectinputstream.html)ã€‚

è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªå…·æœ‰**å¯åºåˆ—åŒ–**çš„**Personç±»**çš„ç¤ºä¾‹ã€‚è¯¥ç±»**é‡å†™äº†readObject**å‡½æ•°ï¼Œå› æ­¤å½“**è¯¥ç±»**çš„**ä»»ä½•å¯¹è±¡**è¢«**ååºåˆ—åŒ–**æ—¶ï¼Œå°†æ‰§è¡Œæ­¤**å‡½æ•°**ã€‚\
åœ¨ç¤ºä¾‹ä¸­ï¼ŒPersonç±»çš„**readObjectå‡½æ•°**è°ƒç”¨å…¶å® ç‰©çš„`eat()`å‡½æ•°ï¼Œè€ŒDogçš„`eat()`å‡½æ•°ï¼ˆå‡ºäºæŸç§åŸå› ï¼‰è°ƒç”¨**calc.exe**ã€‚**æˆ‘ä»¬å°†çœ‹åˆ°å¦‚ä½•å°†Personå¯¹è±¡åºåˆ—åŒ–å’Œååºåˆ—åŒ–ä»¥æ‰§è¡Œæ­¤è®¡ç®—å™¨ï¼š**

**ä»¥ä¸‹ç¤ºä¾‹æ¥è‡ª[https://medium.com/@knownsec404team/java-deserialization-tool-gadgetinspector-first-glimpse-74e99e493649](https://medium.com/@knownsec404team/java-deserialization-tool-gadgetinspector-first-glimpse-74e99e493649)**
```java
import java.io.Serializable;
import java.io.*;

public class TestDeserialization {
interface Animal {
public void eat();
}
//Class must implements Serializable to be serializable
public static class Cat implements Animal,Serializable {
@Override
public void eat() {
System.out.println("cat eat fish");
}
}
//Class must implements Serializable to be serializable
public static class Dog implements Animal,Serializable {
@Override
public void eat() {
try {
Runtime.getRuntime().exec("calc");
} catch (IOException e) {
e.printStackTrace();
}
System.out.println("dog eat bone");
}
}
//Class must implements Serializable to be serializable
public static class Person implements Serializable {
private Animal pet;
public Person(Animal pet){
this.pet = pet;
}
//readObject implementation, will call the readObject from ObjectInputStream  and then call pet.eat()
private void readObject(java.io.ObjectInputStream stream)
throws IOException, ClassNotFoundException {
pet = (Animal) stream.readObject();
pet.eat();
}
}
public static void GeneratePayload(Object instance, String file)
throws Exception {
//Serialize the constructed payload and write it to the file
File f = new File(file);
ObjectOutputStream out = new ObjectOutputStream(new FileOutputStream(f));
out.writeObject(instance);
out.flush();
out.close();
}
public static void payloadTest(String file) throws Exception {
//Read the written payload and deserialize it
ObjectInputStream in = new ObjectInputStream(new FileInputStream(file));
Object obj = in.readObject();
System.out.println(obj);
in.close();
}
public static void main(String[] args) throws Exception {
// Example to call Person with a Dog
Animal animal = new Dog();
Person person = new Person(animal);
GeneratePayload(person,"test.ser");
payloadTest("test.ser");
// Example to call Person with a Cat
//Animal animal = new Cat();
//Person person = new Person(animal);
//GeneratePayload(person,"test.ser");
//payloadTest("test.ser");
}
}
```
## ç»“è®º

æ­£å¦‚æ‚¨åœ¨è¿™ä¸ªéå¸¸åŸºæœ¬çš„ç¤ºä¾‹ä¸­æ‰€çœ‹åˆ°çš„ï¼Œè¿™é‡Œçš„â€œæ¼æ´â€å‡ºç°æ˜¯å› ä¸º**readObject**å‡½æ•°æ­£åœ¨**è°ƒç”¨å…¶ä»–æ˜“å—æ”»å‡»çš„å‡½æ•°**ã€‚


<details>

<summary><strong>ä»é›¶å¼€å§‹å­¦ä¹ AWSé»‘å®¢æŠ€æœ¯</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTEï¼ˆHackTricks AWSçº¢é˜Ÿä¸“å®¶ï¼‰</strong></a><strong>ï¼</strong></summary>

æ”¯æŒHackTricksçš„å…¶ä»–æ–¹å¼ï¼š

* å¦‚æœæ‚¨æƒ³çœ‹åˆ°æ‚¨çš„**å…¬å¸åœ¨HackTricksä¸­åšå¹¿å‘Š**æˆ–**ä¸‹è½½PDFæ ¼å¼çš„HackTricks**ï¼Œè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* è·å–[**å®˜æ–¹PEASS & HackTrickså‘¨è¾¹äº§å“**](https://peass.creator-spring.com)
* æ¢ç´¢[**PEASSå®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬çš„ç‹¬å®¶[**NFTs**](https://opensea.io/collection/the-peass-family)æ”¶è—å“
* **åŠ å…¥** ğŸ’¬ [**Discordç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**ç”µæŠ¥ç¾¤ç»„**](https://t.me/peass) æˆ–åœ¨**Twitter**ä¸Šå…³æ³¨æˆ‘ä»¬ ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)**ã€‚**
* é€šè¿‡å‘[**HackTricks**](https://github.com/carlospolop/hacktricks)å’Œ[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) githubä»“åº“æäº¤PRæ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚

</details>
