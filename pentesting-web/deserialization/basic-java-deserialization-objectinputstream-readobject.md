{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}


Î£Îµ Î±Ï…Ï„Î® Ï„Î·Î½ Î‘ÎÎ‘Î¡Î¤Î—Î£Î— Î¸Î± ÎµÎ¾Î·Î³Î·Î¸ÎµÎ¯ Î­Î½Î± Ï€Î±ÏÎ¬Î´ÎµÎ¹Î³Î¼Î± Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹ÏÎ½Ï„Î±Ï‚ Ï„Î¿ `java.io.Serializable`.

# Serializable

Î— Î´Î¹ÎµÏ€Î±Ï†Î® Java `Serializable` (`java.io.Serializable` ÎµÎ¯Î½Î±Î¹ Î¼Î¹Î± Î´Î¹ÎµÏ€Î±Ï†Î® ÏƒÎ®Î¼Î±Î½ÏƒÎ·Ï‚ Ï€Î¿Ï… Î¿Î¹ ÎºÎ»Î¬ÏƒÎµÎ¹Ï‚ ÏƒÎ±Ï‚ Ï€ÏÎ­Ï€ÎµÎ¹ Î½Î± Ï…Î»Î¿Ï€Î¿Î¹Î¿ÏÎ½ Î±Î½ Î¸Î­Î»Î¿Ï…Î½ Î½Î± **ÏƒÎµÎ¹ÏÎ¹Î¿Ï€Î¿Î¹Î·Î¸Î¿ÏÎ½** ÎºÎ±Î¹ **Î±Ï€Î¿ÏƒÎµÎ¹ÏÎ¹Î¿Ï€Î¿Î¹Î·Î¸Î¿ÏÎ½**. Î— ÏƒÎµÎ¹ÏÎ¹Î¿Ï€Î¿Î¯Î·ÏƒÎ· Î±Î½Ï„Î¹ÎºÎµÎ¹Î¼Î­Î½Ï‰Î½ Java (Î³ÏÎ±Ï†Î®) Î³Î¯Î½ÎµÏ„Î±Î¹ Î¼Îµ Ï„Î¿ [ObjectOutputStream](http://tutorials.jenkov.com/java-io/objectoutputstream.html) ÎºÎ±Î¹ Î· Î±Ï€Î¿ÏƒÎµÎ¹ÏÎ¹Î¿Ï€Î¿Î¯Î·ÏƒÎ· (Î±Î½Î¬Î³Î½Ï‰ÏƒÎ·) Î³Î¯Î½ÎµÏ„Î±Î¹ Î¼Îµ Ï„Î¿ [ObjectInputStream](http://tutorials.jenkov.com/java-io/objectinputstream.html).

Î‘Ï‚ Î´Î¿ÏÎ¼Îµ Î­Î½Î± Ï€Î±ÏÎ¬Î´ÎµÎ¹Î³Î¼Î± Î¼Îµ Î¼Î¹Î± **ÎºÎ»Î¬ÏƒÎ· Person** Î· Î¿Ï€Î¿Î¯Î± ÎµÎ¯Î½Î±Î¹ **ÏƒÎµÎ¹ÏÎ¹Î¿Ï€Î¿Î¹Î®ÏƒÎ¹Î¼Î·**. Î‘Ï…Ï„Î® Î· ÎºÎ»Î¬ÏƒÎ· **Ï…Ï€ÎµÏÎºÎ±Î»ÏÏ€Ï„ÎµÎ¹ Ï„Î· ÏƒÏ…Î½Î¬ÏÏ„Î·ÏƒÎ· readObject**, Î­Ï„ÏƒÎ¹ ÏŒÏ„Î±Î½ **Î¿Ï€Î¿Î¹Î¿Î´Î®Ï€Î¿Ï„Îµ Î±Î½Ï„Î¹ÎºÎµÎ¯Î¼ÎµÎ½Î¿** Î±Ï…Ï„Î®Ï‚ Ï„Î·Ï‚ **ÎºÎ»Î¬ÏƒÎ·Ï‚** ÎµÎ¯Î½Î±Î¹ **Î±Ï€Î¿ÏƒÎµÎ¹ÏÎ¹Î¿Ï€Î¿Î¹Î·Î¼Î­Î½Î¿**, Î±Ï…Ï„Î® Î· **ÏƒÏ…Î½Î¬ÏÏ„Î·ÏƒÎ·** Î¸Î± **ÎµÎºÏ„ÎµÎ»ÎµÎ¯Ï„Î±Î¹**.\
Î£Ï„Î¿ Ï€Î±ÏÎ¬Î´ÎµÎ¹Î³Î¼Î±, Î· **ÏƒÏ…Î½Î¬ÏÏ„Î·ÏƒÎ· readObject** Ï„Î·Ï‚ ÎºÎ»Î¬ÏƒÎ·Ï‚ Person ÎºÎ±Î»ÎµÎ¯ Ï„Î· ÏƒÏ…Î½Î¬ÏÏ„Î·ÏƒÎ· `eat()` Ï„Î¿Ï… ÎºÎ±Ï„Î¿Î¹ÎºÎ¯Î´Î¹Î¿Ï… Ï„Î¿Ï… ÎºÎ±Î¹ Î· ÏƒÏ…Î½Î¬ÏÏ„Î·ÏƒÎ· `eat()` ÎµÎ½ÏŒÏ‚ Î£ÎºÏÎ»Î¿Ï… (Î³Î¹Î± ÎºÎ¬Ï€Î¿Î¹Î¿ Î»ÏŒÎ³Î¿) ÎºÎ±Î»ÎµÎ¯ Î­Î½Î± **calc.exe**. **Î˜Î± Î´Î¿ÏÎ¼Îµ Ï€ÏÏ‚ Î½Î± ÏƒÎµÎ¹ÏÎ¹Î¿Ï€Î¿Î¹Î®ÏƒÎ¿Ï…Î¼Îµ ÎºÎ±Î¹ Î½Î± Î±Ï€Î¿ÏƒÎµÎ¹ÏÎ¹Î¿Ï€Î¿Î¹Î®ÏƒÎ¿Ï…Î¼Îµ Î­Î½Î± Î±Î½Ï„Î¹ÎºÎµÎ¯Î¼ÎµÎ½Î¿ Person Î³Î¹Î± Î½Î± ÎµÎºÏ„ÎµÎ»Î­ÏƒÎ¿Ï…Î¼Îµ Î±Ï…Ï„ÏŒÎ½ Ï„Î¿Î½ Ï…Ï€Î¿Î»Î¿Î³Î¹ÏƒÏ„Î®:**

**Î¤Î¿ Ï€Î±ÏÎ±ÎºÎ¬Ï„Ï‰ Ï€Î±ÏÎ¬Î´ÎµÎ¹Î³Î¼Î± ÎµÎ¯Î½Î±Î¹ Î±Ï€ÏŒ [https://medium.com/@knownsec404team/java-deserialization-tool-gadgetinspector-first-glimpse-74e99e493649](https://medium.com/@knownsec404team/java-deserialization-tool-gadgetinspector-first-glimpse-74e99e493649)**
```java
import java.io.Serializable;
import java.io.*;

public class TestDeserialization {
interface Animal {
public void eat();
}
//Class must implements Serializable to be serializable
public static class Cat implements Animal,Serializable {
@Override
public void eat() {
System.out.println("cat eat fish");
}
}
//Class must implements Serializable to be serializable
public static class Dog implements Animal,Serializable {
@Override
public void eat() {
try {
Runtime.getRuntime().exec("calc");
} catch (IOException e) {
e.printStackTrace();
}
System.out.println("dog eat bone");
}
}
//Class must implements Serializable to be serializable
public static class Person implements Serializable {
private Animal pet;
public Person(Animal pet){
this.pet = pet;
}
//readObject implementation, will call the readObject from ObjectInputStream  and then call pet.eat()
private void readObject(java.io.ObjectInputStream stream)
throws IOException, ClassNotFoundException {
pet = (Animal) stream.readObject();
pet.eat();
}
}
public static void GeneratePayload(Object instance, String file)
throws Exception {
//Serialize the constructed payload and write it to the file
File f = new File(file);
ObjectOutputStream out = new ObjectOutputStream(new FileOutputStream(f));
out.writeObject(instance);
out.flush();
out.close();
}
public static void payloadTest(String file) throws Exception {
//Read the written payload and deserialize it
ObjectInputStream in = new ObjectInputStream(new FileInputStream(file));
Object obj = in.readObject();
System.out.println(obj);
in.close();
}
public static void main(String[] args) throws Exception {
// Example to call Person with a Dog
Animal animal = new Dog();
Person person = new Person(animal);
GeneratePayload(person,"test.ser");
payloadTest("test.ser");
// Example to call Person with a Cat
//Animal animal = new Cat();
//Person person = new Person(animal);
//GeneratePayload(person,"test.ser");
//payloadTest("test.ser");
}
}
```
## Î£Ï…Î¼Ï€Î­ÏÎ±ÏƒÎ¼Î±

ÎŒÏ€Ï‰Ï‚ Î¼Ï€Î¿ÏÎµÎ¯Ï„Îµ Î½Î± Î´ÎµÎ¯Ï„Îµ ÏƒÎµ Î±Ï…Ï„ÏŒ Ï„Î¿ Ï€Î¿Î»Ï Î²Î±ÏƒÎ¹ÎºÏŒ Ï€Î±ÏÎ¬Î´ÎµÎ¹Î³Î¼Î±, Î· "ÎµÏ…Ï€Î¬Î¸ÎµÎ¹Î±" ÎµÎ´Ï ÎµÎ¼Ï†Î±Î½Î¯Î¶ÎµÏ„Î±Î¹ ÎµÏ€ÎµÎ¹Î´Î® Î· **readObject** ÏƒÏ…Î½Î¬ÏÏ„Î·ÏƒÎ· **ÎºÎ±Î»ÎµÎ¯ Î¬Î»Î»ÎµÏ‚ ÎµÏ…Î¬Î»Ï‰Ï„ÎµÏ‚ ÏƒÏ…Î½Î±ÏÏ„Î®ÏƒÎµÎ¹Ï‚**.


{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
