{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}


‡§á‡§∏ ‡§™‡•ã‡§∏‡•ç‡§ü ‡§Æ‡•á‡§Ç `java.io.Serializable` ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡§§‡•á ‡§π‡•Å‡§è ‡§è‡§ï ‡§â‡§¶‡§æ‡§π‡§∞‡§£ ‡§∏‡§Æ‡§ù‡§æ‡§Ø‡§æ ‡§ú‡§æ‡§è‡§ó‡§æ‡•§

# Serializable

Java `Serializable` ‡§á‡§Ç‡§ü‡§∞‡§´‡•á‡§∏ (`java.io.Serializable` ‡§è‡§ï ‡§Æ‡§æ‡§∞‡•ç‡§ï‡§∞ ‡§á‡§Ç‡§ü‡§∞‡§´‡•á‡§∏ ‡§π‡•à ‡§ú‡§ø‡§∏‡•á ‡§Ü‡§™‡§ï‡•Ä ‡§ï‡§ï‡•ç‡§∑‡§æ‡§ì‡§Ç ‡§ï‡•ã ‡§≤‡§æ‡§ó‡•Ç ‡§ï‡§∞‡§®‡§æ ‡§ö‡§æ‡§π‡§ø‡§è ‡§Ø‡§¶‡§ø ‡§â‡§®‡•ç‡§π‡•á‡§Ç **serialized** ‡§î‡§∞ **deserialized** ‡§ï‡§ø‡§Ø‡§æ ‡§ú‡§æ‡§®‡§æ ‡§π‡•à‡•§ Java ‡§ë‡§¨‡•ç‡§ú‡•á‡§ï‡•ç‡§ü ‡§∏‡•Ä‡§∞‡§ø‡§Ø‡§≤‡§æ‡§á‡§ú‡•á‡§∂‡§® (‡§≤‡•á‡§ñ‡§®) [ObjectOutputStream](http://tutorials.jenkov.com/java-io/objectoutputstream.html) ‡§ï‡•á ‡§∏‡§æ‡§• ‡§ï‡§ø‡§Ø‡§æ ‡§ú‡§æ‡§§‡§æ ‡§π‡•à ‡§î‡§∞ ‡§°‡•á‡§∏‡§ø‡§∞‡§ø‡§Ø‡§≤‡§æ‡§á‡§ú‡•á‡§∂‡§® (‡§™‡§¢‡§º‡§®‡§æ) [ObjectInputStream](http://tutorials.jenkov.com/java-io/objectinputstream.html) ‡§ï‡•á ‡§∏‡§æ‡§• ‡§ï‡§ø‡§Ø‡§æ ‡§ú‡§æ‡§§‡§æ ‡§π‡•à‡•§

‡§Ü‡§á‡§è ‡§è‡§ï **‡§ï‡§ï‡•ç‡§∑‡§æ Person** ‡§ï‡§æ ‡§â‡§¶‡§æ‡§π‡§∞‡§£ ‡§¶‡•á‡§ñ‡•á‡§Ç ‡§ú‡•ã **serializable** ‡§π‡•à‡•§ ‡§Ø‡§π ‡§ï‡§ï‡•ç‡§∑‡§æ **readObject** ‡§´‡§º‡§Ç‡§ï‡•ç‡§∂‡§® ‡§ï‡•ã **‡§ì‡§µ‡§∞‡§∞‡§æ‡§á‡§ü** ‡§ï‡§∞‡§§‡•Ä ‡§π‡•à, ‡§á‡§∏‡§≤‡§ø‡§è ‡§ú‡§¨ ‡§á‡§∏ **‡§ï‡§ï‡•ç‡§∑‡§æ** ‡§ï‡§æ **‡§ï‡•ã‡§à ‡§ë‡§¨‡•ç‡§ú‡•á‡§ï‡•ç‡§ü** **deserialized** ‡§ï‡§ø‡§Ø‡§æ ‡§ú‡§æ‡§§‡§æ ‡§π‡•à, ‡§§‡•ã ‡§Ø‡§π **‡§´‡§Ç‡§ï‡•ç‡§∂‡§®** **‡§ï‡§æ‡§∞‡•ç‡§Ø‡§®‡•ç‡§µ‡§ø‡§§** ‡§π‡•ã‡§ó‡§æ‡•§\
‡§â‡§¶‡§æ‡§π‡§∞‡§£ ‡§Æ‡•á‡§Ç, ‡§ï‡§ï‡•ç‡§∑‡§æ Person ‡§ï‡§æ **readObject ‡§´‡§Ç‡§ï‡•ç‡§∂‡§®** ‡§â‡§∏‡§ï‡•á ‡§™‡§æ‡§≤‡§§‡•Ç ‡§ú‡§æ‡§®‡§µ‡§∞ ‡§ï‡•á `eat()` ‡§´‡§º‡§Ç‡§ï‡•ç‡§∂‡§® ‡§ï‡•ã ‡§ï‡•â‡§≤ ‡§ï‡§∞‡§§‡§æ ‡§π‡•à ‡§î‡§∞ ‡§ï‡•Å‡§§‡•ç‡§§‡•á ‡§ï‡§æ `eat()` ‡§´‡§º‡§Ç‡§ï‡•ç‡§∂‡§® (‡§ï‡§ø‡§∏‡•Ä ‡§ï‡§æ‡§∞‡§£ ‡§∏‡•á) ‡§è‡§ï **calc.exe** ‡§ï‡•ã ‡§ï‡•â‡§≤ ‡§ï‡§∞‡§§‡§æ ‡§π‡•à‡•§ **‡§π‡§Æ ‡§¶‡•á‡§ñ‡•á‡§Ç‡§ó‡•á ‡§ï‡§ø ‡§á‡§∏ ‡§ï‡•à‡§≤‡§ï‡•Å‡§≤‡•á‡§ü‡§∞ ‡§ï‡•ã ‡§ï‡§æ‡§∞‡•ç‡§Ø‡§æ‡§®‡•ç‡§µ‡§ø‡§§ ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§è‡§ï Person ‡§ë‡§¨‡•ç‡§ú‡•á‡§ï‡•ç‡§ü ‡§ï‡•ã ‡§ï‡•à‡§∏‡•á ‡§∏‡•Ä‡§∞‡§ø‡§Ø‡§≤‡§æ‡§á‡§ú ‡§î‡§∞ ‡§°‡•á‡§∏‡§ø‡§∞‡§ø‡§Ø‡§≤‡§æ‡§á‡§ú ‡§ï‡§ø‡§Ø‡§æ ‡§ú‡§æ‡§è:**

**‡§®‡§ø‡§Æ‡•ç‡§®‡§≤‡§ø‡§ñ‡§ø‡§§ ‡§â‡§¶‡§æ‡§π‡§∞‡§£ [https://medium.com/@knownsec404team/java-deserialization-tool-gadgetinspector-first-glimpse-74e99e493649](https://medium.com/@knownsec404team/java-deserialization-tool-gadgetinspector-first-glimpse-74e99e493649) ‡§∏‡•á ‡§π‡•à**
```java
import java.io.Serializable;
import java.io.*;

public class TestDeserialization {
interface Animal {
public void eat();
}
//Class must implements Serializable to be serializable
public static class Cat implements Animal,Serializable {
@Override
public void eat() {
System.out.println("cat eat fish");
}
}
//Class must implements Serializable to be serializable
public static class Dog implements Animal,Serializable {
@Override
public void eat() {
try {
Runtime.getRuntime().exec("calc");
} catch (IOException e) {
e.printStackTrace();
}
System.out.println("dog eat bone");
}
}
//Class must implements Serializable to be serializable
public static class Person implements Serializable {
private Animal pet;
public Person(Animal pet){
this.pet = pet;
}
//readObject implementation, will call the readObject from ObjectInputStream  and then call pet.eat()
private void readObject(java.io.ObjectInputStream stream)
throws IOException, ClassNotFoundException {
pet = (Animal) stream.readObject();
pet.eat();
}
}
public static void GeneratePayload(Object instance, String file)
throws Exception {
//Serialize the constructed payload and write it to the file
File f = new File(file);
ObjectOutputStream out = new ObjectOutputStream(new FileOutputStream(f));
out.writeObject(instance);
out.flush();
out.close();
}
public static void payloadTest(String file) throws Exception {
//Read the written payload and deserialize it
ObjectInputStream in = new ObjectInputStream(new FileInputStream(file));
Object obj = in.readObject();
System.out.println(obj);
in.close();
}
public static void main(String[] args) throws Exception {
// Example to call Person with a Dog
Animal animal = new Dog();
Person person = new Person(animal);
GeneratePayload(person,"test.ser");
payloadTest("test.ser");
// Example to call Person with a Cat
//Animal animal = new Cat();
//Person person = new Person(animal);
//GeneratePayload(person,"test.ser");
//payloadTest("test.ser");
}
}
```
## ‡§®‡§ø‡§∑‡•ç‡§ï‡§∞‡•ç‡§∑

‡§ú‡•à‡§∏‡§æ ‡§ï‡§ø ‡§Ü‡§™ ‡§á‡§∏ ‡§¨‡§π‡•Å‡§§ ‡§¨‡•Å‡§®‡§ø‡§Ø‡§æ‡§¶‡•Ä ‡§â‡§¶‡§æ‡§π‡§∞‡§£ ‡§Æ‡•á‡§Ç ‡§¶‡•á‡§ñ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç, ‡§Ø‡§π‡§æ‡§Å "‡§ï‡§Æ‡§ú‡•ã‡§∞‡•Ä" ‡§á‡§∏ ‡§ï‡§æ‡§∞‡§£ ‡§∏‡•á ‡§™‡•ç‡§∞‡§ï‡§ü ‡§π‡•ã‡§§‡•Ä ‡§π‡•à ‡§ï‡•ç‡§Ø‡•ã‡§Ç‡§ï‡§ø **readObject** ‡§´‡§º‡§Ç‡§ï‡•ç‡§∂‡§® **‡§Ö‡§®‡•ç‡§Ø ‡§ï‡§Æ‡§ú‡•ã‡§∞ ‡§´‡§º‡§Ç‡§ï‡•ç‡§∂‡§®‡•ã‡§Ç** ‡§ï‡•ã **‡§ï‡•â‡§≤ ‡§ï‡§∞ ‡§∞‡§π‡§æ ‡§π‡•à**‡•§


{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
