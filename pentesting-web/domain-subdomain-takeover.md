# åŸŸå/å­åŸŸæ¥ç®¡

<details>

<summary><strong>ä»é›¶å¼€å§‹å­¦ä¹ AWSé»‘å®¢æŠ€æœ¯ï¼Œæˆä¸ºä¸“å®¶</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTEï¼ˆHackTricks AWS Red Team Expertï¼‰</strong></a><strong>ï¼</strong></summary>

æ”¯æŒHackTricksçš„å…¶ä»–æ–¹å¼ï¼š

* å¦‚æœæ‚¨æƒ³çœ‹åˆ°æ‚¨çš„**å…¬å¸åœ¨HackTricksä¸­åšå¹¿å‘Š**æˆ–**ä¸‹è½½PDFæ ¼å¼çš„HackTricks**ï¼Œè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* è·å–[**å®˜æ–¹PEASS & HackTrickså‘¨è¾¹äº§å“**](https://peass.creator-spring.com)
* æ¢ç´¢[**PEASSå®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬çš„ç‹¬å®¶[**NFTs**](https://opensea.io/collection/the-peass-family)æ”¶è—å“
* **åŠ å…¥** ğŸ’¬ [**Discordç¾¤**](https://discord.gg/hRep4RUj7f) æˆ– [**ç”µæŠ¥ç¾¤**](https://t.me/peass) æˆ–åœ¨**Twitter**ä¸Šå…³æ³¨æˆ‘ä»¬ ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks\_live)**ã€‚**
* é€šè¿‡å‘[**HackTricks**](https://github.com/carlospolop/hacktricks)å’Œ[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) githubä»“åº“æäº¤PRæ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚

</details>

<figure><img src="../.gitbook/assets/image (3) (1) (1) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

\
ä½¿ç”¨[**Trickest**](https://trickest.com/?utm\_campaign=hacktrics\&utm\_medium=banner\&utm\_source=hacktricks)å¯ä»¥è½»æ¾æ„å»ºå’Œ**è‡ªåŠ¨åŒ–å·¥ä½œæµç¨‹**ï¼Œä½¿ç”¨ä¸–ç•Œä¸Š**æœ€å…ˆè¿›**çš„ç¤¾åŒºå·¥å…·ã€‚\
ç«‹å³è·å–è®¿é—®æƒé™ï¼š

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

## åŸŸæ¥ç®¡

å¦‚æœæ‚¨å‘ç°æŸä¸ªåŸŸåï¼ˆdomain.tldï¼‰**è¢«æŸä¸ªæœåŠ¡åœ¨èŒƒå›´å†…ä½¿ç”¨**ï¼Œä½†**å…¬å¸**å·²ç»**å¤±å»äº†å¯¹å…¶çš„æ‰€æœ‰æƒ**ï¼Œæ‚¨å¯ä»¥å°è¯•**æ³¨å†Œ**å®ƒï¼ˆå¦‚æœä¾¿å®œçš„è¯ï¼‰ï¼Œå¹¶é€šçŸ¥å…¬å¸ã€‚å¦‚æœè¯¥åŸŸåé€šè¿‡**GET**å‚æ•°æˆ–**Referer**æ ‡å¤´æ¥æ”¶åˆ°ä¸€äº›**æ•æ„Ÿä¿¡æ¯**ï¼Œæ¯”å¦‚ä¼šè¯cookieï¼Œé‚£ä¹ˆè¿™è‚¯å®šæ˜¯ä¸€ä¸ª**æ¼æ´**ã€‚

### å­åŸŸæ¥ç®¡

å…¬å¸çš„ä¸€ä¸ªå­åŸŸæŒ‡å‘ä¸€ä¸ª**æœªæ³¨å†Œåç§°çš„ç¬¬ä¸‰æ–¹æœåŠ¡**ã€‚å¦‚æœæ‚¨å¯ä»¥åœ¨è¿™ä¸ª**ç¬¬ä¸‰æ–¹æœåŠ¡**ä¸­**åˆ›å»º**ä¸€ä¸ª**å¸æˆ·**å¹¶**æ³¨å†Œ**æ­£åœ¨ä½¿ç”¨çš„**åç§°**ï¼Œåˆ™å¯ä»¥æ‰§è¡Œå­åŸŸæ¥ç®¡ã€‚

æœ‰å‡ ç§å¸¦æœ‰å­—å…¸çš„å·¥å…·å¯ç”¨äºæ£€æŸ¥å¯èƒ½çš„æ¥ç®¡ï¼š

* [https://github.com/EdOverflow/can-i-take-over-xyz](https://github.com/EdOverflow/can-i-take-over-xyz)
* [https://github.com/blacklanternsecurity/bbot](https://github.com/blacklanternsecurity/bbot)
* [https://github.com/punk-security/dnsReaper](https://github.com/punk-security/dnsReaper)
* [https://github.com/haccer/subjack](https://github.com/haccer/subjack)
* [https://github.com/anshumanbh/tko-sub](https://github.com/anshumanbh/tko-subs)
* [https://github.com/ArifulProtik/sub-domain-takeover](https://github.com/ArifulProtik/sub-domain-takeover)
* [https://github.com/SaadAhmedx/Subdomain-Takeover](https://github.com/SaadAhmedx/Subdomain-Takeover)
* [https://github.com/Ice3man543/SubOver](https://github.com/Ice3man543/SubOver)
* [https://github.com/m4ll0k/takeover](https://github.com/m4ll0k/takeover)
* [https://github.com/antichown/subdomain-takeover](https://github.com/antichown/subdomain-takeover)
* [https://github.com/musana/mx-takeover](https://github.com/musana/mx-takeover)
* [https://github.com/PentestPad/subzy](https://github.com/PentestPad/subzy)

#### ä½¿ç”¨[BBOT](https://github.com/blacklanternsecurity/bbot)æ‰«æå¯åŠ«æŒçš„å­åŸŸï¼š

BBOTçš„é»˜è®¤å­åŸŸæšä¸¾ä¸­åŒ…å«å­åŸŸæ¥ç®¡æ£€æŸ¥ã€‚ç­¾åç›´æ¥ä»[https://github.com/EdOverflow/can-i-take-over-xyz](https://github.com/EdOverflow/can-i-take-over-xyz)è·å–ã€‚
```bash
bbot -t evilcorp.com -f subdomain-enum
```
### é€šè¿‡DNSé€šé…ç¬¦ç”Ÿæˆå­åŸŸæ¥ç®¡

å½“åœ¨ä¸€ä¸ªåŸŸä¸­ä½¿ç”¨DNSé€šé…ç¬¦æ—¶ï¼Œè¯¥åŸŸçš„ä»»ä½•è¯·æ±‚çš„å­åŸŸï¼Œå¦‚æœæ²¡æœ‰æ˜ç¡®æŒ‡å®šä¸åŒçš„åœ°å€ï¼Œå°†è¢«**è§£æä¸ºç›¸åŒçš„ä¿¡æ¯**ã€‚è¿™å¯ä»¥æ˜¯ä¸€ä¸ªA ipåœ°å€ï¼Œä¸€ä¸ªCNAME...

ä¾‹å¦‚ï¼Œå¦‚æœ`*.testing.com`è¢«é€šé…åˆ°`1.1.1.1`ã€‚é‚£ä¹ˆï¼Œ`not-existent.testing.com`å°†æŒ‡å‘`1.1.1.1`ã€‚

ç„¶è€Œï¼Œå¦‚æœç®¡ç†å‘˜å°†å…¶æŒ‡å‘**ç¬¬ä¸‰æ–¹æœåŠ¡é€šè¿‡CNAME**ï¼Œæ¯”å¦‚ä¸€ä¸ª**githubå­åŸŸ**ï¼Œä¾‹å¦‚(`sohomdatta1.github.io`)ã€‚æ”»å‡»è€…å¯ä»¥**åˆ›å»ºè‡ªå·±çš„ç¬¬ä¸‰æ–¹é¡µé¢**ï¼ˆåœ¨è¿™ç§æƒ…å†µä¸‹æ˜¯Githubï¼‰ï¼Œå¹¶è¡¨ç¤º`something.testing.com`æŒ‡å‘é‚£é‡Œã€‚å› ä¸º**CNAMEé€šé…ç¬¦**å°†åŒæ„ï¼Œæ”»å‡»è€…å°†èƒ½å¤Ÿ**ä¸ºå—å®³è€…çš„åŸŸç”Ÿæˆä»»æ„å­åŸŸæŒ‡å‘ä»–çš„é¡µé¢**ã€‚

æ‚¨å¯ä»¥åœ¨CTFè§£å¯†ä¸­æ‰¾åˆ°è¿™ç§æ¼æ´çš„ç¤ºä¾‹ï¼š[https://ctf.zeyu2001.com/2022/nitectf-2022/undocumented-js-api](https://ctf.zeyu2001.com/2022/nitectf-2022/undocumented-js-api)

## åˆ©ç”¨å­åŸŸæ¥ç®¡

å­åŸŸæ¥ç®¡æœ¬è´¨ä¸Šæ˜¯äº’è”ç½‘ä¸Šç‰¹å®šåŸŸçš„DNSæ¬ºéª—ï¼Œå…è®¸æ”»å‡»è€…ä¸ºä¸€ä¸ªåŸŸè®¾ç½®Aè®°å½•ï¼Œå¯¼è‡´æµè§ˆå™¨æ˜¾ç¤ºæ¥è‡ªæ”»å‡»è€…æœåŠ¡å™¨çš„å†…å®¹ã€‚è¿™ç§æµè§ˆå™¨ä¸­çš„**é€æ˜æ€§**ä½¿åŸŸåå®¹æ˜“å—åˆ°é’“é±¼æ”»å‡»ã€‚æ”»å‡»è€…å¯èƒ½åˆ©ç”¨[_typosquatting_](https://en.wikipedia.org/wiki/Typosquatting)æˆ–[_Doppelganger domains_](https://en.wikipedia.org/wiki/Doppelg%C3%A4nger)æ¥å®ç°è¿™ä¸€ç›®çš„ã€‚ç‰¹åˆ«å®¹æ˜“å—åˆ°å½±å“çš„æ˜¯åœ¨é’“é±¼é‚®ä»¶ä¸­URLçœ‹èµ·æ¥åˆæ³•çš„åŸŸåï¼Œæ¬ºéª—ç”¨æˆ·å¹¶é€šè¿‡åŸŸåå›ºæœ‰çš„ä¿¡ä»»è§„é¿åƒåœ¾é‚®ä»¶è¿‡æ»¤å™¨ã€‚

æŸ¥çœ‹è¿™ç¯‡[æ–‡ç« ä»¥è·å–æ›´å¤šè¯¦ç»†ä¿¡æ¯](https://0xpatrik.com/subdomain-takeover/)

### **SSLè¯ä¹¦**

å¦‚æœæ”»å‡»è€…é€šè¿‡åƒ[_Let's Encrypt_](https://letsencrypt.org/)è¿™æ ·çš„æœåŠ¡ç”ŸæˆSSLè¯ä¹¦ï¼Œå°†å¢åŠ è¿™äº›è™šå‡åŸŸåçš„åˆæ³•æ€§ï¼Œä½¿é’“é±¼æ”»å‡»æ›´å…·è¯´æœåŠ›ã€‚

### **Cookieå®‰å…¨å’Œæµè§ˆå™¨é€æ˜æ€§**

æµè§ˆå™¨é€æ˜æ€§è¿˜æ¶‰åŠåˆ°cookieå®‰å…¨ï¼Œå—[åŒæºç­–ç•¥](https://en.wikipedia.org/wiki/Same-origin\_policy)ç­‰æ”¿ç­–çš„çº¦æŸã€‚Cookieé€šå¸¸ç”¨äºç®¡ç†ä¼šè¯å’Œå­˜å‚¨ç™»å½•ä»¤ç‰Œï¼Œå¯ä»¥é€šè¿‡å­åŸŸæ¥ç®¡æ¥åˆ©ç”¨ã€‚æ”»å‡»è€…å¯ä»¥é€šè¿‡å°†ç”¨æˆ·é‡å®šå‘åˆ°ä¸€ä¸ªå—æŸçš„å­åŸŸæ¥**æ”¶é›†ä¼šè¯cookie**ï¼Œå±åŠç”¨æˆ·æ•°æ®å’Œéšç§ã€‚

### **ç”µå­é‚®ä»¶å’Œå­åŸŸæ¥ç®¡**

å­åŸŸæ¥ç®¡çš„å¦ä¸€ä¸ªæ–¹é¢æ¶‰åŠç”µå­é‚®ä»¶æœåŠ¡ã€‚æ”»å‡»è€…å¯ä»¥æ“çºµ**MXè®°å½•**ä»¥ä»åˆæ³•å­åŸŸæ¥æ”¶æˆ–å‘é€ç”µå­é‚®ä»¶ï¼Œå¢å¼ºé’“é±¼æ”»å‡»çš„æ•ˆæœã€‚

### **æ›´é«˜çº§åˆ«çš„é£é™©**

è¿›ä¸€æ­¥çš„é£é™©åŒ…æ‹¬**NSè®°å½•æ¥ç®¡**ã€‚å¦‚æœæ”»å‡»è€…æ§åˆ¶äº†ä¸€ä¸ªåŸŸçš„ä¸€ä¸ªNSè®°å½•ï¼Œä»–ä»¬å¯èƒ½ä¼šå°†éƒ¨åˆ†æµé‡å¼•å¯¼åˆ°ä»–ä»¬æ§åˆ¶çš„æœåŠ¡å™¨ã€‚å¦‚æœæ”»å‡»è€…ä¸ºDNSè®°å½•è®¾ç½®äº†è¾ƒé«˜çš„**TTLï¼ˆç”Ÿå­˜æ—¶é—´ï¼‰**ï¼Œåˆ™è¿™ç§é£é™©ä¼šåŠ å‰§ï¼Œå»¶é•¿æ”»å‡»çš„æŒç»­æ—¶é—´ã€‚

### CNAMEè®°å½•æ¼æ´

æ”»å‡»è€…å¯èƒ½ä¼šåˆ©ç”¨æŒ‡å‘ä¸å†ä½¿ç”¨æˆ–å·²è¢«åºŸå¼ƒçš„å¤–éƒ¨æœåŠ¡çš„æœªå£°æ˜çš„CNAMEè®°å½•ã€‚è¿™ä½¿ä»–ä»¬å¯ä»¥åœ¨å—ä¿¡ä»»çš„åŸŸä¸‹åˆ›å»ºä¸€ä¸ªé¡µé¢ï¼Œè¿›ä¸€æ­¥ä¿ƒè¿›é’“é±¼æˆ–æ¶æ„è½¯ä»¶åˆ†å‘ã€‚

### **ç¼“è§£ç­–ç•¥**

ç¼“è§£ç­–ç•¥åŒ…æ‹¬ï¼š

1. **åˆ é™¤æ˜“å—æ”»å‡»çš„DNSè®°å½•** - å¦‚æœä¸å†éœ€è¦å­åŸŸï¼Œåˆ™è¿™æ˜¯æœ‰æ•ˆçš„ã€‚
2. **å£°æ˜åŸŸå** - åœ¨ç›¸åº”çš„äº‘æä¾›å•†æ³¨å†Œèµ„æºæˆ–é‡æ–°è´­ä¹°è¿‡æœŸçš„åŸŸåã€‚
3. **å®šæœŸç›‘æ§æ¼æ´** - åƒ[aquatone](https://github.com/michenriksen/aquatone)è¿™æ ·çš„å·¥å…·å¯ä»¥å¸®åŠ©è¯†åˆ«æ˜“å—æ”»å‡»çš„åŸŸã€‚ç»„ç»‡è¿˜åº”å®¡æŸ¥å…¶åŸºç¡€è®¾æ–½ç®¡ç†æµç¨‹ï¼Œç¡®ä¿DNSè®°å½•åˆ›å»ºæ˜¯èµ„æºåˆ›å»ºçš„æœ€åä¸€æ­¥ï¼Œä¹Ÿæ˜¯èµ„æºé”€æ¯çš„ç¬¬ä¸€æ­¥ã€‚

å¯¹äºäº‘æä¾›å•†ï¼ŒéªŒè¯åŸŸåæ‰€æœ‰æƒå¯¹äºé˜²æ­¢å­åŸŸæ¥ç®¡è‡³å…³é‡è¦ã€‚ä¸€äº›æä¾›å•†ï¼Œå¦‚[GitLab](https://about.gitlab.com/2018/02/05/gitlab-pages-custom-domain-validation/)ï¼Œå·²ç»æ„è¯†åˆ°äº†è¿™ä¸ªé—®é¢˜ï¼Œå¹¶å®æ–½äº†åŸŸåéªŒè¯æœºåˆ¶ã€‚

## å‚è€ƒèµ„æ–™

* [https://0xpatrik.com/subdomain-takeover/](https://0xpatrik.com/subdomain-takeover/)

<figure><img src="../.gitbook/assets/image (3) (1) (1) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

\
ä½¿ç”¨[**Trickest**](https://trickest.com/?utm\_campaign=hacktrics\&utm\_medium=banner\&utm\_source=hacktricks)å¯ä»¥è½»æ¾æ„å»ºå’Œ**è‡ªåŠ¨åŒ–å·¥ä½œæµç¨‹**ï¼Œä½¿ç”¨å…¨çƒ**æœ€å…ˆè¿›**çš„ç¤¾åŒºå·¥å…·ã€‚\
ç«‹å³è·å–è®¿é—®æƒé™ï¼š

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

<details>

<summary><strong>ä»é›¶å¼€å§‹å­¦ä¹ AWSé»‘å®¢æŠ€æœ¯ï¼Œæˆä¸ºä¸“å®¶</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTEï¼ˆHackTricks AWS Red Team Expertï¼‰</strong></a><strong>ï¼</strong></summary>

æ”¯æŒHackTricksçš„å…¶ä»–æ–¹å¼ï¼š

* å¦‚æœæ‚¨æƒ³åœ¨HackTricksä¸­çœ‹åˆ°æ‚¨çš„**å…¬å¸å¹¿å‘Š**æˆ–**ä¸‹è½½PDFæ ¼å¼çš„HackTricks**ï¼Œè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* è·å–[**å®˜æ–¹PEASS & HackTrickså‘¨è¾¹äº§å“**](https://peass.creator-spring.com)
* æ¢ç´¢[**PEASSå®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬çš„ç‹¬å®¶[NFTs](https://opensea.io/collection/the-peass-family)æ”¶è—å“
* **åŠ å…¥** ğŸ’¬ [**Discordç¾¤**](https://discord.gg/hRep4RUj7f) æˆ– [**ç”µæŠ¥ç¾¤**](https://t.me/peass) æˆ–åœ¨**Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks\_live)**ä¸Šå…³æ³¨**æˆ‘ä»¬ã€‚
* é€šè¿‡å‘[**HackTricks**](https://github.com/carlospolop/hacktricks)å’Œ[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) githubä»“åº“æäº¤PRæ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚

</details>
