# ë„ë©”ì¸/ì„œë¸Œë„ë©”ì¸ íƒˆì·¨

{% hint style="success" %}
AWS í•´í‚¹ ë°°ìš°ê¸° ë° ì—°ìŠµí•˜ê¸°:<img src="../.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../.gitbook/assets/arte.png" alt="" data-size="line">\
GCP í•´í‚¹ ë°°ìš°ê¸° ë° ì—°ìŠµí•˜ê¸°: <img src="../.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks ì§€ì›í•˜ê¸°</summary>

* [**êµ¬ë… ê³„íš**](https://github.com/sponsors/carlospolop) í™•ì¸í•˜ê¸°!
* **ğŸ’¬ [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— ì°¸ì—¬í•˜ê±°ë‚˜ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**ë¥¼ íŒ”ë¡œìš°í•˜ì„¸ìš”.**
* **[**HackTricks**](https://github.com/carlospolop/hacktricks) ë° [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) ê¹ƒí—ˆë¸Œ ë¦¬í¬ì§€í† ë¦¬ì— PRì„ ì œì¶œí•˜ì—¬ í•´í‚¹ íŒì„ ê³µìœ í•˜ì„¸ìš”.**

</details>
{% endhint %}

<figure><img src="../.gitbook/assets/image (48).png" alt=""><figcaption></figcaption></figure>

\
[**Trickest**](https://trickest.com/?utm\_source=hacktricks\&utm\_medium=text\&utm\_campaign=ppc\&utm\_term=trickest\&utm\_content=domain-subdomain-takeover)ë¥¼ ì‚¬ìš©í•˜ì—¬ ì„¸ê³„ì—ì„œ **ê°€ì¥ ì§„ë³´ëœ** ì»¤ë®¤ë‹ˆí‹° ë„êµ¬ë¡œ êµ¬ë™ë˜ëŠ” **ì›Œí¬í”Œë¡œìš°ë¥¼ ì‰½ê²Œ êµ¬ì¶•í•˜ê³  ìë™í™”**í•˜ì„¸ìš”.\
ì˜¤ëŠ˜ ì•¡ì„¸ìŠ¤í•˜ì„¸ìš”:

{% embed url="https://trickest.com/?utm_source=hacktricks&utm_medium=banner&utm_campaign=ppc&utm_content=domain-subdomain-takeover" %}

## ë„ë©”ì¸ íƒˆì·¨

ì–´ë–¤ ì„œë¹„ìŠ¤ì—ì„œ ì‚¬ìš© ì¤‘ì¸ ë„ë©”ì¸(domain.tld)ì„ ë°œê²¬í–ˆì§€ë§Œ **íšŒì‚¬ê°€** **ì†Œìœ ê¶Œì„ ìƒì€** ê²½ìš°, ì´ë¥¼ **ë“±ë¡**(ê°€ê²©ì´ ì €ë ´í•  ê²½ìš°)í•˜ê³  íšŒì‚¬ì— ì•Œë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ë„ë©”ì¸ì´ **GET** ë§¤ê°œë³€ìˆ˜ë‚˜ **Referer** í—¤ë”ë¥¼ í†µí•´ ì„¸ì…˜ ì¿ í‚¤ì™€ ê°™ì€ **ë¯¼ê°í•œ ì •ë³´**ë¥¼ ë°›ê³  ìˆë‹¤ë©´, ì´ëŠ” í™•ì‹¤íˆ **ì·¨ì•½ì **ì…ë‹ˆë‹¤.

### ì„œë¸Œë„ë©”ì¸ íƒˆì·¨

íšŒì‚¬ì˜ ì„œë¸Œë„ë©”ì¸ì´ **ë“±ë¡ë˜ì§€ ì•Šì€ ì´ë¦„ì˜ ì œ3ì ì„œë¹„ìŠ¤**ë¥¼ ê°€ë¦¬í‚¤ê³  ìˆìŠµë‹ˆë‹¤. ì´ **ì œ3ì ì„œë¹„ìŠ¤**ì—ì„œ **ê³„ì •ì„ ìƒì„±**í•˜ê³  ì‚¬ìš© ì¤‘ì¸ **ì´ë¦„ì„ ë“±ë¡**í•  ìˆ˜ ìˆë‹¤ë©´, ì„œë¸Œë„ë©”ì¸ íƒˆì·¨ë¥¼ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ê°€ëŠ¥í•œ íƒˆì·¨ë¥¼ í™•ì¸í•˜ê¸° ìœ„í•œ ì—¬ëŸ¬ ë„êµ¬ê°€ ìˆìŠµë‹ˆë‹¤:

* [https://github.com/EdOverflow/can-i-take-over-xyz](https://github.com/EdOverflow/can-i-take-over-xyz)
* [https://github.com/blacklanternsecurity/bbot](https://github.com/blacklanternsecurity/bbot)
* [https://github.com/punk-security/dnsReaper](https://github.com/punk-security/dnsReaper)
* [https://github.com/haccer/subjack](https://github.com/haccer/subjack)
* [https://github.com/anshumanbh/tko-sub](https://github.com/anshumanbh/tko-subs)
* [https://github.com/ArifulProtik/sub-domain-takeover](https://github.com/ArifulProtik/sub-domain-takeover)
* [https://github.com/SaadAhmedx/Subdomain-Takeover](https://github.com/SaadAhmedx/Subdomain-Takeover)
* [https://github.com/Ice3man543/SubOver](https://github.com/Ice3man543/SubOver)
* [https://github.com/m4ll0k/takeover](https://github.com/m4ll0k/takeover)
* [https://github.com/antichown/subdomain-takeover](https://github.com/antichown/subdomain-takeover)
* [https://github.com/musana/mx-takeover](https://github.com/musana/mx-takeover)
* [https://github.com/PentestPad/subzy](https://github.com/PentestPad/subzy)
* [https://github.com/Stratus-Security/Subdominator](https://github.com/Stratus-Security/Subdominator)
* [https://github.com/NImaism/takeit](https://github.com/NImaism/takeit)

### DNS ì™€ì¼ë“œì¹´ë“œë¥¼ í†µí•œ ì„œë¸Œë„ë©”ì¸ íƒˆì·¨ ìƒì„±

ë„ë©”ì¸ì—ì„œ DNS ì™€ì¼ë“œì¹´ë“œê°€ ì‚¬ìš©ë  ê²½ìš°, í•´ë‹¹ ë„ë©”ì¸ì˜ ìš”ì²­ëœ ì„œë¸Œë„ë©”ì¸ ì¤‘ ë‹¤ë¥¸ ì£¼ì†Œê°€ ëª…ì‹œì ìœ¼ë¡œ ì—†ìœ¼ë©´ **ê°™ì€ ì •ë³´ë¡œ í•´ê²°**ë©ë‹ˆë‹¤. ì´ëŠ” A IP ì£¼ì†Œ, CNAME ë“±ì´ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì˜ˆë¥¼ ë“¤ì–´, `*.testing.com`ì´ `1.1.1.1`ë¡œ ì™€ì¼ë“œì¹´ë“œ ì²˜ë¦¬ë˜ë©´, `not-existent.testing.com`ì€ `1.1.1.1`ì„ ê°€ë¦¬í‚¤ê²Œ ë©ë‹ˆë‹¤.

ê·¸ëŸ¬ë‚˜ IP ì£¼ì†Œë¥¼ ê°€ë¦¬í‚¤ëŠ” ëŒ€ì‹ , ì‹œìŠ¤í…œ ê´€ë¦¬ìê°€ ì´ë¥¼ **CNAMEì„ í†µí•´ ì œ3ì ì„œë¹„ìŠ¤**ë¡œ ê°€ë¦¬í‚¤ê²Œ í•˜ë©´, ì˜ˆë¥¼ ë“¤ì–´ G**ithub ì„œë¸Œë„ë©”ì¸**(`sohomdatta1.github.io`)ê³¼ ê°™ì€ ê²½ìš°, ê³µê²©ìëŠ” **ìì‹ ì˜ ì œ3ì í˜ì´ì§€**(ì´ ê²½ìš° Gihubì—ì„œ)ë¥¼ ìƒì„±í•˜ê³  `something.testing.com`ì´ ê·¸ê³³ì„ ê°€ë¦¬í‚¨ë‹¤ê³  ì£¼ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì™œëƒí•˜ë©´ **CNAME ì™€ì¼ë“œì¹´ë“œ**ê°€ ê³µê²©ìê°€ **í”¼í•´ìì˜ ë„ë©”ì¸ì— ëŒ€í•´ ì„ì˜ì˜ ì„œë¸Œë„ë©”ì¸ì„ ìƒì„±í•  ìˆ˜ ìˆë„ë¡ í—ˆìš©í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤**.

ì´ ì·¨ì•½ì ì˜ ì˜ˆì‹œëŠ” CTF ì‘ì„±ë¬¼ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤: [https://ctf.zeyu2001.com/2022/nitectf-2022/undocumented-js-api](https://ctf.zeyu2001.com/2022/nitectf-2022/undocumented-js-api)

## ì„œë¸Œë„ë©”ì¸ íƒˆì·¨ ì•…ìš©

ì„œë¸Œë„ë©”ì¸ íƒˆì·¨ëŠ” ë³¸ì§ˆì ìœ¼ë¡œ íŠ¹ì • ë„ë©”ì¸ì— ëŒ€í•œ DNS ìŠ¤í‘¸í•‘ìœ¼ë¡œ, ê³µê²©ìê°€ ë„ë©”ì¸ì— ëŒ€í•œ A ë ˆì½”ë“œë¥¼ ì„¤ì •í•˜ì—¬ ë¸Œë¼ìš°ì €ê°€ ê³µê²©ìì˜ ì„œë²„ì—ì„œ ì½˜í…ì¸ ë¥¼ í‘œì‹œí•˜ë„ë¡ í•©ë‹ˆë‹¤. ì´ëŸ¬í•œ **íˆ¬ëª…ì„±**ì€ ë¸Œë¼ìš°ì €ì—ì„œ ë„ë©”ì¸ì„ í”¼ì‹±ì— ì·¨ì•½í•˜ê²Œ ë§Œë“­ë‹ˆë‹¤. ê³µê²©ìëŠ” ì´ë¥¼ ìœ„í•´ [_íƒ€ì´í¬ìŠ¤ì¿¼íŒ…_](https://en.wikipedia.org/wiki/Typosquatting) ë˜ëŠ” [_ë„í”Œê°±ì–´ ë„ë©”ì¸_](https://en.wikipedia.org/wiki/Doppelg%C3%A4nger)ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. íŠ¹íˆ í”¼ì‹± ì´ë©”ì¼ì˜ URLì´ í•©ë²•ì ìœ¼ë¡œ ë³´ì´ëŠ” ë„ë©”ì¸ì€ ì‚¬ìš©ìë“¤ì„ ì†ì´ê³  ë„ë©”ì¸ì˜ ë³¸ì§ˆì ì¸ ì‹ ë¢°ë¡œ ì¸í•´ ìŠ¤íŒ¸ í•„í„°ë¥¼ íšŒí”¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ìì„¸í•œ ë‚´ìš©ì€ ì´ [ê²Œì‹œë¬¼](https://0xpatrik.com/subdomain-takeover/)ì„ í™•ì¸í•˜ì„¸ìš”.

### **SSL ì¸ì¦ì„œ**

SSL ì¸ì¦ì„œëŠ” [_Let's Encrypt_](https://letsencrypt.org/)ì™€ ê°™ì€ ì„œë¹„ìŠ¤ì—ì„œ ê³µê²©ìì— ì˜í•´ ìƒì„±ë  ê²½ìš°, ì´ëŸ¬í•œ ê°€ì§œ ë„ë©”ì¸ì˜ ì‹ ë¢°ì„±ì„ ë†’ì—¬ í”¼ì‹± ê³µê²©ì„ ë”ìš± ì„¤ë“ë ¥ ìˆê²Œ ë§Œë“­ë‹ˆë‹¤.

### **ì¿ í‚¤ ë³´ì•ˆ ë° ë¸Œë¼ìš°ì € íˆ¬ëª…ì„±**

ë¸Œë¼ìš°ì €ì˜ íˆ¬ëª…ì„±ì€ ì¿ í‚¤ ë³´ì•ˆì—ë„ í™•ì¥ë˜ë©°, ì´ëŠ” [ë™ì¼ ì¶œì²˜ ì •ì±…](https://en.wikipedia.org/wiki/Same-origin\_policy)ê³¼ ê°™ì€ ì •ì±…ì— ì˜í•´ ê´€ë¦¬ë©ë‹ˆë‹¤. ì¿ í‚¤ëŠ” ì¢…ì¢… ì„¸ì…˜ì„ ê´€ë¦¬í•˜ê³  ë¡œê·¸ì¸ í† í°ì„ ì €ì¥í•˜ëŠ” ë° ì‚¬ìš©ë˜ë©°, ì„œë¸Œë„ë©”ì¸ íƒˆì·¨ë¥¼ í†µí•´ ì•…ìš©ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê³µê²©ìëŠ” **ì†ìƒëœ ì„œë¸Œë„ë©”ì¸ìœ¼ë¡œ ì‚¬ìš©ìë¥¼ ìœ ë„í•˜ì—¬ ì„¸ì…˜ ì¿ í‚¤ë¥¼ ìˆ˜ì§‘**í•  ìˆ˜ ìˆìœ¼ë©°, ì´ëŠ” ì‚¬ìš©ì ë°ì´í„°ì™€ ê°œì¸ ì •ë³´ë¥¼ ìœ„í—˜ì— ë¹ ëœ¨ë¦½ë‹ˆë‹¤.

### **ì´ë©”ì¼ ë° ì„œë¸Œë„ë©”ì¸ íƒˆì·¨**

ì„œë¸Œë„ë©”ì¸ íƒˆì·¨ì˜ ë˜ ë‹¤ë¥¸ ì¸¡ë©´ì€ ì´ë©”ì¼ ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤. ê³µê²©ìëŠ” **MX ë ˆì½”ë“œ**ë¥¼ ì¡°ì‘í•˜ì—¬ í•©ë²•ì ì¸ ì„œë¸Œë„ë©”ì¸ì—ì„œ ì´ë©”ì¼ì„ ìˆ˜ì‹ í•˜ê±°ë‚˜ ë°œì†¡í•  ìˆ˜ ìˆì–´ í”¼ì‹± ê³µê²©ì˜ íš¨ìœ¨ì„±ì„ ë†’ì…ë‹ˆë‹¤.

### **ê³ ìœ„í—˜**

ì¶”ê°€ì ì¸ ìœ„í—˜ìœ¼ë¡œëŠ” **NS ë ˆì½”ë“œ íƒˆì·¨**ê°€ ìˆìŠµë‹ˆë‹¤. ê³µê²©ìê°€ ë„ë©”ì¸ì˜ í•˜ë‚˜ì˜ NS ë ˆì½”ë“œë¥¼ ì œì–´í•˜ê²Œ ë˜ë©´, ê·¸ë“¤ì€ ìì‹ ì˜ ì„œë²„ë¡œ íŠ¸ë˜í”½ì˜ ì¼ë¶€ë¥¼ ìœ ë„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê³µê²©ìê°€ DNS ë ˆì½”ë“œì— ëŒ€í•´ ë†’ì€ **TTL(ìƒì¡´ ì‹œê°„)**ì„ ì„¤ì •í•˜ë©´ ê³µê²©ì˜ ì§€ì† ì‹œê°„ì´ ëŠ˜ì–´ë‚˜ ì´ ìœ„í—˜ì´ ë”ìš± ì»¤ì§‘ë‹ˆë‹¤.

### CNAME ë ˆì½”ë“œ ì·¨ì•½ì 

ê³µê²©ìëŠ” ë” ì´ìƒ ì‚¬ìš©ë˜ì§€ ì•Šê±°ë‚˜ íê¸°ëœ ì™¸ë¶€ ì„œë¹„ìŠ¤ë¡œ ê°€ë¦¬í‚¤ëŠ” ë¯¸ì²­êµ¬ CNAME ë ˆì½”ë“œë¥¼ ì•…ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ë„ë©”ì¸ ì•„ë˜ì— í˜ì´ì§€ë¥¼ ìƒì„±í•˜ì—¬ í”¼ì‹± ë˜ëŠ” ì•…ì„±ì½”ë“œ ë°°í¬ë¥¼ ë”ìš± ìš©ì´í•˜ê²Œ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### **ì™„í™” ì „ëµ**

ì™„í™” ì „ëµì—ëŠ” ë‹¤ìŒì´ í¬í•¨ë©ë‹ˆë‹¤:

1. **ì·¨ì•½í•œ DNS ë ˆì½”ë“œ ì œê±°** - ì„œë¸Œë„ë©”ì¸ì´ ë” ì´ìƒ í•„ìš”í•˜ì§€ ì•Šì€ ê²½ìš° íš¨ê³¼ì ì…ë‹ˆë‹¤.
2. **ë„ë©”ì¸ ì´ë¦„ ì£¼ì¥** - í•´ë‹¹ í´ë¼ìš°ë“œ ì œê³µì—…ì²´ì— ë¦¬ì†ŒìŠ¤ë¥¼ ë“±ë¡í•˜ê±°ë‚˜ ë§Œë£Œëœ ë„ë©”ì¸ì„ ì¬êµ¬ë§¤í•©ë‹ˆë‹¤.
3. **ì·¨ì•½ì ì— ëŒ€í•œ ì •ê¸°ì ì¸ ëª¨ë‹ˆí„°ë§** - [aquatone](https://github.com/michenriksen/aquatone)ì™€ ê°™ì€ ë„êµ¬ê°€ ì·¨ì•½í•œ ë„ë©”ì¸ì„ ì‹ë³„í•˜ëŠ” ë° ë„ì›€ì´ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¡°ì§ì€ ë˜í•œ DNS ë ˆì½”ë“œ ìƒì„±ì´ ë¦¬ì†ŒìŠ¤ ìƒì„±ì˜ ë§ˆì§€ë§‰ ë‹¨ê³„ì´ì ë¦¬ì†ŒìŠ¤ íŒŒê´´ì˜ ì²« ë²ˆì§¸ ë‹¨ê³„ê°€ ë˜ë„ë¡ ì¸í”„ë¼ ê´€ë¦¬ í”„ë¡œì„¸ìŠ¤ë¥¼ ê²€í† í•´ì•¼ í•©ë‹ˆë‹¤.

í´ë¼ìš°ë“œ ì œê³µì—…ì²´ì˜ ê²½ìš°, ì„œë¸Œë„ë©”ì¸ íƒˆì·¨ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ ë„ë©”ì¸ ì†Œìœ ê¶Œ í™•ì¸ì´ ì¤‘ìš”í•©ë‹ˆë‹¤. [GitLab](https://about.gitlab.com/2018/02/05/gitlab-pages-custom-domain-validation/)ê³¼ ê°™ì€ ì¼ë¶€ëŠ” ì´ ë¬¸ì œë¥¼ ì¸ì‹í•˜ê³  ë„ë©”ì¸ í™•ì¸ ë©”ì»¤ë‹ˆì¦˜ì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

## ì°¸ê³ ë¬¸í—Œ

* [https://0xpatrik.com/subdomain-takeover/](https://0xpatrik.com/subdomain-takeover/)
* [https://www.stratussecurity.com/post/subdomain-takeover-guide](https://www.stratussecurity.com/post/subdomain-takeover-guide)

<figure><img src="../.gitbook/assets/image (48).png" alt=""><figcaption></figcaption></figure>

\
[**Trickest**](https://trickest.com/?utm\_source=hacktricks\&utm\_medium=text\&utm\_campaign=ppc\&utm\_term=trickest\&utm\_content=domain-subdomain-takeover)ë¥¼ ì‚¬ìš©í•˜ì—¬ ì„¸ê³„ì—ì„œ **ê°€ì¥ ì§„ë³´ëœ** ì»¤ë®¤ë‹ˆí‹° ë„êµ¬ë¡œ êµ¬ë™ë˜ëŠ” **ì›Œí¬í”Œë¡œìš°ë¥¼ ì‰½ê²Œ êµ¬ì¶•í•˜ê³  ìë™í™”**í•˜ì„¸ìš”.\
ì˜¤ëŠ˜ ì•¡ì„¸ìŠ¤í•˜ì„¸ìš”:

{% embed url="https://trickest.com/?utm_source=hacktricks&utm_medium=banner&utm_campaign=ppc&utm_content=domain-subdomain-takeover" %}

{% hint style="success" %}
AWS í•´í‚¹ ë°°ìš°ê¸° ë° ì—°ìŠµí•˜ê¸°:<img src="../.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../.gitbook/assets/arte.png" alt="" data-size="line">\
GCP í•´í‚¹ ë°°ìš°ê¸° ë° ì—°ìŠµí•˜ê¸°: <img src="../.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks ì§€ì›í•˜ê¸°</summary>

* [**êµ¬ë… ê³„íš**](https://github.com/sponsors/carlospolop) í™•ì¸í•˜ê¸°!
* **ğŸ’¬ [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— ì°¸ì—¬í•˜ê±°ë‚˜ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**ë¥¼ íŒ”ë¡œìš°í•˜ì„¸ìš”.**
* **[**HackTricks**](https://github.com/carlospolop/hacktricks) ë° [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) ê¹ƒí—ˆë¸Œ ë¦¬í¬ì§€í† ë¦¬ì— PRì„ ì œì¶œí•˜ì—¬ í•´í‚¹ íŒì„ ê³µìœ í•˜ì„¸ìš”.**

</details>
{% endhint %}
