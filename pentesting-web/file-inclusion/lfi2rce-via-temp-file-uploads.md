{% hint style="success" %}
AWS Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
GCP Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* **ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n ya da **Twitter'da** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)** bizi takip edin.**
* **Hacking ipuÃ§larÄ±nÄ± paylaÅŸmak iÃ§in** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna PR gÃ¶nderin.

</details>
{% endhint %}



**Bu tekniÄŸin tam detaylarÄ±nÄ± [https://gynvael.coldwind.pl/download.php?f=PHP\_LFI\_rfc1867\_temporary\_files.pdf](https://gynvael.coldwind.pl/download.php?f=PHP\_LFI\_rfc1867\_temporary\_files.pdf) adresinde kontrol edin.**

## **PHP Dosya YÃ¼klemeleri**

Bir **PHP** motoru, RFC 1867'ye gÃ¶re formatlanmÄ±ÅŸ dosyalar iÃ§eren bir **POST isteÄŸi** aldÄ±ÄŸÄ±nda, yÃ¼klenen verileri depolamak iÃ§in geÃ§ici dosyalar oluÅŸturur. Bu dosyalar, PHP betiklerinde dosya yÃ¼kleme iÅŸlemleri iÃ§in kritik Ã¶neme sahiptir. KalÄ±cÄ± depolama gerekiyorsa, `move_uploaded_file` fonksiyonu bu geÃ§ici dosyalarÄ± istenen bir konuma taÅŸÄ±mak iÃ§in kullanÄ±lmalÄ±dÄ±r. Ä°ÅŸlem sonrasÄ±, PHP otomatik olarak kalan geÃ§ici dosyalarÄ± siler.

{% hint style="info" %}
**GÃ¼venlik UyarÄ±sÄ±: GeÃ§ici dosyalarÄ±n konumunu bilen saldÄ±rganlar, yÃ¼kleme sÄ±rasÄ±nda dosyaya eriÅŸerek kod Ã§alÄ±ÅŸtÄ±rmak iÃ§in Yerel Dosya Dahil Etme (LFI) aÃ§Ä±ÄŸÄ±nÄ± istismar edebilir.**
{% endhint %}

Yetkisiz eriÅŸim iÃ§in zorluk, geÃ§ici dosyanÄ±n adÄ±nÄ± tahmin etmektir; bu ad kasÄ±tlÄ± olarak rastgeleleÅŸtirilmiÅŸtir.

#### Windows Sistemlerinde Ä°stismar

Windows'ta, PHP geÃ§ici dosya adlarÄ±nÄ± `GetTempFileName` fonksiyonunu kullanarak oluÅŸturur ve bu, `<path>\<pre><uuuu>.TMP` gibi bir desenle sonuÃ§lanÄ±r. Ã–nemli noktalar:

- VarsayÄ±lan yol genellikle `C:\Windows\Temp`'dir.
- Ã–nek genellikle "php"dÄ±r.
- `<uuuu>`, benzersiz bir onaltÄ±lÄ±k deÄŸeri temsil eder. Fonksiyonun sÄ±nÄ±rlamalarÄ± nedeniyle yalnÄ±zca alt 16 bit kullanÄ±lÄ±r, bu da sabit yol ve Ã¶nek ile maksimum 65,535 benzersiz adÄ±n oluÅŸturulmasÄ±na olanak tanÄ±r ve brute force'u mÃ¼mkÃ¼n kÄ±lar.

AyrÄ±ca, Windows sistemlerinde istismar sÃ¼reci basitleÅŸtirilmiÅŸtir. `FindFirstFile` fonksiyonundaki bir Ã¶zellik, Yerel Dosya Dahil Etme (LFI) yollarÄ±nda joker karakterlerin kullanÄ±lmasÄ±na izin verir. Bu, geÃ§ici dosyayÄ± bulmak iÃ§in aÅŸaÄŸÄ±daki gibi bir dahil etme yolu oluÅŸturmayÄ± mÃ¼mkÃ¼n kÄ±lar:
```
http://site/vuln.php?inc=c:\windows\temp\php<<
```
Belirli durumlarda, daha spesifik bir maske (Ã¶rneÄŸin `php1<<` veya `phpA<<`) gerekebilir. YÃ¼klenen geÃ§ici dosyayÄ± keÅŸfetmek iÃ§in bu maskeleri sistematik olarak denemek mÃ¼mkÃ¼ndÃ¼r.

#### GNU/Linux Sistemlerinde SÃ¶mÃ¼rÃ¼

GNU/Linux sistemleri iÃ§in, geÃ§ici dosya adlandÄ±rmasÄ±ndaki rastgelelik saÄŸlamdÄ±r, bu da adlarÄ±n ne tahmin edilebilir ne de brute force saldÄ±rÄ±larÄ±na karÅŸÄ± savunmasÄ±z olduÄŸu anlamÄ±na gelir. Daha fazla ayrÄ±ntÄ± ilgili belgede bulunabilir.
