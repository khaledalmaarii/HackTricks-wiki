<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>â˜ï¸ HackTricksäº‘ â˜ï¸</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ğŸ¦ æ¨ç‰¹ ğŸ¦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ğŸ™ï¸ Twitch ğŸ™ï¸</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ğŸ¥ Youtube ğŸ¥</strong></a></summary>

- ä½ åœ¨ä¸€å®¶**ç½‘ç»œå®‰å…¨å…¬å¸**å·¥ä½œå—ï¼Ÿä½ æƒ³åœ¨HackTricksä¸­çœ‹åˆ°ä½ çš„**å…¬å¸å¹¿å‘Š**å—ï¼Ÿæˆ–è€…ä½ æƒ³è·å¾—**PEASSçš„æœ€æ–°ç‰ˆæœ¬æˆ–ä¸‹è½½PDFæ ¼å¼çš„HackTricks**å—ï¼Ÿè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼

- å‘ç°æˆ‘ä»¬çš„ç‹¬å®¶[**NFTs**](https://opensea.io/collection/the-peass-family)æ”¶è—å“[**The PEASS Family**](https://opensea.io/collection/the-peass-family)

- è·å–[**å®˜æ–¹PEASSå’ŒHackTricksçš„è¡£ç‰©**](https://peass.creator-spring.com)

- **åŠ å…¥**[**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discordç¾¤ç»„**](https://discord.gg/hRep4RUj7f)æˆ–[**ç”µæŠ¥ç¾¤ç»„**](https://t.me/peass)ï¼Œæˆ–è€…**å…³æ³¨**æˆ‘åœ¨**Twitter**ä¸Šçš„[**ğŸ¦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks_live)**ã€‚**

- **é€šè¿‡å‘[hacktricks repo](https://github.com/carlospolop/hacktricks)å’Œ[hacktricks-cloud repo](https://github.com/carlospolop/hacktricks-cloud)æäº¤PRæ¥åˆ†äº«ä½ çš„é»‘å®¢æŠ€å·§**ã€‚

</details>


## **PHPæ–‡ä»¶ä¸Šä¼ **

**PHP**å¼•æ“åœ¨**æ¥æ”¶åˆ°å¸¦æœ‰RFC 1867ç¼–ç çš„æ–‡ä»¶çš„POSTæ•°æ®åŒ…**æ—¶ï¼Œä¼š**åˆ›å»ºä¸€ä¸ªæˆ–å¤šä¸ªä¸´æ—¶æ–‡ä»¶**ï¼Œç”¨äº**å­˜å‚¨ä¸Šä¼ æ–‡ä»¶çš„æ•°æ®**ã€‚å¤„ç†æ–‡ä»¶ä¸Šä¼ çš„PHPè„šæœ¬éœ€è¦ä½¿ç”¨move\_uploaded\_fileå‡½æ•°å°†ä¸Šä¼ çš„ä¸´æ—¶æ–‡ä»¶ç§»åŠ¨åˆ°æ‰€éœ€çš„ä½ç½®ï¼ˆå¦‚æœè„šæœ¬åœ¨ç»ˆæ­¢åéœ€è¦æ–‡ä»¶å­˜åœ¨ï¼‰ã€‚**å½“è„šæœ¬ç»“æŸæ—¶ï¼ŒPHPå¼•æ“ä¼šåˆ é™¤æ‰€æœ‰å·²ä¸Šä¼ çš„ä¸´æ—¶æ–‡ä»¶**ï¼ˆå¦‚æœè„šæœ¬ç»“æŸåè¿˜æœ‰æ–‡ä»¶å‰©ä½™ï¼‰ã€‚

{% hint style="info" %}
**ç”±äºæ”»å‡»è€…é€šå¸¸ä¼šçŸ¥é“è¿™äº›ä¸´æ—¶æ–‡ä»¶çš„ä½ç½®ï¼Œåœ¨å‘ç°æœ¬åœ°æ–‡ä»¶åŒ…å«æ¼æ´æ—¶ï¼Œä»–å¯èƒ½ä¼šåŠ è½½æ­£åœ¨ä¸Šä¼ çš„æ–‡ä»¶å¹¶è·å–RCEã€‚**
{% endhint %}

è®¿é—®æ–‡ä»¶çš„ä¸»è¦é—®é¢˜åŸºæœ¬ä¸Šæ˜¯**çŒœæµ‹å…¶åç§°ï¼ˆå®ƒå°†æ˜¯â€œéšæœºâ€çš„ï¼‰**ã€‚

## Windowsç³»ç»Ÿåˆ©ç”¨

åœ¨Windowsç³»ç»Ÿä¸Šï¼Œä¸ºäº†ç”Ÿæˆ**éšæœºåç§°**ï¼ŒPHPä½¿ç”¨äº†**`GetTempFileName`**å‡½æ•°ã€‚æŸ¥çœ‹æ–‡æ¡£ï¼Œæˆ‘ä»¬å¯ä»¥æ‰¾åˆ°ä»¥ä¸‹è§£é‡Šï¼šGetTempFileNameå‡½æ•°åˆ›å»ºä¸€ä¸ªä»¥ä¸‹å½¢å¼çš„ä¸´æ—¶æ–‡ä»¶åï¼š

`<path>\<pre><uuuu>.TMP`

* è·¯å¾„æ˜¯`upload_tmp_dir`ï¼Œé€šå¸¸ä¸º`C:\Windows\Temp`
* preé€šå¸¸ä¸ºï¼š"php"
* \<uuuu>æ˜¯ä¸€ä¸ªå”¯ä¸€çš„åå…­è¿›åˆ¶å€¼ã€‚ç„¶è€Œï¼š
* åªä½¿ç”¨uUniqueå‚æ•°çš„ä½16ä½ã€‚å¦‚æœlpPathNameå’ŒlpPrefixStringå‚æ•°ä¿æŒä¸å˜ï¼Œåˆ™GetTempFileNameæœ€å¤šå¯ä»¥ç”Ÿæˆ65535ä¸ªå”¯ä¸€æ–‡ä»¶åã€‚**å¯ä»¥ä½¿ç”¨æš´åŠ›ç ´è§£æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚**

æ­£å¦‚æˆ‘ä»¬æ‰€è§ï¼Œ**åœ¨Windowsç³»ç»Ÿä¸­æ‰¾åˆ°**ä¸´æ—¶æ–‡ä»¶**ç›¸å½“å®¹æ˜“**ã€‚è€Œä¸”å®ƒå°†å˜å¾—æ›´å®¹æ˜“ï¼Œå› ä¸ºè¿™é‡Œä¸éœ€è¦æš´åŠ›ç ´è§£ï¼Œå¤šäºäº†æŸä¸ªFindFirstFileçš„ç‰¹æ®Šæ€§ï¼Œå®ƒå…è®¸åœ¨Windowsä¸Šçš„LFIè·¯å¾„ä¸­ä½¿ç”¨æ©ç ï¼ˆ<<ä½œä¸º\*ï¼Œ>ä½œä¸º?ï¼‰ã€‚å€ŸåŠ©è¿™ä¸€ç‚¹ï¼Œå¯ä»¥å½¢æˆä¸€ä¸ª**å¦‚ä¸‹æ‰€ç¤ºçš„åŒ…å«è·¯å¾„**ï¼š
```
http://site/vuln.php?inc=c:\windows\temp\php<<
```
åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå¯èƒ½éœ€è¦æ›´å…·ä½“çš„æ©ç ï¼Œä¾‹å¦‚`php1<<`æˆ–`phpA<<`ã€‚æ‚¨å¯ä»¥ä½¿ç”¨æ›´å…·ä½“çš„æ©ç è¿›è¡Œæš´åŠ›ç ´è§£ï¼Œç›´åˆ°æ‰¾åˆ°æ‚¨ä¸Šä¼ çš„ä¸´æ—¶æ–‡ä»¶ã€‚

## GNU/Linux æ¼æ´åˆ©ç”¨

æ–‡ä»¶åçš„éšæœºå€¼è¶³å¤Ÿä¸å¯é¢„æµ‹ï¼Œä¹Ÿæ— æ³•é€šè¿‡æš´åŠ›ç ´è§£ã€‚æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…å‚è€ƒèµ„æ–™ã€‚

## å‚è€ƒèµ„æ–™

* [https://gynvael.coldwind.pl/?id=376](https://gynvael.coldwind.pl/?id=376)
* [https://gynvael.coldwind.pl/download.php?f=PHP\_LFI\_rfc1867\_temporary\_files.pdf](https://gynvael.coldwind.pl/download.php?f=PHP\_LFI\_rfc1867\_temporary\_files.pdf)


<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>â˜ï¸ HackTricks äº‘ â˜ï¸</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ğŸ¦ Twitter ğŸ¦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ğŸ™ï¸ Twitch ğŸ™ï¸</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ğŸ¥ Youtube ğŸ¥</strong></a></summary>

- æ‚¨åœ¨**ç½‘ç»œå®‰å…¨å…¬å¸**å·¥ä½œå—ï¼Ÿæ‚¨æƒ³åœ¨ HackTricks ä¸­çœ‹åˆ°æ‚¨çš„**å…¬å¸å¹¿å‘Š**å—ï¼Ÿæˆ–è€…æ‚¨æƒ³è·å¾—**PEASS çš„æœ€æ–°ç‰ˆæœ¬æˆ–ä¸‹è½½ PDF æ ¼å¼çš„ HackTricks**å—ï¼Ÿè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼

- å‘ç°æˆ‘ä»¬çš„ç‹¬å®¶ [**NFTs**](https://opensea.io/collection/the-peass-family) é›†åˆ - [**The PEASS Family**](https://opensea.io/collection/the-peass-family)

- è·å–[**å®˜æ–¹ PEASS & HackTricks å•†å“**](https://peass.creator-spring.com)

- **åŠ å…¥** [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**Telegram ç¾¤ç»„**](https://t.me/peass)ï¼Œæˆ–åœ¨ **Twitter** ä¸Š **å…³æ³¨**æˆ‘ [**ğŸ¦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks_live)**ã€‚**

- **é€šè¿‡å‘ [hacktricks ä»“åº“](https://github.com/carlospolop/hacktricks) å’Œ [hacktricks-cloud ä»“åº“](https://github.com/carlospolop/hacktricks-cloud) æäº¤ PR æ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§**ã€‚

</details>
