<details>

<summary><strong>Nau캜ite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Drugi na캜ini podr코ke HackTricks-u:

* Ako 쬰lite da vidite **va코u kompaniju reklamiranu na HackTricks-u** ili **preuzmete HackTricks u PDF formatu** proverite [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Nabavite [**zvani캜ni PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Otkrijte [**The PEASS Family**](https://opensea.io/collection/the-peass-family), na코u kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* **Pridru쬴te se** 游눫 [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili nas **pratite** na **Twitter-u** 游냕 [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Podelite svoje hakovanje trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>



**Proverite sve detalje ove tehnike na [https://gynvael.coldwind.pl/download.php?f=PHP\_LFI\_rfc1867\_temporary\_files.pdf](https://gynvael.coldwind.pl/download.php?f=PHP\_LFI\_rfc1867\_temporary\_files.pdf)**

## **PHP Uploadovanje fajlova**

Kada **PHP** engine primi **POST zahtev** koji sadr쬴 fajlove formatirane prema RFC 1867, generi코e privremene fajlove za skladi코tenje uploadovanih podataka. Ovi fajlovi su klju캜ni za upravljanje uploadom fajlova u PHP skriptama. Funkcija `move_uploaded_file` mora biti kori코캖ena da bi se premestili ovi privremeni fajlovi na 쬰ljenu lokaciju ako je potrebno trajno skladi코tenje izvan izvr코enja skripte. Nakon izvr코enja, PHP automatski bri코e sve preostale privremene fajlove.

{% hint style="info" %}
**Bezbednosno upozorenje: Napada캜i, koji su svesni lokacije privremenih fajlova, mogu iskoristiti ranjivost lokalnog uklju캜ivanja fajlova (LFI) da izvr코e kod pristupanjem fajlu tokom uploada.**
{% endhint %}

Izazov za neovla코캖eni pristup le쬴 u predvi캠anju imena privremenog fajla, koje je namerno nasumi캜no.

#### Eksploatacija na Windows sistemima

Na Windows-u, PHP generi코e imena privremenih fajlova koriste캖i funkciju `GetTempFileName`, 코to rezultira 코ablonom poput `<putanja>\<pre><uuuu>.TMP`. Napomena:

- Podrazumevana putanja je obi캜no `C:\Windows\Temp`.
- Prefiks je obi캜no "php".
- `<uuuu>` predstavlja jedinstvenu heksadecimalnu vrednost. Bitno je napomenuti da zbog ograni캜enja funkcije, koriste se samo ni쬴h 16 bita, 코to omogu캖ava maksimalno 65.535 jedinstvenih imena sa konstantnom putanjom i prefiksom, 캜ime se omogu캖ava brute force napad.

Osim toga, proces eksploatacije je pojednostavljen na Windows sistemima. Posebnost u funkciji `FindFirstFile` omogu캖ava upotrebu d쬺kera u putanjama lokalnog uklju캜ivanja fajlova (LFI). Ovo omogu캖ava kreiranje putanje za uklju캜ivanje kao 코to je slede캖e da bi se locirao privremeni fajl:
```
http://site/vuln.php?inc=c:\windows\temp\php<<
```
U odre캠enim situacijama mo쬰 biti potrebna specifi캜nija maska (poput `php1<<` ili `phpA<<`) . Mo쬰 se sistematski isprobavati ove maske kako bi se otkrili privremeni uploadovani fajlovi.

#### Eksploatacija na GNU/Linux sistemima

Za GNU/Linux sisteme, nasumi캜no generisana imena privremenih fajlova su sigurna i ne mogu se predvideti niti napasti brute force tehnikom. Dodatne detalje mo쬰te prona캖i u referentnoj dokumentaciji.


<details>

<summary><strong>Nau캜ite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Drugi na캜ini podr코ke HackTricks-u:

* Ako 쬰lite da vidite **va코u kompaniju reklamiranu u HackTricks-u** ili **preuzmete HackTricks u PDF formatu** Pogledajte [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Nabavite [**zvani캜ni PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Otkrijte [**The PEASS Family**](https://opensea.io/collection/the-peass-family), na코u kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* **Pridru쬴te se** 游눫 [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili nas **pratite** na **Twitter-u** 游냕 [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Podelite svoje hakovanje trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>
