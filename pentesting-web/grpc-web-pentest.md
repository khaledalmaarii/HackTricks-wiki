# gRPC-Webæ¸—é€æµ‹è¯•

<details>

<summary><strong>ä»é›¶å¼€å§‹å­¦ä¹ AWSé»‘å®¢æŠ€æœ¯ï¼Œæˆä¸ºä¸“å®¶</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTEï¼ˆHackTricks AWS Red Team Expertï¼‰</strong></a><strong>ï¼</strong></summary>

æ”¯æŒHackTricksçš„å…¶ä»–æ–¹å¼ï¼š

- å¦‚æœæ‚¨æƒ³çœ‹åˆ°æ‚¨çš„**å…¬å¸åœ¨HackTricksä¸­è¢«å¹¿å‘Š**æˆ–**ä¸‹è½½PDFæ ¼å¼çš„HackTricks**ï¼Œè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
- è·å–[**å®˜æ–¹PEASS & HackTrickså‘¨è¾¹äº§å“**](https://peass.creator-spring.com)
- æ¢ç´¢[**PEASSå®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬çš„ç‹¬å®¶[**NFTs**](https://opensea.io/collection/the-peass-family)
- **åŠ å…¥** ğŸ’¬ [**Discordç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**ç”µæŠ¥ç¾¤ç»„**](https://t.me/peass) æˆ– **å…³æ³¨**æˆ‘ä»¬çš„**Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)**ã€‚**
- é€šè¿‡å‘[**HackTricks**](https://github.com/carlospolop/hacktricks)å’Œ[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) githubä»“åº“æäº¤PRæ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚

</details>

## **æ“çºµgRPC-Webè´Ÿè½½**
gRPC-Webåœ¨è¯·æ±‚ä¸­ä½¿ç”¨Content-Type: `application/grpc-web-text`ï¼Œè¿™ç§å½¢å¼ç±»ä¼¼äºbase64ç¼–ç çš„protobufï¼Œæ‚¨å¯ä»¥ä½¿ç”¨[gprc-coder](https://github.com/nxenon/grpc-pentest-suite)å·¥å…·ï¼Œä¹Ÿå¯ä»¥å®‰è£…å…¶[Burp Suiteæ‰©å±•ç¨‹åº](https://github.com/nxenon/grpc-pentest-suite)ã€‚

### **ä½¿ç”¨gGRPC Coderå·¥å…·æ‰‹åŠ¨æ“ä½œ**
1. é¦–å…ˆè§£ç è´Ÿè½½ï¼š
```bash
echo "AAAAABYSC0FtaW4gTmFzaXJpGDY6BVhlbm9u" | python3 grpc-coder.py --decode --type grpc-web-text | protoscope > out.txt
```
## 2. ç¼–è¾‘è§£ç åçš„æœ‰æ•ˆè´Ÿè½½å†…å®¹

åœ¨æ‹¦æˆªå’Œè§£ç  gRPC æµé‡åï¼Œæ”»å‡»è€…å¯ä»¥ç¼–è¾‘æœ‰æ•ˆè´Ÿè½½å†…å®¹ä»¥å°è¯•æ‰§è¡Œå„ç§æ”»å‡»ã€‚è¿™å¯èƒ½åŒ…æ‹¬æ›´æ”¹è¯·æ±‚å‚æ•°ã€æ³¨å…¥æ¶æ„ä»£ç æˆ–ä¿®æ”¹æ•°æ®ä»¥è§¦å‘åº”ç”¨ç¨‹åºä¸­çš„æ¼æ´ã€‚ç¼–è¾‘æœ‰æ•ˆè´Ÿè½½å†…å®¹æ˜¯ä¸€ç§å¸¸è§çš„æ¸—é€æµ‹è¯•æŠ€æœ¯ï¼Œå¯å¸®åŠ©å‘ç°åº”ç”¨ç¨‹åºä¸­çš„å®‰å…¨æ¼æ´ã€‚
```
nano out.txt
2: {"Amin Nasiri Xenon GRPC"}
3: 54
7: {"<script>alert(origin)</script>"}
```
3. ç¼–ç æ–°çš„æœ‰æ•ˆè½½è·
```bash
protoscope -s out.txt | python3 grpc-coder.py --encode --type grpc-web-text
```
4. åœ¨Burpæ‹¦æˆªå™¨ä¸­ä½¿ç”¨è¾“å‡ºï¼š
```
AAAAADoSFkFtaW4gTmFzaXJpIFhlbm9uIEdSUEMYNjoePHNjcmlwdD5hbGVydChvcmlnaW4pPC9zY3JpcHQ+
```
### **ä½¿ç”¨ gRPC-Web Coder Burp Suite æ‰©å±•çš„æ‰‹å†Œ**
æ‚¨å¯ä»¥åœ¨ [gRPC-Web æ¸—é€æµ‹è¯•å¥—ä»¶](https://github.com/nxenon/grpc-pentest-suite) ä¸­ä½¿ç”¨ gRPC-Web Coder Burp Suite æ‰©å±•ï¼Œè¿™æ ·æ›´å®¹æ˜“ã€‚æ‚¨å¯ä»¥åœ¨å…¶å­˜å‚¨åº“ä¸­é˜…è¯»å®‰è£…å’Œä½¿ç”¨è¯´æ˜ã€‚

## **åˆ†æ gRPC-Web JavaScript æ–‡ä»¶**
æ¯ä¸ª gRPC-Web åº”ç”¨ç¨‹åºä¸­è‡³å°‘æœ‰ä¸€ä¸ª JavaScript æ–‡ä»¶ã€‚æ‚¨å¯ä»¥åˆ†æè¯¥æ–‡ä»¶ä»¥æŸ¥æ‰¾æ–°æ¶ˆæ¯ã€ç«¯ç‚¹å’ŒæœåŠ¡ã€‚å°è¯•ä½¿ç”¨ [gRPC-Scan](https://github.com/nxenon/grpc-pentest-suite) å·¥å…·ã€‚
1. ä¸‹è½½ JavaScript gRPC-Web æ–‡ä»¶
2. ä½¿ç”¨ grpc-scan.py è¿›è¡Œæ‰«æï¼š
```bash
python3 grpc-scan.py --file main.js
```
3. åˆ†æè¾“å‡ºå¹¶æµ‹è¯•æ–°çš„ç«¯ç‚¹å’Œæ–°çš„æœåŠ¡ï¼š
```
Output:
Found Endpoints:
/grpc.gateway.testing.EchoService/Echo
/grpc.gateway.testing.EchoService/EchoAbort
/grpc.gateway.testing.EchoService/NoOp
/grpc.gateway.testing.EchoService/ServerStreamingEcho
/grpc.gateway.testing.EchoService/ServerStreamingEchoAbort

Found Messages:

grpc.gateway.testing.EchoRequest:
+------------+--------------------+--------------+
| Field Name |     Field Type     | Field Number |
+============+====================+==============+
| Message    | Proto3StringField  | 1            |
+------------+--------------------+--------------+
| Name       | Proto3StringField  | 2            |
+------------+--------------------+--------------+
| Age        | Proto3IntField     | 3            |
+------------+--------------------+--------------+
| IsAdmin    | Proto3BooleanField | 4            |
+------------+--------------------+--------------+
| Weight     | Proto3FloatField   | 5            |
+------------+--------------------+--------------+
| Test       | Proto3StringField  | 6            |
+------------+--------------------+--------------+
| Test2      | Proto3StringField  | 7            |
+------------+--------------------+--------------+
| Test3      | Proto3StringField  | 16           |
+------------+--------------------+--------------+
| Test4      | Proto3StringField  | 20           |
+------------+--------------------+--------------+

grpc.gateway.testing.EchoResponse:
+--------------+--------------------+--------------+
|  Field Name  |     Field Type     | Field Number |
+==============+====================+==============+
| Message      | Proto3StringField  | 1            |
+--------------+--------------------+--------------+
| Name         | Proto3StringField  | 2            |
+--------------+--------------------+--------------+
| Age          | Proto3IntField     | 3            |
+--------------+--------------------+--------------+
| IsAdmin      | Proto3BooleanField | 4            |
+--------------+--------------------+--------------+
| Weight       | Proto3FloatField   | 5            |
+--------------+--------------------+--------------+
| Test         | Proto3StringField  | 6            |
+--------------+--------------------+--------------+
| Test2        | Proto3StringField  | 7            |
+--------------+--------------------+--------------+
| Test3        | Proto3StringField  | 16           |
+--------------+--------------------+--------------+
| Test4        | Proto3StringField  | 20           |
+--------------+--------------------+--------------+
| MessageCount | Proto3IntField     | 8            |
+--------------+--------------------+--------------+

grpc.gateway.testing.ServerStreamingEchoRequest:
+-----------------+-------------------+--------------+
|   Field Name    |    Field Type     | Field Number |
+=================+===================+==============+
| Message         | Proto3StringField | 1            |
+-----------------+-------------------+--------------+
| MessageCount    | Proto3IntField    | 2            |
+-----------------+-------------------+--------------+
| MessageInterval | Proto3IntField    | 3            |
+-----------------+-------------------+--------------+

grpc.gateway.testing.ServerStreamingEchoResponse:
+------------+-------------------+--------------+
| Field Name |    Field Type     | Field Number |
+============+===================+==============+
| Message    | Proto3StringField | 1            |
+------------+-------------------+--------------+

grpc.gateway.testing.ClientStreamingEchoRequest:
+------------+-------------------+--------------+
| Field Name |    Field Type     | Field Number |
+============+===================+==============+
| Message    | Proto3StringField | 1            |
+------------+-------------------+--------------+

grpc.gateway.testing.ClientStreamingEchoResponse:
+--------------+----------------+--------------+
|  Field Name  |   Field Type   | Field Number |
+==============+================+==============+
| MessageCount | Proto3IntField | 1            |
+--------------+----------------+--------------+
```
## å‚è€ƒèµ„æ–™

* [Amin Nasiriçš„ã€Šå…¥ä¾µ gRPC-Web æ–‡ç« ã€‹](https://infosecwriteups.com/hacking-into-grpc-web-a54053757a45)
* [gRPC-Web æ¸—é€æµ‹è¯•å¥—ä»¶](https://github.com/nxenon/grpc-pentest-suite)

<details>

<summary><strong>ä»é›¶å¼€å§‹å­¦ä¹  AWS é»‘å®¢æŠ€æœ¯ï¼Œæˆä¸ºä¸“å®¶</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTEï¼ˆHackTricks AWS çº¢é˜Ÿä¸“å®¶ï¼‰</strong></a><strong>ï¼</strong></summary>

æ”¯æŒ HackTricks çš„å…¶ä»–æ–¹å¼ï¼š

* å¦‚æœæ‚¨æƒ³åœ¨ HackTricks ä¸­çœ‹åˆ°æ‚¨çš„ **å…¬å¸å¹¿å‘Š** æˆ– **ä¸‹è½½ PDF ç‰ˆæœ¬çš„ HackTricks**ï¼Œè¯·æŸ¥çœ‹ [**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* è·å– [**å®˜æ–¹ PEASS & HackTricks å•†å“**](https://peass.creator-spring.com)
* æ¢ç´¢ [**PEASS å®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬çš„ç‹¬å®¶ [**NFTs**](https://opensea.io/collection/the-peass-family)
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**ç”µæŠ¥ç¾¤ç»„**](https://t.me/peass) æˆ– **å…³æ³¨** æˆ‘ä»¬çš„ **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)**ã€‚**
* é€šè¿‡å‘ [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github ä»“åº“æäº¤ PR æ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚ 

</details>
