# Testowanie penetracyjne gRPC-Web

<details>

<summary><strong>Naucz siÄ™ hakowaÄ‡ AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Inne sposoby wsparcia HackTricks:

* JeÅ›li chcesz zobaczyÄ‡ swojÄ… **firmÄ™ reklamowanÄ… w HackTricks** lub **pobraÄ‡ HackTricks w formacie PDF**, sprawdÅº [**PLAN SUBSKRYPCYJNY**](https://github.com/sponsors/carlospolop)!
* ZdobÄ…dÅº [**oficjalne gadÅ¼ety PEASS & HackTricks**](https://peass.creator-spring.com)
* Odkryj [**RodzinÄ™ PEASS**](https://opensea.io/collection/the-peass-family), naszÄ… kolekcjÄ™ ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* **DoÅ‚Ä…cz do** ğŸ’¬ [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **Å›ledÅº** nas na **Twitterze** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Podziel siÄ™ swoimi sztuczkami hakerskimi, przesyÅ‚ajÄ…c PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>

## **Manipulowanie danymi gRPC-Web**
gRPC-Web uÅ¼ywa Content-Type: `application/grpc-web-text` w Å¼Ä…daniach, ktÃ³re sÄ… rodzajem protobuf w formie zakodowanej w base64. MoÅ¼esz uÅ¼yÄ‡ narzÄ™dzia [gprc-coder](https://github.com/nxenon/grpc-pentest-suite), a takÅ¼e zainstalowaÄ‡ jego [Rozszerzenie dla Burp Suite](https://github.com/nxenon/grpc-pentest-suite).

### **RÄ™czne uÅ¼ycie narzÄ™dzia gGRPC Coder**
1. Najpierw odkoduj dane:
```bash
echo "AAAAABYSC0FtaW4gTmFzaXJpGDY6BVhlbm9u" | python3 grpc-coder.py --decode --type grpc-web-text | protoscope > out.txt
```
2. Edytuj zawartoÅ›Ä‡ odkodowanego Å‚adunku
```
nano out.txt
2: {"Amin Nasiri Xenon GRPC"}
3: 54
7: {"<script>alert(origin)</script>"}
```
3. Zakoduj nowy payload
```bash
protoscope -s out.txt | python3 grpc-coder.py --encode --type grpc-web-text
```
4. UÅ¼yj wynikÃ³w w intercepcie Burp:

W przypadku, gdy chcesz przechwyciÄ‡ i zmodyfikowaÄ‡ Å¼Ä…dania i odpowiedzi gRPC, moÅ¼esz skorzystaÄ‡ z funkcji intercepcji w narzÄ™dziu Burp. Aby to zrobiÄ‡, wykonaj nastÄ™pujÄ…ce kroki:

1. Uruchom Burp Suite i skonfiguruj przeglÄ…darkÄ™ internetowÄ…, aby korzystaÅ‚a z proxy Burp.
2. PrzejdÅº do zakÅ‚adki "Proxy" w Burp Suite i wÅ‚Ä…cz intercepcjÄ™.
3. Wykonaj Å¼Ä…danie gRPC, ktÃ³re chcesz przechwyciÄ‡.
4. Gdy Å¼Ä…danie pojawi siÄ™ w intercepcie Burp, moÅ¼esz je zobaczyÄ‡ i zmodyfikowaÄ‡ przed wysÅ‚aniem.
5. Po dokonaniu odpowiednich zmian, kliknij przycisk "Forward" w intercepcie, aby wysÅ‚aÄ‡ zmodyfikowane Å¼Ä…danie.
6. OdpowiedÅº gRPC rÃ³wnieÅ¼ pojawi siÄ™ w intercepcie, gdzie moÅ¼esz jÄ… zobaczyÄ‡ i zmodyfikowaÄ‡ przed odesÅ‚aniem do klienta.

DziÄ™ki temu podejÅ›ciu moÅ¼esz kontrolowaÄ‡ i manipulowaÄ‡ danymi przesyÅ‚anymi przez protokÃ³Å‚ gRPC, co moÅ¼e byÄ‡ przydatne podczas testowania penetracyjnego aplikacji webowych.
```
AAAAADoSFkFtaW4gTmFzaXJpIFhlbm9uIEdSUEMYNjoePHNjcmlwdD5hbGVydChvcmlnaW4pPC9zY3JpcHQ+
```
### **PodrÄ™cznik z rozszerzeniem Burp Suite dla gRPC-Web Coder**
MoÅ¼esz uÅ¼yÄ‡ rozszerzenia Burp Suite dla gRPC-Web Coder w [gRPC-Web Pentest Suite](https://github.com/nxenon/grpc-pentest-suite), co jest prostsze. Instrukcje dotyczÄ…ce instalacji i uÅ¼ycia znajdziesz w repozytorium.

## **Analiza plikÃ³w Javascript gRPC-Web**
W kaÅ¼dej aplikacji gRPC-Web znajduje siÄ™ co najmniej jeden plik Javascript. MoÅ¼esz przeanalizowaÄ‡ ten plik, aby znaleÅºÄ‡ nowe wiadomoÅ›ci, punkty koÅ„cowe i usÅ‚ugi. SprÃ³buj uÅ¼yÄ‡ narzÄ™dzia [gRPC-Scan](https://github.com/nxenon/grpc-pentest-suite).
1. Pobierz plik Javascript gRPC-Web
2. Przeskanuj go za pomocÄ… grpc-scan.py:
```bash
python3 grpc-scan.py --file main.js
```
3. Analiza wynikÃ³w i przetestuj nowe punkty koÅ„cowe oraz nowe usÅ‚ugi:
```
Output:
Found Endpoints:
/grpc.gateway.testing.EchoService/Echo
/grpc.gateway.testing.EchoService/EchoAbort
/grpc.gateway.testing.EchoService/NoOp
/grpc.gateway.testing.EchoService/ServerStreamingEcho
/grpc.gateway.testing.EchoService/ServerStreamingEchoAbort

Found Messages:

grpc.gateway.testing.EchoRequest:
+------------+--------------------+--------------+
| Field Name |     Field Type     | Field Number |
+============+====================+==============+
| Message    | Proto3StringField  | 1            |
+------------+--------------------+--------------+
| Name       | Proto3StringField  | 2            |
+------------+--------------------+--------------+
| Age        | Proto3IntField     | 3            |
+------------+--------------------+--------------+
| IsAdmin    | Proto3BooleanField | 4            |
+------------+--------------------+--------------+
| Weight     | Proto3FloatField   | 5            |
+------------+--------------------+--------------+
| Test       | Proto3StringField  | 6            |
+------------+--------------------+--------------+
| Test2      | Proto3StringField  | 7            |
+------------+--------------------+--------------+
| Test3      | Proto3StringField  | 16           |
+------------+--------------------+--------------+
| Test4      | Proto3StringField  | 20           |
+------------+--------------------+--------------+

grpc.gateway.testing.EchoResponse:
+--------------+--------------------+--------------+
|  Field Name  |     Field Type     | Field Number |
+==============+====================+==============+
| Message      | Proto3StringField  | 1            |
+--------------+--------------------+--------------+
| Name         | Proto3StringField  | 2            |
+--------------+--------------------+--------------+
| Age          | Proto3IntField     | 3            |
+--------------+--------------------+--------------+
| IsAdmin      | Proto3BooleanField | 4            |
+--------------+--------------------+--------------+
| Weight       | Proto3FloatField   | 5            |
+--------------+--------------------+--------------+
| Test         | Proto3StringField  | 6            |
+--------------+--------------------+--------------+
| Test2        | Proto3StringField  | 7            |
+--------------+--------------------+--------------+
| Test3        | Proto3StringField  | 16           |
+--------------+--------------------+--------------+
| Test4        | Proto3StringField  | 20           |
+--------------+--------------------+--------------+
| MessageCount | Proto3IntField     | 8            |
+--------------+--------------------+--------------+

grpc.gateway.testing.ServerStreamingEchoRequest:
+-----------------+-------------------+--------------+
|   Field Name    |    Field Type     | Field Number |
+=================+===================+==============+
| Message         | Proto3StringField | 1            |
+-----------------+-------------------+--------------+
| MessageCount    | Proto3IntField    | 2            |
+-----------------+-------------------+--------------+
| MessageInterval | Proto3IntField    | 3            |
+-----------------+-------------------+--------------+

grpc.gateway.testing.ServerStreamingEchoResponse:
+------------+-------------------+--------------+
| Field Name |    Field Type     | Field Number |
+============+===================+==============+
| Message    | Proto3StringField | 1            |
+------------+-------------------+--------------+

grpc.gateway.testing.ClientStreamingEchoRequest:
+------------+-------------------+--------------+
| Field Name |    Field Type     | Field Number |
+============+===================+==============+
| Message    | Proto3StringField | 1            |
+------------+-------------------+--------------+

grpc.gateway.testing.ClientStreamingEchoResponse:
+--------------+----------------+--------------+
|  Field Name  |   Field Type   | Field Number |
+==============+================+==============+
| MessageCount | Proto3IntField | 1            |
+--------------+----------------+--------------+
```
## OdnoÅ›niki

* [WÅ‚amywanie siÄ™ do gRPC-Web - artykuÅ‚ autorstwa Amina Nasiri](https://infosecwriteups.com/hacking-into-grpc-web-a54053757a45)
* [Zestaw narzÄ™dzi do pentestowania gRPC-Web](https://github.com/nxenon/grpc-pentest-suite)

<details>

<summary><strong>Naucz siÄ™ hakowaÄ‡ AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Inne sposoby wsparcia HackTricks:

* JeÅ›li chcesz zobaczyÄ‡ **reklamÄ™ swojej firmy w HackTricks** lub **pobraÄ‡ HackTricks w formacie PDF**, sprawdÅº [**PLAN SUBSKRYPCJI**](https://github.com/sponsors/carlospolop)!
* ZdobÄ…dÅº [**oficjalne gadÅ¼ety PEASS & HackTricks**](https://peass.creator-spring.com)
* Odkryj [**RodzinÄ™ PEASS**](https://opensea.io/collection/the-peass-family), naszÄ… kolekcjÄ™ ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* **DoÅ‚Ä…cz do** ğŸ’¬ [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **Å›ledÅº** nas na **Twitterze** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Podziel siÄ™ swoimi trikami hakerskimi, przesyÅ‚ajÄ…c PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
