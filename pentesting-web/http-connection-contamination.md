# HTTP Connection Contamination

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

**ì´ê²ƒì€ ê²Œì‹œë¬¼ì˜ ìš”ì•½ì…ë‹ˆë‹¤: [https://portswigger.net/research/http-3-connection-contamination](https://portswigger.net/research/http-3-connection-contamination)**. ì¶”ê°€ ì„¸ë¶€ì •ë³´ë¥¼ í™•ì¸í•˜ì„¸ìš”!

ì›¹ ë¸Œë¼ìš°ì €ëŠ” ê³µìœ  IP ì£¼ì†Œì™€ ê³µí†µ TLS ì¸ì¦ì„œê°€ ì£¼ì–´ì§€ë©´ [HTTP ì—°ê²° ì§‘í•©](https://daniel.haxx.se/blog/2016/08/18/http2-connection-coalescing)ì„ í†µí•´ ì„œë¡œ ë‹¤ë¥¸ ì›¹ì‚¬ì´íŠ¸ì— ëŒ€í•´ ë‹¨ì¼ HTTP/2+ ì—°ê²°ì„ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ì´ëŠ” **ì²« ë²ˆì§¸ ìš”ì²­ ë¼ìš°íŒ…**ê³¼ ì¶©ëŒí•  ìˆ˜ ìˆìœ¼ë©°, ì—¬ê¸°ì„œ í›„ì† ìš”ì²­ì€ ì²« ë²ˆì§¸ ìš”ì²­ì— ì˜í•´ ê²°ì •ëœ ë°±ì—”ë“œë¡œ ì „ë‹¬ë©ë‹ˆë‹¤. ì´ëŸ¬í•œ ì˜ëª»ëœ ë¼ìš°íŒ…ì€ ë³´ì•ˆ ì·¨ì•½ì ì„ ì´ˆë˜í•  ìˆ˜ ìˆìœ¼ë©°, íŠ¹íˆ ì™€ì¼ë“œì¹´ë“œ TLS ì¸ì¦ì„œì™€ `*.example.com`ê³¼ ê°™ì€ ë„ë©”ì¸ê³¼ ê²°í•©ë  ë•Œ ë”ìš± ê·¸ë ‡ìŠµë‹ˆë‹¤.

ì˜ˆë¥¼ ë“¤ì–´, `wordpress.example.com`ê³¼ `secure.example.com`ì´ ë™ì¼í•œ ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œì—ì„œ ì œê³µë˜ê³  ê³µí†µ ì™€ì¼ë“œì¹´ë“œ ì¸ì¦ì„œë¥¼ ê°€ì§€ê³  ìˆë‹¤ë©´, ë¸Œë¼ìš°ì €ì˜ ì—°ê²° ì§‘í•©ìœ¼ë¡œ ì¸í•´ `secure.example.com`ì— ëŒ€í•œ ìš”ì²­ì´ ì˜ëª» ì²˜ë¦¬ë˜ì–´ WordPress ë°±ì—”ë“œì—ì„œ XSSì™€ ê°™ì€ ì·¨ì•½ì ì„ ì•…ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì—°ê²° ì§‘í•©ì„ ê´€ì°°í•˜ê¸° ìœ„í•´ Chromeì˜ ë„¤íŠ¸ì›Œí¬ íƒ­ì´ë‚˜ Wiresharkì™€ ê°™ì€ ë„êµ¬ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ ì½”ë“œ ì¡°ê°ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:
```javascript
fetch('//sub1.hackxor.net/', {mode: 'no-cors', credentials: 'include'}).then(()=>{ fetch('//sub2.hackxor.net/', {mode: 'no-cors', credentials: 'include'}) })
```
ìœ„í˜‘ì€ í˜„ì¬ ì²« ë²ˆì§¸ ìš”ì²­ ë¼ìš°íŒ…ì˜ í¬ê·€ì„±ê³¼ HTTP/2ì˜ ë³µì¡ì„±ìœ¼ë¡œ ì¸í•´ ì œí•œì ì…ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ IP ì£¼ì†Œ ì¼ì¹˜ ìš”êµ¬ ì‚¬í•­ì„ ì™„í™”í•˜ëŠ” HTTP/3ì˜ ì œì•ˆëœ ë³€ê²½ ì‚¬í•­ì€ ê³µê²© í‘œë©´ì„ ë„“í ìˆ˜ ìˆìœ¼ë©°, MITM ê³µê²© ì—†ì´ ì™€ì¼ë“œì¹´ë“œ ì¸ì¦ì„œê°€ ìˆëŠ” ì„œë²„ë¥¼ ë” ì·¨ì•½í•˜ê²Œ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ëª¨ë²” ì‚¬ë¡€ì—ëŠ” ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œì—ì„œ ì²« ë²ˆì§¸ ìš”ì²­ ë¼ìš°íŒ…ì„ í”¼í•˜ê³ , íŠ¹íˆ HTTP/3ì˜ ì¶œí˜„ê³¼ í•¨ê»˜ ì™€ì¼ë“œì¹´ë“œ TLS ì¸ì¦ì„œì— ì£¼ì˜í•˜ëŠ” ê²ƒì´ í¬í•¨ë©ë‹ˆë‹¤. ì´ëŸ¬í•œ ë³µì¡í•˜ê³  ìƒí˜¸ ì—°ê²°ëœ ì·¨ì•½ì ì— ëŒ€í•œ ì •ê¸°ì ì¸ í…ŒìŠ¤íŠ¸ì™€ ì¸ì‹ì€ ì›¹ ë³´ì•ˆì„ ìœ ì§€í•˜ëŠ” ë° ì¤‘ìš”í•©ë‹ˆë‹¤.
