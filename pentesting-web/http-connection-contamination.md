# HTTP Connection Contamination

{% hint style="success" %}
å­¦ä¹ ä¸å®è·µ AWS é»‘å®¢æŠ€æœ¯ï¼š<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks åŸ¹è®­ AWS çº¢é˜Ÿä¸“å®¶ (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
å­¦ä¹ ä¸å®è·µ GCP é»‘å®¢æŠ€æœ¯ï¼š<img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks åŸ¹è®­ GCP çº¢é˜Ÿä¸“å®¶ (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>æ”¯æŒ HackTricks</summary>

* æŸ¥çœ‹ [**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**Telegram ç¾¤ç»„**](https://t.me/peass) æˆ– **å…³æ³¨** æˆ‘ä»¬çš„ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub ä»“åº“æäº¤ PR åˆ†äº«é»‘å®¢æŠ€å·§ã€‚

</details>
{% endhint %}

**è¿™æ˜¯æ–‡ç« çš„æ‘˜è¦ï¼š[https://portswigger.net/research/http-3-connection-contamination](https://portswigger.net/research/http-3-connection-contamination)**ã€‚æŸ¥çœ‹ä»¥è·å–æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼

Web æµè§ˆå™¨å¯ä»¥é€šè¿‡ [HTTP è¿æ¥åˆå¹¶](https://daniel.haxx.se/blog/2016/08/18/http2-connection-coalescing) åœ¨ä¸åŒç½‘ç«™ä¹‹é—´é‡ç”¨å•ä¸ª HTTP/2+ è¿æ¥ï¼Œå‰ææ˜¯å…±äº« IP åœ°å€å’Œé€šç”¨ TLS è¯ä¹¦ã€‚ç„¶è€Œï¼Œè¿™å¯èƒ½ä¸åå‘ä»£ç†ä¸­çš„ **é¦–æ¬¡è¯·æ±‚è·¯ç”±** å†²çªï¼Œå…¶ä¸­åç»­è¯·æ±‚è¢«å®šå‘åˆ°ç”±ç¬¬ä¸€æ¬¡è¯·æ±‚ç¡®å®šçš„åç«¯ã€‚è¿™ç§é”™è¯¯è·¯ç”±å¯èƒ½å¯¼è‡´å®‰å…¨æ¼æ´ï¼Œç‰¹åˆ«æ˜¯å½“ä¸é€šé…ç¬¦ TLS è¯ä¹¦å’Œåƒ `*.example.com` è¿™æ ·çš„åŸŸåç»“åˆæ—¶ã€‚

ä¾‹å¦‚ï¼Œå¦‚æœ `wordpress.example.com` å’Œ `secure.example.com` éƒ½ç”±åŒä¸€ä¸ªåå‘ä»£ç†æä¾›æœåŠ¡ï¼Œå¹¶ä¸”æœ‰ä¸€ä¸ªé€šç”¨çš„é€šé…ç¬¦è¯ä¹¦ï¼Œæµè§ˆå™¨çš„è¿æ¥åˆå¹¶å¯èƒ½å¯¼è‡´å¯¹ `secure.example.com` çš„è¯·æ±‚è¢«é”™è¯¯åœ°å¤„ç†ä¸º WordPress åç«¯ï¼Œä»è€Œåˆ©ç”¨è¯¸å¦‚ XSS çš„æ¼æ´ã€‚

è¦è§‚å¯Ÿè¿æ¥åˆå¹¶ï¼Œå¯ä»¥ä½¿ç”¨ Chrome çš„ç½‘ç»œé€‰é¡¹å¡æˆ– Wireshark ç­‰å·¥å…·ã€‚ä»¥ä¸‹æ˜¯æµ‹è¯•çš„ä»£ç ç‰‡æ®µï¼š
```javascript
fetch('//sub1.hackxor.net/', {mode: 'no-cors', credentials: 'include'}).then(()=>{ fetch('//sub2.hackxor.net/', {mode: 'no-cors', credentials: 'include'}) })
```
ç›®å‰ï¼Œç”±äºé¦–æ¬¡è¯·æ±‚è·¯ç”±çš„ç¨€æœ‰æ€§å’ŒHTTP/2çš„å¤æ‚æ€§ï¼Œå¨èƒå—åˆ°é™åˆ¶ã€‚ç„¶è€Œï¼ŒHTTP/3ä¸­æå‡ºçš„æ›´æ”¹æ”¾å®½äº†IPåœ°å€åŒ¹é…è¦æ±‚ï¼Œè¿™å¯èƒ½ä¼šæ‰©å¤§æ”»å‡»é¢ï¼Œä½¿å¾—ä½¿ç”¨é€šé…ç¬¦è¯ä¹¦çš„æœåŠ¡å™¨åœ¨ä¸éœ€è¦MITMæ”»å‡»çš„æƒ…å†µä¸‹æ›´å®¹æ˜“å—åˆ°æ”»å‡»ã€‚

æœ€ä½³å®è·µåŒ…æ‹¬åœ¨åå‘ä»£ç†ä¸­é¿å…é¦–æ¬¡è¯·æ±‚è·¯ç”±ï¼Œå¹¶å¯¹é€šé…ç¬¦TLSè¯ä¹¦ä¿æŒè°¨æ…ï¼Œç‰¹åˆ«æ˜¯åœ¨HTTP/3å‡ºç°ä¹‹åã€‚å®šæœŸæµ‹è¯•å’Œå¯¹è¿™äº›å¤æ‚ã€ç›¸äº’å…³è”çš„æ¼æ´ä¿æŒè­¦è§‰å¯¹äºç»´æŠ¤ç½‘ç»œå®‰å…¨è‡³å…³é‡è¦ã€‚

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
