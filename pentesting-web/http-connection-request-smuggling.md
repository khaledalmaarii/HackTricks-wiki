# HTTP BaÄŸlantÄ± Ä°steÄŸi Smuggling

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong> ile sÄ±fÄ±rdan kahraman olmak iÃ§in AWS hackleme Ã¶ÄŸrenin<strong>!</strong></summary>

* Bir **cybersecurity ÅŸirketinde** Ã§alÄ±ÅŸÄ±yor musunuz? **Åirketinizi HackTricks'te reklamÄ±nÄ± gÃ¶rmek** ister misiniz? veya **PEASS'Ä±n en son sÃ¼rÃ¼mÃ¼ne veya HackTricks'i PDF olarak indirmek** ister misiniz? [**ABONELÄ°K PLANLARINI**](https://github.com/sponsors/carlospolop) kontrol edin!
* [**The PEASS Ailesi'ni**](https://opensea.io/collection/the-peass-family) keÅŸfedin, Ã¶zel [**NFT'lerimiz**](https://opensea.io/collection/the-peass-family) koleksiyonumuz
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) alÄ±n
* [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katÄ±lÄ±n** veya **Twitter**'da takip edin ğŸ¦[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Hacking hilelerinizi [hacktricks repo](https://github.com/carlospolop/hacktricks) ve [hacktricks-cloud repo](https://github.com/carlospolop/hacktricks-cloud)'ya PR gÃ¶ndererek paylaÅŸÄ±n**.

</details>

**Bu, [https://portswigger.net/research/browser-powered-desync-attacks](https://portswigger.net/research/browser-powered-desync-attacks) adresindeki yazÄ±nÄ±n Ã¶zeti.**

## BaÄŸlantÄ± Durumu SaldÄ±rÄ±larÄ± <a href="#state" id="state"></a>

### Ä°lk Ä°stek DoÄŸrulama

Ä°stekleri yÃ¶nlendirirken, ters proxy'ler genellikle eriÅŸime izin verilen bir beyaz listeyle birlikte hedef arka uÃ§ sunucuyu belirlemek iÃ§in **Host baÅŸlÄ±ÄŸÄ±na** baÄŸlÄ± olabilir. Ancak, bazÄ± proxy'lerde beyaz liste yalnÄ±zca bir baÄŸlantÄ±daki ilk istekte uygulanÄ±r. SonuÃ§ olarak, saldÄ±rganlar bu durumu istismar edebilir, Ã¶nce izin verilen bir sunucuya bir istek yaparak ve ardÄ±ndan aynÄ± baÄŸlantÄ± Ã¼zerinden bir iÃ§ siteye istekte bulunarak:
```text
GET / HTTP/1.1
Host: [allowed-external-host]

GET / HTTP/1.1
Host: [internal-host]
```
Bu zafiyet neyse ki yaygÄ±n deÄŸildir.

### Ä°lk Ä°stek YÃ¶nlendirmesi

BazÄ± yapÄ±landÄ±rmalarda, bir Ã¶n uÃ§ sunucusu, bir isteÄŸin arka uÃ§ yÃ¶nlendirmesini belirlemek iÃ§in **ilk isteÄŸin Host baÅŸlÄ±ÄŸÄ±nÄ±** kullanabilir ve ardÄ±ndan aynÄ± istemci baÄŸlantÄ±sÄ±ndan gelen tÃ¼m sonraki istekleri sÃ¼rekli olarak aynÄ± arka uÃ§ baÄŸlantÄ±sÄ±na yÃ¶nlendirebilir. Bu aÅŸaÄŸÄ±daki gibi gÃ¶sterilebilir:
```text
GET / HTTP/1.1
Host: example.com

POST /pwreset HTTP/1.1
Host: psres.net
```
Bu sorun, diÄŸer zafiyetleri sÃ¶mÃ¼rmek veya yetkisiz eriÅŸim saÄŸlamak iÃ§in [Host baÅŸlÄ±k saldÄ±rÄ±larÄ±](https://portswigger.net/web-security/host-header) ile birleÅŸtirilebilir, Ã¶rneÄŸin ÅŸifre sÄ±fÄ±rlama zehirlenmesi veya [web Ã¶nbelleÄŸi zehirlenmesi](https://portswigger.net/web-security/web-cache-poisoning).

{% hint style="info" %}
Bu zafiyetleri tespit etmek iÃ§in HTTP Request Smuggler'daki 'connection-state probe' Ã¶zelliÄŸi kullanÄ±labilir.
{% endhint %}


<details>

<summary><strong>AWS hacklemeyi sÄ±fÄ±rdan kahramanla Ã¶ÄŸrenin</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

* Bir **cybersecurity ÅŸirketinde** Ã§alÄ±ÅŸÄ±yor musunuz? **Åirketinizi HackTricks'te reklamÄ±nÄ± yapmak** veya **PEASS'Ä±n en son sÃ¼rÃ¼mÃ¼ne eriÅŸmek veya HackTricks'i PDF olarak indirmek** ister misiniz? [**ABONELÄ°K PLANLARINI**](https://github.com/sponsors/carlospolop) kontrol edin!
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) koleksiyonumuz olan Ã¶zel [**NFT'leri**](https://opensea.io/collection/the-peass-family) keÅŸfedin.
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin.
* [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katÄ±lÄ±n** veya **Twitter**'da beni takip edin ğŸ¦[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Hacking hilelerinizi [hacktricks repo](https://github.com/carlospolop/hacktricks) ve [hacktricks-cloud repo](https://github.com/carlospolop/hacktricks-cloud)'ya PR gÃ¶ndererek paylaÅŸÄ±n**.

</details>
