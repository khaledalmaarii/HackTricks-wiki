# HTTP Zahtev za Smuggling Povezivanjem

<details>

<summary><strong>Nau캜ite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

* Da li radite u **kompaniji za sajber bezbednost**? 콯elite li da vidite svoju **kompaniju reklamiranu na HackTricks**? ili 쬰lite pristup **najnovijoj verziji PEASS-a ili preuzimanje HackTricks-a u PDF formatu**? Proverite [**PLANOVE ZA PRETPLATU**](https://github.com/sponsors/carlospolop)!
* Otkrijte [**Porodicu PEASS**](https://opensea.io/collection/the-peass-family), na코u kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* Nabavite [**zvani캜ni PEASS & HackTricks swag**](https://peass.creator-spring.com)
* **Pridru쬴te se** [**游눫**](https://emojipedia.org/speech-balloon/) [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili me **pratite** na **Twitteru** 游냕[**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **Podelite svoje hakovanje trikove slanjem PR-ova na** [**hacktricks repozitorijum**](https://github.com/carlospolop/hacktricks) **i** [**hacktricks-cloud repozitorijum**](https://github.com/carlospolop/hacktricks-cloud).

</details>

**Ovo je sa쬰tak posta** [**https://portswigger.net/research/browser-powered-desync-attacks**](https://portswigger.net/research/browser-powered-desync-attacks)

## Napadi na Stanje Povezivanja <a href="#state" id="state"></a>

### Validacija Prvog Zahteva

Prilikom usmeravanja zahteva, reverzni proksi mogu zavisiti od **Host zaglavlja** kako bi odredili odredi코ni server na pozadini, 캜esto se oslanjaju캖i na belu listu hostova koji imaju dozvoljen pristup. Me캠utim, postoji ranjivost u nekim proksijima gde se bela lista primenjuje samo na po캜etni zahtev u vezi. Stoga, napada캜i mogu iskoristiti ovo tako 코to prvo 코alju zahtev dozvoljenom hostu, a zatim tra쬰 interni sajt kroz istu vezu:
```
GET / HTTP/1.1
Host: [allowed-external-host]

GET / HTTP/1.1
Host: [internal-host]
```
### Rutiranje prvog zahteva

U nekim konfiguracijama, prednji server mo쬰 koristiti **Host zaglavlje prvog zahteva** da odredi rutiranje ka pozadinskom serveru za taj zahtev, a zatim trajno rutirati sve naredne zahteve sa iste klijentske konekcije ka istoj pozadinskoj konekciji. Ovo se mo쬰 demonstrirati kao:
```
GET / HTTP/1.1
Host: example.com

POST /pwreset HTTP/1.1
Host: psres.net
```
Ovaj problem potencijalno mo쬰 biti kombinovan sa [napadima na zaglavlje doma캖ina](https://portswigger.net/web-security/host-header), poput otrovanja za resetovanje lozinke ili [otrovanja veb ke코a](https://portswigger.net/web-security/web-cache-poisoning), kako bi se iskoristile druge ranjivosti ili stekao neovla코캖en pristup dodatnim virtuelnim hostovima.

{% hint style="info" %}
Za identifikaciju ovih ranjivosti, mo쬰 se koristiti funkcija 'connection-state probe' u HTTP Request Smuggler alatu.
{% endhint %}

<details>

<summary><strong>Nau캜ite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

* Da li radite u **kompaniji za kiberneti캜ku bezbednost**? 콯elite li da vidite svoju **kompaniju reklamiranu na HackTricks**? ili 쬰lite pristup **najnovijoj verziji PEASS-a ili preuzimanje HackTricks-a u PDF formatu**? Proverite [**PLANOVE ZA PRIJAVU**](https://github.com/sponsors/carlospolop)!
* Otkrijte [**Porodicu PEASS**](https://opensea.io/collection/the-peass-family), na코u kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* Nabavite [**zvani캜ni PEASS & HackTricks swag**](https://peass.creator-spring.com)
* **Pridru쬴te se** [**游눫**](https://emojipedia.org/speech-balloon/) [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili me **pratite** na **Twitteru** 游냕[**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **Podelite svoje hakovanje trikove slanjem PR-ova na** [**hacktricks repozitorijum**](https://github.com/carlospolop/hacktricks) **i** [**hacktricks-cloud repozitorijum**](https://github.com/carlospolop/hacktricks-cloud).

</details>
