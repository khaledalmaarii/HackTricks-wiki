# HTTP veza zahteva hakovanje

<details>

<summary><strong>Nau캜ite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

* Da li radite u **cybersecurity kompaniji**? 콯elite li da vidite **va코u kompaniju reklamiranu na HackTricks**? Ili 쬰lite da imate pristup **najnovijoj verziji PEASS-a ili preuzmete HackTricks u PDF formatu**? Proverite [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Otkrijte [**The PEASS Family**](https://opensea.io/collection/the-peass-family), na코u kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* Nabavite [**zvani캜ni PEASS & HackTricks swag**](https://peass.creator-spring.com)
* **Pridru쬴te se** [**游눫**](https://emojipedia.org/speech-balloon/) [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili me **pratite** na **Twitter-u** 游냕[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Podelite svoje hakovanje trikove slanjem PR-ova na [hacktricks repo](https://github.com/carlospolop/hacktricks) i [hacktricks-cloud repo](https://github.com/carlospolop/hacktricks-cloud)**.

</details>

**Ovo je sa쬰tak posta [https://portswigger.net/research/browser-powered-desync-attacks](https://portswigger.net/research/browser-powered-desync-attacks)**

## Napadi na stanje veze <a href="#state" id="state"></a>

### Validacija prvog zahteva

Prilikom rutiranja zahteva, obrnuti proxy-ji mogu zavisiti od **Host zaglavlja** da bi odredili odredi코ni server na backend-u, 캜esto se oslanjaju캖i na belu listu hostova koji imaju dozvoljen pristup. Me캠utim, postoji ranjivost u nekim proxy-jima gde se bela lista primenjuje samo na prvom zahtevu u vezi. Kao rezultat toga, napada캜i mogu iskoristiti ovo tako 코to prvo 코alju zahtev dozvoljenom hostu, a zatim zahtevaju interni sajt kroz istu vezu:
```text
GET / HTTP/1.1
Host: [allowed-external-host]

GET / HTTP/1.1
Host: [internal-host]
```
Ova ranjivost na sre캖u nije 코iroko rasprostranjena.

### Rutiranje prvog zahteva

U nekim konfiguracijama, prednji server mo쬰 koristiti **Host zaglavlje prvog zahteva** kako bi odredio rutiranje pozadine za taj zahtev, a zatim trajno rutirao sve slede캖e zahteve sa iste klijentske veze ka istoj pozadinskoj vezi. Ovo se mo쬰 demonstrirati kao:
```text
GET / HTTP/1.1
Host: example.com

POST /pwreset HTTP/1.1
Host: psres.net
```
Ovaj problem potencijalno mo쬰 biti kombinovan sa [napadima na zaglavlje doma캖ina](https://portswigger.net/web-security/host-header), poput otrovanja za resetovanje lozinke ili [otrovanja ke코a veb stranica](https://portswigger.net/web-security/web-cache-poisoning), kako bi se iskoristile druge ranjivosti ili stekao neovla코캖en pristup dodatnim virtuelnim hostovima.

{% hint style="info" %}
Da biste identifikovali ove ranjivosti, mo쬰te koristiti funkcionalnost 'connection-state probe' u HTTP Request Smuggler-u.
{% endhint %}


<details>

<summary><strong>Nau캜ite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

* Da li radite u **kompaniji za kiberneti캜ku bezbednost**? 콯elite li da vidite **va코u kompaniju reklamiranu na HackTricks-u**? Ili 쬰lite da imate pristup **najnovijoj verziji PEASS-a ili preuzmete HackTricks u PDF formatu**? Proverite [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Otkrijte [**The PEASS Family**](https://opensea.io/collection/the-peass-family), na코u kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* Nabavite [**zvani캜ni PEASS & HackTricks swag**](https://peass.creator-spring.com)
* **Pridru쬴te se** [**游눫**](https://emojipedia.org/speech-balloon/) [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili me **pratite** na **Twitter-u** 游냕[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Podelite svoje hakovanje trikove slanjem PR-ova na [hacktricks repo](https://github.com/carlospolop/hacktricks) i [hacktricks-cloud repo](https://github.com/carlospolop/hacktricks-cloud)**.

</details>
