# Iframe Traps

{% hint style="success" %}
AWS Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks EÄŸitim AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ± (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
GCP Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks EÄŸitim GCP KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ± (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* **ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n ya da **Twitter**'da **bizi takip edin** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Hacking ipuÃ§larÄ±nÄ± paylaÅŸmak iÃ§in** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna PR gÃ¶nderin.

</details>
{% endhint %}

## Temel Bilgiler

KullanÄ±cÄ±nÄ±n web sayfasÄ±nda hareket ederken bilgilerini Ã§almak iÃ§in iframeler aracÄ±lÄ±ÄŸÄ±yla XSS'in bu ÅŸekilde kÃ¶tÃ¼ye kullanÄ±lmasÄ±, trustedsec.com'daki bu 2 yazÄ±da ilk olarak yayÄ±nlanmÄ±ÅŸtÄ±r: [**burada**](https://trustedsec.com/blog/persisting-xss-with-iframe-traps) **ve** [**burada**](https://trustedsec.com/blog/js-tap-weaponizing-javascript-for-red-teams).

SaldÄ±rÄ±, XSS'e karÅŸÄ± savunmasÄ±z bir sayfada baÅŸlar; burada **kurbanlarÄ±n XSS'ten Ã§Ä±kmamalarÄ±nÄ± saÄŸlamak** iÃ§in **bir iframede gezinmelerini saÄŸlamak** mÃ¼mkÃ¼ndÃ¼r ve bu iframe tÃ¼m web uygulamasÄ±nÄ± kaplar.

XSS saldÄ±rÄ±sÄ±, temel olarak web sayfasÄ±nÄ± ekranÄ±n %100'Ã¼nde bir iframede yÃ¼kleyecektir. Bu nedenle, kurban **iframe iÃ§inde olduÄŸunu fark etmeyecek**. ArdÄ±ndan, kurban iframe iÃ§indeki baÄŸlantÄ±lara tÄ±klayarak sayfada gezinirse (web iÃ§inde), **iframe iÃ§inde gezinmiÅŸ** olacak ve bu gezinmeden bilgi Ã§alan keyfi JS yÃ¼klenmiÅŸ olacaktÄ±r.

AyrÄ±ca, daha gerÃ§ekÃ§i hale getirmek iÃ§in, bir iframe'in sayfanÄ±n konumunu deÄŸiÅŸtirdiÄŸini kontrol etmek iÃ§in bazÄ± **dinleyiciler** kullanmak ve kullanÄ±cÄ±nÄ±n sayfalar arasÄ±nda hareket ettiÄŸini dÃ¼ÅŸÃ¼ndÃ¼ÄŸÃ¼ URL'yi tarayÄ±cÄ±nÄ±n URL'si ile gÃ¼ncellemek mÃ¼mkÃ¼ndÃ¼r.

<figure><img src="../.gitbook/assets/image (1248).png" alt=""><figcaption><p><a href="https://www.trustedsec.com/wp-content/uploads/2022/04/regEvents.png">https://www.trustedsec.com/wp-content/uploads/2022/04/regEvents.png</a></p></figcaption></figure>

<figure><img src="../.gitbook/assets/image (1249).png" alt=""><figcaption><p><a href="https://www.trustedsec.com/wp-content/uploads/2022/04/fakeAddress-1.png">https://www.trustedsec.com/wp-content/uploads/2022/04/fakeAddress-1.png</a></p></figcaption></figure>

AyrÄ±ca, yalnÄ±zca kurbanÄ±n ziyaret ettiÄŸi diÄŸer sayfalarÄ± deÄŸil, aynÄ± zamanda **doldurulmuÅŸ formlar** iÃ§in kullanÄ±lan verileri Ã§almak veya **yerel depolamayÄ± Ã§almak** iÃ§in dinleyiciler kullanmak mÃ¼mkÃ¼ndÃ¼r...

Elbette, ana sÄ±nÄ±rlamalar, **bir kurbanÄ±n sekmeyi kapatmasÄ± veya tarayÄ±cÄ±da baÅŸka bir URL girmesi durumunda iframe'den kaÃ§acaÄŸÄ±dÄ±r**. Bunu yapmanÄ±n bir diÄŸer yolu, **sayfayÄ± yenilemek** olacaktÄ±r; ancak bu, her yeni sayfa iframe iÃ§inde yÃ¼klendiÄŸinde saÄŸ tÄ±klama baÄŸlam menÃ¼sÃ¼nÃ¼ devre dÄ±ÅŸÄ± bÄ±rakarak veya kullanÄ±cÄ±nÄ±n fare hareketinin iframe'den Ã§Ä±kÄ±p Ã§Ä±kmadÄ±ÄŸÄ±nÄ± kontrol ederek kÄ±smen **Ã¶nlenebilir**. Bu durumda, tarayÄ±cÄ±nÄ±n yenileme dÃ¼ÄŸmesine tÄ±klamak iÃ§in fareyi Ã§Ä±karmasÄ± durumunda tarayÄ±cÄ±nÄ±n URL'si, XSS'e karÅŸÄ± savunmasÄ±z olan orijinal URL ile gÃ¼ncellenir, bu nedenle kullanÄ±cÄ± bunu yenilerse, tekrar zehirlenir (bu durumun Ã§ok gizli olmadÄ±ÄŸÄ±nÄ± unutmayÄ±n).

{% hint style="success" %}
AWS Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks EÄŸitim AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ± (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
GCP Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks EÄŸitim GCP KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ± (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* **ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n ya da **Twitter**'da **bizi takip edin** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Hacking ipuÃ§larÄ±nÄ± paylaÅŸmak iÃ§in** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna PR gÃ¶nderin.

</details>
{% endhint %}
