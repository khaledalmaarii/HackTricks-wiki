# Iframe Traps

{% hint style="success" %}
Ucz siÄ™ i Ä‡wicz Hacking AWS:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Ucz siÄ™ i Ä‡wicz Hacking GCP: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Wsparcie dla HackTricks</summary>

* SprawdÅº [**plany subskrypcyjne**](https://github.com/sponsors/carlospolop)!
* **DoÅ‚Ä…cz do** ğŸ’¬ [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegram**](https://t.me/peass) lub **Å›ledÅº** nas na **Twitterze** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Podziel siÄ™ sztuczkami hackingowymi, przesyÅ‚ajÄ…c PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repozytoriÃ³w github.

</details>
{% endhint %}

## Podstawowe informacje

Ta forma naduÅ¼ywania XSS za pomocÄ… iframe do kradzieÅ¼y informacji od uÅ¼ytkownika poruszajÄ…cego siÄ™ po stronie internetowej zostaÅ‚a pierwotnie opublikowana w tych 2 postach na trustedsec.com: [**tutaj**](https://trustedsec.com/blog/persisting-xss-with-iframe-traps) **i** [**tutaj**](https://trustedsec.com/blog/js-tap-weaponizing-javascript-for-red-teams).

Atak zaczyna siÄ™ na stronie podatnej na XSS, gdzie moÅ¼liwe jest, aby **ofiary nie opuÅ›ciÅ‚y XSS** poprzez **nawigacjÄ™ w iframe**, ktÃ³ry zajmuje caÅ‚Ä… aplikacjÄ™ internetowÄ….

Atak XSS zasadniczo zaÅ‚adowuje stronÄ™ internetowÄ… w iframe na 100% ekranu. Dlatego ofiara **nie zauwaÅ¼y, Å¼e jest w iframe**. NastÄ™pnie, jeÅ›li ofiara nawigowaÄ‡ po stronie, klikajÄ…c linki wewnÄ…trz iframe (wewnÄ…trz sieci), bÄ™dzie **nawigowaÄ‡ wewnÄ…trz iframe** z dowolnym zaÅ‚adowanym JS kradnÄ…cym informacje z tej nawigacji.

Co wiÄ™cej, aby uczyniÄ‡ to bardziej realistycznym, moÅ¼liwe jest uÅ¼ycie niektÃ³rych **nasÅ‚uchiwaczy**, aby sprawdziÄ‡, kiedy iframe zmienia lokalizacjÄ™ strony, i zaktualizowaÄ‡ adres URL przeglÄ…darki z tymi lokalizacjami, ktÃ³re uÅ¼ytkownik myÅ›li, Å¼e porusza siÄ™ po stronach uÅ¼ywajÄ…c przeglÄ…darki.

<figure><img src="../.gitbook/assets/image (1248).png" alt=""><figcaption><p><a href="https://www.trustedsec.com/wp-content/uploads/2022/04/regEvents.png">https://www.trustedsec.com/wp-content/uploads/2022/04/regEvents.png</a></p></figcaption></figure>

<figure><img src="../.gitbook/assets/image (1249).png" alt=""><figcaption><p><a href="https://www.trustedsec.com/wp-content/uploads/2022/04/fakeAddress-1.png">https://www.trustedsec.com/wp-content/uploads/2022/04/fakeAddress-1.png</a></p></figcaption></figure>

Co wiÄ™cej, moÅ¼liwe jest uÅ¼ycie nasÅ‚uchiwaczy do kradzieÅ¼y wraÅ¼liwych informacji, nie tylko innych stron, ktÃ³re ofiara odwiedza, ale takÅ¼e danych uÅ¼ywanych do **wypeÅ‚niania formularzy** i ich wysyÅ‚ania (dane logowania?) lub do **kradzieÅ¼y lokalnej pamiÄ™ci**...

OczywiÅ›cie, gÅ‚Ã³wne ograniczenia polegajÄ… na tym, Å¼e **ofiara zamykajÄ…ca kartÄ™ lub wpisujÄ…ca inny adres URL w przeglÄ…darkÄ™ ucieknie z iframe**. Innym sposobem na to byÅ‚oby **odÅ›wieÅ¼enie strony**, jednak moÅ¼e to byÄ‡ czÄ™Å›ciowo **zapobiegane** przez wyÅ‚Ä…czenie menu kontekstowego klikniÄ™cia prawym przyciskiem myszy za kaÅ¼dym razem, gdy nowa strona jest Å‚adowana wewnÄ…trz iframe lub zauwaÅ¼ajÄ…c, gdy mysz uÅ¼ytkownika opuszcza iframe, potencjalnie aby kliknÄ…Ä‡ przycisk odÅ›wieÅ¼ania przeglÄ…darki, a w tym przypadku adres URL przeglÄ…darki jest aktualizowany do oryginalnego adresu URL podatnego na XSS, wiÄ™c jeÅ›li uÅ¼ytkownik go odÅ›wieÅ¼y, zostanie ponownie zainfekowany (zauwaÅ¼, Å¼e to nie jest bardzo dyskretne).

{% hint style="success" %}
Ucz siÄ™ i Ä‡wicz Hacking AWS:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Ucz siÄ™ i Ä‡wicz Hacking GCP: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Wsparcie dla HackTricks</summary>

* SprawdÅº [**plany subskrypcyjne**](https://github.com/sponsors/carlospolop)!
* **DoÅ‚Ä…cz do** ğŸ’¬ [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegram**](https://t.me/peass) lub **Å›ledÅº** nas na **Twitterze** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Podziel siÄ™ sztuczkami hackingowymi, przesyÅ‚ajÄ…c PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repozytoriÃ³w github.

</details>
{% endhint %}
