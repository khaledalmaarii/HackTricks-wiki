# å‚æ•°æ±¡æŸ“

{% hint style="success" %}
å­¦ä¹ ä¸å®è·µ AWS é»‘å®¢æŠ€æœ¯ï¼š<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks åŸ¹è®­ AWS çº¢é˜Ÿä¸“å®¶ (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
å­¦ä¹ ä¸å®è·µ GCP é»‘å®¢æŠ€æœ¯ï¼š<img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks åŸ¹è®­ GCP çº¢é˜Ÿä¸“å®¶ (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>æ”¯æŒ HackTricks</summary>

* æŸ¥çœ‹ [**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**Telegram ç¾¤ç»„**](https://t.me/peass) æˆ– **å…³æ³¨** æˆ‘ä»¬çš„ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github ä»“åº“æäº¤ PR åˆ†äº«é»‘å®¢æŠ€å·§ã€‚

</details>
{% endhint %}

<figure><img src="https://pentest.eu/RENDER_WebSec_10fps_21sec_9MB_29042024.gif" alt=""><figcaption></figcaption></figure>

{% embed url="https://websec.nl/" %}


# HTTP å‚æ•°æ±¡æŸ“ (HPP) æ¦‚è¿°

HTTP å‚æ•°æ±¡æŸ“ (HPP) æ˜¯ä¸€ç§æŠ€æœ¯ï¼Œæ”»å‡»è€…é€šè¿‡æ“çºµ HTTP å‚æ•°ä»¥æ„æƒ³ä¸åˆ°çš„æ–¹å¼æ”¹å˜ Web åº”ç”¨ç¨‹åºçš„è¡Œä¸ºã€‚è¿™ç§æ“çºµæ˜¯é€šè¿‡æ·»åŠ ã€ä¿®æ”¹æˆ–é‡å¤ HTTP å‚æ•°æ¥å®ç°çš„ã€‚è¿™äº›æ“çºµçš„æ•ˆæœå¯¹ç”¨æˆ·å¹¶ä¸ç›´æ¥å¯è§ï¼Œä½†å¯ä»¥æ˜¾è‘—æ”¹å˜æœåŠ¡å™¨ç«¯åº”ç”¨ç¨‹åºçš„åŠŸèƒ½ï¼Œå¹¶åœ¨å®¢æˆ·ç«¯äº§ç”Ÿå¯è§‚å¯Ÿçš„å½±å“ã€‚

## HTTP å‚æ•°æ±¡æŸ“ (HPP) ç¤ºä¾‹

ä¸€ä¸ªé“¶è¡Œåº”ç”¨ç¨‹åºçš„äº¤æ˜“ URLï¼š

- **åŸå§‹ URL:** `https://www.victim.com/send/?from=accountA&to=accountB&amount=10000`

é€šè¿‡æ’å…¥ä¸€ä¸ªé¢å¤–çš„ `from` å‚æ•°ï¼š

- **æ“çºµåçš„ URL:** `https://www.victim.com/send/?from=accountA&to=accountB&amount=10000&from=accountC`

äº¤æ˜“å¯èƒ½é”™è¯¯åœ°ä» `accountA` æ”¶è´¹åˆ° `accountC`ï¼Œå±•ç¤ºäº† HPP æ“çºµäº¤æ˜“æˆ–å…¶ä»–åŠŸèƒ½ï¼ˆå¦‚å¯†ç é‡ç½®ã€åŒå› ç´ è®¤è¯è®¾ç½®æˆ– API å¯†é’¥è¯·æ±‚ï¼‰çš„æ½œåŠ›ã€‚

### **ç‰¹å®šæŠ€æœ¯çš„å‚æ•°è§£æ**

- å‚æ•°çš„è§£æå’Œä¼˜å…ˆçº§å–å†³äºåº•å±‚ Web æŠ€æœ¯ï¼Œå½±å“ HPP çš„åˆ©ç”¨æ–¹å¼ã€‚
- åƒ [Wappalyzer](https://addons.mozilla.org/en-US/firefox/addon/wappalyzer/) è¿™æ ·çš„å·¥å…·æœ‰åŠ©äºè¯†åˆ«è¿™äº›æŠ€æœ¯åŠå…¶è§£æè¡Œä¸ºã€‚

## PHP å’Œ HPP åˆ©ç”¨

**ä¸€æ¬¡æ€§å¯†ç  (OTP) æ“ä½œæ¡ˆä¾‹ï¼š**

- **èƒŒæ™¯ï¼š** ä¸€ä¸ªéœ€è¦ä¸€æ¬¡æ€§å¯†ç  (OTP) çš„ç™»å½•æœºåˆ¶è¢«åˆ©ç”¨ã€‚
- **æ–¹æ³•ï¼š** é€šè¿‡ä½¿ç”¨ Burp Suite ç­‰å·¥å…·æ‹¦æˆª OTP è¯·æ±‚ï¼Œæ”»å‡»è€…åœ¨ HTTP è¯·æ±‚ä¸­é‡å¤äº† `email` å‚æ•°ã€‚
- **ç»“æœï¼š** æœ¬åº”å‘é€åˆ°åˆå§‹ç”µå­é‚®ä»¶çš„ OTP è¢«å‘é€åˆ°æ“çºµè¯·æ±‚ä¸­æŒ‡å®šçš„ç¬¬äºŒä¸ªç”µå­é‚®ä»¶åœ°å€ã€‚è¿™ä¸ªç¼ºé™·å…è®¸é€šè¿‡ç»•è¿‡é¢„æœŸçš„å®‰å…¨æªæ–½è·å¾—æœªæˆæƒè®¿é—®ã€‚

è¿™ä¸ªåœºæ™¯çªæ˜¾äº†åº”ç”¨ç¨‹åºåç«¯çš„ä¸€ä¸ªå…³é”®ç–æ¼ï¼Œè¯¥åç«¯å¤„ç†ç¬¬ä¸€ä¸ª `email` å‚æ•°ä»¥ç”Ÿæˆ OTPï¼Œä½†ä½¿ç”¨æœ€åä¸€ä¸ªè¿›è¡Œå‘é€ã€‚

**API å¯†é’¥æ“çºµæ¡ˆä¾‹ï¼š**

- **åœºæ™¯ï¼š** ä¸€ä¸ªåº”ç”¨ç¨‹åºå…è®¸ç”¨æˆ·é€šè¿‡ä¸ªäººèµ„æ–™è®¾ç½®é¡µé¢æ›´æ–°ä»–ä»¬çš„ API å¯†é’¥ã€‚
- **æ”»å‡»å‘é‡ï¼š** æ”»å‡»è€…å‘ç°é€šè¿‡å‘ POST è¯·æ±‚é™„åŠ ä¸€ä¸ªé¢å¤–çš„ `api_key` å‚æ•°ï¼Œå¯ä»¥æ“çºµ API å¯†é’¥æ›´æ–°åŠŸèƒ½çš„ç»“æœã€‚
- **æŠ€æœ¯ï¼š** åˆ©ç”¨åƒ Burp Suite è¿™æ ·çš„å·¥å…·ï¼Œæ”»å‡»è€…æ„é€ ä¸€ä¸ªåŒ…å«ä¸¤ä¸ª `api_key` å‚æ•°çš„è¯·æ±‚ï¼šä¸€ä¸ªåˆæ³•çš„å’Œä¸€ä¸ªæ¶æ„çš„ã€‚æœåŠ¡å™¨åªå¤„ç†æœ€åä¸€ä¸ªå‡ºç°çš„å‚æ•°ï¼Œå°† API å¯†é’¥æ›´æ–°ä¸ºæ”»å‡»è€…æä¾›çš„å€¼ã€‚
- **ç»“æœï¼š** æ”»å‡»è€…æ§åˆ¶äº†å—å®³è€…çš„ API åŠŸèƒ½ï¼Œå¯èƒ½æœªç»æˆæƒè®¿é—®æˆ–ä¿®æ”¹ç§æœ‰æ•°æ®ã€‚

è¿™ä¸ªä¾‹å­è¿›ä¸€æ­¥å¼ºè°ƒäº†å®‰å…¨å‚æ•°å¤„ç†çš„å¿…è¦æ€§ï¼Œç‰¹åˆ«æ˜¯åœ¨åƒ API å¯†é’¥ç®¡ç†è¿™æ ·å…³é”®çš„åŠŸèƒ½ä¸­ã€‚

## å‚æ•°è§£æï¼šFlask ä¸ PHP

Web æŠ€æœ¯å¤„ç†é‡å¤ HTTP å‚æ•°çš„æ–¹å¼å„ä¸ç›¸åŒï¼Œå½±å“å…¶å¯¹ HPP æ”»å‡»çš„æ˜“å—æ€§ï¼š

- **Flaskï¼š** é‡‡ç”¨é‡åˆ°çš„ç¬¬ä¸€ä¸ªå‚æ•°å€¼ï¼Œä¾‹å¦‚åœ¨æŸ¥è¯¢å­—ç¬¦ä¸² `a=1&a=2` ä¸­ï¼Œä¼˜å…ˆè€ƒè™‘åˆå§‹å®ä¾‹è€Œéåç»­é‡å¤ã€‚
- **PHPï¼ˆåœ¨ Apache HTTP æœåŠ¡å™¨ä¸Šï¼‰ï¼š** ç›¸åï¼Œä¼˜å…ˆè€ƒè™‘æœ€åä¸€ä¸ªå‚æ•°å€¼ï¼Œåœ¨ç»™å®šç¤ºä¾‹ä¸­é€‰æ‹© `a=2`ã€‚è¿™ç§è¡Œä¸ºå¯èƒ½æ— æ„ä¸­é€šè¿‡ä¼˜å…ˆè€ƒè™‘æ”»å‡»è€…æ“çºµçš„å‚æ•°è€Œä¿ƒè¿› HPP åˆ©ç”¨ã€‚

## å‚è€ƒæ–‡çŒ®
* [https://medium.com/@shahjerry33/http-parameter-pollution-its-contaminated-85edc0805654](https://medium.com/@shahjerry33/http-parameter-pollution-its-contaminated-85edc0805654)
* [https://github.com/google/google-ctf/tree/master/2023/web-under-construction/solution](https://github.com/google/google-ctf/tree/master/2023/web-under-construction/solution)

<figure><img src="https://pentest.eu/RENDER_WebSec_10fps_21sec_9MB_29042024.gif" alt=""><figcaption></figcaption></figure>

{% embed url="https://websec.nl/" %}


{% hint style="success" %}
å­¦ä¹ ä¸å®è·µ AWS é»‘å®¢æŠ€æœ¯ï¼š<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks åŸ¹è®­ AWS çº¢é˜Ÿä¸“å®¶ (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
å­¦ä¹ ä¸å®è·µ GCP é»‘å®¢æŠ€æœ¯ï¼š<img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks åŸ¹è®­ GCP çº¢é˜Ÿä¸“å®¶ (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>æ”¯æŒ HackTricks</summary>

* æŸ¥çœ‹ [**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**Telegram ç¾¤ç»„**](https://t.me/peass) æˆ– **å…³æ³¨** æˆ‘ä»¬çš„ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github ä»“åº“æäº¤ PR åˆ†äº«é»‘å®¢æŠ€å·§ã€‚

</details>
{% endhint %}
