# é˜»æ­¢ä¸»é¡µé¢ä»¥çªƒå– postmessage

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>â˜ï¸ HackTricks Cloud â˜ï¸</strong></a> - <a href="https://twitter.com/hacktricks_live"><strong>ğŸ¦ Twitter ğŸ¦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ğŸ™ï¸ Twitch ğŸ™ï¸</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ğŸ¥ Youtube ğŸ¥</strong></a></summary>

* æ‚¨åœ¨**ç½‘ç»œå®‰å…¨å…¬å¸**å·¥ä½œå—ï¼Ÿ æƒ³è¦çœ‹åˆ°æ‚¨çš„**å…¬å¸åœ¨ HackTricks ä¸­è¢«å¹¿å‘Š**å—ï¼Ÿ æˆ–è€…æ‚¨æƒ³è¦è®¿é—®**PEASS çš„æœ€æ–°ç‰ˆæœ¬æˆ–ä¸‹è½½ HackTricks çš„ PDF**å—ï¼Ÿ è¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼
* å‘ç°æˆ‘ä»¬çš„ç‹¬å®¶[**NFTs**](https://opensea.io/collection/the-peass-family)æ”¶è—å“[**The PEASS Family**](https://opensea.io/collection/the-peass-family)
* è·å–[**å®˜æ–¹ PEASS & HackTricks å•†å“**](https://peass.creator-spring.com)
* **åŠ å…¥** [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) **Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**ç”µæŠ¥ç¾¤ç»„**](https://t.me/peass) æˆ– **å…³æ³¨**æˆ‘çš„ **Twitter** ğŸ¦[**@carlospolopm**](https://twitter.com/hacktricks_live)**ã€‚**
* **é€šè¿‡å‘ [hacktricks ä»“åº“](https://github.com/carlospolop/hacktricks) å’Œ [hacktricks-cloud ä»“åº“](https://github.com/carlospolop/hacktricks-cloud) æäº¤ PR æ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§**ã€‚

</details>

## ä½¿ç”¨ iframe èµ¢å¾— RC

æ ¹æ®è¿™ä¸ª[**Terjanq çš„è§£è¯´**](https://gist.github.com/terjanq/7c1a71b83db5e02253c218765f96a710)ï¼Œä»ç©ºæºåˆ›å»ºçš„ blob æ–‡æ¡£è¢«éš”ç¦»ä»¥è·å¾—å®‰å…¨æ€§å¥½å¤„ï¼Œè¿™æ„å‘³ç€å¦‚æœæ‚¨è®©ä¸»é¡µé¢ä¿æŒç¹å¿™çŠ¶æ€ï¼Œiframe é¡µé¢å°†è¢«æ‰§è¡Œã€‚

åŸºæœ¬ä¸Šï¼Œåœ¨è¿™ä¸ªæŒ‘æˆ˜ä¸­ï¼Œ**ä¸€ä¸ªéš”ç¦»çš„ iframe è¢«æ‰§è¡Œ**ï¼Œå¹¶ä¸”**åŠ è½½å®Œæˆå**ï¼Œ**çˆ¶é¡µé¢**å°†**å‘é€ä¸€ä¸ªå¸¦æœ‰æ ‡å¿—çš„ post æ¶ˆæ¯**ã€‚\
ç„¶è€Œï¼Œè¯¥ postmessage é€šä¿¡**å®¹æ˜“å—åˆ° XSS æ”»å‡»**ï¼ˆ**iframe** å¯ä»¥æ‰§è¡Œ JS ä»£ç ï¼‰ã€‚

å› æ­¤ï¼Œæ”»å‡»è€…çš„ç›®æ ‡æ˜¯**è®©çˆ¶é¡µé¢åˆ›å»º iframe**ï¼Œä½†åœ¨**çˆ¶é¡µé¢å‘é€æ•æ„Ÿæ•°æ®ï¼ˆæ ‡å¿—ï¼‰ä¹‹å‰**ï¼Œè®©**çˆ¶é¡µé¢ä¿æŒç¹å¿™**å¹¶å°†**è´Ÿè½½å‘é€åˆ° iframe**ã€‚åœ¨**çˆ¶é¡µé¢å¿™ç¢Œ**æ—¶ï¼Œ**iframe æ‰§è¡Œè´Ÿè½½**ï¼Œè¿™å°†æ˜¯ä¸€äº› JS ä»£ç ï¼Œå°†ç›‘å¬**çˆ¶ postmessage æ¶ˆæ¯å¹¶æ³„æ¼æ ‡å¿—**ã€‚\
æœ€åï¼Œiframe æ‰§è¡Œäº†è´Ÿè½½ï¼Œçˆ¶é¡µé¢åœæ­¢å¿™ç¢Œï¼Œå› æ­¤å‘é€æ ‡å¿—ï¼Œè´Ÿè½½æ³„æ¼äº†å®ƒã€‚

ä½†æ˜¯ï¼Œæ‚¨å¦‚ä½•è®©çˆ¶é¡µé¢åœ¨ç”Ÿæˆ iframe å**ç«‹å³ä¿æŒç¹å¿™ï¼Œå¹¶åœ¨ç­‰å¾… iframe å‡†å¤‡å¥½å‘é€æ•æ„Ÿæ•°æ®æ—¶**ï¼ŸåŸºæœ¬ä¸Šï¼Œæ‚¨éœ€è¦æ‰¾åˆ°**å¼‚æ­¥æ“ä½œ**ï¼Œæ‚¨å¯ä»¥è®©çˆ¶é¡µé¢**æ‰§è¡Œ**ã€‚ä¾‹å¦‚ï¼Œåœ¨è¯¥æŒ‘æˆ˜ä¸­ï¼Œçˆ¶é¡µé¢æ­£åœ¨**ç›‘å¬**åƒè¿™æ ·çš„**postmessages**ï¼š
```javascript
window.addEventListener('message', (e) => {
if (e.data == 'blob loaded') {
$("#previewModal").modal();
}
});
```
å› æ­¤ï¼Œå¯ä»¥å‘é€ä¸€ä¸ª**å¤§æ•´æ•°åœ¨postmessageä¸­**ï¼Œåœ¨æ¯”è¾ƒæ—¶ä¼šè¢«**è½¬æ¢ä¸ºå­—ç¬¦ä¸²**ï¼Œè¿™å°†éœ€è¦ä¸€äº›æ—¶é—´ï¼š
```bash
const buffer = new Uint8Array(1e7);
win?.postMessage(buffer, '*', [buffer.buffer]);
```
ä¸ºäº†å‡†ç¡®åœ°åœ¨**iframe**åˆ›å»ºåä½†åœ¨å…¶å‡†å¤‡å¥½æ¥æ”¶æ¥è‡ªçˆ¶çº§çš„æ•°æ®ä¹‹å‰**å‘é€**è¯¥**postmessage**ï¼Œæ‚¨éœ€è¦**é€šè¿‡`setTimeout`çš„æ¯«ç§’æ•°è¿›è¡Œè°ƒæ•´**ã€‚

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>â˜ï¸ HackTricks Cloud â˜ï¸</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ğŸ¦ Twitter ğŸ¦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ğŸ™ï¸ Twitch ğŸ™ï¸</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ğŸ¥ Youtube ğŸ¥</strong></a></summary>

* æ‚¨åœ¨**ç½‘ç»œå®‰å…¨å…¬å¸**å·¥ä½œå—ï¼Ÿ æƒ³è¦çœ‹åˆ°æ‚¨çš„**å…¬å¸åœ¨HackTricksä¸­è¢«å®£ä¼ **å—ï¼Ÿ æˆ–è€…æ‚¨æƒ³è¦è®¿é—®**PEASSçš„æœ€æ–°ç‰ˆæœ¬æˆ–ä¸‹è½½HackTricksçš„PDF**å—ï¼Ÿ è¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* å‘ç°æˆ‘ä»¬çš„ç‹¬å®¶[NFTs](https://opensea.io/collection/the-peass-family)æ”¶è—å“[**The PEASS Family**](https://opensea.io/collection/the-peass-family)
* è·å–[**å®˜æ–¹PEASS & HackTrickså‘¨è¾¹**](https://peass.creator-spring.com)
* **åŠ å…¥**[**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discordç¾¤**](https://discord.gg/hRep4RUj7f)æˆ–[**ç”µæŠ¥ç¾¤**](https://t.me/peass)æˆ–åœ¨**Twitter**ä¸Šå…³æ³¨æˆ‘ ğŸ¦[**@carlospolopm**](https://twitter.com/hacktricks_live)**ã€‚**
* **é€šè¿‡å‘[hacktricks repo](https://github.com/carlospolop/hacktricks)å’Œ[hacktricks-cloud repo](https://github.com/carlospolop/hacktricks-cloud)æäº¤PRæ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§**ã€‚

</details>
