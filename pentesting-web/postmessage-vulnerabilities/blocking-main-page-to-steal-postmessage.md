# é˜»å¡ä¸»é¡µé¢ä»¥çªƒå–postmessage

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>â˜ï¸ HackTricksäº‘ â˜ï¸</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ğŸ¦ æ¨ç‰¹ ğŸ¦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ğŸ™ï¸ Twitch ğŸ™ï¸</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ğŸ¥ Youtube ğŸ¥</strong></a></summary>

* ä½ åœ¨ä¸€å®¶**ç½‘ç»œå®‰å…¨å…¬å¸**å·¥ä½œå—ï¼Ÿæƒ³è¦åœ¨HackTricksä¸­çœ‹åˆ°ä½ çš„**å…¬å¸å¹¿å‘Š**å—ï¼Ÿæˆ–è€…ä½ æƒ³è¦**è·å–PEASSçš„æœ€æ–°ç‰ˆæœ¬æˆ–ä¸‹è½½HackTricksçš„PDF**å—ï¼Ÿè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼
* å‘ç°æˆ‘ä»¬çš„ç‹¬å®¶[**NFTs**](https://opensea.io/collection/the-peass-family)æ”¶è—å“[**The PEASS Family**](https://opensea.io/collection/the-peass-family)
* è·å–[**å®˜æ–¹PEASSå’ŒHackTrickså‘¨è¾¹äº§å“**](https://peass.creator-spring.com)
* **åŠ å…¥**[**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discordç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ–è€… [**Telegramç¾¤ç»„**](https://t.me/peass) æˆ–è€…**å…³æ³¨**æˆ‘åœ¨**Twitter**ä¸Šçš„[**ğŸ¦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks_live)**ã€‚**
* **é€šè¿‡å‘[hacktricks repo](https://github.com/carlospolop/hacktricks)å’Œ[hacktricks-cloud repo](https://github.com/carlospolop/hacktricks-cloud)æäº¤PRæ¥åˆ†äº«ä½ çš„é»‘å®¢æŠ€å·§**ã€‚

</details>

## ä½¿ç”¨Iframesèµ¢å¾—RCs

æ ¹æ®è¿™ä¸ª[**Terjanqçš„è§£æ**](https://gist.github.com/terjanq/7c1a71b83db5e02253c218765f96a710)ï¼Œä»ç©ºæºåˆ›å»ºçš„blobæ–‡æ¡£æ˜¯ä¸ºäº†å®‰å…¨èµ·è§è€Œè¢«éš”ç¦»çš„ï¼Œè¿™æ„å‘³ç€å¦‚æœä½ ä¿æŒä¸»é¡µé¢ç¹å¿™ï¼Œiframeé¡µé¢å°†ä¼šè¢«æ‰§è¡Œã€‚

åŸºæœ¬ä¸Šï¼Œåœ¨è¿™ä¸ªæŒ‘æˆ˜ä¸­ï¼Œä¸€ä¸ª**è¢«éš”ç¦»çš„iframeè¢«æ‰§è¡Œ**ï¼Œå¹¶ä¸”åœ¨å®ƒ**åŠ è½½å®Œæ¯•å**ï¼Œ**çˆ¶é¡µé¢**å°†ä¼š**å‘é€ä¸€ä¸ªå¸¦æœ‰æ ‡å¿—çš„postæ¶ˆæ¯**ã€‚\
ç„¶è€Œï¼Œè¿™ç§postmessageé€šä¿¡æ˜¯**å®¹æ˜“å—åˆ°XSSæ”»å‡»**çš„ï¼ˆ**iframe**å¯ä»¥æ‰§è¡ŒJSä»£ç ï¼‰ã€‚

å› æ­¤ï¼Œæ”»å‡»è€…çš„ç›®æ ‡æ˜¯è®©**çˆ¶é¡µé¢åˆ›å»ºiframe**ï¼Œä½†æ˜¯åœ¨**çˆ¶é¡µé¢å‘é€æ•æ„Ÿæ•°æ®ï¼ˆæ ‡å¿—ï¼‰ä¹‹å‰**ï¼Œè®©**çˆ¶é¡µé¢ä¿æŒç¹å¿™**å¹¶å°†**æœ‰æ•ˆè½½è·å‘é€åˆ°iframe**ã€‚è€Œ**çˆ¶é¡µé¢å¿™ç¢Œ**æ—¶ï¼Œ**iframeæ‰§è¡Œæœ‰æ•ˆè½½è·**ï¼Œè¯¥æœ‰æ•ˆè½½è·å°†æ˜¯ä¸€äº›ç›‘å¬**çˆ¶é¡µé¢postmessageæ¶ˆæ¯å¹¶æ³„éœ²æ ‡å¿—**çš„JSä»£ç ã€‚\
æœ€åï¼Œiframeæ‰§è¡Œäº†æœ‰æ•ˆè½½è·ï¼Œçˆ¶é¡µé¢åœæ­¢å¿™ç¢Œï¼Œæ‰€ä»¥å®ƒå‘é€äº†æ ‡å¿—ï¼Œè€Œæœ‰æ•ˆè½½è·æ³„éœ²äº†å®ƒã€‚

ä½†æ˜¯ï¼Œä½ å¦‚ä½•è®©çˆ¶é¡µé¢åœ¨ç”Ÿæˆiframeå**ç«‹å³å¿™ç¢Œ**ï¼Œå¹¶ä¸”åªåœ¨ç­‰å¾…iframeå‡†å¤‡å¥½å‘é€æ•æ„Ÿæ•°æ®æ—¶å¿™ç¢Œå‘¢ï¼ŸåŸºæœ¬ä¸Šï¼Œä½ éœ€è¦æ‰¾åˆ°**å¼‚æ­¥æ“ä½œ**ï¼Œä½ å¯ä»¥è®©çˆ¶é¡µé¢**æ‰§è¡Œ**ã€‚ä¾‹å¦‚ï¼Œåœ¨è¿™ä¸ªæŒ‘æˆ˜ä¸­ï¼Œçˆ¶é¡µé¢æ­£åœ¨ç›‘å¬åƒè¿™æ ·çš„postmessageï¼š
```javascript
window.addEventListener('message', (e) => {
if (e.data == 'blob loaded') {
$("#previewModal").modal();
}
});
```
æ‰€ä»¥å¯ä»¥å‘é€ä¸€ä¸ª**å¤§æ•´æ•°çš„ postmessage**ï¼Œåœ¨æ¯”è¾ƒæ—¶ä¼šå°†å…¶**è½¬æ¢ä¸ºå­—ç¬¦ä¸²**ï¼Œè¿™å°†éœ€è¦ä¸€äº›æ—¶é—´ï¼š
```bash
const buffer = new Uint8Array(1e7);
win?.postMessage(buffer, '*', [buffer.buffer]);
```
ä¸ºäº†å‡†ç¡®åœ°åœ¨iframeåˆ›å»ºåä½†å°šæœªå‡†å¤‡å¥½æ¥æ”¶æ¥è‡ªçˆ¶çº§çš„æ•°æ®æ—¶å‘é€postmessageï¼Œæ‚¨éœ€è¦ä½¿ç”¨`setTimeout`çš„æ¯«ç§’æ•°è¿›è¡Œè°ƒæ•´ã€‚

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>â˜ï¸ HackTricksäº‘ â˜ï¸</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ğŸ¦ æ¨ç‰¹ ğŸ¦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ğŸ™ï¸ Twitch ğŸ™ï¸</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ğŸ¥ YouTube ğŸ¥</strong></a></summary>

* æ‚¨åœ¨ä¸€å®¶**ç½‘ç»œå®‰å…¨å…¬å¸**å·¥ä½œå—ï¼Ÿæ‚¨æƒ³åœ¨HackTricksä¸­çœ‹åˆ°æ‚¨çš„**å…¬å¸å¹¿å‘Š**å—ï¼Ÿæˆ–è€…æ‚¨æƒ³è·å¾—**PEASSçš„æœ€æ–°ç‰ˆæœ¬æˆ–ä¸‹è½½PDFæ ¼å¼çš„HackTricks**å—ï¼Ÿè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼
* å‘ç°æˆ‘ä»¬çš„ç‹¬å®¶[**NFTs**](https://opensea.io/collection/the-peass-family)æ”¶è—å“-[**The PEASS Family**](https://opensea.io/collection/the-peass-family)
* è·å–[**å®˜æ–¹PEASSå’ŒHackTrickså‘¨è¾¹äº§å“**](https://peass.creator-spring.com)
* **åŠ å…¥**[**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discordç¾¤ç»„**](https://discord.gg/hRep4RUj7f)æˆ–[**ç”µæŠ¥ç¾¤ç»„**](https://t.me/peass)ï¼Œæˆ–åœ¨**Twitter**ä¸Š**å…³æ³¨**æˆ‘[**ğŸ¦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks_live)**ã€‚**
* **é€šè¿‡å‘[hacktricks repo](https://github.com/carlospolop/hacktricks)å’Œ[hacktricks-cloud repo](https://github.com/carlospolop/hacktricks-cloud)æäº¤PRæ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§**ã€‚

</details>
