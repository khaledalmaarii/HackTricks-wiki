<details>

<summary><strong>Naucz siÄ™ hakowaÄ‡ AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Inne sposoby wsparcia HackTricks:

* JeÅ›li chcesz zobaczyÄ‡ swojÄ… **firmÄ™ reklamowanÄ… w HackTricks** lub **pobraÄ‡ HackTricks w formacie PDF**, sprawdÅº [**PLAN SUBSKRYPCJI**](https://github.com/sponsors/carlospolop)!
* ZdobÄ…dÅº [**oficjalne gadÅ¼ety PEASS & HackTricks**](https://peass.creator-spring.com)
* Odkryj [**RodzinÄ™ PEASS**](https://opensea.io/collection/the-peass-family), naszÄ… kolekcjÄ™ ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* **DoÅ‚Ä…cz do** ğŸ’¬ [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **Å›ledÅº** nas na **Twitterze** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Podziel siÄ™ swoimi sztuczkami hakerskimi, przesyÅ‚ajÄ…c PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>

### DuÅ¼e obiekty PostgreSQL

PostgreSQL oferuje strukturÄ™ znana jako **duÅ¼e obiekty**, dostÄ™pne za poÅ›rednictwem tabeli `pg_largeobject`, przeznaczonÄ… do przechowywania duÅ¼ych typÃ³w danych, takich jak obrazy lub dokumenty PDF. Ten podejÅ›cie jest korzystne w porÃ³wnaniu do funkcji `COPY TO`, poniewaÅ¼ umoÅ¼liwia **eksportowanie danych z powrotem do systemu plikÃ³w**, zapewniajÄ…c dokÅ‚adnÄ… replikÄ™ oryginalnego pliku.

Aby **przechowaÄ‡ kompletny plik** w tej tabeli, naleÅ¼y utworzyÄ‡ obiekt w tabeli `pg_largeobject` (zidentyfikowany przez LOID), a nastÄ™pnie wstawiÄ‡ do tego obiektu kawaÅ‚ki danych o rozmiarze 2KB. WaÅ¼ne jest, aby te kawaÅ‚ki miaÅ‚y dokÅ‚adnie 2KB (z moÅ¼liwym wyjÄ…tkiem ostatniego kawaÅ‚ka), aby funkcja eksportujÄ…ca dziaÅ‚aÅ‚a poprawnie.

Aby **podzieliÄ‡ swoje dane binarne** na kawaÅ‚ki o rozmiarze 2KB, moÅ¼na wykonaÄ‡ nastÄ™pujÄ…ce polecenia:
```bash
split -b 2048 your_file # Creates 2KB sized files
```
Aby zakodowaÄ‡ kaÅ¼dy plik w formacie Base64 lub Hex, moÅ¼na uÅ¼yÄ‡ poniÅ¼szych poleceÅ„:
```bash
base64 -w 0 <Chunk_file> # Encodes in Base64 in one line
xxd -ps -c 99999999999 <Chunk_file> # Encodes in Hex in one line
```
**WaÅ¼ne**: AutomatyzujÄ…c ten proces, upewnij siÄ™, Å¼e wysyÅ‚asz fragmenty o rozmiarze 2 KB zwykÅ‚ych bajtÃ³w. Pliki kodowane w formacie szesnastkowym bÄ™dÄ… wymagaÅ‚y 4 KB danych na fragment ze wzglÄ™du na podwojenie rozmiaru, podczas gdy pliki kodowane w formacie Base64 bÄ™dÄ… podlegaÄ‡ wzorcowi `ceil(n / 3) * 4`.

ZawartoÅ›Ä‡ duÅ¼ych obiektÃ³w moÅ¼na przeglÄ…daÄ‡ w celach debugowania za pomocÄ…:
```sql
select loid, pageno, encode(data, 'escape') from pg_largeobject;
```
#### UÅ¼ywanie `lo_creat` i Base64

Aby przechowywaÄ‡ dane binarne, najpierw tworzony jest LOID:
```sql
SELECT lo_creat(-1);       -- Creates a new, empty large object
SELECT lo_create(173454);  -- Attempts to create a large object with a specific OID
```
W sytuacjach wymagajÄ…cych precyzyjnej kontroli, takich jak wykorzystanie Blind SQL Injection, preferowane jest uÅ¼ycie `lo_create` do okreÅ›lenia staÅ‚ego LOID.

KawaÅ‚ki danych mogÄ… byÄ‡ nastÄ™pnie wstawiane w nastÄ™pujÄ…cy sposÃ³b:
```sql
INSERT INTO pg_largeobject (loid, pageno, data) VALUES (173454, 0, decode('<B64 chunk1>', 'base64'));
INSERT INTO pg_largeobject (loid, pageno, data) VALUES (173454, 1, decode('<B64 chunk2>', 'base64'));

```
Aby wyeksportowaÄ‡ i ewentualnie usunÄ…Ä‡ duÅ¼y obiekt po uÅ¼yciu:
```sql
SELECT lo_export(173454, '/tmp/your_file');
SELECT lo_unlink(173454);  -- Deletes the specified large object
```
#### UÅ¼ywanie `lo_import` i Hex

FunkcjÄ™ `lo_import` moÅ¼na wykorzystaÄ‡ do utworzenia i okreÅ›lenia LOID dla duÅ¼ego obiektu:
```sql
select lo_import('/path/to/file');
select lo_import('/path/to/file', 173454);
```
Po utworzeniu obiektu, dane sÄ… wstawiane na stronÄ™, upewniajÄ…c siÄ™, Å¼e kaÅ¼dy fragment nie przekracza 2KB:
```sql
update pg_largeobject set data=decode('<HEX>', 'hex') where loid=173454 and pageno=0;
update pg_largeobject set data=decode('<HEX>', 'hex') where loid=173454 and pageno=1;
```
Aby zakoÅ„czyÄ‡ proces, dane sÄ… eksportowane, a duÅ¼y obiekt jest usuwany:
```sql
select lo_export(173454, '/path/to/your_file');
select lo_unlink(173454);  -- Deletes the specified large object
```
### Ograniczenia

ZauwaÅ¼ono, Å¼e **duÅ¼e obiekty mogÄ… mieÄ‡ listy ACL** (Access Control Lists), ktÃ³re potencjalnie ograniczajÄ… dostÄ™p nawet do obiektÃ³w utworzonych przez twojego uÅ¼ytkownika. Jednak starsze obiekty z przyzwoitymi listami ACL mogÄ… nadal byÄ‡ dostÄ™pne do wycieku treÅ›ci. 

<details>

<summary><strong>Naucz siÄ™ hakowaÄ‡ AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Inne sposoby wsparcia HackTricks:

* JeÅ›li chcesz zobaczyÄ‡ swojÄ… **firmÄ™ reklamowanÄ… w HackTricks** lub **pobraÄ‡ HackTricks w formacie PDF**, sprawdÅº [**PLAN SUBSKRYPCJI**](https://github.com/sponsors/carlospolop)!
* ZdobÄ…dÅº [**oficjalne gadÅ¼ety PEASS & HackTricks**](https://peass.creator-spring.com)
* Odkryj [**RodzinÄ™ PEASS**](https://opensea.io/collection/the-peass-family), naszÄ… kolekcjÄ™ ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* **DoÅ‚Ä…cz do** ğŸ’¬ [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **Å›ledÅº** nas na **Twitterze** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Podziel siÄ™ swoimi sztuczkami hakerskimi, przesyÅ‚ajÄ…c PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repozytoriÃ³w github.

</details>
