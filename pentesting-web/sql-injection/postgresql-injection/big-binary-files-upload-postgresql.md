{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

### PostgreSQL BÃ¼yÃ¼k Nesneler

PostgreSQL, bÃ¼yÃ¼k veri tÃ¼rlerini, Ã¶rneÄŸin resimler veya PDF belgeleri gibi, depolamak iÃ§in tasarlanmÄ±ÅŸ **bÃ¼yÃ¼k nesneler** olarak bilinen bir yapÄ± sunar ve bu nesnelere `pg_largeobject` tablosu aracÄ±lÄ±ÄŸÄ±yla eriÅŸilir. Bu yaklaÅŸÄ±m, **verilerin dosya sistemine geri aktarÄ±mÄ±nÄ±** saÄŸladÄ±ÄŸÄ± iÃ§in `COPY TO` iÅŸlevine gÃ¶re avantajlÄ±dÄ±r ve orijinal dosyanÄ±n tam bir kopyasÄ±nÄ±n korunmasÄ±nÄ± garanti eder.

Bu tabloda **tam bir dosya depolamak** iÃ§in, `pg_largeobject` tablosunda bir nesne oluÅŸturulmalÄ± (bir LOID ile tanÄ±mlanÄ±r) ve ardÄ±ndan bu nesneye her biri 2KB boyutunda veri parÃ§alarÄ± eklenmelidir. Bu parÃ§alarÄ±n tam olarak 2KB boyutunda olmasÄ± (son parÃ§anÄ±n istisna olabileceÄŸi durumlar hariÃ§) Ã¶nemlidir, bÃ¶ylece dÄ±ÅŸa aktarma iÅŸlevi doÄŸru Ã§alÄ±ÅŸÄ±r.

**Ä°kili verilerinizi** 2KB parÃ§alarÄ±na **bÃ¶lmek iÃ§in** aÅŸaÄŸÄ±daki komutlar Ã§alÄ±ÅŸtÄ±rÄ±labilir:
```bash
split -b 2048 your_file # Creates 2KB sized files
```
Her dosyayÄ± Base64 veya Hex'e kodlamak iÃ§in aÅŸaÄŸÄ±daki komutlar kullanÄ±labilir:
```bash
base64 -w 0 <Chunk_file> # Encodes in Base64 in one line
xxd -ps -c 99999999999 <Chunk_file> # Encodes in Hex in one line
```
**Ã–nemli**: Bu sÃ¼reci otomatikleÅŸtirirken, 2KB'lÄ±k aÃ§Ä±k metin baytlarÄ± parÃ§alarÄ± gÃ¶ndermeyi garanti edin. Hex kodlu dosyalar, boyutun iki katÄ±na Ã§Ä±kmasÄ± nedeniyle her parÃ§a iÃ§in 4KB veri gerektirecektir, Base64 kodlu dosyalar ise `ceil(n / 3) * 4` formÃ¼lÃ¼nÃ¼ takip eder.

BÃ¼yÃ¼k nesnelerin iÃ§eriÄŸi, hata ayÄ±klama amaÃ§larÄ± iÃ§in ÅŸu ÅŸekilde gÃ¶rÃ¼ntÃ¼lenebilir:
```sql
select loid, pageno, encode(data, 'escape') from pg_largeobject;
```
#### Using `lo_creat` & Base64

Ä°kili verileri depolamak iÃ§in Ã¶nce bir LOID oluÅŸturulur:
```sql
SELECT lo_creat(-1);       -- Creates a new, empty large object
SELECT lo_create(173454);  -- Attempts to create a large object with a specific OID
```
Hassas kontrol gerektiren durumlarda, Ã¶rneÄŸin Blind SQL Injection istismarÄ±nda, sabit bir LOID belirtmek iÃ§in `lo_create` tercih edilir.

Veri parÃ§alarÄ± daha sonra ÅŸu ÅŸekilde eklenebilir:
```sql
INSERT INTO pg_largeobject (loid, pageno, data) VALUES (173454, 0, decode('<B64 chunk1>', 'base64'));
INSERT INTO pg_largeobject (loid, pageno, data) VALUES (173454, 1, decode('<B64 chunk2>', 'base64'));

```
BÃ¼yÃ¼k nesneyi kullanÄ±mdan sonra dÄ±ÅŸa aktarmak ve potansiyel olarak silmek iÃ§in:
```sql
SELECT lo_export(173454, '/tmp/your_file');
SELECT lo_unlink(173454);  -- Deletes the specified large object
```
#### `lo_import` ve Hex KullanÄ±mÄ±

`lo_import` fonksiyonu, bÃ¼yÃ¼k bir nesne iÃ§in bir LOID oluÅŸturmak ve belirtmek iÃ§in kullanÄ±labilir:
```sql
select lo_import('/path/to/file');
select lo_import('/path/to/file', 173454);
```
OluÅŸturma iÅŸleminden sonra, her sayfa iÃ§in veri eklenir ve her parÃ§a 2KB'yi aÅŸmaz:
```sql
update pg_largeobject set data=decode('<HEX>', 'hex') where loid=173454 and pageno=0;
update pg_largeobject set data=decode('<HEX>', 'hex') where loid=173454 and pageno=1;
```
Veri aktarÄ±mÄ±nÄ± tamamlamak iÃ§in, veriler dÄ±ÅŸa aktarÄ±lÄ±r ve bÃ¼yÃ¼k nesne silinir:
```sql
select lo_export(173454, '/path/to/your_file');
select lo_unlink(173454);  -- Deletes the specified large object
```
### Limitations

**BÃ¼yÃ¼k nesnelerin ACL'leri** (EriÅŸim Kontrol Listeleri) olabileceÄŸi belirtilmiÅŸtir, bu da kullanÄ±cÄ± tarafÄ±ndan oluÅŸturulan nesnelere bile eriÅŸimi kÄ±sÄ±tlayabilir. Ancak, izin verici ACL'lere sahip eski nesneler hala iÃ§erik sÄ±zdÄ±rma iÃ§in eriÅŸilebilir olabilir. 

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
