{% hint style="success" %}
å­¦ä¹ ä¸å®è·µ AWS é»‘å®¢æŠ€æœ¯ï¼š<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks åŸ¹è®­ AWS çº¢é˜Ÿä¸“å®¶ (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
å­¦ä¹ ä¸å®è·µ GCP é»‘å®¢æŠ€æœ¯ï¼š<img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks åŸ¹è®­ GCP çº¢é˜Ÿä¸“å®¶ (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>æ”¯æŒ HackTricks</summary>

* æŸ¥çœ‹ [**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**Telegram ç¾¤ç»„**](https://t.me/peass) æˆ– **å…³æ³¨** æˆ‘ä»¬çš„ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub ä»“åº“æäº¤ PR æ¥åˆ†äº«é»‘å®¢æŠ€å·§ã€‚

</details>
{% endhint %}

### PostgreSQL å¤§å¯¹è±¡

PostgreSQL æä¾›äº†ä¸€ç§ç§°ä¸º **å¤§å¯¹è±¡** çš„ç»“æ„ï¼Œé€šè¿‡ `pg_largeobject` è¡¨è®¿é—®ï¼Œæ—¨åœ¨å­˜å‚¨å¤§æ•°æ®ç±»å‹ï¼Œå¦‚å›¾åƒæˆ– PDF æ–‡æ¡£ã€‚è¿™ç§æ–¹æ³•ç›¸è¾ƒäº `COPY TO` å‡½æ•°å…·æœ‰ä¼˜åŠ¿ï¼Œå› ä¸ºå®ƒèƒ½å¤Ÿ **å°†æ•°æ®å¯¼å‡ºå›æ–‡ä»¶ç³»ç»Ÿ**ï¼Œç¡®ä¿åŸå§‹æ–‡ä»¶çš„ç²¾ç¡®å‰¯æœ¬å¾—ä»¥ä¿ç•™ã€‚

è¦åœ¨æ­¤è¡¨ä¸­ **å­˜å‚¨å®Œæ•´æ–‡ä»¶**ï¼Œå¿…é¡»åœ¨ `pg_largeobject` è¡¨ä¸­åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼ˆé€šè¿‡ LOID è¯†åˆ«ï¼‰ï¼Œç„¶åå°†æ¯ä¸ª 2KB å¤§å°çš„æ•°æ®å—æ’å…¥åˆ°è¯¥å¯¹è±¡ä¸­ã€‚ç¡®ä¿è¿™äº›å—çš„å¤§å°æ°å¥½ä¸º 2KBï¼ˆæœ€åä¸€ä¸ªå—å¯èƒ½ä¾‹å¤–ï¼‰æ˜¯è‡³å…³é‡è¦çš„ï¼Œä»¥ç¡®ä¿å¯¼å‡ºåŠŸèƒ½æ­£å¸¸è¿è¡Œã€‚

è¦ **å°†äºŒè¿›åˆ¶æ•°æ®** åˆ†å‰²ä¸º 2KB å—ï¼Œå¯ä»¥æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š
```bash
split -b 2048 your_file # Creates 2KB sized files
```
å¯¹äºå°†æ¯ä¸ªæ–‡ä»¶ç¼–ç ä¸º Base64 æˆ– Hexï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š
```bash
base64 -w 0 <Chunk_file> # Encodes in Base64 in one line
xxd -ps -c 99999999999 <Chunk_file> # Encodes in Hex in one line
```
**é‡è¦**ï¼šåœ¨è‡ªåŠ¨åŒ–æ­¤è¿‡ç¨‹æ—¶ï¼Œè¯·ç¡®ä¿å‘é€2KBçš„æ˜æ–‡å­—èŠ‚å—ã€‚ç”±äºå¤§å°ç¿»å€ï¼Œåå…­è¿›åˆ¶ç¼–ç çš„æ–‡ä»¶æ¯ä¸ªå—å°†éœ€è¦4KBçš„æ•°æ®ï¼Œè€ŒBase64ç¼–ç çš„æ–‡ä»¶éµå¾ªå…¬å¼`ceil(n / 3) * 4`ã€‚

å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹å¤§å¯¹è±¡çš„å†…å®¹ä»¥è¿›è¡Œè°ƒè¯•ï¼š
```sql
select loid, pageno, encode(data, 'escape') from pg_largeobject;
```
#### ä½¿ç”¨ `lo_creat` å’Œ Base64

è¦å­˜å‚¨äºŒè¿›åˆ¶æ•°æ®ï¼Œé¦–å…ˆåˆ›å»ºä¸€ä¸ª LOIDï¼š
```sql
SELECT lo_creat(-1);       -- Creates a new, empty large object
SELECT lo_create(173454);  -- Attempts to create a large object with a specific OID
```
åœ¨éœ€è¦ç²¾ç¡®æ§åˆ¶çš„æƒ…å†µä¸‹ï¼Œä¾‹å¦‚åˆ©ç”¨ç›²SQLæ³¨å…¥ï¼Œ`lo_create`æ›´é€‚åˆç”¨äºæŒ‡å®šå›ºå®šçš„LOIDã€‚

æ•°æ®å—å¯ä»¥å¦‚ä¸‹æ’å…¥ï¼š
```sql
INSERT INTO pg_largeobject (loid, pageno, data) VALUES (173454, 0, decode('<B64 chunk1>', 'base64'));
INSERT INTO pg_largeobject (loid, pageno, data) VALUES (173454, 1, decode('<B64 chunk2>', 'base64'));

```
è¦å¯¼å‡ºå¹¶åœ¨ä½¿ç”¨åå¯èƒ½åˆ é™¤å¤§å¯¹è±¡ï¼š
```sql
SELECT lo_export(173454, '/tmp/your_file');
SELECT lo_unlink(173454);  -- Deletes the specified large object
```
#### ä½¿ç”¨ `lo_import` å’Œåå…­è¿›åˆ¶

`lo_import` å‡½æ•°å¯ä»¥ç”¨äºåˆ›å»ºå’ŒæŒ‡å®šå¤§å‹å¯¹è±¡çš„ LOIDï¼š
```sql
select lo_import('/path/to/file');
select lo_import('/path/to/file', 173454);
```
åœ¨å¯¹è±¡åˆ›å»ºåï¼Œæ•°æ®æŒ‰é¡µé¢æ’å…¥ï¼Œç¡®ä¿æ¯ä¸ªå—ä¸è¶…è¿‡2KBï¼š
```sql
update pg_largeobject set data=decode('<HEX>', 'hex') where loid=173454 and pageno=0;
update pg_largeobject set data=decode('<HEX>', 'hex') where loid=173454 and pageno=1;
```
ä¸ºäº†å®Œæˆè¿™ä¸ªè¿‡ç¨‹ï¼Œæ•°æ®è¢«å¯¼å‡ºå¹¶ä¸”å¤§å¯¹è±¡è¢«åˆ é™¤ï¼š
```sql
select lo_export(173454, '/path/to/your_file');
select lo_unlink(173454);  -- Deletes the specified large object
```
### é™åˆ¶

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ**å¤§å¯¹è±¡å¯èƒ½å…·æœ‰ ACLs**ï¼ˆè®¿é—®æ§åˆ¶åˆ—è¡¨ï¼‰ï¼Œè¿™å¯èƒ½ä¼šé™åˆ¶å¯¹å³ä½¿æ˜¯ç”±æ‚¨çš„ç”¨æˆ·åˆ›å»ºçš„å¯¹è±¡çš„è®¿é—®ã€‚ç„¶è€Œï¼Œå…·æœ‰å®½æ¾ ACLs çš„æ—§å¯¹è±¡å¯èƒ½ä»ç„¶å¯ä»¥è®¿é—®ä»¥è¿›è¡Œå†…å®¹å¤–æ³„ã€‚

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
