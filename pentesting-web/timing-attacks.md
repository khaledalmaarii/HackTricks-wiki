# Timing Attacks

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** 游눫 [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** 游냕 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

{% hint style="warning" %}
For obtaining a deep understanding of this technique check the original report from [https://portswigger.net/research/listen-to-the-whispers-web-timing-attacks-that-actually-work](https://portswigger.net/research/listen-to-the-whispers-web-timing-attacks-that-actually-work)
{% endhint %}

## Basic Information

Osnovni cilj napada vremenskog razmaka je u su코tini da se mogu odgovoriti slo쬰na pitanja ili otkriti skrivene funkcionalnosti jednostavno **proverom vremenskih razlika u odgovorima na sli캜ne zahteve**.

Tradicionalno, ovo je bilo veoma komplikovano zbog latencije i jitter-a koje uvode i mre쬬 i server. Me캠utim, od otkri캖a i pobolj코anja [**Race Condition Single Packet attack**](race-condition.md#http-2-single-packet-attack-vs.-http-1.1-last-byte-synchronization), mogu캖e je koristiti ovu tehniku da se uklone svi mre쬹i ka코njenja iz jedna캜ine.\
Ostavljaju캖i samo **ka코njenja servera** 캜ini napad vremenskog razmaka lak코im za otkrivanje i zloupotrebu.

## Discoveries

### Hidden Attack Surface

U blog postu se komentari코e kako je kori코캖enjem ove tehnike bilo mogu캖e prona캖i skrivene parametre i 캜ak zaglavlja jednostavno proverom da kada god je parametar ili zaglavlje bilo prisutno u zahtevu, postojala je **vremenska razlika od oko 5ms**. U stvari, ova tehnika otkrivanja je dodata u **Param Miner** u Burp Suite.

Ove vremenske razlike mogu biti rezultat **DNS zahteva**, nekog **logovanja** zbog nevalidnog unosa ili zato 코to se neki **provere vr코e** kada je parametar prisutan u zahtevu.

Ne코to 코to treba da zapamtite kada izvodite ovakve napade je da zbog skrivene prirode povr코ine, mo쬯a ne캖ete znati koja je stvarna prava uzrok vremenskih razlika.

### Reverse Proxy Misconfigurations

U istom istra쬴vanju, podeljeno je da je tehnika vremenskog razmaka bila odli캜na za otkrivanje "scoped SSRFs" (koji su SSRFs koji mogu pristupiti samo dozvoljenim IP/domenima). Jednostavno **proverom vremenske razlike kada je postavljen dozvoljeni domen** u odnosu na kada je postavljen nedozvoljeni domen poma쬰 u otkrivanju otvorenih proksija 캜ak i ako je odgovor isti.

Kada je otkriven scoped open proxy, bilo je mogu캖e prona캖i validne ciljeve parsiranjem poznatih poddomena cilja i to je omogu캖ilo:

* **Zaobila쬰nje vatrozida** pristupanjem ograni캜enim poddomenima putem otvorenog proksija umesto putem interneta
* Proverom poddomena 캜ak je bilo mogu캖e otkriti i pristupiti internim poddomenima koja nisu javno poznata
* **Napadi na imitaciju Front-End-a**: Front-end serveri obi캜no dodaju zaglavlja za backend. U otvorenim proksijima, ako uspete da prona캠ete ova zaglavlja (코to mo쬯a mo쬰te u캜initi ponovo koriste캖i napade vremenskog razmaka), mo캖i 캖ete da postavite ova zaglavlja i prikupite dalji pristup.

## References

* [https://portswigger.net/research/listen-to-the-whispers-web-timing-attacks-that-actually-work](https://portswigger.net/research/listen-to-the-whispers-web-timing-attacks-that-actually-work)

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** 游눫 [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** 游냕 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
