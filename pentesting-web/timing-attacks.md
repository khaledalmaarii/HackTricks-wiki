# Timing Attacks

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

{% hint style="warning" %}
For obtaining a deep understanding of this technique check the original report from [https://portswigger.net/research/listen-to-the-whispers-web-timing-attacks-that-actually-work](https://portswigger.net/research/listen-to-the-whispers-web-timing-attacks-that-actually-work)
{% endhint %}

## Basic Information

Lengo la msingi la shambulio la wakati ni kimsingi kuwa na uwezo wa kujibu maswali magumu au kugundua kazi zilizofichwa kwa kuangalia tu **tofauti za muda katika majibu kutoka kwa maombi sawa**.

Kawaida hii imekuwa ngumu sana kwa sababu ya ucheleweshaji na jitter inayosababishwa na mtandao na seva. Hata hivyo, tangu ugunduzi na uboreshaji wa [**Race Condition Single Packet attack**](race-condition.md#http-2-single-packet-attack-vs.-http-1.1-last-byte-synchronization), inawezekana kutumia mbinu hii kuondoa ucheleweshaji wote wa mtandao kutoka kwenye hesabu.\
Kuacha tu **ucheleweshaji wa seva** kunafanya shambulio la wakati kuwa rahisi kugundua na kutumia.

## Discoveries

### Hidden Attack Surface

Katika chapisho la blogu kuna maelezo jinsi kutumia mbinu hii ilivyowezesha kupata vigezo vilivyofichwa na hata vichwa kwa kuangalia kwamba kila wakati param au kichwa kilipokuwa katika ombi kulikuwa na **tofauti ya muda ya takriban 5ms**. Kwa kweli, mbinu hii ya ugunduzi imeongezwa kwenye **Param Miner** katika Burp Suite.

Tofauti hizi za muda zinaweza kuwa kwa sababu ya **ombwe la DNS** lililofanywa, baadhi ya **kumbukumbu iliyoandikwa** kwa sababu ya pembejeo isiyo sahihi au kwa sababu baadhi ya **ukaguzi unafanywa** wakati parameter inapatikana katika ombi.

Kitu unachohitaji kukumbuka unapofanya aina hii ya mashambulizi ni kwamba kwa sababu ya asili ya kufichwa ya uso, huenda usijue ni sababu halisi gani ya tofauti za muda.

### Reverse Proxy Misconfigurations

Katika utafiti huo huo, ilishirikiwa kwamba mbinu ya wakati ilikuwa nzuri kugundua "scoped SSRFs" (ambazo ni SSRFs ambazo zinaweza kufikia tu IP/domeni zilizoruhusiwa). Kuangalia tu **tofauti ya muda wakati domeni iliyoruhusiwa imewekwa** dhidi ya wakati domeni isiyoruhusiwa imewekwa husaidia kugundua proxies wazi hata kama jibu ni sawa.

Mara proxy wazi iliyopangwa inapotambuliwa, ilikuwa inawezekana kupata malengo halali kwa kuchambua subdomains zinazojulikana za lengo na hii iliruhusu:

* **Kupita moto** kwa kufikia subdomains zilizozuiliwa kupitia **proxy wazi** badala ya kupitia mtandao
* Zaidi ya hayo, kutumia **proxy wazi** pia inawezekana **gundua subdomains mpya zinazopatikana tu ndani.**
* **Mashambulizi ya uigaji wa Front-End**: Seva za mbele kawaida huongeza vichwa kwa backend kama `X-Forwarded-For` au `X-Real-IP`. Proxies wazi zinazopokea vichwa hivi zitaviweka kwenye mwisho wa ombi, kwa hivyo, mshambuliaji anaweza kuwa na uwezo wa kufikia hata zaidi ya domeni za ndani kwa kuongeza vichwa hivi na thamani zilizoorodheshwa.

## References

* [https://portswigger.net/research/listen-to-the-whispers-web-timing-attacks-that-actually-work](https://portswigger.net/research/listen-to-the-whispers-web-timing-attacks-that-actually-work)

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
