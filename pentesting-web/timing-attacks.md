# Timing Attacks

{% hint style="success" %}
Apprenez et pratiquez le hacking AWS :<img src="../.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../.gitbook/assets/arte.png" alt="" data-size="line">\
Apprenez et pratiquez le hacking GCP : <img src="../.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Supportez HackTricks</summary>

* Consultez les [**plans d'abonnement**](https://github.com/sponsors/carlospolop) !
* **Rejoignez le** üí¨ [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe telegram**](https://t.me/peass) ou **suivez-nous sur** **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Partagez des astuces de hacking en soumettant des PR aux** [**HackTricks**](https://github.com/carlospolop/hacktricks) et [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) d√©p√¥ts github.

</details>
{% endhint %}

{% hint style="warning" %}
Pour obtenir une compr√©hension approfondie de cette technique, consultez le rapport original sur [https://portswigger.net/research/listen-to-the-whispers-web-timing-attacks-that-actually-work](https://portswigger.net/research/listen-to-the-whispers-web-timing-attacks-that-actually-work)
{% endhint %}

## Basic Information

L'objectif de base d'une attaque par timing est essentiellement de pouvoir r√©pondre √† des questions compliqu√©es ou de d√©tecter des fonctionnalit√©s cach√©es en **v√©rifiant les diff√©rences de temps dans les r√©ponses √† des requ√™tes similaires**.

Traditionnellement, cela a √©t√© tr√®s compliqu√© en raison de la latence et du jitter introduits par le r√©seau et le serveur. Cependant, depuis la d√©couverte et l'am√©lioration de l'[**attaque par paquet unique de condition de course**](race-condition.md#http-2-single-packet-attack-vs.-http-1.1-last-byte-synchronization), il est possible d'utiliser cette technique pour √©liminer tous les retards de r√©seau du bruit de l'√©quation.\
Ne laissant que les **retards du serveur**, ce qui rend l'attaque par timing plus facile √† d√©couvrir et √† exploiter.

## Discoveries

### Hidden Attack Surface

Dans le billet de blog, il est comment√© comment, en utilisant cette technique, il a √©t√© possible de trouver des param√®tres cach√©s et m√™me des en-t√™tes juste en v√©rifiant que chaque fois que le param√®tre ou l'en-t√™te √©tait pr√©sent dans la requ√™te, il y avait une **diff√©rence de temps d'environ 5 ms**. En fait, cette technique de d√©couverte a √©t√© ajout√©e √† **Param Miner** dans Burp Suite.

Ces diff√©rences de temps peuvent √™tre dues √† une **requ√™te DNS** effectu√©e, √† l'√©criture de **logs** en raison d'une entr√©e invalide ou parce que certaines **v√©rifications sont effectu√©es** lorsqu'un param√®tre est pr√©sent dans la requ√™te.

Quelque chose que vous devez garder √† l'esprit lors de l'ex√©cution de ce type d'attaques est qu'en raison de la nature cach√©e de la surface, vous pourriez ne pas savoir quelle est la v√©ritable cause des diff√©rences de temps.

### Reverse Proxy Misconfigurations

Dans la m√™me recherche, il a √©t√© partag√© que la technique de timing √©tait excellente pour d√©couvrir des "SSRFs √† port√©e" (qui sont des SSRFs qui ne peuvent acc√©der qu'aux IP/domaines autoris√©s). Juste en **v√©rifiant la diff√©rence de temps lorsqu'un domaine autoris√© est d√©fini** par rapport √† lorsqu'un domaine non autoris√© est d√©fini, cela aide √† d√©couvrir des proxies ouverts m√™me si la r√©ponse est la m√™me.

Une fois qu'un proxy ouvert √† port√©e est d√©couvert, il √©tait possible de trouver des cibles valides en analysant des sous-domaines connus de la cible, ce qui a permis de :

* **Contourner les pare-feu** en acc√©dant √† des sous-domaines restreints via le proxy ouvert au lieu de passer par Internet
* En v√©rifiant les sous-domaines, il √©tait m√™me possible de d√©couvrir et d'acc√©der √† des sous-domaines internes non connus publiquement
* **Attaques d'usurpation de Front-End** : Les serveurs front-end ajoutent normalement des en-t√™tes pour le backend. Dans les proxies ouverts, si vous parvenez √† trouver ces en-t√™tes (ce que vous pourriez √™tre en mesure de faire en utilisant √† nouveau des attaques par timing), vous pourrez d√©finir ces en-t√™tes et obtenir un acc√®s suppl√©mentaire.

## References

* [https://portswigger.net/research/listen-to-the-whispers-web-timing-attacks-that-actually-work](https://portswigger.net/research/listen-to-the-whispers-web-timing-attacks-that-actually-work)

{% hint style="success" %}
Apprenez et pratiquez le hacking AWS :<img src="../.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../.gitbook/assets/arte.png" alt="" data-size="line">\
Apprenez et pratiquez le hacking GCP : <img src="../.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Supportez HackTricks</summary>

* Consultez les [**plans d'abonnement**](https://github.com/sponsors/carlospolop) !
* **Rejoignez le** üí¨ [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe telegram**](https://t.me/peass) ou **suivez-nous sur** **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Partagez des astuces de hacking en soumettant des PR aux** [**HackTricks**](https://github.com/carlospolop/hacktricks) et [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) d√©p√¥ts github.

</details>
{% endhint %}
