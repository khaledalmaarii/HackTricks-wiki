# Ataki Czasowe

{% hint style="success" %}
Ucz si i wicz Hacking AWS:<img src="../.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../.gitbook/assets/arte.png" alt="" data-size="line">\
Ucz si i wicz Hacking GCP: <img src="../.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Wsparcie dla HackTricks</summary>

* Sprawd藕 [**plany subskrypcyjne**](https://github.com/sponsors/carlospolop)!
* **Docz do**  [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegram**](https://t.me/peass) lub **led藕** nas na **Twitterze**  [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Podziel si sztuczkami hackingowymi, przesyajc PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repozytori贸w github.

</details>
{% endhint %}

{% hint style="warning" %}
Aby uzyska gbokie zrozumienie tej techniki, sprawd藕 oryginalny raport z [https://portswigger.net/research/listen-to-the-whispers-web-timing-attacks-that-actually-work](https://portswigger.net/research/listen-to-the-whispers-web-timing-attacks-that-actually-work)
{% endhint %}

## Podstawowe Informacje

Podstawowym celem ataku czasowego jest w zasadzie mo偶liwo odpowiedzi na skomplikowane pytania lub wykrycia ukrytych funkcjonalnoci poprzez **sprawdzanie r贸偶nic czasowych w odpowiedziach na podobne 偶dania**.

Tradycyjnie byo to bardzo skomplikowane z powodu op贸藕nie i jittera wprowadzanego zar贸wno przez sie, jak i serwer. Jednak od odkrycia i poprawy [**ataku Race Condition Single Packet**](race-condition.md#http-2-single-packet-attack-vs.-http-1.1-last-byte-synchronization), mo偶liwe jest wykorzystanie tej techniki do usunicia wszystkich op贸藕nie sieciowych z r贸wnania.\
Pozostawienie tylko **op贸藕nie serwera** uatwia odkrywanie i nadu偶ywanie atak贸w czasowych.

## Odkrycia

### Ukryta Powierzchnia Ataku

W pocie na blogu om贸wiono, jak przy u偶yciu tej techniki mo偶liwe byo znalezienie ukrytych parametr贸w, a nawet nag贸wk贸w, po prostu sprawdzajc, 偶e za ka偶dym razem, gdy parametr lub nag贸wek by obecny w 偶daniu, wystpowaa **r贸偶nica czasowa wynoszca okoo 5 ms**. W rzeczywistoci ta technika odkrywania zostaa dodana do **Param Miner** w Burp Suite.

Te r贸偶nice czasowe mog wynika z tego, 偶e wykonano **偶danie DNS**, zapisano jaki **log** z powodu nieprawidowego wejcia lub poniewa偶 wykonano jakie **sprawdzenia**, gdy parametr by obecny w 偶daniu.

Co musisz pamita, wykonujc tego rodzaju ataki, to 偶e z powodu ukrytej natury powierzchni, mo偶esz nie wiedzie, co jest rzeczywist przyczyn r贸偶nic czasowych.

### Bdy Konfiguracji Reverse Proxy

W tym samym badaniu podano, 偶e technika czasowa bya wietna do odkrywania "ograniczonych SSRF" (kt贸re s SSRF, kt贸re mog uzyskiwa dostp tylko do dozwolonych adres贸w IP/domen). Po prostu **sprawdzajc r贸偶nic czasow, gdy ustawiona jest dozwolona domena** w por贸wnaniu do sytuacji, gdy ustawiona jest niedozwolona domena, pomaga odkry otwarte proxy, nawet jeli odpowied藕 jest taka sama.

Gdy odkryto ograniczone otwarte proxy, mo偶liwe byo znalezienie wa偶nych cel贸w poprzez analizowanie znanych subdomen celu, co pozwolio na:

* **Ominicie zap贸r** poprzez uzyskiwanie dostpu do ograniczonych subdomen za porednictwem otwartego proxy zamiast przez internet
* Sprawdzajc subdomeny, mo偶liwe byo nawet odkrycie i uzyskanie dostpu do wewntrznych subdomen, kt贸re nie byy publicznie znane
* **Ataki naladujce Front-End**: Serwery front-endowe zazwyczaj dodaj nag贸wki dla backendu. W otwartych proxy, jeli uda ci si znale藕 te nag贸wki (co mo偶esz zrobi ponownie, u偶ywajc atak贸w czasowych), bdziesz m贸g ustawi te nag贸wki i uzyska dalszy dostp.

## Referencje

* [https://portswigger.net/research/listen-to-the-whispers-web-timing-attacks-that-actually-work](https://portswigger.net/research/listen-to-the-whispers-web-timing-attacks-that-actually-work)

{% hint style="success" %}
Ucz si i wicz Hacking AWS:<img src="../.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../.gitbook/assets/arte.png" alt="" data-size="line">\
Ucz si i wicz Hacking GCP: <img src="../.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Wsparcie dla HackTricks</summary>

* Sprawd藕 [**plany subskrypcyjne**](https://github.com/sponsors/carlospolop)!
* **Docz do**  [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegram**](https://t.me/peass) lub **led藕** nas na **Twitterze**  [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Podziel si sztuczkami hackingowymi, przesyajc PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repozytori贸w github.

</details>
{% endhint %}
