# Timing Attacks

{% hint style="success" %}
Impara e pratica il hacking AWS:<img src="../.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../.gitbook/assets/arte.png" alt="" data-size="line">\
Impara e pratica il hacking GCP: <img src="../.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Supporta HackTricks</summary>

* Controlla i [**piani di abbonamento**](https://github.com/sponsors/carlospolop)!
* **Unisciti al** üí¨ [**gruppo Discord**](https://discord.gg/hRep4RUj7f) o al [**gruppo telegram**](https://t.me/peass) o **seguici** su **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Condividi trucchi di hacking inviando PR ai** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repos su github.

</details>
{% endhint %}

{% hint style="warning" %}
Per ottenere una comprensione profonda di questa tecnica controlla il rapporto originale da [https://portswigger.net/research/listen-to-the-whispers-web-timing-attacks-that-actually-work](https://portswigger.net/research/listen-to-the-whispers-web-timing-attacks-that-actually-work)
{% endhint %}

## Informazioni di base

L'obiettivo di base di un attacco di timing √® fondamentalmente quello di essere in grado di rispondere a domande complicate o rilevare funzionalit√† nascoste semplicemente **controllando le differenze di tempo nelle risposte a richieste simili**.

Tradizionalmente, questo √® stato molto complicato a causa della latenza e del jitter introdotti sia dalla rete che dal server. Tuttavia, dalla scoperta e dal miglioramento dell' [**attacco Race Condition Single Packet**](race-condition.md#http-2-single-packet-attack-vs.-http-1.1-last-byte-synchronization), √® possibile utilizzare questa tecnica per rimuovere tutti i ritardi di rete dal calcolo.\
Lasciando solo i **ritardi del server** rende l'attacco di timing pi√π facile da scoprire e abusare.

## Scoperte

### Superficie di attacco nascosta

Nel post del blog si commenta come utilizzando questa tecnica sia stato possibile trovare parametri nascosti e persino intestazioni semplicemente controllando che ogni volta che il parametro o l'intestazione era presente nella richiesta c'era una **differenza di tempo di circa 5ms**. In realt√†, questa tecnica di scoperta √® stata aggiunta a **Param Miner** in Burp Suite.

Queste differenze di tempo potrebbero essere dovute a una **richiesta DNS** eseguita, a qualche **log scritto** a causa di un input non valido o perch√© alcuni **controlli vengono eseguiti** quando un parametro √® presente nella richiesta.

Qualcosa che devi ricordare quando esegui questo tipo di attacchi √® che a causa della natura nascosta della superficie, potresti non sapere qual √® la vera causa delle differenze di tempo.

### Misconfigurazioni del Reverse Proxy

Nella stessa ricerca, √® stato condiviso che la tecnica di timing era ottima per scoprire "SSRF a portata limitata" (che sono SSRF che possono accedere solo a IP/domini consentiti). Semplicemente **controllando la differenza di tempo quando √® impostato un dominio consentito** rispetto a quando √® impostato un dominio non consentito aiuta a scoprire proxy aperti anche se la risposta √® la stessa.

Una volta scoperto un proxy aperto a portata limitata, √® stato possibile trovare obiettivi validi analizzando i sottodomini noti del target e questo ha permesso di:

* **Evitare i firewall** accedendo a sottodomini riservati tramite il proxy aperto invece che attraverso internet
* Controllando i sottodomini √® stato persino possibile scoprire e accedere a sottodomini interni non pubblicamente noti
* **Attacchi di impersonificazione Front-End**: I server front-end normalmente aggiungono intestazioni per il backend. Nei proxy aperti, se riesci a trovare queste intestazioni (cosa che potresti essere in grado di fare utilizzando di nuovo gli attacchi di timing), sarai in grado di impostare queste intestazioni e raccogliere ulteriori accessi.

## Riferimenti

* [https://portswigger.net/research/listen-to-the-whispers-web-timing-attacks-that-actually-work](https://portswigger.net/research/listen-to-the-whispers-web-timing-attacks-that-actually-work)

{% hint style="success" %}
Impara e pratica il hacking AWS:<img src="../.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../.gitbook/assets/arte.png" alt="" data-size="line">\
Impara e pratica il hacking GCP: <img src="../.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Supporta HackTricks</summary>

* Controlla i [**piani di abbonamento**](https://github.com/sponsors/carlospolop)!
* **Unisciti al** üí¨ [**gruppo Discord**](https://discord.gg/hRep4RUj7f) o al [**gruppo telegram**](https://t.me/peass) o **seguici** su **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Condividi trucchi di hacking inviando PR ai** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repos su github.

</details>
{% endhint %}
