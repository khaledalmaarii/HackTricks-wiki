# Timing Attacks

{% hint style="success" %}
U캜ite i ve쬭ajte AWS Hacking:<img src="../.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../.gitbook/assets/arte.png" alt="" data-size="line">\
U캜ite i ve쬭ajte GCP Hacking: <img src="../.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Podr쬴te HackTricks</summary>

* Proverite [**planove pretplate**](https://github.com/sponsors/carlospolop)!
* **Pridru쬴te se** 游눫 [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili **nas pratite na** **Twitteru** 游냕 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Podelite hakerske trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>
{% endhint %}

{% hint style="warning" %}
Za sticanje dubokog razumevanja ove tehnike proverite originalni izve코taj sa [https://portswigger.net/research/listen-to-the-whispers-web-timing-attacks-that-actually-work](https://portswigger.net/research/listen-to-the-whispers-web-timing-attacks-that-actually-work)
{% endhint %}

## Osnovne informacije

Osnovni cilj vremenskog napada je u su코tini da bude u mogu캖nosti da odgovori na slo쬰na pitanja ili otkrije skrivene funkcionalnosti jednostavno **proverom vremenskih razlika u odgovorima na sli캜ne zahteve**.

Tradicionalno, ovo je bilo veoma komplikovano zbog latencije i jittera koje uvode i mre쬬 i server. Me캠utim, od otkri캖a i pobolj코anja [**Race Condition Single Packet napada**](race-condition.md#http-2-single-packet-attack-vs.-http-1.1-last-byte-synchronization), mogu캖e je koristiti ovu tehniku da se uklone svi mre쬹i ka코njenja iz jedna캜ine.\
Ostavljaju캖i samo **ka코njenja servera** 캜ini vremenski napad lak코im za otkrivanje i zloupotrebu.

## Otkri캖a

### Skrivena napada캜ka povr코ina

U blog postu se komentari코e kako je kori코캖enjem ove tehnike bilo mogu캖e prona캖i skrivene parametre i 캜ak zaglavlja jednostavno proverom da kada je parametar ili zaglavlje prisutno u zahtevu, postoji **vremenska razlika od oko 5ms**. U stvari, ova tehnika otkrivanja je dodata u **Param Miner** u Burp Suite.

Ove vremenske razlike mogu biti rezultat **DNS zahteva**, nekog **logovanja** zbog nevalidnog unosa ili zato 코to se neki **provere vr코e** kada je parametar prisutan u zahtevu.

Ne코to 코to treba da zapamtite kada izvodite ovakve napade je da zbog skrivene prirode povr코ine, mo쬯a ne캖ete znati koja je stvarna prava uzrok vremenskih razlika.

### Gre코ke u konfiguraciji reverznih proksija

U istom istra쬴vanju, podeljeno je da je vremenska tehnika bila odli캜na za otkrivanje "scoped SSRFs" (koji su SSRFs koji mogu pristupiti samo dozvoljenim IP/domenima). Jednostavno **proverom vremenske razlike kada je postavljen dozvoljeni domen** u odnosu na kada je postavljen nedozvoljeni domen poma쬰 u otkrivanju otvorenih proksija 캜ak i ako je odgovor isti.

Kada se otkrije scoped otvoreni proksi, bilo je mogu캖e prona캖i validne ciljeve parsiranjem poznatih poddomena cilja i to je omogu캖ilo:

* **Obila쬰nje vatrozida** pristupanjem ograni캜enim poddomenima putem **otvorenog proksija** umesto preko interneta
* 맚avi코e, zloupotrebom **otvorenog proksija** tako캠e je mogu캖e **otkriti nove poddomene dostupne samo interno.**
* **Napadi na imitaciju front-end-a**: Front-end serveri obi캜no dodaju zaglavlja za backend kao 코to su `X-Forwarded-For` ili `X-Real-IP`. Otvoreni proksiji koji primaju ova zaglavlja 캖e ih dodati tra쬰nom kraju, stoga bi napada캜 mogao biti u mogu캖nosti da pristupi jo코 vi코e internih domena dodavanjem ovih zaglavlja sa vrednostima koje su na beloj listi.

## Reference

* [https://portswigger.net/research/listen-to-the-whispers-web-timing-attacks-that-actually-work](https://portswigger.net/research/listen-to-the-whispers-web-timing-attacks-that-actually-work)

{% hint style="success" %}
U캜ite i ve쬭ajte AWS Hacking:<img src="../.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../.gitbook/assets/arte.png" alt="" data-size="line">\
U캜ite i ve쬭ajte GCP Hacking: <img src="../.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Podr쬴te HackTricks</summary>

* Proverite [**planove pretplate**](https://github.com/sponsors/carlospolop)!
* **Pridru쬴te se** 游눫 [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili **nas pratite na** **Twitteru** 游냕 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Podelite hakerske trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>
{% endhint %}
