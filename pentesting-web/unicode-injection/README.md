# Injection Unicode

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>â˜ï¸ HackTricks Cloud â˜ï¸</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ğŸ¦ Twitter ğŸ¦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ğŸ™ï¸ Twitch ğŸ™ï¸</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ğŸ¥ Youtube ğŸ¥</strong></a></summary>

- Travaillez-vous dans une **entreprise de cybersÃ©curitÃ©** ? Voulez-vous voir votre **entreprise annoncÃ©e dans HackTricks** ? ou voulez-vous avoir accÃ¨s Ã  la **derniÃ¨re version de PEASS ou tÃ©lÃ©charger HackTricks en PDF** ? Consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop) !

- DÃ©couvrez [**The PEASS Family**](https://opensea.io/collection/the-peass-family), notre collection exclusive de [**NFTs**](https://opensea.io/collection/the-peass-family)

- Obtenez le [**swag officiel PEASS & HackTricks**](https://peass.creator-spring.com)

- **Rejoignez le** [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe telegram**](https://t.me/peass) ou **suivez** moi sur **Twitter** [**ğŸ¦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**

- **Partagez vos astuces de piratage en soumettant des PR au [repo hacktricks](https://github.com/carlospolop/hacktricks) et au [repo hacktricks-cloud](https://github.com/carlospolop/hacktricks-cloud)**.

</details>

## Introduction

Selon la faÃ§on dont le back-end/front-end se comporte lorsqu'il **reÃ§oit des caractÃ¨res Unicode Ã©tranges**, un attaquant pourrait Ãªtre en mesure de **contourner les protections et d'injecter des caractÃ¨res arbitraires** qui pourraient Ãªtre utilisÃ©s pour **exploiter des vulnÃ©rabilitÃ©s d'injection** telles que XSS ou SQLi.

## Normalisation Unicode

La normalisation Unicode se produit lorsque les **caractÃ¨res Unicode sont normalisÃ©s en caractÃ¨res ASCII**.

Un scÃ©nario courant de ce type de vulnÃ©rabilitÃ© se produit lorsque le systÃ¨me **modifie** d'une maniÃ¨re ou d'une autre l'**entrÃ©e** de l'utilisateur **aprÃ¨s l'avoir vÃ©rifiÃ©e**. Par exemple, dans certaines langues, un simple appel pour mettre l'**entrÃ©e en majuscules ou en minuscules** pourrait normaliser l'entrÃ©e donnÃ©e et l'**Unicode sera transformÃ© en ASCII** gÃ©nÃ©rant de nouveaux caractÃ¨res.\
Pour plus d'informations, consultez :

{% content-ref url="unicode-normalization.md" %}
[unicode-normalization.md](unicode-normalization.md)
{% endcontent-ref %}

## `\u` to `%`

Les caractÃ¨res Unicode sont gÃ©nÃ©ralement reprÃ©sentÃ©s avec le prÃ©fixe **`\u`**. Par exemple, le caractÃ¨re `ã±‹` est `\u3c4b`([vÃ©rifiez-le ici](https://unicode-explorer.com/c/3c4B)). Si un back-end **transforme** le prÃ©fixe **`\u` en `%`**, la chaÃ®ne rÃ©sultante sera `%3c4b`, qui, une fois dÃ©codÃ©e en URL, est : **`<4b`**. Et, comme vous pouvez le voir, un **caractÃ¨re `<` est injectÃ©**.\
Vous pouvez utiliser cette technique pour **injecter n'importe quel type de caractÃ¨re** si le back-end est vulnÃ©rable.\
Consultez [https://unicode-explorer.com/](https://unicode-explorer.com/) pour trouver les caractÃ¨res dont vous avez besoin.

Cette vulnÃ©rabilitÃ© vient en fait d'une vulnÃ©rabilitÃ© qu'un chercheur a trouvÃ©e, pour une explication plus approfondie, consultez [https://www.youtube.com/watch?v=aUsAHb0E7Cg](https://www.youtube.com/watch?v=aUsAHb0E7Cg)

## Injection d'Emoji

Les back-ends se comportent parfois de maniÃ¨re Ã©trange lorsqu'ils **reÃ§oivent des emojis**. C'est ce qui s'est passÃ© dans [**ce writeup**](https://medium.com/@fpatrik/how-i-found-an-xss-vulnerability-via-using-emojis-7ad72de49209) oÃ¹ le chercheur a rÃ©ussi Ã  obtenir un XSS avec une charge utile telle que : `ğŸ’‹img src=x onerror=alert(document.domain)//ğŸ’›`

Dans ce cas, l'erreur Ã©tait que le serveur, aprÃ¨s avoir supprimÃ© les caractÃ¨res malveillants, **a converti la chaÃ®ne UTF-8 de Windows-1252 en UTF-8** (essentiellement, l'encodage d'entrÃ©e et la conversion d'encodage ne correspondaient pas). Ensuite, cela ne donne pas un < correct, mais un Ã©trange unicode : `â€¹`\
``Ils ont donc pris cette sortie et **converti Ã  nouveau maintenant d'UTF-8 en ASCII**. Cela a **normalisÃ©** le `â€¹` en `<`, c'est ainsi que l'exploit a pu fonctionner sur ce systÃ¨me.\
Voici ce qui s'est passÃ© :
```php
<?php

$str = isset($_GET["str"]) ? htmlspecialchars($_GET["str"]) : "";

$str = iconv("Windows-1252", "UTF-8", $str);
$str = iconv("UTF-8", "ASCII//TRANSLIT", $str);

echo "String: " . $str;
```
Liste d'emojis :

* [https://github.com/iorch/jakaton\_feminicidios/blob/master/data/emojis.csv](https://github.com/iorch/jakaton\_feminicidios/blob/master/data/emojis.csv)
* [https://unicode.org/emoji/charts-14.0/full-emoji-list.html](https://unicode.org/emoji/charts-14.0/full-emoji-list.html)

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>â˜ï¸ HackTricks Cloud â˜ï¸</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ğŸ¦ Twitter ğŸ¦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ğŸ™ï¸ Twitch ğŸ™ï¸</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ğŸ¥ Youtube ğŸ¥</strong></a></summary>

- Travaillez-vous dans une entreprise de **cybersÃ©curitÃ©** ? Voulez-vous voir votre **entreprise annoncÃ©e dans HackTricks** ? ou voulez-vous avoir accÃ¨s Ã  la **derniÃ¨re version de PEASS ou tÃ©lÃ©charger HackTricks en PDF** ? Consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop) !

- DÃ©couvrez [**The PEASS Family**](https://opensea.io/collection/the-peass-family), notre collection exclusive de [**NFTs**](https://opensea.io/collection/the-peass-family)

- Obtenez le [**swag officiel PEASS & HackTricks**](https://peass.creator-spring.com)

- **Rejoignez le** [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe telegram**](https://t.me/peass) ou **suivez** moi sur **Twitter** [**ğŸ¦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**

- **Partagez vos astuces de piratage en soumettant des PR au [repo hacktricks](https://github.com/carlospolop/hacktricks) et au [repo hacktricks-cloud](https://github.com/carlospolop/hacktricks-cloud)**.

</details>
