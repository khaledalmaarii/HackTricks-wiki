# Chromeç¼“å­˜åˆ°XSS

<details>

<summary><strong>ä»é›¶å¼€å§‹å­¦ä¹ AWSé»‘å®¢æŠ€æœ¯ï¼Œæˆä¸ºä¸“å®¶</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTEï¼ˆHackTricks AWSçº¢é˜Ÿä¸“å®¶ï¼‰</strong></a><strong>ï¼</strong></summary>

* æ‚¨åœ¨**ç½‘ç»œå®‰å…¨å…¬å¸**å·¥ä½œå—ï¼Ÿ æƒ³è¦åœ¨HackTricksä¸­çœ‹åˆ°æ‚¨çš„**å…¬å¸å¹¿å‘Š**å—ï¼Ÿ æˆ–è€…æƒ³è¦è®¿é—®**PEASSçš„æœ€æ–°ç‰ˆæœ¬æˆ–ä¸‹è½½HackTricksçš„PDF**å—ï¼Ÿ è¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼
* æ¢ç´¢[**PEASSå®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬ç‹¬å®¶çš„[**NFTs**](https://opensea.io/collection/the-peass-family)æ”¶è—å“
* è·å–[**å®˜æ–¹PEASSå’ŒHackTrickså‘¨è¾¹äº§å“**](https://peass.creator-spring.com)
* **åŠ å…¥** [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discordç¾¤**](https://discord.gg/hRep4RUj7f) æˆ– [**ç”µæŠ¥ç¾¤**](https://t.me/peass) æˆ–åœ¨**Twitter**ä¸Šå…³æ³¨æˆ‘ ğŸ¦[**@carlospolopm**](https://twitter.com/hacktricks_live)**ã€‚**
* é€šè¿‡å‘[**hacktricksä»“åº“**](https://github.com/carlospolop/hacktricks) **å’Œ** [**hacktricks-cloudä»“åº“**](https://github.com/carlospolop/hacktricks-cloud)æäº¤PRæ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚

</details>

æ›´æ·±å…¥çš„ç»†èŠ‚è¯·æŸ¥çœ‹[**æ­¤ç¯‡æ–‡ç« **](https://blog.arkark.dev/2022/11/18/seccon-en/#web-spanote)ã€‚

æœ¬æ–‡è®¨è®ºçš„æŠ€æœ¯æ¶‰åŠç†è§£ä¸¤ç§ä¸»è¦ç¼“å­˜ç±»å‹çš„è¡Œä¸ºå’Œäº¤äº’ï¼š**åé€€/å‰è¿›ç¼“å­˜ï¼ˆbfcacheï¼‰**å’Œ**ç£ç›˜ç¼“å­˜**ã€‚bfcacheå­˜å‚¨é¡µé¢çš„å®Œæ•´å¿«ç…§ï¼ŒåŒ…æ‹¬JavaScriptå †ï¼Œä¼˜å…ˆäºç£ç›˜ç¼“å­˜ç”¨äºåé€€/å‰è¿›å¯¼èˆªï¼Œå› ä¸ºå®ƒèƒ½å¤Ÿå­˜å‚¨æ›´å…¨é¢çš„å¿«ç…§ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œç£ç›˜ç¼“å­˜å­˜å‚¨ä»ç½‘ç»œè·å–çš„èµ„æºï¼Œä¸åŒ…æ‹¬JavaScriptå †ï¼Œå¹¶ç”¨äºåé€€/å‰è¿›å¯¼èˆªä»¥å‡å°‘é€šä¿¡æˆæœ¬ã€‚ç£ç›˜ç¼“å­˜çš„ä¸€ä¸ªæœ‰è¶£æ–¹é¢æ˜¯å®ƒåŒ…å«ä½¿ç”¨`fetch`è·å–çš„èµ„æºï¼Œè¿™æ„å‘³ç€æµè§ˆå™¨å°†ä»ç¼“å­˜ä¸­æ¸²æŸ“è®¿é—®çš„URLèµ„æºã€‚

### å…³é”®è¦ç‚¹ï¼š

- **bfcache**åœ¨åé€€/å‰è¿›å¯¼èˆªä¸­ä¼˜å…ˆäºç£ç›˜ç¼“å­˜ã€‚
- è¦ä½¿ç”¨å­˜å‚¨åœ¨ç£ç›˜ç¼“å­˜ä¸­çš„é¡µé¢è€Œä¸æ˜¯bfcacheï¼Œå¿…é¡»ç¦ç”¨åè€…ã€‚

### ç¦ç”¨bfcacheï¼š

é»˜è®¤æƒ…å†µä¸‹ï¼ŒPuppeteerç¦ç”¨bfcacheï¼Œç¬¦åˆChromiumæ–‡æ¡£ä¸­åˆ—å‡ºçš„æ¡ä»¶ã€‚ç¦ç”¨bfcacheçš„ä¸€ç§æœ‰æ•ˆæ–¹æ³•æ˜¯é€šè¿‡ä½¿ç”¨`RelatedActiveContentsExist`ï¼Œé€šè¿‡ä½¿ç”¨`window.open()`æ‰“å¼€ä¸€ä¸ªä¿ç•™å¯¹`window.opener`å¼•ç”¨çš„é¡µé¢ã€‚

### å¤ç°è¡Œä¸ºï¼š

1. è®¿é—®ä¸€ä¸ªç½‘é¡µï¼Œä¾‹å¦‚`https://example.com`ã€‚
2. æ‰§è¡Œ`open("http://spanote.seccon.games:3000/api/token")`ï¼Œå°†å¯¼è‡´æœåŠ¡å™¨å“åº”è¿”å›500çŠ¶æ€ç ã€‚
3. åœ¨æ–°æ‰“å¼€çš„é€‰é¡¹å¡ä¸­ï¼Œå¯¼èˆªåˆ°`http://spanote.seccon.games:3000/`ã€‚æ­¤æ“ä½œå°†å°†`http://spanote.seccon.games:3000/api/token`çš„å“åº”ç¼“å­˜ä¸ºç£ç›˜ç¼“å­˜ã€‚
4. ä½¿ç”¨`history.back()`è¿›è¡Œåé€€å¯¼èˆªã€‚æ­¤æ“ä½œå°†å¯¼è‡´åœ¨é¡µé¢ä¸Šå‘ˆç°ç¼“å­˜çš„JSONå“åº”ã€‚

å¯ä»¥é€šè¿‡åœ¨Google Chromeçš„DevToolsä¸­ç¡®è®¤ç£ç›˜ç¼“å­˜æ˜¯å¦è¢«ä½¿ç”¨æ¥éªŒè¯ã€‚

æœ‰å…³bfcacheå’Œç£ç›˜ç¼“å­˜çš„æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è€ƒ[web.devå…³äºbfcacheçš„æ–‡ç« ](https://web.dev/i18n/en/bfcache/)å’Œ[Chromiumå…³äºç£ç›˜ç¼“å­˜çš„è®¾è®¡æ–‡æ¡£](https://www.chromium.org/developers/design-documents/network-stack/disk-cache/)ã€‚


<details>

<summary><strong>ä»é›¶å¼€å§‹å­¦ä¹ AWSé»‘å®¢æŠ€æœ¯ï¼Œæˆä¸ºä¸“å®¶</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTEï¼ˆHackTricks AWSçº¢é˜Ÿä¸“å®¶ï¼‰</strong></a><strong>ï¼</strong></summary>

* æ‚¨åœ¨**ç½‘ç»œå®‰å…¨å…¬å¸**å·¥ä½œå—ï¼Ÿ æƒ³è¦åœ¨HackTricksä¸­çœ‹åˆ°æ‚¨çš„**å…¬å¸å¹¿å‘Š**å—ï¼Ÿ æˆ–è€…æƒ³è¦è®¿é—®**PEASSçš„æœ€æ–°ç‰ˆæœ¬æˆ–ä¸‹è½½HackTricksçš„PDF**å—ï¼Ÿ è¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼
* æ¢ç´¢[**PEASSå®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬ç‹¬å®¶çš„[**NFTs**](https://opensea.io/collection/the-peass-family)æ”¶è—å“
* è·å–[**å®˜æ–¹PEASSå’ŒHackTrickså‘¨è¾¹äº§å“**](https://peass.creator-spring.com)
* **åŠ å…¥** [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discordç¾¤**](https://discord.gg/hRep4RUj7f) æˆ– [**ç”µæŠ¥ç¾¤**](https://t.me/peass) æˆ–åœ¨**Twitter**ä¸Šå…³æ³¨æˆ‘ ğŸ¦[**@carlospolopm**](https://twitter.com/hacktricks_live)**ã€‚**
* é€šè¿‡å‘[**hacktricksä»“åº“**](https://github.com/carlospolop/hacktricks) **å’Œ** [**hacktricks-cloudä»“åº“**](https://github.com/carlospolop/hacktricks-cloud)æäº¤PRæ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚

</details>
