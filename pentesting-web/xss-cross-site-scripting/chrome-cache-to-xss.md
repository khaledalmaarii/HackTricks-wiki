# Chrome Cache to XSS

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

ë” ê¹Šì´ ìˆëŠ” ì„¸ë¶€ì‚¬í•­ì€ [**ì´ ê¸€**](https://blog.arkark.dev/2022/11/18/seccon-en/#web-spanote)ì—ì„œ í™•ì¸í•˜ì„¸ìš”.

ì—¬ê¸°ì„œ ë…¼ì˜ëœ ê¸°ìˆ ì€ ë‘ ê°€ì§€ ì£¼ìš” ìºì‹œ ìœ í˜•ì¸ **ë°±/í¬ì›Œë“œ ìºì‹œ(bfcache)**ì™€ **ë””ìŠ¤í¬ ìºì‹œ**ì˜ ë™ì‘ ë° ìƒí˜¸ì‘ìš©ì„ ì´í•´í•˜ëŠ” ê²ƒê³¼ ê´€ë ¨ì´ ìˆìŠµë‹ˆë‹¤. bfcacheëŠ” JavaScript í™ì„ í¬í•¨í•œ í˜ì´ì§€ì˜ ì „ì²´ ìŠ¤ëƒ…ìƒ·ì„ ì €ì¥í•˜ë©°, ë” í¬ê´„ì ì¸ ìŠ¤ëƒ…ìƒ·ì„ ì €ì¥í•  ìˆ˜ ìˆëŠ” ëŠ¥ë ¥ ë•ë¶„ì— ë°±/í¬ì›Œë“œ íƒìƒ‰ ì‹œ ë””ìŠ¤í¬ ìºì‹œë³´ë‹¤ ìš°ì„ ì‹œë©ë‹ˆë‹¤. ë°˜ë©´, ë””ìŠ¤í¬ ìºì‹œëŠ” JavaScript í™ì„ í¬í•¨í•˜ì§€ ì•Šê³  ì›¹ì—ì„œ ê°€ì ¸ì˜¨ ë¦¬ì†ŒìŠ¤ë¥¼ ì €ì¥í•˜ë©°, í†µì‹  ë¹„ìš©ì„ ì¤„ì´ê¸° ìœ„í•´ ë°±/í¬ì›Œë“œ íƒìƒ‰ì— ì‚¬ìš©ë©ë‹ˆë‹¤. ë””ìŠ¤í¬ ìºì‹œì˜ í¥ë¯¸ë¡œìš´ ì ì€ `fetch`ë¥¼ ì‚¬ìš©í•˜ì—¬ ê°€ì ¸ì˜¨ ë¦¬ì†ŒìŠ¤ë¥¼ í¬í•¨í•œë‹¤ëŠ” ì ìœ¼ë¡œ, ì´ëŠ” ì ‘ê·¼ëœ URL ë¦¬ì†ŒìŠ¤ê°€ ìºì‹œì—ì„œ ë¸Œë¼ìš°ì €ì— ì˜í•´ ë Œë”ë§ëœë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.

### ì£¼ìš” ì‚¬í•­:

- **bfcache**ëŠ” ë°±/í¬ì›Œë“œ íƒìƒ‰ì—ì„œ ë””ìŠ¤í¬ ìºì‹œë³´ë‹¤ ìš°ì„ í•©ë‹ˆë‹¤.
- bfcache ëŒ€ì‹  ë””ìŠ¤í¬ ìºì‹œì— ì €ì¥ëœ í˜ì´ì§€ë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ í›„ìë¥¼ ë¹„í™œì„±í™”í•´ì•¼ í•©ë‹ˆë‹¤.

### bfcache ë¹„í™œì„±í™”:

ê¸°ë³¸ì ìœ¼ë¡œ PuppeteerëŠ” Chromium ë¬¸ì„œì— ë‚˜ì—´ëœ ì¡°ê±´ì— ë§ì¶° bfcacheë¥¼ ë¹„í™œì„±í™”í•©ë‹ˆë‹¤. bfcacheë¥¼ ë¹„í™œì„±í™”í•˜ëŠ” íš¨ê³¼ì ì¸ ë°©ë²• ì¤‘ í•˜ë‚˜ëŠ” `RelatedActiveContentsExist`ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒìœ¼ë¡œ, ì´ëŠ” `window.opener`ì— ëŒ€í•œ ì°¸ì¡°ë¥¼ ìœ ì§€í•˜ëŠ” `window.open()`ìœ¼ë¡œ í˜ì´ì§€ë¥¼ ì—´ì–´ ë‹¬ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### ë™ì‘ ì¬í˜„:

1. ì›¹í˜ì´ì§€ë¥¼ ë°©ë¬¸í•©ë‹ˆë‹¤. ì˜ˆ: `https://example.com`.
2. `open("http://spanote.seccon.games:3000/api/token")`ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤. ì´ë¡œ ì¸í•´ ì„œë²„ ì‘ë‹µì´ 500 ìƒíƒœ ì½”ë“œë¡œ ë°˜í™˜ë©ë‹ˆë‹¤.
3. ìƒˆë¡œ ì—´ë¦° íƒ­ì—ì„œ `http://spanote.seccon.games:3000/`ë¡œ ì´ë™í•©ë‹ˆë‹¤. ì´ ì‘ì—…ì€ `http://spanote.seccon.games:3000/api/token`ì˜ ì‘ë‹µì„ ë””ìŠ¤í¬ ìºì‹œë¡œ ì €ì¥í•©ë‹ˆë‹¤.
4. `history.back()`ì„ ì‚¬ìš©í•˜ì—¬ ë’¤ë¡œ íƒìƒ‰í•©ë‹ˆë‹¤. ì´ ì‘ì—…ì€ í˜ì´ì§€ì— ìºì‹œëœ JSON ì‘ë‹µì„ ë Œë”ë§í•©ë‹ˆë‹¤.

ë””ìŠ¤í¬ ìºì‹œê°€ ì‚¬ìš©ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ë ¤ë©´ Google Chromeì˜ DevToolsë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

bfcache ë° ë””ìŠ¤í¬ ìºì‹œì— ëŒ€í•œ ì¶”ê°€ ì„¸ë¶€ì •ë³´ëŠ” ê°ê° [web.devì˜ bfcache](https://web.dev/i18n/en/bfcache/) ë° [Chromiumì˜ ë””ìŠ¤í¬ ìºì‹œ ì„¤ê³„ ë¬¸ì„œ](https://www.chromium.org/developers/design-documents/network-stack/disk-cache/)ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.


{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
