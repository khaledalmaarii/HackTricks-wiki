# Chrome Cache to XSS

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>â˜ï¸ HackTricks Cloud â˜ï¸</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ğŸ¦ Twitter ğŸ¦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ğŸ™ï¸ Twitch ğŸ™ï¸</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ğŸ¥ Youtube ğŸ¥</strong></a></summary>

* Travaillez-vous dans une **entreprise de cybersÃ©curitÃ©**? Voulez-vous voir votre **entreprise annoncÃ©e dans HackTricks**? ou voulez-vous avoir accÃ¨s Ã  la **derniÃ¨re version du PEASS ou tÃ©lÃ©charger HackTricks en PDF**? Consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop)!
* DÃ©couvrez [**La famille PEASS**](https://opensea.io/collection/the-peass-family), notre collection exclusive de [**NFTs**](https://opensea.io/collection/the-peass-family)
* Obtenez le [**swag officiel PEASS & HackTricks**](https://peass.creator-spring.com)
* **Rejoignez** le [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe Telegram**](https://t.me/peass) ou **suivez** moi sur **Twitter** [**ğŸ¦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Partagez vos astuces de piratage en soumettant des PR aux** [**repo hacktricks**](https://github.com/carlospolop/hacktricks) **et** [**repo hacktricks-cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

Plus de dÃ©tails [**dans cet article**](https://blog.arkark.dev/2022/11/18/seccon-en/#web-spanote).

La technique discutÃ©e ici implique de comprendre le comportement et l'interaction de deux types de cache principaux : le **cache avant/arriÃ¨re (bfcache)** et le **cache disque**. Le bfcache, qui stocke un instantanÃ© complet d'une page incluant le tas JavaScript, est priorisÃ© par rapport au cache disque pour les navigations avant/arriÃ¨re en raison de sa capacitÃ© Ã  stocker un instantanÃ© plus complet. Le cache disque, en revanche, stocke les ressources rÃ©cupÃ©rÃ©es du web sans inclure le tas JavaScript, et est utilisÃ© pour les navigations avant/arriÃ¨re afin de rÃ©duire les coÃ»ts de communication. Un aspect intÃ©ressant du cache disque est son inclusion des ressources rÃ©cupÃ©rÃ©es Ã  l'aide de `fetch`, ce qui signifie que les ressources d'URL consultÃ©es seront rendues par le navigateur Ã  partir du cache.

### Points clÃ©s :

- Le **bfcache** a la prioritÃ© sur le cache disque dans les navigations avant/arriÃ¨re.
- Pour utiliser une page stockÃ©e dans le cache disque au lieu du bfcache, ce dernier doit Ãªtre dÃ©sactivÃ©.

### DÃ©sactiver le bfcache :

Par dÃ©faut, Puppeteer dÃ©sactive le bfcache, en accord avec les conditions Ã©numÃ©rÃ©es dans la documentation de Chromium. Une mÃ©thode efficace pour dÃ©sactiver le bfcache est d'utiliser `RelatedActiveContentsExist`, rÃ©alisÃ© en ouvrant une page avec `window.open()` qui conserve une rÃ©fÃ©rence Ã  `window.opener`.

### Reproduction du comportement :

1. Visitez une page web, par exemple `https://example.com`.
2. ExÃ©cutez `open("http://spanote.seccon.games:3000/api/token")`, ce qui entraÃ®ne une rÃ©ponse du serveur avec un code d'Ã©tat 500.
3. Dans l'onglet nouvellement ouvert, accÃ©dez Ã  `http://spanote.seccon.games:3000/`. Cette action met en cache la rÃ©ponse de `http://spanote.seccon.games:3000/api/token` en tant que cache disque.
4. Utilisez `history.back()` pour naviguer en arriÃ¨re. L'action entraÃ®ne le rendu de la rÃ©ponse JSON mise en cache sur la page.

La confirmation que le cache disque a Ã©tÃ© utilisÃ© peut Ãªtre vÃ©rifiÃ©e en utilisant DevTools dans Google Chrome.

Pour plus de dÃ©tails sur le bfcache et le cache disque, des rÃ©fÃ©rences peuvent Ãªtre trouvÃ©es sur [web.dev sur le bfcache](https://web.dev/i18n/en/bfcache/) et [les documents de conception de Chromium sur le cache disque](https://www.chromium.org/developers/design-documents/network-stack/disk-cache/), respectivement.


<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>â˜ï¸ HackTricks Cloud â˜ï¸</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ğŸ¦ Twitter ğŸ¦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ğŸ™ï¸ Twitch ğŸ™ï¸</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ğŸ¥ Youtube ğŸ¥</strong></a></summary>

* Travaillez-vous dans une **entreprise de cybersÃ©curitÃ©**? Voulez-vous voir votre **entreprise annoncÃ©e dans HackTricks**? ou voulez-vous avoir accÃ¨s Ã  la **derniÃ¨re version du PEASS ou tÃ©lÃ©charger HackTricks en PDF**? Consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop)!
* DÃ©couvrez [**La famille PEASS**](https://opensea.io/collection/the-peass-family), notre collection exclusive de [**NFTs**](https://opensea.io/collection/the-peass-family)
* Obtenez le [**swag officiel PEASS & HackTricks**](https://peass.creator-spring.com)
* **Rejoignez** le [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe Telegram**](https://t.me/peass) ou **suivez** moi sur **Twitter** [**ğŸ¦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Partagez vos astuces de piratage en soumettant des PR aux** [**repo hacktricks**](https://github.com/carlospolop/hacktricks) **et** [**repo hacktricks-cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>
