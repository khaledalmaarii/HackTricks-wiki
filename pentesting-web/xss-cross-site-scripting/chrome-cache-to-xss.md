# Chrome Cache to XSS

{% hint style="success" %}
AWS Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
GCP Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* **ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n ya da **Twitter'da** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**'i takip edin.**
* **Hacking ipuÃ§larÄ±nÄ± paylaÅŸmak iÃ§in** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna PR gÃ¶nderin.

</details>
{% endhint %}

Daha derinlemesine detaylar [**bu yazÄ±da**](https://blog.arkark.dev/2022/11/18/seccon-en/#web-spanote).

Burada tartÄ±ÅŸÄ±lan teknik, iki ana Ã¶nbellek tÃ¼rÃ¼nÃ¼n davranÄ±ÅŸÄ±nÄ± ve etkileÅŸimini anlamayÄ± iÃ§erir: **back/forward cache (bfcache)** ve **disk cache**. JavaScript yÄ±ÄŸÄ±nÄ±nÄ± da iÃ§eren bir sayfanÄ±n tam anlÄ±k gÃ¶rÃ¼ntÃ¼sÃ¼nÃ¼ saklayan bfcache, daha kapsamlÄ± bir anlÄ±k gÃ¶rÃ¼ntÃ¼ saklama yeteneÄŸi nedeniyle geri/ileri navigasyonlar iÃ§in disk Ã¶nbelleÄŸinden Ã¶nceliklidir. Disk Ã¶nbelleÄŸi ise, JavaScript yÄ±ÄŸÄ±nÄ±nÄ± iÃ§ermeden web'den alÄ±nan kaynaklarÄ± saklar ve iletiÅŸim maliyetlerini azaltmak iÃ§in geri/ileri navigasyonlarda kullanÄ±lÄ±r. Disk Ã¶nbelleÄŸinin ilginÃ§ bir yÃ¶nÃ¼, `fetch` kullanÄ±larak alÄ±nan kaynaklarÄ± iÃ§ermesidir; bu, eriÅŸilen URL kaynaklarÄ±nÄ±n tarayÄ±cÄ± tarafÄ±ndan Ã¶nbellekten iÅŸleneceÄŸi anlamÄ±na gelir.

### Ana Noktalar:

- **bfcache**, geri/ileri navigasyonlarda disk Ã¶nbelleÄŸinden Ã¶nceliklidir.
- Disk Ã¶nbelleÄŸinde saklanan bir sayfayÄ± kullanmak iÃ§in, bfcache devre dÄ±ÅŸÄ± bÄ±rakÄ±lmalÄ±dÄ±r.

### bfcache'i Devre DÄ±ÅŸÄ± BÄ±rakma:

VarsayÄ±lan olarak, Puppeteer bfcache'i devre dÄ±ÅŸÄ± bÄ±rakÄ±r ve bu, Chromium'un belgelerinde listelenen koÅŸullarla uyumludur. bfcache'i devre dÄ±ÅŸÄ± bÄ±rakmanÄ±n etkili bir yÃ¶ntemi, `window.opener` referansÄ±nÄ± koruyan `window.open()` ile bir sayfa aÃ§arak `RelatedActiveContentsExist` kullanmaktÄ±r.

### DavranÄ±ÅŸÄ± Yeniden Ãœretme:

1. Bir web sayfasÄ±nÄ± ziyaret edin, Ã¶rneÄŸin, `https://example.com`.
2. `open("http://spanote.seccon.games:3000/api/token")` komutunu Ã§alÄ±ÅŸtÄ±rÄ±n; bu, 500 durum kodu ile bir sunucu yanÄ±tÄ± alÄ±r.
3. Yeni aÃ§Ä±lan sekmede `http://spanote.seccon.games:3000/` adresine gidin. Bu iÅŸlem, `http://spanote.seccon.games:3000/api/token` yanÄ±tÄ±nÄ± disk Ã¶nbelleÄŸi olarak saklar.
4. Geri gitmek iÃ§in `history.back()` kullanÄ±n. Bu iÅŸlem, sayfada Ã¶nbelleÄŸe alÄ±nmÄ±ÅŸ JSON yanÄ±tÄ±nÄ±n iÅŸlenmesine neden olur.

Disk Ã¶nbelleÄŸinin kullanÄ±ldÄ±ÄŸÄ±nÄ± doÄŸrulamak iÃ§in Google Chrome'daki GeliÅŸtirici AraÃ§larÄ± kullanÄ±labilir.

bfcache ve disk Ã¶nbelleÄŸi hakkÄ±nda daha fazla bilgi iÃ§in, [web.dev'de bfcache](https://web.dev/i18n/en/bfcache/) ve [Chromium'un disk Ã¶nbelleÄŸi tasarÄ±m belgeleri](https://www.chromium.org/developers/design-documents/network-stack/disk-cache/) referanslarÄ±na bakabilirsiniz.

{% hint style="success" %}
AWS Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
GCP Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* **ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n ya da **Twitter'da** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**'i takip edin.**
* **Hacking ipuÃ§larÄ±nÄ± paylaÅŸmak iÃ§in** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna PR gÃ¶nderin.

</details>
{% endhint %}
