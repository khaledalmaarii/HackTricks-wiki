# Chrome Cache to XSS

<details>

<summary><strong>Apprenez le piratage AWS de z√©ro √† h√©ros avec</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (Expert de l'√©quipe rouge AWS de HackTricks)</strong></a><strong>!</strong></summary>

* Travaillez-vous dans une **entreprise de cybers√©curit√©**? Voulez-vous voir votre **entreprise annonc√©e dans HackTricks**? ou voulez-vous avoir acc√®s √† la **derni√®re version du PEASS ou t√©l√©charger HackTricks en PDF**? Consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop)!
* D√©couvrez [**La famille PEASS**](https://opensea.io/collection/the-peass-family), notre collection exclusive de [**NFTs**](https://opensea.io/collection/the-peass-family)
* Obtenez le [**swag officiel PEASS & HackTricks**](https://peass.creator-spring.com)
* **Rejoignez le** [**üí¨**](https://emojipedia.org/speech-balloon/) [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe Telegram**](https://t.me/peass) ou **suivez** moi sur **Twitter** üê¶[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Partagez vos astuces de piratage en soumettant des PR au** [**d√©p√¥t hacktricks**](https://github.com/carlospolop/hacktricks) **et au** [**d√©p√¥t hacktricks-cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

Plus de d√©tails approfondis [**dans cet article**](https://blog.arkark.dev/2022/11/18/seccon-en/#web-spanote).

La technique discut√©e ici implique de comprendre le comportement et l'interaction de deux types de cache principaux : le **cache avant/arri√®re (bfcache)** et le **cache disque**. Le bfcache, qui stocke un instantan√© complet d'une page incluant le tas JavaScript, est prioris√© par rapport au cache disque pour les navigations avant/arri√®re en raison de sa capacit√© √† stocker un instantan√© plus complet. Le cache disque, en revanche, stocke des ressources r√©cup√©r√©es du web sans inclure le tas JavaScript, et est utilis√© pour les navigations avant/arri√®re afin de r√©duire les co√ªts de communication. Un aspect int√©ressant du cache disque est son inclusion des ressources r√©cup√©r√©es √† l'aide de `fetch`, ce qui signifie que les ressources d'URL consult√©es seront rendues par le navigateur √† partir du cache.

### Points cl√©s :

- Le **bfcache** a la priorit√© sur le cache disque dans les navigations avant/arri√®re.
- Pour utiliser une page stock√©e dans le cache disque au lieu du bfcache, ce dernier doit √™tre d√©sactiv√©.

### D√©sactivation du bfcache :

Par d√©faut, Puppeteer d√©sactive le bfcache, en accord avec les conditions √©num√©r√©es dans la documentation de Chromium. Une m√©thode efficace pour d√©sactiver le bfcache est l'utilisation de `RelatedActiveContentsExist`, obtenue en ouvrant une page avec `window.open()` qui conserve une r√©f√©rence √† `window.opener`.

### Reproduction du comportement :

1. Visitez une page web, par exemple `https://example.com`.
2. Ex√©cutez `open("http://spanote.seccon.games:3000/api/token")`, ce qui entra√Æne une r√©ponse du serveur avec un code d'√©tat 500.
3. Dans l'onglet nouvellement ouvert, acc√©dez √† `http://spanote.seccon.games:3000/`. Cette action met en cache la r√©ponse de `http://spanote.seccon.games:3000/api/token` en tant que cache disque.
4. Utilisez `history.back()` pour naviguer en arri√®re. L'action entra√Æne le rendu de la r√©ponse JSON mise en cache sur la page.

La confirmation que le cache disque a √©t√© utilis√© peut √™tre v√©rifi√©e en utilisant DevTools dans Google Chrome.

Pour plus de d√©tails sur le bfcache et le cache disque, des r√©f√©rences peuvent √™tre trouv√©es sur [web.dev sur le bfcache](https://web.dev/i18n/en/bfcache/) et [les documents de conception de Chromium sur le cache disque](https://www.chromium.org/developers/design-documents/network-stack/disk-cache/), respectivement.


<details>

<summary><strong>Apprenez le piratage AWS de z√©ro √† h√©ros avec</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (Expert de l'√©quipe rouge AWS de HackTricks)</strong></a><strong>!</strong></summary>

* Travaillez-vous dans une **entreprise de cybers√©curit√©**? Voulez-vous voir votre **entreprise annonc√©e dans HackTricks**? ou voulez-vous avoir acc√®s √† la **derni√®re version du PEASS ou t√©l√©charger HackTricks en PDF**? Consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop)!
* D√©couvrez [**La famille PEASS**](https://opensea.io/collection/the-peass-family), notre collection exclusive de [**NFTs**](https://opensea.io/collection/the-peass-family)
* Obtenez le [**swag officiel PEASS & HackTricks**](https://peass.creator-spring.com)
* **Rejoignez le** [**üí¨**](https://emojipedia.org/speech-balloon/) [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe Telegram**](https://t.me/peass) ou **suivez** moi sur **Twitter** üê¶[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Partagez vos astuces de piratage en soumettant des PR au** [**d√©p√¥t hacktricks**](https://github.com/carlospolop/hacktricks) **et au** [**d√©p√¥t hacktricks-cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>
