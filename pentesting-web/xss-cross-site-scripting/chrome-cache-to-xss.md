# Chromeç¼“å­˜åˆ°XSS

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>â˜ï¸ HackTricks Cloud â˜ï¸</strong></a> - <a href="https://twitter.com/hacktricks_live"><strong>ğŸ¦ Twitter ğŸ¦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ğŸ™ï¸ Twitch ğŸ™ï¸</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ğŸ¥ Youtube ğŸ¥</strong></a></summary>

* æ‚¨åœ¨**ç½‘ç»œå®‰å…¨å…¬å¸**å·¥ä½œå—ï¼Ÿæƒ³è¦åœ¨HackTricksä¸­çœ‹åˆ°æ‚¨çš„**å…¬å¸å¹¿å‘Š**ï¼Ÿæˆ–è€…æƒ³è¦è®¿é—®**PEASSçš„æœ€æ–°ç‰ˆæœ¬æˆ–ä¸‹è½½HackTricksçš„PDF**ï¼Ÿè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* å‘ç°æˆ‘ä»¬çš„ç‹¬å®¶[NFTsæ”¶è—å“**The PEASS Family**](https://opensea.io/collection/the-peass-family)
* è·å–[**å®˜æ–¹PEASSå’ŒHackTrickså‘¨è¾¹äº§å“**](https://peass.creator-spring.com)
* **åŠ å…¥** [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discordç¾¤**](https://discord.gg/hRep4RUj7f) æˆ– [**ç”µæŠ¥ç¾¤**](https://t.me/peass) æˆ–åœ¨**Twitter**ä¸Š**å…³æ³¨**æˆ‘ [**ğŸ¦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks_live)**ã€‚**
* é€šè¿‡å‘[**hacktricks repo**](https://github.com/carlospolop/hacktricks)å’Œ[**hacktricks-cloud repo**](https://github.com/carlospolop/hacktricks-cloud)æäº¤PRæ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚

</details>

æ›´è¯¦ç»†çš„å†…å®¹è¯·æŸ¥çœ‹[**æ­¤ç¯‡æ–‡ç« **](https://blog.arkark.dev/2022/11/18/seccon-en/#web-spanote)ã€‚

è¿™é‡Œè®¨è®ºçš„æŠ€æœ¯æ¶‰åŠç†è§£ä¸¤ç§ä¸»è¦ç¼“å­˜ç±»å‹çš„è¡Œä¸ºå’Œäº¤äº’ï¼š**åé€€/å‰è¿›ç¼“å­˜ï¼ˆbfcacheï¼‰**å’Œ**ç£ç›˜ç¼“å­˜**ã€‚bfcacheå­˜å‚¨é¡µé¢çš„å®Œæ•´å¿«ç…§ï¼ŒåŒ…æ‹¬JavaScriptå †ï¼Œä¼˜å…ˆäºç£ç›˜ç¼“å­˜ç”¨äºåé€€/å‰è¿›å¯¼èˆªï¼Œå› ä¸ºå®ƒèƒ½å¤Ÿå­˜å‚¨æ›´å…¨é¢çš„å¿«ç…§ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œç£ç›˜ç¼“å­˜å­˜å‚¨ä»ç½‘ç»œè·å–çš„èµ„æºï¼Œä¸åŒ…æ‹¬JavaScriptå †ï¼Œå¹¶ä¸”ç”¨äºå‡å°‘é€šä¿¡æˆæœ¬çš„åé€€/å‰è¿›å¯¼èˆªã€‚ç£ç›˜ç¼“å­˜çš„ä¸€ä¸ªæœ‰è¶£æ–¹é¢æ˜¯å®ƒåŒ…å«ä½¿ç”¨`fetch`è·å–çš„èµ„æºï¼Œè¿™æ„å‘³ç€æµè§ˆå™¨å°†ä»ç¼“å­˜ä¸­æ¸²æŸ“è®¿é—®çš„URLèµ„æºã€‚

### å…³é”®è¦ç‚¹ï¼š

- **bfcache**åœ¨åé€€/å‰è¿›å¯¼èˆªä¸­ä¼˜å…ˆäºç£ç›˜ç¼“å­˜ã€‚
- è¦ä½¿ç”¨å­˜å‚¨åœ¨ç£ç›˜ç¼“å­˜ä¸­çš„é¡µé¢è€Œä¸æ˜¯bfcacheï¼Œå¿…é¡»ç¦ç”¨åè€…ã€‚

### ç¦ç”¨bfcacheï¼š

é»˜è®¤æƒ…å†µä¸‹ï¼ŒPuppeteerç¦ç”¨bfcacheï¼Œç¬¦åˆChromiumæ–‡æ¡£ä¸­åˆ—å‡ºçš„æ¡ä»¶ã€‚ç¦ç”¨bfcacheçš„ä¸€ä¸ªæœ‰æ•ˆæ–¹æ³•æ˜¯é€šè¿‡ä½¿ç”¨`RelatedActiveContentsExist`ï¼Œé€šè¿‡ä½¿ç”¨`window.open()`æ‰“å¼€ä¸€ä¸ªä¿ç•™å¯¹`window.opener`çš„å¼•ç”¨çš„é¡µé¢ã€‚

### å¤ç°è¡Œä¸ºï¼š

1. è®¿é—®ä¸€ä¸ªç½‘é¡µï¼Œä¾‹å¦‚`https://example.com`ã€‚
2. æ‰§è¡Œ`open("http://spanote.seccon.games:3000/api/token")`ï¼Œå°†å¯¼è‡´æœåŠ¡å™¨å“åº”è¿”å›500çŠ¶æ€ç ã€‚
3. åœ¨æ–°æ‰“å¼€çš„æ ‡ç­¾é¡µä¸­ï¼Œå¯¼èˆªåˆ°`http://spanote.seccon.games:3000/`ã€‚æ­¤æ“ä½œå°†å°†`http://spanote.seccon.games:3000/api/token`çš„å“åº”ç¼“å­˜ä¸ºç£ç›˜ç¼“å­˜ã€‚
4. ä½¿ç”¨`history.back()`è¿›è¡Œåé€€å¯¼èˆªã€‚æ­¤æ“ä½œå°†å¯¼è‡´åœ¨é¡µé¢ä¸Šå‘ˆç°ç¼“å­˜çš„JSONå“åº”ã€‚

å¯ä»¥é€šè¿‡åœ¨Google Chromeä¸­ä½¿ç”¨DevToolsæ¥ç¡®è®¤ç£ç›˜ç¼“å­˜æ˜¯å¦è¢«ä½¿ç”¨ã€‚

æœ‰å…³bfcacheå’Œç£ç›˜ç¼“å­˜çš„æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è€ƒ[web.devå…³äºbfcacheçš„æ–‡ç« ](https://web.dev/i18n/en/bfcache/)å’Œ[Chromiumå…³äºç£ç›˜ç¼“å­˜çš„è®¾è®¡æ–‡æ¡£](https://www.chromium.org/developers/design-documents/network-stack/disk-cache/)ã€‚


<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>â˜ï¸ HackTricks Cloud â˜ï¸</strong></a> - <a href="https://twitter.com/hacktricks_live"><strong>ğŸ¦ Twitter ğŸ¦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ğŸ™ï¸ Twitch ğŸ™ï¸</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ğŸ¥ Youtube ğŸ¥</strong></a></summary>

* æ‚¨åœ¨**ç½‘ç»œå®‰å…¨å…¬å¸**å·¥ä½œå—ï¼Ÿæƒ³è¦åœ¨HackTricksä¸­çœ‹åˆ°æ‚¨çš„**å…¬å¸å¹¿å‘Š**ï¼Ÿæˆ–è€…æƒ³è¦è®¿é—®**PEASSçš„æœ€æ–°ç‰ˆæœ¬æˆ–ä¸‹è½½HackTricksçš„PDF**ï¼Ÿè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* å‘ç°æˆ‘ä»¬çš„ç‹¬å®¶[NFTsæ”¶è—å“**The PEASS Family**](https://opensea.io/collection/the-peass-family)
* è·å–[**å®˜æ–¹PEASSå’ŒHackTrickså‘¨è¾¹äº§å“**](https://peass.creator-spring.com)
* **åŠ å…¥** [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discordç¾¤**](https://discord.gg/hRep4RUj7f) æˆ– [**ç”µæŠ¥ç¾¤**](https://t.me/peass) æˆ–åœ¨**Twitter**ä¸Š**å…³æ³¨**æˆ‘ [**ğŸ¦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks_live)**ã€‚**
* é€šè¿‡å‘[**hacktricks repo**](https://github.com/carlospolop/hacktricks)å’Œ[**hacktricks-cloud repo**](https://github.com/carlospolop/hacktricks-cloud)æäº¤PRæ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚

</details>
