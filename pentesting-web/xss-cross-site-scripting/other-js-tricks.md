# Verschiedene JS-Tricks und relevante Informationen

<details>

<summary><strong>Lernen Sie AWS-Hacking von Null auf Held mit</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

* Arbeiten Sie in einem **Cybersicherheitsunternehmen**? M√∂chten Sie Ihr **Unternehmen in HackTricks bewerben**? Oder m√∂chten Sie Zugriff auf die **neueste Version von PEASS erhalten oder HackTricks als PDF herunterladen**? √úberpr√ºfen Sie die [**ABONNEMENTPL√ÑNE**](https://github.com/sponsors/carlospolop)!
* Entdecken Sie [**The PEASS Family**](https://opensea.io/collection/the-peass-family), unsere Sammlung exklusiver [**NFTs**](https://opensea.io/collection/the-peass-family).
* Holen Sie sich das [**offizielle PEASS & HackTricks-Merchandise**](https://peass.creator-spring.com).
* **Treten Sie der** [**üí¨**](https://emojipedia.org/speech-balloon/) [**Discord-Gruppe**](https://discord.gg/hRep4RUj7f) oder der [**Telegram-Gruppe**](https://t.me/peass) bei oder **folgen** Sie mir auf **Twitter** üê¶[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Teilen Sie Ihre Hacking-Tricks, indem Sie PRs an das** [**hacktricks-Repository**](https://github.com/carlospolop/hacktricks) **und das** [**hacktricks-cloud-Repository**](https://github.com/carlospolop/hacktricks-cloud) **senden**.

</details>

## Javascript-Fuzzing

### G√ºltige JS-Kommentarzeichen
```javascript
//This is a 1 line comment
/* This is a multiline comment*/
#!This is a 1 line comment, but "#!" must to be at the beggining of the line
-->This is a 1 line comment, but "-->" must to be at the beggining of the line


for (let j = 0; j < 128; j++) {
for (let k = 0; k < 128; k++) {
for (let l = 0; l < 128; l++) {
if (j == 34 || k ==34 || l ==34)
continue;
if (j == 0x0a || k ==0x0a || l ==0x0a)
continue;
if (j == 0x0d || k ==0x0d || l ==0x0d)
continue;
if (j == 0x3c || k ==0x3c || l ==0x3c)
continue;
if (
(j == 47 && k == 47)
||(k == 47 && l == 47)
)
continue;
try {
var cmd = String.fromCharCode(j) + String.fromCharCode(k) + String.fromCharCode(l) + 'a.orange.ctf"';
eval(cmd);
} catch(e) {
var err = e.toString().split('\n')[0].split(':')[0];
if (err === 'SyntaxError' || err === "ReferenceError")
continue
err = e.toString().split('\n')[0]
}
console.log(err,cmd);
}
}
}
//From: https://balsn.tw/ctf_writeup/20191012-hitconctfquals/#bounty-pl33z

// From: Heyes, Gareth. JavaScript for hackers: Learn to think like a hacker (p. 43). Kindle Edition.
log=[];
for(let i=0;i<=0xff;i++){
for(let j=0;j<=0xfff;j++){
try {
eval(`${String.fromCodePoint(i,j)}%$¬£234$`)
log.push([i,j])
}catch(e){}
}
}
console.log(log)//[35,33],[47,47]
```
### G√ºltige JS-Zeilenumbruchzeichen

In JavaScript gibt es verschiedene Zeichen, die als Zeilenumbruchzeichen verwendet werden k√∂nnen. Diese Zeichen erm√∂glichen es, den Code auf mehrere Zeilen aufzuteilen, um ihn lesbarer zu machen. Hier sind einige g√ºltige JS-Zeilenumbruchzeichen:

- `\n`: Dieses Zeichen repr√§sentiert einen Zeilenumbruch.
- `\r`: Dieses Zeichen repr√§sentiert einen Wagenr√ºcklauf.
- `\u2028`: Dieses Zeichen repr√§sentiert den Unicode-Zeilenumbruch.
- `\u2029`: Dieses Zeichen repr√§sentiert den Unicode-Paragraf-Trenner.

Diese Zeichen k√∂nnen in JavaScript-Strings verwendet werden, um den Code auf mehrere Zeilen aufzuteilen. Es ist wichtig zu beachten, dass diese Zeichen in HTML-Attributen oder JavaScript-Inline-Events nicht immer funktionieren, da sie von den Browsern unterschiedlich interpretiert werden k√∂nnen.
```javascript
//Javascript interpret as new line these chars:
String.fromCharCode(10) //0x0a
String.fromCharCode(13) //0x0d
String.fromCharCode(8232) //0xe2 0x80 0xa8
String.fromCharCode(8233) //0xe2 0x80 0xa8

for (let j = 0; j < 65536; j++) {
try {
var cmd = '"aaaaa";'+String.fromCharCode(j) + '-->a.orange.ctf"';
eval(cmd);
} catch(e) {
var err = e.toString().split('\n')[0].split(':')[0];
if (err === 'SyntaxError' || err === "ReferenceError")
continue;
err = e.toString().split('\n')[0]
}
console.log(`[${err}]`,j,cmd);
}
//From: https://balsn.tw/ctf_writeup/20191012-hitconctfquals/#bounty-pl33z
```
### G√ºltige JS-Leerzeichen beim Funktionsaufruf

In einigen F√§llen kann es erforderlich sein, Leerzeichen in einem JavaScript-Funktionsaufruf zu verwenden, um bestimmte Sicherheitsmechanismen zu umgehen. Hier sind einige Techniken, die verwendet werden k√∂nnen:

#### 1. Unicode-Zeichen

Unicode-Zeichen k√∂nnen verwendet werden, um Leerzeichen in einem Funktionsaufruf zu maskieren. Zum Beispiel kann das Unicode-Zeichen `\u200B` anstelle eines Leerzeichens verwendet werden:

```javascript
alert('\u200BHello\u200BWorld\u200B');
```

#### 2. Kommentare

Kommentare k√∂nnen verwendet werden, um Leerzeichen zu maskieren. Zum Beispiel kann ein Kommentar `//` anstelle eines Leerzeichens verwendet werden:

```javascript
alert('Hello'// 
+ 'World');
```

#### 3. String-Konkatenation

String-Konkatenation kann verwendet werden, um Leerzeichen zu maskieren. Zum Beispiel kann der `+` Operator anstelle eines Leerzeichens verwendet werden:

```javascript
alert('Hello' + 
'World');
```

Es ist wichtig zu beachten, dass diese Techniken von verschiedenen Sicherheitsmechanismen erkannt und blockiert werden k√∂nnen. Daher sollten sie mit Vorsicht verwendet werden.
```javascript
// Heyes, Gareth. JavaScript for hackers: Learn to think like a hacker (pp. 40-41). Kindle Edition.

// Check chars that can be put in between in func name and the ()
function x(){}

log=[];
for(let i=0;i<=0x10ffff;i++){
try {
eval(`x${String.fromCodePoint(i)}()`)
log.push(i)
}catch(e){}
}

console.log(log)v//9,10,11,12,13,32,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,813 232,8233,8239,8287,12288,65279
```
### **G√ºltige Zeichen zur Generierung von Zeichenketten**

The following characters can be used to generate strings in JavaScript:

Die folgenden Zeichen k√∂nnen verwendet werden, um Zeichenketten in JavaScript zu generieren:

```javascript
abcdefghijklmnopqrstuvwxyz
ABCDEFGHIJKLMNOPQRSTUVWXYZ
0123456789
!@#$%^&*()_+-=[]{}|;':",.<>/?`
```

These characters can be combined in various ways to create different strings for testing or exploitation purposes.

Diese Zeichen k√∂nnen auf verschiedene Weise kombiniert werden, um unterschiedliche Zeichenketten f√ºr Test- oder Ausbeutungszwecke zu erstellen.
```javascript
// Heyes, Gareth. JavaScript for hackers: Learn to think like a hacker (pp. 41-42). Kindle Edition.

// Check which pairs of chars can make something be a valid string
log=[];
for(let i=0;i<=0x10ffff;i++){
try {
eval(`${String.fromCodePoint(i)}%$¬£234${String.fromCodePoint(i)}`)
log.push(i)
}catch(e){}
}
console.log(log) //34,39,47,96
//single quote, quotes, backticks & // (regex)
```
### **Surrogate Pairs BF**

Diese Technik ist f√ºr XSS nicht sehr n√ºtzlich, aber sie k√∂nnte n√ºtzlich sein, um WAF-Schutzma√ünahmen zu umgehen. Dieser Python-Code erh√§lt als Eingabe 2 Bytes und sucht nach Surrogate-Paaren, bei denen das erste Byte dem letzten Byte des High-Surrogate-Paars und das letzte Byte dem letzten Byte des Low-Surrogate-Paars entspricht.
```python
def unicode(findHex):
for i in range(0,0xFFFFF):
H = hex(int(((i - 0x10000) / 0x400) + 0xD800))
h = chr(int(H[-2:],16))
L = hex(int(((i - 0x10000) % 0x400 + 0xDC00)))
l = chr(int(L[-2:],16))
if(h == findHex[0]) and (l == findHex[1]):
print(H.replace("0x","\\u")+L.replace("0x","\\u"))
```
Weitere Informationen:

* [https://github.com/dreadlocked/ctf-writeups/blob/master/nn8ed/README.md](https://github.com/dreadlocked/ctf-writeups/blob/master/nn8ed/README.md)
* [https://mathiasbynens.be/notes/javascript-unicode](https://mathiasbynens.be/notes/javascript-unicode) [https://mathiasbynens.be/notes/javascript-encoding](https://mathiasbynens.be/notes/javascript-encoding)

### Fuzzing des `javascript{}:` Protokolls
```javascript
// Heyes, Gareth. JavaScript for hackers: Learn to think like a hacker (p. 34). Kindle Edition.
log=[];
let anchor = document.createElement('a');
for(let i=0;i<=0x10ffff;i++){
anchor.href = `javascript${String.fromCodePoint(i)}:`;
if(anchor.protocol === 'javascript:') {
log.push(i);
}
}
console.log(log)//9,10,13,58
// Note that you could BF also other possitions of the use of multiple chars

// Test one option
let anchor = document.createElement('a');
anchor.href = `javascript${String.fromCodePoint(58)}:alert(1337)`;
anchor.append('Click me')
document.body.append(anchor)

// Another way to test
<a href="&#12;javascript:alert(1337)">Test</a>
```
### URL Fuzzing

URL-Fuzzing ist eine Technik, bei der verschiedene Variationen einer URL verwendet werden, um Schwachstellen in einer Webanwendung zu identifizieren. Diese Technik kann verwendet werden, um versteckte Dateien oder Verzeichnisse aufzudecken, ungesch√ºtzte Endpunkte zu finden oder Parameter zu manipulieren, um unerw√ºnschte Ergebnisse zu erzielen.

Es gibt verschiedene Arten von URL-Fuzzing-Techniken, darunter:

- **Wortlistenbasiertes Fuzzing**: Hierbei werden Wortlisten verwendet, um verschiedene Kombinationen von W√∂rtern in die URL einzuf√ºgen. Dies kann helfen, versteckte Dateien oder Verzeichnisse zu finden, die m√∂glicherweise nicht direkt √ºber die Haupt-URL zug√§nglich sind.

- **Parameterbasiertes Fuzzing**: Bei dieser Technik werden verschiedene Werte f√ºr Parameter in der URL ausprobiert, um m√∂gliche Schwachstellen zu identifizieren. Dies kann helfen, unerw√ºnschte Ergebnisse wie SQL-Injektionen oder Cross-Site Scripting (XSS) zu erzeugen.

- **HTTP-Methoden-Fuzzing**: Hierbei werden verschiedene HTTP-Methoden wie GET, POST, PUT, DELETE usw. verwendet, um zu √ºberpr√ºfen, ob die Webanwendung auf ungesch√ºtzte Methoden reagiert. Dies kann dazu f√ºhren, dass unerw√ºnschte Aktionen ausgef√ºhrt werden oder Informationen preisgegeben werden.

URL-Fuzzing ist eine effektive Methode, um potenzielle Schwachstellen in einer Webanwendung zu identifizieren. Es ist jedoch wichtig, diese Technik mit Vorsicht anzuwenden, da sie zu unerw√ºnschten Auswirkungen f√ºhren kann, wie z.B. einer Denial-of-Service (DoS)-Situation oder dem versehentlichen Zugriff auf vertrauliche Informationen.
```javascript
// Heyes, Gareth. JavaScript for hackers: Learn to think like a hacker (pp. 36-37). Kindle Edition.

// Before the protocol
a=document.createElement('a');
log=[];
for(let i=0;i<=0x10ffff;i++){
a.href = `${String.fromCodePoint(i)}https://hacktricks.xyz`;
if(a.hostname === 'hacktricks.xyz'){
log.push(i);
}
}
console.log(log) //0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32

// Between the slashes
a=document.createElement('a');
log=[];
for(let i=0;i<=0x10ffff;i++){
a.href = `/${String.fromCodePoint(i)}/hacktricks.xyz`;
if(a.hostname === 'hacktricks.xyz'){
log.push(i);
}
}
console.log(log) //9,10,13,47,92
```
### HTML Fuzzing

HTML-Fuzzing ist eine Technik, bei der ung√ºltige oder unerwartete Eingaben in HTML-Tags und -Attributen verwendet werden, um Schwachstellen in einer Webanwendung zu identifizieren. Durch das Einschleusen von speziell gestalteten Eingaben k√∂nnen potenzielle Cross-Site-Scripting (XSS)-Angriffe oder andere Sicherheitsl√ºcken entdeckt werden.

#### Warum HTML-Fuzzing?

HTML-Fuzzing ist eine effektive Methode, um Schwachstellen in Webanwendungen zu finden, da viele Angriffe auf unsichere oder unzureichend validierte Eingaben zur√ºckzuf√ºhren sind. Durch das Testen der Anwendung mit verschiedenen ung√ºltigen oder unerwarteten Eingaben k√∂nnen potenzielle Schwachstellen identifiziert und behoben werden, bevor sie von Angreifern ausgenutzt werden k√∂nnen.

#### Wie funktioniert HTML-Fuzzing?

Beim HTML-Fuzzing werden verschiedene Arten von Eingaben in HTML-Tags und -Attributen eingef√ºgt, um zu √ºberpr√ºfen, wie die Anwendung darauf reagiert. Dies kann beispielsweise das Einf√ºgen von Sonderzeichen, HTML-Entit√§ten, JavaScript-Code oder anderen unerwarteten Eingaben umfassen.

Durch das √úberpr√ºfen der Serverantworten und des Verhaltens der Anwendung k√∂nnen potenzielle Schwachstellen identifiziert werden. Wenn die Anwendung beispielsweise unsichere Eingaben direkt in HTML-Tags oder -Attributen anzeigt, kann dies zu XSS-Angriffen f√ºhren.

#### Tools f√ºr HTML-Fuzzing

Es gibt verschiedene Tools, die f√ºr HTML-Fuzzing verwendet werden k√∂nnen, darunter:

- Burp Suite: Eine beliebte Suite von Tools f√ºr Webanwendungssicherheit, die auch Funktionen f√ºr das Fuzzing von HTML bietet.
- OWASP ZAP: Ein weiteres beliebtes Open-Source-Tool f√ºr Webanwendungssicherheit, das auch Fuzzing-Funktionen enth√§lt.
- Wfuzz: Ein flexibles Fuzzing-Tool, das auch f√ºr das Fuzzing von HTML verwendet werden kann.

#### Best Practices f√ºr HTML-Fuzzing

Beim Durchf√ºhren von HTML-Fuzzing ist es wichtig, einige bew√§hrte Verfahren zu beachten:

- Verwenden Sie verschiedene Arten von Eingaben, um verschiedene Szenarien abzudecken.
- √úberpr√ºfen Sie die Serverantworten und das Verhalten der Anwendung sorgf√§ltig.
- Dokumentieren Sie alle gefundenen Schwachstellen und melden Sie diese dem Entwicklerteam.
- F√ºhren Sie das Fuzzing in einer kontrollierten Umgebung durch, um unbeabsichtigte Auswirkungen zu vermeiden.

Durch das regelm√§√üige Durchf√ºhren von HTML-Fuzzing k√∂nnen potenzielle Schwachstellen in Webanwendungen identifiziert und behoben werden, um die Sicherheit der Anwendung zu verbessern.
```javascript
// Heyes, Gareth. JavaScript for hackers: Learn to think like a hacker (p. 38). Kindle Edition.

// Fuzzing chars that can close an HTML comment

let log=[];
let div = document.createElement('div');
for(let i=0;i<=0x10ffff;i++){
div.innerHTML=`<!----${String.fromCodePoint(i)}><span></span>-->`;
if(div.querySelector('span')){
log.push(i);
}
}
console.log(log)//33,45,62
```
## **Analyse von Attributen**

Das Tool **Hackability Inspector** von Portswigger hilft dabei, die **Attribute** eines JavaScript-Objekts zu **analysieren**. √úberpr√ºfen Sie: [https://portswigger-labs.net/hackability/inspector/?input=x.contentWindow\&html=%3Ciframe%20src=//subdomain1.portswigger-labs.net%20id=x%3E](https://portswigger-labs.net/hackability/inspector/?input=x.contentWindow\&html=%3Ciframe%20src=//subdomain1.portswigger-labs.net%20id=x%3E)

## **.map js-Dateien**

* Trick zum Herunterladen von .map js-Dateien: [https://medium.com/@bitthebyte/javascript-for-bug-bounty-hunters-part-2-f82164917e7](https://medium.com/@bitthebyte/javascript-for-bug-bounty-hunters-part-2-f82164917e7)
* Sie k√∂nnen dieses Tool verwenden, um diese Dateien zu analysieren [https://github.com/paazmaya/shuji](https://github.com/paazmaya/shuji)

## "--" Zuweisung

Der Dekrement-Operator `--` ist auch eine Zuweisung. Dieser Operator nimmt einen Wert und verringert ihn um eins. Wenn dieser Wert keine Zahl ist, wird er auf `NaN` gesetzt. Dies kann verwendet werden, um den Inhalt von Variablen aus der Umgebung zu **entfernen**.

![](<../../.gitbook/assets/image (553).png>)

![](<../../.gitbook/assets/image (554).png>)

## Tricks mit Funktionen

### .call und .apply

Die Methode **`.call`** einer Funktion wird verwendet, um die Funktion auszuf√ºhren.\
Das **erste Argument**, das standardm√§√üig erwartet wird, ist der **Wert von `this`** und wenn **nichts** angegeben wird, ist **`window`** dieser Wert (sofern nicht der **`strict mode`** verwendet wird).
```javascript
function test_call(){
console.log(this.value); //baz
}
new_this={value:"hey!"}
test_call.call(new_this);

// To pass more arguments, just pass then inside .call()
function test_call() {
console.log(arguments[0]); //"arg1"
console.log(arguments[1]); //"arg2"
console.log(this); //[object Window]
}
test_call.call(null, "arg1", "arg2")

// If you use the "use strict" directive "this" will be null instead of window:
function test_call() {
"use strict";
console.log(this); //null
}
test_call.call(null)

//The apply function is pretty much exactly the same as the call function with one important difference, you can supply an array of arguments in the second argument:
function test_apply() {
console.log(arguments[0]); //"arg1"
console.log(arguments[1]); //"arg2"
console.log(this); //[object Window]
}
test_apply.apply(null, ["arg1", "arg2"])
```
### Pfeilfunktionen

Pfeilfunktionen erm√∂glichen es Ihnen, Funktionen in einer einzigen Zeile einfacher zu generieren (wenn Sie sie verstehen).
```javascript
// Traditional
function (a){ return a + 1; }
// Arrow forms
a => a + 100;
a => {a + 100};

// Traditional
function (a, b){ return a + b + 1; }
// Arrow
(a, b) => a + b + 100;

// Tradictional no args
let a = 4;
let b = 2;
function (){ return a + b + 1; }

// Arrow
let a = 4;
let b = 2;
() => a + b + 1;
```
So, die meisten der vorherigen Funktionen sind eigentlich nutzlos, weil wir sie nirgendwo speichern, um sie sp√§ter aufzurufen. Zum Beispiel das Erstellen der `plusone` Funktion:
```javascript
// Traductional
function plusone (a){ return a + 1; }

//Arrow
plusone = a => a + 100;
```
### Bind-Funktion

Die Bind-Funktion erm√∂glicht es, eine **Kopie** einer **Funktion zu erstellen**, wobei das **`this`**-Objekt und die **angegebenen Parameter** modifiziert werden.
```javascript
//This will use the this object and print "Hello World"
var fn = function ( param1, param2 ) {
console.info( this, param1, param2 );
}
fn('Hello', 'World')

//This will still use the this object and print "Hello World"
var copyFn = fn.bind();
copyFn('Hello', 'World')

//This will use the "console" object as "this" object inside the function and print "fixingparam1 Hello"
var bindFn_change = fn.bind(console, "fixingparam1");
bindFn_change('Hello', 'World')

//This will still use the this object and print "fixingparam1 Hello"
var bindFn_thisnull = fn.bind(null, "fixingparam1");
bindFn_change('Hello', 'World')

//This will still use the this object and print "fixingparam1 Hello"
var bindFn_this = fn.bind(this, "fixingparam1");
bindFn_change('Hello', 'World')
```
{% hint style="info" %}
Beachten Sie, dass Sie mit **`bind`** das **`this`**-Objekt manipulieren k√∂nnen, das verwendet wird, wenn die Funktion aufgerufen wird.
{% endhint %}

### Funktionscode-Leak

Wenn Sie auf das Objekt einer Funktion zugreifen k√∂nnen, k√∂nnen Sie den Code dieser Funktion erhalten.
```javascript
function afunc(){
return 1+1;
}
console.log(afunc.toString()); //This will print the code of the function
console.log(String(afunc)); //This will print the code of the function
console.log(this.afunc.toString()); //This will print the code of the function
console.log(global.afunc.toString()); //This will print the code of the function
```
In F√§llen, in denen die **Funktion keinen Namen hat**, k√∂nnen Sie dennoch den **Funktionscode** von innen ausdrucken:
```javascript
(function (){ return arguments.callee.toString(); })()
(function (){ return arguments[0]; })("arg0")
```
Einige **zuf√§llige** M√∂glichkeiten, den Code einer Funktion (einschlie√ülich Kommentaren) aus einer anderen Funktion zu **extrahieren**:
```javascript
(function (){ return retFunc => String(arguments[0]) })(a=>{/* Hidden commment */})()
(function (){ return retFunc => Array(arguments[0].toString()) })(a=>{/* Hidden commment */})()
(function (){ return String(this)}).bind(()=>{ /* Hidden commment */ })()
(u=>(String(u)))(_=>{ /* Hidden commment */ })
(u=>_=>(String(u)))(_=>{ /* Hidden commment */ })()
```
## Sandbox Escape - Wiederherstellung des window-Objekts

Das Window-Objekt erm√∂glicht den Zugriff auf global definierte Funktionen wie alert oder eval.

{% code overflow="wrap" %}
```javascript
// Some ways to access window
window.eval("alert(1)")
frames
globalThis
parent
self
top //If inside a frame, this is top most window

// Access window from document
document.defaultView.alert(1)
// Access document from a node object
node = document.createElement('div')
node.ownerDocument.defaultView.alert(1)

// There is a path property on each error event whose last element is the window
<img src onerror=event.path.pop().alert(1337)>
// In other browsers the method is
<img src onerror=event.composedPath().pop().alert(1337)>
// In case of svg, the "event" object is called "evt"
<svg><image href=1 onerror=evt.composedPath().pop().alert(1337)>

// Abusing Error.prepareStackTrace to get Window back
Error.prepareStackTrace=function(error, callSites){
2   callSites.shift().getThis().alert(1337);
3 };
4 new Error().stack

// From an HTML event
// Events from HTML are executed in this context
with(document) {
with(element) {
//executed event
}
}
// Because of that with(document) it's possible to access properties of document like:
<img src onerror=defaultView.alert(1337)>
<img src onerror=s=createElement('script');s.append('alert(1337)');appendChild(s)>
```
{% endcode %}

## Breakpoint bei Zugriff auf Wert

```javascript
Object.defineProperty(window, 'value', {
  get: function() {
    debugger;
    return this._value;
  },
  set: function(val) {
    this._value = val;
  }
});
```

This code sets a breakpoint whenever the `value` property is accessed. When the property is accessed, the `debugger` statement is triggered, allowing you to inspect the code execution at that point. This can be useful for debugging and understanding how the code is interacting with the `value` property.

```javascript
Object.defineProperty(window, 'value', {
  get: function() {
    debugger;
    return this._value;
  },
  set: function(val) {
    this._value = val;
  }
});
```

Dieser Code setzt einen Breakpoint, wann immer auf die `value`-Eigenschaft zugegriffen wird. Wenn die Eigenschaft abgerufen wird, wird die `debugger`-Anweisung ausgel√∂st, sodass Sie den Code an diesem Punkt inspizieren k√∂nnen. Dies kann n√ºtzlich sein, um Fehler zu beheben und zu verstehen, wie der Code mit der `value`-Eigenschaft interagiert.
```javascript
// Stop when a property in sessionStorage or localStorage is set/get
// via getItem or setItem functions
sessionStorage.getItem = localStorage.getItem  = function(prop) {
debugger;
return sessionStorage[prop];
}

localStorage.setItem = function(prop, val) {
debugger;
localStorage[prop] = val;
}
```

```javascript
// Stop when anyone sets or gets the property "ppmap" in any object
// For example sessionStorage.ppmap
// "123".ppmap
// Useful to find where weird properties are being set or accessed
// or to find where prototype pollutions are occurring

function debugAccess(obj, prop, debugGet=true){

var origValue = obj[prop];

Object.defineProperty(obj, prop, {
get: function () {
if ( debugGet )
debugger;
return origValue;
},
set: function(val) {
debugger;
origValue = val;
}
});
};

debugAccess(Object.prototype, 'ppmap')
```
## Automatischer Browserzugriff zum Testen von Payloads

In einigen F√§llen kann es n√ºtzlich sein, automatisierten Browserzugriff zu verwenden, um XSS-Payloads zu testen. Dies kann hilfreich sein, um zu √ºberpr√ºfen, ob der Payload erfolgreich ausgef√ºhrt wird und um die Auswirkungen auf die Zielseite zu beobachten.

Es gibt verschiedene Tools und Techniken, die verwendet werden k√∂nnen, um automatisierten Browserzugriff zu erm√∂glichen. Einige beliebte Optionen sind:

- **Selenium**: Selenium ist ein Open-Source-Framework, das die Automatisierung von Webbrowsern erm√∂glicht. Es unterst√ºtzt verschiedene Programmiersprachen wie Python, Java und C#. Mit Selenium k√∂nnen Sie Skripte schreiben, um den Browser zu steuern und Aktionen wie das Ausf√ºllen von Formularen, das Klicken auf Schaltfl√§chen und das √úberpr√ºfen von Ergebnissen durchzuf√ºhren.

- **Headless-Browser**: Ein Headless-Browser ist ein Webbrowser ohne Benutzeroberfl√§che. Er kann √ºber eine Befehlszeilenschnittstelle gesteuert werden und erm√∂glicht die Automatisierung von Browseraktionen. Beliebte Headless-Browser sind beispielsweise PhantomJS und Puppeteer.

- **Browser-Erweiterungen**: Einige Browser-Erweiterungen erm√∂glichen die Automatisierung von Browseraktionen. Zum Beispiel kann die Erweiterung "Tampermonkey" verwendet werden, um benutzerdefinierte JavaScript-Codefragmente in den Browser einzuf√ºgen und automatisierte Aktionen auszuf√ºhren.

Es ist wichtig zu beachten, dass automatisierter Browserzugriff in einigen F√§llen als b√∂sartige Aktivit√§t angesehen werden kann. Stellen Sie sicher, dass Sie die Zustimmung des Eigent√ºmers der Zielseite haben, bevor Sie automatisierten Browserzugriff verwenden.
```javascript
//Taken from https://github.com/svennergr/writeups/blob/master/inti/0621/README.md
const puppeteer = require("puppeteer");

const realPasswordLength = 3000;
async function sleep(ms) {
return new Promise((resolve) => setTimeout(resolve, ms));
}

(async () => {
const browser = await puppeteer.launch();
const page = await browser.newPage();
//Loop to iterate through different values
for (let i = 0; i < 10000; i += 100) {
console.log(`Run number ${i}`);
const input = `${"0".repeat(i)}${realPasswordLength}`;
console.log(`  https://challenge-0621.intigriti.io/passgen.php?passwordLength=${input}&allowNumbers=true&allowSymbols=true&timestamp=1624556811000`);
//Go to the page
await page.goto(
`https://challenge-0621.intigriti.io/passgen.php?passwordLength=${input}&allowNumbers=true&allowSymbols=true&timestamp=1624556811000`
);
//Call function "generate()" inside the page
await page.evaluate("generate()");
//Get node inner text from an HTML element
const passwordContent = await page.$$eval(
".alert .page-content",
(node) => node[0].innerText
);
//Transform the content and print it in console
const plainPassword = passwordContent.replace("Your password is: ", "");
if (plainPassword.length != realPasswordLength) {
console.log(i, plainPassword.length, plainPassword);
}

await sleep(1000);
}
await browser.close();
})();
```
<details>

<summary><strong>Lernen Sie AWS-Hacking von Null auf Held mit</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

* Arbeiten Sie in einem **Cybersicherheitsunternehmen**? M√∂chten Sie Ihr **Unternehmen in HackTricks bewerben**? Oder m√∂chten Sie Zugriff auf die **neueste Version von PEASS oder HackTricks als PDF herunterladen**? √úberpr√ºfen Sie die [**ABONNEMENTPL√ÑNE**](https://github.com/sponsors/carlospolop)!
* Entdecken Sie [**The PEASS Family**](https://opensea.io/collection/the-peass-family), unsere Sammlung exklusiver [**NFTs**](https://opensea.io/collection/the-peass-family).
* Holen Sie sich das [**offizielle PEASS & HackTricks-Merchandise**](https://peass.creator-spring.com).
* **Treten Sie der** [**üí¨**](https://emojipedia.org/speech-balloon/) [**Discord-Gruppe**](https://discord.gg/hRep4RUj7f) oder der [**Telegram-Gruppe**](https://t.me/peass) bei oder **folgen** Sie mir auf **Twitter** üê¶[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Teilen Sie Ihre Hacking-Tricks, indem Sie PRs an das** [**hacktricks repo**](https://github.com/carlospolop/hacktricks) **und das** [**hacktricks-cloud repo**](https://github.com/carlospolop/hacktricks-cloud) **senden**.

</details>
