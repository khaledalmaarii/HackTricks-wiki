# R贸偶ne sztuczki JS i istotne informacje

<details>

<summary><strong>Naucz si hakowa AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

* Pracujesz w **firmie cyberbezpieczestwa**? Chcesz zobaczy swoj **firm reklamowan w HackTricks**? A mo偶e chcesz mie dostp do **najnowszej wersji PEASS lub pobra HackTricks w formacie PDF**? Sprawd藕 [**PLAN SUBSKRYPCJI**](https://github.com/sponsors/carlospolop)!
* Odkryj [**Rodzin PEASS**](https://opensea.io/collection/the-peass-family), nasz kolekcj ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* Zdobd藕 [**oficjalne gad偶ety PEASS & HackTricks**](https://peass.creator-spring.com)
* **Docz do** [****](https://emojipedia.org/speech-balloon/) [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **led藕** mnie na **Twitterze** [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Podziel si swoimi sztuczkami hakerskimi, przesyajc PR-y do** [**repozytorium hacktricks**](https://github.com/carlospolop/hacktricks) **i** [**repozytorium hacktricks-cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

## Fuzzowanie JavaScript

### Poprawne znaki komentarza JS
```javascript
//This is a 1 line comment
/* This is a multiline comment*/
#!This is a 1 line comment, but "#!" must to be at the beggining of the line
-->This is a 1 line comment, but "-->" must to be at the beggining of the line


for (let j = 0; j < 128; j++) {
for (let k = 0; k < 128; k++) {
for (let l = 0; l < 128; l++) {
if (j == 34 || k ==34 || l ==34)
continue;
if (j == 0x0a || k ==0x0a || l ==0x0a)
continue;
if (j == 0x0d || k ==0x0d || l ==0x0d)
continue;
if (j == 0x3c || k ==0x3c || l ==0x3c)
continue;
if (
(j == 47 && k == 47)
||(k == 47 && l == 47)
)
continue;
try {
var cmd = String.fromCharCode(j) + String.fromCharCode(k) + String.fromCharCode(l) + 'a.orange.ctf"';
eval(cmd);
} catch(e) {
var err = e.toString().split('\n')[0].split(':')[0];
if (err === 'SyntaxError' || err === "ReferenceError")
continue
err = e.toString().split('\n')[0]
}
console.log(err,cmd);
}
}
}
//From: https://balsn.tw/ctf_writeup/20191012-hitconctfquals/#bounty-pl33z

// From: Heyes, Gareth. JavaScript for hackers: Learn to think like a hacker (p. 43). Kindle Edition.
log=[];
for(let i=0;i<=0xff;i++){
for(let j=0;j<=0xfff;j++){
try {
eval(`${String.fromCodePoint(i,j)}%$拢234$`)
log.push([i,j])
}catch(e){}
}
}
console.log(log)//[35,33],[47,47]
```
### Poprawne znaki nowej linii w JS

W jzyku JavaScript istnieje kilka poprawnych znak贸w nowej linii, kt贸re mo偶na u偶ywa w skryptach. Oto kilka z nich:

- `\n` - znak nowej linii
- `\r` - znak powrotu karetki
- `\u2028` - separator linii Unicode
- `\u2029` - separator akapitu Unicode

Te znaki nowej linii mog by u偶ywane w skryptach JavaScript do tworzenia nowych linii lub oddzielania blok贸w kodu.
```javascript
//Javascript interpret as new line these chars:
String.fromCharCode(10) //0x0a
String.fromCharCode(13) //0x0d
String.fromCharCode(8232) //0xe2 0x80 0xa8
String.fromCharCode(8233) //0xe2 0x80 0xa8

for (let j = 0; j < 65536; j++) {
try {
var cmd = '"aaaaa";'+String.fromCharCode(j) + '-->a.orange.ctf"';
eval(cmd);
} catch(e) {
var err = e.toString().split('\n')[0].split(':')[0];
if (err === 'SyntaxError' || err === "ReferenceError")
continue;
err = e.toString().split('\n')[0]
}
console.log(`[${err}]`,j,cmd);
}
//From: https://balsn.tw/ctf_writeup/20191012-hitconctfquals/#bounty-pl33z
```
### Poprawne spacje w wywoaniu funkcji JS

W niekt贸rych przypadkach, podczas wywoywania funkcji w JavaScript, mo偶na u偶y spacji jako separator贸w midzy argumentami. Przykadem jest:

```javascript
functionName argument1 argument2 argument3
```

W powy偶szym przykadzie, spacje s u偶ywane jako separator midzy argumentami `argument1`, `argument2` i `argument3`. Ta technika mo偶e by wykorzystana do ukrycia kodu zoliwego w wywoaniu funkcji, co mo偶e prowadzi do atak贸w typu Cross-Site Scripting (XSS).
```javascript
// Heyes, Gareth. JavaScript for hackers: Learn to think like a hacker (pp. 40-41). Kindle Edition.

// Check chars that can be put in between in func name and the ()
function x(){}

log=[];
for(let i=0;i<=0x10ffff;i++){
try {
eval(`x${String.fromCodePoint(i)}()`)
log.push(i)
}catch(e){}
}

console.log(log)v//9,10,11,12,13,32,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,813 232,8233,8239,8287,12288,65279
```
### **Poprawne znaki do generowania cig贸w znak贸w**

Below is a list of valid characters that can be used to generate strings:

Poni偶ej znajduje si lista poprawnych znak贸w, kt贸re mo偶na u偶y do generowania cig贸w znak贸w:

```html
< > " ' % ; ( ) & + - * / = \ ! [ ] { } | ^ ~ ` @ $ # , . ? _ :
```

These characters can be used in various scenarios, such as crafting payloads for XSS attacks or manipulating input fields.

Te znaki mog by u偶ywane w r贸偶nych scenariuszach, takich jak tworzenie adunk贸w dla atak贸w XSS lub manipulowanie polami wejciowymi.
```javascript
// Heyes, Gareth. JavaScript for hackers: Learn to think like a hacker (pp. 41-42). Kindle Edition.

// Check which pairs of chars can make something be a valid string
log=[];
for(let i=0;i<=0x10ffff;i++){
try {
eval(`${String.fromCodePoint(i)}%$拢234${String.fromCodePoint(i)}`)
log.push(i)
}catch(e){}
}
console.log(log) //34,39,47,96
//single quote, quotes, backticks & // (regex)
```
### **Surrogate Pairs BF**

Ta technika nie bdzie bardzo przydatna do XSS, ale mo偶e by przydatna do omijania ochrony WAF. Ten kod Pythona przyjmuje jako wejcie 2 bajty i wyszukuje pary zastpcze, kt贸re maj pierwszy bajt jako ostatnie bajty pary zastpczej wysokiej i ostatni bajt jako ostatni bajt pary zastpczej niskiej.
```python
def unicode(findHex):
for i in range(0,0xFFFFF):
H = hex(int(((i - 0x10000) / 0x400) + 0xD800))
h = chr(int(H[-2:],16))
L = hex(int(((i - 0x10000) % 0x400 + 0xDC00)))
l = chr(int(L[-2:],16))
if(h == findHex[0]) and (l == findHex[1]):
print(H.replace("0x","\\u")+L.replace("0x","\\u"))
```
Wicej informacji:

* [https://github.com/dreadlocked/ctf-writeups/blob/master/nn8ed/README.md](https://github.com/dreadlocked/ctf-writeups/blob/master/nn8ed/README.md)
* [https://mathiasbynens.be/notes/javascript-unicode](https://mathiasbynens.be/notes/javascript-unicode) [https://mathiasbynens.be/notes/javascript-encoding](https://mathiasbynens.be/notes/javascript-encoding)

### Fuzzowanie protokou `javascript{}:`
```javascript
// Heyes, Gareth. JavaScript for hackers: Learn to think like a hacker (p. 34). Kindle Edition.
log=[];
let anchor = document.createElement('a');
for(let i=0;i<=0x10ffff;i++){
anchor.href = `javascript${String.fromCodePoint(i)}:`;
if(anchor.protocol === 'javascript:') {
log.push(i);
}
}
console.log(log)//9,10,13,58
// Note that you could BF also other possitions of the use of multiple chars

// Test one option
let anchor = document.createElement('a');
anchor.href = `javascript${String.fromCodePoint(58)}:alert(1337)`;
anchor.append('Click me')
document.body.append(anchor)

// Another way to test
<a href="&#12;javascript:alert(1337)">Test</a>
```
### Fuzzowanie adresu URL

URL Fuzzing jest technik polegajc na wysyaniu r贸偶nych, nieprawidowych lub losowych danych do adresu URL w celu znalezienia podatnoci. Mo偶e to obejmowa zmian parametr贸w, dodawanie znak贸w specjalnych lub manipulacj cie偶k URL. Celem jest znalezienie luk w zabezpieczeniach, kt贸re mog prowadzi do atak贸w XSS (Cross-Site Scripting) lub innych podobnych zagro偶e.

#### Przykady technik fuzzowania URL:

1. **Zmiana parametr贸w**: Mo偶na zmienia wartoci parametr贸w w adresie URL, aby sprawdzi, czy aplikacja jest odporna na nieprawidowe dane. Na przykad, jeli adres URL zawiera parametr "id", mo偶na spr贸bowa wprowadzi r贸偶ne wartoci, takie jak liczby, znaki specjalne lub cigi znak贸w.

2. **Dodawanie znak贸w specjalnych**: Dodawanie znak贸w specjalnych, takich jak znaki specjalne HTML lub znaki kontrolne, mo偶e pom贸c w identyfikacji podatnoci XSS. Mo偶na spr贸bowa wstrzykn znaki specjalne w r贸偶ne czci adresu URL, takie jak parametry, cie偶ka lub fragment.

3. **Manipulacja cie偶k URL**: Zmiana cie偶ki URL mo偶e pom贸c w odkryciu podatnoci zwizanych z nieprawidowym przetwarzaniem cie偶ki. Mo偶na spr贸bowa zmienia nazwy katalog贸w, dodawa lub usuwa segmenty cie偶ki, aby sprawdzi, czy aplikacja reaguje w nieoczekiwany spos贸b.

#### Narzdzia do fuzzowania URL:

- **wfuzz**: Narzdzie do fuzzowania URL, kt贸re umo偶liwia automatyczne testowanie wielu kombinacji danych wejciowych.
- **Burp Suite**: Popularne narzdzie do testowania penetracyjnego, kt贸re zawiera modu do fuzzowania URL.
- **ZAP (Zed Attack Proxy)**: Inne popularne narzdzie do testowania penetracyjnego, kt贸re oferuje funkcje fuzzowania URL.

Fuzzowanie adresu URL jest wa偶nym krokiem w procesie testowania penetracyjnego aplikacji internetowych. Pozwala ono na identyfikacj podatnoci i zabezpieczenie aplikacji przed atakami XSS i innymi zagro偶eniami.
```javascript
// Heyes, Gareth. JavaScript for hackers: Learn to think like a hacker (pp. 36-37). Kindle Edition.

// Before the protocol
a=document.createElement('a');
log=[];
for(let i=0;i<=0x10ffff;i++){
a.href = `${String.fromCodePoint(i)}https://hacktricks.xyz`;
if(a.hostname === 'hacktricks.xyz'){
log.push(i);
}
}
console.log(log) //0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32

// Between the slashes
a=document.createElement('a');
log=[];
for(let i=0;i<=0x10ffff;i++){
a.href = `/${String.fromCodePoint(i)}/hacktricks.xyz`;
if(a.hostname === 'hacktricks.xyz'){
log.push(i);
}
}
console.log(log) //9,10,13,47,92
```
### Fuzzowanie HTML

Fuzzowanie HTML jest technik polegajc na wprowadzaniu nieprawidowych lub nieoczekiwanych danych do kodu HTML w celu znalezienia potencjalnych podatnoci. Jest to czsto stosowane podczas testowania bezpieczestwa aplikacji internetowych w celu wykrycia podatnoci na ataki XSS (Cross-Site Scripting).

Podczas fuzzowania HTML, atakujcy mo偶e wprowadza r贸偶ne kombinacje znak贸w, tag贸w HTML, atrybut贸w i innych element贸w, aby sprawdzi, czy aplikacja internetowa nieprawidowo interpretuje te dane i umo偶liwia wykonanie zoliwego kodu JavaScript na stronie.

Przykady nieprawidowych danych, kt贸re mog by u偶ywane podczas fuzzowania HTML, to:

- Wstrzykiwanie znak贸w specjalnych, takich jak znaki "<" i ">", kt贸re mog prowadzi do nieprawidowego zamknicia tag贸w HTML i otwarcia nowych tag贸w.
- Wstrzykiwanie atrybut贸w HTML, takich jak "onmouseover" lub "onclick", kt贸re mog umo偶liwi wykonanie zoliwego kodu JavaScript w momencie, gdy u偶ytkownik najedzie myszk na dany element lub kliknie na niego.
- Wstrzykiwanie kodu JavaScript wewntrz tag贸w HTML, takich jak "<script>", kt贸re mog by wykonane przez przegldark u偶ytkownika.

Fuzzowanie HTML jest wa偶nym narzdziem w arsenale pentestera, poniewa偶 pozwala na identyfikacj potencjalnych podatnoci XSS i zabezpieczenie aplikacji przed atakami.
```javascript
// Heyes, Gareth. JavaScript for hackers: Learn to think like a hacker (p. 38). Kindle Edition.

// Fuzzing chars that can close an HTML comment

let log=[];
let div = document.createElement('div');
for(let i=0;i<=0x10ffff;i++){
div.innerHTML=`<!----${String.fromCodePoint(i)}><span></span>-->`;
if(div.querySelector('span')){
log.push(i);
}
}
console.log(log)//33,45,62
```
## **Analizowanie atrybut贸w**

Narzdzie **Hackability inspector** od Portswigger pomaga **analizowa** atrybuty obiektu JavaScript. Sprawd藕: [https://portswigger-labs.net/hackability/inspector/?input=x.contentWindow\&html=%3Ciframe%20src=//subdomain1.portswigger-labs.net%20id=x%3E](https://portswigger-labs.net/hackability/inspector/?input=x.contentWindow\&html=%3Ciframe%20src=//subdomain1.portswigger-labs.net%20id=x%3E)

## **Pliki .map js**

* Sztuczka do pobierania plik贸w .map js: [https://medium.com/@bitthebyte/javascript-for-bug-bounty-hunters-part-2-f82164917e7](https://medium.com/@bitthebyte/javascript-for-bug-bounty-hunters-part-2-f82164917e7)
* Mo偶esz u偶y tego narzdzia do analizy tych plik贸w [https://github.com/paazmaya/shuji](https://github.com/paazmaya/shuji)

## Przypisanie "--"

Operator dekrementacji `--` jest r贸wnie偶 przypisaniem. Ten operator pobiera warto, a nastpnie dekrementuje j o jeden. Jeli ta warto nie jest liczb, zostanie ustawiona na `NaN`. Mo偶e to by u偶ywane do **usunicia zawartoci zmiennych z otoczenia**.

![](<../../.gitbook/assets/image (553).png>)

![](<../../.gitbook/assets/image (554).png>)

## Sztuczki z funkcjami

### .call i .apply

Metoda **`.call`** funkcji su偶y do **uruchamiania funkcji**.\
**Pierwszy argument**, kt贸ry oczekuje domylnie, to **warto `this`** i jeli **nic** nie zostanie podane, **`window`** bdzie t wartoci (chyba 偶e u偶ywany jest **`tryb cisy`**).
```javascript
function test_call(){
console.log(this.value); //baz
}
new_this={value:"hey!"}
test_call.call(new_this);

// To pass more arguments, just pass then inside .call()
function test_call() {
console.log(arguments[0]); //"arg1"
console.log(arguments[1]); //"arg2"
console.log(this); //[object Window]
}
test_call.call(null, "arg1", "arg2")

// If you use the "use strict" directive "this" will be null instead of window:
function test_call() {
"use strict";
console.log(this); //null
}
test_call.call(null)

//The apply function is pretty much exactly the same as the call function with one important difference, you can supply an array of arguments in the second argument:
function test_apply() {
console.log(arguments[0]); //"arg1"
console.log(arguments[1]); //"arg2"
console.log(this); //[object Window]
}
test_apply.apply(null, ["arg1", "arg2"])
```
### Funkcje strzakowe

Funkcje strzakowe pozwalaj atwiej generowa funkcje w jednym wierszu (jeli je rozumiesz)
```javascript
// Traditional
function (a){ return a + 1; }
// Arrow forms
a => a + 100;
a => {a + 100};

// Traditional
function (a, b){ return a + b + 1; }
// Arrow
(a, b) => a + b + 100;

// Tradictional no args
let a = 4;
let b = 2;
function (){ return a + b + 1; }

// Arrow
let a = 4;
let b = 2;
() => a + b + 1;
```
Wic wikszo poprzednich funkcji jest waciwie bezu偶yteczna, poniewa偶 nie zapisujemy ich nigdzie, aby je zachowa i wywoa. Przykad tworzenia funkcji `plusone`:
```javascript
// Traductional
function plusone (a){ return a + 1; }

//Arrow
plusone = a => a + 100;
```
### Funkcja bind

Funkcja bind pozwala na utworzenie **kopii** funkcji, modyfikujc obiekt **`this`** oraz podane **parametry**.
```javascript
//This will use the this object and print "Hello World"
var fn = function ( param1, param2 ) {
console.info( this, param1, param2 );
}
fn('Hello', 'World')

//This will still use the this object and print "Hello World"
var copyFn = fn.bind();
copyFn('Hello', 'World')

//This will use the "console" object as "this" object inside the function and print "fixingparam1 Hello"
var bindFn_change = fn.bind(console, "fixingparam1");
bindFn_change('Hello', 'World')

//This will still use the this object and print "fixingparam1 Hello"
var bindFn_thisnull = fn.bind(null, "fixingparam1");
bindFn_change('Hello', 'World')

//This will still use the this object and print "fixingparam1 Hello"
var bindFn_this = fn.bind(this, "fixingparam1");
bindFn_change('Hello', 'World')
```
{% hint style="info" %}
Zauwa偶, 偶e u偶ywajc **`bind`** mo偶esz manipulowa obiektem **`this`**, kt贸ry zostanie u偶yty podczas wywoywania funkcji.
{% endhint %}

### Wyciek kodu funkcji

Jeli masz **dostp do obiektu** funkcji, mo偶esz **uzyska kod** tej funkcji.
```javascript
function afunc(){
return 1+1;
}
console.log(afunc.toString()); //This will print the code of the function
console.log(String(afunc)); //This will print the code of the function
console.log(this.afunc.toString()); //This will print the code of the function
console.log(global.afunc.toString()); //This will print the code of the function
```
W przypadkach, gdy **funkcja nie ma nazwy**, nadal mo偶esz wydrukowa **kod funkcji** z wntrza:
```javascript
(function (){ return arguments.callee.toString(); })()
(function (){ return arguments[0]; })("arg0")
```
Poni偶ej przedstawiam **losowe** sposoby na **wydobycie kodu** funkcji (nawet komentarzy) z innej funkcji:
```javascript
(function (){ return retFunc => String(arguments[0]) })(a=>{/* Hidden commment */})()
(function (){ return retFunc => Array(arguments[0].toString()) })(a=>{/* Hidden commment */})()
(function (){ return String(this)}).bind(()=>{ /* Hidden commment */ })()
(u=>(String(u)))(_=>{ /* Hidden commment */ })
(u=>_=>(String(u)))(_=>{ /* Hidden commment */ })()
```
## Ucieczka z piaskownicy - Odzyskiwanie obiektu okna

Obiekt Window pozwala na dostp do globalnie zdefiniowanych funkcji, takich jak alert lub eval.

{% code overflow="wrap" %}
```javascript
// Some ways to access window
window.eval("alert(1)")
frames
globalThis
parent
self
top //If inside a frame, this is top most window

// Access window from document
document.defaultView.alert(1)
// Access document from a node object
node = document.createElement('div')
node.ownerDocument.defaultView.alert(1)

// There is a path property on each error event whose last element is the window
<img src onerror=event.path.pop().alert(1337)>
// In other browsers the method is
<img src onerror=event.composedPath().pop().alert(1337)>
// In case of svg, the "event" object is called "evt"
<svg><image href=1 onerror=evt.composedPath().pop().alert(1337)>

// Abusing Error.prepareStackTrace to get Window back
Error.prepareStackTrace=function(error, callSites){
2   callSites.shift().getThis().alert(1337);
3 };
4 new Error().stack

// From an HTML event
// Events from HTML are executed in this context
with(document) {
with(element) {
//executed event
}
}
// Because of that with(document) it's possible to access properties of document like:
<img src onerror=defaultView.alert(1337)>
<img src onerror=s=createElement('script');s.append('alert(1337)');appendChild(s)>
```
{% endcode %}

## Przerwanie na dostp do wartoci

```javascript
Object.defineProperty(window, 'value', {
  get: function() {
    debugger;
    return this._value;
  },
  set: function(val) {
    this._value = val;
  }
});
```

Ten kod JavaScript tworzy punkt przerwania, kt贸ry zostanie wywoany, gdy nastpi dostp do wartoci. Gdy kod ten jest uruchamiany w przegldarce, zostaje utworzona nowa waciwo `value` dla obiektu `window`. Ta waciwo ma dwie metody: `get` i `set`. Metoda `get` zostanie wywoana, gdy nastpi dostp do wartoci, a metoda `set` zostanie wywoana, gdy warto zostanie ustawiona. W obu przypadkach, kod `debugger` powoduje zatrzymanie wykonywania skryptu i uruchomienie narzdzia do debugowania przegldarki. Mo偶na to wykorzysta do przechwycenia i analizy wartoci w czasie rzeczywistym.
```javascript
// Stop when a property in sessionStorage or localStorage is set/get
// via getItem or setItem functions
sessionStorage.getItem = localStorage.getItem  = function(prop) {
debugger;
return sessionStorage[prop];
}

localStorage.setItem = function(prop, val) {
debugger;
localStorage[prop] = val;
}
```

```javascript
// Stop when anyone sets or gets the property "ppmap" in any object
// For example sessionStorage.ppmap
// "123".ppmap
// Useful to find where weird properties are being set or accessed
// or to find where prototype pollutions are occurring

function debugAccess(obj, prop, debugGet=true){

var origValue = obj[prop];

Object.defineProperty(obj, prop, {
get: function () {
if ( debugGet )
debugger;
return origValue;
},
set: function(val) {
debugger;
origValue = val;
}
});
};

debugAccess(Object.prototype, 'ppmap')
```
## Automatyczny dostp przegldarki do testowania payload贸w

Sometimes, during the testing of XSS vulnerabilities, it is necessary to automate the process of accessing a vulnerable web page with different payloads. This can be achieved by using various tools and techniques.

Czasami, podczas testowania podatnoci XSS, konieczne jest zautomatyzowanie procesu dostpu do podatnej strony internetowej z r贸偶nymi payloadami. Mo偶na to osign za pomoc r贸偶nych narzdzi i technik.

One approach is to use headless browsers, such as Puppeteer or Selenium, which allow you to control a browser programmatically. These tools can be used to navigate to the vulnerable page and execute the XSS payloads automatically.

Jednym podejciem jest u偶ycie przegldarek bezinterfejsowych, takich jak Puppeteer lub Selenium, kt贸re umo偶liwiaj programowe sterowanie przegldark. Narzdzia te mog by u偶ywane do nawigacji do podatnej strony i automatycznego wykonywania payload贸w XSS.

Another option is to use browser automation frameworks, such as PhantomJS or CasperJS, which provide a higher-level API for interacting with the browser. These frameworks can be used to load the vulnerable page and inject the XSS payloads.

Inn opcj jest u偶ycie framework贸w automatyzacji przegldarek, takich jak PhantomJS lub CasperJS, kt贸re zapewniaj wy偶szy poziom interakcji z przegldark. Te frameworki mog by u偶ywane do wczytywania podatnej strony i wstrzykiwania payload贸w XSS.

Additionally, you can leverage tools like Burp Suite's Intruder or OWASP ZAP to automate the process of sending requests with different payloads to the vulnerable page.

Dodatkowo, mo偶na wykorzysta narzdzia takie jak Intruder w Burp Suite lub OWASP ZAP, aby zautomatyzowa proces wysyania 偶da z r贸偶nymi payloadami do podatnej strony.

Automating browser access to test payloads can save time and effort during the XSS vulnerability testing process, allowing for more efficient identification and exploitation of vulnerabilities.

Automatyzacja dostpu przegldarki do testowania payload贸w mo偶e zaoszczdzi czas i wysiek podczas procesu testowania podatnoci XSS, umo偶liwiajc bardziej efektywne identyfikowanie i wykorzystywanie podatnoci.
```javascript
//Taken from https://github.com/svennergr/writeups/blob/master/inti/0621/README.md
const puppeteer = require("puppeteer");

const realPasswordLength = 3000;
async function sleep(ms) {
return new Promise((resolve) => setTimeout(resolve, ms));
}

(async () => {
const browser = await puppeteer.launch();
const page = await browser.newPage();
//Loop to iterate through different values
for (let i = 0; i < 10000; i += 100) {
console.log(`Run number ${i}`);
const input = `${"0".repeat(i)}${realPasswordLength}`;
console.log(`  https://challenge-0621.intigriti.io/passgen.php?passwordLength=${input}&allowNumbers=true&allowSymbols=true&timestamp=1624556811000`);
//Go to the page
await page.goto(
`https://challenge-0621.intigriti.io/passgen.php?passwordLength=${input}&allowNumbers=true&allowSymbols=true&timestamp=1624556811000`
);
//Call function "generate()" inside the page
await page.evaluate("generate()");
//Get node inner text from an HTML element
const passwordContent = await page.$$eval(
".alert .page-content",
(node) => node[0].innerText
);
//Transform the content and print it in console
const plainPassword = passwordContent.replace("Your password is: ", "");
if (plainPassword.length != realPasswordLength) {
console.log(i, plainPassword.length, plainPassword);
}

await sleep(1000);
}
await browser.close();
})();
```
<details>

<summary><strong>Naucz si hakowa AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

* Pracujesz w **firmie zajmujcej si cyberbezpieczestwem**? Chcesz zobaczy, jak Twoja **firma jest reklamowana w HackTricks**? A mo偶e chcesz mie dostp do **najnowszej wersji PEASS lub pobra HackTricks w formacie PDF**? Sprawd藕 [**PLAN SUBSKRYPCYJNY**](https://github.com/sponsors/carlospolop)!
* Odkryj [**Rodzin PEASS**](https://opensea.io/collection/the-peass-family), nasz kolekcj ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family).
* Zdobd藕 [**oficjalne gad偶ety PEASS & HackTricks**](https://peass.creator-spring.com).
* **Docz do** [****](https://emojipedia.org/speech-balloon/) [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy Telegram**](https://t.me/peass) lub **led藕** mnie na **Twitterze** [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Podziel si swoimi sztuczkami hakerskimi, przesyajc PR-y do** [**repozytorium hacktricks**](https://github.com/carlospolop/hacktricks) **i** [**repozytorium hacktricks-cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>
