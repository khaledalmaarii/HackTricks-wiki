# SOME - AynÄ± KÃ¶ken YÃ¶ntem YÃ¼rÃ¼tme

<details>

<summary><strong>AWS hackleme konusunda sÄ±fÄ±rdan kahramana dÃ¶nÃ¼ÅŸÃ¼n!</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ±)</strong></a><strong> ile Ã¶ÄŸrenin!</strong></summary>

* **Bir siber gÃ¼venlik ÅŸirketinde mi Ã§alÄ±ÅŸÄ±yorsunuz? Åirketinizin HackTricks'te reklamÄ±nÄ± gÃ¶rmek ister misiniz? Ya da en son PEASS sÃ¼rÃ¼mÃ¼ne eriÅŸmek veya HackTricks'i PDF olarak indirmek ister misiniz?** [**ABONELÄ°K PLANLARINI**](https://github.com/sponsors/carlospolop) **kontrol edin!**
* [**PEASS Ailesi'ni**](https://opensea.io/collection/the-peass-family) keÅŸfedin, Ã¶zel [**NFT'lerimiz**](https://opensea.io/collection/the-peass-family) koleksiyonunu gÃ¶rÃ¼n
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* **KatÄ±lÄ±n** [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) **Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) veya **Twitter** ğŸ¦[**@carlospolopm**](https://twitter.com/hacktricks\_live)**'u takip edin.**
* **Hacking pÃ¼f noktalarÄ±nÄ±zÄ± paylaÅŸarak** [**hacktricks repo**](https://github.com/carlospolop/hacktricks) **ve** [**hacktricks-cloud repo**](https://github.com/carlospolop/hacktricks-cloud) **Ã¼zerinden PR gÃ¶nderin.**

</details>

### [WhiteIntel](https://whiteintel.io)

<figure><img src="../../.gitbook/assets/image (1227).png" alt=""><figcaption></figcaption></figure>

[**WhiteIntel**](https://whiteintel.io) **karanlÄ±k aÄŸ** destekli bir arama motorudur ve ÅŸirketin veya mÃ¼ÅŸterilerinin **hÄ±rsÄ±z kÃ¶tÃ¼ amaÃ§lÄ± yazÄ±lÄ±mlar tarafÄ±ndan tehlikeye atÄ±lÄ±p atÄ±lmadÄ±ÄŸÄ±nÄ± kontrol etmek iÃ§in Ã¼cretsiz** iÅŸlevsellikler sunar.

WhiteIntel'in asÄ±l amacÄ±, bilgi Ã§alan kÃ¶tÃ¼ amaÃ§lÄ± yazÄ±lÄ±mlardan kaynaklanan hesap ele geÃ§irmeleri ve fidye saldÄ±rÄ±larÄ±yla mÃ¼cadele etmektir.

Websitesini ziyaret edebilir ve motorlarÄ±nÄ± **Ã¼cretsiz** deneyebilirsiniz:

{% embed url="https://whiteintel.io" %}

***

## AynÄ± KÃ¶ken YÃ¶ntem YÃ¼rÃ¼tme

BazÄ± durumlarda bir sayfada sÄ±nÄ±rlÄ± bir ÅŸekilde javascript yÃ¼rÃ¼tebilirsiniz. Ã–rneÄŸin, bir **geri Ã§aÄŸrÄ± deÄŸerini kontrol edebileceÄŸiniz durumda**.

Bu durumlarda, yapabileceÄŸiniz en iyi ÅŸeylerden biri, **DOM'a eriÅŸmek ve orada bulabileceÄŸiniz hassas eylemi Ã§aÄŸÄ±rmaktÄ±r** (Ã¶rneÄŸin bir dÃ¼ÄŸmeye tÄ±klama). Ancak genellikle bu zayÄ±f noktayÄ± **DOM'da ilginÃ§ bir ÅŸey olmayan kÃ¼Ã§Ã¼k uÃ§ noktalarda bulacaksÄ±nÄ±z**.

Bu senaryolarda, bu saldÄ±rÄ± Ã§ok faydalÄ± olacaktÄ±r, Ã§Ã¼nkÃ¼ amacÄ±, **aynÄ± kÃ¶kenden farklÄ± bir sayfadaki DOM iÃ§indeki sÄ±nÄ±rlÄ± JS yÃ¼rÃ¼tÃ¼mÃ¼nÃ¼ kÃ¶tÃ¼ye kullanabilmektir** ve Ã§ok ilginÃ§ eylemler gerÃ§ekleÅŸtirebilmektir.

Temelde, saldÄ±rÄ± akÄ±ÅŸÄ± aÅŸaÄŸÄ±daki gibidir:

* **KÃ¶tÃ¼ye kullanabileceÄŸiniz bir geri Ã§aÄŸrÄ± bulun** (potansiyel olarak \[\w\\.\_]'ye sÄ±nÄ±rlÄ±).
* EÄŸer sÄ±nÄ±rlÄ± deÄŸilse ve herhangi bir JS yÃ¼rÃ¼tebiliyorsanÄ±z, bunu normal bir XSS olarak kÃ¶tÃ¼ye kullanabilirsiniz.
* **KurbanÄ±, saldÄ±rgan tarafÄ±ndan kontrol edilen bir sayfayÄ± aÃ§maya zorlayÄ±n**
* **Sayfa kendini** **farklÄ± bir pencerede aÃ§acak** (yeni pencere, baÅŸlangÄ±Ã§taki pencereyi referans alan **`opener`** nesnesine sahip olacaktÄ±r)
* **BaÅŸlangÄ±Ã§ sayfasÄ±**, **ilginÃ§ DOM'un bulunduÄŸu sayfayÄ± yÃ¼kleyecektir**.
* **Ä°kinci sayfa**, **geri Ã§aÄŸrÄ±yÄ± kÃ¶tÃ¼ye kullanarak zayÄ±f sayfayÄ± yÃ¼kleyecek ve** **`opener`** nesnesini kullanarak baÅŸlangÄ±Ã§ sayfasÄ±nda bazÄ± eylemleri **eriÅŸip yÃ¼rÃ¼tecektir** (ÅŸimdi ilginÃ§ DOM'u iÃ§eren).

{% hint style="danger" %}
Ä°lk sayfa, ikinci sayfayÄ± oluÅŸturduktan sonra yeni bir URL'ye eriÅŸse bile, **ikinci sayfanÄ±n `opener` nesnesi hala yeni DOM'daki ilk sayfaya geÃ§erli bir referanstÄ±r**.

AyrÄ±ca, ikinci sayfanÄ±n opener nesnesini kullanabilmesi iÃ§in **her iki sayfanÄ±n aynÄ± kÃ¶kende olmasÄ± gerekir**. Bu nedenle, bu zayÄ±flÄ±ÄŸÄ± kÃ¶tÃ¼ye kullanmak iÃ§in, aynÄ± kÃ¶kende bir tÃ¼r **XSS bulmanÄ±z gerekmektedir**.
{% endhint %}

### SÃ¶mÃ¼rÃ¼

* Bu formu kullanarak bu tÃ¼r bir zayÄ±flÄ±ÄŸÄ± sÃ¶mÃ¼rmek iÃ§in **PoC oluÅŸturabilirsiniz**: [https://www.someattack.com/Playground/SOMEGenerator](https://www.someattack.com/Playground/SOMEGenerator)
* Bir HTML Ã¶ÄŸesine tÄ±klama ile DOM yolunu bulmak iÃ§in bu tarayÄ±cÄ± eklentisini kullanabilirsiniz: [https://www.someattack.com/Playground/targeting\_tool](https://www.someattack.com/Playground/targeting\_tool)

### Ã–rnek

* [https://www.someattack.com/Playground/](https://www.someattack.com/Playground/) adresinde zayÄ±f bir Ã¶rnek bulabilirsiniz.
* Bu Ã¶rnekte sunucu, **geri Ã§aÄŸrÄ± parametresinin iÃ§eriÄŸine gÃ¶re javascript kodu oluÅŸturuyor ve** **HTML'ye ekliyor:** `<script>opener.{callbacl_content}</script>` . Bu nedenle, bu Ã¶rnekte `opener`'Ä±n kullanÄ±mÄ±nÄ± aÃ§Ä±kÃ§a belirtmenize gerek yoktur.
* AyrÄ±ca bu CTF Ã§Ã¶zÃ¼mÃ¼nÃ¼ kontrol edin: [https://ctftime.org/writeup/36068](https://ctftime.org/writeup/36068)

## Referanslar

* [https://conference.hitb.org/hitbsecconf2017ams/sessions/everybody-wants-some-advance-same-origin-method-execution/](https://conference.hitb.org/hitbsecconf2017ams/sessions/everybody-wants-some-advance-same-origin-method-execution/)
