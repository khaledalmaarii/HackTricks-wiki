# SOME - AynÄ± KÃ¶k YÃ¶ntem Ä°cra

<details>

<summary><strong>AWS hackleme konusunda sÄ±fÄ±rdan kahramana dÃ¶nÃ¼ÅŸÃ¼n</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ±)</strong></a><strong>ile Ã¶ÄŸrenin!</strong></summary>

* Bir **cybersecurity ÅŸirketinde** Ã§alÄ±ÅŸÄ±yor musunuz? **Åirketinizi HackTricks'te reklamÄ±nÄ± gÃ¶rmek** ister misiniz? veya **PEASS'Ä±n en son sÃ¼rÃ¼mÃ¼ne eriÅŸmek veya HackTricks'i PDF olarak indirmek** ister misiniz? [**ABONELÄ°K PLANLARINI**](https://github.com/sponsors/carlospolop) kontrol edin!
* [**The PEASS Ailesi'ni**](https://opensea.io/collection/the-peass-family) keÅŸfedin, Ã¶zel [**NFT koleksiyonumuz**](https://opensea.io/collection/the-peass-family)
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katÄ±lÄ±n** veya **Twitter**'da takip edin ğŸ¦[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Hacking hilelerinizi** [**hacktricks repo**](https://github.com/carlospolop/hacktricks) **ve** [**hacktricks-cloud repo**](https://github.com/carlospolop/hacktricks-cloud) **gÃ¶ndererek paylaÅŸÄ±n**.

</details>

## AynÄ± KÃ¶k YÃ¶ntem Ä°cra

BazÄ± durumlarda, bir sayfada sÄ±nÄ±rlÄ± bir javascript kodunu Ã§alÄ±ÅŸtÄ±rabilirsiniz. Ã–rneÄŸin, **Ã§alÄ±ÅŸtÄ±rÄ±lacak bir geri Ã§aÄŸÄ±rma deÄŸerini kontrol edebildiÄŸiniz** durumlarda.

Bu durumlarda, yapabileceÄŸiniz en iyi ÅŸeylerden biri, DOM'a eriÅŸerek orada bulabileceÄŸiniz hassas bir iÅŸlemi (Ã¶rneÄŸin bir dÃ¼ÄŸmeye tÄ±klama) Ã§aÄŸÄ±rmaktÄ±r. Ancak genellikle DOM'da ilginÃ§ bir ÅŸey olmayan **kÃ¼Ã§Ã¼k uÃ§ noktalarda** bu zafiyeti bulacaksÄ±nÄ±z.

Bu senaryolarda, bu saldÄ±rÄ± Ã§ok faydalÄ± olacaktÄ±r, Ã§Ã¼nkÃ¼ amacÄ±, **aynÄ± kÃ¶kten farklÄ± bir sayfadan DOM iÃ§indeki sÄ±nÄ±rlÄ± JS yÃ¼rÃ¼tmesini istismar etmek** ve daha ilginÃ§ iÅŸlemler yapmaktÄ±r.

Temel olarak, saldÄ±rÄ± akÄ±ÅŸÄ± aÅŸaÄŸÄ±daki gibidir:

* **KÃ¶tÃ¼ niyetli** tarafÄ±ndan kontrol edilen bir sayfayÄ± **kurbanÄ±n aÃ§masÄ±nÄ± saÄŸlayÄ±n**
* **Sayfa kendini** bir **farklÄ± pencerede** aÃ§acak (yeni pencere, baÅŸlangÄ±Ã§taki pencereye referans olan **`opener`** nesnesine sahip olacak)
* **BaÅŸlangÄ±Ã§ sayfasÄ±**, **ilginÃ§ DOM**'un bulunduÄŸu **sayfayÄ±** yÃ¼kleyecek.
* **Ä°kinci sayfa**, **geri Ã§aÄŸÄ±rma**yÄ± istismar eden ve **`opener`** nesnesini kullanarak **baÅŸlangÄ±Ã§ sayfasÄ±nda bazÄ± iÅŸlemleri eriÅŸip yÃ¼rÃ¼ten** **zafiyetli sayfayÄ±** yÃ¼kleyecektir (ÅŸimdi ilginÃ§ DOM'u iÃ§eren).

{% hint style="danger" %}
Ä°lk sayfa, ikinci sayfa oluÅŸturulduktan sonra yeni bir URL'ye eriÅŸse bile, **ikinci sayfanÄ±n `opener` nesnesi hala yeni DOM'daki ilk sayfaya geÃ§erli bir referanstÄ±r**.

AyrÄ±ca, ikinci sayfanÄ±n opener nesnesini kullanabilmesi iÃ§in **her iki sayfanÄ±n aynÄ± kÃ¶kte olmasÄ± gerekir**. Bu nedenle, bu zafiyeti istismar etmek iÃ§in bir tÃ¼r **aynÄ± kÃ¶kten XSS** bulmanÄ±z gerekmektedir.
{% endhint %}

### SÃ¶mÃ¼rÃ¼

* Bu tÃ¼r bir zafiyeti istismar etmek iÃ§in bir PoC oluÅŸturmak iÃ§in bu formu kullanabilirsiniz: [https://www.someattack.com/Playground/SOMEGenerator](https://www.someattack.com/Playground/SOMEGenerator)
* Bir HTML Ã¶ÄŸesine tÄ±klama ile bir DOM yolunu bulmak iÃ§in bu tarayÄ±cÄ± eklentisini kullanabilirsiniz: [https://www.someattack.com/Playground/targeting\_tool](https://www.someattack.com/Playground/targeting\_tool)

### Ã–rnek

* [https://www.someattack.com/Playground/](https://www.someattack.com/Playground/) adresinde zafiyetli bir Ã¶rnek bulabilirsiniz.
* Bu Ã¶rnekte sunucu, **geri Ã§aÄŸÄ±rma parametresinin iÃ§eriÄŸine** dayanarak **javascript kodu oluÅŸturuyor** ve **HTML'ye ekliyor:** `<script>opener.{callbacl_content}</script>`. Bu nedenle, bu Ã¶rnekte `opener`'Ä±n kullanÄ±mÄ±nÄ± aÃ§Ä±kÃ§a belirtmenize gerek yoktur.
* AyrÄ±ca bu CTF Ã§Ã¶zÃ¼mÃ¼nÃ¼ kontrol edin: [https://ctftime.org/writeup/36068](https://ctftime.org/writeup/36068)

## Referanslar

* [https://conference.hitb.org/hitbsecconf2017ams/sessions/everybody-wants-some-advance-same-origin-method-execution/](https://conference.hitb.org/hitbsecconf2017ams/sessions/everybody-wants-some-advance-same-origin-method-execution/)

<details>

<summary><strong>AWS hackleme konusunda sÄ±fÄ±rdan kahramana dÃ¶nÃ¼ÅŸÃ¼n</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ±)</strong></a><strong>ile Ã¶ÄŸrenin!</strong></summary>

* Bir **cybersecurity ÅŸirketinde** Ã§alÄ±ÅŸÄ±yor musunuz? **Åirketinizi HackTricks'te reklamÄ±nÄ± gÃ¶rmek** ister misiniz? veya **PEASS'Ä±n en son sÃ¼rÃ¼mÃ¼ne eriÅŸmek veya HackTricks'i PDF olarak indirmek** ister misiniz? [**ABONELÄ°K PLANLARINI**](https://github.com/sponsors/carlospolop) kontrol edin!
* [**The PEASS Ailesi'ni**](https://opensea.io/collection/the-peass-family) keÅŸfedin, Ã¶zel [**NFT koleksiyonumuz**](https://opensea.io/collection/the-peass-family)
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katÄ±lÄ±n** veya **Twitter**'da takip edin ğŸ¦[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Hacking hilelerinizi** [**hacktricks repo**](https://github.com/carlospolop/hacktricks) **ve** [**hacktricks-cloud repo**](https://github.com/carlospolop/hacktricks-cloud) **gÃ¶ndererek paylaÅŸÄ±n**.

</details>
