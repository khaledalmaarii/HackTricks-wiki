# SOME - Izvr코enje metoda sa istog izvora

<details>

<summary><strong>Nau캜ite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

* Da li radite u **kompaniji za kiberneti캜ku bezbednost**? 콯elite li da vidite svoju **kompaniju reklamiranu na HackTricks**? ili 쬰lite pristupiti **najnovijoj verziji PEASS-a ili preuzeti HackTricks u PDF formatu**? Proverite [**PLANOVE ZA PRIJAVU**](https://github.com/sponsors/carlospolop)!
* Otkrijte [**Porodicu PEASS**](https://opensea.io/collection/the-peass-family), na코u kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* Nabavite [**zvani캜ni PEASS & HackTricks swag**](https://peass.creator-spring.com)
* **Pridru쬴te se** [**游눫**](https://emojipedia.org/speech-balloon/) [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili me **pratite** na **Twitteru** 游냕[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Podelite svoje hakovanje trikove slanjem PR-ova na** [**hacktricks repozitorijum**](https://github.com/carlospolop/hacktricks) **i** [**hacktricks-cloud repozitorijum**](https://github.com/carlospolop/hacktricks-cloud).

</details>

### [WhiteIntel](https://whiteintel.io)

<figure><img src="/.gitbook/assets/image (1224).png" alt=""><figcaption></figcaption></figure>

[**WhiteIntel**](https://whiteintel.io) je pretra쬴va캜 pokretan **dark-webom** koji nudi **besplatne** funkcionalnosti za proveru da li je kompanija ili njeni korisnici **kompromitovani** od strane **malvera za kra캠u podataka**.

Primarni cilj WhiteIntela je borba protiv preuzimanja naloga i napada ransomvera koji proizilaze iz malvera za kra캠u informacija.

Mo쬰te posetiti njihovu veb lokaciju i isprobati njihovu ma코inu za **besplatno** na:

{% embed url="https://whiteintel.io" %}

---

## Izvr코enje metoda sa istog izvora

Postoja캖e situacije u kojima mo쬰te izvr코iti neki ograni캜eni JavaScript na stranici. Na primer, u slu캜aju kada mo쬰te [**kontrolisati vrednost povratnog poziva koja 캖e biti izvr코ena**](./#javascript-function).

U tim slu캜ajevima, jedna od najboljih stvari koje mo쬰te uraditi je **pristupiti DOM-u da biste pozvali bilo koju** osetljivu akciju koju mo쬰te prona캖i tamo (kao 코to je klik na dugme). Me캠utim, obi캜no 캖ete prona캖i ovu ranjivost u **malim krajnjim ta캜kama bez bilo 캜ega zanimljivog u DOM-u**.

U tim scenarijima, ovaj napad 캖e biti veoma koristan, jer je cilj da mo쬰te **zloupotrebiti ograni캜eno izvr코enje JS unutar DOM-a sa druge stranice sa istog domena** sa mnogo zanimljivih akcija.

Osnovno, tok napada je slede캖i:

* Prona캠ite **povratni poziv koji mo쬰te zloupotrebiti** (potencijalno ograni캜en na \[\w\\.\_]).
* Ako nije ograni캜en i mo쬰te izvr코iti bilo koji JS, mo쬰te jednostavno zloupotrebiti ovo kao redovni XSS
* Naterajte **rtvu da otvori stranicu** koju kontroli코e **napada캜**
* **Stranica 캖e se sama otvoriti** u **razli캜itom prozoru** (novi prozor 캖e imati objekat **`opener`** koji referi코e na po캜etni)
* **Po캜etna stranica** 캖e u캜itati **stranicu** gde se nalazi **zanimljiv DOM**.
* **Druga stranica** 캖e u캜itati **ranjivu stranicu zloupotrebljavaju캖i povratni poziv** i koriste캖i objekat **`opener`** da **pristupi i izvr코i neku akciju na po캜etnoj stranici** (koja sada sadr쬴 zanimljiv DOM).

{% hint style="danger" %}
Imajte na umu da 캜ak i ako po캜etna stranica pristupi novom URL-u nakon 코to je kreirala drugu stranicu, **`opener` objekat druge stranice i dalje je validna referenca na prvu stranicu u novom DOM-u**.

Osim toga, da bi druga stranica mogla koristiti objekat opener, **obe stranice moraju biti na istom izvoru**. To je razlog za코to, da biste zloupotrebili ovu ranjivost, morate prona캖i neku vrstu **XSS-a na istom izvoru**.
{% endhint %}

### Eksploatacija

* Mo쬰te koristiti ovaj obrazac da **generi코ete PoC** za eksploataciju ovog tipa ranjivosti: [https://www.someattack.com/Playground/SOMEGenerator](https://www.someattack.com/Playground/SOMEGenerator)
* Da biste prona코li putanju DOM-a do HTML elementa sa klikom, mo쬰te koristiti ovaj browser dodatak: [https://www.someattack.com/Playground/targeting\_tool](https://www.someattack.com/Playground/targeting\_tool)

### Primer

* Mo쬰te prona캖i ranjiv primer na [https://www.someattack.com/Playground/](https://www.someattack.com/Playground/)
* Imajte na umu da u ovom primeru server **generi코e JavaScript kod** i **dodaje** ga u HTML na osnovu **sadr쬬ja parametra povratnog poziva:** `<script>opener.{callbacl_content}</script>` . Zato u ovom primeru ne morate eksplicitno navesti kori코캖enje `opener`.
* Tako캠e proverite ovaj CTF writeup: [https://ctftime.org/writeup/36068](https://ctftime.org/writeup/36068)

## Reference

* [https://conference.hitb.org/hitbsecconf2017ams/sessions/everybody-wants-some-advance-same-origin-method-execution/](https://conference.hitb.org/hitbsecconf2017ams/sessions/everybody-wants-some-advance-same-origin-method-execution/) 

<details>

<summary><strong>Nau캜ite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

* Da li radite u **kompaniji za kiberneti캜ku bezbednost**? 콯elite li da vidite svoju **kompaniju reklamiranu na HackTricks**? ili 쬰lite pristupiti **najnovijoj verziji PEASS-a ili preuzeti HackTricks u PDF formatu**? Proverite [**PLANOVE ZA PRIJAVU**](https://github.com/sponsors/carlospolop)!
* Otkrijte [**Porodicu PEASS**](https://opensea.io/collection/the-peass-family), na코u kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* Nabavite [**zvani캜ni PEASS & HackTricks swag**](https://peass.creator-spring.com)
* **Pridru쬴te se** [**游눫**](https://emojipedia.org/speech-balloon/) [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili me **pratite** na **Twitteru** 游냕[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Podelite svoje hakovanje trikove slanjem PR-ova na** [**hacktricks repozitorijum**](https://github.com/carlospolop/hacktricks) **i** [**hacktricks-cloud repozitorijum**](https://github.com/carlospolop/hacktricks-cloud).

</details>
