# SOME - IzvrÅ¡enje metoda sa istog izvora

<details>

<summary><strong>NauÄite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

* Da li radite u **kompaniji za kibernetiÄku bezbednost**? Å½elite li da vidite svoju **kompaniju reklamiranu na HackTricks**? ili Å¾elite pristupiti **najnovijoj verziji PEASS ili preuzeti HackTricks u PDF formatu**? Proverite [**PLANOVE ZA PRIJAVU**](https://github.com/sponsors/carlospolop)!
* Otkrijte [**Porodicu PEASS**](https://opensea.io/collection/the-peass-family), naÅ¡u kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* Nabavite [**zvaniÄni PEASS & HackTricks suvenir**](https://peass.creator-spring.com)
* **PridruÅ¾ite se** [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili me **pratite** na **Twitteru** ğŸ¦[**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **Podelite svoje hakovanje trikove slanjem PR-ova na** [**hacktricks repozitorijum**](https://github.com/carlospolop/hacktricks) **i** [**hacktricks-cloud repozitorijum**](https://github.com/carlospolop/hacktricks-cloud).

</details>

### [WhiteIntel](https://whiteintel.io)

<figure><img src="../../.gitbook/assets/image (1227).png" alt=""><figcaption></figcaption></figure>

[**WhiteIntel**](https://whiteintel.io) je pretraÅ¾ivaÄ pokrenut na **dark web-u** koji nudi **besplatne** funkcionalnosti za proveru da li je kompanija ili njeni korisnici **kompromitovani** od strane **malvera za kraÄ‘u podataka**.

Primarni cilj WhiteIntela je borba protiv preuzimanja naloga i napada ransomvera koji proizilaze iz malvera za kraÄ‘u informacija.

MoÅ¾ete posetiti njihovu veb lokaciju i isprobati njihovu maÅ¡inu za **besplatno** na:

{% embed url="https://whiteintel.io" %}

***

## IzvrÅ¡enje metoda sa istog izvora

PostojaÄ‡e situacije u kojima moÅ¾ete izvrÅ¡iti odreÄ‘eni JavaScript na stranici. Na primer, u sluÄaju kada moÅ¾ete [**kontrolisati vrednost povratnog poziva koja Ä‡e biti izvrÅ¡ena**](./#javascript-function).

U tim sluÄajevima, jedna od najboljih stvari koje moÅ¾ete uraditi je **pristup DOM-u da biste pozvali bilo koju** osetljivu akciju koju moÅ¾ete pronaÄ‡i tamo (kao Å¡to je klik na dugme). MeÄ‘utim, obiÄno Ä‡ete pronaÄ‡i ovu ranjivost u **malim krajnjim taÄkama bez bilo Äega zanimljivog u DOM-u**.

U tim scenarijima, ovaj napad Ä‡e biti veoma koristan, jer je cilj da moÅ¾ete **zloupotrebiti ograniÄeno izvrÅ¡enje JS unutar DOM-a sa druge stranice sa istog domena** sa mnogo zanimljivih akcija.

Osnovno, tok napada je sledeÄ‡i:

* PronaÄ‘ite **povratni poziv koji moÅ¾ete zloupotrebiti** (potencijalno ograniÄen na \[\w\\.\_]).
* Ako nije ograniÄen i moÅ¾ete izvrÅ¡iti bilo koji JS, moÅ¾ete jednostavno zloupotrebiti ovo kao redovan XSS
* Naterajte **Å¾rtvu da otvori stranicu** koju kontroliÅ¡e **napadaÄ**
* **Stranica Ä‡e se sama otvoriti** u **razliÄitom prozoru** (novi prozor Ä‡e imati objekat **`opener`** koji referiÅ¡e na poÄetni)
* **PoÄetna stranica** Ä‡e uÄitati **stranicu** gde se nalazi **zanimljiv DOM**.
* **Druga stranica** Ä‡e uÄitati **ranjivu stranicu zloupotrebljavajuÄ‡i povratni poziv** i koristeÄ‡i objekat **`opener`** da **pristupi i izvrÅ¡i neku akciju na poÄetnoj stranici** (koja sada sadrÅ¾i zanimljiv DOM).

{% hint style="danger" %}
Imajte na umu da Äak i ako poÄetna stranica pristupi novom URL-u nakon Å¡to je kreirala drugu stranicu, **`opener` objekat druge stranice i dalje je validna referenca na prvu stranicu u novom DOM-u**.

Osim toga, da bi druga stranica mogla koristiti objekat opener, **obe stranice moraju biti na istom izvoru**. To je razlog zaÅ¡to, da biste zloupotrebili ovu ranjivost, morate pronaÄ‡i neku vrstu **XSS-a na istom izvoru**.
{% endhint %}

### Eksploatacija

* MoÅ¾ete koristiti ovaj obrazac da **generiÅ¡ete PoC** za eksploataciju ovog tipa ranjivosti: [https://www.someattack.com/Playground/SOMEGenerator](https://www.someattack.com/Playground/SOMEGenerator)
* Da biste pronaÅ¡li putanju DOM-a do HTML elementa sa klikom, moÅ¾ete koristiti ovaj browser dodatak: [https://www.someattack.com/Playground/targeting\_tool](https://www.someattack.com/Playground/targeting\_tool)

### Primer

* MoÅ¾ete pronaÄ‡i ranjiv primer na [https://www.someattack.com/Playground/](https://www.someattack.com/Playground/)
* Imajte na umu da u ovom primeru server **generiÅ¡e JavaScript kod** i **dodaje** ga u HTML na osnovu **sadrÅ¾aja parametra povratnog poziva:** `<script>opener.{callbacl_content}</script>` . Zato u ovom primeru ne morate eksplicitno navesti koriÅ¡Ä‡enje `opener`.
* TakoÄ‘e proverite ovaj CTF writeup: [https://ctftime.org/writeup/36068](https://ctftime.org/writeup/36068)

## Reference

* [https://conference.hitb.org/hitbsecconf2017ams/sessions/everybody-wants-some-advance-same-origin-method-execution/](https://conference.hitb.org/hitbsecconf2017ams/sessions/everybody-wants-some-advance-same-origin-method-execution/) 

<details>

<summary><strong>NauÄite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

* Da li radite u **kompaniji za kibernetiÄku bezbednost**? Å½elite li da vidite svoju **kompaniju reklamiranu na HackTricks**? ili Å¾elite pristupiti **najnovijoj verziji PEASS ili preuzeti HackTricks u PDF formatu**? Proverite [**PLANOVE ZA PRIJAVU**](https://github.com/sponsors/carlospolop)!
* Otkrijte [**Porodicu PEASS**](https://opensea.io/collection/the-peass-family), naÅ¡u kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* Nabavite [**zvaniÄni PEASS & HackTricks suvenir**](https://peass.creator-spring.com)
* **PridruÅ¾ite se** [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili me **pratite** na **Twitteru** ğŸ¦[**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **Podelite svoje hakovanje trikove slanjem PR-ova na** [**hacktricks repozitorijum**](https://github.com/carlospolop/hacktricks) **i** [**hacktricks-cloud repozitorijum**](https://github.com/carlospolop/hacktricks-cloud).

</details>
