# SOME - AynÄ± KÃ¶ken YÃ¶ntem YÃ¼rÃ¼tme

<details>

<summary><strong>AWS hackleme konusunda sÄ±fÄ±rdan kahraman olmaya kadar Ã¶ÄŸrenin</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ±)</strong></a><strong>!</strong></summary>

* **Bir siber gÃ¼venlik ÅŸirketinde mi Ã§alÄ±ÅŸÄ±yorsunuz?** **Åirketinizi HackTricks'te reklam gÃ¶rmek ister misiniz?** ya da **PEASS'Ä±n en son sÃ¼rÃ¼mÃ¼ne eriÅŸmek veya HackTricks'i PDF olarak indirmek ister misiniz?** [**ABONELÄ°K PLANLARINI**](https://github.com/sponsors/carlospolop) kontrol edin!
* [**PEASS Ailesi'ni**](https://opensea.io/collection/the-peass-family) keÅŸfedin, Ã¶zel [**NFT'lerimiz**](https://opensea.io/collection/the-peass-family) koleksiyonumuzu gÃ¶rÃ¼n
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* **KatÄ±lÄ±n** [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) veya **Twitter** ğŸ¦[**@carlospolopm**](https://twitter.com/hacktricks_live)**'u takip edin**.
* **Hacking pÃ¼f noktalarÄ±nÄ±zÄ± gÃ¶ndererek** [**hacktricks repo**](https://github.com/carlospolop/hacktricks) **ve** [**hacktricks-cloud repo**](https://github.com/carlospolop/hacktricks-cloud) **Ã¼zerinden paylaÅŸÄ±n**.

</details>

### [WhiteIntel](https://whiteintel.io)

<figure><img src="/.gitbook/assets/image (1224).png" alt=""><figcaption></figcaption></figure>

[**WhiteIntel**](https://whiteintel.io) **karanlÄ±k aÄŸ** destekli bir arama motorudur ve ÅŸirketin veya mÃ¼ÅŸterilerinin **hÄ±rsÄ±z kÃ¶tÃ¼ amaÃ§lÄ± yazÄ±lÄ±mlar** tarafÄ±ndan **kompromize edilip edilmediÄŸini kontrol etmek iÃ§in Ã¼cretsiz** iÅŸlevsellikler sunar.

WhiteIntel'in asÄ±l amacÄ±, bilgi Ã§alan kÃ¶tÃ¼ amaÃ§lÄ± yazÄ±lÄ±mlardan kaynaklanan hesap ele geÃ§irmeleri ve fidye yazÄ±lÄ±mÄ± saldÄ±rÄ±larÄ±yla mÃ¼cadele etmektir.

Websitesini ziyaret edebilir ve motorlarÄ±nÄ± **Ã¼cretsiz** deneyebilirsiniz:

{% embed url="https://whiteintel.io" %}

---

## AynÄ± KÃ¶ken YÃ¶ntem YÃ¼rÃ¼tme

BazÄ± durumlarda bir sayfada sÄ±nÄ±rlÄ± bir ÅŸekilde javascript yÃ¼rÃ¼tebilirsiniz. Ã–rneÄŸin, [**yÃ¼rÃ¼tÃ¼lecek bir geri Ã§aÄŸrÄ± deÄŸerini kontrol edebileceÄŸiniz durumlar**](./#javascript-function) gibi.

Bu durumlarda, yapabileceÄŸiniz en iyi ÅŸeylerden biri, **DOM'a eriÅŸmek ve orada bulabileceÄŸiniz hassas eylemleri Ã§aÄŸÄ±rmaktÄ±r** (Ã¶rneÄŸin bir dÃ¼ÄŸmeye tÄ±klamak gibi). Ancak genellikle bu zayÄ±f noktayÄ± **DOM'da ilginÃ§ bir ÅŸey olmayan kÃ¼Ã§Ã¼k uÃ§ noktalarda bulacaksÄ±nÄ±z**.

Bu senaryolarda, bu saldÄ±rÄ± Ã§ok faydalÄ± olacaktÄ±r, Ã§Ã¼nkÃ¼ amacÄ±, **aynÄ± kÃ¶kenden farklÄ± bir sayfadaki DOM iÃ§indeki sÄ±nÄ±rlÄ± JS yÃ¼rÃ¼tÃ¼mÃ¼nÃ¼ kÃ¶tÃ¼ye kullanabilmektir** ve daha ilginÃ§ eylemler yapmaktÄ±r.

Temelde, saldÄ±rÄ± akÄ±ÅŸÄ± aÅŸaÄŸÄ±daki gibidir:

* **KÃ¶tÃ¼ye kullanabileceÄŸiniz bir geri Ã§aÄŸrÄ± bulun** (potansiyel olarak \[\w\\.\_]'ye sÄ±nÄ±rlÄ± olabilir).
* EÄŸer sÄ±nÄ±rlÄ± deÄŸilse ve herhangi bir JS yÃ¼rÃ¼tebiliyorsanÄ±z, bunu normal bir XSS olarak kÃ¶tÃ¼ye kullanabilirsiniz.
* **KurbanÄ±n, saldÄ±rgan tarafÄ±ndan kontrol edilen bir sayfayÄ± aÃ§masÄ±nÄ± saÄŸlayÄ±n**
* **Sayfa kendini** bir **farklÄ± pencerede aÃ§acak** (yeni pencere, baÅŸlangÄ±Ã§taki pencereyi referans alan **`opener`** nesnesine sahip olacaktÄ±r)
* **BaÅŸlangÄ±Ã§ sayfasÄ±**, **ilginÃ§ DOM**'un bulunduÄŸu **sayfayÄ± yÃ¼kleyecektir**.
* **Ä°kinci sayfa**, **kÃ¶tÃ¼ye kullanÄ±lan geri Ã§aÄŸrÄ±yÄ± kÃ¶tÃ¼ye kullanarak** ve **`opener`** nesnesini kullanarak **baÅŸlangÄ±Ã§ sayfasÄ±nda bazÄ± eylemleri eriÅŸip yÃ¼rÃ¼tmesi** iÃ§in **vulnerable** sayfayÄ± yÃ¼kleyecektir (ÅŸimdi ilginÃ§ DOM'u iÃ§eren baÅŸlangÄ±Ã§ sayfasÄ±nÄ± iÃ§erir).

{% hint style="danger" %}
UnutmayÄ±n ki, baÅŸlangÄ±Ã§ sayfa ikinci sayfayÄ± oluÅŸturduktan sonra yeni bir URL'ye eriÅŸse bile, **ikinci sayfanÄ±n `opener` nesnesi hala yeni DOM'daki ilk sayfaya geÃ§erli bir referanstÄ±r**.

AyrÄ±ca, ikinci sayfanÄ±n opener nesnesini kullanabilmesi iÃ§in **her iki sayfanÄ±n aynÄ± kÃ¶kende olmasÄ± gerekir**. Bu nedenle, bu zayÄ±flÄ±ÄŸÄ± kÃ¶tÃ¼ye kullanmak iÃ§in **aynÄ± kÃ¶kende XSS tÃ¼rÃ¼** bir ÅŸey bulmanÄ±z gerekmektedir.
{% endhint %}

### SÃ¶mÃ¼rÃ¼

* Bu formu kullanarak bu tÃ¼r bir zayÄ±flÄ±ÄŸÄ± sÃ¶mÃ¼rmek iÃ§in **PoC oluÅŸturabilirsiniz**: [https://www.someattack.com/Playground/SOMEGenerator](https://www.someattack.com/Playground/SOMEGenerator)
* Bir HTML Ã¶ÄŸesine tÄ±klamak iÃ§in bir DOM yolunu bulmak iÃ§in bu tarayÄ±cÄ± eklentisini kullanabilirsiniz: [https://www.someattack.com/Playground/targeting\_tool](https://www.someattack.com/Playground/targeting\_tool)

### Ã–rnek

* [https://www.someattack.com/Playground/](https://www.someattack.com/Playground/) adresinde zayÄ±f bir Ã¶rnek bulabilirsiniz
* Bu Ã¶rnekte sunucu **javascript kodu oluÅŸturuyor** ve **callback parametresinin iÃ§eriÄŸine gÃ¶re** HTML'ye ekliyor: `<script>opener.{callbacl_content}</script>` . Bu nedenle, bu Ã¶rnekte `opener`'Ä±n kullanÄ±mÄ±nÄ± aÃ§Ä±kÃ§a belirtmenize gerek yoktur.
* AyrÄ±ca bu CTF Ã§Ã¶zÃ¼mÃ¼ne bakÄ±n: [https://ctftime.org/writeup/36068](https://ctftime.org/writeup/36068)

## Referanslar

* [https://conference.hitb.org/hitbsecconf2017ams/sessions/everybody-wants-some-advance-same-origin-method-execution/](https://conference.hitb.org/hitbsecconf2017ams/sessions/everybody-wants-some-advance-same-origin-method-execution/)
