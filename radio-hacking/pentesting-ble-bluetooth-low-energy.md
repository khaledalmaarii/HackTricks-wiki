<details>

<summary><strong>ä»é›¶å¼€å§‹å­¦ä¹ AWSé»‘å®¢æŠ€æœ¯ï¼Œæˆä¸ºä¸“å®¶</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTEï¼ˆHackTricks AWSçº¢é˜Ÿä¸“å®¶ï¼‰</strong></a><strong>ï¼</strong></summary>

æ”¯æŒHackTricksçš„å…¶ä»–æ–¹å¼ï¼š

* å¦‚æœæ‚¨æƒ³çœ‹åˆ°æ‚¨çš„**å…¬å¸åœ¨HackTricksä¸­åšå¹¿å‘Š**æˆ–**ä¸‹è½½PDFæ ¼å¼çš„HackTricks**ï¼Œè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* è·å–[**å®˜æ–¹PEASS & HackTrickså‘¨è¾¹äº§å“**](https://peass.creator-spring.com)
* æ¢ç´¢[**PEASSå®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬çš„ç‹¬å®¶[**NFTs**](https://opensea.io/collection/the-peass-family)
* **åŠ å…¥** ğŸ’¬ [**Discordç¾¤**](https://discord.gg/hRep4RUj7f) æˆ– [**ç”µæŠ¥ç¾¤**](https://t.me/peass) æˆ–åœ¨**Twitter**ä¸Šå…³æ³¨æˆ‘ä»¬ ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)**ã€‚**
* é€šè¿‡å‘[**HackTricks**](https://github.com/carlospolop/hacktricks)å’Œ[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) githubä»“åº“æäº¤PRæ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚

</details>


# ä»‹ç»

è‡ªè“ç‰™4.0è§„èŒƒä»¥æ¥ï¼ŒBLEä»…ä½¿ç”¨40ä¸ªä¿¡é“ï¼Œè¦†ç›–2400è‡³2483.5 MHzèŒƒå›´ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œä¼ ç»Ÿè“ç‰™åœ¨åŒä¸€èŒƒå›´å†…ä½¿ç”¨79ä¸ªä¿¡é“ã€‚

BLEè®¾å¤‡é€šè¿‡å‘é€**å¹¿æ’­åŒ…**ï¼ˆ**ä¿¡æ ‡**ï¼‰è¿›è¡Œé€šä¿¡ï¼Œè¿™äº›åŒ…å‘å…¶ä»–é™„è¿‘è®¾å¤‡å¹¿æ’­BLEè®¾å¤‡çš„å­˜åœ¨ã€‚è¿™äº›ä¿¡æ ‡æœ‰æ—¶ä¹Ÿä¼š**å‘é€æ•°æ®**ã€‚

ç›‘å¬è®¾å¤‡ï¼Œä¹Ÿç§°ä¸ºä¸­å¤®è®¾å¤‡ï¼Œå¯ä»¥é€šè¿‡å‘å¹¿å‘Šè®¾å¤‡å‘é€ä¸“é—¨çš„**æ‰«æè¯·æ±‚**æ¥å“åº”å¹¿æ’­åŒ…ã€‚å¯¹è¯¥æ‰«æçš„**å“åº”**ä½¿ç”¨ä¸**å¹¿æ’­**åŒ…ç›¸åŒçš„ç»“æ„ï¼Œè¿˜åŒ…å«æ— æ³•æ”¾å…¥åˆå§‹å¹¿å‘Šè¯·æ±‚ä¸­çš„é™„åŠ ä¿¡æ¯ï¼Œä¾‹å¦‚å®Œæ•´è®¾å¤‡åç§°ã€‚

![](<../.gitbook/assets/image (201) (2) (1) (1).png>)

å‰å¯¼å­—èŠ‚åŒæ­¥é¢‘ç‡ï¼Œè€Œå››å­—èŠ‚çš„è®¿é—®åœ°å€æ˜¯ä¸€ä¸ª**è¿æ¥æ ‡è¯†ç¬¦**ï¼Œç”¨äºåœ¨å¤šä¸ªè®¾å¤‡å°è¯•åœ¨ç›¸åŒä¿¡é“ä¸Šå»ºç«‹è¿æ¥çš„æƒ…å†µä¸‹ä½¿ç”¨ã€‚æ¥ä¸‹æ¥ï¼Œåè®®æ•°æ®å•å…ƒï¼ˆ**PDU**ï¼‰åŒ…å«**å¹¿å‘Šæ•°æ®**ã€‚æœ‰å‡ ç§ç±»å‹çš„PDUï¼›æœ€å¸¸ç”¨çš„æ˜¯ADV\_NONCONN\_INDå’ŒADV\_INDã€‚å¦‚æœè®¾å¤‡**ä¸æ¥å—è¿æ¥**ï¼Œåˆ™ä½¿ç”¨**ADV\_NONCONN\_IND** PDUç±»å‹ï¼Œä»…åœ¨å¹¿æ’­åŒ…ä¸­ä¼ è¾“æ•°æ®ã€‚å¦‚æœè®¾å¤‡**å…è®¸è¿æ¥**å¹¶ä¸”ä¸€æ—¦**å»ºç«‹è¿æ¥**å°±**åœæ­¢å‘é€å¹¿å‘Š**åŒ…ï¼Œåˆ™ä½¿ç”¨**ADV\_IND**ã€‚

## GATT

**é€šç”¨å±æ€§é…ç½®æ–‡ä»¶**ï¼ˆGATTï¼‰å®šä¹‰äº†**è®¾å¤‡åº”å¦‚ä½•æ ¼å¼åŒ–å’Œä¼ è¾“æ•°æ®**ã€‚å½“æ‚¨åˆ†æBLEè®¾å¤‡çš„æ”»å‡»é¢æ—¶ï¼Œé€šå¸¸ä¼šé›†ä¸­æ³¨æ„åŠ›åœ¨GATTï¼ˆæˆ–GATTsï¼‰ä¸Šï¼Œå› ä¸ºè¿™æ˜¯**è§¦å‘è®¾å¤‡åŠŸèƒ½**ä»¥åŠå­˜å‚¨ã€åˆ†ç»„å’Œä¿®æ”¹æ•°æ®çš„æ–¹å¼ã€‚GATTä»¥16ä½æˆ–32ä½å€¼çš„å½¢å¼åœ¨è¡¨ä¸­åˆ—å‡ºè®¾å¤‡çš„ç‰¹å¾ã€æè¿°ç¬¦å’ŒæœåŠ¡ã€‚**ç‰¹å¾**æ˜¯åœ¨ä¸­å¤®è®¾å¤‡å’Œå¤–å›´è®¾å¤‡ä¹‹é—´**å‘é€çš„æ•°æ®**å€¼ã€‚è¿™äº›ç‰¹å¾å¯ä»¥æœ‰**æä¾›æœ‰å…³å®ƒä»¬çš„é™„åŠ ä¿¡æ¯çš„æè¿°ç¬¦**ã€‚å¦‚æœè¿™äº›ç‰¹å¾ä¸æ‰§è¡Œç‰¹å®šæ“ä½œç›¸å…³ï¼Œåˆ™é€šå¸¸ä¼šå°†**ç‰¹å¾****åˆ†ç»„**åœ¨**æœåŠ¡**ä¸­ã€‚

# æšä¸¾
```bash
hciconfig #Check config, check if UP or DOWN
# If DOWN try:
sudo modprobe -c bluetooth
sudo hciconfig hci0 down && sudo hciconfig hci0 up

# Spoof MAC
spooftooph -i hci0 -a 11:22:33:44:55:66
```
## GATTool

**GATTool** å…è®¸ä¸å¦ä¸€ä¸ªè®¾å¤‡å»ºç«‹è¿æ¥ï¼Œåˆ—å‡ºè¯¥è®¾å¤‡çš„ç‰¹å¾ï¼Œå¹¶è¯»å–å’Œå†™å…¥å…¶å±æ€§ã€‚\
GATTToolå¯ä»¥ä½¿ç”¨ `-I` é€‰é¡¹å¯åŠ¨äº¤äº’å¼ shellï¼š
```bash
gatttool -i hci0 -I
[ ][LE]> connect 24:62:AB:B1:A8:3E Attempting to connect to A4:CF:12:6C:B3:76 Connection successful
[A4:CF:12:6C:B3:76][LE]> characteristics
handle: 0x0002, char properties: 0x20, char value handle:
0x0003, uuid: 00002a05-0000-1000-8000-00805f9b34fb
handle: 0x0015, char properties: 0x02, char value handle:
0x0016, uuid: 00002a00-0000-1000-8000-00805f9b34fb
[...]

# Write data
gatttool -i <Bluetooth adapter interface> -b <MAC address of device> --char-write-req <characteristic handle> -n <value>
gatttool -b a4:cf:12:6c:b3:76 --char-write-req -a 0x002e -n $(echo -n "04dc54d9053b4307680a"|xxd -ps)

# Read data
gatttool -i <Bluetooth adapter interface> -b <MAC address of device> --char-read -a 0x16

# Read connecting with an authenticated encrypted connection
gatttool --sec-level=high -b a4:cf:12:6c:b3:76 --char-read -a 0x002c
```
## Bettercap

### BLE Sniffing

#### Passive Sniffing

Passive sniffing is the process of monitoring BLE traffic without actively participating in the communication. Bettercap can be used to passively sniff BLE traffic by setting up a BLE proxy and forwarding all traffic through it.

To start passive sniffing with Bettercap, use the following command:

```bash
ble.recon on
```

This command will enable BLE reconnaissance mode in Bettercap, allowing you to passively sniff BLE traffic in the vicinity.

#### Active Sniffing

Active sniffing involves actively participating in the BLE communication by sending specific packets to devices and capturing their responses. Bettercap supports active sniffing by allowing you to send custom BLE packets and analyze the responses.

To start active sniffing with Bettercap, use the following command:

```bash
ble.recon on
ble.enum
```

The `ble.enum` command will send enumeration packets to nearby devices and display their responses, allowing you to gather information about the devices in the vicinity.
```bash
# Start listening for beacons
sudo bettercap --eval "ble.recon on"
# Wait some time
>> ble.show # Show discovered devices
>> ble.enum <mac addr> # This will show the service, characteristics and properties supported

# Write data in a characteristic
>> ble.write <MAC ADDR> <UUID> <HEX DATA>
>> ble.write <mac address of device> ff06 68656c6c6f # Write "hello" in ff06
```
<details>

<summary><strong>ä»é›¶å¼€å§‹å­¦ä¹ AWSé»‘å®¢æŠ€æœ¯ï¼Œæˆä¸ºä¸“å®¶</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTEï¼ˆHackTricks AWS Red Team Expertï¼‰</strong></a><strong>ï¼</strong></summary>

å…¶ä»–æ”¯æŒHackTricksçš„æ–¹å¼ï¼š

* å¦‚æœæ‚¨æƒ³çœ‹åˆ°æ‚¨çš„**å…¬å¸åœ¨HackTricksä¸­åšå¹¿å‘Š**æˆ–**ä¸‹è½½PDFæ ¼å¼çš„HackTricks**ï¼Œè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* è·å–[**å®˜æ–¹PEASS & HackTrickså‘¨è¾¹äº§å“**](https://peass.creator-spring.com)
* æ¢ç´¢[**PEASSå®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬çš„ç‹¬å®¶[**NFTs**](https://opensea.io/collection/the-peass-family)
* **åŠ å…¥** ğŸ’¬ [**Discordç¾¤**](https://discord.gg/hRep4RUj7f) æˆ– [**ç”µæŠ¥ç¾¤**](https://t.me/peass) æˆ– **å…³æ³¨**æˆ‘ä»¬çš„**Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)**ã€‚**
* é€šè¿‡å‘[**HackTricks**](https://github.com/carlospolop/hacktricks)å’Œ[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) githubä»“åº“æäº¤PRæ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚

</details>
