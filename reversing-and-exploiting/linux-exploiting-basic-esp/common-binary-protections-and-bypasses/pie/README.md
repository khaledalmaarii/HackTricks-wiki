# PIE

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Osnovne informacije

Binarni fajl kompajliran kao PIE, ili **izvrÅ¡ni fajl nezavisne pozicije**, znaÄi da se **program moÅ¾e uÄitati na razliÄitim memorijskim lokacijama** svaki put kada se izvrÅ¡i, spreÄavajuÄ‡i hardkodirane adrese.

Trik za iskoriÅ¡Ä‡avanje ovih binarnih fajlova leÅ¾i u iskoriÅ¡Ä‡avanju **relativnih adresa**â€”ofseti izmeÄ‘u delova programa ostaju isti Äak i ako se apsolutne lokacije menjaju. Da biste **obiÅ¡li PIE, potrebno je da iscuri jedna adresa**, obiÄno sa **stack-a** koristeÄ‡i ranjivosti poput napada format string. Kada dobijete adresu, moÅ¾ete izraÄunati druge prema njihovim **fiksnim ofsetima**.

Koristan savet u iskoriÅ¡Ä‡avanju PIE binarnih fajlova je da njihova **osnovna adresa obiÄno zavrÅ¡ava sa 000** zbog toga Å¡to su memorijske stranice jedinice randomizacije, veliÄine 0x1000 bajtova. Ova usklaÄ‘enost moÅ¾e biti kritiÄna **provera ako eksploatacija ne funkcioniÅ¡e** kako se oÄekuje, ukazujuÄ‡i na to da li je identifikovana ispravna osnovna adresa.\
Ili moÅ¾ete koristiti ovo za vaÅ¡u eksploataciju, ako iscuri da se adresa nalazi na **`0x649e1024`** znate da je **osnovna adresa `0x649e1000`** i odatle moÅ¾ete samo **izraÄunati ofsete** funkcija i lokacija.

## ObilaÅ¾enja

Da biste obiÅ¡li PIE potrebno je **iscuriti neku adresu uÄitanog** binarnog fajla, postoje neke opcije za to:

* **OnemoguÄ‡en ASLR**: Ako je ASLR onemoguÄ‡en, binarni fajl kompajliran sa PIE se uvek **uÄitava na istoj adresi**, stoga **PIE Ä‡e biti beskoristan** jer Ä‡e adrese objekata uvek biti na istom mestu.
* Da vam **bude data** curenje (uobiÄajeno u lakim CTF izazovima, [**proverite ovaj primer**](https://ir0nstone.gitbook.io/notes/types/stack/pie/pie-exploit))
* **Brute-force EBP i EIP vrednosti** na stack-u dok ne iscurite ispravne:

{% content-ref url="bypassing-canary-and-pie.md" %}
[bypassing-canary-and-pie.md](bypassing-canary-and-pie.md)
{% endcontent-ref %}

* Koristite ranjivost za proizvoljno Äitanje kao Å¡to je [**format string**](../../format-strings/) da iscurite adresu binarnog fajla (npr. sa stack-a, kao u prethodnoj tehnici) da dobijete osnovu binarnog fajla i koristite ofsete odatle. [**PronaÄ‘ite primer ovde**](https://ir0nstone.gitbook.io/notes/types/stack/pie/pie-bypass).

## Reference

* [https://ir0nstone.gitbook.io/notes/types/stack/pie](https://ir0nstone.gitbook.io/notes/types/stack/pie)

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
