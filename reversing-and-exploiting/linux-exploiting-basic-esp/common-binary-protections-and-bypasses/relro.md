# Relro

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Relro

**RELRO** significa **Relocation Read-Only**, e √© um recurso de seguran√ßa usado em bin√°rios para mitigar os riscos associados a **GOT (Global Offset Table)** sobrescritas. Vamos dividir o conceito em seus dois tipos distintos para clareza: **Partial RELRO** e **Full RELRO**.

### **Partial RELRO**

**Partial RELRO** adota uma abordagem mais simples para aumentar a seguran√ßa sem impactar significativamente o desempenho do bin√°rio. Ao **posicionar o GOT acima das vari√°veis do programa na mem√≥ria, o Partial RELRO visa prevenir que estouros de buffer alcancem e corrompam o GOT**.&#x20;

Isso **n√£o impede que o GOT** seja abusado **a partir de vulnerabilidades de escrita arbitr√°ria**.

### **Full RELRO**

**Full RELRO** aumenta a prote√ß√£o ao **tornar o GOT completamente somente leitura.** Uma vez que o bin√°rio √© iniciado, todos os endere√ßos de fun√ß√£o s√£o resolvidos e carregados no GOT, ent√£o, o GOT √© marcado como somente leitura, efetivamente prevenindo quaisquer modifica√ß√µes durante a execu√ß√£o.

No entanto, a desvantagem do Full RELRO est√° em termos de desempenho e tempo de inicializa√ß√£o. Como precisa resolver todos os s√≠mbolos din√¢micos na inicializa√ß√£o antes de marcar o GOT como somente leitura, **bin√°rios com Full RELRO habilitado podem experimentar tempos de carregamento mais longos**. Essa sobrecarga adicional na inicializa√ß√£o √© a raz√£o pela qual o Full RELRO n√£o √© habilitado por padr√£o em todos os bin√°rios.

√â poss√≠vel verificar se o Full RELRO est√° habilitado em um bin√°rio com:
```bash
readelf -l /proc/ID_PROC/exe | grep BIND_NOW
```
## Bypass

Se o Full RELRO estiver habilitado, a √∫nica maneira de contorn√°-lo √© encontrar outra forma que n√£o precise escrever na tabela GOT para obter execu√ß√£o arbitr√°ria.

Note que o GOT da LIBC geralmente √© Partial RELRO, ent√£o pode ser modificado com uma escrita arbitr√°ria. Mais informa√ß√µes em [Targetting libc GOT entries](https://github.com/nobodyisnobody/docs/blob/main/code.execution.on.last.libc/README.md#1---targetting-libc-got-entries).

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
