# í¬ë§· ë¬¸ìì—´

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)ë¥¼ í†µí•´ ì œë¡œë¶€í„° AWS í•´í‚¹ì„ ë°°ìš°ì„¸ìš”</strong></summary>

* **ì‚¬ì´ë²„ ë³´ì•ˆ íšŒì‚¬**ì—ì„œ ì¼í•˜ì‹œë‚˜ìš”? **HackTricksì— ê·€ì‚¬ë¥¼ ê´‘ê³ í•˜ê³  ì‹¶ìœ¼ì‹ ê°€ìš”**? í˜¹ì€ **PEASSì˜ ìµœì‹  ë²„ì „ì— ì•¡ì„¸ìŠ¤í•˜ê±°ë‚˜ HackTricksë¥¼ PDFë¡œ ë‹¤ìš´ë¡œë“œ**í•˜ê³  ì‹¶ìœ¼ì‹ ê°€ìš”? [**êµ¬ë… ìš”ê¸ˆì œ**](https://github.com/sponsors/carlospolop)ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”!
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ë¥¼ ë°œê²¬í•´ë³´ì„¸ìš”, ì €í¬ì˜ ë…ì  [**NFT ì»¬ë ‰ì…˜**](https://opensea.io/collection/the-peass-family)
* [**ê³µì‹ PEASS & HackTricks ìŠ¤ì™¹**](https://peass.creator-spring.com)ì„ ë°›ì•„ë³´ì„¸ìš”
* [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f)ì´ë‚˜ [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— **ê°€ì…**í•˜ê±°ë‚˜ **íŠ¸ìœ„í„°** ğŸ¦[**@carlospolopm**](https://twitter.com/hacktricks\_live)**ë¥¼ íŒ”ë¡œìš°**í•˜ì„¸ìš”.
* **í•´í‚¹ íŠ¸ë¦­ì„ ê³µìœ í•˜ê³  ì‹¶ìœ¼ì‹œë‹¤ë©´** [**hacktricks repo**](https://github.com/carlospolop/hacktricks) **ë°** [**hacktricks-cloud repo**](https://github.com/carlospolop/hacktricks-cloud) **ë¡œ PRì„ ì œì¶œ**í•´ì£¼ì„¸ìš”.

</details>

## ê¸°ë³¸ ì •ë³´

C ì–¸ì–´ì—ì„œ **`printf`**ëŠ” **ë¬¸ìì—´ì„ ì¶œë ¥**í•˜ëŠ” ë° ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤. ì´ í•¨ìˆ˜ê°€ ê¸°ëŒ€í•˜ëŠ” **ì²« ë²ˆì§¸ ë§¤ê°œë³€ìˆ˜**ëŠ” **í¬ë§¤í„°ê°€ ìˆëŠ” ì›ì‹œ í…ìŠ¤íŠ¸**ì…ë‹ˆë‹¤. ê¸°ëŒ€ë˜ëŠ” **ë‹¤ìŒ ë§¤ê°œë³€ìˆ˜**ëŠ” ì›ì‹œ í…ìŠ¤íŠ¸ì—ì„œ **í¬ë§¤í„°ë¥¼ ëŒ€ì²´**í•  **ê°’ë“¤**ì…ë‹ˆë‹¤.

ì·¨ì•½ì ì€ **ê³µê²©ì í…ìŠ¤íŠ¸ê°€ ì´ í•¨ìˆ˜ì˜ ì²« ë²ˆì§¸ ì¸ìˆ˜ë¡œ ë“¤ì–´ê°ˆ ë•Œ** ë°œìƒí•©ë‹ˆë‹¤. ê³µê²©ìëŠ” **printf í¬ë§· ë¬¸ìì—´ ê¸°ëŠ¥ì„ ì•…ìš©**í•˜ì—¬ **ì„ì˜ì˜ ë°ì´í„°ë¥¼ ì„ì˜ì˜ ì£¼ì†Œì— ì“¸ ìˆ˜ ìˆê²Œ**í•˜ëŠ” **íŠ¹ìˆ˜ ì…ë ¥ì„ ì¡°ì‘**í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë ‡ê²Œ í•¨ìœ¼ë¡œì¨ **ì„ì˜ì˜ ì½”ë“œë¥¼ ì‹¤í–‰**í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.

í¬ë§¤í„°:
```bash
%08x â€”> 8 hex bytes
%d â€”> Entire
%u â€”> Unsigned
%s â€”> String
%n â€”> Number of written bytes
%hn â€”> Occupies 2 bytes instead of 4
<n>$X â€”> Direct access, Example: ("%3$d", var1, var2, var3) â€”> Access to var3
```
**`%n`**ì€ **ì§€ì •ëœ ì£¼ì†Œì— ì“°ì—¬ì§„ ë°”ì´íŠ¸ ìˆ˜**ë¥¼ **ì‘ì„±**í•©ë‹ˆë‹¤. ì“°ì—¬ì ¸ì•¼ í•˜ëŠ” **16ì§„ìˆ˜ ìˆ«ìë§Œí¼ ë°”ì´íŠ¸ë¥¼ ì“°ëŠ” ê²ƒ**ì´ ì›í•˜ëŠ” **ë°ì´í„°ë¥¼ ì“°ëŠ” ë°©ë²•**ì…ë‹ˆë‹¤.
```bash
AAAA%.6000d%4\$n â€”> Write 6004 in the address indicated by the 4Âº param
AAAA.%500\$08x â€”> Param at offset 500
```
### **Exploit Flow**

ì´ ì·¨ì•½ì ì„ í†µí•´ **ì„ì˜ì˜ ì£¼ì†Œì— ì•„ë¬´ ê²ƒì´ë‚˜ ì“¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤ (ì„ì˜ ì“°ê¸°).**

ëª©í‘œëŠ” ë‚˜ì¤‘ì— í˜¸ì¶œë  **GOT** í…Œì´ë¸”ì˜ **í•¨ìˆ˜**ì˜ **ì£¼ì†Œë¥¼ ë®ì–´ì“°ëŠ” ê²ƒ**ì…ë‹ˆë‹¤. ì´ìƒì ìœ¼ë¡œëŠ” ì‹¤í–‰ ê°€ëŠ¥í•œ ì„¹ì…˜ì— ìˆëŠ” **ì‰˜ì½”ë“œì˜ ì£¼ì†Œë¥¼ ì„¤ì •**í•  ìˆ˜ ìˆì§€ë§Œ, ì‹¤í–‰ ê°€ëŠ¥í•œ ì„¹ì…˜ì— ì‰˜ì½”ë“œë¥¼ ì‘ì„±í•  ìˆ˜ ì—†ì„ ê°€ëŠ¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤.\
ë”°ë¼ì„œ ë‹¤ë¥¸ ì˜µì…˜ì€ **ì‚¬ìš©ìë¡œë¶€í„° ì¸ìˆ˜ë¥¼ ë°›ëŠ” í•¨ìˆ˜**ë¥¼ **ë®ì–´ì“°ê³ ** ì´ë¥¼ **`system` í•¨ìˆ˜**ë¡œ ì§€ì •í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.

ì£¼ì†Œë¥¼ ì“°ê¸° ìœ„í•´ ì¼ë°˜ì ìœ¼ë¡œ 2ë‹¨ê³„ë¥¼ ê±°ì¹©ë‹ˆë‹¤: ë¨¼ì € ì£¼ì†Œì˜ **2ë°”ì´íŠ¸ë¥¼ ì“°ê³ ** ë‚˜ë¨¸ì§€ 2ë°”ì´íŠ¸ë¥¼ ì”ë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´ **`$hn`**ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.

**HOB**ëŠ” ì£¼ì†Œì˜ ìƒìœ„ 2ë°”ì´íŠ¸ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.\
**LOB**ëŠ” ì£¼ì†Œì˜ í•˜ìœ„ 2ë°”ì´íŠ¸ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.

ë”°ë¼ì„œ í˜•ì‹ ë¬¸ìì—´ì´ ì‘ë™í•˜ëŠ” ë°©ì‹ ë•Œë¬¸ì— ë¨¼ì € \[HOB, LOB] ì¤‘ **ë” ì‘ì€ ê²ƒì„ ë¨¼ì € ì¨ì•¼** í•©ë‹ˆë‹¤.

ë§Œì•½ HOB < LOBì´ë©´\
`[ì£¼ì†Œ+2][ì£¼ì†Œ]%.[HOB-8]x%[offset]\$hn%.[LOB-HOB]x%[offset+1]`

ë§Œì•½ HOB > LOBì´ë©´\
`[ì£¼ì†Œ+2][ì£¼ì†Œ]%.[LOB-8]x%[offset+1]\$hn%.[HOB-LOB]x%[offset]`

HOB LOB HOB\_shellcode-8 NÂºParam\_dir\_HOB LOB\_shell-HOB\_shell NÂºParam\_dir\_LOB

\`python -c 'print "\x26\x97\x04\x08"+"\x24\x97\x04\x08"+ "%.49143x" + "%4$hn" + "%.15408x" + "%5$hn"'\`

## Pwntools Template

ì´ëŸ¬í•œ ì·¨ì•½ì ì— ëŒ€í•œ exploitì„ ì¤€ë¹„í•˜ê¸° ìœ„í•œ í…œí”Œë¦¿ì„ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤:

{% content-ref url="format-strings-template.md" %}
[format-strings-template.md](format-strings-template.md)
{% endcontent-ref %}

<details>

<summary><strong>Learn AWS hacking from zero to hero with</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

* **ì‚¬ì´ë²„ ë³´ì•ˆ íšŒì‚¬**ì—ì„œ ì¼í•˜ì‹œë‚˜ìš”? **HackTricksì— ê·€ì‚¬ë¥¼ ê´‘ê³ í•˜ê³  ì‹¶ìœ¼ì‹ ê°€ìš”**? ë˜ëŠ” **PEASSì˜ ìµœì‹  ë²„ì „ì— ì•¡ì„¸ìŠ¤í•˜ê±°ë‚˜ HackTricksë¥¼ PDFë¡œ ë‹¤ìš´ë¡œë“œ**í•˜ê³  ì‹¶ìœ¼ì‹ ê°€ìš”? [**êµ¬ë… ìš”ê¸ˆì œ**](https://github.com/sponsors/carlospolop)ë¥¼ í™•ì¸í•˜ì„¸ìš”!
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ë¥¼ ë°œê²¬í•˜ì„¸ìš”, ì €í¬ì˜ ë…ì  [**NFTs**](https://opensea.io/collection/the-peass-family) ì»¬ë ‰ì…˜
* [**ê³µì‹ PEASS & HackTricks ìŠ¤ì™¹**](https://peass.creator-spring.com)ì„ ë°›ì•„ë³´ì„¸ìš”
* **ğŸ’¬** [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f)ì— ê°€ì…í•˜ê±°ë‚˜ [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— ì°¸ì—¬í•˜ê±°ë‚˜ **íŠ¸ìœ„í„°** ğŸ¦[**@carlospolopm**](https://twitter.com/hacktricks\_live)**ë¥¼ íŒ”ë¡œìš°í•˜ì„¸ìš”**.
* **í•´í‚¹ ìš”ë ¹ì„ ê³µìœ í•˜ë ¤ë©´** [**hacktricks repo**](https://github.com/carlospolop/hacktricks) **ë°** [**hacktricks-cloud repo**](https://github.com/carlospolop/hacktricks-cloud) **ë¡œ PRì„ ì œì¶œí•˜ì„¸ìš”**.

</details>
