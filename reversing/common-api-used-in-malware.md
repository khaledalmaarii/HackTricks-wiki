<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong>ë¥¼ í†µí•´ AWS í•´í‚¹ì„ ì²˜ìŒë¶€í„° ì „ë¬¸ê°€ê¹Œì§€ ë°°ì›Œë³´ì„¸ìš”<strong>!</strong></summary>

HackTricksë¥¼ ì§€ì›í•˜ëŠ” ë‹¤ë¥¸ ë°©ë²•:

* **íšŒì‚¬ë¥¼ HackTricksì—ì„œ ê´‘ê³ í•˜ê±°ë‚˜ HackTricksë¥¼ PDFë¡œ ë‹¤ìš´ë¡œë“œ**í•˜ë ¤ë©´ [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)ë¥¼ í™•ì¸í•˜ì„¸ìš”!
* [**ê³µì‹ PEASS & HackTricks ìŠ¤ì›¨ê·¸**](https://peass.creator-spring.com)ë¥¼ ì–»ìœ¼ì„¸ìš”.
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ë¥¼ ë°œê²¬í•˜ì„¸ìš”. ë…ì ì ì¸ [**NFTs**](https://opensea.io/collection/the-peass-family) ì»¬ë ‰ì…˜ì…ë‹ˆë‹¤.
* ğŸ’¬ [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— **ì°¸ì—¬**í•˜ê±°ë‚˜ **Twitter**ì—ì„œ **íŒ”ë¡œìš°**í•˜ì„¸ìš”. ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **HackTricks**ì™€ **HackTricks Cloud** github ì €ì¥ì†Œì— PRì„ ì œì¶œí•˜ì—¬ ìì‹ ì˜ í•´í‚¹ ê¸°ë²•ì„ ê³µìœ í•˜ì„¸ìš”.

</details>

<figure><img src="/.gitbook/assets/image (675).png" alt=""><figcaption></figcaption></figure>

ê°€ì¥ ì¤‘ìš”í•œ ì·¨ì•½ì ì„ ì°¾ì•„ì„œ ë” ë¹ ë¥´ê²Œ ìˆ˜ì •í•˜ì„¸ìš”. IntruderëŠ” ê³µê²© í‘œë©´ì„ ì¶”ì í•˜ê³  ì ê·¹ì ì¸ ìœ„í˜‘ ìŠ¤ìº”ì„ ì‹¤í–‰í•˜ì—¬ APIë¶€í„° ì›¹ ì•± ë° í´ë¼ìš°ë“œ ì‹œìŠ¤í…œê¹Œì§€ ì „ì²´ ê¸°ìˆ  ìŠ¤íƒì—ì„œ ë¬¸ì œë¥¼ ì°¾ìŠµë‹ˆë‹¤. [**ë¬´ë£Œë¡œ ì‹œë„í•´ë³´ì„¸ìš”**](https://www.intruder.io/?utm\_source=referral\&utm\_campaign=hacktricks) ì˜¤ëŠ˜.

{% embed url="https://www.intruder.io/?utm_campaign=hacktricks&utm_source=referral" %}

***


# ì¼ë°˜ì ì¸

## ë„¤íŠ¸ì›Œí‚¹

| Raw Sockets   | WinAPI Sockets |
| ------------- | -------------- |
| socket()      | WSAStratup()   |
| bind()        | bind()         |
| listen()      | listen()       |
| accept()      | accept()       |
| connect()     | connect()      |
| read()/recv() | recv()         |
| write()       | send()         |
| shutdown()    | WSACleanup()   |

## ì§€ì†ì„±

| ë ˆì§€ìŠ¤íŠ¸ë¦¬         | íŒŒì¼          | ì„œë¹„ìŠ¤                      |
| ---------------- | ------------- | ---------------------------- |
| RegCreateKeyEx() | GetTempPath() | OpenSCManager                |
| RegOpenKeyEx()   | CopyFile()    | CreateService()              |
| RegSetValueEx()  | CreateFile()  | StartServiceCtrlDispatcher() |
| RegDeleteKeyEx() | WriteFile()   |                              |
| RegGetValue()    | ReadFile()    |                              |

## ì•”í˜¸í™”

| ì´ë¦„                  |
| --------------------- |
| WinCrypt              |
| CryptAcquireContext() |
| CryptGenKey()         |
| CryptDeriveKey()      |
| CryptDecrypt()        |
| CryptReleaseContext() |

## ì•ˆí‹°-ë¶„ì„/ê°€ìƒ ë¨¸ì‹ 

| í•¨ìˆ˜ ì´ë¦„                                                | ì–´ì…ˆë¸”ë¦¬ ëª…ë ¹ì–´ |
| -------------------------------------------------------- | ---------------- |
| IsDebuggerPresent()                                      | CPUID()          |
| GetSystemInfo()                                          | IN()             |
| GlobalMemoryStatusEx()                                   |                  |
| GetVersion()                                             |                  |
| CreateToolhelp32Snapshot \[í”„ë¡œì„¸ìŠ¤ ì‹¤í–‰ ì—¬ë¶€ í™•ì¸] |                  |
| CreateFileW/A \[íŒŒì¼ ì¡´ì¬ ì—¬ë¶€ í™•ì¸]                  |                  |

## ì€ë‹‰

| ì´ë¦„                     |                                                                            |
| ------------------------ | -------------------------------------------------------------------------- |
| VirtualAlloc             | ë©”ëª¨ë¦¬ í• ë‹¹ (íŒ¨ì»¤)                                                         |
| VirtualProtect           | ë©”ëª¨ë¦¬ ê¶Œí•œ ë³€ê²½ (ì„¹ì…˜ì— ì‹¤í–‰ ê¶Œí•œ ë¶€ì—¬í•˜ëŠ” íŒ¨ì»¤)                           |
| ReadProcessMemory        | ì™¸ë¶€ í”„ë¡œì„¸ìŠ¤ì— ì£¼ì…                                                       |
| WriteProcessMemoryA/W    | ì™¸ë¶€ í”„ë¡œì„¸ìŠ¤ì— ì£¼ì…                                                       |
| NtWriteVirtualMemory     |                                                                            |
| CreateRemoteThread       | DLL/í”„ë¡œì„¸ìŠ¤ ì£¼ì…...                                                       |
| NtUnmapViewOfSection     |                                                                            |
| QueueUserAPC             |                                                                            |
| CreateProcessInternalA/W |                                                                            |

## ì‹¤í–‰

| í•¨ìˆ˜ ì´ë¦„    |
| ------------ |
| CreateProcessA/W |
| ShellExecute     |
| WinExec          |
| ResumeThread     |
| NtResumeThread   |

## ê¸°íƒ€

* GetAsyncKeyState() -- í‚¤ ë¡œê¹…
* SetWindowsHookEx -- í‚¤ ë¡œê¹…
* GetForeGroundWindow -- ì‹¤í–‰ ì¤‘ì¸ ì°½ ì´ë¦„ ê°€ì ¸ì˜¤ê¸° (ë˜ëŠ” ë¸Œë¼ìš°ì €ì˜ ì›¹ ì‚¬ì´íŠ¸)
* LoadLibrary() -- ë¼ì´ë¸ŒëŸ¬ë¦¬ ê°€ì ¸ì˜¤ê¸°
* GetProcAddress() -- ë¼ì´ë¸ŒëŸ¬ë¦¬ ê°€ì ¸ì˜¤ê¸°
* CreateToolhelp32Snapshot() -- ì‹¤í–‰ ì¤‘ì¸ í”„ë¡œì„¸ìŠ¤ ëª©ë¡
* GetDC() -- ìŠ¤í¬ë¦°ìƒ·
* BitBlt() -- ìŠ¤í¬ë¦°ìƒ·
* InternetOpen(), InternetOpenUrl(), InternetReadFile(), InternetWriteFile() -- ì¸í„°ë„· ì ‘ê·¼
* FindResource(), LoadResource(), LockResource() -- ì‹¤í–‰ íŒŒì¼ì˜ ë¦¬ì†ŒìŠ¤ ì ‘ê·¼

# ì•…ì„± ì†Œí”„íŠ¸ì›¨ì–´ ê¸°ë²•

## DLL ì£¼ì…

ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ ë‚´ì—ì„œ ì„ì˜ì˜ DLLì„ ì‹¤í–‰

1. ì•…ì„± DLLì„ ì£¼ì…í•  í”„ë¡œì„¸ìŠ¤ ì°¾ê¸°: CreateToolhelp32Snapshot, Process32First, Process32Next
2. í”„ë¡œì„¸ìŠ¤ ì—´ê¸°: GetModuleHandle, GetProcAddress, OpenProcess
3. DLL ê²½ë¡œë¥¼ í”„ë¡œì„¸ìŠ¤ ë‚´ì— ì‘ì„±: VirtualAllocEx, WriteProcessMemory
4. ì•…ì„± DLLì„ ë¡œë“œí•  í”„ë¡œì„¸ìŠ¤ ë‚´ì—ì„œ ìŠ¤ë ˆë“œ ìƒì„±: CreateRemoteThread, LoadLibrary

ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë‹¤ë¥¸ í•¨ìˆ˜: NTCreateThreadEx, RtlCreateUserThread

## ë°˜ì‚¬ì  DLL ì£¼ì…

ì¼ë°˜ì ì¸ Windows API í˜¸ì¶œì„ í•˜ì§€ ì•Šê³  ì•…ì„± DLLì„ ë¡œë“œí•©ë‹ˆë‹¤.\
DLLì€ í”„ë¡œì„¸ìŠ¤ ë‚´ì— ë§¤í•‘ë˜ë©°, ê°€ì ¸ì˜¤ê¸° ì£¼ì†Œë¥¼ í•´ê²°í•˜ê³  ì¬ë°°ì¹˜ë¥¼ ìˆ˜ì •í•˜ë©° DllMain í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤.

## ìŠ¤ë ˆë“œ í•˜ì´ì¬í‚¹

í”„ë¡œì„¸ìŠ¤ì—ì„œ ìŠ¤ë ˆë“œë¥¼ ì°¾ì•„ ì•…ì„± DLLì„ ë¡œë“œí•˜ë„ë¡ ë§Œë“­ë‹ˆë‹¤.

1. ëŒ€ìƒ ìŠ¤ë ˆë“œ ì°¾ê¸°: CreateToolhelp32Snapshot, Thread32First, Thread32Next
2. ìŠ¤ë ˆë“œ ì—´ê¸°: OpenThread
3. ìŠ¤ë ˆë“œ ì¼ì‹œ ì¤‘ì§€: SuspendThread
4. í”¼í•´ í”„ë¡œì„¸ìŠ¤ ë‚´ì— ì•…ì„± DLL ê²½ë¡œ ì‘ì„±: VirtualAllocEx, WriteProcessMemory
5. ìŠ¤ë ˆë“œë¥¼ ì¬ê°œí•˜ì—¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¡œë“œ: ResumeThread

## PE ì£¼ì…

í”¼í•´ í”„ë¡œì„¸ìŠ¤ì˜ ë©”ëª¨ë¦¬ì— ì‹¤í–‰ íŒŒì¼ì„ ì‘ì„±í•˜ê³  í•´ë‹¹ ìœ„ì¹˜ì—ì„œ ì‹¤í–‰í•©ë‹ˆë‹¤.

## í”„ë¡œì„¸ìŠ¤ í• ë¡œì‰

ì•…ì„± ì½”ë“œê°€ í”„ë¡œì„¸ìŠ¤ì˜ ë©”ëª¨ë¦¬ì—ì„œ ìœ íš¨í•œ ì½”ë“œë¥¼ í•´ì œí•˜ê³  ì•…ì„± ì´ì§„ íŒŒì¼ì„ ë¡œë“œí•©ë‹ˆë‹¤.

1. ìƒˆë¡œìš´ í”„ë¡œì„¸ìŠ¤ ìƒì„±: CreateProcess
2. ë©”ëª¨ë¦¬ í•´ì œ: ZwUnmapViewOfSection, NtUnmapViewOfSection
3. ì•…ì„± ì´ì§„ íŒŒì¼ì„ í”„ë¡œì„¸ìŠ¤ ë©”ëª¨ë¦¬ì— ì‘ì„±: VirtualAllocEc, WriteProcessMemory
4. ì§„ì…ì  ì„¤ì • ë° ì‹¤í–‰: SetThreadContext, ResumeThread

# í›„í‚¹

* **SSDT** (**System Service Descriptor Table**)ëŠ” ì‚¬ìš©ì í”„ë¡œì„¸ìŠ¤ê°€ ì»¤ë„ í•¨ìˆ˜ (ntoskrnl.exe) ë˜ëŠ” GUI ë“œ
* ğŸ’¬ [**ë””ìŠ¤ì½”ë“œ ê·¸ë£¹**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— ê°€ì…í•˜ê±°ë‚˜ **íŠ¸ìœ„í„°** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)ë¥¼ **íŒ”ë¡œìš°**í•˜ì„¸ìš”**.**
* ì—¬ëŸ¬ë¶„ì˜ í•´í‚¹ ê¸°ìˆ ì„ ê³µìœ í•˜ë ¤ë©´ [**HackTricks**](https://github.com/carlospolop/hacktricks) ë° [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github ì €ì¥ì†Œì— PRì„ ì œì¶œí•˜ì„¸ìš”.

</details>
