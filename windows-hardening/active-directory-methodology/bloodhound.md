# BloodHound рдФрд░ рдЕрдиреНрдп AD Enum рдЯреВрд▓реНрд╕

<details>

<summary><strong>рдЬрд╛рдиреЗрдВ AWS рд╣реИрдХрд┐рдВрдЧ рдХреЛ рд╢реВрдиреНрдп рд╕реЗ рд╣реАрд░реЛ рддрдХ</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong> рдХреЗ рд╕рд╛рде!</strong></summary>

* рдХреНрдпрд╛ рдЖрдк **рд╕рд╛рдЗрдмрд░ рд╕реБрд░рдХреНрд╖рд╛ рдХрдВрдкрдиреА** рдореЗрдВ рдХрд╛рдо рдХрд░рддреЗ рд╣реИрдВ? рдХреНрдпрд╛ рдЖрдк рдЕрдкрдиреА **рдХрдВрдкрдиреА рдХреЛ HackTricks рдореЗрдВ рд╡рд┐рдЬреНрдЮрд╛рдкрд┐рдд рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ**? рдпрд╛ рдХреНрдпрд╛ рдЖрдк **PEASS рдХреЗ рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдг рдпрд╛ HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдиреЗ рдХрд╛ рдПрдХреНрд╕реЗрд╕ рдЪрд╛рд╣рддреЗ рд╣реИрдВ**? [**рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдкреНрд▓рд╛рдиреНрд╕**](https://github.com/sponsors/carlospolop) рдХреА рдЬрд╛рдВрдЪ рдХрд░реЗрдВ!
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рд╡рд┐рд╢реЗрд╖ [**NFTs**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣ред
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS рдФрд░ HackTricks swag**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВред
* **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** [**ЁЯТм**](https://emojipedia.org/speech-balloon/) [**рдбрд┐рд╕реНрдХреЙрд░реНрдб рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдФрд░ **рдореБрдЭреЗ** рдЯреНрд╡рд┐рдЯрд░ рдкрд░ **рдлреЙрд▓реЛ** рдХрд░реЗрдВ ЁЯРж[**@carlospolopm**](https://twitter.com/hacktricks_live)**ред**
* **рдЕрдкрдиреЗ рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ, [hacktricks рд░реЗрдкреЛ](https://github.com/carlospolop/hacktricks) рдФрд░ [hacktricks-cloud рд░реЗрдкреЛ](https://github.com/carlospolop/hacktricks-cloud) рдореЗрдВ PR рдЬрдорд╛ рдХрд░рдХреЗ**ред

</details>

## AD Explorer

[AD Explorer](https://docs.microsoft.com/en-us/sysinternals/downloads/adexplorer) Sysinternal Suite рд╕реЗ рд╣реИ:

> рдПрдХ рдЙрдиреНрдирдд Active Directory (AD) рджрд░реНрд╢рдХ рдФрд░ рд╕рдВрдкрд╛рджрдХред рдЖрдк AD Explorer рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдПрдХ AD рдбреЗрдЯрд╛рдмреЗрд╕ рдореЗрдВ рдЖрд╕рд╛рдиреА рд╕реЗ рдиреЗрд╡рд┐рдЧреЗрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдкрд╕рдВрджреАрджрд╛ рд╕реНрдерд╛рдиреЛрдВ рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдСрдмреНрдЬ
```bash
# Run it
.\ADRecon.ps1
```
## BloodHound

From [https://github.com/BloodHoundAD/BloodHound](https://github.com/BloodHoundAD/BloodHound)

> BloodHound рдПрдХ рдПрдХрд▓ рдкреГрд╖реНрда рдЬрд╛рд╡рд╛рд╕реНрдХреНрд░рд┐рдкреНрдЯ рд╡реЗрдм рдПрдкреНрд▓рд┐рдХреЗрд╢рди рд╣реИ, рдЬреЛ [Linkurious](http://linkurio.us/) рдкрд░ рдирд┐рд░реНрдорд┐рдд рд╣реИ, [Electron](http://electron.atom.io/) рдХреЗ рдКрдкрд░ рд╕рдВрдХрд▓рд┐рдд рд╣реИ, рдЬрд┐рд╕рдореЗрдВ рдПрдХ [Neo4j](https://neo4j.com/) рдбреЗрдЯрд╛рдмреЗрд╕ C# рдбреЗрдЯрд╛ рдХрд▓реЗрдХреНрдЯрд░ рджреНрд╡рд╛рд░рд╛ рдкреЛрд╖рд┐рдд рд╣реИред

BloodHound рдЧреНрд░рд╛рдл рд╕рд┐рджреНрдзрд╛рдВрдд рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИ рддрд╛рдХрд┐ рдПрдХреНрдЯрд┐рд╡ рдбрд╛рдпрд░реЗрдХреНрдЯрд░реА рдпрд╛ рдПрдЬрд╝реНрдпреВрд░ рдорд╛рд╣реМрд▓ рдореЗрдВ рдЫрд┐рдкреА рд╣реБрдИ рдФрд░ рдЕрдХреНрд╕рд░ рдЕрдирдЬрд╛рди рд░рд┐рд╢реНрддреЛрдВ рдХреЛ рдкреНрд░рдХрдЯ рдХрд░ рд╕рдХреЗред рд╣рдорд▓рд╛рд╡рд░ BloodHound рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЖрд╕рд╛рдиреА рд╕реЗ рдЙрди рдЙрдЪреНрдЪ рдЬрдЯрд┐рд▓ рд╣рдорд▓реЗ рдХреЗ рдорд╛рд░реНрдЧреЛрдВ рдХреА рдкрд╣рдЪрд╛рди рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдЬреЛ рдЕрдиреНрдпрдерд╛ рддреЗрдЬреА рд╕реЗ рдкрд╣рдЪрд╛рдирдирд╛ рдЕрд╕рдВрднрд╡ рд╣реЛрдЧрд╛ред рд░рдХреНрд╖рдХ BloodHound рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЙрдиреА рд╣рдорд▓реЗ рдХреЗ рдорд╛рд░реНрдЧреЛрдВ рдХреА рдкрд╣рдЪрд╛рди рдФрд░ рд╕рдорд╛рдкреНрддрд┐ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред рдиреАрд▓рд╛ рдФрд░ рд▓рд╛рд▓ рджрд▓ рджреЛрдиреЛрдВ BloodHound рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдПрдХреНрдЯрд┐рд╡ рдбрд╛рдпрд░реЗрдХреНрдЯрд░реА рдпрд╛ рдПрдЬрд╝реНрдпреВрд░ рдорд╛рд╣реМрд▓ рдореЗрдВ рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░ рд╕рдВрдмрдВрдзреЛрдВ рдХреА рдПрдХ рдЧрд╣рд░реА рд╕рдордЭ рдкреНрд░рд╛рдкреНрдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред

рдЗрд╕рд▓рд┐рдП, [Bloodhound](https://github.com/BloodHoundAD/BloodHound) рдПрдХ рдЕрджреНрднреБрдд рдЙрдкрдХрд░рдг рд╣реИ рдЬреЛ рдПрдХ рдбреЛрдореЗрди рдХреЛ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдЧрдгрдирд╛ рдХрд░ рд╕рдХрддрд╛ рд╣реИ, рд╕рднреА рдЬрд╛рдирдХрд╛рд░реА рдХреЛ рд╕рд╣реЗрдЬ рд╕рдХрддрд╛ рд╣реИ, рд╕рдВрднрд╛рд╡рд┐рдд рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░ рдЙрдиреНрдирддрд┐ рдорд╛рд░реНрдЧреЛрдВ рдХреЛ рдЦреЛрдЬ рд╕рдХрддрд╛ рд╣реИ рдФрд░ рдЧреНрд░рд╛рдл рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╕рднреА рдЬрд╛рдирдХрд╛рд░реА рдХреЛ рджрд┐рдЦрд╛ рд╕рдХрддрд╛ рд╣реИред

Bloodhound 2 рдореБрдЦреНрдп рднрд╛рдЧреЛрдВ рд╕реЗ рдорд┐рд▓рдХрд░ рдмрдирд╛ рд╣реИ: **рдЗрдирдЬреЗрд╕реНрдЯрд░реНрд╕** рдФрд░ **рд╡рд┐рдЬреБрдЕрд▓рд╛рдЗрдЬреЗрд╢рди рдПрдкреНрд▓рд┐рдХреЗрд╢рди**ред

**рдЗрдирдЬреЗрд╕реНрдЯрд░реНрд╕** рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ **рдбреЛрдореЗрди рдХреЛ рдЧрдгрдирд╛ рдХрд░рдиреЗ рдФрд░ рд╕рднреА рдЬрд╛рдирдХрд╛рд░реА рдХреЛ рдирд┐рдХрд╛рд▓рдиреЗ** рдХреЗ рд▓рд┐рдП рдПрдХ рдкреНрд░рд╛рд░реВрдк рдореЗрдВ рдЬрд┐рд╕реЗ рд╡рд┐рдЬреБрдЕрд▓рд╛рдЗрдЬреЗрд╢рди рдПрдкреНрд▓рд┐рдХреЗрд╢рди рд╕рдордЭреЗрдЧрд╛ред

**рд╡рд┐рдЬреБрдЕрд▓рд╛рдЗрдЬреЗрд╢рди рдПрдкреНрд▓рд┐рдХреЗрд╢рди neo4j рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИ** рддрд╛рдХрд┐ рджрд┐рдЦрд╛рдП рдХреИрд╕реЗ рд╕рднреА рдЬрд╛рдирдХрд╛рд░реА рд╕рдВрдмрдВрдзрд┐рдд рд╣реИ рдФрд░ рдбреЛрдореЗрди рдореЗрдВ рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░реЛрдВ рдХреЛ рдЙрдиреНрдирдд рдХрд░рдиреЗ рдХреЗ рд╡рд┐рднрд┐рдиреНрди рддрд░реАрдХреЗ рджрд┐рдЦрд╛рдПред

### рд╕реНрдерд╛рдкрдирд╛
BloodHound CE рдХреЗ рдирд┐рд░реНрдорд╛рдг рдХреЗ рдмрд╛рдж, рдкреВрд░реЗ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХреЛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП Docker рдХреЗ рд╕рд╛рде рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рд░реВрдк рд╕реЗ рдЕрдкрдбреЗрдЯ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ред рд╢реБрд░реВ рд╣реЛрдиреЗ рдХрд╛ рд╕рдмрд╕реЗ рдЖрд╕рд╛рди рддрд░реАрдХрд╛ рдЗрд╕рдХрд╛ рдкреВрд░реНрд╡-рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд┐рдпрд╛ рдЧрдпрд╛ Docker Compose рд╡рд┐рдиреНрдпрд╛рд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рд╣реИред

1. Docker Compose рд╕реНрдерд╛рдкрд┐рдд рдХрд░реЗрдВред рдпрд╣ [Docker Desktop](https://www.docker.com/products/docker-desktop/) рд╕реНрдерд╛рдкрдирд╛ рдХреЗ рд╕рд╛рде рд╢рд╛рдорд┐рд▓ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред
2. рдЪрд▓рд╛рдПрдБ:
```
curl -L https://ghst.ly/getbhce | docker compose -f - up
```
3. рдбреЙрдХрд░ рдХреЙрдореНрдкреЛрдЬ рдХреЗ рдЯрд░реНрдорд┐рдирд▓ рдЖрдЙрдЯрдкреБрдЯ рдореЗрдВ рдпрд╛рджреГрдЪреНрдЫрд┐рдХ рд░реВрдк рд╕реЗ рдЙрддреНрдкрдиреНрди рдкрд╛рд╕рд╡рд░реНрдб рдХрд╛ рдкрддрд╛ рд▓рдЧрд╛рдПрдВред
4. рдмреНрд░рд╛рдЙрдЬрд╝рд░ рдореЗрдВ, http://localhost:8080/ui/login рдкрд░ рдиреЗрд╡рд┐рдЧреЗрдЯ рдХрд░реЗрдВред рд▓реЙрдЧреНрд╕ рд╕реЗ рдПрдбрдорд┐рди рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдирд╛рдо рдФрд░ рдпрд╛рджреГрдЪреНрдЫрд┐рдХ рд░реВрдк рд╕реЗ рдЙрддреНрдкрдиреНрди рдкрд╛рд╕рд╡рд░реНрдб рдХреЗ рд╕рд╛рде рд▓реЙрдЧрд┐рди рдХрд░реЗрдВред

рдЗрд╕рдХреЗ рдмрд╛рдж рдЖрдкрдХреЛ рдпрд╛рджреГрдЪреНрдЫрд┐рдХ рд░реВрдк рд╕реЗ рдЙрддреНрдкрдиреНрди рдкрд╛рд╕рд╡рд░реНрдб рдмрджрд▓рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдЧреА рдФрд░ рдЖрдкрдХреЗ рдкрд╛рд╕ рдирдпрд╛ рдЗрдВрдЯрд░рдлреЗрд╕ рддреИрдпрд╛рд░ рд╣реЛ рдЬрд╛рдПрдЧрд╛, рдЬрд┐рд╕рд╕реЗ рдЖрдк рд╕реАрдзреЗ рдЗрдВрдЬреЗрд╕реНрдЯрд░реНрд╕ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред

### SharpHound

рдЙрдирдХреЗ рдкрд╛рд╕ рдХрдИ рд╡рд┐рдХрд▓реНрдк рд╣реИрдВ, рд▓реЗрдХрд┐рди рдпрджрд┐ рдЖрдк рдбреЛрдореЗрди рд╕реЗ рдЬреБрдбрд╝реЗ рдПрдХ рдкреАрд╕реА рд╕реЗ SharpHound рдЪрд▓рд╛рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ, рдЕрдкрдиреЗ рд╡рд░реНрддрдорд╛рди рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╕рднреА рдЬрд╛рдирдХрд╛рд░реА рдирд┐рдХрд╛рд▓рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдк рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ:
```
./SharpHound.exe --CollectionMethods All
Invoke-BloodHound -CollectionMethod All
```
> рдЖрдк **CollectionMethod** рдФрд░ рд▓реВрдк рд╕рддреНрд░ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЕрдзрд┐рдХ рдкрдврд╝ рд╕рдХрддреЗ рд╣реИрдВ [рдпрд╣рд╛рдБ](https://support.bloodhoundenterprise.io/hc/en-us/articles/17481375424795-All-SharpHound-Community-Edition-Flags-Explained)

рдпрджрд┐ рдЖрдк рд╡рд┐рднрд┐рдиреНрди рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ SharpHound рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рддреЛ рдЖрдк рдПрдХ CMD netonly рд╕рддреНрд░ рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рд╡рд╣рд╛рдВ рд╕реЗ SharpHound рдЪрд▓рд╛ рд╕рдХрддреЗ рд╣реИрдВ:
```
runas /netonly /user:domain\user "powershell.exe -exec bypass"
```
[**рдЖрдИрдЖрд░рдИрдбреА рдЯреАрдо рдореЗрдВ рдмреНрд▓рдбрд╣рд╛рдЙрдВрдб рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЕрдзрд┐рдХ рдЬрд╛рдиреЗрдВред**](https://ired.team/offensive-security-experiments/active-directory-kerberos-abuse/abusing-active-directory-with-bloodhound-on-kali-linux)


## Group3r

[**Group3r**](https://github.com/Group3r/Group3r) рдПрдХ рдЯреВрд▓ рд╣реИ рдЬреЛ Active Directory рд╕реЗ рдЬреБрдбрд╝реЗ **рдЧреНрд░реБрдк рдкреЙрд▓рд┐рд╕реА** рдореЗрдВ **рдХрдордЬреЛрд░рд┐рдпреЛрдВ** рдХреЛ рдЦреЛрдЬрдиреЗ рдХреЗ рд▓рд┐рдП рд╣реИред \
рдЖрдкрдХреЛ **рдХрд┐рд╕реА рднреА рдбреЛрдореЗрди рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛** рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдбреЛрдореЗрди рдХреЗ рднреАрддрд░ рд╕реЗ **рдЧреНрд░реБрдк3рд░** рдЪрд▓рд╛рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред
```bash
group3r.exe -f <filepath-name.log>
# -s sends results to stdin
# -f send results to file
```
## PingCastle

[**PingCastle**](https://www.pingcastle.com/documentation/) **рдПрдбреА рд╡рд╛рддрд╛рд╡рд░рдг рдХреА рд╕реБрд░рдХреНрд╖рд╛ рд╕реНрдерд┐рддрд┐ рдХрд╛ рдореВрд▓реНрдпрд╛рдВрдХрди рдХрд░рддрд╛ рд╣реИ** рдФрд░ рдПрдХ рдЕрдЪреНрдЫреА **рд░рд┐рдкреЛрд░реНрдЯ** рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ рдЬрд┐рд╕рдореЗрдВ рдЧреНрд░рд╛рдл рд╢рд╛рдорд┐рд▓ рд╣реИрдВред

рдЗрд╕реЗ рдЪрд▓рд╛рдиреЗ рдХреЗ рд▓рд┐рдП, `PingCastle.exe` рдирд╛рдордХ рдмрд╛рдЗрдирд░реА рдХреЛ рдЪрд▓рд╛ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдпрд╣ рдПрдХ **рдЗрдВрдЯрд░реИрдХреНрдЯрд┐рд╡ рд╕рддреНрд░** рд╢реБрд░реВ рдХрд░реЗрдЧрд╛ рдЬрд┐рд╕рдореЗрдВ рд╡рд┐рдХрд▓реНрдкреЛрдВ рдХрд╛ рдПрдХ рдореЗрдиреВ рдкреНрд░рд╕реНрддреБрдд рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд╡рд┐рдХрд▓реНрдк **`healthcheck`** рд╣реИ рдЬреЛ **рдбреЛрдореЗрди** рдХрд╛ рдПрдХ рдореВрд▓ **рдЕрд╡рд▓реЛрдХрди** рд╕реНрдерд╛рдкрд┐рдд рдХрд░реЗрдЧрд╛, рдФрд░ **рдорд┐рд╕рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди** рдФрд░ **рд╡рдВрд▓реНрдирд░рдмрд┐рд▓рд┐рдЯреАрдЬрд╝** рдЦреЛрдЬреЗрдЧрд╛ред&#x20;
